/*! For license information please see templatemod.bundle.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("templatemod",[],t):"object"==typeof exports?exports.templatemod=t():e.templatemod=t()}(this,(()=>(()=>{var e={6538:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});const n={INVALID_PARAM_LANGUAGE:e=>`Invalid parameter for \`language\` provided. Expected a string, but got ${typeof e}.`,INVALID_PARAM_JSON:e=>`Invalid parameter for \`json\` provided. Expected an object, but got ${typeof e}.`,EMPTY_PARAM_LANGUAGE:()=>"The parameter for `language` can't be an empty string.",EMPTY_PARAM_JSON:()=>"The parameter for `json` must have at least one key/value pair.",INVALID_PARAM_KEY:e=>`Invalid parameter for \`key\` provided. Expected a string, but got ${typeof e}.`,NO_LANGUAGE_REGISTERED:e=>`No translation for language "${e}" has been added, yet. Make sure to register that language using the \`.add()\` method first.`,TRANSLATION_NOT_FOUND:(e,t)=>`No translation found for key "${e}" in language "${t}". Is there a key/value in your translation file?`,INVALID_PARAMETER_SOURCES:e=>`Invalid parameter for \`sources\` provided. Expected either a string or an array, but got ${typeof e}.`,FETCH_ERROR:e=>`Could not fetch "${e.url}": ${e.status} (${e.statusText})`,INVALID_ENVIRONMENT:()=>"You are trying to execute the method `translatePageTo()`, which is only available in the browser. Your environment is most likely Node.js",MODULE_NOT_FOUND:e=>e,MISMATCHING_ATTRIBUTES:(e,t,r)=>`The attributes "data-i18n" and "data-i18n-attr" must contain the same number of keys.\n\nValues in \`data-i18n\`:      (${e.length}) \`${e.join(" ")}\`\nValues in \`data-i18n-attr\`: (${t.length}) \`${t.join(" ")}\`\n\nThe HTML element is:\n${r.outerHTML}`,INVALID_OPTIONS:e=>`Invalid config passed to the \`Translator\` constructor. Expected an object, but got ${typeof e}. Using default config instead.`};function i(e){return function(t,...r){if(e)try{const e=n[t];throw new TypeError(e?e(...r):"Unhandled Error")}catch(e){const r=e.stack.split(/\n/g)[1],[n,i]=r.split(/@/);console.error(`${e.message}\n\nThis error happened in the method \`${n}\` from: \`${i}\`.\n\nIf you don't want to see these error messages, turn off debugging by passing \`{ debug: false }\` to the constructor.\n\nError code: ${t}\n\nCheck out the documentation for more details about the API:\nhttps://github.com/andreasremdt/simple-translator#usage\n        `)}}}e=r.hmd(e);class a{constructor(e={}){this.debug=i(!0),("object"!=typeof e||Array.isArray(e))&&(this.debug("INVALID_OPTIONS",e),e={}),this.languages=new Map,this.config=Object.assign(a.defaultConfig,e);const{debug:t,registerGlobally:r,detectLanguage:n}=this.config;this.debug=i(t),r&&(this._globalObject[r]=this.translateForKey.bind(this)),n&&"browser"==this._env&&this._detectLanguage()}get _globalObject(){return"browser"==this._env?window:r.g}get _env(){return"undefined"!=typeof window?"browser":e.exports?"node":"browser"}_detectLanguage(){const e=localStorage.getItem(this.config.persistKey);if(e)this.config.defaultLanguage=e;else{const e=navigator.languages?navigator.languages[0]:navigator.language;this.config.defaultLanguage=e.substr(0,2)}}_getValueFromJSON(e,t){const r=this.languages.get(t);return e.split(".").reduce(((e,t)=>e?e[t]:null),r)}_replace(e,t){const r=e.getAttribute("data-i18n")?.split(/\s/g),n=e?.getAttribute("data-i18n-attr")?.split(/\s/g);n&&r.length!=n.length&&this.debug("MISMATCHING_ATTRIBUTES",r,n,e),r.forEach(((r,i)=>{const a=this._getValueFromJSON(r,t),o=n?n[i]:"innerHTML";a?"innerHTML"==o?e[o]=a:e.setAttribute(o,a):this.debug("TRANSLATION_NOT_FOUND",r,t)}))}translatePageTo(e=this.config.defaultLanguage){if("node"==this._env)return void this.debug("INVALID_ENVIRONMENT");if("string"!=typeof e)return void this.debug("INVALID_PARAM_LANGUAGE",e);if(0==e.length)return void this.debug("EMPTY_PARAM_LANGUAGE");if(!this.languages.has(e))return void this.debug("NO_LANGUAGE_REGISTERED",e);const t="string"==typeof this.config.selector?Array.from(document.querySelectorAll(this.config.selector)):this.config.selector;t.length&&t.length>0?t.forEach((t=>this._replace(t,e))):null==t.length&&this._replace(t,e),this._currentLanguage=e,document.documentElement.lang=e,this.config.persist&&localStorage.setItem(this.config.persistKey,e)}translateForKey(e,t=this.config.defaultLanguage){if("string"!=typeof e)return this.debug("INVALID_PARAM_KEY",e),null;if(!this.languages.has(t))return this.debug("NO_LANGUAGE_REGISTERED",t),null;return this._getValueFromJSON(e,t)||(this.debug("TRANSLATION_NOT_FOUND",e,t),null)}add(e,t){return"string"!=typeof e?(this.debug("INVALID_PARAM_LANGUAGE",e),this):0==e.length?(this.debug("EMPTY_PARAM_LANGUAGE"),this):Array.isArray(t)||"object"!=typeof t?(this.debug("INVALID_PARAM_JSON",t),this):0==Object.keys(t).length?(this.debug("EMPTY_PARAM_JSON"),this):(this.languages.set(e,t),this)}remove(e){return"string"!=typeof e?(this.debug("INVALID_PARAM_LANGUAGE",e),this):0==e.length?(this.debug("EMPTY_PARAM_LANGUAGE"),this):(this.languages.delete(e),this)}fetch(e,t=!0){if(!Array.isArray(e)&&"string"!=typeof e)return this.debug("INVALID_PARAMETER_SOURCES",e),null;Array.isArray(e)||(e=[e]);const r=e.map((e=>{const t=e.replace(/\.json$/,"").replace(/^\//,"");return`${this.config.filesLocation.replace(/\/$/,"")}/${t}.json`}));if("browser"==this._env)return Promise.all(r.map((e=>fetch(e)))).then((e=>Promise.all(e.map((e=>{if(e.ok)return e.json();this.debug("FETCH_ERROR",e)}))))).then((r=>(r=r.filter((e=>e)),t&&r.forEach(((t,r)=>{this.add(e[r],t)})),r.length>1?r:r[0])));this._env}setDefaultLanguage(e){if("string"==typeof e){if(0!=e.length)return this.languages.has(e)?void(this.config.defaultLanguage=e):(this.debug("NO_LANGUAGE_REGISTERED",e),null);this.debug("EMPTY_PARAM_LANGUAGE")}else this.debug("INVALID_PARAM_LANGUAGE",e)}get currentLanguage(){return this._currentLanguage||this.config.defaultLanguage}get defaultLanguage(){return this.config.defaultLanguage}static get defaultConfig(){return{defaultLanguage:"en",detectLanguage:!0,selector:"[data-i18n]",debug:!1,registerGlobally:"__",persist:!1,persistKey:"preferred_language",filesLocation:"/i18n"}}}const o=a},5212:(e,t,r)=>{"use strict";r.d(t,{PDFCursorTools:()=>a}),!document.documentMode||document.documentMode;const n=window.chrome;let i;n&&(n.webstore||n.app),/Apple/.test(navigator.vendor)&&/Version\/([6-9]\d*|[1-5]\d+)/.test(navigator.userAgent),["webkitM","mozM","msM","oM","m"].some((function(e){let t=e+"atches";return t in document.documentElement&&(i=t),t+="Selector",t in document.documentElement&&(i=t),i}));class a{constructor({container:e,eventBus:t,cursorToolOnLoad:r=1}){this.container=e,this.eventBus=t,this.active=0,this.activeBeforePresentationMode=null,this.handTool=new GrabToPan({element:this.container}),this._addEventListeners(),Promise.resolve().then((()=>{this.switchTool(r)}))}get activeTool(){return this.active}switchTool(e){if(null!==this.activeBeforePresentationMode)return;if(e===this.active)return;const t=()=>{switch(this.active){case 0:break;case 1:this.handTool.deactivate()}};switch(e){case 0:t();break;case 1:t(),this.handTool.activate();break;case 2:break;default:return void console.error(`switchTool: "${e}" is an unsupported value.`)}this.active=e,this._dispatchEvent()}_dispatchEvent(){this.eventBus.dispatch("cursortoolchanged",{source:this,tool:this.active})}_addEventListeners(){this.eventBus._on("switchcursortool",(e=>{this.switchTool(e.tool)})),this.eventBus._on("presentationmodechanged",(e=>{if(e.switchInProgress)return;let t;e.active?(t=this.active,this.switchTool(0),this.activeBeforePresentationMode=t):(t=this.activeBeforePresentationMode,this.activeBeforePresentationMode=null,this.switchTool(t))}))}}},6479:function(e){e.exports=function(){"use strict";var e=function(e){return Array.isArray(e)},t=function(e){return"function"==typeof e},r=function(e,t){return e&&a(t)&&e instanceof t},n=function(e){return"number"==typeof e},i=function(e,t){return void 0===t&&(t=!0),"object"==typeof e&&(!t||r(e,Object))},a=function(e){return function(e){return void 0!==e}(e)&&!function(e){return null===e}(e)},o=function(e){return"string"==typeof e},l=function t(r){if(e(r))return r.map((function(e){return t(r)}));if(i(r)){for(var n in r)r[n]=t(r[n]);return r}return!1===r?"false":null===r?"null":!0===r?"true":""+r},s=function(e){return e.toUpperCase()},d=function(e,t){return a(t[0])&&e<t[0]?t[0]:a(t[1])&&e>t[1]?t[1]:e},c=function(e,t){return void 0===t&&(t=10),t?parseInt(e,t):parseFloat(e)},u=function(e){return Object.keys(e)},h=function(e){return n(e)?Math.round(e):null},p=function(e,t){return void 0===t&&(t=10),n(e)?e.toString(t):""+e},f=function t(r){if(e(r))return r.map((function(e){return t(e)}));if(function(e){return/^-?(?:\d*.)?\d+$/.test(e+"")}(r))return c(r);if(i(r)){for(var n in r)r[n]=t(r[n]);return r}return"false"!==r&&("null"===r?null:"true"===r||r)},g=document,m=window,v=g.body,A=g.documentElement,T=function(e,t,r){if(void 0===r&&(r=!0),!b(e,t))return null;var n=e.getAttribute(t);return r?f(n):n},E=function(e,t,r){void 0===r&&(r=!0);var n=T(e,"data-"+t,r),i=(n+"").trim();return r&&i&&("["===i[0]&&"]"===i.slice(-1)||"{"===i[0]&&"}"===i.slice(-1))&&null!==(i=function(e){var t=null;try{t=JSON.parse(e)}catch(e){}return t}(n))?i:n},_=function(e){return e.parentNode||null},b=function(e,t){return e.hasAttribute(t)},y=function(e,t){return t in e},S=function(e,t){return e.removeAttribute(t),e},x=function(e,t,r){return!0===r&&(r=t),e.setAttribute(t,l(r)),e},C=function(e,t){return e.appendChild(t),t},F=function(t,r,n){return(e(n)||i(n))&&(a=n,n=JSON.stringify(a)),x(t,"data-"+r,n);var a},w=function(e,t,r){return e=o(e)?g.createElement(e):e,i(t)&&(r=t,t=!1),o(t)&&L(e,t),i(r)&&function(e,t){var r;for(var n in t)(r=t[n])||""===r||0===r?x(e,n,r):S(e,n)}(e,r),e},L=function(e,t,r){if(void 0===r&&(r=!0),null===t)return e;var n="innerHTML";return y(e,n)&&(e[n]=r?t.trim():t),e},I=function(e,t,r){return n(r)&&(r+="px"),e.style[(i=t,i.replace(/[-_.](\w)/g,(function(e,t){return s(t)})))]=l(r),e;var i},N=function(e,t,r){e.forEach((function(e){return function(e,t,r){t.removeEventListener(e,r)}(e,t,r)}))},R=function(e,t,r,n){void 0===n&&(n=!1),e.forEach((function(e){return function(e,t,r,n){if(void 0===n||!1===n){var i=!1;try{var a=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassive",null,a),window.removeEventListener("testPassive",null,a)}catch(e){}n=!!i&&{passive:!0}}t.addEventListener(e,r,n)}(e,t,r,n)}))};var O=function(e,t){var r=e.touches,n=r?r[0].clientX:e.clientX,i=r?r[0].clientY:e.clientY;if(t){var a=D(t);return[n-a[0],i-a[1],a[0],a[1]]}return[n,i]},D=function(e){var t,r,n,i,a,o,l;return function(e){return e===m}(e)?(i=e.pageXOffset||A.scrollLeft||v.scrollLeft,a=e.pageYOffset||A.scrollTop||v.scrollTop,n=e.innerWidth,t=e.innerHeight):(i=(r=e.getBoundingClientRect()).left,a=r.top,n=r.width,t=r.height,o=r.right,l=r.bottom),[i,a,n,t,o,l]};let B="CP",M=m.setTimeout,P="HEX";function k(e,t){if(e===t)return e;for(;(e=e.parentElement)&&e!==t;);return e}function V(e){let t,r,n,i,o,l,s,d,c=+e[0],u=+e[1],p=+e[2];switch(i=Math.floor(6*c),o=6*c-i,l=p*(1-u),s=p*(1-o*u),d=p*(1-(1-o)*u),i=i||0,s=s||0,d=d||0,i%6){case 0:t=p,r=d,n=l;break;case 1:t=s,r=p,n=l;break;case 2:t=l,r=p,n=d;break;case 3:t=l,r=s,n=p;break;case 4:t=d,r=l,n=p;break;case 5:t=p,r=l,n=s}return[h(255*t),h(255*r),h(255*n),a(e[3])?+e[3]:1]}function G(e){let t,r,n=+e[0]/255,i=+e[1]/255,o=+e[2]/255,l=Math.max(n,i,o),s=Math.min(n,i,o),d=l,c=l-s;if(r=0===l?0:c/l,l===s)t=0;else{switch(l){case n:t=(i-o)/c+(i<o?6:0);break;case i:t=(o-n)/c+2;break;case o:t=(n-i)/c+4}t/=6}return[t,r,d,a(e[3])?+e[3]:1]}const q=["touchstart","mousedown"],U=["touchmove","mousemove"],H=["orientationchange","resize"],W=["touchend","mouseup"];function Y(e,n={}){if(g||(g=document),m||(m=window),v||(v=g.body),A||(A=g.documentElement),!e)return;const l=this;if(!r(l,Y))return new Y(e,n);if(e[B])return;let{fire:s,hooks:c}=function(e){var t={};return e.hooks=t,e.fire=function(r,n){return a(t[r])?(t[r].forEach((function(t){return t.apply(e,n)})),e):e},e.off=function(r,n){if(!a(r))return t={},e;if(a(t[r]))if(a(n)){for(var i=0,o=t[r].length;i<o;++i)if(n===t[r][i]){t[r].splice(i,1);break}0===j&&delete t[r]}else delete t[r];return e},e.on=function(r,n){return a(t[r])||(t[r]=[]),a(n)&&t[r].push(n),e},e}(l);function h(r){let i,o=Y[t(Y[n.color])?n.color:P];return(i=E(e,"color"))?a(r)?F(e,"color",o(r)):o(i):(i=function(e,t){return y(e,t)&&e[t]||null}(e,"value"))?a(r)?(l=e,s="value",d=o(r),l[s]=d,l):o(i):(i=function(e,t){void 0===t&&(t=!0);var r="textContent";if(!y(e,r))return!1;var n=e[r];return""!==(n=t?n.trim():n)?n:null}(e))?a(r)?function(e,t,r){if(void 0===r&&(r=!0),null===t)return e;var n="textContent";return y(e,n)&&(e[n]=r?t.trim():t),e}(e,o(r)):o(i):a(r)?void 0:[0,0,0,1];var l,s,d}var p;l.state=n=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Object.assign.apply(Object,[{}].concat(t))}(Y.state,o(n)?{color:n}:n||{}),l.source=e,l.visible=!1,Y.instances[e.id||e.name||(p=Y.instances,function(e){return e.length}(u(p)))]=l,e[B]=1;let f,T,b,S,x=n.class,L=h(),$=G(L),z=w("div",{class:x}),X=w("div"),K=w("div",{class:x+":sv"}),J=w("div",{class:x+":h"}),Z=w("div",{class:x+":a"}),Q=w("div"),ee=w("div"),te=w("div"),re=w("i"),ne=w("div"),ie=w("i"),ae=w("div"),oe=w("div"),le=w("i"),se=0,de=0,ce=0,ue=0,he=0,pe=0;function fe(t){if(c.focus)s("focus",L);else{let r=t.target;e===k(r,e)?!_(z)&&f(n.parent):T()}}return C(z,X),C(X,K),C(X,J),C(X,Z),C(K,Q),C(K,ee),C(K,te),C(K,re),C(J,ne),C(J,ie),C(Z,ae),C(Z,oe),C(Z,le),function r(o,u){function p(e){l.current=Z,ce=pe=1,x(e)}function E(e){l.current=J,de=he=1,x(e)}function y(e){l.current=K,se=ue=1,x(e)}function x(e){ue&&function(e){let t=O(e,K),r=d(t[0],[0,ve]),n=d(t[1],[0,ge]);$[1]=1-(ve-r)/ve,$[2]=(ge-n)/ge,F()}(e),he&&function(e){$[0]=(Te-d(O(e,J)[1],[0,Te]))/Te,F()}(e),pe&&function(e){$[3]=(_e-d(O(e,Z)[1],[0,_e]))/_e,F()}(e),L=V($),(ue||he||pe)&&(s(se||de||ce?"start":"drag",L),s("change",L)),se=de=ce=0}function F(){!function(e){a(e[1])&&I(re,"right",ve-Ae/2-ve*+e[1]),a(e[2])&&I(re,"top",ge-me/2-ge*+e[2]),a(e[0])&&I(ie,"top",Te-Ee/2-Te*+e[0]),a(e[3])&&I(le,"top",_e-be/2-_e*+e[3])}($);let e=V($),t=V([$[0],1,1]);I(Q,"background-color","rgb("+t[0]+","+t[1]+","+t[2]+")"),I(ae,"background-image","linear-gradient(rgb("+e[0]+","+e[1]+","+e[2]+"),transparent)")}function w(t){L=V($);let r=t.target,n=e===k(r,e),i=z===k(r,z);l.current=null,n||i?i&&(ue||he||pe)&&s("stop",L):c.blur?s("blur",L):ue||he||pe||_(z)&&T(),ue=he=pe=0}$=G(L=h()),o||(C(u||n.parent||v,z),l.visible=!0),f=e=>(r(0,e),s("enter",L),l),T=()=>{return _(z)&&(_(e=z),e.remove(),l.current=null,l.visible=!1),N(q,K,y),N(q,J,E),N(q,Z,p),N(U,g,x),N(W,g,w),N(H,m,S),s("exit",L);var e},b=t=>{let r=D(A),n=D(e),o=D(m),l=o[3]-A.clientHeight,c=o[2]-r[2],u=D(z),h=u[3],p=u[2],f=n[0]+o[0],g=n[1]+o[1]+n[3];if(i(t))a(t[0])&&(f=t[0]),a(t[1])&&(g=t[1]);else{let e=o[0],t=o[1],r=o[0]+o[2]-p-c,n=o[1]+o[3]-h-l;f=d(f,[e,r])>>0,g=d(g,[t,n])>>0}return I(z,"left",f),I(z,"top",g),s("fit",L)},S=()=>b();let j=D(K),X=D(re),ee=D(J),te=D(ie),ne=D(Z),oe=D(le),ge=j[3],me=X[3],ve=j[2],Ae=X[2],Te=ee[3],Ee=te[3],_e=ne[3],be=oe[3];o?(R(q,e,fe),M((()=>{s("change",L)}),1)):(R(q,K,y),R(q,J,E),R(q,Z,p),R(U,g,x),R(W,g,w),R(H,m,S),b()),F(),l.color=(e,r,i,a)=>Y[t(Y[n.color])?n.color:P]([e,r,i,a]),l.current=null,l.enter=f,l.exit=T,l.fit=b,l.get=()=>h(),l.pop=()=>e[B]?(delete e[B],N(q,e,fe),T(),s("pop",L)):l,l.set=(e,t,r,n)=>($=G([e,t,r,n]),F(),l),l.self=z,l.value=(e,t,r,n)=>(l.set(e,t,r,n),s("change",[e,t,r,n]))}(1),l}return Y[P]=e=>{if(o(e)){let t=(e=e.trim()).length;if(4!==t&&7!==t||"#"!==e[0]){if((5===t||9===t)&&"#"===e[0]&&/^#([a-f\d]{3,4}){1,2}$/i.test(e))return 5===t?[c(e[1]+e[1],16),c(e[2]+e[2],16),c(e[3]+e[3],16),c(e[4]+e[4],16)/255]:[c(e[1]+e[2],16),c(e[3]+e[4],16),c(e[5]+e[6],16),c(e[7]+e[8],16)/255]}else if(/^#([a-f\d]{3}){1,2}$/i.test(e))return 4===t?[c(e[1]+e[1],16),c(e[2]+e[2],16),c(e[3]+e[3],16),1]:[c(e[1]+e[2],16),c(e[3]+e[4],16),c(e[5]+e[6],16),1];return[0,0,0,1]}return"#"+("000000"+p(+e[2]|+e[1]<<8|+e[0]<<16,16)).slice(-6)+(a(e[3])&&e[3]<1?p(h(255*e[3])+65536,16).substr(-2):"")},Y.instances={},Y.state={class:"color-picker",color:P,parent:null},Y.version="2.2.0",Y}()}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{"use strict";r.r(n),r.d(n,{addTranslator:()=>Ge,appendFontFamily:()=>it,appendSignTabShowOpt:()=>at,changeTemplateLocale:()=>ke,changeTranslatorFileLocation:()=>Ve,checkTemplateFieldData:()=>Pe,copyField:()=>qe,getJsonData:()=>Be,initDocument:()=>De,pasteField:()=>Ue,releaseTemplate:()=>Me});class e{static MAIN_GROUP_NAME="MainContainer";static TEMPLATE_PDF_VIEWER_CONTAINER="TemplateViewerContainer";static TEMPLATE_PDF_VIEWER="TemplatePDFViewer";static READER_PDF_VIEWER_CONTAINER="ReaderViewerContainer";static READER_PDF_VIEWER="ReaderPDFViewer";static PREVIEW_READER_PDF_VIEWER_CONTAINER="PreviewReaderViewerContainer";static PREVIEW_READER_PDF_VIEWER="PreviewReaderPDFViewer";static TEMPLATE_LAYER_NAME="TemplateLayer";static TEMPLATE_LAYER_ASTERISK_NAME="TemplateAsteriskLayer";static TEMPLATE_LAYER_RECT_NAME="TemplateRect";static DRAG_BOX_NAME="DragBoxGroup";static SHOW_CLASS="Template-Show";static HIDE_CLASS="Template-Hide";static EDITOR_COMPONENT_CLASS="Editor-Component_Box";static EDITOR_ATTR_CLASS="Editor-Attribute";static FIELD_DELETE_BUTTON_CLASS="Field-Delete-Button";static MEMO_PROPERTY_BUTTON_CLASS="MEMO-Property-Button";static EDITOR_ATTR_KIND_CLASS="Attribute-kind";static EDITOR_ATTR_PANEL_CLASS="Attribute-Contents";static EDITOR_ATTR_PANEL_ID="Attribute-Panel";static EDITOR_ATTR_CONTENTS_ROW_CLASS="Attribute-Contents-Row";static EDITOR_ATTR_ROW_WRAP_CLASS="Attribute-Contents-Row-Wrap";static TITLE_WRAP_CLASS="Title-Wrap";static TITLE_CLASS="Title";static EDITOR_ATTR_SELECT_CLASS="Attribute-Select";static SWITCH_LABEL_CLASS="Attribute-Switch-Label";static SWITCH_LABEL_SLIDER_CLASS="Attribute-Switch-Slider";static SWITCH_LABEL_SLIDER_ROUND_CLASS="Round";static DIVIDER_CLASS="Divider";static EDITOR_ATTR_INPUT_CLASS="Attribute-Input";static EDITOR_ATTR_TEXTAREA_CLASS="Attribute-Textarea";static EDITOR_ATTR_DATE_INPUT_CLASS="Attribute-Date-Input";static EDITOR_ATTR_INPUT_WRAP_CLASS="Attribute-Input-Wrap";static CREATE_FIELD_ACTION="CreateFieldAction";static REMOVE_FIELD_ACTION="RemoveFieldAction";static FIELD_ATTR_CHANGE_ACTION="FieldAttrChangeAction";static GROUP_REMOVE_ACTION="GroupRemoveAction";static GROUP_ATTR_CHANGE_ACTION="GroupAttrChangeAction";static GROUP_ATTR_OWNER_CHANGE_ACTION="GroupAttrOwnerChangeAction";static READER_PAGE_FIELD_LAYER_CLASS="Reader-Page-Field-Layer";static READER_PAGE_MEMO_LAYER_CLASS="Reader-Page-Memo-Layer";static ASTERISK_ICON_CLASS="Asterisk-Icon";static ASTREISK_DIV_HEIGHT=12;static MINIMUM_DRAG_SIZE=10;static RADIO_TYPE_1="1";static RAIOD_TYPE_1_PATH='<path d="M24,12c-6.6,0-12,5.4-12,12s5.4,12,12,12s12-5.4,12-12S30.6,\n            12,24,12zM24,0C10.8,0,0,10.8,0,24s10.8,24,24,24s24-10.8,24-24S37.2,0,24,0zM24,43.2C13.4,43.2,4.8,34.6,4.8,24S13.4,\n            4.8,24,4.8S43.2,13.4,43.2,24S34.6,43.2,24,43.2z"/>';static RADIO_TYPE_2="2";static RAIOD_TYPE_2_PATH='<path d="M24,0C10.8,0,0,10.8,0,24s10.8,24,24,24s24-10.8,24-24S37.2,0,24,0zM24,43.2C13.4,43.2,4.8,34.6,4.8,24S13.4,            4.8,24,4.8S43.2,13.4,43.2,24S34.6,43.2,24,43.2z"/>';static NO_EVENT_LAYER="No-Event-Layer";static READER_FIELD_INPUT_MODE=0;static READER_FIELD_MEMO_MODE=1;static READER_FIELD_MEMO_MAKE_MODE=2}var t=r(5212),i={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},a={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},o=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],l={CSS:{},springs:{}};function s(e,t,r){return Math.min(Math.max(e,t),r)}function d(e,t){return e.indexOf(t)>-1}function c(e,t){return e.apply(null,t)}var u={arr:function(e){return Array.isArray(e)},obj:function(e){return d(Object.prototype.toString.call(e),"Object")},pth:function(e){return u.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||u.svg(e)},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return void 0===e},nil:function(e){return u.und(e)||null===e},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return u.hex(e)||u.rgb(e)||u.hsl(e)},key:function(e){return!i.hasOwnProperty(e)&&!a.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}};function h(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map((function(e){return parseFloat(e)})):[]}function p(e,t){var r=h(e),n=s(u.und(r[0])?1:r[0],.1,100),i=s(u.und(r[1])?100:r[1],.1,100),a=s(u.und(r[2])?10:r[2],.1,100),o=s(u.und(r[3])?0:r[3],.1,100),d=Math.sqrt(i/n),c=a/(2*Math.sqrt(i*n)),p=c<1?d*Math.sqrt(1-c*c):0,f=c<1?(c*d-o)/p:-o+d;function g(e){var r=t?t*e/1e3:e;return r=c<1?Math.exp(-r*c*d)*(1*Math.cos(p*r)+f*Math.sin(p*r)):(1+f*r)*Math.exp(-r*d),0===e||1===e?e:1-r}return t?g:function(){var t=l.springs[e];if(t)return t;for(var r=1/6,n=0,i=0;;)if(1===g(n+=r)){if(++i>=16)break}else i=0;var a=n*r*1e3;return l.springs[e]=a,a}}function f(e){return void 0===e&&(e=10),function(t){return Math.ceil(s(t,1e-6,1)*e)*(1/e)}}var g,m,v=function(){var e=.1;function t(e,t){return 1-3*t+3*e}function r(e,t){return 3*t-6*e}function n(e){return 3*e}function i(e,i,a){return((t(i,a)*e+r(i,a))*e+n(i))*e}function a(e,i,a){return 3*t(i,a)*e*e+2*r(i,a)*e+n(i)}return function(t,r,n,o){if(0<=t&&t<=1&&0<=n&&n<=1){var l=new Float32Array(11);if(t!==r||n!==o)for(var s=0;s<11;++s)l[s]=i(s*e,t,n);return function(s){return t===r&&n===o||0===s||1===s?s:i(function(r){for(var o=0,s=1;10!==s&&l[s]<=r;++s)o+=e;--s;var d=o+(r-l[s])/(l[s+1]-l[s])*e,c=a(d,t,n);return c>=.001?function(e,t,r,n){for(var o=0;o<4;++o){var l=a(t,r,n);if(0===l)return t;t-=(i(t,r,n)-e)/l}return t}(r,d,t,n):0===c?d:function(e,t,r,n,a){var o,l,s=0;do{(o=i(l=t+(r-t)/2,n,a)-e)>0?r=l:t=l}while(Math.abs(o)>1e-7&&++s<10);return l}(r,o,o+e,t,n)}(s),r,o)}}}}(),A=(g={linear:function(){return function(e){return e}}},m={Sine:function(){return function(e){return 1-Math.cos(e*Math.PI/2)}},Circ:function(){return function(e){return 1-Math.sqrt(1-e*e)}},Back:function(){return function(e){return e*e*(3*e-2)}},Bounce:function(){return function(e){for(var t,r=4;e<((t=Math.pow(2,--r))-1)/11;);return 1/Math.pow(4,3-r)-7.5625*Math.pow((3*t-2)/22-e,2)}},Elastic:function(e,t){void 0===e&&(e=1),void 0===t&&(t=.5);var r=s(e,1,10),n=s(t,.1,2);return function(e){return 0===e||1===e?e:-r*Math.pow(2,10*(e-1))*Math.sin((e-1-n/(2*Math.PI)*Math.asin(1/r))*(2*Math.PI)/n)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach((function(e,t){m[e]=function(){return function(e){return Math.pow(e,t+2)}}})),Object.keys(m).forEach((function(e){var t=m[e];g["easeIn"+e]=t,g["easeOut"+e]=function(e,r){return function(n){return 1-t(e,r)(1-n)}},g["easeInOut"+e]=function(e,r){return function(n){return n<.5?t(e,r)(2*n)/2:1-t(e,r)(-2*n+2)/2}},g["easeOutIn"+e]=function(e,r){return function(n){return n<.5?(1-t(e,r)(1-2*n))/2:(t(e,r)(2*n-1)+1)/2}}})),g);function T(e,t){if(u.fnc(e))return e;var r=e.split("(")[0],n=A[r],i=h(e);switch(r){case"spring":return p(e,t);case"cubicBezier":return c(v,i);case"steps":return c(f,i);default:return c(n,i)}}function E(e){try{return document.querySelectorAll(e)}catch(e){return}}function _(e,t){for(var r=e.length,n=arguments.length>=2?arguments[1]:void 0,i=[],a=0;a<r;a++)if(a in e){var o=e[a];t.call(n,o,a,e)&&i.push(o)}return i}function b(e){return e.reduce((function(e,t){return e.concat(u.arr(t)?b(t):t)}),[])}function y(e){return u.arr(e)?e:(u.str(e)&&(e=E(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function S(e,t){return e.some((function(e){return e===t}))}function x(e){var t={};for(var r in e)t[r]=e[r];return t}function C(e,t){var r=x(e);for(var n in e)r[n]=t.hasOwnProperty(n)?t[n]:e[n];return r}function F(e,t){var r=x(e);for(var n in t)r[n]=u.und(e[n])?t[n]:e[n];return r}function w(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function L(e,t){return u.fnc(e)?e(t.target,t.id,t.total):e}function I(e,t){return e.getAttribute(t)}function N(e,t,r){if(S([r,"deg","rad","turn"],w(t)))return t;var n=l.CSS[t+r];if(!u.und(n))return n;var i=document.createElement(e.tagName),a=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;a.appendChild(i),i.style.position="absolute",i.style.width=100+r;var o=100/i.offsetWidth;a.removeChild(i);var s=o*parseFloat(t);return l.CSS[t+r]=s,s}function R(e,t,r){if(t in e.style){var n=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=e.style[t]||getComputedStyle(e).getPropertyValue(n)||"0";return r?N(e,i,r):i}}function O(e,t){return u.dom(e)&&!u.inp(e)&&(!u.nil(I(e,t))||u.svg(e)&&e[t])?"attribute":u.dom(e)&&S(o,t)?"transform":u.dom(e)&&"transform"!==t&&R(e,t)?"css":null!=e[t]?"object":void 0}function D(e){if(u.dom(e)){for(var t,r=e.style.transform||"",n=/(\w+)\(([^)]*)\)/g,i=new Map;t=n.exec(r);)i.set(t[1],t[2]);return i}}function B(e,t,r,n){switch(O(e,t)){case"transform":return function(e,t,r,n){var i=d(t,"scale")?1:0+function(e){return d(e,"translate")||"perspective"===e?"px":d(e,"rotate")||d(e,"skew")?"deg":void 0}(t),a=D(e).get(t)||i;return r&&(r.transforms.list.set(t,a),r.transforms.last=t),n?N(e,a,n):a}(e,t,n,r);case"css":return R(e,t,r);case"attribute":return I(e,t);default:return e[t]||0}}function M(e,t){var r=/^(\*=|\+=|-=)/.exec(e);if(!r)return e;var n=w(e)||0,i=parseFloat(t),a=parseFloat(e.replace(r[0],""));switch(r[0][0]){case"+":return i+a+n;case"-":return i-a+n;case"*":return i*a+n}}function P(e,t){if(u.col(e))return function(e){return u.rgb(e)?(r=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(t=e))?"rgba("+r[1]+",1)":t:u.hex(e)?function(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,r,n){return t+t+r+r+n+n})),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgba("+parseInt(r[1],16)+","+parseInt(r[2],16)+","+parseInt(r[3],16)+",1)"}(e):u.hsl(e)?function(e){var t,r,n,i=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),a=parseInt(i[1],10)/360,o=parseInt(i[2],10)/100,l=parseInt(i[3],10)/100,s=i[4]||1;function d(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}if(0==o)t=r=n=l;else{var c=l<.5?l*(1+o):l+o-l*o,u=2*l-c;t=d(u,c,a+1/3),r=d(u,c,a),n=d(u,c,a-1/3)}return"rgba("+255*t+","+255*r+","+255*n+","+s+")"}(e):void 0;var t,r}(e);if(/\s/g.test(e))return e;var r=w(e),n=r?e.substr(0,e.length-r.length):e;return t?n+t:n}function k(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function V(e){for(var t,r=e.points,n=0,i=0;i<r.numberOfItems;i++){var a=r.getItem(i);i>0&&(n+=k(t,a)),t=a}return n}function G(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return function(e){return 2*Math.PI*I(e,"r")}(e);case"rect":return function(e){return 2*I(e,"width")+2*I(e,"height")}(e);case"line":return function(e){return k({x:I(e,"x1"),y:I(e,"y1")},{x:I(e,"x2"),y:I(e,"y2")})}(e);case"polyline":return V(e);case"polygon":return function(e){var t=e.points;return V(e)+k(t.getItem(t.numberOfItems-1),t.getItem(0))}(e)}}function q(e,t){var r=t||{},n=r.el||function(e){for(var t=e.parentNode;u.svg(t)&&u.svg(t.parentNode);)t=t.parentNode;return t}(e),i=n.getBoundingClientRect(),a=I(n,"viewBox"),o=i.width,l=i.height,s=r.viewBox||(a?a.split(" "):[0,0,o,l]);return{el:n,viewBox:s,x:s[0]/1,y:s[1]/1,w:o,h:l,vW:s[2],vH:s[3]}}function U(e,t,r){function n(r){void 0===r&&(r=0);var n=t+r>=1?t+r:0;return e.el.getPointAtLength(n)}var i=q(e.el,e.svg),a=n(),o=n(-1),l=n(1),s=r?1:i.w/i.vW,d=r?1:i.h/i.vH;switch(e.property){case"x":return(a.x-i.x)*s;case"y":return(a.y-i.y)*d;case"angle":return 180*Math.atan2(l.y-o.y,l.x-o.x)/Math.PI}}function j(e,t){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,n=P(u.pth(e)?e.totalLength:e,t)+"";return{original:n,numbers:n.match(r)?n.match(r).map(Number):[0],strings:u.str(e)||t?n.split(r):[]}}function H(e){return _(e?b(u.arr(e)?e.map(y):y(e)):[],(function(e,t,r){return r.indexOf(e)===t}))}function W(e){var t=H(e);return t.map((function(e,r){return{target:e,id:r,total:t.length,transforms:{list:D(e)}}}))}function Y(e,t){var r=x(t);if(/^spring/.test(r.easing)&&(r.duration=p(r.easing)),u.arr(e)){var n=e.length;2!==n||u.obj(e[0])?u.fnc(t.duration)||(r.duration=t.duration/n):e={value:e}}var i=u.arr(e)?e:[e];return i.map((function(e,r){var n=u.obj(e)&&!u.pth(e)?e:{value:e};return u.und(n.delay)&&(n.delay=r?0:t.delay),u.und(n.endDelay)&&(n.endDelay=r===i.length-1?t.endDelay:0),n})).map((function(e){return F(e,r)}))}var z={css:function(e,t,r){return e.style[t]=r},attribute:function(e,t,r){return e.setAttribute(t,r)},object:function(e,t,r){return e[t]=r},transform:function(e,t,r,n,i){if(n.list.set(t,r),t===n.last||i){var a="";n.list.forEach((function(e,t){a+=t+"("+e+") "})),e.style.transform=a}}};function X(e,t){W(e).forEach((function(e){for(var r in t){var n=L(t[r],e),i=e.target,a=w(n),o=B(i,r,a,e),l=M(P(n,a||w(o)),o),s=O(i,r);z[s](i,r,l,e.transforms,!0)}}))}function K(e,t){return _(b(e.map((function(e){return t.map((function(t){return function(e,t){var r=O(e.target,t.name);if(r){var n=function(e,t){var r;return e.tweens.map((function(n){var i=function(e,t){var r={};for(var n in e){var i=L(e[n],t);u.arr(i)&&1===(i=i.map((function(e){return L(e,t)}))).length&&(i=i[0]),r[n]=i}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}(n,t),a=i.value,o=u.arr(a)?a[1]:a,l=w(o),s=B(t.target,e.name,l,t),d=r?r.to.original:s,c=u.arr(a)?a[0]:d,h=w(c)||w(s),p=l||h;return u.und(o)&&(o=d),i.from=j(c,p),i.to=j(M(o,c),p),i.start=r?r.end:0,i.end=i.start+i.delay+i.duration+i.endDelay,i.easing=T(i.easing,i.duration),i.isPath=u.pth(a),i.isPathTargetInsideSVG=i.isPath&&u.svg(t.target),i.isColor=u.col(i.from.original),i.isColor&&(i.round=1),r=i,i}))}(t,e),i=n[n.length-1];return{type:r,property:t.name,animatable:e,tweens:n,duration:i.end,delay:n[0].delay,endDelay:i.endDelay}}}(e,t)}))}))),(function(e){return!u.und(e)}))}function J(e,t){var r=e.length,n=function(e){return e.timelineOffset?e.timelineOffset:0},i={};return i.duration=r?Math.max.apply(Math,e.map((function(e){return n(e)+e.duration}))):t.duration,i.delay=r?Math.min.apply(Math,e.map((function(e){return n(e)+e.delay}))):t.delay,i.endDelay=r?i.duration-Math.max.apply(Math,e.map((function(e){return n(e)+e.duration-e.endDelay}))):t.endDelay,i}var Z=0,Q=[],ee=function(){var e;function t(r){for(var n=Q.length,i=0;i<n;){var a=Q[i];a.paused?(Q.splice(i,1),n--):(a.tick(r),i++)}e=i>0?requestAnimationFrame(t):void 0}return"undefined"!=typeof document&&document.addEventListener("visibilitychange",(function(){re.suspendWhenDocumentHidden&&(te()?e=cancelAnimationFrame(e):(Q.forEach((function(e){return e._onDocumentVisibility()})),ee()))})),function(){e||te()&&re.suspendWhenDocumentHidden||!(Q.length>0)||(e=requestAnimationFrame(t))}}();function te(){return!!document&&document.hidden}function re(e){void 0===e&&(e={});var t,r=0,n=0,o=0,l=0,d=null;function c(e){var t=window.Promise&&new Promise((function(e){return d=e}));return e.finished=t,t}var h=function(e){var t=C(i,e),r=C(a,e),n=function(e,t){var r=[],n=t.keyframes;for(var i in n&&(t=F(function(e){for(var t=_(b(e.map((function(e){return Object.keys(e)}))),(function(e){return u.key(e)})).reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[]),r={},n=function(n){var i=t[n];r[i]=e.map((function(e){var t={};for(var r in e)u.key(r)?r==i&&(t.value=e[r]):t[r]=e[r];return t}))},i=0;i<t.length;i++)n(i);return r}(n),t)),t)u.key(i)&&r.push({name:i,tweens:Y(t[i],e)});return r}(r,e),o=W(e.targets),l=K(o,n),s=J(l,r),d=Z;return Z++,F(t,{id:d,children:[],animatables:o,animations:l,duration:s.duration,delay:s.delay,endDelay:s.endDelay})}(e);function p(){var e=h.direction;"alternate"!==e&&(h.direction="normal"!==e?"normal":"reverse"),h.reversed=!h.reversed,t.forEach((function(e){return e.reversed=h.reversed}))}function f(e){return h.reversed?h.duration-e:e}function g(){r=0,n=f(h.currentTime)*(1/re.speed)}function m(e,t){t&&t.seek(e-t.timelineOffset)}function v(e){for(var t=0,r=h.animations,n=r.length;t<n;){var i=r[t],a=i.animatable,o=i.tweens,l=o.length-1,d=o[l];l&&(d=_(o,(function(t){return e<t.end}))[0]||d);for(var c=s(e-d.start-d.delay,0,d.duration)/d.duration,u=isNaN(c)?1:d.easing(c),p=d.to.strings,f=d.round,g=[],m=d.to.numbers.length,v=void 0,A=0;A<m;A++){var T=void 0,E=d.to.numbers[A],b=d.from.numbers[A]||0;T=d.isPath?U(d.value,u*E,d.isPathTargetInsideSVG):b+u*(E-b),f&&(d.isColor&&A>2||(T=Math.round(T*f)/f)),g.push(T)}var y=p.length;if(y){v=p[0];for(var S=0;S<y;S++){p[S];var x=p[S+1],C=g[S];isNaN(C)||(v+=x?C+x:C+" ")}}else v=g[0];z[i.type](a.target,i.property,v,a.transforms),i.currentValue=v,t++}}function A(e){h[e]&&!h.passThrough&&h[e](h)}function T(e){var i=h.duration,a=h.delay,u=i-h.endDelay,g=f(e);h.progress=s(g/i*100,0,100),h.reversePlayback=g<h.currentTime,t&&function(e){if(h.reversePlayback)for(var r=l;r--;)m(e,t[r]);else for(var n=0;n<l;n++)m(e,t[n])}(g),!h.began&&h.currentTime>0&&(h.began=!0,A("begin")),!h.loopBegan&&h.currentTime>0&&(h.loopBegan=!0,A("loopBegin")),g<=a&&0!==h.currentTime&&v(0),(g>=u&&h.currentTime!==i||!i)&&v(i),g>a&&g<u?(h.changeBegan||(h.changeBegan=!0,h.changeCompleted=!1,A("changeBegin")),A("change"),v(g)):h.changeBegan&&(h.changeCompleted=!0,h.changeBegan=!1,A("changeComplete")),h.currentTime=s(g,0,i),h.began&&A("update"),e>=i&&(n=0,h.remaining&&!0!==h.remaining&&h.remaining--,h.remaining?(r=o,A("loopComplete"),h.loopBegan=!1,"alternate"===h.direction&&p()):(h.paused=!0,h.completed||(h.completed=!0,A("loopComplete"),A("complete"),!h.passThrough&&"Promise"in window&&(d(),c(h)))))}return c(h),h.reset=function(){var e=h.direction;h.passThrough=!1,h.currentTime=0,h.progress=0,h.paused=!0,h.began=!1,h.loopBegan=!1,h.changeBegan=!1,h.completed=!1,h.changeCompleted=!1,h.reversePlayback=!1,h.reversed="reverse"===e,h.remaining=h.loop,t=h.children;for(var r=l=t.length;r--;)h.children[r].reset();(h.reversed&&!0!==h.loop||"alternate"===e&&1===h.loop)&&h.remaining++,v(h.reversed?h.duration:0)},h._onDocumentVisibility=g,h.set=function(e,t){return X(e,t),h},h.tick=function(e){o=e,r||(r=o),T((o+(n-r))*re.speed)},h.seek=function(e){T(f(e))},h.pause=function(){h.paused=!0,g()},h.play=function(){h.paused&&(h.completed&&h.reset(),h.paused=!1,Q.push(h),g(),ee())},h.reverse=function(){p(),h.completed=!h.reversed,g()},h.restart=function(){h.reset(),h.play()},h.remove=function(e){ie(H(e),h)},h.reset(),h.autoplay&&h.play(),h}function ne(e,t){for(var r=t.length;r--;)S(e,t[r].animatable.target)&&t.splice(r,1)}function ie(e,t){var r=t.animations,n=t.children;ne(e,r);for(var i=n.length;i--;){var a=n[i],o=a.animations;ne(e,o),o.length||a.children.length||n.splice(i,1)}r.length||n.length||t.pause()}re.version="3.2.1",re.speed=1,re.suspendWhenDocumentHidden=!0,re.running=Q,re.remove=function(e){for(var t=H(e),r=Q.length;r--;)ie(t,Q[r])},re.get=B,re.set=X,re.convertPx=N,re.path=function(e,t){var r=u.str(e)?E(e)[0]:e,n=t||100;return function(e){return{property:e,el:r,svg:q(r),totalLength:G(r)*(n/100)}}},re.setDashoffset=function(e){var t=G(e);return e.setAttribute("stroke-dasharray",t),t},re.stagger=function(e,t){void 0===t&&(t={});var r=t.direction||"normal",n=t.easing?T(t.easing):null,i=t.grid,a=t.axis,o=t.from||0,l="first"===o,s="center"===o,d="last"===o,c=u.arr(e),h=c?parseFloat(e[0]):parseFloat(e),p=c?parseFloat(e[1]):0,f=w(c?e[1]:e)||0,g=t.start||0+(c?h:0),m=[],v=0;return function(e,t,u){if(l&&(o=0),s&&(o=(u-1)/2),d&&(o=u-1),!m.length){for(var A=0;A<u;A++){if(i){var T=s?(i[0]-1)/2:o%i[0],E=s?(i[1]-1)/2:Math.floor(o/i[0]),_=T-A%i[0],b=E-Math.floor(A/i[0]),y=Math.sqrt(_*_+b*b);"x"===a&&(y=-_),"y"===a&&(y=-b),m.push(y)}else m.push(Math.abs(o-A));v=Math.max.apply(Math,m)}n&&(m=m.map((function(e){return n(e/v)*v}))),"reverse"===r&&(m=m.map((function(e){return a?e<0?-1*e:-e:Math.abs(v-e)})))}return g+(c?(p-h)/v:h)*(Math.round(100*m[t])/100)+f}},re.timeline=function(e){void 0===e&&(e={});var t=re(e);return t.duration=0,t.add=function(r,n){var i=Q.indexOf(t),o=t.children;function l(e){e.passThrough=!0}i>-1&&Q.splice(i,1);for(var s=0;s<o.length;s++)l(o[s]);var d=F(r,C(a,e));d.targets=d.targets||e.targets;var c=t.duration;d.autoplay=!1,d.direction=t.direction,d.timelineOffset=u.und(n)?c:M(n,c),l(t),t.seek(d.timelineOffset);var h=re(d);l(h),o.push(h);var p=J(o,e);return t.delay=p.delay,t.endDelay=p.endDelay,t.duration=p.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t},re.easing=T,re.penner=A,re.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};const ae=re;var oe=r(6538);class le{static fontFamilyComboBox=[{text:"맑은 고딕",value:"MalgunGothic"},{text:"바탕체",value:"Batang"}];static dateFormatComboBox=[{text:"YYYY-MM-DD",value:"Y-m-d"},{text:"YYYY/MM/DD",value:"Y/m/d"},{text:"YYYY.MM.DD",value:"Y.m.d"}];static radioTypeList=[{text:"Type 1",value:e.RADIO_TYPE_1},{text:"Type 2",value:e.RADIO_TYPE_2}];static fontSizeComboBox=[];static signPenWidthComboBox=[];static userInfoOptionList=[];static userInfoOptionListCount=0;static dvFieldOptionList=[];static signTabShowOpt={};static locale="ko";static translator=new oe.Z({filesLocation:"/js/pdf_form/i18n"});constructor(){}static isEmptyObject(e){return null==e||0===Object.keys(e).length}static closeSelect2Tag(t){t.querySelectorAll("li ."+e.EDITOR_ATTR_SELECT_CLASS).forEach((e=>{e.classList.contains("select2-hidden-accessible")&&$(e).select2("close")}))}static removeAllChildNode(t){if(null!==t)for(;t.firstChild;)t.lastChild.id===e.EDITOR_ATTR_PANEL_ID&&le.closeSelect2Tag(t.lastChild),t.removeChild(t.lastChild)}static createAttributePanelNode(){var t=document.createElement("ul");return t.className=e.EDITOR_ATTR_PANEL_CLASS,t.id=e.EDITOR_ATTR_PANEL_ID,t}static createAttributeInputNode(t,r,n,i,a,o,l){var s=document.createElement("li");s.className=e.EDITOR_ATTR_CONTENTS_ROW_CLASS;var d=document.createElement("div");d.className=e.TITLE_WRAP_CLASS;var c=document.createElement("span");c.className=e.TITLE_CLASS,c.textContent=le.translateForKey(n),c.setAttribute("data-i18n",n),d.appendChild(c);var u=document.createElement("input");return u.className=e.EDITOR_ATTR_INPUT_CLASS,u.setAttribute("data-field-id",t),u.setAttribute("data-field-property-name",r),""!==i&&(u.value=i),""!==a&&(u.type=a),u.addEventListener("change",l,!0),s.appendChild(d),s.appendChild(u),s}static createAttributeTextAreaNode(t,r,n,i,a,o){var l=document.createElement("li");l.className=e.EDITOR_ATTR_CONTENTS_ROW_CLASS;var s=document.createElement("div");s.className=e.TITLE_WRAP_CLASS;var d=document.createElement("span");d.className=e.TITLE_CLASS,d.textContent=le.translateForKey(n),s.appendChild(d);var c=document.createElement("textarea");return c.className=e.EDITOR_ATTR_TEXTAREA_CLASS,c.setAttribute("data-field-id",t),c.setAttribute("data-field-property-name",r),""!==i&&(c.value=i),""!==a&&(c.type=a),c.addEventListener("change",o,!0),l.appendChild(s),l.appendChild(c),l}static createAttributeCheckBoxNode(t,r,n,i,a){var o=document.createElement("li");o.className=e.EDITOR_ATTR_CONTENTS_ROW_CLASS;var l=document.createElement("input");l.type="text",l.className=e.EDITOR_ATTR_INPUT_CLASS,l.setAttribute("data-field-id",t),l.setAttribute("data-field-property-name",r),l.style.display="none",l.addEventListener("change",a,!0);var s=document.createElement("input");s.type="checkbox",s.id=r+"_chkbox",s.addEventListener("change",(function(e){s.checked?l.value="true":l.value="false",l.dispatchEvent(new Event("change"))})),"true"===i?(s.checked=!0,l.value="true"):(s.checked=!1,l.value="false");var d=document.createElement("p");d.className="Attribute-Contents-Row-CheckBox-Container",d.appendChild(s);var c=document.createElement("label");return c.htmlFor=r+"_chkbox",c.textContent=n,d.appendChild(c),o.appendChild(d),o.appendChild(l),o}static createAttributeDateInputNode(t,r,n,i,a,o){var l=document.createElement("li");l.className=e.EDITOR_ATTR_CONTENTS_ROW_CLASS;var s=document.createElement("div");s.className=e.TITLE_WRAP_CLASS;var d=document.createElement("span");d.className=e.TITLE_CLASS,d.textContent=n,s.appendChild(d);var c=document.createElement("input");c.className=e.EDITOR_ATTR_INPUT_CLASS,c.id=r+"_date-picker",c.style.display="none",c.setAttribute("data-field-id",t),c.setAttribute("data-field-property-name",r),""!==i&&(c.value=i);var u=document.createElement("input");return u.className=e.EDITOR_ATTR_DATE_INPUT_CLASS,""!==i&&(u.value=i),c.addEventListener("change",o,!0),l.appendChild(s),l.appendChild(c),l.appendChild(u),l}static createAttributeColorInputNode(t,r,n,i,a,o,l){var s=document.createElement("li");s.className=e.EDITOR_ATTR_CONTENTS_ROW_CLASS;var d=document.createElement("div");d.className=e.TITLE_WRAP_CLASS;var c=document.createElement("span");c.className=e.TITLE_CLASS,c.textContent=n,d.appendChild(c);var u=document.createElement("input");u.className=e.EDITOR_ATTR_INPUT_CLASS,u.setAttribute("data-field-id",t),u.setAttribute("data-field-property-name",r),""!==i&&(u.value=i),u.type="text",u.id=t+"_color",u.addEventListener("change",l,!0);var h=document.createElement("input");h.type="button";var p=document.createElement("div");return p.className=e.EDITOR_ATTR_INPUT_WRAP_CLASS,p.appendChild(u),p.appendChild(h),s.appendChild(d),s.appendChild(p),s}static createAttributeToggleButtonNode(t,r,n,i,a){var o=document.createElement("li");o.className=e.EDITOR_ATTR_CONTENTS_ROW_CLASS;var l=document.createElement("div");l.className=e.EDITOR_ATTR_ROW_WRAP_CLASS;var s=document.createElement("span");s.className=e.TITLE_CLASS,s.textContent=le.translateForKey(n),s.setAttribute("data-i18n",n),l.appendChild(s);var d=document.createElement("label");d.className=e.SWITCH_LABEL_CLASS;var c=document.createElement("input");c.type="text",c.setAttribute("data-field-id",t),c.setAttribute("data-field-property-name",r),c.style.display="none",c.addEventListener("change",a,!0);var u=document.createElement("input");u.type="checkbox",u.addEventListener("change",(function(e){u.checked?c.value=!0:c.value=!1,c.dispatchEvent(new Event("change"))})),"true"===i?(u.checked=!0,c.value="true"):(u.checked=!1,c.value="false");var h=document.createElement("span");return h.classList.add(e.SWITCH_LABEL_SLIDER_CLASS),h.classList.add(e.SWITCH_LABEL_SLIDER_ROUND_CLASS),d.appendChild(u),d.appendChild(h),l.appendChild(d),l.appendChild(c),o.appendChild(l),o}static createAttributeSelectInnerNode(t,r,n,i,a=!0){var o=document.createElement("div");if(o.className=e.EDITOR_ATTR_ROW_WRAP_CLASS,""!==i){var l=document.createElement("div");l.className=e.TITLE_WRAP_CLASS;var s=document.createElement("span");s.className=e.TITLE_CLASS,s.textContent=le.translateForKey(i),s.setAttribute("data-i18n",i),l.appendChild(s),o.appendChild(l)}var d=document.createElement("select");if(d.className=e.EDITOR_ATTR_SELECT_CLASS,a){var c=document.createElement("option");c.value="",c.text=le.translateForKey("Template.selectDefaultText"),c.setAttribute("data-i18n","Template.selectDefaultText"),d.appendChild(c)}for(var u=0;u<n.length;u++){var h=document.createElement("option");h.value=n[u].value,h.text=n[u].text,d.appendChild(h)}return d.setAttribute("data-field-id",t),d.setAttribute("data-field-property-name",r),o.appendChild(d),o}static createAttributeSelectNode(t,r,n,i,a=!0){var o=document.createElement("li");o.className=e.EDITOR_ATTR_CONTENTS_ROW_CLASS;var l=le.createAttributeSelectInnerNode(t,r,n,i,a);return o.appendChild(l),o}static createDividerNode(){var t=document.createElement("li");return t.className=e.DIVIDER_CLASS,t}static createTextAlignButtonNode(t,r,n){var i=document.createElement("div");i.className=e.EDITOR_ATTR_ROW_WRAP_CLASS;var a=document.createElement("div");a.className=e.TITLE_WRAP_CLASS;var o=document.createElement("span");o.className=e.TITLE_CLASS,o.textContent=le.translateForKey("Template.textAlignText"),o.setAttribute("data-i18n","Template.textAlignText"),a.appendChild(o),i.appendChild(a);var l=document.createElement("div"),s=document.createElement("button");s.classList.add("Template-Button"),s.classList.add("Text-Align-Left"),s.classList.add("Toggle-Button");var d=document.createElement("i");s.appendChild(d);var c=document.createElement("button");c.classList.add("Template-Button"),c.classList.add("Text-Align-Center"),c.classList.add("Toggle-Button");var u=document.createElement("i");c.appendChild(u);var h=document.createElement("button");h.classList.add("Template-Button"),h.classList.add("Text-Align-Right"),h.classList.add("Toggle-Button");var p=document.createElement("i");switch(h.appendChild(p),r){case"left":s.classList.add("Selected");break;case"center":c.classList.add("Selected");break;case"right":h.classList.add("Selected")}var f=document.createElement("input");return f.type="text",f.style.display="none",f.value=r,f.setAttribute("data-field-id",t),f.setAttribute("data-field-property-name","textAlign"),f.addEventListener("change",n),s.addEventListener("click",(function(e){f.value="left",f.dispatchEvent(new Event("change")),s.classList.contains("Selected")||s.classList.toggle("Selected"),h.classList.contains("Selected")&&h.classList.toggle("Selected"),c.classList.contains("Selected")&&c.classList.toggle("Selected")})),c.addEventListener("click",(function(e){f.value="center",f.dispatchEvent(new Event("change")),c.classList.contains("Selected")||c.classList.toggle("Selected"),h.classList.contains("Selected")&&h.classList.toggle("Selected"),s.classList.contains("Selected")&&s.classList.toggle("Selected")})),h.addEventListener("click",(function(e){f.value="right",f.dispatchEvent(new Event("change")),h.classList.contains("Selected")||h.classList.toggle("Selected"),s.classList.contains("Selected")&&s.classList.toggle("Selected"),c.classList.contains("Selected")&&c.classList.toggle("Selected")})),l.appendChild(s),l.appendChild(c),l.appendChild(h),l.appendChild(f),i.appendChild(l),i}static createTextBoldButtonNode(t,r,n){var i=document.createElement("div");i.className=e.EDITOR_ATTR_ROW_WRAP_CLASS;var a=document.createElement("div");a.className=e.TITLE_WRAP_CLASS;var o=document.createElement("span");o.className=e.TITLE_CLASS,o.textContent=le.translateForKey("Template.boldText"),o.setAttribute("data-i18n","Template.boldText"),a.appendChild(o),i.appendChild(a);var l=document.createElement("div"),s=document.createElement("button");s.classList.add("Template-Button"),s.classList.add("Text-Bold-Button"),s.classList.add("Toggle-Button");var d=document.createElement("i");s.appendChild(d),"true"===r&&s.classList.add("Selected");var c=document.createElement("input");return c.type="text",c.style.display="none",c.value=r,c.setAttribute("data-field-id",t),c.setAttribute("data-field-property-name","bold"),c.addEventListener("change",n),s.addEventListener("click",(function(e){s.classList.contains("Selected")?c.value="false":c.value="true",c.dispatchEvent(new Event("change")),s.classList.toggle("Selected")})),l.appendChild(s),l.appendChild(c),i.appendChild(l),i}static createTextColorButtonNode(t,r,n,i){var a=document.createElement("div");a.className=e.EDITOR_ATTR_ROW_WRAP_CLASS;var o=document.createElement("div");o.className=e.TITLE_WRAP_CLASS;var l=document.createElement("span");l.className=e.TITLE_CLASS,l.textContent=le.translateForKey(r),l.setAttribute("data-i18n",r),o.appendChild(l),a.appendChild(o);var s=document.createElement("div");s.className="Color-Button-Wrap";var d=document.createElement("button");d.classList.add("Template-Button"),d.classList.add("Color-Button");var c=document.createElement("input");return c.type="text",c.style.display="none",c.value=n,c.setAttribute("data-field-id",t),c.setAttribute("data-field-property-name","fontColor"),c.addEventListener("change",i),s.appendChild(d),s.appendChild(c),a.appendChild(s),a}static createTextAttrbuteNode(t,r,n,i,a){var o=document.createElement("li");o.className=e.EDITOR_ATTR_CONTENTS_ROW_CLASS;var l=document.createElement("div");l.className=e.EDITOR_ATTR_ROW_WRAP_CLASS;var s=document.createElement("table");s.style.width="100%";var d=document.createElement("tr"),c=document.createElement("td");c.style.paddingRight="10px",c.colSpan=4;var u=le.createAttributeSelectInnerNode(t,"fontName",le.fontFamilyComboBox,"Template.fontNameText",!1);c.appendChild(u),d.appendChild(c);var h=document.createElement("td");h.colSpan=4;var p=le.createAttributeSelectInnerNode(t,"fontSize",le.getFonSizeComboBox(),"Template.fontSizeText",!1);h.appendChild(p),d.appendChild(h),s.appendChild(d);var f=document.createElement("tr"),g=document.createElement("td");g.style.paddingRight="10px",g.style.paddingTop="20px",g.colSpan=4,f.appendChild(g);var m=le.createTextAlignButtonNode(t,n,a);g.appendChild(m);var v=document.createElement("td");v.style.paddingRight="10px",v.style.paddingTop="20px",v.colSpan=2;var A=le.createTextBoldButtonNode(t,i,a);v.appendChild(A),f.appendChild(v);var T=document.createElement("td");T.style.paddingRight="10px",T.style.paddingTop="20px",T.colSpan=2;var E=le.createTextColorButtonNode(t,"Template.colorText",r,a);return T.appendChild(E),f.appendChild(T),s.appendChild(f),l.appendChild(s),o.appendChild(l),{row:o,fontFamilyCombo:u,fontSizeCombo:p,colorBtn:E}}static createTextMemoAttrbuteNode(t,r,n,i,a){let o=document.createElement("li");o.className=e.EDITOR_ATTR_CONTENTS_ROW_CLASS;let l=document.createElement("div");l.className=e.EDITOR_ATTR_ROW_WRAP_CLASS;let s=document.createElement("table");s.style.width="100%";let d=document.createElement("tr"),c=document.createElement("td");c.style.paddingRight="10px",c.colSpan=4;let u=le.createAttributeSelectInnerNode(t,"fontName",le.fontFamilyComboBox,"Template.fontNameText",!1);c.appendChild(u),d.appendChild(c);let h=document.createElement("td");h.colSpan=4;let p=le.createAttributeSelectInnerNode(t,"fontSize",le.getFonSizeComboBox(),"Template.fontSizeText",!1);h.appendChild(p),d.appendChild(h),s.appendChild(d);let f=document.createElement("tr"),g=document.createElement("td");g.style.paddingRight="10px",g.style.paddingTop="20px",g.colSpan=2;let m=le.createTextBoldButtonNode(t,n,a);g.appendChild(m),f.appendChild(g);let v=document.createElement("td");v.style.paddingRight="10px",v.style.paddingTop="20px",v.colSpan=2;let A=le.createTextColorButtonNode(t,"Template.colorText",r,a);v.appendChild(A),f.appendChild(v);let T=document.createElement("td");T.style.paddingRight="10px",T.style.paddingTop="20px",T.colSpan=2;let E=le.createTextColorButtonNode(t,"Template.bgColorText",i,a);return T.appendChild(E),f.appendChild(T),s.appendChild(f),l.appendChild(s),o.appendChild(l),{row:o,fontFamilyCombo:u,fontSizeCombo:p,boldBtn:m,colorBtn:A,backgroundColorBtn:E}}static assign(e,t,r){if("string"==typeof t&&(t=t.split(".")),t.length>1){var n=t.shift();assign(e[n]="[object Object]"===Object.prototype.toString.call(e[n])?e[n]:{},t,r)}else e[t[0]]=r}static fieldAncestors(e){switch(!0){case void 0===e:return;case null===e:return[];default:return[e,...le.fieldAncestors(Object.getPrototypeOf(e))]}}static findSameAncestor(e){var t=le.fieldAncestors(e[0]),r=t[0];if(1===e.length)return r;for(var n=1;n<e.length;n++){var i=le.fieldAncestors(e[n]);if(1===i.length)return i[0];var a=0,o=1;const u=le.fieldAncestors(r);u.length>=i.length&&(a=u.length-i.length);for(var l=a;l<i.length;l++){for(var s=i[l],d=!1,c=o;c<t.length;c++)if(Object.getPrototypeOf(s)==Object.getPrototypeOf(t[c])){if(r=t[c+1],2===le.fieldAncestors(r).length)return r;d=!0,o=c+1;break}if(d)break}}return r}static findSameAncestor2(e){if(1===e.length)return e[0];const t=e[0].ancestors();let r=t[0];for(let n=1;n<e.length;++n){if("BF"===r)return r;const i=e[n].ancestors();if(!i.includes(r))for(let e=1;e<t.length;++e)if(i.includes(t[e])){r=t[e];break}}return r}static getUserInfoOptsList(){return le.userInfoOptionList}static setUserInfoOptsList(e){le.userInfoOptionList=e}static getUserInfoOptsListCount(){return le.userInfoOptionListCount}static setUserInfoOptsListCount(e){le.userInfoOptionListCount=e}static getDVFieldOptsList(){return le.dvFieldOptionList}static setDVFieldOptsList(e){le.dvFieldOptionList=e}static getSignTabShowOpt(){return le.signTabShowOpt}static setSignTabShowOpt(e){le.signTabShowOpt=e}static getFonSizeComboBox(){if(le.fontSizeComboBox.length>0)return le.fontSizeComboBox;for(var e=1;e<=50;e++)le.fontSizeComboBox.push({text:e+"px",value:e});return le.fontSizeComboBox}static getSignPenWidthComboBox(){if(le.signPenWidthComboBox.length>0)return le.signPenWidthComboBox;for(var e=1;e<=20;e+=1)le.signPenWidthComboBox.push({text:e,value:e});return le.signPenWidthComboBox}static createAttrbutePopup(t,r){let n=t.querySelector(" ."+e.EDITOR_ATTR_CLASS);return null===n?(n=document.createElement("div"),n.classList.add(e.EDITOR_ATTR_CLASS),n.classList.add(e.SHOW_CLASS),t.querySelector(" #"+e.TEMPLATE_PDF_VIEWER).appendChild(n)):le.removeAllChildNode(n),n.classList.contains(e.SHOW_CLASS)||n.classList.add(e.SHOW_CLASS),n.style.display="block",null!=r&&(n.style.left=r.x+"px",n.style.top=r.y+r.height+10+"px"),n}static showAsteriskDiv(t,r,n,i,a,o){let l=t.querySelector(" #"+r+"_asterisk");if(null!==l){if(n){if(null===i||null===a||null===o||void 0===i||void 0===a||void 0===o)return;let t=e.ASTREISK_DIV_HEIGHT;l.style.left=i-6-t+"px";let r=a+o/2-t/2;return l.style.top=r+"px",l.classList.contains(e.SHOW_CLASS)||l.classList.toggle(e.SHOW_CLASS),void(l.classList.contains(e.HIDE_CLASS)&&l.classList.toggle(e.HIDE_CLASS))}l.classList.contains(e.SHOW_CLASS)&&l.classList.toggle(e.SHOW_CLASS),l.classList.contains(e.HIDE_CLASS)||l.classList.toggle(e.HIDE_CLASS)}}static createAsteriskDiv(t,r){let n=t.querySelector(" #"+r+"_asterisk");return null===n&&(n=document.createElement("div"),n.classList.add(e.ASTERISK_ICON_CLASS),n.style.position="absolute",n.style.width="11px",n.style.height="12px",t.querySelector(" #"+e.TEMPLATE_LAYER_ASTERISK_NAME).appendChild(n)),n}static isShowAsteriskDiv(t,r){let n=t.querySelector(" #"+r+"_asterisk");return!(null===n||!n.classList.contains(e.SHOW_CLASS)&&(n.classList.contains(e.HIDE_CLASS),1))}static createFieldDeleteBtn(t,r){let n=t.querySelector(" ."+e.FIELD_DELETE_BUTTON_CLASS);return null===n&&(n=document.createElement("div"),n.classList.add(e.FIELD_DELETE_BUTTON_CLASS),n.classList.add(e.SHOW_CLASS),t.querySelector(" #"+e.TEMPLATE_PDF_VIEWER).appendChild(n)),n.classList.contains(e.SHOW_CLASS)||n.classList.add(e.SHOW_CLASS),n.classList.contains(e.HIDE_CLASS)&&n.classList.toggle(e.HIDE_CLASS),n.addEventListener("click",r),n}static repositionFieldDeleteBtn(t,r,n,i){let a=t.querySelector(" ."+e.FIELD_DELETE_BUTTON_CLASS);null!==a?(a.classList.contains(e.HIDE_CLASS)&&a.classList.toggle(e.HIDE_CLASS),a.style.left=r+i+10+"px",a.style.top=n+10+"px"):console.log("deleteBtnDiv empty")}static addSignSvgToCanvas(e,t,r,n,i){let a=t;null==t&&(a=e.m_id+"_canvas");let o=new fabric.StaticCanvas(a,{isDrawingMode:!1});return o.setHeight(n),o.setWidth(r),fabric.loadSVGFromString(i,(function(e,t){var r=fabric.util.groupSVGElements(e,t);let n=o.width/r.width,i=o.height/r.height;const a=n>i?i:n;if(r.scale(a),r.strokeWidth=r.strokeWidth/a,null!==r._objects&&void 0!==r._objects){let e=r._objects;for(var l=0;l<e.length;++l)e[l].strokeWidth=e[l].strokeWidth/a}o.add(r).centerObject(r).renderAll(),r.setCoords()}),null,{crossOrigin:"anonymous"}),o}static addObjectsToCanvas(e,t,r,n,i,a,o,l){let s=r;if(null==r){let r=t.m_id+"_canvas";s=e.querySelector("#"+r)}let d=new fabric.StaticCanvas(s,{isDrawingMode:!1});d.setHeight(i),d.setWidth(n);let c=d.width/o,u=d.height/l;const h=c>u?u:c;return fabric.util.enlivenObjects(a,(function(e){var t=d.renderOnAddRemove;d.renderOnAddRemove=!1;let r=!0;if(e.length>1&&(r=!1),e.forEach((function(e){let t=e.left*h,n=e.top*h;r&&(t=(d.width-e.width*h)/2,n=(d.height-e.height*h)/2),e.set({left:t,top:n,scaleY:h,scaleX:h,strokeWidth:e.strokeWidth/h}),d.add(e)})),d.renderOnAddRemove=t,d.renderAll(),d.calcOffset(),e.length>1){e=d.getObjects();var n=new fabric.Group(e,{});n.set({left:(d.width-n.width)/2,top:(d.height-n.height)/2}),n.setCoords(),d.renderAll()}})),d}static cloneObject(e){var t={};for(var r in e)"object"==typeof e[r]&&null!=e[r]?Array.isArray(e[r])?t[r]=[...e[r]]:t[r]=le.cloneObject(e[r]):t[r]=e[r];return t}static cloneObjectToObject(e,t){for(var r in e)"pages"!==r&&"fields"!==r&&("object"==typeof e[r]&&null!=e[r]?t[r]=le.cloneObject(e[r]):t[r]=e[r]);return t}static cloneFabricCanvas(e,t){fabric.util.enlivenObjects(t,(function(t){var r=e.renderOnAddRemove;e.renderOnAddRemove=!1,t.forEach((function(t){e.add(t)})),e.renderOnAddRemove=r,e.renderAll(),e.calcOffset()}))}static isStringEmpty(e){return null===e||""===e||void 0===e}static mergeRect(e,t){return{left:Math.min(e.left,t.left),top:Math.min(e.top,t.top),right:Math.max(e.right,t.right),bottom:Math.max(e.bottom,t.bottom),x:Math.min(e.left,t.left),y:Math.min(e.top,t.top),width:Math.abs(Math.max(e.right,t.right)-Math.min(e.left,t.left)),height:Math.abs(Math.max(e.bottom,t.bottom)-Math.min(e.top,t.top))}}static boundingRectToRect(e){return{left:e.left,top:e.top,right:e.left+e.width,bottom:e.top+e.height}}static mergeObjectsRect(e){let t=null;return e.forEachObject((function(e){var r=e.getBoundingRect();t=null===t?le.mergeRect(le.boundingRectToRect(r),le.boundingRectToRect(r)):le.mergeRect(t,le.boundingRectToRect(r))})),t}static mergeFieldsBBox(e){let t=null;for(var r=0;r<e.length;r+=1){let n=e[r].getBBox();t=null===t?le.mergeRect(le.boundingRectToRect(n),le.boundingRectToRect(n)):le.mergeRect(t,le.boundingRectToRect(n))}return t}static imageFileToBase64(e,t){if(null==e)return null;if(!e.type.startsWith("image/"))return null;var r=new FileReader;r.readAsDataURL(e),r.onload=function(){t(r.result)},r.onerror=function(e){console.log("Error: ",e)}}static changeLocale(e){le.locale=e,le.translator.translatePageTo(e)}static translateForKey(e){return le.translator.translateForKey(e,le.locale)}static translatorFileLocation(e){le.translator.config.filesLocation=e}static addTranslator(e,t){le.translator.add(e,t)}static appendFontFamily(e){le.fontFamilyComboBox=le.fontFamilyComboBox.concat(e)}static generate_uuidv4(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}}class se{constructor(e,t,r,n,i,a){this.m_id=e,this.m_x=r,this.m_y=n,this.m_width=i,this.m_height=a,this.m_pageNo=t,this.m_pdfX=0,this.m_pdfY=0,this.m_pdfX2=0,this.m_pdfY2=0,this.m_type=se.fieldName(),this.m_fontSize=16,this.m_fontName="MalgunGothic",this.m_fontWeight="",this.m_fontStyle="",this.m_fontColor="#000000",this.m_kind="",this.m_isRemoved=!1,this.m_value="",this.m_ownerId="",this.m_fieldId=e,this.m_required="true"}static fromJson(e,t){return Object.assign(e,t)}static fieldName(){return"BaseField"}ancestors(){return["BF"]}get type(){return this.m_type}get id(){return this.m_id}get kind(){return this.m_kind}set id(e){this.m_id=e}get fieldId(){return this.m_fieldId}set fieldId(e){this.m_id=e}get pageNo(){return this.m_pageNo}set pageNo(e){this.m_pageNo=e}get x(){return this.m_x}set x(e){this.m_x=e}get y(){return this.m_y}set y(e){this.m_y=e}get width(){return this.m_width}set width(e){this.m_width=e}get height(){return this.m_height}set height(e){this.m_height=e}get toolTip(){return this.m_toolTip}set toolTip(e){this.m_toolTip=e}get pdfX(){return this.m_pdfX}set pdfX(e){this.m_pdfX=e}get pdfY(){return this.m_pdfY}set pdfY(e){this.m_pdfY=e}get pdfX2(){return this.m_pdfX2}set pdfX2(e){this.m_pdfX2=e}get pdfY2(){return this.m_pdfY2}set pdfY2(e){this.m_pdfY2=e}get fontSize(){return this.m_fontSize}set fontSize(e){this.m_fontSize=e}get fontName(){return this.m_fontName}set fontName(e){this.m_fontName=e}get fontWeight(){return this.m_fontWeight}set fontWeight(e){this.m_fontWeight=e}get fontStyle(){return this.m_fontStyle}set fontStyle(e){this.m_fontStyle=e}get fontColor(){return this.m_fontColor}set fontColor(e){this.m_fontColor=e}get isRemoved(){return this.m_isRemoved}set isRemoved(e){this.m_isRemoved=e}get value(){return this.m_value}set value(e){this.m_value=e}get ownerId(){return this.m_ownerId}set ownerId(e){this.m_ownerId=e}get required(){return this.m_required}set required(e){this.m_required=e}static showFieldAttribute(e,t,r,n,i,a,o){var l=le.createAttributePanelNode(),s=le.createAttributeToggleButtonNode(t,"required","Template.isRequired",n,o);l.appendChild(s);let d=1!==le.getUserInfoOptsListCount();var c=le.createAttributeSelectNode(t,"ownerId",a,"",d);l.appendChild(c);let u=c.querySelector("select");$(u).select2({minimumResultsForSearch:1/0,width:"100%"}),$(u).val(i).trigger("change"),$(u).on("change",o);var h=le.createAttributeInputNode(t,"fieldId","Template.fieldIdText",r,"","",o);l.appendChild(h),l.setAttribute("Field-id-list",t),e.className="Editor-Attribute",e.classList.add("Base-Field"),e.appendChild(l)}static showFieldsAttribute(e,t,r,n,i,a,o){let l=r;if(null===r||le.isEmptyObject(r)){const r=le.mergeFieldsBBox(t);l=le.createAttrbutePopup(e,r),le.repositionFieldDeleteBtn(e,r.x,r.y,r.width)}le.removeAllChildNode(l);var s=[];t.forEach((e=>{s.push(e.id)}));for(var d=s.join(),c=t[0].ownerId,u=0;u<t.length;++u)if(t[u].ownerId!==c){c="";break}var h=t[0].required;for(u=0;u<t.length;++u)if(t[u].required!==h){h="";break}var p=t[0].fieldId;for(u=0;u<t.length;++u)if(t[u].fieldId!==p){p="";break}se.showFieldAttribute(l,d,p,h,c,i,o)}validateValue(e,t){return!0}getBBox(){return{left:this.x,top:this.y,right:this.x+this.width,bottom:this.y+this.height,x:this.x,y:this.y,width:this.width,height:this.height}}}var de,ce,ue,he,pe=r(6479),fe=r.n(pe);class ge extends se{constructor(e,t,r,n,i,a){super(e,t,r,n,i,a),this.m_type=ge.fieldName(),this.m_placeHolder="",this.m_defaultValue="",this.m_defaultValueText="",this.m_textAlign="left",this.m_textVeticalAlign="middle",this.m_bold="false",this.m_kind=""}static widthValue(){return 150}static heightValue(){return 40}static fieldName(){return"TextBaseField"}ancestors(){return["TBF","BF"]}get placeHolder(){return this.m_placeHolder}set placeHolder(e){this.m_placeHolder=e}get defaultValue(){return this.m_defaultValue}set defaultValue(e){this.m_defaultValue=e}get defaultValueText(){return this.m_defaultValueText}set defaultValueText(e){this.m_defaultValueText=e}get textAlign(){return this.m_textAlign}set textAlign(e){this.m_textAlign=e}get textVeticalAlign(){return this.m_textVeticalAlign}set textVeticalAlign(e){this.m_textVeticalAlign=e}get isBold(){return this.m_bold}set isBold(e){this.m_bold=e}static needTextSvgRefresh(e){return"defaultValue"===e||"value"===e||"fieldId"===e||"placeHolder"===e||"textAlign"===e||"bold"===e||"fontSize"===e||"fontName"===e||"radioType"===e||"fontColor"===e}makeSVGText(e){let t=this.defaultValueText;""===t&&(t=this.m_fieldId);var r="fill='"+this.fontColor+"' ";let n=' x="50%"  dy="0.35em" text-anchor="middle" ';"left"===this.textAlign?n=' x="3%"  dy="0.35em" text-anchor="start" ':"right"===this.textAlign&&(n=' x="97%" dy="0.35em" text-anchor="end" ');let i='y="50%"';"top"===this.textVeticalAlign?i='y="25%"':"bottom"===this.textVeticalAlign&&(i='y="70%"');let a="";"true"===this.isBold&&(a=" font-weight='bold' ");let o="<text"+n+i+" font-family='"+this.fontName+"'  font-size=\""+this.fontSize*e+'px" '+r+a+">"+t+"</text>";return'<svg x="'+this.x+'px" y="'+this.y+'px" width="'+this.width*e+'px" height="'+this.height*e+'px"><g  >'+o+"</g></svg>"}getSVGFieldObject(t,r,n,i,a,o,l){let s=r.group();s.attr({id:this.id+"Group",cursor:"move"});let d=t.rect(this.x,this.y,this.width*n,this.height*n);d.attr({id:this.id,"fill-opacity":"0.5",fill:"#ffac7f"}),s.append(d);const c=Snap.parse(this.makeSVGText(n));s.append(c),s.hover((function(){}),(function(){}));let u=this,h={x:0,y:0};return s.mousedown((function(e){h.x=e.pageX,h.y=e.pageY,r.selectAll("g").forEach((function(e){e!==s&&(le.isEmptyObject(e.freeTransform)||e.freeTransform.hideResizeHandler())})),le.isEmptyObject(s.freeTransform)?l(s,d.attr("width"),d.attr("height")):s.freeTransform.showResizeHandler()})),s.mouseup((function(t){if(s.parent().attr("id")===e.DRAG_BOX_NAME){if(Math.abs(h.x-t.pageX)>e.MINIMUM_DRAG_SIZE||Math.abs(h.y-t.pageY)>e.MINIMUM_DRAG_SIZE)return;a.call(),r.selectAll("g").forEach((function(e){e!==s&&(le.isEmptyObject(e.freeTransform)||e.freeTransform.hideResizeHandler())})),le.isEmptyObject(s.freeTransform)?l(s,d.attr("width"),d.attr("height")):s.freeTransform.showResizeHandler(),u.constructor.showFieldsAttribute(i,[u],void 0,r,le.getUserInfoOptsList(),le.getDVFieldOptsList(),o)}else u.constructor.showFieldsAttribute(i,[u],void 0,r,le.getUserInfoOptsList(),le.getDVFieldOptsList(),o)})),s}changeTextElement(e,t){e.select("svg").remove();var r=this.makeSVGText(t);const n=Snap.parse(r);e.append(n)}static showFieldAttribute(e,t,r,n,i,a,o,l,s,d,c,u,h,p){var f=le.createAttributePanelNode(),g=le.createAttributeToggleButtonNode(t,"required","Template.isRequired",n,p);f.appendChild(g);let m=1!==le.getUserInfoOptsListCount();var v=le.createAttributeSelectNode(t,"ownerId",u,"",m);f.appendChild(v);let A=v.querySelector("select");if(jQuery(A).select2({minimumResultsForSearch:1/0,width:"100%"}),jQuery(A).val(i).trigger("change"),jQuery(A).on("change",p),h&&Array.isArray(h)&&h.length>0){var T=le.createAttributeSelectNode(t,"defaultValue",h,"Template.defaultValueText",!0);f.appendChild(T);let e=T.querySelector("select");$(e).select2({minimumResultsForSearch:1/0,width:"100%"}),$(e).val(a).trigger("change"),$(e).on("change",p)}var E=le.createAttributeInputNode(t,"fieldId","Template.fieldIdText",r,"","",p);f.appendChild(E);var _=le.createTextAttrbuteNode(t,c,s,d,p);f.appendChild(_.row);let b=_.fontFamilyCombo.querySelector("select");$(b).select2({minimumResultsForSearch:1/0,width:"100%"}),$(b).val(o).trigger("change"),$(b).on("change",p);let y=_.fontSizeCombo.querySelector("select");$(y).select2({minimumResultsForSearch:1/0,width:"100%"}),$(y).val(l).trigger("change"),$(y).on("change",p);let S=_.colorBtn.querySelector("button");S.style.backgroundColor=c;let x=new(fe())(S,{color:c});S.value=c,x.on("change",(function(e,t,r,n){x.visible&&(S.style.backgroundColor=fe().HEX([e,t,r,n]),S.value=fe().HEX([e,t,r,n]),_.colorBtn.querySelector("input[type='text']").value=fe().HEX([e,t,r,n]))})),x.on("exit",(function(e,t,r,n){S.style.backgroundColor=fe().HEX([e,t,r,n]);let i=_.colorBtn.querySelector("input[type='text']");i.value=fe().HEX([e,t,r,n]),i.dispatchEvent(new Event("change"))})),f.setAttribute("Field-id-list",t),e.className="Editor-Attribute",e.classList.add("Text-Field"),e.appendChild(f)}static showFieldsAttribute(e,t,r,n,i,a,o){let l=r;if(null===r||le.isEmptyObject(r)){const r=le.mergeFieldsBBox(t);l=le.createAttrbutePopup(e,r),le.repositionFieldDeleteBtn(e,r.x,r.y,r.width)}le.removeAllChildNode(l);var s=[];t.forEach((e=>{s.push(e.id)}));for(var d=s.join(),c=t[0].ownerId,u=0;u<t.length;++u)if(t[u].ownerId!==c){c="";break}var h=t[0].required;for(u=0;u<t.length;++u)if(t[u].required!==h){h="";break}var p=t[0].defaultValue;for(u=0;u<t.length;++u)if(t[u].defaultValue!==p){p="";break}var f=t[0].fieldId;for(u=0;u<t.length;++u)if(t[u].fieldId!==f){f="";break}var g=t[0].fontName;for(u=0;u<t.length;++u)if(t[u].fontName!==g){g="";break}var m=t[0].fontSize;for(u=0;u<t.length;++u)if(t[u].fontSize!==m){m="";break}var v=t[0].textAlign;for(u=0;u<t.length;++u)if(t[u].textAlign!==v){v="";break}var A=t[0].isBold;for(u=0;u<t.length;++u)if(t[u].isBold!==A){A="";break}var T=t[0].fontColor;for(u=0;u<t.length;++u)if(t[u].fontColor!==T){T="";break}ge.showFieldAttribute(l,d,f,h,c,p,g,m,v,A,T,i,a,o)}validateValue(e,t){return!0}}class me extends ge{constructor(e,t,r,n){super(e,t,r,n,me.widthValue(),me.heightValue()),this.m_type=me.fieldName(),this.m_maxValueLength=100,this.m_kind=le.translateForKey("Template.textFieldTool"),le.isStringEmpty(e)||(this.m_fieldId=this.m_id.replace(this.m_type,this.m_kind+"-"))}static fieldName(){return"TextField"}ancestors(){return["TF","TBF","BF"]}get maxValueLength(){return this.m_maxValueLength}set maxValueLength(e){this.m_maxValueLength=e}static showFieldsAttribute(e,t,r,n,i,a,o){ge.showFieldsAttribute(e,t,r,n,i,a,o)}validateValue(e,t){return!0}}class ve extends ge{constructor(e,t,r,n){super(e,t,r,n,ve.widthValue(),ve.heightValue()),this.m_type=ve.fieldName(),this.m_kind=le.translateForKey("Template.numberFieldTool"),this.m_inputMax=null,this.m_inputMin=null,this.m_useCalc="false",le.isStringEmpty(e)||(this.m_fieldId=this.m_id.replace(this.m_type,this.m_kind+"-"))}static fieldName(){return"NumberField"}ancestors(){return["NF","TBF","BF"]}get inputMax(){return this.m_inputMax}set inputMax(e){this.m_inputMax=e}get inputMin(){return this.m_inputMin}set inputMin(e){this.m_inputMin=e}static showFieldAttribute(e,t,r,n,i,a,o,l,s,d,c,u,h,p,f,g,m){var v=le.createAttributePanelNode(),A=le.createAttributeToggleButtonNode(t,"required","Template.isRequired",n,m);v.appendChild(A);let T=1!==le.getUserInfoOptsListCount();var E=le.createAttributeSelectNode(t,"ownerId",f,"",T);v.appendChild(E);let _=E.querySelector("select");if(jQuery(_).select2({minimumResultsForSearch:1/0,width:"100%"}),jQuery(_).val(i).trigger("change"),jQuery(_).on("change",m),g&&Array.isArray(g)&&g.length>0){var b=le.createAttributeSelectNode(t,"defaultValue",g,"Template.defaultValueText",!0);v.appendChild(b);let e=b.querySelector("select");$(e).select2({minimumResultsForSearch:1/0,width:"100%"}),$(e).val(a).trigger("change"),$(e).on("change",m)}let y=le.isStringEmpty(o)?"":Number(o);var S=le.createAttributeInputNode(t,"fieldMinValue","Template.fieldMinValue",y,"number","",m);v.appendChild(S);let x=le.isStringEmpty(l)?"":Number(l);var C=le.createAttributeInputNode(t,"fieldMaxValue","Template.fieldMaxValue",x,"number","",m);v.appendChild(C);let F=le.createAttributeToggleButtonNode(t,"useCalc","Template.useCalc",s,m);v.appendChild(F);var w=le.createAttributeInputNode(t,"fieldId","Template.fieldIdText",r,"","",m);v.appendChild(w);var L=le.createTextAttrbuteNode(t,p,u,h,m);v.appendChild(L.row);let I=L.fontFamilyCombo.querySelector("select");$(I).select2({minimumResultsForSearch:1/0,width:"100%"}),$(I).val(d).trigger("change"),$(I).on("change",m);let N=L.fontSizeCombo.querySelector("select");$(N).select2({minimumResultsForSearch:1/0,width:"100%"}),$(N).val(c).trigger("change"),$(N).on("change",m);let R=L.colorBtn.querySelector("button");R.style.backgroundColor=p;let O=new(fe())(R,{color:p});R.value=p,O.on("change",(function(e,t,r,n){O.visible&&(R.style.backgroundColor=fe().HEX([e,t,r,n]),R.value=fe().HEX([e,t,r,n]),L.colorBtn.querySelector("input[type='text']").value=fe().HEX([e,t,r,n]))})),O.on("exit",(function(e,t,r,n){R.style.backgroundColor=fe().HEX([e,t,r,n]);let i=L.colorBtn.querySelector("input[type='text']");i.value=fe().HEX([e,t,r,n]),i.dispatchEvent(new Event("change"))})),v.setAttribute("Field-id-list",t),e.className="Editor-Attribute",e.classList.add("Text-Field"),e.appendChild(v)}static showFieldsAttribute(e,t,r,n,i,a,o){let l=r;if(null===r||le.isEmptyObject(r)){const r=le.mergeFieldsBBox(t);l=le.createAttrbutePopup(e,r),le.repositionFieldDeleteBtn(e,r.x,r.y,r.width)}le.removeAllChildNode(l);var s=[];t.forEach((e=>{s.push(e.id)}));for(var d=s.join(),c=t[0].ownerId,u=0;u<t.length;++u)if(t[u].ownerId!==c){c="";break}var h=t[0].required;for(u=0;u<t.length;++u)if(t[u].required!==h){h="";break}var p=t[0].defaultValue;for(u=0;u<t.length;++u)if(t[u].defaultValue!==p){p="";break}var f=t[0].fieldId;for(u=0;u<t.length;++u)if(t[u].fieldId!==f){f="";break}let g=t[0].m_inputMin;for(let e=0;e<t.length;++e)if(t[e].m_inputMin!==g){g="";break}let m=t[0].m_inputMax;for(let e=0;e<t.length;++e)if(t[e].m_inputMax!==m){m="";break}let v=t[0].m_useCalc;for(let e=0;e<t.length;++e)if(t[e].m_useCalc!==v){v="";break}var A=t[0].fontName;for(u=0;u<t.length;++u)if(t[u].fontName!==A){A="";break}var T=t[0].fontSize;for(u=0;u<t.length;++u)if(t[u].fontSize!==T){T="";break}var E=t[0].textAlign;for(u=0;u<t.length;++u)if(t[u].textAlign!==E){E="";break}var _=t[0].isBold;for(u=0;u<t.length;++u)if(t[u].isBold!==_){_="";break}var b=t[0].fontColor;for(u=0;u<t.length;++u)if(t[u].fontColor!==b){b="";break}ve.showFieldAttribute(l,d,f,h,c,p,g,m,v,A,T,E,_,b,i,a,o)}validateValue(e,t){return!("defaultValue"===e&&!/^\d+$/.test(t))}}class Ae extends ge{constructor(e,t,r,n){super(e,t,r,n,Ae.widthValue(),Ae.heightValue()),this.m_type=Ae.fieldName(),this.m_kind=le.translateForKey("Template.dateFieldTool"),this.m_inputMax="",this.m_inputMin="",this.m_useCurrentDate="true",this.m_inputFormat="Y-m-d",le.isStringEmpty(e)||(this.m_fieldId=this.m_id.replace(this.m_type,this.m_kind+"-"))}static fieldName(){return"DateField"}ancestors(){return["DF","TBF","BF"]}get inputFormat(){return this.m_inputFormat}set inputFormat(e){this.m_inputFormat=e}get inputMax(){return this.m_inputMax}set inputMax(e){this.m_inputMax=e}get inputMin(){return this.m_inputMin}set inputMin(e){this.m_inputMin=e}get useCurrentDate(){return this.m_useCurrentDate}set useCurrentDate(e){this.m_useCurrentDate=e}static showFieldAttribute(e,t,r,n,i,a,o,l,s,d,c,u,h,p){var f=le.createAttributePanelNode(),g=le.createAttributeToggleButtonNode(t,"required","Template.isRequired",n,p);f.appendChild(g);let m=1!==le.getUserInfoOptsListCount();var v=le.createAttributeSelectNode(t,"ownerId",h,"",m);f.appendChild(v);let A=v.querySelector("select");$(A).select2({minimumResultsForSearch:1/0,width:"100%"}),$(A).val(i).trigger("change"),$(A).on("change",p);var T=le.createTextAttrbuteNode(t,u,d,c,p);f.appendChild(T.row);let E=T.fontFamilyCombo.querySelector("select");$(E).select2({minimumResultsForSearch:1/0,width:"100%"}),$(E).val(l).trigger("change"),$(E).on("change",p);let _=T.fontSizeCombo.querySelector("select");$(_).select2({minimumResultsForSearch:1/0,width:"100%"}),$(_).val(s).trigger("change"),$(_).on("change",p);let b=T.colorBtn.querySelector("button");b.style.backgroundColor=u;let y=new(fe())(b,{color:u});b.value=u,y.on("change",(function(e,t,r,n){y.visible&&(b.style.backgroundColor=fe().HEX([e,t,r,n]),b.value=fe().HEX([e,t,r,n]),T.colorBtn.querySelector("input[type='text']").value=fe().HEX([e,t,r,n]))})),y.on("exit",(function(e,t,r,n){b.style.backgroundColor=fe().HEX([e,t,r,n]);let i=T.colorBtn.querySelector("input[type='text']");i.value=fe().HEX([e,t,r,n]),i.dispatchEvent(new Event("change"))}));var S=le.createAttributeInputNode(t,"fieldId","Template.fieldIdText",r,"","",p);f.appendChild(S);var x=le.createAttributeSelectNode(t,"inputFormat",le.dateFormatComboBox,"Template.dateFormatText",!1);f.appendChild(x);let C=x.querySelector("select");$(C).select2({minimumResultsForSearch:1/0,width:"100%"}),$(C).val(a).trigger("change"),$(C).on("change",p);var F=le.createAttributeCheckBoxNode(t,"useCurrentDate","Template.useCurrentDateText",o,p);f.appendChild(F),f.setAttribute("Field-id-list",t),e.className="Editor-Attribute",e.classList.add("Text-Field"),e.appendChild(f)}static showFieldsAttribute(e,t,r,n,i,a,o){let l=r;if(null===r||le.isEmptyObject(r)){const r=le.mergeFieldsBBox(t);l=le.createAttrbutePopup(e,r),le.repositionFieldDeleteBtn(e,r.x,r.y,r.width)}le.removeAllChildNode(l);var s=[];t.forEach((e=>{s.push(e.id)}));for(var d=s.join(),c=t[0].ownerId,u=0;u<t.length;++u)if(t[u].ownerId!==c){c="";break}var h=t[0].required;for(u=0;u<t.length;++u)if(t[u].required!==h){h="";break}d=s.join();var p=t[0].fieldId;for(u=0;u<t.length;++u)if(t[u].fieldId!==p){p="";break}var f=t[0].fontName;for(u=0;u<t.length;++u)if(t[u].fontName!==f){f="";break}var g=t[0].fontSize;for(u=0;u<t.length;++u)if(t[u].fontSize!==g){g="";break}var m=t[0].textAlign;for(u=0;u<t.length;++u)if(t[u].textAlign!==m){m="";break}var v=t[0].isBold;for(u=0;u<t.length;++u)if(t[u].isBold!==v){v="";break}var A=t[0].fontColor;for(u=0;u<t.length;++u)if(t[u].fontColor!==A){A="";break}var T=t[0].inputFormat;for(u=0;u<t.length;++u)if(t[u].inputFormat!==T){T="";break}var E=t[0].useCurrentDate;for(u=0;u<t.length;++u)if(t[u].useCurrentDate!==E){E="";break}for(p=t[0].fieldId,u=0;u<t.length;++u)if(t[u].fieldId!==p){p="";break}Ae.showFieldAttribute(l,d,p,h,c,T,E,f,g,m,v,A,i,o)}}class Te extends se{constructor(e,t,r,n,i,a,o){super(e,t,r,n,Te.widthValue(),Te.heightValue()),this.m_type=Te.fieldName(),this.m_kind=le.translateForKey("Template.signFieldTool"),this.m_signPenThickness=1,this.m_signPenColor="#000000",le.isStringEmpty(e)||(this.m_fieldId=this.m_id.replace(this.m_type,this.m_kind+"-"),Te.useDrawSignDef=i,Te.useImageSignDef=a,Te.useRegSignDef=o,this.m_useDrawSign=i,this.m_useImageSign=a,this.m_useRegSign=o,this.m_regSignApiUrl="")}static fieldName(){return"SignField"}ancestors(){return["SF","BF"]}static widthValue(){return 150}static heightValue(){return 60}get signPenThickness(){return this.m_signPenThickness}set signPenThickness(e){this.m_signPenThickness=e}get signPenColor(){return this.m_signPenColor}set signPenColor(e){this.m_signPenColor=e}static showFieldAttribute(e,t,r,n,i,a,o,l,s,d,c,u,h){var p=le.createAttributePanelNode(),f=le.createAttributeToggleButtonNode(t,"required","Template.isRequired",n,u);p.appendChild(f);let g=1!==le.getUserInfoOptsListCount();var m=le.createAttributeSelectNode(t,"ownerId",o,"",g);p.appendChild(m);let v=m.querySelector("select");$(v).select2({minimumResultsForSearch:1/0,width:"100%"}),$(v).val(i).trigger("change"),$(v).on("change",u);var A=le.createAttributeSelectNode(t,"signPenThickness",le.getSignPenWidthComboBox(),"Template.signPenThicknessText",!1);p.appendChild(A);let T=A.querySelector("select");$(T).select2({minimumResultsForSearch:1/0,width:"100%"}),$(T).val(a).trigger("change"),$(T).on("change",u);var E=le.createAttributeInputNode(t,"fieldId","Template.fieldIdText",r,"","",u);if(p.appendChild(E),this.useDrawSignDef=h.useDrawSign,this.useImageSignDef=h.useImageSign,this.useRegSignDef=h.useRegSign,null==this.useDrawSignDef&&(this.useDrawSignDef="true"),null==this.useImageSignDef&&(this.useImageSignDef="true"),null==this.useRegSignDef&&(this.useRegSignDef="true"),"true"==this.useDrawSignDef||"true"==l){var _=le.createAttributeToggleButtonNode(t,"useDrawSign","Template.drawSignText",l,u);p.appendChild(_)}if("true"==this.useImageSignDef||"true"==s){var b=le.createAttributeToggleButtonNode(t,"useImageSign","Template.imageSignText",s,u);p.appendChild(b)}if("true"==this.useRegSignDef||"true"==d){var y=le.createAttributeToggleButtonNode(t,"useRegSign","Template.regSignText",d,u);p.appendChild(y)}p.setAttribute("Field-id-list",t),e.className="Editor-Attribute",e.classList.add("Sign-Field"),e.appendChild(p)}static showFieldsAttribute(e,t,r,n,i,a,o,l){let s=r;if(null===r||le.isEmptyObject(r)){const r=le.mergeFieldsBBox(t);s=le.createAttrbutePopup(e,r),le.repositionFieldDeleteBtn(e,r.x,r.y,r.width)}le.removeAllChildNode(s);var d=[];t.forEach((e=>{d.push(e.id)}));for(var c=d.join(),u=t[0].ownerId,h=0;h<t.length;++h)if(t[h].ownerId!==u){u="";break}var p=t[0].fieldId;for(h=0;h<t.length;++h)if(t[h].fieldId!==p){p="";break}var f=t[0].required;for(h=0;h<t.length;++h)if(t[h].required!==f){f="";break}var g=t[0].signPenThickness;t.forEach((e=>{e.signPenThickness===g||(g="")}));let m=t[0].m_useDrawSign;for(let e=0;e<t.length;++e)if(t[e].m_useDrawSign!==m){m="";break}let v=t[0].m_useImageSign;for(let e=0;e<t.length;++e)if(t[e].m_useImageSign!==v){v="";break}let A=t[0].m_useRegSign;for(let e=0;e<t.length;++e)if(t[e].m_useRegSign!==A){A="";break}var T=t[0].m_regSignApiUrl;for(h=0;h<t.length;++h)if(t[h].m_regSignApiUrl!==T){T="";break}Te.showFieldAttribute(s,c,p,f,u,g,i,m,v,A,T,o,l)}makeSVGText(e){let t=this.m_fieldId;var r="fill='"+this.fontColor+"' ";let n=' x="50%"  dy="0.35em" text-anchor="middle" ';"left"===this.textAlign?n=' x="3%"  dy="0.35em" text-anchor="start" ':"right"===this.textAlign&&(n=' x="97%" dy="0.35em" text-anchor="end" ');let i="<text"+n+'y="50%" font-size="'+this.fontSize+'px" '+r+">"+t+"</text>";return'<svg x="'+this.x+'px" y="'+this.y+'px" width="'+this.width*e+'px" height="'+this.height*e+'px"><g  >'+i+"</g></svg>"}getSVGFieldObject(t,r,n,i,a,o,l){let s=r.group();s.attr({id:this.id+"Group",cursor:"move"});let d=t.rect(this.x,this.y,this.width*n,this.height*n);d.attr({id:this.id,"fill-opacity":"0.6",fill:"#ffac7f"}),s.append(d);const c=Snap.parse(this.makeSVGText(n));s.append(c),s.hover((function(){}),(function(){}));let u=this,h={x:0,y:0};return s.mousedown((function(e){h.x=e.pageX,h.y=e.pageY,r.selectAll("g").forEach((function(e){e!==s&&(le.isEmptyObject(e.freeTransform)||e.freeTransform.hideResizeHandler())})),le.isEmptyObject(s.freeTransform)?l(s,d.attr("width"),d.attr("height")):s.freeTransform.showResizeHandler()})),s.mouseup((function(t){if(s.parent().attr("id")===e.DRAG_BOX_NAME){if(Math.abs(h.x-t.pageX)>e.MINIMUM_DRAG_SIZE||Math.abs(h.y-t.pageY)>e.MINIMUM_DRAG_SIZE)return;a.call(),r.selectAll("g").forEach((function(e){e!==s&&(le.isEmptyObject(e.freeTransform)||e.freeTransform.hideResizeHandler())})),le.isEmptyObject(s.freeTransform)?l(s,d.attr("width"),d.attr("height")):s.freeTransform.showResizeHandler(),u.constructor.showFieldsAttribute(i,[u],void 0,r,le.getUserInfoOptsList(),le.getDVFieldOptsList(),o,le.getSignTabShowOpt())}else u.constructor.showFieldsAttribute(i,[u],void 0,r,le.getUserInfoOptsList(),le.getDVFieldOptsList(),o,le.getSignTabShowOpt())})),s}}class Ee extends se{constructor(e,t,r,n){super(e,t,r,n,Ee.widthValue(),Ee.heightValue()),this.m_type=Ee.fieldName(),this.m_kind=le.translateForKey("Template.imageFieldTool"),le.isStringEmpty(e)||(this.m_fieldId=this.m_id.replace(this.m_type,this.m_kind+"-"))}static fieldName(){return"ImageField"}ancestors(){return["IMGF","BF"]}static widthValue(){return 150}static heightValue(){return 60}makeSVGText(e){let t=this.m_fieldId;var r="fill='"+this.fontColor+"' ";let n=' x="50%"  dy="0.35em" text-anchor="middle" ';"left"===this.textAlign?n=' x="3%"  dy="0.35em" text-anchor="start" ':"right"===this.textAlign&&(n=' x="97%" dy="0.35em" text-anchor="end" ');let i="<text"+n+'y="50%" font-size="'+this.fontSize+'px" '+r+">"+t+"</text>";return'<svg x="'+this.x+'px" y="'+this.y+'px" width="'+this.width*e+'px" height="'+this.height*e+'px"><g  >'+i+"</g></svg>"}getSVGFieldObject(t,r,n,i,a,o,l){let s=r.group();s.attr({id:this.id+"Group",cursor:"move"});let d=t.rect(this.x,this.y,this.width*n,this.height*n);d.attr({id:this.id,"fill-opacity":"0.6",fill:"#ffac7f"}),s.append(d);const c=Snap.parse(this.makeSVGText(n));s.append(c),s.hover((function(){}),(function(){}));let u=this,h={x:0,y:0};return s.mousedown((function(e){h.x=e.pageX,h.y=e.pageY,r.selectAll("g").forEach((function(e){e!==s&&(le.isEmptyObject(e.freeTransform)||e.freeTransform.hideResizeHandler())})),le.isEmptyObject(s.freeTransform)?l(s,d.attr("width"),d.attr("height")):s.freeTransform.showResizeHandler()})),s.mouseup((function(t){if(s.parent().attr("id")===e.DRAG_BOX_NAME){if(Math.abs(h.x-t.pageX)>e.MINIMUM_DRAG_SIZE||Math.abs(h.y-t.pageY)>e.MINIMUM_DRAG_SIZE)return;a.call(),r.selectAll("g").forEach((function(e){e!==s&&(le.isEmptyObject(e.freeTransform)||e.freeTransform.hideResizeHandler())})),le.isEmptyObject(s.freeTransform)?l(s,d.attr("width"),d.attr("height")):s.freeTransform.showResizeHandler(),u.constructor.showFieldsAttribute(i,[u],void 0,r,le.getUserInfoOptsList(),le.getDVFieldOptsList(),o)}else u.constructor.showFieldsAttribute(i,[u],void 0,r,le.getUserInfoOptsList(),le.getDVFieldOptsList(),o)})),s}}class _e extends ge{constructor(e,t,r,n){super(e,t,r,n,_e.widthValue(),_e.heightValue()),this.m_type=_e.fieldName(),this.m_kind=le.translateForKey("Template.multilineFieldTool"),le.isStringEmpty(e)||(this.m_fieldId=this.m_id.replace(this.m_type,this.m_kind+"-"),this.textVeticalAlign="top")}static fieldName(){return"MultiLineTextField"}ancestors(){return["MLTF","TBF","BF"]}static widthValue(){return 150}static heightValue(){return 60}static showFieldsAttribute(e,t,r,n,i,a,o){ge.showFieldsAttribute(e,t,r,n,i,a,o)}validateValue(e,t){return!0}}class be extends se{constructor(e,t,r,n){super(e,t,r,n,be.widthValue(),be.heightValue()),this.m_type=be.fieldName(),this.m_kind=le.translateForKey("Template.checkFieldTool"),le.isStringEmpty(e)||(this.m_fieldId=this.m_id.replace(this.m_type,this.m_kind+"-"))}static fieldName(){return"CheckboxField"}ancestors(){return["CBF","BF"]}static widthValue(){return 60}static heightValue(){return 60}getSVGFieldObject(t,r,n,i,a,o,l){let s=r.group();s.attr({id:this.id+"Group",cursor:"move"});let d=t.rect(this.x,this.y,this.width*n,this.height*n);d.attr({id:this.id,"fill-opacity":"0.6",fill:"#ffac7f"}),s.append(d);const c='<svg xmlns="http://www.w3.org/2000/svg" x="'+this.x+'px" y="'+this.y+'px" width="'+this.width*n+'px" height="'+this.height*n+'px"  viewBox="0 0 48 48"><path d="M17.2 32.2L4.9 19.9 0 24.8 17.2 42 48 10.9 43.1 6z"/></svg >',u=Snap.parse(c);s.append(u),s.hover((function(){}),(function(){}));let h=this,p={x:0,y:0};return s.mousedown((function(e){p.x=e.pageX,p.y=e.pageY,r.selectAll("g").forEach((function(e){e!==s&&(le.isEmptyObject(e.freeTransform)||e.freeTransform.hideResizeHandler())})),le.isEmptyObject(s.freeTransform)?l(s,d.attr("width"),d.attr("height")):s.freeTransform.showResizeHandler()})),s.mouseup((function(t){if(s.parent().attr("id")===e.DRAG_BOX_NAME){if(Math.abs(p.x-t.pageX)>e.MINIMUM_DRAG_SIZE||Math.abs(p.y-t.pageY)>e.MINIMUM_DRAG_SIZE)return;a.call(),r.selectAll("g").forEach((function(e){e!==s&&(le.isEmptyObject(e.freeTransform)||e.freeTransform.hideResizeHandler())})),le.isEmptyObject(s.freeTransform)?l(s,d.attr("width"),d.attr("height")):s.freeTransform.showResizeHandler(),h.constructor.showFieldsAttribute(i,[h],void 0,r,le.getUserInfoOptsList(),le.getDVFieldOptsList(),o)}else h.constructor.showFieldsAttribute(i,[h],void 0,r,le.getUserInfoOptsList(),le.getDVFieldOptsList(),o)})),s}}class ye extends se{constructor(t,r,n,i){super(t,r,n,i,ye.widthValue(),ye.heightValue()),this.m_type=ye.fieldName(),this.m_kind=le.translateForKey("Template.radioFieldTool"),le.isStringEmpty(t)||(this.m_groupName=t,this.m_defaultValue=t,this.m_fieldId=this.m_id.replace(this.m_type,this.m_kind+"-"),this.m_radioType=e.RADIO_TYPE_1)}static fieldName(){return"RadioField"}ancestors(){return["RF","BF"]}static widthValue(){return 60}static heightValue(){return 60}get groupName(){return this.m_groupName}set groupName(e){this.m_groupName=e}get defaultValue(){return this.m_defaultValue}set defaultValue(e){this.m_defaultValue=e}get radioType(){return this.m_radioType}set radioType(e){this.m_radioType=e}getSVGFieldObject(t,r,n,i,a,o,l){let s=r.group();s.attr({id:this.id+"Group",cursor:"move"});let d=t.rect(this.x,this.y,this.width*n,this.height*n);d.attr({id:this.id,"fill-opacity":"0.6",fill:"#ffac7f"}),s.append(d);const c=this.m_radioType===e.RADIO_TYPE_1?e.RAIOD_TYPE_1_PATH:e.RAIOD_TYPE_2_PATH,u='<svg xmlns="http://www.w3.org/2000/svg" x="'+this.x+'px" y="'+this.y+'px" width="'+this.width*n+'px" height="'+this.height*n+'px"  viewBox="0 0 48 48"> '+c+" </svg >",h=Snap.parse(u);s.append(h),s.hover((function(){}),(function(){}));let p=this,f={x:0,y:0};return s.mousedown((function(e){f.x=e.pageX,f.y=e.pageY,r.selectAll("g").forEach((function(e){e!==s&&(le.isEmptyObject(e.freeTransform)||e.freeTransform.hideResizeHandler())})),le.isEmptyObject(s.freeTransform)?l(s,d.attr("width"),d.attr("height")):s.freeTransform.showResizeHandler()})),s.mouseup((function(t){if(s.parent().attr("id")===e.DRAG_BOX_NAME){if(Math.abs(f.x-t.pageX)>e.MINIMUM_DRAG_SIZE||Math.abs(f.y-t.pageY)>e.MINIMUM_DRAG_SIZE)return;a.call(),r.selectAll("g").forEach((function(e){e!==s&&(le.isEmptyObject(e.freeTransform)||e.freeTransform.hideResizeHandler())})),le.isEmptyObject(s.freeTransform)?l(s,d.attr("width"),d.attr("height")):s.freeTransform.showResizeHandler(),p.constructor.showFieldsAttribute(i,[p],void 0,r,le.getUserInfoOptsList(),le.getDVFieldOptsList(),o)}else p.constructor.showFieldsAttribute(i,[p],void 0,r,le.getUserInfoOptsList(),le.getDVFieldOptsList(),o)})),s}changeTextElement(t,r){t.select("svg").remove();const n=this.m_radioType===e.RADIO_TYPE_1?e.RAIOD_TYPE_1_PATH:e.RAIOD_TYPE_2_PATH,i='<svg xmlns="http://www.w3.org/2000/svg" x="'+this.x+'px" y="'+this.y+'px" width="'+this.width*r+'px" height="'+this.height*r+'px"  viewBox="0 0 48 48"> '+n+" </svg >",a=Snap.parse(i);t.append(a)}static showFieldAttribute(e,t,r,n,i,a,o,l,s,d){var c=le.createAttributePanelNode(),u=le.createAttributeToggleButtonNode(t,"required","Template.isRequired",n,d);c.appendChild(u);let h=1!==le.getUserInfoOptsListCount();var p=le.createAttributeSelectNode(t,"ownerId",s,"",h);c.appendChild(p);let f=p.querySelector("select");$(f).select2({minimumResultsForSearch:1/0,width:"100%"}),$(f).val(i).trigger("change"),$(f).on("change",d);var g=le.createAttributeSelectNode(t,"radioType",le.radioTypeList,"",h);c.appendChild(g);let m=g.querySelector("select");$(m).select2({minimumResultsForSearch:1/0,width:"100%"}),$(m).val(l).trigger("change"),$(m).on("change",d);var v=le.createAttributeInputNode(t,"groupName","Template.radioGroupNameText",a,"","",d);c.appendChild(v);var A=le.createAttributeInputNode(t,"defaultValue","Template.radioValueText",o,"","",d);c.appendChild(A);var T=le.createAttributeInputNode(t,"fieldId","Template.fieldIdText",r,"","",d);c.appendChild(T),c.setAttribute("Field-id-list",t),e.className="Editor-Attribute",e.classList.add("Base-Field"),e.appendChild(c)}static showFieldsAttribute(e,t,r,n,i,a,o){let l=r;if(null===r||le.isEmptyObject(r)){const r=le.mergeFieldsBBox(t);l=le.createAttrbutePopup(e,r),le.repositionFieldDeleteBtn(e,r.x,r.y,r.width)}le.removeAllChildNode(l);var s=[];t.forEach((e=>{s.push(e.id)}));for(var d=s.join(),c=t[0].ownerId,u=0;u<t.length;++u)if(t[u].ownerId!==c){c="";break}var h=t[0].fieldId;for(u=0;u<t.length;++u)if(t[u].fieldId!==h){h="";break}var p=t[0].required;for(u=0;u<t.length;++u)if(t[u].required!==p){p="";break}var f=t[0].groupName;for(u=0;u<t.length;++u)if(t[u].groupName!==f){f="";break}var g=t[0].defaultValue;for(u=0;u<t.length;++u)if(t[u].defaultValue!==g){g="";break}var m=t[0].m_radioType;for(u=0;u<t.length;++u)if(t[u].m_radioType!==m){m="";break}ye.showFieldAttribute(l,d,h,p,c,f,g,m,i,o)}}class Se extends ge{constructor(e,t,r,n){super(e,t,r,n,Se.widthValue(),Se.heightValue()),this.m_type=Se.fieldName(),this.m_maxValueLength=100,this.m_kind=le.translateForKey("Template.labelFieldTool"),le.isStringEmpty(e)||(this.m_fieldId=this.m_id.replace(this.m_type,this.m_kind+"-"))}static fieldName(){return"LabelField"}ancestors(){return["LF","TBF","BF"]}static showFieldAttribute(e,t,r,n,i,a,o,l,s,d,c,u,h,p,f){var g=le.createAttributePanelNode(),m=le.createAttributeToggleButtonNode(t,"required","Template.isRequired",n,f);g.appendChild(m);let v=1!==le.getUserInfoOptsListCount();var A=le.createAttributeSelectNode(t,"ownerId",h,"",v);g.appendChild(A);let T=A.querySelector("select");if(jQuery(T).select2({minimumResultsForSearch:1/0,width:"100%"}),jQuery(T).val(i).trigger("change"),jQuery(T).on("change",f),p&&Array.isArray(p)&&p.length>0){var E=le.createAttributeSelectNode(t,"defaultValue",p,"Template.defaultValueText",!0);g.appendChild(E);let e=E.querySelector("select");$(e).select2({minimumResultsForSearch:1/0,width:"100%"}),$(e).val(a).trigger("change"),$(e).on("change",f)}var _=le.createAttributeInputNode(t,"fieldId","Template.fieldIdText",r,"","",f);g.appendChild(_);var b=le.createAttributeInputNode(t,"value","Template.labelValueText",u,"","",f);g.appendChild(b);var y=le.createTextAttrbuteNode(t,c,s,d,f);g.appendChild(y.row);let S=y.fontFamilyCombo.querySelector("select");$(S).select2({minimumResultsForSearch:1/0,width:"100%"}),$(S).val(o).trigger("change"),$(S).on("change",f);let x=y.fontSizeCombo.querySelector("select");$(x).select2({minimumResultsForSearch:1/0,width:"100%"}),$(x).val(l).trigger("change"),$(x).on("change",f);let C=y.colorBtn.querySelector("button");C.style.backgroundColor=c;let F=new(fe())(C,{color:c});C.value=c,F.on("change",(function(e,t,r,n){F.visible&&(C.style.backgroundColor=fe().HEX([e,t,r,n]),C.value=fe().HEX([e,t,r,n]),y.colorBtn.querySelector("input[type='text']").value=fe().HEX([e,t,r,n]))})),F.on("exit",(function(e,t,r,n){C.style.backgroundColor=fe().HEX([e,t,r,n]);let i=y.colorBtn.querySelector("input[type='text']");i.value=fe().HEX([e,t,r,n]),i.dispatchEvent(new Event("change"))})),g.setAttribute("Field-id-list",t),e.className="Editor-Attribute",e.classList.add("Text-Field"),e.appendChild(g)}static showFieldsAttribute(e,t,r,n,i,a,o){let l=r;if(null===r||le.isEmptyObject(r)){const r=le.mergeFieldsBBox(t);l=le.createAttrbutePopup(e,r),le.repositionFieldDeleteBtn(e,r.x,r.y,r.width)}le.removeAllChildNode(l);var s=[];t.forEach((e=>{s.push(e.id)}));for(var d=s.join(),c=t[0].ownerId,u=0;u<t.length;++u)if(t[u].ownerId!==c){c="";break}var h=t[0].fieldId;for(u=0;u<t.length;++u)if(t[u].fieldId!==h){h="";break}var p=t[0].required;for(u=0;u<t.length;++u)if(t[u].required!==p){p="";break}var f=t[0].defaultValue;for(u=0;u<t.length;++u)if(t[u].defaultValue!==f){f="";break}var g=t[0].fontName;for(u=0;u<t.length;++u)if(t[u].fontName!==g){g="";break}var m=t[0].fontSize;for(u=0;u<t.length;++u)if(t[u].fontSize!==m){m="";break}var v=t[0].textAlign;for(u=0;u<t.length;++u)if(t[u].textAlign!==v){v="";break}var A=t[0].isBold;for(u=0;u<t.length;++u)if(t[u].isBold!==A){A="";break}var T=t[0].fontColor;for(u=0;u<t.length;++u)if(t[u].fontColor!==T){T="";break}var E=t[0].value;for(u=0;u<t.length;++u)if(t[u].value!==E){E="";break}Se.showFieldAttribute(l,d,h,p,c,f,g,m,v,A,T,E,i,a,o)}validateValue(e,t){return!0}makeSVGText(e){let t=this.value;""===t&&""===this.defaultValueText?t=this.m_fieldId:""===t&&""!==this.defaultValueText&&(t=this.defaultValueText);var r="fill='"+this.fontColor+"' ";let n=' x="50%"  dy="0.35em" text-anchor="middle" ';"left"===this.textAlign?n=' x="3%"  dy="0.35em" text-anchor="start" ':"right"===this.textAlign&&(n=' x="97%" dy="0.35em" text-anchor="end" ');let i='y="50%"';"top"===this.textVeticalAlign?i='y="25%"':"bottom"===this.textVeticalAlign&&(i='y="70%"');let a="";"true"===this.isBold&&(a=" font-weight='bold' ");let o="<text"+n+i+" font-family='"+this.fontName+"'  font-size=\""+this.fontSize*e+'px" '+r+a+">"+t+"</text>";return'<svg x="'+this.x+'px" y="'+this.y+'px" width="'+this.width*e+'px" height="'+this.height*e+'px"><g  >'+o+"</g></svg>"}}class xe extends ge{constructor(e,t,r,n){super(e,t,r,n,xe.widthValue(),xe.heightValue()),this.m_type=xe.fieldName(),this.m_comboboxList="",this.m_kind=le.translateForKey("Template.comboFieldTool"),le.isStringEmpty(e)||(this.m_fieldId=this.m_id.replace(this.m_type,this.m_kind+"-"))}static fieldName(){return"ComboboxField"}ancestors(){return["CMBF","TBF","BF"]}get comboboxList(){return this.m_comboboxList}set comboboxList(e){this.m_comboboxList=e}static showFieldAttribute(e,t,r,n,i,a,o,l,s,d,c,u,h,p,f){var g=le.createAttributePanelNode(),m=le.createAttributeToggleButtonNode(t,"required","Template.isRequired",n,f);g.appendChild(m);let v=1!==le.getUserInfoOptsListCount();var A=le.createAttributeSelectNode(t,"ownerId",h,"",v);g.appendChild(A);let T=A.querySelector("select");if(jQuery(T).select2({minimumResultsForSearch:1/0,width:"100%"}),jQuery(T).val(i).trigger("change"),jQuery(T).on("change",f),p&&Array.isArray(p)&&p.length>0){var E=le.createAttributeSelectNode(t,"defaultValue",p,"Template.defaultValueText",!0);g.appendChild(E);let e=E.querySelector("select");$(e).select2({minimumResultsForSearch:1/0,width:"100%"}),$(e).val(a).trigger("change"),$(e).on("change",f)}var _=le.createAttributeInputNode(t,"fieldId","Template.fieldIdText",r,"","",f);g.appendChild(_);var b=le.createAttributeTextAreaNode(t,"comboboxList","Template.comboBoxSelctValueText",u,"",f);g.appendChild(b);var y=le.createTextAttrbuteNode(t,c,s,d,f);g.appendChild(y.row);let S=y.fontFamilyCombo.querySelector("select");$(S).select2({minimumResultsForSearch:1/0,width:"100%"}),$(S).val(o).trigger("change"),$(S).on("change",f);let x=y.fontSizeCombo.querySelector("select");$(x).select2({minimumResultsForSearch:1/0,width:"100%"}),$(x).val(l).trigger("change"),$(x).on("change",f);let C=y.colorBtn.querySelector("button");C.style.backgroundColor=c;let F=new(fe())(C,{color:c});C.value=c,F.on("change",(function(e,t,r,n){F.visible&&(C.style.backgroundColor=fe().HEX([e,t,r,n]),C.value=fe().HEX([e,t,r,n]),y.colorBtn.querySelector("input[type='text']").value=fe().HEX([e,t,r,n]))})),F.on("exit",(function(e,t,r,n){C.style.backgroundColor=fe().HEX([e,t,r,n]);let i=y.colorBtn.querySelector("input[type='text']");i.value=fe().HEX([e,t,r,n]),i.dispatchEvent(new Event("change"))})),g.setAttribute("Field-id-list",t),e.className="Editor-Attribute",e.classList.add("Text-Field"),e.appendChild(g)}static showFieldsAttribute(e,t,r,n,i,a,o){let l=r;if(null===r||le.isEmptyObject(r)){const r=le.mergeFieldsBBox(t);l=le.createAttrbutePopup(e,r),le.repositionFieldDeleteBtn(e,r.x,r.y,r.width)}le.removeAllChildNode(l);var s=[];t.forEach((e=>{s.push(e.id)}));for(var d=s.join(),c=t[0].ownerId,u=0;u<t.length;++u)if(t[u].ownerId!==c){c="";break}var h=t[0].required;for(u=0;u<t.length;++u)if(t[u].required!==h){h="";break}var p=t[0].defaultValue;for(u=0;u<t.length;++u)if(t[u].defaultValue!==p){p="";break}var f=t[0].fontName;for(u=0;u<t.length;++u)if(t[u].fontName!==f){f="";break}var g=t[0].fontSize;for(u=0;u<t.length;++u)if(t[u].fontSize!==g){g="";break}var m=t[0].textAlign;for(u=0;u<t.length;++u)if(t[u].textAlign!==m){m="";break}var v=t[0].isBold;for(u=0;u<t.length;++u)if(t[u].isBold!==v){v="";break}var A=t[0].fontColor;for(u=0;u<t.length;++u)if(t[u].fontColor!==A){A="";break}var T=t[0].comboboxList;for(u=0;u<t.length;++u)if(t[u].comboboxList!==T){T="";break}let E=[];if(""!==T){const e=T.split("\n");for(u=0;u<e.length;++u)le.isStringEmpty(e[u])||E.push({text:e[u],value:e[u]})}var _=t[0].fieldId;for(u=0;u<t.length;++u)if(t[u].fieldId!==_){_="";break}xe.showFieldAttribute(l,d,_,h,c,p,f,g,m,v,A,T,i,E,o)}validateValue(e,t){return!0}}class Ce{constructor(e,t){this.formTemplateName=e,this.formTemplateUUID=t,null==t&&(this.formTemplateUUID=le.generate_uuidv4()),this.formerList=[]}pushOwner(e){this.formerList.push(e)}}class Fe{constructor(){this.pages=[]}pushPage(e){this.pages.push(e)}static cloneTemplateDataOwnerObject(e){var t=new Fe;for(var r in e)"pages"!==r&&"fields"!==r&&("object"==typeof e[r]&&null!=e[r]?t[r]=Fe.cloneObject(e[r]):t[r]=e[r]);return t}static cloneObject(e){var t={};for(var r in e)"pages"!==r&&"fields"!==r&&("object"==typeof e[r]&&null!=e[r]?t[r]=Fe.cloneObject(e[r]):t[r]=e[r]);return t}}class we{constructor(e){this.pageNo=e,this.fields=[]}pushField(e){this.fields.push(e)}}class Le{constructor(){this.fields={}}pushField(e,t){this.fields[e]=t}field(e){return this.fields[e]}removeField(e){this.contains(e)&&delete this.fields[e]}contains(e){return this.fields.hasOwnProperty(e)}}class Ie{dragStart=!1;dragBox=void 0;mainCanvas;pageBoundingBox={x:0,y:0,width:0,height:0};templateRectMousePosition;selectAddFieldType="";fieldDictionary={};unredoActionIdx=-1;unredoActionDict={};pdfViewer;templateUserFieldInfo={};ownerNode=null;isFieldDragStart=!1;menuCode="";templateClipBoard="";useDrawSign="true";useImageSign="true";useRegSign="true";constructor(e,t=null,r){this.pdfViewer=e,(de=this).appendSignTabShowOpt(r),this.ownerNode=t}addUndoRedoAct(t,r,n){t!==e.CREATE_FIELD_ACTION&&t!==e.REMOVE_FIELD_ACTION&&r===n||(de.unredoActionDict[++de.unredoActionIdx]={action:t,old:r,new:n},de.unredoActionDict[de.unredoActionIdx+1]=void 0)}buildDVOptsInfo(e){for(var t=[],r=0;r<e.length;++r)t.push({text:e[r].displayText,value:e[r].variable});le.setDVFieldOptsList(t)}buildSignTabShowOpt(e){le.setSignTabShowOpt(e)}buildFieldUserInfo(e){for(var t=0;t<e.length;++t){let r=Object.assign(new Le,e[t]);de.templateUserFieldInfo[r.userUUID]=r}le.setUserInfoOptsList(de.convertUserListToSelectOptions(de.templateUserFieldInfo)),le.setUserInfoOptsListCount(Object.keys(de.templateUserFieldInfo).length)}buildFieldformerList(){const e=de.ownerNode.querySelector(" #Editor-User-Component_Box");le.removeAllChildNode(e),Object.keys(de.templateUserFieldInfo).forEach((function(t){const r=de.templateUserFieldInfo[t];if("Y"===r.isFormer)return;let n=document.createElement("div");n.setAttribute("data-user-key",t),n.classList.add("User-Component-List-Conatiner");const i=Object.keys(r.fields);0===i.length&&n.classList.add("No-Child");let a=document.createElement("ul");a.className="User-Component-List";let o=document.createElement("li"),l=document.createElement("span");l.textContent=r.displayUserName,o.appendChild(l),a.appendChild(o),i.forEach((function(e){const t=r.field(e);if(t.isRemoved)return;let n=document.createElement("li"),i=document.createElement("span"),o="true"===t.required?"["+le.translateForKey("Template.requireText")+"]":"["+le.translateForKey("Template.selectText")+"]";"SignField"===t.type&&(i.textContent="["+le.translateForKey("Template.signText")+"]"),i.textContent=o+t.fieldId,n.appendChild(i),a.appendChild(n)})),n.appendChild(a),e.appendChild(n)}))}calcFieldPostion(t,r=!1){var n=de.ownerNode.querySelector(" #"+e.TEMPLATE_PDF_VIEWER).getBoundingClientRect();const i=t.pageNo,a=de.pdfViewer._pages[i-1].viewport;var o=a.convertToViewportPoint(t.pdfX,t.pdfY),l=a.convertToViewportPoint(t.pdfX2,t.pdfY2),s=de.computePageOffset(i),d=o[0]+s.left-n.left,c=o[1]+s.top-n.top,u=l[0]+s.left-n.left,h=l[1]+s.top-n.top;if(r){var p=de.getPageBorderWidth(i);d+=p.left,c+=p.top,u+=p.left,h+=p.top}var f=Math.abs(u-d),g=Math.abs(h-c);return t.x=d,t.y=c,t.width=f,t.height=g,{x:d,y:c,width:f,height:g}}calcTemplateBoundary(t,r){const n=de.ownerNode.querySelector(" #"+e.TEMPLATE_PDF_VIEWER).getBoundingClientRect();var i=de.getPageBoundingClientRect();de.pageBoundingBox.x=i.x+t/2-n.left,de.pageBoundingBox.y=i.y+r/2-n.top,de.pageBoundingBox.width=i.width-t}changeFieldPosition(t,r=void 0,n=!1){let i=t.select("rect"),a=r;void 0===a&&(a=t.transform().globalMatrix);let o=i.getBBox();const l=a.x(o.x,o.y),s=a.y(o.x,o.y),d=a.x(o.x2,o.y2),c=a.y(o.x2,o.y2),u=Math.abs(d-l),h=Math.abs(c-s);i.attr({x:l,y:s,width:u,height:h}),t.select("svg").attr({x:l,y:s,width:u,height:h}),t.transform(Snap.matrix().toTransformString());var p=de.getFieldJsonData(i.attr("id"));if(!1!==de.updateFieldPoint(t)&&(de.changeFreeTransform(t,u,h),!n)){var f=de.getFieldJsonData(i.attr("id"));de.addUndoRedoAct(e.FIELD_ATTR_CHANGE_ACTION,p,f)}}changeFieldValueEvent(t){const r=t.target,n=r.getAttribute("data-field-id"),i=r.getAttribute("data-field-property-name");var a=[],o=[],l="";if(n.split(",").forEach((e=>{var t=de.mainCanvas.select("#"+e+"Group");if(null==t)return;var s=de.fieldDictionary[e];if(!s.validateValue(i,r.value))return void console.log("not validate");const d=de.getFieldJsonData(e);if(a.push(d),le.assign(s,"m_"+i,r.value),ge.needTextSvgRefresh(i)){if("defaultValue"===i&&"TextField"===s.type){let e=de.getDvTextValue(r.value);s.defaultValueText=e}else if("defaultValue"===i&&"ComboboxField"===s.type){let e=r.value;s.defaultValueText=e}var c=de.pdfViewer.currentScale;s.changeTextElement(t,c)}"ownerId"===i&&de.refreshformerList(s),"fieldMinValue"===i&&(s.m_inputMin=Number(r.value)),"fieldMaxValue"===i&&(s.m_inputMax=Number(r.value)),"useCalc"===i&&(s.m_useCalc=r.value),"useDrawSign"===i&&(s.m_useDrawSign=r.value,de.validateSignOptions(r,n,i),s.m_useDrawSign=r.value),"useImageSign"===i&&(s.m_useImageSign=r.value,de.validateSignOptions(r,n,i),s.m_useImageSign=r.value),"useRegSign"===i&&(s.m_useRegSign=r.value,de.validateSignOptions(r,n,i),s.m_useRegSign=r.value),"required"===i&&le.showAsteriskDiv(de.ownerNode,e,"true"===r.value);const u=de.getFieldJsonData(e);o.push(u),l=s.ownerId})),0===a.length||0===o)return;"ownerId"!==i&&"fieldId"!==i&&"required"!==i||(de.buildFieldformerList(),de.selectUserList(l));let s=e.GROUP_ATTR_CHANGE_ACTION;"ownerId"===i&&(s=e.GROUP_ATTR_OWNER_CHANGE_ACTION),de.addUndoRedoAct(s,a,o)}validateSignOptions(e,t,r){const n=document.querySelector(".Sign-Field"),i=n.querySelector('input[data-field-property-name="useDrawSign"]'),a=n.querySelector('input[data-field-property-name="useImageSign"]'),o=n.querySelector('input[data-field-property-name="useRegSign"]');let l=!(!i||"true"!==i.value),s=!(!a||"true"!==a.value),d=!(!o||"true"!==o.value);if(!l&&!s&&!d)return console.log("targetNode.checked:"+e.checked+"\n"),console.log("targetNode.value:"+e.value+"\n"),console.log("useDrawSignInput.value:"+i.value+"\n"),e.checked=!0,e.value="true",e.parentElement.querySelector('input[type="checkbox"]').checked=!0,!0}changeFreeTransform(t,r,n){if(t.parent().attr("id")===e.DRAG_BOX_NAME)return;let i=!1;le.isEmptyObject(t.freeTransform)||(i=!t.freeTransform.isShowResizeHandler(),t.freeTransform.unplug()),de.calcTemplateBoundary(r,n),de.mainCanvas.freeTransform(t,{snap:{rotate:1},attrs:{stroke:"#9d6859"},subjectBBox:t.select("rect").getBBox(!0),size:4,draw:"bbox",boundary:de.pageBoundingBox},(function(e,r){de.fieldFtEvent(r[0],t)})).setOpts({rotate:!1}),i&&t.freeTransform.hideResizeHandler()}changeGroupBoxFreeTransform(e){le.isEmptyObject(e.freeTransform)||e.freeTransform.unplug(),de.calcTemplateBoundary(e.getBBox().width,e.getBBox().height),de.mainCanvas.freeTransform(e,{snap:{rotate:1},size:4,draw:"bbox",boundary:de.pageBoundingBox},(function(e,t){de.tmpGroupFtEvent(t[0])})).setOpts({rotate:!1,scale:!1})}checkTemplateFieldData(){const t=Object.keys(de.templateUserFieldInfo);for(let n=0;n<t.length;++n){de.templateUserFieldInfo[t[n]];for(var r=0;r<de.pdfViewer.pagesCount;++r){const t=Object.keys(de.fieldDictionary);for(let r=0;r<t.length;++r){const n=de.fieldDictionary[t[r]];if(!n.isRemoved)if("LabelField"===n.type){if(le.isStringEmpty(n.value)){let t=de.mainCanvas.select("#"+n.id+"Group > rect");return de.showFieldAttribute(n.id),de.ownerNode.querySelector(" #"+e.TEMPLATE_PDF_VIEWER_CONTAINER).scrollTop=t.attr("y"),!1}}else if("ComboboxField"===n.type&&le.isStringEmpty(n.comboboxList)){let t=de.mainCanvas.select("#"+n.id+"Group > rect");return de.showFieldAttribute(n.id),de.ownerNode.querySelector(" #"+e.TEMPLATE_PDF_VIEWER_CONTAINER).scrollTop=t.attr("y"),!1}}}}return!0}clearSelectedTool(){let t=de.ownerNode.querySelectorAll("."+e.EDITOR_COMPONENT_CLASS+" ul li");for(let e=0;e<t.length;e++)t[e].classList.contains("selected")&&t[e].classList.toggle("selected")}computePageOffset(e){var t=de.getPageElement(e).getBoundingClientRect(),r=document.body;return{top:t.top+r.scrollTop,left:t.left+r.scrollLeft}}convertUserListToSelectOptions(){let e=[];return Object.keys(de.templateUserFieldInfo).forEach((function(t){const r=de.templateUserFieldInfo[t];null!==r.isFormer&&void 0!==r.isFormer&&"Y"===r.isFormer||e.push({text:r.displayUserName,value:r.userUUID})})),e}copyObject(){de.templateClipBoard="";const t=de.ownerNode.querySelector(" ."+e.EDITOR_ATTR_CLASS);if(null===t)return;const r=t.querySelector("."+e.EDITOR_ATTR_PANEL_CLASS);if(null===r)return;const n=r.getAttribute("Field-id-list");de.templateClipBoard=n}createDragOverGroup(t){de.hideFieldAttribute();var r=de.mainCanvas.group();r.attr({id:e.DRAG_BOX_NAME});var n=de.mainCanvas.selectAll("#"+e.MAIN_GROUP_NAME+" > g"),i=[];if(n.forEach((function(e){var r=e.getBBox();Snap.path.isBBoxIntersect(r,t)&&i.push(e),le.isEmptyObject(e.freeTransform)||e.freeTransform.hideResizeHandler()})),1==i.length){le.isEmptyObject(i[0].freeTransform)||i[0].freeTransform.unplug();let e=i[0].getBBox();de.changeFreeTransform(i[0],e.width,e.height);const t=i[0].select("rect");return de.showFieldAttribute(t.attr("id")),void r.remove()}if(i.length<1)return r.remove(),void de.hideFieldAttribute();var a=[];i.forEach((function(e){le.isEmptyObject(e.freeTransform)||e.freeTransform.unplug();const t=e.select("rect");a.push(de.fieldDictionary[t.attr("id")]),r.append(e)})),de.showFieldListAttribute(a),le.isEmptyObject(r.freeTransform)||r.freeTransform.unplug(),de.calcTemplateBoundary(r.getBBox().width,r.getBBox().height),de.mainCanvas.freeTransform(r,{snap:{rotate:1},size:4,draw:"bbox",boundary:de.pageBoundingBox},(function(e,t){de.tmpGroupFtEvent(t[0])})).setOpts({rotate:!1,scale:!1})}createField(t,r,n){var i=de.mainCanvas.select("#"+e.MAIN_GROUP_NAME);const a=de.ownerNode.querySelector(" #"+e.TEMPLATE_PDF_VIEWER).getBoundingClientRect(),o=de.mainCanvas.transform().diffMatrix.invert(),l=o.x(r-a.left,n-a.top),s=o.y(r-a.left,n-a.top);let d=de.createFieldObject(t,l,s,de.getPdfPageFromSvgPos(l,s));de.selectAddFieldType="";let c=de.computePageOffset(),u=de.getPageBorderWidth(d.pageNo),h=r-c.left-u.left,p=n-c.top-u.top,f=d.getSVGFieldObject(de.mainCanvas,i,de.pdfViewer.currentScale,de.ownerNode,de.removeDragOverGroup,de.changeFieldValueEvent,de.changeFreeTransform);var g=f.getBBox();const m=de.pdfViewer._pages[d.pageNo-1].viewport;let v=m.convertToPdfPoint(h,p),A=m.convertToPdfPoint(h+g.width,p+g.height);if(d.pdfX=v[0],d.pdfY=v[1],d.pdfX2=A[0],d.pdfY2=A[1],de.fieldDictionary[d.id]=d,1===le.getUserInfoOptsListCount()){const e=Object.keys(de.templateUserFieldInfo);d.m_ownerId=de.templateUserFieldInfo[e[0]].userUUID,de.refreshformerList(d),de.buildFieldformerList()}de.changeFreeTransform(f,d.width,d.height),de.showAsteriskDiv(d.id,"true"===d.required,d.x,d.y,d.height);var T=JSON.stringify(d);return de.addUndoRedoAct(e.CREATE_FIELD_ACTION,T,T),f}createFieldObject(e,t,r,n=void 0){let i=de.generateFieldId(e),a=n;switch(void 0===n&&(a=de.pdfViewer.currentPageNumber),console.log(a),e){case"TextField":return new me(i,a,t,r);case"LabelField":return new Se(i,a,t,r);case"SignField":return new Te(i,a,t,r,de.useDrawSign,de.useImageSign,de.useRegSign);case"NumberField":return new ve(i,a,t,r);case"DateField":return new Ae(i,a,t,r);case"ImageField":return new Ee(i,a,t,r);case"MultiLineTextField":return new _e(i,a,t,r);case"CheckboxField":return new be(i,a,t,r);case"RadioField":return new ye(i,a,t,r);case"ComboboxField":return new xe(i,a,t,r);default:return null}}createTemplateRect(){var t=de.ownerNode.querySelector(" #"+e.TEMPLATE_LAYER_NAME);t.style.display="block";let r=document.createElement("div");r.id=e.TEMPLATE_LAYER_RECT_NAME,r.style.position="absolute",r.style.left="0px",r.style.top="0px";var n=de.getFieldSize(de.selectAddFieldType),i=de.pdfViewer.currentScale;r.style.width=n.w*i+"px",r.style.height=n.h*i+"px",r.style.background="none",r.style.border="1px solid red",de.ownerNode.querySelector(" #"+e.TEMPLATE_LAYER_NAME).appendChild(r),t.addEventListener("mousemove",de.templateMouseMoveEvent,!0),t.addEventListener("mouseup",de.templateMouseUpEvent,!0)}dragendFunc(e){if(e.stopPropagation(),!de.dragStart)return!1;var t=de.dragBox.getBBox();de.dragBox.remove(),de.dragStart=!1,de.removeDragOverGroup(),de.createDragOverGroup(t)}dragmoveFunc(e,t,r,n,i){if(i.stopPropagation(),!de.dragStart)return!1;var a=0,o=0;e<0&&(a=e,e*=-1),t<0&&(o=t,t*=-1),de.dragBox.transform("T"+a+","+o),de.dragBox.attr("width",e),de.dragBox.attr("height",t),de.dragBox.attr("fill","none")}dragstartFunc(t,r,n){if(n.stopPropagation(),"svg"!==n.target.nodeName&&"rect"!==n.target.nodeName)return de.dragBox&&de.dragBox.remove(),!1;if("rect"===n.target.nodeName){var i=!1;if(!le.isStringEmpty(n.srcElement.id)){var a=de.mainCanvas.select("#"+n.srcElement.id).parent();a&&(i=!le.isEmptyObject(a.freeTransform)||a.parent().attr("id")===e.DRAG_BOX_NAME)}if(void 0!==n.target&&null!==n.target.classList&&void 0!==n.target.classList&&n.target.classList.length>0&&n.target.classList.contains("fthandle")||i)return void 0!==de.dragBox&&null!==de.dragBox&&de.dragBox.remove(),!1}de.dragStart=!0;var o=de.ownerNode.querySelector(" #"+e.TEMPLATE_PDF_VIEWER).getBoundingClientRect(),l=de.mainCanvas.transform().diffMatrix.invert(),s=l.x(n.pageX-o.left,n.pageY-o.top),d=l.y(n.pageX-o.left,n.pageY-o.top);de.dragBox=de.mainCanvas.rect(s,d,0,0).attr("stroke","black")}exportFieldData(){var e=de.ownerNode.querySelector(" .Editor-Toolbar-Group.Center > span ");e.textContent;let t=new Ce(e.textContent);return Object.keys(de.templateUserFieldInfo).forEach((function(e){const r=de.templateUserFieldInfo[e];let n=Fe.cloneTemplateDataOwnerObject(r);for(var i=0;i<de.pdfViewer.pagesCount;++i){let t=new we(i);Object.keys(de.fieldDictionary).forEach((function(n){const a=de.fieldDictionary[n];a.isRemoved||i===a.pageNo-1&&(le.isStringEmpty(a.ownerId)&&"Y"===r.isFormer||a.ownerId===e)&&t.pushField(a)})),n.pushPage(t)}t.pushOwner(n)})),JSON.stringify(t)}fieldDeleteBtnClicked(e){de.removeSelectedField()}fieldFtEvent(e,t){if("drag start"===e||"apply"===e){let e=t.select("rect").attr("id");if(!0===de.isFieldDragStart)return de.hideFieldAttribute(),void(le.isShowAsteriskDiv(de.ownerNode,e)&&le.showAsteriskDiv(de.ownerNode,e,!1));de.isFieldDragStart=!0,de.hideFieldAttribute(),le.showAsteriskDiv(de.ownerNode,e,!1)}"scale end"!==e&&"drag end"!==e||(de.isFieldDragStart=!1,de.changeFieldPosition(t),de.showFieldAttribute(de.getFieldIdFromGroupNode(t)))}fieldRepositioning(e,t=!1){Object.keys(de.fieldDictionary).forEach((function(e){var r=de.fieldDictionary[e],n=de.mainCanvas.select("#"+r.id+"Group"),i=n.select("rect"),a=n.select("svg"),o=r.width;const l=de.calcFieldPostion(r,t);var s=l.width/o;i.attr(l),a.attr(l);var d=a.select("text");d&&(d.attr("font-size",r.fontSize*s+"px"),n.transform(Snap.matrix().toTransformString())),de.changeFreeTransform(n,l.width,l.height),de.showAsteriskDiv(r.id,"true"===r.required,l.x,l.y,l.height)}))}generateFieldId(e){var t=de.mainCanvas.selectAll("rect[id^='"+e+"']");if(t.length<1)return e+1;let r=t[0].node.id.replace(e,""),n=parseInt(r);for(var i=1;i<t.length;i++){let r=t[i].attr("id").replace(e,""),a=parseInt(r);a>n&&(n=a)}return n+=1,e+n}getCreateFieldDefaultWidth(e){switch(e){case"TextField":return me.widthValue();case"LabelField":return Se.widthValue();case"NumberField":return ve.widthValue();case"DateField":return Ae.widthValue();case"SignField":return Te.widthValue();case"ImageField":return Ee.widthValue();case"MultiLineTextField":return _e.widthValue();case"CheckboxField":return be.widthValue();case"RadioField":return ye.widthValue();case"ComboboxField":return xe.widthValue()}}getDvTextValue(e){const t=le.getDVFieldOptsList();for(var r=0;r<t.length;++r)if(t[r].value===e)return t[r].text;return""}getFieldFromJson(e,t){switch(e){case"SignField":return se.fromJson(new Te,t);case"TextField":return se.fromJson(new me,t);case"LabelField":return se.fromJson(new Se,t);case"NumberField":return se.fromJson(new ve,t);case"DateField":return se.fromJson(new Ae,t);case"ImageField":return se.fromJson(new Ee,t);case"MultiLineTextField":return se.fromJson(new _e,t);case"CheckboxField":return se.fromJson(new be,t);case"RadioField":return se.fromJson(new ye,t);case"ComboboxField":return se.fromJson(new xe,t)}}getFieldIdFromGroupNode(e){return e.select("rect").attr("id")}getFieldJsonData(e){var t=de.fieldDictionary[e];return JSON.stringify(t)}getFieldSize(e){var t={w:150,h:40};switch(e){case"TextField":case"NumberField":case"DateField":case"LabelField":case"ComboboxField":t={w:me.widthValue(),h:me.heightValue()};break;case"SignField":case"ImageField":t={w:Te.widthValue(),h:Te.heightValue()};break;case"MultiLineTextField":t={w:_e.widthValue(),h:_e.heightValue()};break;case"CheckboxField":t={w:be.widthValue(),h:be.heightValue()};break;case"RadioField":t={w:ye.widthValue(),h:ye.heightValue()}}return t}getPageElement(e){let t=e;return void 0===t&&(t=de.pdfViewer.currentPageNumber),de.ownerNode.querySelector(" #TemplatePDFViewer [aria-label='Page "+t+"']")}getPageBorderWidth(e){let t=e;void 0===t&&(t=de.pdfViewer.currentPageNumber);let r=de.ownerNode.querySelector(" #TemplatePDFViewer [aria-label='Page "+t+"']"),n=window.getComputedStyle(r),i=n.getPropertyValue("border-top-width"),a=n.getPropertyValue("border-left-width"),o=n.getPropertyValue("border-bottom-width"),l=n.getPropertyValue("border-right-width"),s=0,d=0,c=0,u=0;return le.isStringEmpty(i)||(s=parseInt(i.replace("px",""))),le.isStringEmpty(a)||(d=parseInt(a.replace("px",""))),le.isStringEmpty(o)||(c=parseInt(o.replace("px",""))),le.isStringEmpty(l)||(u=parseInt(l.replace("px",""))),{top:s,left:d,bottom:c,right:u}}getPageBoundingClientRect(e){let t=e;return void 0===t&&(t=de.pdfViewer.currentPageNumber),de.ownerNode.querySelector(" #TemplatePDFViewer [aria-label='Page "+t+"']").getBoundingClientRect()}getPdfPageFromSvgPos(e,t){let r=0;for(let e=1;e<=de.pdfViewer.pagesCount;++e){let n=de.getPageBoundingClientRect(e).height;if(r+=n,r>t)return console.log(`${e}, ${n}, ${r}, ${t}`),e}return 1}hideAllResizeHandles(){de.mainCanvas.selectAll("#"+e.MAIN_GROUP_NAME+" > g").forEach((function(e){le.isEmptyObject(e.freeTransform)||e.freeTransform.hideResizeHandler()}))}hideFieldAttribute(){const t=de.ownerNode.querySelector(" ."+e.EDITOR_ATTR_CLASS);le.removeAllChildNode(t),null!==t&&(t.style.display="none");const r=de.ownerNode.querySelector(" ."+e.FIELD_DELETE_BUTTON_CLASS);null!==r&&r.classList.contains(e.SHOW_CLASS)&&r.classList.toggle(e.SHOW_CLASS),null===r||r.classList.contains(e.HIDE_CLASS)||r.classList.toggle(e.HIDE_CLASS)}hideTemplateLayer(){let t=de.ownerNode.querySelector(" #"+e.TEMPLATE_LAYER_NAME);t.removeEventListener("mousemove",de.templateMouseMoveEvent,!0),t.removeEventListener("mouseup",de.templateMouseUpEvent,!0),t.style.display="none"}importFieldData(e){e.formerList.forEach((e=>{e.pages.forEach((t=>{t.pageNo>=de.pdfViewer._pages.length||t.fields.forEach((t=>{t.m_ownerId=e.userUUID,null!==e.isFormer&&void 0!==e.isFormer&&"Y"===e.isFormer&&(t.m_ownerId=""),de.replaceFieldData(t,!0)}))}))})),de.hideAllResizeHandles(),de.hideFieldAttribute(),de.hideTemplateLayer(),de.buildFieldformerList()}keycheck(e){var t=e.which?e.which:e.keyCode;if(e.ctrlKey)switch(t){case 89:return void de.redoAction();case 90:return void de.undoAction()}46===t&&de.removeSelectedField()}pasteObject(){if(console.log(de.templateClipBoard),le.isStringEmpty(de.templateClipBoard))return;const e=de.templateClipBoard.split(",");for(const t of e){const e=de.fieldDictionary[t],r=JSON.stringify(e),n=JSON.parse(r);let i=de.generateFieldId(n.m_type);n.m_id=i,n.m_pdfX=n.m_pdfX+10,n.m_pdfX2=n.m_pdfX2+10,n.m_pdfY=n.m_pdfY-10,n.m_pdfY2=n.m_pdfY2-10,n.m_fieldId=i.replace(n.m_type,n.m_kind+"-"),de.replaceFieldStringData(JSON.stringify(n))}e.length>0&&(de.hideAllResizeHandles(),de.hideFieldAttribute(),de.hideTemplateLayer(),de.buildFieldformerList())}redoAction(){var t=++de.unredoActionIdx,r=de.unredoActionDict[t];if(void 0!==r)switch(de.removeDragOverGroup(),r.action){case e.CREATE_FIELD_ACTION:case e.FIELD_ATTR_CHANGE_ACTION:return de.replaceFieldStringData(r.new),void de.buildFieldformerList();case e.REMOVE_FIELD_ACTION:return de.removeField(r.new),de.hideFieldAttribute(),void de.buildFieldformerList();case e.GROUP_REMOVE_ACTION:return r.new.forEach((e=>{de.removeField(e)})),de.hideFieldAttribute(),void de.buildFieldformerList();case e.GROUP_ATTR_CHANGE_ACTION:case e.GROUP_ATTR_OWNER_CHANGE_ACTION:return r.new.forEach((e=>{de.replaceFieldStringData(e)})),void de.buildFieldformerList()}else de.unredoActionIdx--}refreshformerList(e){Object.keys(de.templateUserFieldInfo).forEach((function(t){let r=de.templateUserFieldInfo[t];r.contains(e.id)?e.ownerId!==t&&r.removeField(e.id):e.ownerId===t&&r.pushField(e.id,e)}))}removeDragGroupField(){var t=de.mainCanvas.select("#"+e.DRAG_BOX_NAME);if(de.mainCanvas.select("#"+e.MAIN_GROUP_NAME),null!==t&&t.children().length>=1){t.freeTransform.hideHandles();var r=t.children();t.transform().globalMatrix;var n=[],i=[];r.forEach((function(t){const r=t.select("rect"),a=de.fieldDictionary[r.attr("id")];a.isRemoved=!0;let o=de.templateUserFieldInfo[a.ownerId];null!=o&&o.removeField(a.id);let l=de.ownerNode.querySelector(" #"+e.TEMPLATE_LAYER_ASTERISK_NAME),s=de.ownerNode.querySelector(" #"+a.id+"_asterisk");l.removeChild(s);const d=JSON.stringify(a);n.push(d),i.push(d),de.hideFieldAttribute()})),de.addUndoRedoAct(e.GROUP_REMOVE_ACTION,n,i),t.remove(),de.buildFieldformerList()}}removeDragOverGroup(t=!0){var r=de.mainCanvas.select("#"+e.DRAG_BOX_NAME),n=de.mainCanvas.select("#"+e.MAIN_GROUP_NAME);if(null!==r&&r.children().length>=1){r.freeTransform.hideHandles();var i=r.children();const e=r.transform().globalMatrix;i.forEach((function(r){n.append(r),de.changeFieldPosition(r,e,t),de.changeFreeTransform(r,r.width,r.height)})),r.remove()}}removeField(t){const r=JSON.parse(t),n=de.getFieldFromJson(r.m_type,r);n.isRemoved=!0,le.isStringEmpty(n.ownerId)||de.templateUserFieldInfo[n.ownerId].removeField(n.id);var i=de.mainCanvas.select("#"+e.MAIN_GROUP_NAME).select("#"+n.id+"Group");if(i){i.freeTransform.unplug(),i.remove();let t=de.ownerNode.querySelector(" #"+e.TEMPLATE_LAYER_ASTERISK_NAME),r=de.ownerNode.querySelector(" #"+n.id+"_asterisk");null!=r&&t.removeChild(r)}}removeSelectedField(){const t=de.ownerNode.querySelector(" ."+e.EDITOR_ATTR_CLASS).querySelector("."+e.EDITOR_ATTR_PANEL_CLASS);if(null===t)return;const r=t.getAttribute("Field-id-list");if(le.isStringEmpty(r))return;const n=r.split(",");if(n.length>1)return void de.removeDragGroupField();var i=de.mainCanvas.select("#"+n[0]+"Group");if(null===i)return;const a=i.select("rect"),o=de.fieldDictionary[a.attr("id")];o.isRemoved=!0;let l=de.templateUserFieldInfo[o.ownerId];null!=l&&l.removeField(o.id);const s=JSON.stringify(o);de.addUndoRedoAct(e.REMOVE_FIELD_ACTION,s,s),de.hideFieldAttribute(),i.freeTransform.unplug(),i.remove();let d=de.ownerNode.querySelector(" #"+e.TEMPLATE_LAYER_ASTERISK_NAME),c=de.ownerNode.querySelector(" #"+o.id+"_asterisk");null!=c&&d.removeChild(c),de.buildFieldformerList()}removeTemplateRect(){let t=de.ownerNode.querySelector(" #"+e.TEMPLATE_LAYER_NAME),r=de.ownerNode.querySelector(" #"+e.TEMPLATE_LAYER_RECT_NAME);null!=r&&(t.removeChild(r),t.removeEventListener("mousemove",de.templateMouseMoveEvent,!0),t.removeEventListener("mouseup",de.templateMouseUpEvent,!0),t.style.display="none")}replaceFieldData(t,r=!1){de.hideAllResizeHandles();const n=de.getFieldFromJson(t.m_type,t);n.isRemoved=!1;const i=de.mainCanvas.select("#"+e.MAIN_GROUP_NAME);var a=i.select("#"+n.id+"Group");a&&(le.isEmptyObject(a.freeTransform)||a.freeTransform.unplug(),a.remove()),de.calcFieldPostion(n,r);let o=n.getSVGFieldObject(de.mainCanvas,i,1,de.ownerNode,de.removeDragOverGroup,de.changeFieldValueEvent,de.changeFreeTransform);i.append(o),de.fieldDictionary[n.id]=n,de.changeFreeTransform(o,n.width,n.height),de.refreshformerList(n),de.showAsteriskDiv(n.id,"true"===n.required,n.x,n.y,n.height),de.showFieldAttribute(n.id)}replaceFieldStringData(e){de.hideAllResizeHandles();const t=JSON.parse(e);de.replaceFieldData(t,!0)}resetTool(){de.selectAddFieldType="",de.removeTemplateRect()}selectUserList(e){de.ownerNode.querySelector(" #Editor-User-Component_Box").childNodes.forEach((t=>{t.classList.contains("Current")&&t.classList.toggle("Current");const r=t.getAttribute("data-user-key");e===r&&t.classList.toggle("Current")}))}selectTool(e){switch(""===de.selectAddFieldType&&void 0===de.selectAddFieldType||de.removeTemplateRect(),e){case 0:if("SignField"===de.selectAddFieldType)return void de.resetTool();de.selectAddFieldType="SignField";break;case 1:if("TextField"===de.selectAddFieldType)return void de.resetTool();de.selectAddFieldType="TextField";break;case 2:if("MultiLineTextField"===de.selectAddFieldType)return void de.resetTool();de.selectAddFieldType="MultiLineTextField";break;case 3:if("LabelField"===de.selectAddFieldType)return void de.resetTool();de.selectAddFieldType="LabelField";break;case 4:if("CheckboxField"===de.selectAddFieldType)return void de.resetTool();de.selectAddFieldType="CheckboxField";break;case 5:if("RadioField"===de.selectAddFieldType)return void de.resetTool();de.selectAddFieldType="RadioField";break;case 6:if("ComboboxField"===de.selectAddFieldType)return void de.resetTool();de.selectAddFieldType="ComboboxField";break;case 7:if("DateField"===de.selectAddFieldType)return void de.resetTool();de.selectAddFieldType="DateField";break;case 8:if("NumberField"===de.selectAddFieldType)return void de.resetTool();de.selectAddFieldType="NumberField";break;case 9:if("ImageField"===de.selectAddFieldType)return void de.resetTool();de.selectAddFieldType="ImageField"}de.createTemplateRect(),de.hideFieldAttribute(),de.hideAllResizeHandles()}showAsteriskDiv(e,t,r,n,i){null===de.ownerNode.querySelector(" #"+e+"_asterisk")&&(le.createAsteriskDiv(de.ownerNode,e).id=e+"_asterisk"),le.showAsteriskDiv(de.ownerNode,e,t,r,n,i)}showFieldAttribute(t){const r=de.fieldDictionary[t];let n=le.createAttrbutePopup(de.ownerNode,r.getBBox());var i=de.mainCanvas.select("#"+e.MAIN_GROUP_NAME);le.fieldAncestors(r)[0].constructor.showFieldsAttribute(de.ownerNode,[r],n,i,le.getUserInfoOptsList(),le.getDVFieldOptsList(),de.changeFieldValueEvent,le.getSignTabShowOpt());let a=le.createFieldDeleteBtn(de.ownerNode,de.fieldDeleteBtnClicked);a.style.left=r.x+r.width+10+"px";const o=r.y+r.height/2-10;a.style.top=o+"px",de.selectUserList(r.ownerId)}showCommonFieldListAttribute(e,t,r,n,i,a,o,l){switch(e){case"TF":return me.showFieldsAttribute(t,r,n,i,a,o,l);case"LF":return Se.showFieldsAttribute(t,r,n,i,a,o,l);case"SF":return Te.showFieldsAttribute(t,r,n,i,a,o,l,le.getSignTabShowOpt());case"NF":return ve.showFieldsAttribute(t,r,n,i,a,o,l);case"DF":return Ae.showFieldsAttribute(t,r,n,i,a,o,l);case"IMGF":return Ee.showFieldsAttribute(t,r,n,i,a,o,l);case"MLTF":return _e.showFieldsAttribute(t,r,n,i,a,o,l);case"CBF":return be.showFieldsAttribute(t,r,n,i,a,o,l);case"RF":return ye.showFieldsAttribute(t,r,n,i,a,o,l);case"CMBF":return xe.showFieldsAttribute(t,r,n,i,a,o,l);default:return se.showFieldsAttribute(t,r,n,i,a,o,l)}}showFieldListAttribute(t){var r=de.mainCanvas.select("#"+e.DRAG_BOX_NAME).getBBox();let n=le.createAttrbutePopup(de.ownerNode,r);var i=de.mainCanvas.select("#"+e.MAIN_GROUP_NAME);const a=le.findSameAncestor2(t);de.showCommonFieldListAttribute(a,de.ownerNode,t,n,i,le.getUserInfoOptsList(),le.getDVFieldOptsList(),de.changeFieldValueEvent);let o=le.createFieldDeleteBtn(de.ownerNode,de.fieldDeleteBtnClicked);o.style.left=r.x+r.width+10+"px",o.style.top=r.y+10+"px"}sortFieldsAlign(t){var r=de.mainCanvas.select("#"+e.DRAG_BOX_NAME);if(null!==r){var n=de.mainCanvas.selectAll("#"+e.DRAG_BOX_NAME+" > g");switch(t){case"left":de.sortFieldsLeftAlign(n);break;case"hCenter":de.sortFieldsHCenterAlign(r,n);break;case"right":de.sortFieldsRightAlign(n);break;case"top":de.sortFieldsTopAlign(n);break;case"vCenter":de.sortFieldsVCenterAlign(r,n);break;case"bottom":de.sortFieldsBottomAlign(n);break;case"VRegularInterval":de.sortFieldsVRegularIntervalAlign(n);break;case"HRegularInterval":de.sortFieldsHRegularIntervalAlign(n)}de.tmpGroupFtEvent("drag end"),de.changeGroupBoxFreeTransform(r)}}sortFieldsBottomAlign(e){if(!(e.length<2)){var t=0;e.forEach((e=>{var r=e.select("rect").getBBox();r.y2>t&&(t=r.y2)})),e.forEach((e=>{var r=e.select("rect"),n=r.getBBox();r.attr({y:t-n.height})}))}}sortFieldsHCenterAlign(e,t){if(!(t.length<2)){var r=e.getBBox().cx;t.forEach((e=>{var t=e.select("rect"),n=t.getBBox();t.attr({x:r-n.width/2})}))}}sortFieldsHRegularIntervalAlign(e){if(!(e.length<3)){for(var t=Array.from(e),r=(t=t.sort((function(e,t){var r=e.select("rect").getBBox(),n=t.select("rect").getBBox();return r.x-n.x})))[0],n=t[t.length-1],i=r.getBBox(),a=n.getBBox(),o=Math.abs(a.x-i.x2),l=1;l<t.length-1;++l)o-=t[l].select("rect").getBBox().width;for(var s=o/(t.length-1),d=i.x2,c=1;c<t.length-1;++c){var u=t[c].select("rect");u.attr({x:d+s}),d=u.getBBox().x2}}}sortFieldsLeftAlign(e){if(!(e.length<2)){var t=Number.MAX_VALUE;e.forEach((e=>{var r=e.select("rect").getBBox();r.x<t&&(t=r.x)})),e.forEach((e=>{e.select("rect").attr({x:t})}))}}sortFieldsRightAlign(e){if(!(e.length<2)){var t=0;e.forEach((e=>{var r=e.select("rect").getBBox();r.x2>t&&(t=r.x2)})),e.forEach((e=>{var r=e.select("rect"),n=r.getBBox();r.attr({x:t-n.width})}))}}sortFieldsTopAlign(e){if(!(e.length<2)){var t=Number.MAX_VALUE;e.forEach((e=>{var r=e.select("rect").getBBox();r.y<t&&(t=r.y)})),e.forEach((e=>{e.select("rect").attr({y:t})}))}}sortFieldsVCenterAlign(e,t){if(!(t.length<2)){var r=e.getBBox().cy;t.forEach((e=>{var t=e.select("rect"),n=t.getBBox();t.attr({y:r-n.height/2})}))}}sortFieldsVRegularIntervalAlign(e){if(!(e.length<3)){for(var t=Array.from(e),r=(t=t.sort((function(e,t){var r=e.select("rect").getBBox(),n=t.select("rect").getBBox();return r.y-n.y})))[0],n=t[t.length-1],i=r.getBBox(),a=n.getBBox(),o=Math.abs(a.y-i.y2),l=1;l<t.length-1;++l)o-=t[l].select("rect").getBBox().height;for(var s=o/(t.length-1),d=i.y2,c=1;c<t.length-1;++c){var u=t[c].select("rect");u.attr({y:d+s}),d=u.getBBox().y2}}}templateInit(){var t=document.createElement("div");t.id=e.TEMPLATE_LAYER_NAME,t.style.position="absolute",t.style.top="0px",t.style.width="100%",t.style.zIndex="99",de.ownerNode.querySelector(" #"+e.TEMPLATE_PDF_VIEWER_CONTAINER).appendChild(t),de.mainCanvas=Snap("100%","100%");let r=de.ownerNode.querySelector(" #"+e.TEMPLATE_PDF_VIEWER);r.appendChild(de.mainCanvas.node),de.mainCanvas.attr({style:"position: absolute; top: 0; z-index: 99"}),de.mainCanvas.group().attr({id:e.MAIN_GROUP_NAME}),de.mainCanvas.drag(de.dragmoveFunc,de.dragstartFunc,de.dragendFunc),r.setAttribute("tabindex",0),document.body.addEventListener("keyup",de.keycheck,!0);let n=document.createElement("div");n.id=e.TEMPLATE_LAYER_ASTERISK_NAME,n.style.position="absolute",n.style.top="0",n.style.zIndex="98",n.style.width="100%",r.appendChild(n),de.buildFieldformerList()}templateMouseMoveEvent(t){let r=de.ownerNode.querySelector(" #"+e.TEMPLATE_LAYER_RECT_NAME),n=de.ownerNode.querySelector(" #"+e.TEMPLATE_LAYER_NAME),i=de.ownerNode.querySelector(" #"+e.TEMPLATE_LAYER_RECT_NAME);if(n!==t.target&&i!==t.target)return!1;let a=t.offsetX,o=t.offsetY;t.target!==i||le.isEmptyObject(de.templateRectMousePosition)||(a=de.templateRectMousePosition.x+(t.pageX-de.templateRectMousePosition.ox),o=de.templateRectMousePosition.y+(t.pageY-de.templateRectMousePosition.oy)),t.stopPropagation(),de.templateRectMousePosition={x:a,y:o,ox:t.pageX,oy:t.pageY},ae({targets:r,translateX:a,translateY:o,direction:"normal",loop:!1,delay:ae.stagger(300,{easing:"easeOutElastic(1, .6)"})})}templateMouseUpEvent(t){de.removeTemplateRect(),de.clearSelectedTool();var r=de.mainCanvas.select("#"+e.MAIN_GROUP_NAME),n=t.pageX,i=de.getPageBoundingClientRect();n<i.x?n=i.x:n>i.x+i.width&&(n=i.x+i.width-de.getCreateFieldDefaultWidth(de.selectAddFieldType));var a=de.createField(de.selectAddFieldType,n,t.pageY);r.append(a)}templateResize(t,r){de.ownerNode.querySelector(" #"+e.TEMPLATE_LAYER_NAME).style.height=r+"px",de.mainCanvas.attr({height:r}),de.pageBoundingBox.height=r,de.fieldRepositioning(t,!0),de.ownerNode.querySelector(" #"+e.TEMPLATE_LAYER_ASTERISK_NAME).style.height=r+"px";var n=de.mainCanvas.select("#"+e.DRAG_BOX_NAME);if(null!==n){var i=n.getBBox();de.removeDragOverGroup(),de.createDragOverGroup(i)}}tmpGroupFtEvent(t){if("drag start"===t||"apply"===t){if(!0===de.isFieldDragStart)return;de.isFieldDragStart=!0,de.hideFieldAttribute();var r=de.mainCanvas.selectAll("#"+e.DRAG_BOX_NAME+" > g"),n=[],i=[],a=de.mainCanvas.select("#"+e.DRAG_BOX_NAME);r.forEach((e=>{let t=e.select("rect");le.showAsteriskDiv(de.ownerNode,t.attr("id"),!1)}))}if("drag end"===t){de.isFieldDragStart=!1,r=de.mainCanvas.selectAll("#"+e.DRAG_BOX_NAME+" > g"),n=[],i=[],a=de.mainCanvas.select("#"+e.DRAG_BOX_NAME);var o=[];r.forEach((e=>{let t=e.select("rect").attr("id");var r=de.getFieldJsonData(t);n.push(r);const l=a.transform().globalMatrix;de.changeFieldPosition(e,l,!0);var s=de.getFieldJsonData(t);i.push(s),o.push(de.fieldDictionary[t])})),a.transform(Snap.matrix().toTransformString()),de.showFieldListAttribute(o),de.addUndoRedoAct(e.GROUP_ATTR_CHANGE_ACTION,n,i),de.changeGroupBoxFreeTransform(a)}}undoAction(){var t=de.unredoActionIdx--;if(t<0)de.unredoActionIdx=-1;else{de.removeDragOverGroup();var r=de.unredoActionDict[t];switch(r.action){case e.CREATE_FIELD_ACTION:return de.removeField(r.old),de.hideFieldAttribute(),void de.buildFieldformerList();case e.REMOVE_FIELD_ACTION:case e.FIELD_ATTR_CHANGE_ACTION:return de.replaceFieldStringData(r.old),void de.buildFieldformerList();case e.GROUP_REMOVE_ACTION:case e.GROUP_ATTR_CHANGE_ACTION:case e.GROUP_ATTR_OWNER_CHANGE_ACTION:return r.old.forEach((e=>{de.replaceFieldStringData(e)})),void de.buildFieldformerList()}}}updateFieldPoint(t){let r=t.select("rect");var n=de.fieldDictionary[r.attr("id")];let i=de.computePageOffset(n.pageNo);const a=de.ownerNode.querySelector(" #"+e.TEMPLATE_PDF_VIEWER).getBoundingClientRect();var o=de.mainCanvas.transform().diffMatrix,l=r.getBBox();n.x=l.x,n.y=l.y,n.width=l.width,n.height=l.height,n.pageNo=de.getPdfPageFromSvgPos(n.x,n.y);let s=de.getPageBorderWidth(n.pageNo),d=o.x(l.x,l.y)+a.left-i.left-s.left,c=o.y(l.x,l.y)+a.top-i.top-s.top;const u=de.pdfViewer._pages[n.pageNo-1].viewport;let h=u.convertToPdfPoint(d,c),p=u.convertToPdfPoint(d+l.width,c+l.height),f=!1;"true"===n.required&&(f=!0),le.showAsteriskDiv(de.ownerNode,r.attr("id"),f,l.x,l.y,l.height);let g=Number(n.pdfX),m=Number(n.pdfX2),v=Number(n.pdfY),A=Number(n.pdfY2);return(h[0].toFixed(2)!==g.toFixed(2)||h[1].toFixed(2)!==v.toFixed(2)||p[0].toFixed(2)!==m.toFixed(2)||p[1].toFixed(2)!==A.toFixed(2))&&(n.pdfX=h[0],n.pdfY=h[1],n.pdfX2=p[0],n.pdfY2=p[1],!0)}appendFontFamily(e){le.appendFontFamily(e)}appendSignTabShowOpt(e){e&&(void 0!==e.useDrawSign&&(de.useDrawSign=e.useDrawSign),void 0!==e.useImageSign&&(de.useImageSign=e.useImageSign),void 0!==e.useRegSign&&(de.useRegSign=e.useRegSign))}}console.log("Template VERSION:","0.0.4");const Ne=!1,Re=0,Oe=1;function De(r,n,i,a,o,l,s=["ko","en"]){he=r,le.translator.fetch(s).then((()=>{le.changeLocale(s[0])}));let d=he.querySelector(" #"+e.TEMPLATE_PDF_VIEWER_CONTAINER),c=new pdfjsViewer.EventBus;new t.PDFCursorTools({container:d,eventBus:c,cursorToolOnLoad:0}),ce=new pdfjsViewer.PDFViewer({container:d,eventBus:c,useOnlyCssZoom:Ne,textLayerMode:Re}),(ue=new Ie(ce,r)).appendSignTabShowOpt(o),ue.buildSignTabShowOpt(o),ue.buildFieldUserInfo(i),ue.buildDVOptsInfo(a),c.on("pagerendered",(function(e){console.log("pageRendered: ")})),c.on("pagechanging",(function(e){console.log("pagechanging")})),c.on("scalechanging",(function(e){console.log("scalechanging"),je(e)})),c.on("pagesinit",(function(){console.log("pagesinit"),ce.currentScale=Oe})),pdfjsLib.getDocument({url:n,cMapUrl:"/js/pdf_form/pdfjs/cmaps/",cMapPacked:!0}).promise.then((function(e){e.getData().then((e=>{})),ce.currentScale=Oe,ce.setDocument(e),ue.templateInit(),null!=l&&function(e,t){void 0===e&&(e=ce.pageViewsReady);var r=setInterval((function(){return new Promise((function(e,t){ce.pageViewsReady&&(e("pageViewsReady"),clearInterval(r))})).then((function(e){console.log(e),ue.importFieldData(t)}))}),100)}(ce.pageViewsReady,l)})),he.querySelector("#Zoom-Out-Button").addEventListener("click",He),he.querySelector("#Zoom-In-Button").addEventListener("click",We),he.querySelector(" .Button-Icon-Component").addEventListener("click",$e),he.querySelectorAll(" .Editor-Component_Box > div > ul > li").forEach((e=>{le.isEmptyObject(e.onclick)&&e.addEventListener("click",ze,!0)})),he.querySelector(" .Editor-Toolbar-Group.Left > button.Undo-Button").addEventListener("click",Xe),he.querySelector(" .Editor-Toolbar-Group.Left > button.Redo-Button").addEventListener("click",Ke),he.querySelector(" .Editor-Toolbar-Group.Right  button.Align-Left-Button").addEventListener("click",Je),he.querySelector(" .Editor-Toolbar-Group.Right  button.Align-Center-Button").addEventListener("click",Qe),he.querySelector(" .Editor-Toolbar-Group.Right  button.Align-Right-Button").addEventListener("click",Ze),he.querySelector(" .Editor-Toolbar-Group.Right  button.Align-Top-Button").addEventListener("click",et),he.querySelector(" .Editor-Toolbar-Group.Right  button.Align-Middle-Button").addEventListener("click",tt),he.querySelector(" .Editor-Toolbar-Group.Right  button.Align-Bottom-Button").addEventListener("click",rt),he.querySelector("#scaleSelectContainer").addEventListener("click",nt),window.addEventListener("resize",(function(e){je(e)}),!0)}function Be(){return ue.exportFieldData()}function Me(){let t=he.querySelector("#Editor-Component-Active-Button"),r=he.querySelector("#Editor-Component");t.classList.contains("Left-Panel-Btn-Hide-Animation")&&t.classList.toggle("Left-Panel-Btn-Hide-Animation"),r.classList.contains("Left-Panel-Hide-Animation")&&r.classList.toggle("Left-Panel-Hide-Animation"),t.classList.contains("Left-Panel-Btn-Show-Animation")&&t.classList.toggle("Left-Panel-Btn-Show-Animation"),r.classList.contains("Left-Panel-Show-Animation")&&r.classList.toggle("Left-Panel-Show-Animation");let n=he.querySelector("#"+e.TEMPLATE_LAYER_NAME);null!==n&&le.removeAllChildNode(n);let i=he.querySelector("#"+e.TEMPLATE_LAYER_ASTERISK_NAME);null!==i&&le.removeAllChildNode(i)}function Pe(){return ue.checkTemplateFieldData()}function ke(e){le.changeLocale(e),ue.buildFieldformerList()}function Ve(e){le.translatorFileLocation(e)}function Ge(e,t){le.addTranslator(e,t)}function qe(){ue.copyObject()}function Ue(){ue.pasteObject()}function je(e){let t=0;ce._pages.forEach((function(e){t+=function(e){var t=e.div.currentStyle||window.getComputedStyle(e.div);const r=parseFloat(t.marginTop)+parseFloat(t.marginBottom),n=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),i=parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth);return e.height+r+n+i}(e)})),ue.templateResize(e,t)}function He(){const e=parseFloat(ce.currentScale);ce.currentScale=e-.1,Ye(ce.currentScale)}function We(){const e=parseFloat(ce.currentScale);ce.currentScale=e+.1,Ye(ce.currentScale)}function Ye(e){const t=Math.floor(100*parseFloat(e));he.querySelector(" #scaleSelectContainer > a").textContent=t+"%"}function $e(e){let t=he.querySelector("#Editor-Component-Active-Button"),r=he.querySelector("#Editor-Component");he.querySelector("#Editor-Component-Active-Button > .Button-Icon-Component .Arrow-Btn ").classList.toggle("Reverse-Btn"),t.classList.contains("Left-Panel-Btn-Hide-Animation")?(t.classList.toggle("Left-Panel-Btn-Show-Animation"),r.classList.toggle("Left-Panel-Show-Animation")):(t.classList.toggle("Left-Panel-Btn-Hide-Animation"),r.classList.toggle("Left-Panel-Hide-Animation"))}function ze(e){e.stopPropagation();const t=e.target.closest("li"),r=t.getAttribute("data-index");ue.clearSelectedTool(),t.classList.contains("selected")||t.classList.add("selected"),ue.selectTool(parseInt(r))}function Xe(e){ue.undoAction()}function Ke(e){ue.redoAction()}function Je(e){ue.sortFieldsAlign("left")}function Ze(e){ue.sortFieldsAlign("right")}function Qe(e){ue.sortFieldsAlign("hCenter")}function et(e){ue.sortFieldsAlign("top")}function tt(e){ue.sortFieldsAlign("vCenter")}function rt(e){ue.sortFieldsAlign("bottom")}function nt(e){const t=e.target.getBoundingClientRect();let r=he.querySelector(".Scale-Seletor-Container");console.log(t),r.style.left=t.left+"px",r.style.top=t.top+"px",r.style.zIndex="-1",r.classList.contains("Template-Hide")&&r.classList.toggle("Template-Hide");let n=r.querySelector("select");$(n).hasClass("select2-hidden-accessible")||$(n).select2({minimumResultsForSearch:1/0,width:"80px"}),$(n).val(ce.currentScale).trigger("change"),$(n).select2("open"),$(n).on("select2:select",(function(e){var t=e.params.data;ce.currentScale=t.id,Ye(t.id)}))}function it(e){ue.appendFontFamily(e)}function at(e){ue.appendSignTabShowOpt(e)}})(),n})()));