(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define("templatemod", [], factory);
	else if(typeof exports === 'object')
		exports["templatemod"] = factory();
	else
		root["templatemod"] = factory();
})(this, () => {
return /******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./js/pdf_form/src/Constants.js":
/*!**************************************!*\
  !*** ./js/pdf_form/src/Constants.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CONSTANTS: () => (/* binding */ CONSTANTS)
/* harmony export */ });

/**
 * @module Template/CONSTANTS
 */


/**
 * @description 프로젝트에서 사용하는 상수 모음
 *
 * @property {String} ASTERISK_ICON_CLASS {@link module:Template/CONSTANTS.CONSTANTS#ASTERISK_ICON_CLASS}
 * @property {Number} ASTREISK_DIV_HEIGHT {@link module:Template/CONSTANTS.CONSTANTS#ASTREISK_DIV_HEIGHT}
 * @property {String} CREATE_FIELD_ACTION  {@link module:Template/CONSTANTS.CONSTANTS#CREATE_FIELD_ACTION }
 * @property {String} DIVIDER_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#DIVIDER_CLASS }
 * @property {String} DRAG_BOX_NAME  {@link module:Template/CONSTANTS.CONSTANTS#DRAG_BOX_NAME }
 * @property {String} EDITOR_ATTR_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_CLASS }
 * @property {String} EDITOR_ATTR_CONTENTS_ROW_CLASS {@link module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_CONTENTS_ROW_CLASS}
 * @property {String} EDITOR_ATTR_DATE_INPUT_CLASS {@link module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_DATE_INPUT_CLASS}
 * @property {String} EDITOR_ATTR_INPUT_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_INPUT_CLASS }
 * @property {String} EDITOR_ATTR_INPUT_WRAP_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_INPUT_WRAP_CLASS }
 * @property {String} EDITOR_ATTR_KIND_CLASS {@link module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_KIND_CLASS}
 * @property {String} EDITOR_ATTR_PANEL_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_PANEL_CLASS }
 * @property {String} EDITOR_ATTR_PANEL_ID  {@link module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_PANEL_ID }
 * @property {String} EDITOR_ATTR_ROW_WRAP_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_ROW_WRAP_CLASS }
 * @property {String} EDITOR_ATTR_SELECT_CLASS {@link module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_SELECT_CLASS}
 * @property {String} EDITOR_ATTR_TEXTAREA_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_TEXTAREA_CLASS }
 * @property {String} EDITOR_COMPONENT_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#EDITOR_COMPONENT_CLASS }
 * @property {String} FIELD_ATTR_CHANGE_ACTION  {@link module:Template/CONSTANTS.CONSTANTS#FIELD_ATTR_CHANGE_ACTION }
 * @property {String} FIELD_DELETE_BUTTON_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#FIELD_DELETE_BUTTON_CLASS }
 * @property {String} GROUP_ATTR_CHANGE_ACTION {@link module:Template/CONSTANTS.CONSTANTS#GROUP_ATTR_CHANGE_ACTION}
 * @property {String} GROUP_ATTR_OWNER_CHANGE_ACTION {@link module:Template/CONSTANTS.CONSTANTS#GROUP_ATTR_OWNER_CHANGE_ACTION}
 * @property {String} GROUP_REMOVE_ACTION {@link module:Template/CONSTANTS.CONSTANTS#GROUP_REMOVE_ACTION}
 * @property {String} HIDE_CLASS {@link module:Template/CONSTANTS.CONSTANTS#HIDE_CLASS}
 * @property {String} MAIN_GROUP_NAME {@link module:Template/CONSTANTS.CONSTANTS#MAIN_GROUP_NAME}
 * @property {Number} MINIMUM_DRAG_SIZE  {@link module:Template/CONSTANTS.CONSTANTS#MINIMUM_DRAG_SIZE }
 * @property {String} PREVIEW_READER_PDF_VIEWER {@link module:Template/CONSTANTS.CONSTANTS#PREVIEW_READER_PDF_VIEWER}
 * @property {String} PREVIEW_READER_PDF_VIEWER_CONTAINER  {@link module:Template/CONSTANTS.CONSTANTS#PREVIEW_READER_PDF_VIEWER_CONTAINER }
 * @property {String} READER_PAGE_FIELD_LAYER_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#READER_PAGE_FIELD_LAYER_CLASS }
 * @property {String} READER_PDF_VIEWER  {@link module:Template/CONSTANTS.CONSTANTS#READER_PDF_VIEWER }
 * @property {String} READER_PDF_VIEWER_CONTAINER  {@link module:Template/CONSTANTS.CONSTANTS#READER_PDF_VIEWER_CONTAINER }
 * @property {String} REMOVE_FIELD_ACTION {@link module:Template/CONSTANTS.CONSTANTS#REMOVE_FIELD_ACTION}
 * @property {String} SHOW_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#SHOW_CLASS }
 * @property {String} SWITCH_LABEL_CLASS {@link module:Template/CONSTANTS.CONSTANTS#SWITCH_LABEL_CLASS}
 * @property {String} SWITCH_LABEL_SLIDER_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#SWITCH_LABEL_SLIDER_CLASS }
 * @property {String} SWITCH_LABEL_SLIDER_ROUND_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#SWITCH_LABEL_SLIDER_ROUND_CLASS }
 * @property {String} TEMPLATE_LAYER_ASTERISK_NAME  {@link module:Template/CONSTANTS.CONSTANTS#TEMPLATE_LAYER_ASTERISK_NAME }
 * @property {String} TEMPLATE_LAYER_NAME {@link module:Template/CONSTANTS.CONSTANTS#TEMPLATE_LAYER_NAME}
 * @property {String} TEMPLATE_LAYER_RECT_NAME  {@link module:Template/CONSTANTS.CONSTANTS#TEMPLATE_LAYER_RECT_NAME }
 * @property {String} TEMPLATE_PDF_VIEWER  {@link module:Template/CONSTANTS.CONSTANTS#TEMPLATE_PDF_VIEWER }
 * @property {String} TEMPLATE_PDF_VIEWER_CONTAINER  {@link module:Template/CONSTANTS.CONSTANTS#TEMPLATE_PDF_VIEWER_CONTAINER }
 * @property {String} TITLE_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#TITLE_CLASS }
 * @property {String} TITLE_WRAP_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#TITLE_WRAP_CLASS }
 * 
 * @class
 * @FileName CONSTANTS.js
 * @since 2021.05.31
 */
class CONSTANTS {

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#MAIN_GROUP_NAME
     * @description (Static) Canvas의 메인 노드
     */
    static MAIN_GROUP_NAME = "MainContainer";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#TEMPLATE_PDF_VIEWER_CONTAINER
     * @description (Static) Template모드에서의 PDF Viewer Container
     */
    static TEMPLATE_PDF_VIEWER_CONTAINER = "TemplateViewerContainer";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#TEMPLATE_PDF_VIEWER
     * @description (Static) Template모드에서의 PDF Viewer
     */
    static TEMPLATE_PDF_VIEWER = "TemplatePDFViewer";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#READER_PDF_VIEWER_CONTAINER
     * @description (Static) 서명모드에서의 PDF Viewer Container
     */
    static READER_PDF_VIEWER_CONTAINER = "ReaderViewerContainer";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#READER_PDF_VIEWER
     * @description (Static) 서명모드에서의 PDF Viewer
     */
    static READER_PDF_VIEWER = "ReaderPDFViewer";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#PREVIEW_READER_PDF_VIEWER_CONTAINER
     * @description (Static) 미리보기 모드에서의 PDF Viewer Container
     */
    static PREVIEW_READER_PDF_VIEWER_CONTAINER = "PreviewReaderViewerContainer";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#PREVIEW_READER_PDF_VIEWER
     * @description (Static) 미리보기 모드에서의 PDF Viewer
     */
    static PREVIEW_READER_PDF_VIEWER = "PreviewReaderPDFViewer";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#TEMPLATE_LAYER_NAME
     * @description (Static) Template 레이어 이름
     */
    static TEMPLATE_LAYER_NAME = "TemplateLayer";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#TEMPLATE_LAYER_ASTERISK_NAME
     * @description (Static) Template에서 필수 여부 마크가 있는 레이어 이름
     */
    static TEMPLATE_LAYER_ASTERISK_NAME = "TemplateAsteriskLayer";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#TEMPLATE_LAYER_RECT_NAME
     * @description (Static) Template에서 필드를 만들기 위해 생성하는 임시 div 이름
     */
    static TEMPLATE_LAYER_RECT_NAME = "TemplateRect";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#DRAG_BOX_NAME
     * @description (Static) Template에서 드래그 했을때 필드들이 있을 경우 만드는 SVG 그룹 노드 이름
     */
    static DRAG_BOX_NAME = "DragBoxGroup";


    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#SHOW_CLASS
     * @description (Static) 노드를 보이도록 하는 CSS 클래스 이름
     */
    static SHOW_CLASS = "Template-Show"

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#HIDE_CLASS
     * @description (Static) 노드를 안보이도록 하는 CSS 클래스 이름
     */
    static HIDE_CLASS = "Template-Hide"

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#EDITOR_COMPONENT_CLASS
     * @description (Static) Template모드에서 사이드 탭의 클라스 이름.
     */
    static EDITOR_COMPONENT_CLASS = "Editor-Component_Box";


    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_CLASS
     * @description (Static) Template모드에서 필드의 속성 노드 클래스 이름.
     */
    static EDITOR_ATTR_CLASS = "Editor-Attribute";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#FIELD_DELETE_BUTTON_CLASS
     * @description (Static) Template모드에서 삭제버튼 노드 클래스 이름.
     */
    static FIELD_DELETE_BUTTON_CLASS = "Field-Delete-Button";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#MEMO_PROPERTY_BUTTON_CLASS
     * @description (Static) Reader모드에서 메모 속성 버튼 노드 클래스 이름.
     */
    static MEMO_PROPERTY_BUTTON_CLASS = "MEMO-Property-Button";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_KIND_CLASS
     * @description (Static) Template모드에서 필드의 속성 종류 노드 클래스 이름.
     */
    static EDITOR_ATTR_KIND_CLASS = "Attribute-kind";


    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_PANEL_CLASS
     * @description (Static) Template모드에서 필드의 속성 판넬 노드 클래스 이름.
     */
    static EDITOR_ATTR_PANEL_CLASS = "Attribute-Contents";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_PANEL_ID
     * @description (Static) Template모드에서 필드의 속성 판넬 노드 ID.
     */
    static EDITOR_ATTR_PANEL_ID = "Attribute-Panel";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_CONTENTS_ROW_CLASS
     * @description (Static) Template모드에서 필드의 속성 컨텐츠 열의 클래스 이름
     */
    static EDITOR_ATTR_CONTENTS_ROW_CLASS = "Attribute-Contents-Row";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_ROW_WRAP_CLASS
     * @description (Static) Template모드에서 필드의 속성 컨텐츠 열을 감싸고 있는 노드의 클래스 이름
     */
    static EDITOR_ATTR_ROW_WRAP_CLASS = "Attribute-Contents-Row-Wrap";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#TITLE_WRAP_CLASS
     * @description (Static) Template모드에서 필드의 속성 컨텐츠 열의 타이틀을 감싸고 있는 노드의 클래스 이름
     */
    static TITLE_WRAP_CLASS = "Title-Wrap";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#TITLE_CLASS
     * @description (Static) Template모드에서 필드의 속성 컨텐츠 열의 타이틀 노드의 클래스 이름
     */
    static TITLE_CLASS = "Title";


    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_SELECT_CLASS
     * @description (Static) Template모드에서 필드의 속성 의 Select 노드의 클래스 이름
     */
    static EDITOR_ATTR_SELECT_CLASS = "Attribute-Select";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#SWITCH_LABEL_CLASS
     * @description (Static) Template모드에서 필드의 속성 의 Switch버튼  노드의 클래스 이름
     */
    static SWITCH_LABEL_CLASS = "Attribute-Switch-Label";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#SWITCH_LABEL_SLIDER_CLASS
     * @description (Static) Template모드에서 필드의 속성 의 Switch버튼의 슬라이더 노드의 클래스 이름
     */
    static SWITCH_LABEL_SLIDER_CLASS = "Attribute-Switch-Slider";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#SWITCH_LABEL_SLIDER_ROUND_CLASS
     * @description (Static) Template모드에서 필드의 속성 의 Switch버튼의 슬라이더의 도그란 Div 노드의 클래스 이름
     */
    static SWITCH_LABEL_SLIDER_ROUND_CLASS = "Round";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#DIVIDER_CLASS
     * @description (Static) 구분자 노드의 클래스 이름
     */
    static DIVIDER_CLASS = "Divider";


    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_INPUT_CLASS
     * @description (Static) Template모드에서 필드의 속성 의 input 노드의 클래스 이름
     */
    static EDITOR_ATTR_INPUT_CLASS = "Attribute-Input";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_TEXTAREA_CLASS
     * @description (Static) Template모드에서 필드의 속성 의 Textarea 노드의 클래스 이름
     */
    static EDITOR_ATTR_TEXTAREA_CLASS = "Attribute-Textarea";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_DATE_INPUT_CLASS
     * @description (Static) Template모드에서 필드의 속성 의 Date input 노드의 클래스 이름
     */
    static EDITOR_ATTR_DATE_INPUT_CLASS = "Attribute-Date-Input";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_INPUT_WRAP_CLASS
     * @description (Static) Template모드에서 필드의 속성 의 input 노드를 감싸고 있는 노드의 클래스 이름
     */
    static EDITOR_ATTR_INPUT_WRAP_CLASS = "Attribute-Input-Wrap";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#CREATE_FIELD_ACTION
     * @description (Static) Template모드에서 UNDO REDO의 필드 생성 Action의 이름
     */
    static CREATE_FIELD_ACTION = "CreateFieldAction";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#REMOVE_FIELD_ACTION
     * @description (Static) Template모드에서 UNDO REDO의 필드 삭제 Action의 이름
     */
    static REMOVE_FIELD_ACTION = "RemoveFieldAction";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#FIELD_ATTR_CHANGE_ACTION
     * @description (Static) Template모드에서 UNDO REDO의 필드 속성 변경 Action의 이름
     */
    static FIELD_ATTR_CHANGE_ACTION = "FieldAttrChangeAction";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#GROUP_REMOVE_ACTION
     * @description (Static) Template모드에서 UNDO REDO의 필드 삭제 Action의 이름
     */
    static GROUP_REMOVE_ACTION = "GroupRemoveAction";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#GROUP_ATTR_CHANGE_ACTION
     * @description (Static) Template모드에서 UNDO REDO의 필드들의 속성 변경 Action의 이름
     */
    static GROUP_ATTR_CHANGE_ACTION = "GroupAttrChangeAction";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#GROUP_ATTR_OWNER_CHANGE_ACTION
     * @description (Static) Template모드에서 UNDO REDO의 필드들의 서명자 변경 Action의 이름
     */
    static GROUP_ATTR_OWNER_CHANGE_ACTION = "GroupAttrOwnerChangeAction";


    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#READER_PAGE_FIELD_LAYER_CLASS
     * @description (Static) 서명 모드에서 Field들이 올라갈 레이어 클래스 이름.
     */
    static READER_PAGE_FIELD_LAYER_CLASS = "Reader-Page-Field-Layer";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#READER_PAGE_MEMO_LAYER_CLASS
     * @description (Static) 서명 모드에서 MEMO들이 올라갈 레이어 클래스 이름.
     */
    static READER_PAGE_MEMO_LAYER_CLASS = "Reader-Page-Memo-Layer";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#ASTERISK_ICON_CLASS
     * @description (Static) Template모드에서 필수 여부 아이콘 클래스 이름
     */
    static ASTERISK_ICON_CLASS = "Asterisk-Icon";

    /**
     * @static
     * @type {Number}
     * @name module:Template/CONSTANTS.CONSTANTS#ASTREISK_DIV_HEIGHT
     * @description (Static) Template모드에서 필수 여부 아이콘 세로길이
     */
    static ASTREISK_DIV_HEIGHT = 12;

    /**
     * @static
     * @type {Number}
     * @name module:Template/CONSTANTS.CONSTANTS#MINIMUM_DRAG_SIZE
     * @description (Static) Template모드에서 드래그를 했다는 최소의 사이즈 기준
     */
    static MINIMUM_DRAG_SIZE = 10;

    static RADIO_TYPE_1 = '1';
    static RAIOD_TYPE_1_PATH = `<path d="M24,12c-6.6,0-12,5.4-12,12s5.4,12,12,12s12-5.4,12-12S30.6,
            12,24,12zM24,0C10.8,0,0,10.8,0,24s10.8,24,24,24s24-10.8,24-24S37.2,0,24,0zM24,43.2C13.4,43.2,4.8,34.6,4.8,24S13.4,
            4.8,24,4.8S43.2,13.4,43.2,24S34.6,43.2,24,43.2z"/>`;
    static RADIO_TYPE_2 = '2';
    static RAIOD_TYPE_2_PATH = `<path d="M24,0C10.8,0,0,10.8,0,24s10.8,24,24,24s24-10.8,24-24S37.2,0,24,0zM24,43.2C13.4,43.2,4.8,34.6,4.8,24S13.4,\
            4.8,24,4.8S43.2,13.4,43.2,24S34.6,43.2,24,43.2z"/>`;

            
    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#NO_EVENT_LAYER
     * @description (Static) 이벤트를 받지 않는 class.
     */
    static NO_EVENT_LAYER = "No-Event-Layer";

    static READER_FIELD_INPUT_MODE      = 0;
    static READER_FIELD_MEMO_MODE       = 1;
    static READER_FIELD_MEMO_MAKE_MODE  = 2;
}



/***/ }),

/***/ "./js/pdf_form/src/Fields/BaseField.js":
/*!*********************************************!*\
  !*** ./js/pdf_form/src/Fields/BaseField.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BaseField: () => (/* binding */ BaseField)
/* harmony export */ });
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");
/* harmony import */ var _Constants_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../Constants.js */ "./js/pdf_form/src/Constants.js");

/**
 * @module Template/Field
 */




/**
 * @description 필드들의 기본이 되는 Class
 * 
 * @property {String} m_id {@link module:Template/Field.BaseField#m_id}
 * @property {Number} m_x {@link module:Template/Field.BaseField#m_x}
 * @property {Number} m_y {@link module:Template/Field.BaseField#m_y}
 * @property {Number} m_width {@link module:Template/Field.BaseField#m_width}
 * @property {Number} m_height {@link module:Template/Field.BaseField#m_height}
 * @property {Number} m_pageNo {@link module:Template/Field.BaseField#m_pageNo}
 * @property {Number} m_pdfX {@link module:Template/Field.BaseField#m_pdfX}
 * @property {Number} m_pdfX2 {@link module:Template/Field.BaseField#m_pdfX2}
 * @property {Number} m_pdfY {@link module:Template/Field.BaseField#m_pdfY}
 * @property {Number} m_pdfY2 {@link module:Template/Field.BaseField#m_pdfY2}
 * @property {String} m_type {@link module:Template/Field.BaseField#m_type}
 * @property {Number} m_fontSize {@link module:Template/Field.BaseField#m_fontSize}
 * @property {String} m_fontName {@link module:Template/Field.BaseField#m_fontName}
 * @property {String} m_fontWeight {@link module:Template/Field.BaseField#m_fontWeight}
 * @property {String} m_fontStyle {@link module:Template/Field.BaseField#m_fontStyle}
 * @property {String} m_fontColor {@link module:Template/Field.BaseField#m_fontColor}
 * @property {String} m_kind {@link module:Template/Field.BaseField#m_kind}
 * @property {Boolean} m_isRemoved {@link module:Template/Field.BaseField#m_isRemoved}
 * @property {String} m_value {@link module:Template/Field.BaseField#m_value}
 * @property {String} m_ownerId {@link module:Template/Field.BaseField#m_ownerId}
 * @property {String} m_fieldId {@link module:Template/Field.BaseField#m_fieldId}
 * @property {String} m_required {@link module:Template/Field.BaseField#m_required}
 * 
 * @property {Function} fromJson {@link module:Template/Field.BaseField#fromJson}
 * @property {Function} getBBox {@link module:Template/Field.BaseField#getBBox}
 * @property {Function} fieldName {@link module:Template/Field.BaseField#fieldName}
 * @property {Function} showFieldAttribute {@link module:Template/Field.BaseField#showFieldAttribute}
 * @property {Function} showFieldsAttribute {@link module:Template/Field.BaseField#showFieldsAttribute}
 * @FileName BaseField.js
 * @since 2021.05.31
 */
class BaseField {

    /**
     * @constructor
     * @param id 필드의 ID
     * @param pageNo 필드가 속한 페이지 번호
     * @param x 필드의 svg상의 x좌표
     * @param y 필드의 svg상의 y좌표
     * @param width 필드의 가로길이
     * @param height 필드의 세로길이
     * 
     */
    constructor(id, pageNo, x, y, width, height) {
        /**
         * @type {String}
         * @name module:Template/Field.BaseField#m_id
         * @description 필드의 고유 ID
         * @example
         * // getter id()
         * // setter id(val)
         */
        this.m_id = id;

        /**
         * @type {Number}
         * @name module:Template/Field.BaseField#m_x
         * @description 필드의 svg상의 x 좌표
         * @example
         * // getter x()
         * // setter x(val)
         */
        this.m_x = x;


        /**
         * @type {Number}
         * @name module:Template/Field.BaseField#m_y
         * @description 필드의 svg상의 y 좌표
         * @example
         * // getter y()
         * // setter y(val)
         */
        this.m_y = y;

        /**
         * @type {Number}
         * @name module:Template/Field.BaseField#m_width
         * @description 필드의 svg상의 가로 길이
         * @example
         * // getter width()
         * // setter width(val)
         */
        this.m_width = width;

        /**
         * @type {Number}
         * @name module:Template/Field.BaseField#m_height
         * @description 필드의 svg상의 세로 길이
         * @example
         * // getter height()
         * // setter height(val)
         */
        this.m_height = height;

        /**
         * @type {Number}
         * @name module:Template/Field.BaseField#m_pageNo
         * @description 필드의 PDF에서의 페이지 번호
         * @example
         * // getter pageNo()
         * // setter pageNo(val)
         */
        this.m_pageNo = pageNo;

        /**
         * @type {Number}
         * @name module:Template/Field.BaseField#m_pdfX
         * @description 필드의 PDF에서의 X좌표
         * @example
         * // getter pdfX()
         * // setter pdfX(val)
         */
        this.m_pdfX = 0;

        /**
         * @type {Number}
         * @name module:Template/Field.BaseField#m_pdfY
         * @description 필드의 PDF에서의 Y좌표
         * @example
         * // getter pdfY()
         * // setter pdfY(val)
         */
        this.m_pdfY = 0;

        /**
         * @type {Number}
         * @name module:Template/Field.BaseField#m_pdfX2
         * @description 필드의 PDF에서의 X2좌표
         * @example
         * // getter pdfX2()
         * // setter pdfX2(val)
         */
        this.m_pdfX2 = 0;

        /**
         * @type {Number}
         * @name module:Template/Field.BaseField#m_pdfY2
         * @description 필드의 PDF에서의 Y2좌표
         * @example
         * // getter pdfY2()
         * // setter pdfY2(val)
         */
        this.m_pdfY2 = 0;


        /**
         * @type {String}
         * @name module:Template/Field.BaseField#m_type
         * @description 필드의 타입이름
         * @readonly
         * @example
         * // getter type()
         */
        this.m_type = BaseField.fieldName();

        /**
         * @type {Number}
         * @name module:Template/Field.BaseField#m_fontSize
         * @description 필드에서 사용되는 폰트크기값
         * @example
         * // getter fontSize()
         * // setter fontSize(val)
         */
        this.m_fontSize = 16;

        /**
         * @type {String}
         * @name module:Template/Field.BaseField#m_fontName
         * @description 필드에서 사용되는 폰트이름.
         * @example
         * // getter fontName()
         * // setter fontName(val)
         */
        this.m_fontName = 'MalgunGothic';

        /**
         * @type {String}
         * @name module:Template/Field.BaseField#m_fontWeight
         * @description 필드에서 사용되는 폰트 두께
         * @example
         * // getter fontWeight()
         * // setter fontWeight(val)
         */
        this.m_fontWeight = "";

        /**
         * @type {String}
         * @name module:Template/Field.BaseField#m_fontStyle
         * @description 필드에서 사용되는 폰트 스타일
         * @example
         * // getter fontStyle()
         * // setter fontStyle(val)
         */
        this.m_fontStyle = "";

        /**
         * @type {String}
         * @name module:Template/Field.BaseField#m_fontColor
         * @description 필드에서 사용되는 폰트 색상
         * @example
         * // getter fontColor()
         * // setter fontColor(val)
         */
        this.m_fontColor = "#000000"

        /**
         * @type {String}
         * @name module:Template/Field.BaseField#m_kind
         * @description  필드종류의 한글이름
         * @readonly
         * @example
         * // getter kind()
         */
        this.m_kind = "";

        /**
         * @type {Boolean}
         * @name module:Template/Field.BaseField#m_isRemoved
         * @example
         * // getter isRemoved()
         * // setter isRemoved(val)
         * @description  필드삭제여부
         */
        this.m_isRemoved = false;

        /**
         * @type {String}
         * @name module:Template/Field.BaseField#m_value
         * @description  필드 값
         * @example
         * // getter value()
         * // setter value(val)
         */
        this.m_value = "";

        /**
         * @type {String}
         * @name module:Template/Field.BaseField#m_ownerId
         * @description  필드가 속한 서명자의 ID
         * @example
         * // getter ownerId()
         * // setter ownerId(val)
         */
        this.m_ownerId = ""

        /**
         * @type {String}
         * @name module:Template/Field.BaseField#m_fieldId
         * @description  필드의 별칭
         * @example
         * // getter fieldId()
         * // setter fieldId(val)
         */
        this.m_fieldId = id;

        /**
         * @type {String}
         * @name module:Template/Field.BaseField#m_required
         * @description  필드의 필수여부
         * @example
         * // getter required()
         * // setter required(val)
         */
        this.m_required = "true";

    }

    /**
     * @function fromJson
     * @name module:Template/Field.BaseField#fromJson
     * @description (Static) JSON데이터로 로드한다.
     *
     * @param target 복사할 필드 오브젝트
     * @param jsonData 필드의 JSON데이터.
     * @return {Object} JSON데이터를 로드한 필드를 리턴한다.
     * @static
     */ 
    static fromJson(target, jsonData) {
        let field = Object.assign(target, jsonData);
        return field;
    }

    /**
     * @function fieldName
     * @static
     * @name module:Template/Field.BaseField#fieldName
     * @return {String}
     * @description (Static) 필드 타입의 이름
     *
     */
    static fieldName() {
        return "BaseField";
    }

    ancestors() {
        return ["BF"];
    }

    get type() {
        return this.m_type;
    }

    get id() {
        return this.m_id;
    }
    get kind() {
        return this.m_kind;
    }

    set id(__id) {
        this.m_id = __id;
    }

    get fieldId() {
        return this.m_fieldId;
    }

    set fieldId(__fieldId) {
        this.m_id = __fieldId;
    }

    get pageNo() {
        return this.m_pageNo;
    }

    set pageNo(_pageNo) {
        this.m_pageNo = _pageNo;
    }

    get x() {
        return this.m_x;
    }

    set x(__x) {
        this.m_x = __x;
    }

    get y() {
        return this.m_y;
    }

    set y(__y) {
        this.m_y = __y;
    }

    get width() {
        return this.m_width;
    }

    set width(__width) {
        this.m_width = __width;
    }

    get height() {
        return this.m_height;
    }

    set height(__height) {
        this.m_height = __height;
    }

    get toolTip() {
        return this.m_toolTip;
    }

    set toolTip(__toolTip) {
        this.m_toolTip = __toolTip;
    }

    get pdfX() {
        return this.m_pdfX;
    }

    set pdfX(__pdfX) {
        this.m_pdfX = __pdfX;
    }

    get pdfY() {
        return this.m_pdfY;
    }

    set pdfY(__pdfY) {
        this.m_pdfY = __pdfY;
    }

    get pdfX2() {
        return this.m_pdfX2;
    }

    set pdfX2(__pdfX2) {
        this.m_pdfX2 = __pdfX2;
    }

    get pdfY2() {
        return this.m_pdfY2;
    }

    set pdfY2(__pdfY2) {
        this.m_pdfY2 = __pdfY2;
    }

    get fontSize() {
        return this.m_fontSize;
    }

    set fontSize(__fontSize) {
        this.m_fontSize = __fontSize;
    }

    get fontName() {
        return this.m_fontName;
    }

    set fontName(__fontName) {
        this.m_fontName = __fontName;
    }

    get fontWeight() {
        return this.m_fontWeight;
    }

    set fontWeight(__fontWeight) {
        this.m_fontWeight = __fontWeight;
    }

    get fontStyle() {
        return this.m_fontStyle;
    }

    set fontStyle(__fontStyle) {
        this.m_fontStyle = __fontStyle;
    }

    get fontColor() {
        return this.m_fontColor;
    }

    set fontColor(__fontColor) {
        this.m_fontColor = __fontColor;
    }

    get isRemoved() {
        return this.m_isRemoved;
    }
    set isRemoved(_isRemoved) {
        this.m_isRemoved = _isRemoved;
    }

    get value() {
        return this.m_value;
    }
    set value(_value) {
        this.m_value = _value;
    }

    get ownerId() {
        return this.m_ownerId;
    }

    set ownerId(__ownerId) {
        this.m_ownerId = __ownerId;
    }

    get required() {
        return this.m_required;
    }

    set required(__required) {
        this.m_required = __required;
    }

    /**
     *
     * @function showFieldAttribute
     * @static
     * @name module:Template/Field.BaseField#showFieldAttribute
     * @description (Static) 필드의 속성 팝업창을 설정한다.
     *
     * @param {ELEMENT} node  속성 팝업 Node
     * @param {String} idValue     필드의 id값
     * @param {String} requiredValue     필수여부 값
     * @param {String} ownerIdValue    서명자 아이디
     * @param {Array} userList   서명자 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldAttribute(node,
        idValue, fieldIdValue, requiredValue, ownerIdValue,
        userList,
        changeEventFunc) {

        var panel = _utils_utils_js__WEBPACK_IMPORTED_MODULE_0__.Utils.createAttributePanelNode();

        var requireRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_0__.Utils.createAttributeToggleButtonNode(idValue, "required", "Template.isRequired", requiredValue, changeEventFunc);
        panel.appendChild(requireRow);
        let useDefaulOptionNode = _utils_utils_js__WEBPACK_IMPORTED_MODULE_0__.Utils.getUserInfoOptsListCount() !== 1;
        var ownerSelectRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_0__.Utils.createAttributeSelectNode(idValue, "ownerId", userList, "", useDefaulOptionNode);
        panel.appendChild(ownerSelectRow);

        let ownerSelect = ownerSelectRow.querySelector("select");
        $(ownerSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(ownerSelect).val(ownerIdValue).trigger("change");
        $(ownerSelect).on("change", changeEventFunc);

        var fieldIdValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_0__.Utils.createAttributeInputNode(idValue, "fieldId", "Template.fieldIdText", fieldIdValue, "", "", changeEventFunc);
        panel.appendChild(fieldIdValueRow);


        panel.setAttribute("Field-id-list", idValue);
        node.className = "Editor-Attribute";
        node.classList.add("Base-Field");
        node.appendChild(panel);
    }

    /**
     *
     * @function showFieldsAttribute
     * @static
     * @name module:Template/Field.BaseField#showFieldsAttribute
     * @description (Static) 필드의 속성 팝업창을 설정한다.
     *
     * @param {HTML} ownerNode  속성 팝업 Node
     * @param {Array} fieldList    필드들의 리스트
     * @param {HTML} attrNode   속성 팝업의 Node
     * @param {String} mainGroup    SVG의 메인 Element
     * @param {Array} userList  서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc   속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     * @static
     */
    static showFieldsAttribute(ownerNode, fieldList, attrNode, mainGroup, userList, dvOptionList, changeEventFunc) {
        let node = attrNode;
        if (attrNode === null || _utils_utils_js__WEBPACK_IMPORTED_MODULE_0__.Utils.isEmptyObject(attrNode)) {
            const bbox = _utils_utils_js__WEBPACK_IMPORTED_MODULE_0__.Utils.mergeFieldsBBox(fieldList);
            node = _utils_utils_js__WEBPACK_IMPORTED_MODULE_0__.Utils.createAttrbutePopup(ownerNode, bbox);
            _utils_utils_js__WEBPACK_IMPORTED_MODULE_0__.Utils.repositionFieldDeleteBtn(ownerNode, bbox.x, bbox.y, bbox.width);
        }
        _utils_utils_js__WEBPACK_IMPORTED_MODULE_0__.Utils.removeAllChildNode(node);

        var idValueArr = [];
        fieldList.forEach((field) => {
            idValueArr.push(field.id);
        });
        var idValue = idValueArr.join();

        var ownerIdValue = fieldList[0].ownerId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].ownerId !== ownerIdValue) {
                ownerIdValue = '';
                break;
            }
        }

        var requiredValue = fieldList[0].required;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].required !== requiredValue) {
                requiredValue = '';
                break;
            }
        }

        var fieldIdValue = fieldList[0].fieldId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fieldId !== fieldIdValue) {
                fieldIdValue = '';
                break;
            }
        }

        BaseField.showFieldAttribute(node,
            idValue, fieldIdValue, requiredValue, ownerIdValue,
            userList,
            changeEventFunc);
    }

    validateValue(propertyName, value) {
        return true;
    }

    /**
     * 
     * @function getBBox
     * @name module:Template/Field.BaseField#getBBox
     * @description 필드의 bounding Rect를 리턴 .
     * @memberOf module:Template/Field.BaseField
     * @return {Rect} Object 
     * @Date : 2021. 5. 31
     */
    getBBox() {
        return {
            left: this.x,
            top: this.y,
            right: this.x + this.width,
            bottom: this.y + this.height,
            x: this.x,
            y: this.y,
            width: this.width,
            height: this.height
        }
    }
} 


/***/ }),

/***/ "./js/pdf_form/src/Fields/CheckboxField.js":
/*!*************************************************!*\
  !*** ./js/pdf_form/src/Fields/CheckboxField.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CheckboxField: () => (/* binding */ CheckboxField)
/* harmony export */ });
/* harmony import */ var _BaseField__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BaseField */ "./js/pdf_form/src/Fields/BaseField.js");
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");
/* harmony import */ var _Constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../Constants.js */ "./js/pdf_form/src/Constants.js");

/**
 * @module Template/Field
*/





/**
 * @description 체크박스 필드 Class
 *
 * @property {Function} fieldName {@link module:Template/Field.CheckboxField#fieldName}
 * @property {Function} widthValue {@link module:Template/Field.CheckboxField#widthValue}
 * @property {Function} heightValue {@link module:Template/Field.CheckboxField#heightValue}
 * @property {Function} getSVGFieldObject {@link module:Template/Field.CheckboxField#getSVGFieldObject}
 * 
 * @augments BaseField {@link module:Template/Field.BaseField#BaseField}
 * @FileName CheckboxField.js
 * @since 2021.05.31
 */

class CheckboxField extends _BaseField__WEBPACK_IMPORTED_MODULE_0__.BaseField {

    /**
     * @constructor
     * @param id 필드의 ID
     * @param pageNo 필드가 속한 페이지 번호
     * @param x 필드의 svg상의 x좌표
     * @param y 필드의 svg상의 y좌표
     *
     */
    constructor(id, pageNo, x, y) {
        super(id, pageNo, x, y, CheckboxField.widthValue(), CheckboxField.heightValue());
        this.m_type = CheckboxField.fieldName();

        this.m_kind = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.translateForKey("Template.checkFieldTool");

        if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(id)) {
            return;
        }
        this.m_fieldId = this.m_id.replace(this.m_type, this.m_kind + "-");
    }

    /**
     * @function fieldName
     * @name module:Template/Field.CheckboxField#fieldName
     * @return {String}
     * @description (Static) 필드 타입의 이름
     * @static
     *
     */
    static fieldName() {
        return "CheckboxField";
    }
    
    ancestors() {
        return ["CBF", "BF"];
    }

    /**
     * @function widthValue
     * @name module:Template/Field.CheckboxField#widthValue
     * @description (Static) 필드의 초기 가로 길이
     * @return {Number}
     * @static
     *
     */
    static widthValue() {
        return 60;
    }

    /**
     * @function heightValue
     * @name module:Template/Field.CheckboxField#heightValue
     * @description (Static) 필드의 초기 세로 길이
     * @return {Number}
     * @static
     *
     */
    static heightValue() {
        return 60;
    }

    /**
     * @function getSVGFieldObject
     * @name module:Template/Field.CheckboxField#getSVGFieldObject
     * @memberOf module:Template/Field.CheckboxField
     * @description 필드의 정보를 가지고 SVG Element를 생성한다.
     *
     * @param {Object} canvas  Snap SVG의 Canvas Object
     * @param {Object} mainGroup   SVG의 메인 Node
     * @param {Number} scale  현재 PDF의 Scale
     * @param {HTML} ownerNode   해당 프로젝트의 최상단 Element를 감싸고 있는 Element
     * @param {Callback} removeDragOverGroupFunc   드래그 되어 선택되어진 Field Group을 제거하는 callback function
     * @param {Callback} changeValueEventFunc     속성값이 변할때 호출되는 callback function
     * @param {Callback} changeFreeTransformFunc     FreeTransform을 다시 생성하기 위한 callback function
     * @return SVG Node Element
     * @Date : 2021. 5. 31
     */
    getSVGFieldObject(canvas, mainGroup, scale, ownerNode, removeDragOverGroupFunc, changeValueEventFunc, changeFreeTransformFunc, bgColor="#ffac7f") {
        let group = mainGroup.group();
        group.attr({
            id: this.id + "Group",
            cursor: "move"
        });
        let rect = canvas.rect(this.x, this.y, this.width * scale, this.height * scale);
        rect.attr({
            id: this.id,
            "fill-opacity": "0.6",
            "fill": bgColor
        });
        group.append(rect);
        
        const checkString = '<svg xmlns="http://www.w3.org/2000/svg" x="' + this.x + 'px" y="' + this.y + 'px" width="' + this.width * scale +
            'px" height="' + this.height * scale + 'px"  viewBox="0 0 48 48"><path d="M17.2 32.2L4.9 19.9 0 24.8 17.2 42 48 10.9 43.1 6z"/></svg >'
        const p = Snap.parse(checkString);
        group.append(p);

        group.hover(
            function () { // f_in
            },
            function () { // f_out
            }
        );

        let _chkField = this;
        let mousePos = { x: 0, y: 0 };
        group.mousedown(function (evt) {
            mousePos.x = evt.pageX;
            mousePos.y = evt.pageY;
            const items = mainGroup.selectAll('g');
            items.forEach(function (element) {
                if (element !== group) {
                    if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(element.freeTransform)) {
                        element.freeTransform.hideResizeHandler();
                    }
                }
            });
            if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(group.freeTransform)) {
                group.freeTransform.showResizeHandler();
            } else {
                changeFreeTransformFunc(group, rect.attr("width"), rect.attr("height"));
            }
        });

        group.mouseup(function (evt) {
            if (group.parent().attr("id") === _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME) {
                if (Math.abs(mousePos.x - evt.pageX) > _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MINIMUM_DRAG_SIZE
                    || Math.abs(mousePos.y - evt.pageY) > _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MINIMUM_DRAG_SIZE) {
                    return;
                }
                removeDragOverGroupFunc.call();
                const items = mainGroup.selectAll('g');
                items.forEach(function (element) {
                    if (element !== group) {
                        if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(element.freeTransform)) {
                            element.freeTransform.hideResizeHandler();
                        }
                    }
                });
                if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(group.freeTransform)) {
                    group.freeTransform.showResizeHandler();
                } else {
                    changeFreeTransformFunc(group, rect.attr("width"), rect.attr("height"));
                }
                _chkField.constructor.showFieldsAttribute(ownerNode, [_chkField], undefined, mainGroup, _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsList(), _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getDVFieldOptsList(), changeValueEventFunc);
            } else {
                _chkField.constructor.showFieldsAttribute(ownerNode, [_chkField], undefined, mainGroup, _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsList(), _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getDVFieldOptsList(), changeValueEventFunc);
            }
        });
        return group;

    }
}



/***/ }),

/***/ "./js/pdf_form/src/Fields/ComboboxField.js":
/*!*************************************************!*\
  !*** ./js/pdf_form/src/Fields/ComboboxField.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ComboboxField: () => (/* binding */ ComboboxField)
/* harmony export */ });
/* harmony import */ var _TextBaseField__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./TextBaseField */ "./js/pdf_form/src/Fields/TextBaseField.js");
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");
/* harmony import */ var _Constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../Constants.js */ "./js/pdf_form/src/Constants.js");
/* harmony import */ var _utils_color_picker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../utils/color-picker */ "./js/pdf_form/src/utils/color-picker.js");
/* harmony import */ var _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_utils_color_picker__WEBPACK_IMPORTED_MODULE_3__);

/**
 * @module Template/Field
*/






/**
 * @description 콤보박스 필드 Class
 *
 * @property {String} m_comboboxList {@link module:Template/Field.ComboboxField#m_comboboxList}
 *
 * @property {Function} fieldName {@link module:Template/Field.ComboboxField#fieldName}
 * @property {Function} showFieldAttribute {@link module:Template/Field.ComboboxField#showFieldAttribute}
 * @property {Function} showFieldsAttribute {@link module:Template/Field.ComboboxField#showFieldsAttribute}
 * 
 * @augments TextBaseField {@link module:Template/Field.TextBaseField#TextBaseField}
 * @FileName ComboboxField.js
 * @since 2021.05.31
 */
class ComboboxField extends _TextBaseField__WEBPACK_IMPORTED_MODULE_0__.TextBaseField {

    /**
     * @constructor
     * @param id 필드의 ID
     * @param pageNo 필드가 속한 페이지 번호
     * @param x 필드의 svg상의 x좌표
     * @param y 필드의 svg상의 y좌표
     *
     */
    constructor(id, pageNo, x, y) {
        super(id, pageNo, x, y, ComboboxField.widthValue(), ComboboxField.heightValue());
        this.m_type = ComboboxField.fieldName();

        /**
         * @type {String}
         * @name module:Template/Field.ComboboxField#m_comboboxList
         * @description 콤보박스에 들어갈 리스트
         * @example
         * // getter comboboxList()
         * // setter comboboxList(val)
         */
        this.m_comboboxList = "";

        this.m_kind = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.translateForKey("Template.comboFieldTool");
        if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(id)) {
            return;
        }
        this.m_fieldId = this.m_id.replace(this.m_type, this.m_kind + "-");
    }

    /**
     * @function fieldName
     * @name module:Template/Field.ComboboxField#fieldName
     * @return {String}
     * @description (Static) 필드 타입의 이름
     * @static
     *
     */
    static fieldName() {
        return "ComboboxField";
    }
    
    ancestors() {
        return ["CMBF", "TBF", "BF"];
    }

    get comboboxList() {
        return this.m_comboboxList;
    }
    set comboboxList(__comboboxList) {
        this.m_comboboxList = __comboboxList;
    }

    /**
     * @function showFieldAttribute
     * @static
     * @name module:Template/Field.ComboboxField#showFieldAttribute
     * @description (Static) 필드의 속성 팝업창을 설정한다.
     *
     * @param {HTML} node   속성 팝업 Node
     * @param {String} idValue     필드의 id값
     * @param {String} requiredValue     필수여부 값
     * @param {String} ownerIdValue    서명자 아이디
     * @param {String} dvValue     기본값
     * @param {String} fontFamilyNameValue    폰트 이름
     * @param {String} fontSizeValue     폰트 크기 값
     * @param {String} textAlignValue    텍스트 가로 정렬 값
     * @param {String} boldValue     폰트 볼드 여부
     * @param {String} fontColorValue     폰트 칼라
     * @param {String} comboboxListValue    콤보박스 리스트에 들어가는 리스트 값
     * @param {Array} userList   서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldAttribute(node,
        idValue, fieldIdValue, requiredValue, ownerIdValue, dvValue, fontFamilyNameValue, fontSizeValue, textAlignValue, boldValue, fontColorValue, comboboxListValue,
        userList, dvOptionList,
        changeEventFunc) {

        var panel = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributePanelNode();

        var requireRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeToggleButtonNode(idValue, "required", "Template.isRequired", requiredValue, changeEventFunc);
        panel.appendChild(requireRow);

        let useDefaulOptionNode = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsListCount() !== 1;
        var ownerSelectRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(idValue, "ownerId", userList, "", useDefaulOptionNode);
        panel.appendChild(ownerSelectRow);

        let ownerSelect = ownerSelectRow.querySelector("select");
        jQuery(ownerSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        jQuery(ownerSelect).val(ownerIdValue).trigger("change");
        jQuery(ownerSelect).on("change", changeEventFunc);

        //12-28
        if (dvOptionList && Array.isArray(dvOptionList) && dvOptionList.length > 0) {
            var defaultValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(idValue, "defaultValue", dvOptionList, "Template.defaultValueText", true);
            panel.appendChild(defaultValueRow);

            let defaultValueSelect = defaultValueRow.querySelector("select");
            $(defaultValueSelect).select2({
                minimumResultsForSearch: Infinity,
                width: "100%"
            });
            $(defaultValueSelect).val(dvValue).trigger("change");
            $(defaultValueSelect).on("change", changeEventFunc);
        }


        var fieldIdValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeInputNode(idValue, "fieldId", "Template.fieldIdText", fieldIdValue, "", "", changeEventFunc);
        panel.appendChild(fieldIdValueRow);

        var comboboxRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeTextAreaNode(idValue, "comboboxList", "Template.comboBoxSelctValueText", comboboxListValue, "", changeEventFunc);
        panel.appendChild(comboboxRow);

        var fontAttrRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createTextAttrbuteNode(idValue, fontColorValue, textAlignValue, boldValue, changeEventFunc);
        panel.appendChild(fontAttrRow.row);

        let fontFamilyComboSelect = fontAttrRow.fontFamilyCombo.querySelector("select");
        $(fontFamilyComboSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(fontFamilyComboSelect).val(fontFamilyNameValue).trigger("change");
        $(fontFamilyComboSelect).on("change", changeEventFunc);
        let fontSizeComboSelect = fontAttrRow.fontSizeCombo.querySelector("select");
        $(fontSizeComboSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(fontSizeComboSelect).val(fontSizeValue).trigger("change");
        $(fontSizeComboSelect).on("change", changeEventFunc);

        let colorInput = fontAttrRow.colorBtn.querySelector("button");
        colorInput.style.backgroundColor = fontColorValue;
        let picker = new (_utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default())(colorInput, { color: fontColorValue });
        colorInput.value = fontColorValue;
        picker.on('change', function (r, g, b, a) {
            if (!picker.visible) {
                return;
            }
            colorInput.style.backgroundColor = _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]);
            colorInput.value = _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]);

            let colorTextInput = fontAttrRow.colorBtn.querySelector("input[type='text']");
            colorTextInput.value = (_utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]));
        });
        picker.on('exit', function (r, g, b, a) {
            colorInput.style.backgroundColor = _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]);

            let colorTextInput = fontAttrRow.colorBtn.querySelector("input[type='text']");
            colorTextInput.value = (_utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]));
            colorTextInput.dispatchEvent(new Event("change"));
        });

        panel.setAttribute("Field-id-list", idValue);
        node.className = "Editor-Attribute";
        node.classList.add("Text-Field");
        node.appendChild(panel);
    }


    /**
     * @function showFieldsAttribute
     * @static
     * @name module:Template/Field.ComboboxField#showFieldsAttribute
     * @description (Static) 필드의 속성 팝업창을 설정한다.
     *
     * @param {HTML} ownerNode  속성 팝업 Node
     * @param {Array} fieldList     필드들의 리스트
     * @param {HTML} attrNode    속성 팝업의 Node
     * @param {String} mainGroup    SVG의 메인 Element
     * @param {Array} userList   서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldsAttribute(ownerNode, fieldList, attrNode, mainGroup, userList, dvOptionList, changeEventFunc) {
        let node = attrNode;
        if (attrNode === null || _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(attrNode)) {
            const bbox = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.mergeFieldsBBox(fieldList);
            node = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttrbutePopup(ownerNode, bbox);
            _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.repositionFieldDeleteBtn(ownerNode, bbox.x, bbox.y, bbox.width);
        }
        _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.removeAllChildNode(node);

        var idValueArr = [];
        fieldList.forEach((field) => {
            idValueArr.push(field.id);
        });

        var idValue = idValueArr.join();

        var ownerIdValue = fieldList[0].ownerId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].ownerId !== ownerIdValue) {
                ownerIdValue = '';
                break;
            }
        }

        var requiredValue = fieldList[0].required;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].required !== requiredValue) {
                requiredValue = '';
                break;
            }
        }

        var dvValue = fieldList[0].defaultValue;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].defaultValue !== dvValue) {
                dvValue = '';
                break;
            }
        }

        var fontFamilyNameValue = fieldList[0].fontName;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontName !== fontFamilyNameValue) {
                fontFamilyNameValue = '';
                break;
            }
        }
        var fontSizeValue = fieldList[0].fontSize;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontSize !== fontSizeValue) {
                fontSizeValue = '';
                break;
            }
        }

        var textAlignValue = fieldList[0].textAlign;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].textAlign !== textAlignValue) {
                textAlignValue = '';
                break;
            }
        }

        var boldValue = fieldList[0].isBold;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].isBold !== boldValue) {
                boldValue = '';
                break;
            }
        }
        var fontColorValue = fieldList[0].fontColor;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontColor !== fontColorValue) {
                fontColorValue = '';
                break;
            }
        }

        var comboboxListValue = fieldList[0].comboboxList;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].comboboxList !== comboboxListValue) {
                comboboxListValue = '';
                break;
            }
        }

        let dvOptions = [];

        if (comboboxListValue !== '') {
            const combolist = comboboxListValue.split("\n");
            for (var idx = 0; idx < combolist.length; ++idx) {
                if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(combolist[idx])) {
                    continue;
                }
                    
                dvOptions.push({
                    text: combolist[idx],
                    value: combolist[idx]
                })
            }
        }

        var fieldIdValue = fieldList[0].fieldId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fieldId !== fieldIdValue) {
                fieldIdValue = '';
                break;
            }
        }

        ComboboxField.showFieldAttribute(node,
            idValue, fieldIdValue, requiredValue, ownerIdValue, dvValue, fontFamilyNameValue, fontSizeValue, textAlignValue, boldValue, fontColorValue, comboboxListValue,
            userList, dvOptions,
            changeEventFunc);
    }

    validateValue(propertyName, value) {
        return true;
    }

}


/***/ }),

/***/ "./js/pdf_form/src/Fields/DateField.js":
/*!*********************************************!*\
  !*** ./js/pdf_form/src/Fields/DateField.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DateField: () => (/* binding */ DateField)
/* harmony export */ });
/* harmony import */ var _TextBaseField__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./TextBaseField */ "./js/pdf_form/src/Fields/TextBaseField.js");
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");
/* harmony import */ var _Constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../Constants.js */ "./js/pdf_form/src/Constants.js");
/* harmony import */ var _utils_color_picker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../utils/color-picker */ "./js/pdf_form/src/utils/color-picker.js");
/* harmony import */ var _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_utils_color_picker__WEBPACK_IMPORTED_MODULE_3__);

/**
 * @module Template/Field
*/






/**
 * @description 날짜 필드 Class
 *
 * @property {Function} fieldName {@link module:Template/Field.DateField#fieldName}
 * @property {Function} showFieldAttribute {@link module:Template/Field.DateField#showFieldAttribute}
 * @property {Function} showFieldsAttribute {@link module:Template/Field.DateField#showFieldsAttribute}
 * 
 * @augments TextBaseField {@link module:Template/Field.TextBaseField#TextBaseField}
 * @FileName DateField.js
 * @since 2021.05.31
 */
class DateField extends _TextBaseField__WEBPACK_IMPORTED_MODULE_0__.TextBaseField {
    /**
     * @constructor
     * @param id 필드의 ID
     * @param pageNo 필드가 속한 페이지 번호
     * @param x 필드의 svg상의 x좌표
     * @param y 필드의 svg상의 y좌표
     *
     */
    constructor(id, pageNo, x, y) {
        super(id, pageNo, x, y, DateField.widthValue(), DateField.heightValue());
        this.m_type = DateField.fieldName();
        
        this.m_kind = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.translateForKey("Template.dateFieldTool");

        /**
         * @type {String}
         * @name module:Template/Field.DateField#m_inputMax
         * @description 날짜의 최대값
         * @example
         * // getter inputMax()
         * // setter inputMax(val)
         */
        this.m_inputMax = "";

        /**
         * @type {String}
         * @name module:Template/Field.DateField#m_inputMin
         * @description 날짜의 최소값
         * @example
         * // getter inputMin()
         * // setter inputMin(val)
         */
        this.m_inputMin = "";

        /**
         * @type {String}
         * @name module:Template/Field.DateField#m_useCurrentDate
         * @description  현재 날짜를 기본값으로 사용할 지 여부
         * @example
         * // getter useCurrentDate()
         * // setter useCurrentDate(val)
         */
        this.m_useCurrentDate = "true";

        /**
         * @type {String}
         * @name module:Template/Field.DateField#m_inputFormat
         * @description  날짜 포멧
         * @example
         * // getter inputFormat()
         * // setter inputFormat(val)
         */
        this.m_inputFormat = "Y-m-d";
        if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(id)) {
            return;
        }
        this.m_fieldId = this.m_id.replace(this.m_type, this.m_kind + "-");
    }

    /**
     * @function fieldName
     * @name module:Template/Field.DateField#fieldName
     * @return {String}
     * @description (Static) 필드 타입의 이름
     * @static
     *
     */
    static fieldName() {
        return "DateField";
    }
    
    ancestors() {
        return ["DF", "TBF", "BF"];
    }

    get inputFormat() {
        return this.m_inputFormat;
    }

    set inputFormat(__inputFormat) {
        this.m_inputFormat = __inputFormat;
    }

    get inputMax() {
        return this.m_inputMax;
    }

    set inputMax(__inputMax) {
        this.m_inputMax = __inputMax;
    }

    get inputMin() {
        return this.m_inputMin;
    }

    set inputMin(__inputMin) {
        this.m_inputMin = __inputMin;
    }

    get useCurrentDate() {
        return this.m_useCurrentDate;
    }

    set useCurrentDate(__useCurrentDate) {
        this.m_useCurrentDate = __useCurrentDate;
    }

    /**
     * @function showFieldAttribute
     * @static
     * @name module:Template/Field.DateField#showFieldAttribute
     * @description (Static)  필드의 속성 팝업창을 설정한다.
     *
     * @param {HTML} node  속성 팝업 Node
     * @param {String} idValue     필드의 id값
     * @param {String} requiredValue     필수여부 값
     * @param {String} ownerIdValue     서명자 아이디
     * @param {String} inputFormatValue     날짜 형식
     * @param {String} useCurrentDateValue     현재 날짜를 쓰는지 여부
     * @param {String} fontFamilyNameValue     폰트 이름
     * @param {String} fontSizeValue     폰트 크기 값
     * @param {String} textAlignValue     텍스트 가로 정렬 값
     * @param {String} boldValue     폰트 볼드 여부
     * @param {String} fontColorValue     폰트 칼라
     * @param {String} comboboxListValue    콤보박스 리스트에 들어가는 리스트 값
     * @param {Array} userList   서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldAttribute(node,
        idValue, fieldIdValue, requiredValue, ownerIdValue, inputFormatValue, useCurrentDateValue,
        fontFamilyNameValue, fontSizeValue, textAlignValue, boldValue, fontColorValue,
        userList,
        changeEventFunc) {
        var panel = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributePanelNode();

        var requireRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeToggleButtonNode(idValue, "required", "Template.isRequired", requiredValue, changeEventFunc);
        panel.appendChild(requireRow);

        let useDefaulOptionNode = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsListCount() !== 1;
        var ownerSelectRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(idValue, "ownerId", userList, "", useDefaulOptionNode);
        panel.appendChild(ownerSelectRow);

        let ownerSelect = ownerSelectRow.querySelector("select");
        $(ownerSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(ownerSelect).val(ownerIdValue).trigger("change");
        $(ownerSelect).on("change", changeEventFunc);

        var fontAttrRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createTextAttrbuteNode(idValue, fontColorValue, textAlignValue, boldValue, changeEventFunc);
        panel.appendChild(fontAttrRow.row);

        let fontFamilyComboSelect = fontAttrRow.fontFamilyCombo.querySelector("select");
        $(fontFamilyComboSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(fontFamilyComboSelect).val(fontFamilyNameValue).trigger("change");
        $(fontFamilyComboSelect).on("change", changeEventFunc);
        let fontSizeComboSelect = fontAttrRow.fontSizeCombo.querySelector("select");
        $(fontSizeComboSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(fontSizeComboSelect).val(fontSizeValue).trigger("change");
        $(fontSizeComboSelect).on("change", changeEventFunc);

        let colorInput = fontAttrRow.colorBtn.querySelector("button");
        colorInput.style.backgroundColor = fontColorValue;
        let picker = new (_utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default())(colorInput, { color: fontColorValue });
        colorInput.value = fontColorValue;
        picker.on('change', function (r, g, b, a) {
            if (!picker.visible) {
                return;
            }
            colorInput.style.backgroundColor = _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]);
            colorInput.value = _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]);

            let colorTextInput = fontAttrRow.colorBtn.querySelector("input[type='text']");
            colorTextInput.value = (_utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]));
        });
        picker.on('exit', function (r, g, b, a) {
            colorInput.style.backgroundColor = _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]);

            let colorTextInput = fontAttrRow.colorBtn.querySelector("input[type='text']");
            colorTextInput.value = (_utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]));
            colorTextInput.dispatchEvent(new Event("change"));
        });


        var fieldIdValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeInputNode(idValue, "fieldId", "Template.fieldIdText", fieldIdValue, "", "", changeEventFunc);
        panel.appendChild(fieldIdValueRow);

        var inputFormatRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(idValue, "inputFormat", _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.dateFormatComboBox, "Template.dateFormatText", false);
        panel.appendChild(inputFormatRow);

        let inputFormatSelect = inputFormatRow.querySelector("select");
        $(inputFormatSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(inputFormatSelect).val(inputFormatValue).trigger("change");
        $(inputFormatSelect).on("change", changeEventFunc);

        var useCurrentRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeCheckBoxNode(idValue, "useCurrentDate", "Template.useCurrentDateText", useCurrentDateValue, changeEventFunc);
        panel.appendChild(useCurrentRow);

        panel.setAttribute("Field-id-list", idValue);
        node.className = "Editor-Attribute";
        node.classList.add("Text-Field");
        node.appendChild(panel);
       
    }

    /**
     * @function showFieldsAttribute
     * @static
     * @name module:Template/Field.DateField#showFieldsAttribute
     * @description (Static)  필드의 속성 팝업창을 설정한다.
     *
     * @param {HTML} ownerNode  속성 팝업 Node
     * @param {Array} fieldList     필드들의 리스트
     * @param {HTML} attrNode    속성 팝업의 Node
     * @param {String} mainGroup    SVG의 메인 Element
     * @param {Array} userList   서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldsAttribute(ownerNode, fieldList, attrNode, mainGroup, userList, dvOptionList, changeEventFunc) {
        let node = attrNode;
        if (attrNode === null || _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(attrNode)) {
            const bbox = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.mergeFieldsBBox(fieldList);
            node = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttrbutePopup(ownerNode, bbox);
            _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.repositionFieldDeleteBtn(ownerNode, bbox.x, bbox.y, bbox.width);
        }
        _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.removeAllChildNode(node);

        var idValueArr = [];
        fieldList.forEach((field) => {
            idValueArr.push(field.id);
        });

        var idValue = idValueArr.join();

        var ownerIdValue = fieldList[0].ownerId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].ownerId !== ownerIdValue) {
                ownerIdValue = '';
                break;
            }
        }

        var requiredValue = fieldList[0].required;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].required !== requiredValue) {
                requiredValue = '';
                break;
            }
        }

        var idValue = idValueArr.join();
        var fieldIdValue = fieldList[0].fieldId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fieldId !== fieldIdValue) {
                fieldIdValue = '';
                break;
            }
        }

        var fontFamilyNameValue = fieldList[0].fontName;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontName !== fontFamilyNameValue) {
                fontFamilyNameValue = '';
                break;
            }
        }
        var fontSizeValue = fieldList[0].fontSize;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontSize !== fontSizeValue) {
                fontSizeValue = '';
                break;
            }
        }

        var textAlignValue = fieldList[0].textAlign;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].textAlign !== textAlignValue) {
                textAlignValue = '';
                break;
            }
        }

        var boldValue = fieldList[0].isBold;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].isBold !== boldValue) {
                boldValue = '';
                break;
            }
        }
        var fontColorValue = fieldList[0].fontColor;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontColor !== fontColorValue) {
                fontColorValue = '';
                break;
            }
        }
        var inputFormatValue = fieldList[0].inputFormat;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].inputFormat !== inputFormatValue) {
                inputFormatValue = '';
                break;
            }
        }

        var useCurrentDateValue = fieldList[0].useCurrentDate;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].useCurrentDate !== useCurrentDateValue) {
                useCurrentDateValue = '';
                break;
            }
        }

        var fieldIdValue = fieldList[0].fieldId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fieldId !== fieldIdValue) {
                fieldIdValue = '';
                break;
            }
        }

        DateField.showFieldAttribute(node,
            idValue, fieldIdValue, requiredValue, ownerIdValue, inputFormatValue, useCurrentDateValue,
            fontFamilyNameValue, fontSizeValue, textAlignValue, boldValue, fontColorValue,
            userList,
            changeEventFunc);
    }
}


/***/ }),

/***/ "./js/pdf_form/src/Fields/ImageField.js":
/*!**********************************************!*\
  !*** ./js/pdf_form/src/Fields/ImageField.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ImageField: () => (/* binding */ ImageField)
/* harmony export */ });
/* harmony import */ var _BaseField__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BaseField */ "./js/pdf_form/src/Fields/BaseField.js");
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");
/* harmony import */ var _Constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../Constants.js */ "./js/pdf_form/src/Constants.js");

/**
 * @module Template/Field
*/





/**
 * @description 이미지 필드 Class
 *
 *
 * @property {Function} fieldName {@link module:Template/Field.ImageField#fieldName}
 * @property {Function} widthValue {@link module:Template/Field.ImageField#widthValue}
 * @property {Function} heightValue {@link module:Template/Field.ImageField#heightValue}
 * @property {Function} makeSVGText {@link module:Template/Field.ImageField#makeSVGText}
 * @property {Function} getSVGFieldObject {@link module:Template/Field.ImageField#getSVGFieldObject}
 *
 * @augments BaseField {@link module:Template/Field.BaseField#BaseField}
 * @FileName ImageField.js
 * @since 2021.05.31
 */
class ImageField extends _BaseField__WEBPACK_IMPORTED_MODULE_0__.BaseField {
    /**
     * @constructor
     * @param id 필드의 ID
     * @param pageNo 필드가 속한 페이지 번호
     * @param x 필드의 svg상의 x좌표
     * @param y 필드의 svg상의 y좌표
     *
     */
    constructor(id, pageNo, x, y) {
        super(id, pageNo, x, y, ImageField.widthValue(), ImageField.heightValue());
        this.m_type = ImageField.fieldName();

        this.m_kind = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.translateForKey("Template.imageFieldTool");

        if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(id)) {
            return;
        }
        this.m_fieldId = this.m_id.replace(this.m_type, this.m_kind + "-");
    }


    /**
     * @function fieldName
     * @name module:Template/Field.ImageField#fieldName
     * @return {String}
     * @description (Static) 필드 타입의 이름
     * @static
     *
     */
    static fieldName() {
        return "ImageField";
    }

    
    ancestors() {
        return ["IMGF", "BF"];
    }

    /**
     * @function widthValue
     * @name module:Template/Field.ImageField#widthValue
     * @description (Static) 필드의 초기 가로 길이
     * @return {Number}
     * @static
     *
     */
    static widthValue() {
        return 150;
    }
    
    /**
     * @function heightValue
     * @name module:Template/Field.ImageField#heightValue
     * @description (Static)  필드의 초기 세로 길이
     * @return {Number}
     * @static
     *
     */
    static heightValue() {
        return 60;
    }

    /**
     * @function getSVGFieldObject
     * @name module:Template/Field.ImageField#makeSVGText
     * @memberOf module:Template/Field.ImageField
     * @description 필드의 종류를 표현하는 SVG Text element
     *
     * @param {Number} scale 현재 PDF의 Scale
     * @return SVG Node Element
     * @Date : 2021. 5. 31
     */
    makeSVGText(scale) {
        let value = this.m_fieldId;
        var textFontColor = "fill='" + this.fontColor + "' ";

        let textPos = ' x="50%"  dy="0.35em" text-anchor="middle" '
        if (this.textAlign === "left") {
            textPos = ' x="3%"  dy="0.35em" text-anchor="start" ';
        } else if (this.textAlign === "right") {
            textPos = ' x="97%" dy="0.35em" text-anchor="end" ';
        }

        let textVerticalPos = 'y="50%"';

        let fontInfo = ' font-size="' + this.fontSize + 'px" ';
        let textObj = '<text' + textPos + textVerticalPos + fontInfo + textFontColor + '>' + value + '</text>';
        const fobjectSVG = '<svg x="' + this.x + 'px" y="' + this.y + 'px" width="' + this.width * scale +
            'px" height="' + this.height * scale + 'px"><g  >' + textObj + '</g></svg>';

        return fobjectSVG;
    }

    /**
     * @function getSVGFieldObject
     * @name module:Template/Field.ImageField#getSVGFieldObject
     * @memberOf module:Template/Field.ImageField
     * @description 필드의 정보를 가지고 SVG Element를 생성한다.
     *
     * @param {Object} canvas Snap SVG의 Canvas Object
     * @param {Object} mainGroup   SVG의 메인 Node
     * @param {Number} scale  현재 PDF의 Scale
     * @param {HTML} ownerNode    해당 프로젝트의 최상단 Element를 감싸고 있는 Element
     * @param {Callback} removeDragOverGroupFunc     드래그 되어 선택되어진 Field Group을 제거하는 callback function
     * @param {Callback} changeValueEventFunc    속성값이 변할때 호출되는 callback function
     * @param {Callback} changeFreeTransformFunc     FreeTransform을 다시 생성하기 위한 callback function
     * @return SVG Node Element
     * @Date : 2021. 5. 31
     */
    getSVGFieldObject(canvas, mainGroup, scale, ownerNode, removeDragOverGroupFunc, changeValueEventFunc, changeFreeTransformFunc, bgColor="#ffac7f") {
        let group = mainGroup.group();
        group.attr({
            id: this.id + "Group",
            cursor: "move"
        });
        let rect = canvas.rect(this.x, this.y, this.width * scale, this.height * scale);
        rect.attr({
            id: this.id,
            "fill-opacity": "0.6",
            "fill": bgColor
        });
        group.append(rect);
        const p = Snap.parse(this.makeSVGText(scale));
        group.append(p);

        group.hover(
            function () { // f_in
            },
            function () { // f_out
            }
        );

        let _imgField = this;
        let mousePos = { x: 0, y: 0 };
        group.mousedown(function (evt) {
            mousePos.x = evt.pageX;
            mousePos.y = evt.pageY;
            const items = mainGroup.selectAll('g');
            items.forEach(function (element) {
                if (element !== group) {
                    if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(element.freeTransform)) {
                        element.freeTransform.hideResizeHandler();
                    }
                }
            });
            if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(group.freeTransform)) {
                group.freeTransform.showResizeHandler();
            } else {
                changeFreeTransformFunc(group, rect.attr("width"), rect.attr("height"));
            }
        });

        group.mouseup(function (evt) {
            if (group.parent().attr("id") === _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME) {
                if (Math.abs(mousePos.x - evt.pageX) > _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MINIMUM_DRAG_SIZE
                    || Math.abs(mousePos.y - evt.pageY) > _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MINIMUM_DRAG_SIZE) {
                    return;
                }
                removeDragOverGroupFunc.call();
                const items = mainGroup.selectAll('g');
                items.forEach(function (element) {
                    if (element !== group) {
                        if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(element.freeTransform)) {
                            element.freeTransform.hideResizeHandler();
                        }
                    }
                });
                if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(group.freeTransform)) {
                    group.freeTransform.showResizeHandler();
                } else {
                    changeFreeTransformFunc(group, rect.attr("width"), rect.attr("height"));
                }
                _imgField.constructor.showFieldsAttribute(ownerNode, [_imgField], undefined, mainGroup, _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsList(), _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getDVFieldOptsList(), changeValueEventFunc);
            } else {
                _imgField.constructor.showFieldsAttribute(ownerNode, [_imgField], undefined, mainGroup, _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsList(), _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getDVFieldOptsList(), changeValueEventFunc);
            }
        });
        return group;

    }
}


/***/ }),

/***/ "./js/pdf_form/src/Fields/LabelField.js":
/*!**********************************************!*\
  !*** ./js/pdf_form/src/Fields/LabelField.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LabelField: () => (/* binding */ LabelField)
/* harmony export */ });
/* harmony import */ var _TextBaseField__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./TextBaseField */ "./js/pdf_form/src/Fields/TextBaseField.js");
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");
/* harmony import */ var _Constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../Constants.js */ "./js/pdf_form/src/Constants.js");
/* harmony import */ var _utils_color_picker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../utils/color-picker */ "./js/pdf_form/src/utils/color-picker.js");
/* harmony import */ var _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_utils_color_picker__WEBPACK_IMPORTED_MODULE_3__);

/**
 * @module Template/Field
*/






/**
 * @description 레이블 필드 Class
 *
 * @property {Function} fieldName {@link module:Template/Field.LabelField#fieldName}
 * @property {Function} showFieldAttribute {@link module:Template/Field.LabelField#showFieldAttribute}
 * @property {Function} showFieldsAttribute {@link module:Template/Field.LabelField#showFieldsAttribute}
 * @property {Function} makeSVGText {@link module:Template/Field.LabelField#makeSVGText}
 *
 * @augments TextBaseField {@link module:Template/Field.TextBaseField#TextBaseField}
 * @FileName LabelField.js
 * @since 2021.05.31
 */
class LabelField extends _TextBaseField__WEBPACK_IMPORTED_MODULE_0__.TextBaseField {
    /**
     * @constructor
     * @param id 필드의 ID
     * @param pageNo 필드가 속한 페이지 번호
     * @param x 필드의 svg상의 x좌표
     * @param y 필드의 svg상의 y좌표
     *
     */
    constructor(id, pageNo, x, y) {
        super(id, pageNo, x, y, LabelField.widthValue(), LabelField.heightValue());
        this.m_type = LabelField.fieldName();


        this.m_maxValueLength = 100;

        this.m_kind = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.translateForKey("Template.labelFieldTool");
        if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(id)) {
            return;
        }
        this.m_fieldId = this.m_id.replace(this.m_type, this.m_kind + "-");
    }


    /**
     * @function fieldName
     * @name module:Template/Field.LabelField#fieldName
     * @return {String}
     * @description (Static) 필드 타입의 이름
     * @static
     *
     */
    static fieldName() {
        return "LabelField";
    }

    ancestors() {
        return ["LF", "TBF", "BF"];
    }

    /**
     * @function showFieldAttribute
     * @static
     * @name module:Template/Field.LabelField#showFieldAttribute
     * @description (Static) 필드의 속성 팝업창을 설정한다.
     *
     * @param {HTML} node   속성 팝업 Node
     * @param {String} idValue     필드의 id값
     * @param {String} requiredValue     필수여부 값
     * @param {String} ownerIdValue     서명자 아이디
     * @param {String} dvValue     기본값
     * @param {String} fontFamilyNameValue     폰트 이름
     * @param {String} fontSizeValue     폰트 크기 값
     * @param {String} textAlignValue     텍스트 가로 정렬 값
     * @param {String} boldValue     폰트 볼드 여부
     * @param {String} fontColorValue     폰트 칼라
     * @param {String} fieldValue    레이블 텍스트
     * @param {Array} userList   서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldAttribute(node,
        idValue, fieldIdValue, requiredValue, ownerIdValue, dvValue, fontFamilyNameValue, fontSizeValue, textAlignValue, boldValue, fontColorValue, fieldValue,
        userList, dvOptionList,
        changeEventFunc) {

        var panel = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributePanelNode();

        var requireRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeToggleButtonNode(idValue, "required", "Template.isRequired", requiredValue, changeEventFunc);
        panel.appendChild(requireRow);

        let useDefaulOptionNode = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsListCount() !== 1;
        var ownerSelectRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(idValue, "ownerId", userList, "", useDefaulOptionNode);
        panel.appendChild(ownerSelectRow);

        let ownerSelect = ownerSelectRow.querySelector("select");
        jQuery(ownerSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        jQuery(ownerSelect).val(ownerIdValue).trigger("change");
        jQuery(ownerSelect).on("change", changeEventFunc);

        //12-28
        if (dvOptionList && Array.isArray(dvOptionList) && dvOptionList.length > 0) {
            var defaultValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(idValue, "defaultValue", dvOptionList, "Template.defaultValueText", true);
            panel.appendChild(defaultValueRow);

            let defaultValueSelect = defaultValueRow.querySelector("select");
            $(defaultValueSelect).select2({
                minimumResultsForSearch: Infinity,
                width: "100%"
            });
            $(defaultValueSelect).val(dvValue).trigger("change");
            $(defaultValueSelect).on("change", changeEventFunc);
        }

        var fieldIdValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeInputNode(idValue, "fieldId", "Template.fieldIdText", fieldIdValue, "", "", changeEventFunc);
        panel.appendChild(fieldIdValueRow);

        var fieldValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeInputNode(idValue, "value", "Template.labelValueText", fieldValue, "", "", changeEventFunc);
        panel.appendChild(fieldValueRow);

        var fontAttrRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createTextAttrbuteNode(idValue, fontColorValue, textAlignValue, boldValue, changeEventFunc);
        panel.appendChild(fontAttrRow.row);

        let fontFamilyComboSelect = fontAttrRow.fontFamilyCombo.querySelector("select");
        $(fontFamilyComboSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(fontFamilyComboSelect).val(fontFamilyNameValue).trigger("change");
        $(fontFamilyComboSelect).on("change", changeEventFunc);
        let fontSizeComboSelect = fontAttrRow.fontSizeCombo.querySelector("select");
        $(fontSizeComboSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(fontSizeComboSelect).val(fontSizeValue).trigger("change");
        $(fontSizeComboSelect).on("change", changeEventFunc);

        let colorInput = fontAttrRow.colorBtn.querySelector("button");
        colorInput.style.backgroundColor = fontColorValue;
        let picker = new (_utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default())(colorInput, { color: fontColorValue });
        colorInput.value = fontColorValue;
        picker.on('change', function (r, g, b, a) {
            if (!picker.visible) {
                return;
            }
            colorInput.style.backgroundColor = _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]);
            colorInput.value = _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]);

            let colorTextInput = fontAttrRow.colorBtn.querySelector("input[type='text']");
            colorTextInput.value = (_utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]));
        });
        picker.on('exit', function (r, g, b, a) {
            colorInput.style.backgroundColor = _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]);

            let colorTextInput = fontAttrRow.colorBtn.querySelector("input[type='text']");
            colorTextInput.value = (_utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]));
            colorTextInput.dispatchEvent(new Event("change"));
        });

        panel.setAttribute("Field-id-list", idValue);

        node.className = "Editor-Attribute";
        node.classList.add("Text-Field");
        node.appendChild(panel);
    }


    /**
     * @function showFieldsAttribute
     * @static
     * @name module:Template/Field.LabelField#showFieldsAttribute
     * @description 필드의 속성 팝업창을 설정한다.
     *
     * @param {HTML} ownerNode  속성 팝업 Node
     * @param {Array} fieldList     필드들의 리스트
     * @param {HTML} attrNode    속성 팝업의 Node
     * @param {String} mainGroup    SVG의 메인 Element
     * @param {Array} userList   서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldsAttribute(ownerNode, fieldList, attrNode, mainGroup, userList, dvOptionList, changeEventFunc) {
        let node = attrNode;
        if (attrNode === null || _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(attrNode)) {
            const bbox = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.mergeFieldsBBox(fieldList);
            node = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttrbutePopup(ownerNode, bbox);
            _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.repositionFieldDeleteBtn(ownerNode, bbox.x, bbox.y, bbox.width);
        }
        _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.removeAllChildNode(node);

        var idValueArr = [];
        fieldList.forEach((field) => {
            idValueArr.push(field.id);
        });

        var idValue = idValueArr.join();

        var ownerIdValue = fieldList[0].ownerId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].ownerId !== ownerIdValue) {
                ownerIdValue = '';
                break;
            }
        }


        var fieldIdValue = fieldList[0].fieldId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fieldId !== fieldIdValue) {
                fieldIdValue = '';
                break;
            }
        }

        var requiredValue = fieldList[0].required;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].required !== requiredValue) {
                requiredValue = '';
                break;
            }
        }

        var dvValue = fieldList[0].defaultValue;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].defaultValue !== dvValue) {
                dvValue = '';
                break;
            }
        }

        var fontFamilyNameValue = fieldList[0].fontName;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontName !== fontFamilyNameValue) {
                fontFamilyNameValue = '';
                break;
            }
        }
        var fontSizeValue = fieldList[0].fontSize;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontSize !== fontSizeValue) {
                fontSizeValue = '';
                break;
            }
        }

        var textAlignValue = fieldList[0].textAlign;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].textAlign !== textAlignValue) {
                textAlignValue = '';
                break;
            }
        }

        var boldValue = fieldList[0].isBold;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].isBold !== boldValue) {
                boldValue = '';
                break;
            }
        }
        var fontColorValue = fieldList[0].fontColor;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontColor !== fontColorValue) {
                fontColorValue = '';
                break;
            }
        }

        var fieldValue = fieldList[0].value;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].value !== fieldValue) {
                fieldValue = '';
                break;
            }
        }

        LabelField.showFieldAttribute(node,
            idValue, fieldIdValue, requiredValue, ownerIdValue, dvValue, fontFamilyNameValue, fontSizeValue, textAlignValue, boldValue, fontColorValue, fieldValue,
            userList, dvOptionList,
            changeEventFunc);
    }

    validateValue(propertyName, value) {
        return true;
    }


    /**
     * @function getSVGFieldObject
     * @name module:Template/Field.LabelField#makeSVGText
     * @memberOf module:Template/Field.LabelField
     * @description (Static)  필드의 종류를 표현하는 SVG Text element
     *
     * @param {Number} scale 현재 PDF의 Scale
     * @return {Object} SVG Node Element
     * @Date : 2021. 5. 31
     */
    makeSVGText(scale) {
        let value = this.value;
        if (value === '' && this.defaultValueText === '') {
            value = this.m_fieldId;
        } else if (value === '' && this.defaultValueText !== '') {
            value = this.defaultValueText;
        }
        var textFontColor = "fill='" + this.fontColor + "' ";

        let textPos = ' x="50%"  dy="0.35em" text-anchor="middle" '
        if (this.textAlign === "left") {
            textPos = ' x="3%"  dy="0.35em" text-anchor="start" ';
        } else if (this.textAlign === "right") {
            textPos = ' x="97%" dy="0.35em" text-anchor="end" ';
        }

        let textVerticalPos = 'y="50%"';
        if (this.textVeticalAlign === "top") {
            textVerticalPos = 'y="25%"';
        } else if (this.textVeticalAlign === "bottom") {
            textVerticalPos = 'y="70%"';
        }

        let fontWeigth = "";
        if (this.isBold === "true") {
            fontWeigth = " font-weight='bold' ";
        }

        let fontFmaily = " font-family='" + this.fontName + "' ";

        let fontInfo = ' font-size="' + this.fontSize * scale + 'px" ';
        let textObj = '<text' + textPos + textVerticalPos + fontFmaily + fontInfo + textFontColor + fontWeigth + '>' + value + '</text>';
        const fobjectSVG = '<svg x="' + this.x + 'px" y="' + this.y + 'px" width="' + this.width * scale +
            'px" height="' + this.height * scale + 'px"><g  >' + textObj + '</g></svg>';

        return fobjectSVG;
    }
}



/***/ }),

/***/ "./js/pdf_form/src/Fields/MultiLineTextField.js":
/*!******************************************************!*\
  !*** ./js/pdf_form/src/Fields/MultiLineTextField.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MultiLineTextField: () => (/* binding */ MultiLineTextField)
/* harmony export */ });
/* harmony import */ var _TextBaseField__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./TextBaseField */ "./js/pdf_form/src/Fields/TextBaseField.js");
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");

/**
 * @module Template/Field
*/





/**
 * @description 멀티라인 필드 Class
 *
 * @property {Function} fieldName {@link module:Template/Field.MultiLineTextField#fieldName}
 * @property {Function} showFieldAttribute {@link module:Template/Field.MultiLineTextField#showFieldAttribute}
 * @property {Function} showFieldsAttribute {@link module:Template/Field.MultiLineTextField#showFieldsAttribute}
 * @property {Function} makeSVGText {@link module:Template/Field.MultiLineTextField#makeSVGText}
 *
 * @augments TextBaseField {@link module:Template/Field.TextBaseField#TextBaseField}
 * @FileName MultiLineTextField.js
 * @since 2021.05.31
 */
class MultiLineTextField extends _TextBaseField__WEBPACK_IMPORTED_MODULE_0__.TextBaseField {
    /**
     * @constructor
     * @param id 필드의 ID
     * @param pageNo 필드가 속한 페이지 번호
     * @param x 필드의 svg상의 x좌표
     * @param y 필드의 svg상의 y좌표
     *
     */
    constructor(id, pageNo, x, y) {
        super(id, pageNo, x, y, MultiLineTextField.widthValue(), MultiLineTextField.heightValue());
        this.m_type = MultiLineTextField.fieldName();

        this.m_kind = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.translateForKey("Template.multilineFieldTool");
        if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(id)) {
            return;
        }
        this.m_fieldId = this.m_id.replace(this.m_type, this.m_kind + "-");
        this.textVeticalAlign = "top";
    }

    /**
     * @function fieldName
     * @name module:Template/Field.MultiLineTextField#fieldName
     * @return {String}
     * @description (Static) 필드 타입의 이름
     * @static
     *
     */
    static fieldName() {
        return "MultiLineTextField";
    }

    ancestors() {
        return ["MLTF", "TBF", "BF"];
    }

    /**
     * @function widthValue
     * @name module:Template/Field.MultiLineTextField#widthValue
     * @description (Static) 필드의 초기 가로 길이
     * @return {Number}
     * @static
     *
     */
    static widthValue() {
        return 150;
    }

    /**
     * @function heightValue
     * @name module:Template/Field.MultiLineTextField#heightValue
     * @description (Static) 필드의 초기 세로 길이
     * @return {Number}
     * @static
     *
     */
    static heightValue() {
        return 60;
    }

    /**
     * @function showFieldsAttribute
     * @static
     * @name module:Template/Field.MultiLineTextField#showFieldsAttribute
     * @description (Static)  필드의 속성 팝업창을 설정한다.
     *
     * @param {ELEMENT} ownerNode  속성 팝업 Node
     * @param {Array} fieldList     필드들의 리스트
     * @param {HTML} attrNode    속성 팝업의 Node
     * @param {String} mainGroup    SVG의 메인 Element
     * @param {Array} userList   서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldsAttribute(ownerNode, fieldList, attrNode, mainGroup, userList, dvOptionList, changeEventFunc) {
        _TextBaseField__WEBPACK_IMPORTED_MODULE_0__.TextBaseField.showFieldsAttribute(ownerNode, fieldList, attrNode, mainGroup, userList, dvOptionList, changeEventFunc);
    }

    validateValue(propertyName, value) {
        return true;
    }
}


/***/ }),

/***/ "./js/pdf_form/src/Fields/NumberField.js":
/*!***********************************************!*\
  !*** ./js/pdf_form/src/Fields/NumberField.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NumberField: () => (/* binding */ NumberField)
/* harmony export */ });
/* harmony import */ var _TextBaseField__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./TextBaseField */ "./js/pdf_form/src/Fields/TextBaseField.js");
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");
/* harmony import */ var _utils_color_picker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../utils/color-picker */ "./js/pdf_form/src/utils/color-picker.js");
/* harmony import */ var _utils_color_picker__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_utils_color_picker__WEBPACK_IMPORTED_MODULE_2__);

/**
 * @module Template/Field
 */





/**
 * @description 숫자 필드 Class
 *
 * @property {Number} m_inputMax {@link module:Template/Field.NumberField#m_inputMax}
 * @property {Number} m_inputMin {@link module:Template/Field.NumberField#m_inputMin}
 * 
 * @property {Function} fieldName {@link module:Template/Field.NumberField#fieldName}
 * @property {Function} showFieldsAttribute {@link module:Template/Field.NumberField#showFieldsAttribute}
 * 
 * @augments TextBaseField {@link module:Template/Field.TextBaseField#TextBaseField}
 * @FileName NumberField.js
 * @since 2021.05.31
 */
class NumberField extends _TextBaseField__WEBPACK_IMPORTED_MODULE_0__.TextBaseField {
    /**
     * @constructor
     * @param id 필드의 ID
     * @param pageNo 필드가 속한 페이지 번호
     * @param x 필드의 svg상의 x좌표
     * @param y 필드의 svg상의 y좌표
     *
     */
    constructor(id, pageNo, x, y) {
        super(id, pageNo, x, y, NumberField.widthValue(), NumberField.heightValue());
        this.m_type = NumberField.fieldName();
        
        this.m_kind = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.translateForKey("Template.numberFieldTool");

        /**
         * @type {Number}
         * @name module:Template/Field.NumberField#m_inputMax
         * @description 숫자 필드의 최대값
         * @example
         * // getter inputMax()
         * // setter inputMax(val)
         */
        this.m_inputMax = null;

        /**
         * @type {Number}
         * @name module:Template/Field.NumberField#m_inputMin
         * @description 숫자 필드의 최소값
         * @example
         * // getter inputMin()
         * // setter inputMin(val)
         */
        this.m_inputMin = null;

        this.m_useCalc = 'false';

        if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(id)) {
            return;
        }
        this.m_fieldId = this.m_id.replace(this.m_type, this.m_kind + "-");
        
    }

    /**
     * @function fieldName
     * @name module:Template/Field.NumberField#fieldName
     * @return {String}
     * @description (Static) 필드 타입의 이름
     * @static
     *
     */
    static fieldName() {
        return "NumberField";
    }
    
    ancestors() {
        return ["NF", "TBF", "BF"];
    }

    get inputMax() {
        return this.m_inputMax;
    }

    set inputMax(__inputMax) {
        this.m_inputMax = __inputMax;
    }

    get inputMin() {
        return this.m_inputMin;
    }

    set inputMin(__inputMin) {
        this.m_inputMin = __inputMin;
    }

    /**
     * @function showFieldAttribute
     * @static
     * @name module:Template/Field.TextBaseField#showFieldAttribute
     * @description  (Static) 필드의 속성 팝업창을 설정한다.
     *
     * @param {ELEMENT} node  속성 팝업 Node
     * @param {String} idValue     필드의 id값
     * @param {String} requiredValue     필수여부 값
     * @param {String} ownerIdValue     서명자 아이디
     * @param {String} dvValue     기본값
     * @param {Number} minValue     최소값
     * @param {Number} maxValue     최대값
     * @param {String} fontFamilyNameValue     폰트 이름
     * @param {String} fontSizeValue     폰트 크기 값
     * @param {String} textAlignValue     텍스트 가로 정렬 값
     * @param {String} boldValue     폰트 볼드 여부
     * @param {String} fontColorValue     폰트 칼라
     * @param {Array} userList   서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldAttribute(node,
        idValue, fieldIdValue, requiredValue, ownerIdValue, dvValue, minValue, maxValue, useCalcVal, fontFamilyNameValue, fontSizeValue, textAlignValue, boldValue, fontColorValue,
        userList, dvOptionList,
        changeEventFunc) {

        var panel = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributePanelNode();

        var requireRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeToggleButtonNode(idValue, "required", "Template.isRequired", requiredValue, changeEventFunc);
        panel.appendChild(requireRow);

        let useDefaulOptionNode = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsListCount() !== 1;
        var ownerSelectRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(idValue, "ownerId", userList, "", useDefaulOptionNode);
        panel.appendChild(ownerSelectRow);

        let ownerSelect = ownerSelectRow.querySelector("select");
        jQuery(ownerSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        jQuery(ownerSelect).val(ownerIdValue).trigger("change");
        jQuery(ownerSelect).on("change", changeEventFunc);

        //12-28
        if (dvOptionList && Array.isArray(dvOptionList) && dvOptionList.length > 0) {
            var defaultValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(idValue, "defaultValue", dvOptionList, "Template.defaultValueText", true);
            panel.appendChild(defaultValueRow);

            let defaultValueSelect = defaultValueRow.querySelector("select");
            $(defaultValueSelect).select2({
                minimumResultsForSearch: Infinity,
                width: "100%"
            });
            $(defaultValueSelect).val(dvValue).trigger("change");
            $(defaultValueSelect).on("change", changeEventFunc);
        }

        let minVal = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(minValue) ? '' : Number(minValue);
        var minValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeInputNode(idValue, "fieldMinValue", "Template.fieldMinValue", minVal, "number", "", changeEventFunc);
        panel.appendChild(minValueRow);
        let maxVal = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(maxValue) ? '' : Number(maxValue);
        var maxValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeInputNode(idValue, "fieldMaxValue", "Template.fieldMaxValue", maxVal, "number", "", changeEventFunc);
        panel.appendChild(maxValueRow);

        let calcRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeToggleButtonNode(idValue, "useCalc", "Template.useCalc", useCalcVal, changeEventFunc);
        panel.appendChild(calcRow);

        var fieldIdValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeInputNode(idValue, "fieldId", "Template.fieldIdText", fieldIdValue, "", "", changeEventFunc);
        panel.appendChild(fieldIdValueRow);

        var fontAttrRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createTextAttrbuteNode(idValue, fontColorValue, textAlignValue, boldValue, changeEventFunc);
        panel.appendChild(fontAttrRow.row);

        let fontFamilyComboSelect = fontAttrRow.fontFamilyCombo.querySelector("select");
        $(fontFamilyComboSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(fontFamilyComboSelect).val(fontFamilyNameValue).trigger("change");
        $(fontFamilyComboSelect).on("change", changeEventFunc);
        let fontSizeComboSelect = fontAttrRow.fontSizeCombo.querySelector("select");
        $(fontSizeComboSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(fontSizeComboSelect).val(fontSizeValue).trigger("change");
        $(fontSizeComboSelect).on("change", changeEventFunc);

        let colorInput = fontAttrRow.colorBtn.querySelector("button");
        colorInput.style.backgroundColor = fontColorValue;
        let picker = new (_utils_color_picker__WEBPACK_IMPORTED_MODULE_2___default())(colorInput, { color: fontColorValue });
        colorInput.value = fontColorValue;
        picker.on('change', function (r, g, b, a) {
            if (!picker.visible) {
                return;
            }
            colorInput.style.backgroundColor = _utils_color_picker__WEBPACK_IMPORTED_MODULE_2___default().HEX([r, g, b, a]);
            colorInput.value = _utils_color_picker__WEBPACK_IMPORTED_MODULE_2___default().HEX([r, g, b, a]);

            let colorTextInput = fontAttrRow.colorBtn.querySelector("input[type='text']");
            colorTextInput.value = (_utils_color_picker__WEBPACK_IMPORTED_MODULE_2___default().HEX([r, g, b, a]));
        });
        picker.on('exit', function (r, g, b, a) {
            colorInput.style.backgroundColor = _utils_color_picker__WEBPACK_IMPORTED_MODULE_2___default().HEX([r, g, b, a]);

            let colorTextInput = fontAttrRow.colorBtn.querySelector("input[type='text']");
            colorTextInput.value = (_utils_color_picker__WEBPACK_IMPORTED_MODULE_2___default().HEX([r, g, b, a]));
            colorTextInput.dispatchEvent(new Event("change"));
        });

        panel.setAttribute("Field-id-list", idValue);

        node.className = "Editor-Attribute";
        node.classList.add("Text-Field");
        node.appendChild(panel);
    }


     /**
     * @function showFieldsAttribute
     * @static
     * @name module:Template/Field.NumberField#showFieldsAttribute
     * @description (Static) 필드의 속성 팝업창을 설정한다.
     *
     * @param {HTML} ownerNode  속성 팝업 Node
     * @param {Array} fieldList     필드들의 리스트
     * @param {HTML} attrNode    속성 팝업의 Node
     * @param {String} mainGroup    SVG의 메인 Element
     * @param {Array} userList   서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldsAttribute(ownerNode, fieldList, attrNode, mainGroup, userList, dvOptionList, changeEventFunc) {
        let node = attrNode;
        if (attrNode === null || _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(attrNode)) {
            const bbox = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.mergeFieldsBBox(fieldList);
            node = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttrbutePopup(ownerNode, bbox);
            _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.repositionFieldDeleteBtn(ownerNode, bbox.x, bbox.y, bbox.width);
        }
        _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.removeAllChildNode(node);

        var idValueArr = [];
        fieldList.forEach((field) => {
            idValueArr.push(field.id);
        });

        var idValue = idValueArr.join();

        var ownerIdValue = fieldList[0].ownerId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].ownerId !== ownerIdValue) {
                ownerIdValue = '';
                break;
            }
        }

        var requiredValue = fieldList[0].required;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].required !== requiredValue) {
                requiredValue = '';
                break;
            }
        }

        var dvValue = fieldList[0].defaultValue;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].defaultValue !== dvValue) {
                dvValue = '';
                break;
            }
        }

        var fieldIdValue = fieldList[0].fieldId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fieldId !== fieldIdValue) {
                fieldIdValue = '';
                break;
            }
        }

        let minValue = fieldList[0].m_inputMin;
        for (let idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].m_inputMin !== minValue) {
                minValue = '';
                break;
            }
        }
        let maxValue = fieldList[0].m_inputMax;
        for (let idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].m_inputMax !== maxValue) {
                maxValue = '';
                break;
            }
        }

        let useCalcValue = fieldList[0].m_useCalc;
        for (let idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].m_useCalc !== useCalcValue) {
                useCalcValue = '';
                break;
            }
        }

        var fontFamilyNameValue = fieldList[0].fontName;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontName !== fontFamilyNameValue) {
                fontFamilyNameValue = '';
                break;
            }
        }
        var fontSizeValue = fieldList[0].fontSize;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontSize !== fontSizeValue) {
                fontSizeValue = '';
                break;
            }
        }

        var textAlignValue = fieldList[0].textAlign;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].textAlign !== textAlignValue) {
                textAlignValue = '';
                break;
            }
        }

        var boldValue = fieldList[0].isBold;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].isBold !== boldValue) {
                boldValue = '';
                break;
            }
        }
        var fontColorValue = fieldList[0].fontColor;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontColor !== fontColorValue) {
                fontColorValue = '';
                break;
            }
        }

        NumberField.showFieldAttribute(node,
            idValue, fieldIdValue, requiredValue, ownerIdValue, dvValue, minValue, maxValue, useCalcValue, fontFamilyNameValue, fontSizeValue, textAlignValue, boldValue, fontColorValue,
            userList, dvOptionList,
            changeEventFunc);
    }
    /**
     * @function validateValue
     * @static
     * @name module:Template/Field.NumberField#validateValue
     * @description 해당 프로퍼티의 값이 유효한지 체크한다. .
     *
     * @param {String} fieldPropetyName 필드의 속성 이름
     * @param {String} value   필드의 속성 값
     * @return {Boolean}
     * @Date : 2021. 5. 31
     */
    validateValue(fieldPropetyName, value) {
        if (fieldPropetyName === "defaultValue") {
            let isnum = /^\d+$/.test(value);
            if (!isnum) {
                return false;
            }
        }
        return true;
    }
}



/***/ }),

/***/ "./js/pdf_form/src/Fields/RadioField.js":
/*!**********************************************!*\
  !*** ./js/pdf_form/src/Fields/RadioField.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RadioField: () => (/* binding */ RadioField)
/* harmony export */ });
/* harmony import */ var _BaseField__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BaseField */ "./js/pdf_form/src/Fields/BaseField.js");
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");
/* harmony import */ var _Constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../Constants.js */ "./js/pdf_form/src/Constants.js");

/**
 * @module Template/Field
*/





/**
 * @description 라디오 필드 Class
 *
 * @property {String} m_groupName {@link module:Template/Field.RadioField#m_groupName}
 * @property {String} m_defaultValue {@link module:Template/Field.RadioField#m_defaultValue}
 * 
 * @property {Function} fieldName {@link module:Template/Field.RadioField#fieldName}
 * @property {Function} widthValue {@link module:Template/Field.RadioField#widthValue}
 * @property {Function} heightValue {@link module:Template/Field.RadioField#heightValue}
 * @property {Function} getSVGFieldObject {@link module:Template/Field.RadioField#getSVGFieldObject}
 * @property {Function} showFieldAttribute {@link module:Template/Field.RadioField#showFieldAttribute}
 * @property {Function} showFieldsAttribute {@link module:Template/Field.RadioField#showFieldsAttribute}
 *
 * @augments BaseField {@link module:Template/Field.BaseField#BaseField}
 * @FileName RadioField.js
 * @since 2021.05.31
 */
class RadioField extends _BaseField__WEBPACK_IMPORTED_MODULE_0__.BaseField {
    /**
     * @constructor
     * @param id 필드의 ID
     * @param pageNo 필드가 속한 페이지 번호
     * @param x 필드의 svg상의 x좌표
     * @param y 필드의 svg상의 y좌표
     *
     */
    constructor(id, pageNo, x, y) {
        super(id, pageNo, x, y, RadioField.widthValue(), RadioField.heightValue());
        this.m_type = RadioField.fieldName();

        this.m_kind = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.translateForKey("Template.radioFieldTool");

        
        if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(id)) {
            return;
        }

        /**
         * @type {String}
         * @name module:Template/Field.RadioField#m_groupName
         * @description 라디오 그룹 이름
         * @default id가 들어간다.
         * @example
         * // getter groupName()
         * // setter groupName(val)
         */
        this.m_groupName = id;

        /**
         * @type {String}
         * @name module:Template/Field.RadioField#m_defaultValue
         * @description 라디오를 선택했을 때의 값
         * @default id가 들어간다.
         * @example
         * // getter defaultValue()
         * // setter defaultValue(val)
         */
        this.m_defaultValue = id;
        this.m_fieldId = this.m_id.replace(this.m_type, this.m_kind + "-");
        this.m_radioType = _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.RADIO_TYPE_1;
    }

    /**
     * @function fieldName
     * @name module:Template/Field.RadioField#fieldName
     * @return {String}
     * @description (Static) 필드 타입의 이름
     * @static
     *
     */
    static fieldName() {
        return "RadioField";
    }

    ancestors() {
        return [ "RF", "BF"];
    }
    /**
     * @function widthValue
     * @name module:Template/Field.RadioField#widthValue
     * @description (Static) 필드의 초기 가로 길이
     * @return {Number}
     * @static
     *
     */
    static widthValue() {
        return 60;
    }

    /**
     * @function heightValue
     * @name module:Template/Field.RadioField#heightValue
     * @description (Static) 필드의 초기 세로 길이
     * @return {Number}
     * @static
     *
     */
    static heightValue() {
        return 60;
    }

    get groupName() {
        return this.m_groupName;
    }

    set groupName(__groupName) {
        this.m_groupName = __groupName;
    }

    get defaultValue() {
        return this.m_defaultValue;
    }
    set defaultValue(__defaultValue) {
        this.m_defaultValue = __defaultValue;
    }

    get radioType() {
        return this.m_radioType;
    }
    set radioType(__radioType) {
        this.m_radioType = __radioType;
    }

    /**
     * @function getSVGFieldObject
     * @name module:Template/Field.RadioField#getSVGFieldObject
     * @memberOf module:Template.CheckboxField
     * @description  필드의 정보를 가지고 SVG Element를 생성한다.
     *
     * @param {Object} canvas Snap SVG의 Canvas Object
     * @param {Object} mainGroup   SVG의 메인 Node
     * @param {Number} scale  현재 PDF의 Scale
     * @param {ELEMENT} ownerNode   해당 프로젝트의 최상단 Element를 감싸고 있는 Element
     * @param {Callback} removeDragOverGroupFunc     드래그 되어 선택되어진 Field Group을 제거하는 callback function
     * @param {Callback} changeValueEventFunc     속성값이 변할때 호출되는 callback function
     * @param {Callback} changeFreeTransformFunc     FreeTransform을 다시 생성하기 위한 callback function
     * @return {Object} SVG Node Element
     * @Date : 2021. 5. 31
     */
    getSVGFieldObject(canvas, mainGroup, scale, ownerNode, removeDragOverGroupFunc, changeValueEventFunc, changeFreeTransformFunc, bgColor="#ffac7f") {
        let group = mainGroup.group();
        group.attr({
            id: this.id + "Group",
            cursor: "move"
        });
        let rect = canvas.rect(this.x, this.y, this.width * scale, this.height * scale);
        rect.attr({
            id: this.id,
            "fill-opacity": "0.6",
            "fill": bgColor
        });
        group.append(rect);
        const radioPath = this.m_radioType === _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.RADIO_TYPE_1 ? _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.RAIOD_TYPE_1_PATH : _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.RAIOD_TYPE_2_PATH 
        const radioString = '<svg xmlns="http://www.w3.org/2000/svg" x="' + this.x + 'px" y="' + this.y + 'px" width="' + this.width * scale +
            'px" height="' + this.height * scale + 'px"  viewBox="0 0 48 48"> ' + radioPath + ' </svg >'
        const p = Snap.parse(radioString);
        group.append(p);


        group.hover(
            function () { // f_in
            },
            function () { // f_out
            }
        );

        let _radioField = this;
        let mousePos = { x: 0, y: 0 };
        group.mousedown(function (evt) {
            mousePos.x = evt.pageX;
            mousePos.y = evt.pageY;
            const items = mainGroup.selectAll('g');
            items.forEach(function (element) {
                if (element !== group) {
                    if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(element.freeTransform)) {
                        element.freeTransform.hideResizeHandler();
                    }
                }
            });

            if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(group.freeTransform)) {
                group.freeTransform.showResizeHandler();
            } else {
                changeFreeTransformFunc(group, rect.attr("width"), rect.attr("height"));
            }
        });

        group.mouseup(function (evt) {
            if (group.parent().attr("id") === _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME) {
                if (Math.abs(mousePos.x - evt.pageX) > _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MINIMUM_DRAG_SIZE
                    || Math.abs(mousePos.y - evt.pageY) > _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MINIMUM_DRAG_SIZE) {
                    return;
                }
                removeDragOverGroupFunc.call();
                const items = mainGroup.selectAll('g');
                items.forEach(function (element) {
                    if (element !== group) {
                        if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(element.freeTransform)) {
                            element.freeTransform.hideResizeHandler();
                        }
                    }
                });
                if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(group.freeTransform)) {
                    group.freeTransform.showResizeHandler();
                } else {
                    changeFreeTransformFunc(group, rect.attr("width"), rect.attr("height"));
                }
                _radioField.constructor.showFieldsAttribute(ownerNode, [_radioField], undefined, mainGroup, _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsList(), _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getDVFieldOptsList(), changeValueEventFunc);
            } else {
                _radioField.constructor.showFieldsAttribute(ownerNode, [_radioField], undefined, mainGroup, _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsList(), _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getDVFieldOptsList(), changeValueEventFunc);
            }
        });
        return group;

    }

    changeTextElement(fieldGroup, scale) {
        fieldGroup.select("svg").remove();
        
        const radioPath = this.m_radioType === _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.RADIO_TYPE_1 ? _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.RAIOD_TYPE_1_PATH : _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.RAIOD_TYPE_2_PATH 
        const radioString = '<svg xmlns="http://www.w3.org/2000/svg" x="' + this.x + 'px" y="' + this.y + 'px" width="' + this.width * scale +
            'px" height="' + this.height * scale + 'px"  viewBox="0 0 48 48"> ' + radioPath + ' </svg >'
        const p = Snap.parse(radioString);
        fieldGroup.append(p);
    }

    /**
     *
     * @function showFieldAttribute
     * @static
     * @name module:Template/Field.RadioField#showFieldAttribute
     * @description  (Static) 필드의 속성 팝업창을 설정한다.
     *
     * @param {ELEMENT} node  속성 팝업 Node
     * @param {String} idValue     필드의 id값
     * @param {String} requiredValue     필수여부 값
     * @param {String} ownerIdValue     서명자 아이디
     * @param {String} groupNameValue     라디오 그룹 이름.
     * @param {String} dvValue     기본값
     * @param {Array} userList   서명자 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldAttribute(node,
        idValue, fieldIdValue, requiredValue, ownerIdValue, groupNameValue, dvValue, raiodTypeValue,
        userList,
        changeEventFunc) {

        var panel = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributePanelNode();

        var requireRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeToggleButtonNode(idValue, "required", "Template.isRequired", requiredValue, changeEventFunc);
        panel.appendChild(requireRow);

        let useDefaulOptionNode = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsListCount() !== 1;
        var ownerSelectRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(idValue, "ownerId", userList, "", useDefaulOptionNode);
        panel.appendChild(ownerSelectRow);

        let ownerSelect = ownerSelectRow.querySelector("select");
        $(ownerSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(ownerSelect).val(ownerIdValue).trigger("change");
        $(ownerSelect).on("change", changeEventFunc);

        var radioTypeRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(idValue, "radioType", _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.radioTypeList, "", useDefaulOptionNode);
        panel.appendChild(radioTypeRow);

        let radioTypeSelect = radioTypeRow.querySelector("select");
        $(radioTypeSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(radioTypeSelect).val(raiodTypeValue).trigger("change");
        $(radioTypeSelect).on("change", changeEventFunc);

        var groupRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeInputNode(idValue, "groupName", "Template.radioGroupNameText", groupNameValue, "", "", changeEventFunc);
        panel.appendChild(groupRow);

        var dvValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeInputNode(idValue, "defaultValue", "Template.radioValueText", dvValue, "", "", changeEventFunc);
        panel.appendChild(dvValueRow);

        var fieldIdValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeInputNode(idValue, "fieldId", "Template.fieldIdText", fieldIdValue, "", "", changeEventFunc);
        panel.appendChild(fieldIdValueRow);

        panel.setAttribute("Field-id-list", idValue);

        node.className = "Editor-Attribute";
        node.classList.add("Base-Field");
        node.appendChild(panel);
    }


    /**
     * @function showFieldsAttribute
     * @static
     * @name module:Template/Field.RadioField#showFieldsAttribute
     * @description (Static) 필드의 속성 팝업창을 설정한다.
     *
     * @param {ELEMENT} ownerNode  속성 팝업 Node
     * @param {Array} fieldList     필드들의 리스트
     * @param {ELEMENT} attrNode   속성 팝업의 Node
     * @param {String} mainGroup    SVG의 메인 Element
     * @param {Array} userList   서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldsAttribute(ownerNode, fieldList, attrNode, mainGroup, userList, dvOptionList, changeEventFunc) {
        let node = attrNode;
        if (attrNode === null || _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(attrNode)) {
            const bbox = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.mergeFieldsBBox(fieldList);
            node = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttrbutePopup(ownerNode, bbox);
            _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.repositionFieldDeleteBtn(ownerNode, bbox.x, bbox.y, bbox.width);
        }
        _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.removeAllChildNode(node);


        var idValueArr = [];
        fieldList.forEach((field) => {
            idValueArr.push(field.id);
        });
        var idValue = idValueArr.join();

        var ownerIdValue = fieldList[0].ownerId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].ownerId !== ownerIdValue) {
                ownerIdValue = '';
                break;
            }
        }

        var fieldIdValue = fieldList[0].fieldId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fieldId !== fieldIdValue) {
                fieldIdValue = '';
                break;
            }
        }

        var requiredValue = fieldList[0].required;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].required !== requiredValue) {
                requiredValue = '';
                break;
            }
        }

        var groupNameValue = fieldList[0].groupName;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].groupName !== groupNameValue) {
                groupNameValue = '';
                break;
            }
        }

        var dvValue = fieldList[0].defaultValue;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].defaultValue !== dvValue) {
                dvValue = '';
                break;
            }
        }

        var raiodTypeValue = fieldList[0].m_radioType;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].m_radioType !== raiodTypeValue) {
                raiodTypeValue = '';
                break;
            }
        }

        RadioField.showFieldAttribute(node,
            idValue, fieldIdValue, requiredValue, ownerIdValue, groupNameValue, dvValue, raiodTypeValue,
            userList,
            changeEventFunc);
    }
}



/***/ }),

/***/ "./js/pdf_form/src/Fields/SignField.js":
/*!*********************************************!*\
  !*** ./js/pdf_form/src/Fields/SignField.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SignField: () => (/* binding */ SignField)
/* harmony export */ });
/* harmony import */ var _BaseField__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BaseField */ "./js/pdf_form/src/Fields/BaseField.js");
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");
/* harmony import */ var _Constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../Constants.js */ "./js/pdf_form/src/Constants.js");

/**
 * @module Template/Field
*/





/**
 * @description 서명 필드 Class
 *
 * @property {Number} m_signPenThickness {@link module:Template/Field.SignField#m_signPenThickness}
 * @property {String} m_signPenColor {@link module:Template/Field.SignField#m_signPenColor}
 *
 * @property {Function} fieldName {@link module:Template/Field.SignField#fieldName}
 * @property {Function} widthValue {@link module:Template/Field.SignField#widthValue}
 * @property {Function} heightValue {@link module:Template/Field.SignField#heightValue}
 * @property {Function} getSVGFieldObject {@link module:Template/Field.SignField#getSVGFieldObject}
 * @property {Function} makeSVGText {@link module:Template/Field.SignField#makeSVGText}
 * @property {Function} showFieldAttribute {@link module:Template/Field.SignField#showFieldAttribute}
 * @property {Function} showFieldsAttribute {@link module:Template/Field.SignField#showFieldsAttribute}
 *
 * @augments BaseField {@link module:Template.BaseField#BaseField}
 * @FileName SignField.js
 * @since 2021.05.31
 */
class SignField extends _BaseField__WEBPACK_IMPORTED_MODULE_0__.BaseField {
  /**
   * @constructor
   * @param id 필드의 ID
   * @param pageNo 필드가 속한 페이지 번호
   * @param x 필드의 svg상의 x좌표
   * @param y 필드의 svg상의 y좌표
   *
   */
  constructor(id, pageNo, x, y, useDrawSign, useImageSign, useRegSign) {
    super(id, pageNo, x, y, SignField.widthValue(), SignField.heightValue());
    this.m_type = SignField.fieldName();

    this.m_kind = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.translateForKey("Template.signFieldTool");

    /**
     * @type {Number}
     * @name module:Template.RadioField#m_signPenThickness
     * @description 서명펜의 두께
     * @default 1.0
     * @example
     * // getter signPenThickness()
     * // setter signPenThickness(val)
     */
    this.m_signPenThickness = 1;

    /**
     * @type {String}
     * @name module:Template.RadioField#m_signPenColor
     * @description 서명펜의 색상
     * @default #000000
     * @example
     * // getter signPenColor()
     * // setter signPenColor(val)
     */
    this.m_signPenColor = "#000000";
    if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(id)) {
      return;
    }
    this.m_fieldId = this.m_id.replace(this.m_type, this.m_kind + "-");

    SignField.useDrawSignDef = useDrawSign;
    SignField.useImageSignDef = useImageSign;
    SignField.useRegSignDef = useRegSign;


    this.m_useDrawSign = useDrawSign;
    this.m_useImageSign = useImageSign;
    this.m_useRegSign = useRegSign;
    //regSignApi
    this.m_regSignApiUrl = "";
  }

  /**
   * @function fieldName
   * @name module:Template/Field.SignField#fieldName
   * @return {String}
   * @description (Static) 필드 타입의 이름
   * @static
   *
   */
  static fieldName() {
    return "SignField";
  }

  ancestors() {
    return ["SF", "BF"];
  }

  /**
   * @function widthValue
   * @name module:Template/Field.SignField#widthValue
   * @description (Static) 필드의 초기 가로 길이
   * @return {Number}
   * @static
   *
   */
  static widthValue() {
    return 150;
  }

  /**
   * @function heightValue
   * @name module:Template/Field.SignField#heightValue
   * @description (Static) 필드의 초기 세로 길이
   * @return {Number}
   * @static
   *
   */
  static heightValue() {
    return 60;
  }

  get signPenThickness() {
    return this.m_signPenThickness;
  }
  set signPenThickness(__signPenThickness) {
    this.m_signPenThickness = __signPenThickness;
  }

  get signPenColor() {
    return this.m_signPenColor;
  }
  set signPenColor(__signPenColor) {
    this.m_signPenColor = __signPenColor;
  }


  /**
   * @function showFieldAttribute
   * @static
   * @name module:Template/Field.SignField#showFieldAttribute
   * @description (Static)  필드의 속성 팝업창을 설정한다.
   *
   * @param {ELEMENT} node  속성 팝업 Node
   * @param {String} idValue     필드의 id값
   * @param {String} requiredValue     필수여부 값
   * @param {String} ownerIdValue     서명자 아이디
   * @param {String} signPenThicknessValue     사인 팬 두깨
   * @param {Array} userList   서명자 리스트
   * @param {String} useDrawSign     필수여부 값
   * @param {String} useImageSign     필수여부 값
   * @param {String} useRegSign     필수여부 값
   * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
   * @Date : 2021. 5. 31
   */
  static showFieldAttribute(
    node,
    idValue,
    fieldIdValue,
    requiredValue,
    ownerIdValue,
    signPenThicknessValue,
    userList,
    useDrawSignValue,
    useImageSignValue,
    useRegSignValue,
    regSignApiUrlValue,
    changeEventFunc,
    signTabShowOpt
  ) {
    var panel = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributePanelNode();

    var requireRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeToggleButtonNode(
      idValue,
      "required",
      "Template.isRequired",
      requiredValue,
      changeEventFunc
    );
    panel.appendChild(requireRow);

    let useDefaulOptionNode = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsListCount() !== 1;
    var ownerSelectRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(
      idValue,
      "ownerId",
      userList,
      "",
      useDefaulOptionNode
    );
    panel.appendChild(ownerSelectRow);

    let ownerSelect = ownerSelectRow.querySelector("select");
    $(ownerSelect).select2({
      minimumResultsForSearch: Infinity,
      width: "100%",
    });
    $(ownerSelect).val(ownerIdValue).trigger("change");
    $(ownerSelect).on("change", changeEventFunc);

    var penWidthSelectRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(
      idValue,
      "signPenThickness",
      _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getSignPenWidthComboBox(),
      "Template.signPenThicknessText",
      false
    );
    panel.appendChild(penWidthSelectRow);

    let penWidthSelect = penWidthSelectRow.querySelector("select");
    $(penWidthSelect).select2({
      minimumResultsForSearch: Infinity,
      width: "100%",
    });
    $(penWidthSelect).val(signPenThicknessValue).trigger("change");
    $(penWidthSelect).on("change", changeEventFunc);

    var fieldIdValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeInputNode(
      idValue,
      "fieldId",
      "Template.fieldIdText",
      fieldIdValue,
      "",
      "",
      changeEventFunc
    );
    panel.appendChild(fieldIdValueRow);

    /*
        1214 lbw 시작
        */

    
    this.useDrawSignDef = signTabShowOpt.useDrawSign;
    this.useImageSignDef = signTabShowOpt.useImageSign;
    this.useRegSignDef = signTabShowOpt.useRegSign;

    if (this.useDrawSignDef == undefined){
      this.useDrawSignDef = "true";
    }
    if (this.useImageSignDef == undefined) {
      this.useImageSignDef = "true";
    }
    if (this.useRegSignDef == undefined) {
      this.useRegSignDef = "true";
    }
    
    
    //1.펜
    if ("true" == this.useDrawSignDef || useDrawSignValue == "true") {
      var useDrawSignRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeToggleButtonNode(
        idValue,
        "useDrawSign",
        "Template.drawSignText",
        useDrawSignValue,
        changeEventFunc
      );
      panel.appendChild(useDrawSignRow);
    }

    //2. 이미지
    if ("true" == this.useImageSignDef || useImageSignValue == "true") {
      var useImageSignRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeToggleButtonNode(
        idValue,
        "useImageSign",
        "Template.imageSignText",
        useImageSignValue,
        changeEventFunc
      );
      panel.appendChild(useImageSignRow);
    }

    //3. 등록된 이미지
    if ("true" == this.useRegSignDef || useRegSignValue == "true") {
      var useRegSignRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeToggleButtonNode(
        idValue,
        "useRegSign",
        "Template.regSignText",
        useRegSignValue,
        changeEventFunc
      );
      panel.appendChild(useRegSignRow);
    }
    

    /* 1215 제외
    var regSignApiUrlRow = Utils.createAttributeInputNode(
      idValue,
      "regSignApiUrl",
      "Template.regSignApiUrlText",
      regSignApiUrlValue,
      "등록된 이미지 서명탭에 이미지를 불러올 수 있도록 서버의 API URL을 입력합니다.",
      "",
      changeEventFunc
    );
    panel.appendChild(regSignApiUrlRow);
    */
    /*
        1214 lbw 끝
        */

    panel.setAttribute("Field-id-list", idValue);

    node.className = "Editor-Attribute";
    node.classList.add("Sign-Field");
    node.appendChild(panel);
  }

  /**
   * @function showFieldsAttribute
   * @static
   * @name module:Template/Field.SignField#showFieldsAttribute
   * @description (Static) 필드의 속성 팝업창을 설정한다.
   *
   * @param {ELEMENT} ownerNode  속성 팝업 Node
   * @param {Array} fieldList     필드들의 리스트
   * @param {ELEMENT} attrNode    속성 팝업의 Node
   * @param {String} mainGroup    SVG의 메인 Element
   * @param {Array} userList   서명자 리스트
   * @param {Array} dvOptionList   기본값 선택 리스트
   * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
   * @Date : 2021. 5. 31
   */
  static showFieldsAttribute(
    ownerNode,
    fieldList,
    attrNode,
    mainGroup,
    userList,
    dvOptionList,
    changeEventFunc,
    signTabShowOpt
  ) {
    let node = attrNode;
    if (attrNode === null || _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(attrNode)) {
      const bbox = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.mergeFieldsBBox(fieldList);
      node = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttrbutePopup(ownerNode, bbox);
      _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.repositionFieldDeleteBtn(ownerNode, bbox.x, bbox.y, bbox.width);
    }
    _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.removeAllChildNode(node);

    var idValueArr = [];
    fieldList.forEach((field) => {
      idValueArr.push(field.id);
    });
    var idValue = idValueArr.join();

    var ownerIdValue = fieldList[0].ownerId;
    for (var idx = 0; idx < fieldList.length; ++idx) {
      if (fieldList[idx].ownerId !== ownerIdValue) {
        ownerIdValue = "";
        break;
      }
    }

    var fieldIdValue = fieldList[0].fieldId;
    for (var idx = 0; idx < fieldList.length; ++idx) {
      if (fieldList[idx].fieldId !== fieldIdValue) {
        fieldIdValue = "";
        break;
      }
    }

    var requiredValue = fieldList[0].required;
    for (var idx = 0; idx < fieldList.length; ++idx) {
      if (fieldList[idx].required !== requiredValue) {
        requiredValue = "";
        break;
      }
    }

    var signPenThicknessValue = fieldList[0].signPenThickness;
    fieldList.forEach((field) => {
      if (field.signPenThickness !== signPenThicknessValue) {
        signPenThicknessValue = "";
        return;
      }
    });

    let useDrawSignValue = fieldList[0].m_useDrawSign;
    for (let idx = 0; idx < fieldList.length; ++idx) {
      if (fieldList[idx].m_useDrawSign !== useDrawSignValue) {
        useDrawSignValue = "";
        break;
      }
    }

    let useImageSignValue = fieldList[0].m_useImageSign;
    for (let idx = 0; idx < fieldList.length; ++idx) {
      if (fieldList[idx].m_useImageSign !== useImageSignValue) {
        useImageSignValue = "";
        break;
      }
    }

    let useRegSignValue = fieldList[0].m_useRegSign;
    for (let idx = 0; idx < fieldList.length; ++idx) {
      if (fieldList[idx].m_useRegSign !== useRegSignValue) {
        useRegSignValue = "";
        break;
      }
    }

    var regSignApiUrlValue = fieldList[0].m_regSignApiUrl;
    for (var idx = 0; idx < fieldList.length; ++idx) {
      if (fieldList[idx].m_regSignApiUrl !== regSignApiUrlValue) {
        regSignApiUrlValue = "";
        break;
      }
    }

    SignField.showFieldAttribute(
      node,
      idValue,
      fieldIdValue,
      requiredValue,
      ownerIdValue,
      signPenThicknessValue,
      userList,
      useDrawSignValue,
      useImageSignValue,
      useRegSignValue,
      regSignApiUrlValue,
      changeEventFunc,
      signTabShowOpt
    );
  }

  /**
   * @function getSVGFieldObject
   * @name module:Template.ImageField#makeSVGText
   * @memberOf module:Template.ImageField
   * @description 필드의 종류를 표현하는 SVG Text element
   *
   * @param {Number} scale 현재 PDF의 Scale
   * @return {Object} SVG Node Element
   * @Date : 2021. 5. 31
   */
  makeSVGText(scale) {
    let value = this.m_fieldId;
    var textFontColor = "fill='" + this.fontColor + "' ";

    let textPos = ' x="50%"  dy="0.35em" text-anchor="middle" ';
    if (this.textAlign === "left") {
      textPos = ' x="3%"  dy="0.35em" text-anchor="start" ';
    } else if (this.textAlign === "right") {
      textPos = ' x="97%" dy="0.35em" text-anchor="end" ';
    }

    let textVerticalPos = 'y="50%"';

    let fontInfo = ' font-size="' + this.fontSize + 'px" ';
    let textObj =
      "<text" +
      textPos +
      textVerticalPos +
      fontInfo +
      textFontColor +
      ">" +
      value +
      "</text>";
    const fobjectSVG =
      '<svg x="' +
      this.x +
      'px" y="' +
      this.y +
      'px" width="' +
      this.width * scale +
      'px" height="' +
      this.height * scale +
      'px"><g  >' +
      textObj +
      "</g></svg>";

    return fobjectSVG;
  }

  /**
   * @function getSVGFieldObject
   * @name module:Template.RadioField#getSVGFieldObject
   * @memberOf module:Template/Field.SignField
   * @description  필드의 정보를 가지고 SVG Element를 생성한다.
   *
   * @param {Object} canvas Snap SVG의 Canvas Object
   * @param {Object} mainGroup   SVG의 메인 Node
   * @param {Number} scale  현재 PDF의 Scale
   * @param {ELEMENT} ownerNode    해당 프로젝트의 최상단 Element를 감싸고 있는 Element
   * @param {Callback} removeDragOverGroupFunc     드래그 되어 선택되어진 Field Group을 제거하는 callback function
   * @param {Callback} changeValueEventFunc     속성값이 변할때 호출되는 callback function
   * @param {Callback} changeFreeTransformFunc    FreeTransform을 다시 생성하기 위한 callback function
   * @return SVG Node Element
   * @Date : 2021. 5. 31
   */
  getSVGFieldObject(
    canvas,
    mainGroup,
    scale,
    ownerNode,
    removeDragOverGroupFunc,
    changeValueEventFunc,
    changeFreeTransformFunc,
    bgColor="#ffac7f"
  ) {
    let group = mainGroup.group();
    group.attr({
      id: this.id + "Group",
      cursor: "move",
    });
    let rect = canvas.rect(
      this.x,
      this.y,
      this.width * scale,
      this.height * scale
    );
    rect.attr({
      id: this.id,
      "fill-opacity": "0.6",
      fill: bgColor,
    });
    group.append(rect);
    const p = Snap.parse(this.makeSVGText(scale));
    group.append(p);

    group.hover(
      function () {
        // f_in
      },
      function () {
        // f_out
      }
    );

    let _signField = this;
    let mousePos = { x: 0, y: 0 };
    group.mousedown(function (evt) {
      mousePos.x = evt.pageX;
      mousePos.y = evt.pageY;
      const items = mainGroup.selectAll("g");
      items.forEach(function (element) {
        if (element !== group) {
          if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(element.freeTransform)) {
            element.freeTransform.hideResizeHandler();
          }
        }
      });
      if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(group.freeTransform)) {
        group.freeTransform.showResizeHandler();
      } else {
        changeFreeTransformFunc(group, rect.attr("width"), rect.attr("height"));
      }
    });

    group.mouseup(function (evt) {
      if (group.parent().attr("id") === _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME) {
        if (
          Math.abs(mousePos.x - evt.pageX) > _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MINIMUM_DRAG_SIZE ||
          Math.abs(mousePos.y - evt.pageY) > _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MINIMUM_DRAG_SIZE
        ) {
          return;
        }
        removeDragOverGroupFunc.call();
        const items = mainGroup.selectAll("g");
        items.forEach(function (element) {
          if (element !== group) {
            if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(element.freeTransform)) {
              element.freeTransform.hideResizeHandler();
            }
          }
        });
        if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(group.freeTransform)) {
          group.freeTransform.showResizeHandler();
        } else {
          changeFreeTransformFunc(
            group,
            rect.attr("width"),
            rect.attr("height")
          );
        }
        _signField.constructor.showFieldsAttribute(
          ownerNode,
          [_signField],
          undefined,
          mainGroup,
          _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsList(),
          _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getDVFieldOptsList(),
          changeValueEventFunc,
          _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getSignTabShowOpt(),
        );
      } else {
        _signField.constructor.showFieldsAttribute(
          ownerNode,
          [_signField],
          undefined,
          mainGroup,
          _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsList(),
          _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getDVFieldOptsList(),
          changeValueEventFunc,
          _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getSignTabShowOpt(),
        );
      }
    });
    return group;
  }
}


/***/ }),

/***/ "./js/pdf_form/src/Fields/TextBaseField.js":
/*!*************************************************!*\
  !*** ./js/pdf_form/src/Fields/TextBaseField.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TextBaseField: () => (/* binding */ TextBaseField)
/* harmony export */ });
/* harmony import */ var _BaseField__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BaseField */ "./js/pdf_form/src/Fields/BaseField.js");
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");
/* harmony import */ var _Constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../Constants.js */ "./js/pdf_form/src/Constants.js");
/* harmony import */ var _utils_color_picker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../utils/color-picker */ "./js/pdf_form/src/utils/color-picker.js");
/* harmony import */ var _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_utils_color_picker__WEBPACK_IMPORTED_MODULE_3__);

/**
 * @module Template/Field
*/






/**
 * @텍스트 필드의 기본이 되는 Class
 *
 * @property {Function} fieldName {@link module:Template/Field.TextBaseField#fieldName}
 * @property {Function} widthValue {@link module:Template/Field.TextBaseField#widthValue}
 * @property {Function} heightValue {@link module:Template/Field.TextBaseField#heightValue}
 * @property {Function} needTextSvgRefresh {@link module:Template/Field.TextBaseField#needTextSvgRefresh}
 * @property {Function} makeSVGText {@link module:Template/Field.TextBaseField#makeSVGText}
 * @property {Function} getSVGFieldObject {@link module:Template/Field.TextBaseField#getSVGFieldObject}
 * @property {Function} changeTextElement {@link module:Template/Field.TextBaseField#changeTextElement}
 * @property {Function} showFieldAttribute {@link module:Template/Field.TextBaseField#showFieldAttribute}
 * @property {Function} showFieldsAttribute {@link module:Template/Field.TextBaseField#showFieldsAttribute}
 *
 * @augments BaseField {@link module:Template/Field.BaseField#BaseField}
 * @FileName TextBaseField.js
 * @since 2021.05.31
 */
class TextBaseField extends _BaseField__WEBPACK_IMPORTED_MODULE_0__.BaseField {

    /**
     * @constructor
     * @param id 필드의 ID
     * @param pageNo 필드가 속한 페이지 번호
     * @param x 필드의 svg상의 x좌표
     * @param y 필드의 svg상의 y좌표
     * @param width 필드의 가로길이
     * @param height 필드의 세로길이
     *
     */
    constructor(id, pageNo, x, y, width, height) {
        super(id, pageNo, x, y, width, height);
        this.m_type = TextBaseField.fieldName();

        /**
         * @type {String}
         * @name module:Template/Field.TextBaseField#m_placeHolder
         * @description placeHolder
         * @example
         * // getter placeHolder()
         * // setter placeHolder(val)
         */
        this.m_placeHolder = '';

        /**
         * @type {String}
         * @name module:Template/Field.TextBaseField#m_defaultValue
         * @description 텍스트 기본값  ID
         * @example
         * // getter defaultValue()
         * // setter defaultValue(val)
         */
        this.m_defaultValue = "";

        /**
         * @type {String}
         * @name module:Template/Field.TextBaseField#m_defaultValueText
         * @description  텍스트 기본값을 표현하는 텍스트
         * @example
         * // getter defaultValueText()
         * // setter defaultValueText(val)
         */
        this.m_defaultValueText = "";

        /**
         * @type {String}
         * @name module:Template/Field.TextBaseField#m_textAlign
         * @description 텍스트의 가로 정렬값
         * @example
         * // getter textAlign()
         * // setter textAlign(val)
         */
        this.m_textAlign = "left";

        /**
         * @type {String}
         * @name module:Template/Field.TextBaseField#m_textVeticalAlign
         * @description 텍스트의 세로 정렬값
         * @example
         * // getter textVeticalAlign()
         * // setter textVeticalAlign(val)
         */
        this.m_textVeticalAlign = "middle";

        /**
         * @type {String}
         * @name module:Template/Field.TextBaseField#m_bold
         * @description 텍스트의 볼드 여부
         * @example
         * // getter bold()
         * // setter bold(val)
         */
        this.m_bold = "false";
        this.m_kind = "";
    }

    /**
     * @function widthValue
     * @name module:Template/Field.TextBaseField#widthValue
     * @description (Static) 필드의 초기 가로 길이
     * @return {Number}
     * @static
     *
     */
    static widthValue() {
        return 150;
    }

    /**
     * @function heightValue
     * @name module:Template/Field.TextBaseField#heightValue
     * @description (Static) 필드의 초기 세로 길이
     * @return {Number}
     * @static
     *
     */
    static heightValue() {
        return 40;
    }

    /**
     * @function fieldName
     * @name module:Template/Field.TextBaseField#fieldName
     * @return {String}
     * @description (Static)  필드 타입의 이름
     * @static
     *
     */
    static fieldName() {
        return "TextBaseField";
    }

    ancestors() {
        return [ "TBF", "BF"];
    }

    get placeHolder() {
        return this.m_placeHolder;
    }

    set placeHolder(__placeHolder) {
        this.m_placeHolder = __placeHolder;
    }

    get defaultValue() {
        return this.m_defaultValue;
    }
    set defaultValue(__defaultValue) {
        this.m_defaultValue = __defaultValue;
    }

    get defaultValueText() {
        return this.m_defaultValueText;
    }
    set defaultValueText(__defaultValueText) {
        this.m_defaultValueText = __defaultValueText;
    }

    get textAlign() {
        return this.m_textAlign;
    }
    set textAlign(__textAlign) {
        this.m_textAlign = __textAlign;
    }

    get textVeticalAlign() {
        return this.m_textVeticalAlign;
    }
    set textVeticalAlign(__textVeticalAlign) {
        this.m_textVeticalAlign = __textVeticalAlign;
    }

    get isBold() {
        return this.m_bold;
    }
    set isBold(__bold) {
        this.m_bold = __bold;
    }

    /**
     * @function needTextSvgRefresh
     * @static
     * @name module:Template/Field.TextBaseField#needTextSvgRefresh
     * @description  (Static) 해당하는 필드의 속성이 SVG의 텍스트 Node를 변경해야되는지 체크한다.
     *
     * @param { String} fieldPropetyName 필드의 속성값
     * @return {Boolean} 텍스트를 새로 그려야되는 필드의 경우 TRUE를 리턴한다.
     * @Date : 2021. 5. 31
     */
    static needTextSvgRefresh(fieldPropetyName) {
        if (fieldPropetyName === "defaultValue" ||
            fieldPropetyName === "value" ||
            fieldPropetyName === "fieldId" ||
            fieldPropetyName === "placeHolder" ||
            fieldPropetyName === "textAlign" ||
            fieldPropetyName === "bold" ||
            fieldPropetyName === "fontSize" ||
            fieldPropetyName === "fontName" ||
            fieldPropetyName === "radioType" ||
            fieldPropetyName === "fontColor") {
            return true;
        }
        return false;
    }

    /**
     * @function makeSVGText
     * @name module:Template/Field.TextBaseField#makeSVGText
     * @memberOf module:Template/Field.TextBaseField
     * @description 필드의 종류를 표현하는 SVG Text element
     *
     * @param {Number} scale 현재 PDF의 Scale
     * @return {Object} SVG Node Element
     * @Date : 2021. 5. 31
     */
    makeSVGText(scale) {
        let value = this.defaultValueText;
        if (value === '') {
            value = this.m_fieldId;
        }
        var textFontColor = "fill='" + this.fontColor + "' ";
 
        let textPos = ' x="50%"  dy="0.35em" text-anchor="middle" '
        if (this.textAlign === "left") {
            textPos = ' x="3%"  dy="0.35em" text-anchor="start" ';
        } else if (this.textAlign === "right") {
            textPos = ' x="97%" dy="0.35em" text-anchor="end" ';
        }

        let textVerticalPos = 'y="50%"';
        if (this.textVeticalAlign === "top") {
            textVerticalPos = 'y="25%"';
        } else if (this.textVeticalAlign === "bottom") {
            textVerticalPos = 'y="70%"';
        }

        let fontWeigth = "";
        if (this.isBold === "true") {
            fontWeigth = " font-weight='bold' ";
        }

        let fontFmaily = " font-family='" + this.fontName + "' ";
        
        let fontInfo = ' font-size="' + this.fontSize  * scale + 'px" ';
        let textObj = '<text' + textPos + textVerticalPos + fontFmaily + fontInfo + textFontColor + fontWeigth +  '>' + value + '</text>';
        const fobjectSVG = '<svg x="' + this.x + 'px" y="' + this.y + 'px" width="' + this.width * scale +
            'px" height="' + this.height * scale + 'px"><g  >' + textObj + '</g></svg>';

        return fobjectSVG;
    }

    /**
     * @function getSVGFieldObject
     * @name module:Template/Field.TextBaseField#getSVGFieldObject
     * @memberOf module:Template/Field.TextBaseField
     * @description  필드의 정보를 가지고 SVG Element를 생성한다.
     *
     * @param {Object} canvas Snap SVG의 Canvas Object
     * @param {Object} mainGroup   SVG의 메인 Node
     * @param {Number} scale  현재 PDF의 Scale
     * @param {ELEMENT} ownerNode    해당 프로젝트의 최상단 Element를 감싸고 있는 Element
     * @param {Callback} removeDragOverGroupFunc    드래그 되어 선택되어진 Field Group을 제거하는 callback function
     * @param {Callback} changeValueEventFunc     속성값이 변할때 호출되는 callback function
     * @param {Callback} changeFreeTransformFunc     FreeTransform을 다시 생성하기 위한 callback function
     * @return SVG Node Element
     * @Date : 2021. 5. 31
     */
    getSVGFieldObject(canvas, mainGroup, scale, ownerNode, removeDragOverGroupFunc, changeValueEventFunc, changeFreeTransformFunc, bgColor="#ffac7f") {
        let group = mainGroup.group();
        group.attr({
            id: this.id + "Group",
            cursor: "move"
        });

        let rect = canvas.rect(this.x, this.y, this.width * scale, this.height * scale);
        rect.attr({
            id: this.id,
            "fill-opacity": "0.5",
            "fill": bgColor
        });
        group.append(rect);
        const p = Snap.parse(this.makeSVGText(scale));
        group.append(p);

        group.hover(
            function () { // f_in
            },
            function () { // f_out
            }
        );
    
        let _textBaseField = this;
        let mousePos = { x: 0, y: 0 };
        group.mousedown(function (evt) {
            mousePos.x = evt.pageX;
            mousePos.y = evt.pageY;
            const items = mainGroup.selectAll('g');
            items.forEach(function (element) {
                if (element !== group) {
                    if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(element.freeTransform)) {
                        element.freeTransform.hideResizeHandler();
                    }
                }
            });

            if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(group.freeTransform)) {
                group.freeTransform.showResizeHandler();
            } else {
                changeFreeTransformFunc(group, rect.attr("width"), rect.attr("height"));
            }
        });
        
        group.mouseup(function (evt) {
            if (group.parent().attr("id") === _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME) {
                if (Math.abs(mousePos.x - evt.pageX) > _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MINIMUM_DRAG_SIZE
                    || Math.abs(mousePos.y - evt.pageY) > _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MINIMUM_DRAG_SIZE) {
                    return;
                }
                removeDragOverGroupFunc.call();
                const items = mainGroup.selectAll('g');
                items.forEach(function (element) {
                    if (element !== group) {
                        if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(element.freeTransform)) {
                            element.freeTransform.hideResizeHandler();
                        }
                    }
                });
                if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(group.freeTransform)) {
                    group.freeTransform.showResizeHandler();
                } else {
                    changeFreeTransformFunc(group, rect.attr("width"), rect.attr("height"));
                }
                _textBaseField.constructor.showFieldsAttribute(ownerNode, [_textBaseField], undefined, mainGroup, _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsList(), _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getDVFieldOptsList(), changeValueEventFunc);
            } else {
                _textBaseField.constructor.showFieldsAttribute(ownerNode, [_textBaseField], undefined, mainGroup, _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsList(), _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getDVFieldOptsList(), changeValueEventFunc);
            }
        });
        return group;

    }

    /**
     * @function changeTextElement
     * @name module:Template/Field.TextBaseField#changeTextElement
     * @memberOf module:Template/Field.TextBaseField
     * @description   필드를 표현하는 Text Node의 Text를 변경한다.
     *
     * @param {Object} fieldGroup Field의 SVG 노드
     * @param {Number} scale 현재 PDF의 Scale
     * @Date : 2021. 5. 31
     */
    changeTextElement(fieldGroup, scale) {
        fieldGroup.select("svg").remove();
        var newText = this.makeSVGText(scale);
        const p = Snap.parse(newText);
        fieldGroup.append(p);
    }

    /**
     * @function showFieldAttribute
     * @static
     * @name module:Template/Field.TextBaseField#showFieldAttribute
     * @description  (Static) 필드의 속성 팝업창을 설정한다.
     *
     * @param {ELEMENT} node  속성 팝업 Node
     * @param {String} idValue     필드의 id값
     * @param {String} requiredValue     필수여부 값
     * @param {String} ownerIdValue     서명자 아이디
     * @param {String} dvValue     기본값
     * @param {String} fontFamilyNameValue     폰트 이름
     * @param {String} fontSizeValue     폰트 크기 값
     * @param {String} textAlignValue     텍스트 가로 정렬 값
     * @param {String} boldValue     폰트 볼드 여부
     * @param {String} fontColorValue     폰트 칼라
     * @param {Array} userList   서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldAttribute(node,
        idValue, fieldIdValue, requiredValue, ownerIdValue, dvValue, fontFamilyNameValue, fontSizeValue, textAlignValue, boldValue, fontColorValue,
        userList, dvOptionList,
        changeEventFunc) {

        var panel = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributePanelNode();

        var requireRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeToggleButtonNode(idValue, "required", "Template.isRequired", requiredValue, changeEventFunc);
        panel.appendChild(requireRow);

        let useDefaulOptionNode = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsListCount() !== 1;
        var ownerSelectRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(idValue, "ownerId", userList, "", useDefaulOptionNode);
        panel.appendChild(ownerSelectRow);

        let ownerSelect = ownerSelectRow.querySelector("select");
        jQuery(ownerSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        jQuery(ownerSelect).val(ownerIdValue).trigger("change");
        jQuery(ownerSelect).on("change", changeEventFunc);

        //12-28
        if (dvOptionList && Array.isArray(dvOptionList) && dvOptionList.length > 0) {
            var defaultValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(idValue, "defaultValue", dvOptionList, "Template.defaultValueText", true);
            panel.appendChild(defaultValueRow);
    
            let defaultValueSelect = defaultValueRow.querySelector("select");
            $(defaultValueSelect).select2({
                minimumResultsForSearch: Infinity,
                width: "100%"
            });
            $(defaultValueSelect).val(dvValue).trigger("change");
            $(defaultValueSelect).on("change", changeEventFunc);
        }

        var fieldIdValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeInputNode(idValue, "fieldId", "Template.fieldIdText", fieldIdValue, "", "", changeEventFunc);
        panel.appendChild(fieldIdValueRow);

        var fontAttrRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createTextAttrbuteNode(idValue, fontColorValue, textAlignValue, boldValue, changeEventFunc);
        panel.appendChild(fontAttrRow.row);

        let fontFamilyComboSelect = fontAttrRow.fontFamilyCombo.querySelector("select");
        $(fontFamilyComboSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(fontFamilyComboSelect).val(fontFamilyNameValue).trigger("change");
        $(fontFamilyComboSelect).on("change", changeEventFunc);
        let fontSizeComboSelect = fontAttrRow.fontSizeCombo.querySelector("select");
        $(fontSizeComboSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(fontSizeComboSelect).val(fontSizeValue).trigger("change");
        $(fontSizeComboSelect).on("change", changeEventFunc);

        let colorInput = fontAttrRow.colorBtn.querySelector("button");
        colorInput.style.backgroundColor = fontColorValue;
        let picker = new (_utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default())(colorInput, { color: fontColorValue });
        colorInput.value = fontColorValue;
        picker.on('change', function (r, g, b, a) {
            if (!picker.visible) {
                return;
            }
            colorInput.style.backgroundColor = _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]);
            colorInput.value = _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]);

            let colorTextInput = fontAttrRow.colorBtn.querySelector("input[type='text']");
            colorTextInput.value = (_utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]));
        });
        picker.on('exit', function (r, g, b, a) {
            colorInput.style.backgroundColor = _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]);

            let colorTextInput = fontAttrRow.colorBtn.querySelector("input[type='text']");
            colorTextInput.value = (_utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]));
            colorTextInput.dispatchEvent(new Event("change"));
        });

        panel.setAttribute("Field-id-list", idValue);

        node.className = "Editor-Attribute";
        node.classList.add("Text-Field");
        node.appendChild(panel);
    }


    /**
     * @function showFieldsAttribute
     * @static
     * @name module:Template/Field.TextBaseField#showFieldsAttribute
     * @description (Static) 필드의 속성 팝업창을 설정한다.
     *
     * @param {ELEMENT} ownerNode  속성 팝업 Node
     * @param {Array} fieldList     필드들의 리스트
     * @param {ELEMENT} attrNode    속성 팝업의 Node
     * @param {String} mainGroup    SVG의 메인 Element
     * @param {Array} userList   서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldsAttribute(ownerNode, fieldList, attrNode, mainGroup, userList, dvOptionList, changeEventFunc) {
        let node = attrNode;
        if (attrNode === null || _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(attrNode)) {
            const bbox = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.mergeFieldsBBox(fieldList);
            node = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttrbutePopup(ownerNode, bbox);
            _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.repositionFieldDeleteBtn(ownerNode, bbox.x, bbox.y, bbox.width);
        }
        _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.removeAllChildNode(node);

        var idValueArr = [];
        fieldList.forEach((field) => {
            idValueArr.push(field.id);
        });

        var idValue = idValueArr.join();

        var ownerIdValue = fieldList[0].ownerId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].ownerId !== ownerIdValue) {
                ownerIdValue = '';
                break;
            }
        }

        var requiredValue = fieldList[0].required;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].required !== requiredValue) {
                requiredValue = '';
                break;
            }
        }

        var dvValue = fieldList[0].defaultValue;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].defaultValue !== dvValue) {
                dvValue = '';
                break;
            }
        }

        var fieldIdValue = fieldList[0].fieldId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fieldId !== fieldIdValue) {
                fieldIdValue = '';
                break;
            }
        }

        var fontFamilyNameValue = fieldList[0].fontName;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontName !== fontFamilyNameValue) {
                fontFamilyNameValue = '';
                break;
            }
        }
        var fontSizeValue = fieldList[0].fontSize;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontSize !== fontSizeValue) {
                fontSizeValue = '';
                break;
            }
        }

        var textAlignValue = fieldList[0].textAlign;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].textAlign !== textAlignValue) {
                textAlignValue = '';
                break;
            }
        }

        var boldValue = fieldList[0].isBold;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].isBold !== boldValue) {
                boldValue = '';
                break;
            }
        }
        var fontColorValue = fieldList[0].fontColor;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontColor !== fontColorValue) {
                fontColorValue = '';
                break;
            }
        }

        TextBaseField.showFieldAttribute(node,
            idValue, fieldIdValue, requiredValue, ownerIdValue, dvValue, fontFamilyNameValue, fontSizeValue, textAlignValue, boldValue, fontColorValue,
            userList, dvOptionList,
            changeEventFunc);
    }
    
    validateValue(propertyName, value) {
        return true;
    }
}



/***/ }),

/***/ "./js/pdf_form/src/Fields/TextField.js":
/*!*********************************************!*\
  !*** ./js/pdf_form/src/Fields/TextField.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TextField: () => (/* binding */ TextField)
/* harmony export */ });
/* harmony import */ var _TextBaseField__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./TextBaseField */ "./js/pdf_form/src/Fields/TextBaseField.js");
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");

/**
 * @module Template/Field
*/




/**
 * 텍스트 필드 Class
 *
 * @property {Number} m_maxValueLength {@link module:Template/Field.TextField#m_maxValueLength}
 * 
 * @property {Function} fieldName {@link module:Template/Field.TextField#fieldName}
 * @property {Function} showFieldsAttribute {@link module:Template/Field.TextField#showFieldsAttribute}
 * 
 * @augments TextBaseField {@link module:Template/Field.TextBaseField#TextBaseField}
 * @FileName TextField.js
 * @since 2021.05.31
 */
class TextField extends _TextBaseField__WEBPACK_IMPORTED_MODULE_0__.TextBaseField {
    /**
     * @constructor
     * @param id 필드의 ID
     * @param pageNo 필드가 속한 페이지 번호
     * @param x 필드의 svg상의 x좌표
     * @param y 필드의 svg상의 y좌표
     *
     */
    constructor(id, pageNo, x, y) {
        super(id, pageNo, x, y, TextField.widthValue(), TextField.heightValue());
        this.m_type = TextField.fieldName();

        /**
         * @type {Number}
         * @name module:Template.NumberField#m_maxValueLength
         * @description 텍스트 필드 값의 최대길이
         * @example
         * // getter maxValueLength()
         * // setter maxValueLength(val)
         */
        this.m_maxValueLength = 100;
        
        this.m_kind = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.translateForKey("Template.textFieldTool");
        if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(id)) {
            return;
        }
        this.m_fieldId = this.m_id.replace(this.m_type, this.m_kind + "-");
    }

    /**
     * @function fieldName
     * @name module:Template/Field.TextField#fieldName
     * @return {String}
     * @description (Static) 필드 타입의 이름
     * @static
     *
     */
    static fieldName() {
        return "TextField";
    }

    ancestors() {
        return ["TF", "TBF", "BF"];
    }

    get maxValueLength() {
        return this.m_maxValueLength;
    }
    set maxValueLength(__maxValueLength) {
        this.m_maxValueLength = __maxValueLength;
    }

    /**
     * @function showFieldsAttribute
     * @static
     * @name module:Template/Field.TextField#showFieldsAttribute
     * @description (Static) 필드의 속성 팝업창을 설정한다.
     *
     * @param {ELEMENT} ownerNode  속성 팝업 Node
     * @param {Array} fieldList     필드들의 리스트
     * @param {ELEMENT} attrNode    속성 팝업의 Node
     * @param {String} mainGroup    SVG의 메인 Element
     * @param {Array} userList   서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldsAttribute(ownerNode, fieldList, attrNode, mainGroup, userList, dvOptionList, changeEventFunc) {
        _TextBaseField__WEBPACK_IMPORTED_MODULE_0__.TextBaseField.showFieldsAttribute(ownerNode, fieldList, attrNode, mainGroup, userList, dvOptionList, changeEventFunc);
    }
    
    validateValue(propertyName, value) {
        return true;
    }
}



/***/ }),

/***/ "./js/pdf_form/src/Translator/translator.js":
/*!**************************************************!*\
  !*** ./js/pdf_form/src/Translator/translator.js ***!
  \**************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ "./js/pdf_form/src/Translator/utils.js");
/* module decorator */ module = __webpack_require__.hmd(module);


/**
 * simple-translator
 * A small JavaScript library to translate webpages into different languages.
 * https://github.com/andreasremdt/simple-translator
 *
 * Author: Andreas Remdt <me@andreasremdt.com> (https://andreasremdt.com)
 * License: MIT (https://mit-license.org/)
 */
class Translator {
    /**
     * Initialize the Translator by providing options.
     *
     * @param {Object} options
     */
    constructor(options = {}) {
        this.debug = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.logger)(true);

        if (typeof options != 'object' || Array.isArray(options)) {
            this.debug('INVALID_OPTIONS', options);
            options = {};
        }

        this.languages = new Map();
        this.config = Object.assign(Translator.defaultConfig, options);

        const { debug, registerGlobally, detectLanguage } = this.config;

        this.debug = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.logger)(debug);

        if (registerGlobally) {
            this._globalObject[registerGlobally] = this.translateForKey.bind(this);
        }

        if (detectLanguage && this._env == 'browser') {
            this._detectLanguage();
        }
    }

    /**
     * Return the global object, depending on the environment.
     * If the script is executed in a browser, return the window object,
     * otherwise, in Node.js, return the global object.
     *
     * @return {Object}
     */
    get _globalObject() {
        if (this._env == 'browser') {
            return window;
        }

        return __webpack_require__.g;
    }

    /**
     * Check and return the environment in which the script is executed.
     *
     * @return {String} The environment
     */
    get _env() {
        if (typeof window != 'undefined') {
            return 'browser';
        } else if ( true && module.exports) {
            return 'node';
        }

        return 'browser';
    }

    /**
     * Detect the users preferred language. If the language is stored in
     * localStorage due to a previous interaction, use it.
     * If no localStorage entry has been found, use the default browser language.
     */
    _detectLanguage() {
        const inMemory = localStorage.getItem(this.config.persistKey);

        if (inMemory) {
            this.config.defaultLanguage = inMemory;
        } else {
            const lang = navigator.languages
                ? navigator.languages[0]
                : navigator.language;

            this.config.defaultLanguage = lang.substr(0, 2);
        }
    }

    /**
     * Get a translated value from a JSON by providing a key. Additionally,
     * the target language can be specified as the second parameter.
     *
     * @param {String} key
     * @param {String} toLanguage
     * @return {String}
     */
    _getValueFromJSON(key, toLanguage) {
        const json = this.languages.get(toLanguage);

        return key.split('.').reduce((obj, i) => (obj ? obj[i] : null), json);
    }

    /**
     * Replace a given DOM nodes' attribute values (by default innerHTML) with
     * the translated text.
     *
     * @param {HTMLElement} element
     * @param {String} toLanguage
     */
    _replace(element, toLanguage) {
        const keys = element.getAttribute('data-i18n')?.split(/\s/g);
        const attributes = element?.getAttribute('data-i18n-attr')?.split(/\s/g);

        if (attributes && keys.length != attributes.length) {
            this.debug('MISMATCHING_ATTRIBUTES', keys, attributes, element);
        }

        keys.forEach((key, index) => {
            const text = this._getValueFromJSON(key, toLanguage);
            const attr = attributes ? attributes[index] : 'innerHTML';

            if (text) {
                if (attr == 'innerHTML') {
                    element[attr] = text;
                } else {
                    element.setAttribute(attr, text);
                }
            } else {
                this.debug('TRANSLATION_NOT_FOUND', key, toLanguage);
            }
        });
    }

    /**
     * Translate all DOM nodes that match the given selector into the
     * specified target language.
     *
     * @param {String} toLanguage The target language
     */
    translatePageTo(toLanguage = this.config.defaultLanguage) {
        if (this._env == 'node') {
            this.debug('INVALID_ENVIRONMENT');
            return;
        }

        if (typeof toLanguage != 'string') {
            this.debug('INVALID_PARAM_LANGUAGE', toLanguage);
            return;
        }

        if (toLanguage.length == 0) {
            this.debug('EMPTY_PARAM_LANGUAGE');
            return;
        }

        if (!this.languages.has(toLanguage)) {
            this.debug('NO_LANGUAGE_REGISTERED', toLanguage);
            return;
        }

        const elements =
            typeof this.config.selector == 'string'
                ? Array.from(document.querySelectorAll(this.config.selector))
                : this.config.selector;

        if (elements.length && elements.length > 0) {
            elements.forEach((element) => this._replace(element, toLanguage));
        } else if (elements.length == undefined) {
            this._replace(elements, toLanguage);
        }

        this._currentLanguage = toLanguage;
        document.documentElement.lang = toLanguage;

        if (this.config.persist) {
            localStorage.setItem(this.config.persistKey, toLanguage);
        }
    }

    /**
     * Translate a given key into the specified language if it exists
     * in the translation file. If not or if the language hasn't been added yet,
     * the return value is `null`.
     *
     * @param {String} key The key from the language file to translate
     * @param {String} toLanguage The target language
     * @return {(String|null)}
     */
    translateForKey(key, toLanguage = this.config.defaultLanguage) {
        if (typeof key != 'string') {
            this.debug('INVALID_PARAM_KEY', key);
            return null;
        }

        if (!this.languages.has(toLanguage)) {
            this.debug('NO_LANGUAGE_REGISTERED', toLanguage);
            return null;
        }

        const text = this._getValueFromJSON(key, toLanguage);

        if (!text) {
            this.debug('TRANSLATION_NOT_FOUND', key, toLanguage);
            return null;
        }

        return text;
    }

    /**
     * Add a translation resource to the Translator object. The language
     * can then be used to translate single keys or the entire page.
     *
     * @param {String} language The target language to add
     * @param {String} json The language resource file as JSON
     * @return {Object} Translator instance
     */
    add(language, json) {
        if (typeof language != 'string') {
            this.debug('INVALID_PARAM_LANGUAGE', language);
            return this;
        }

        if (language.length == 0) {
            this.debug('EMPTY_PARAM_LANGUAGE');
            return this;
        }

        if (Array.isArray(json) || typeof json != 'object') {
            this.debug('INVALID_PARAM_JSON', json);
            return this;
        }

        if (Object.keys(json).length == 0) {
            this.debug('EMPTY_PARAM_JSON');
            return this;
        }

        this.languages.set(language, json);

        return this;
    }

    /**
     * Remove a translation resource from the Translator object. The language
     * won't be available afterwards.
     *
     * @param {String} language The target language to remove
     * @return {Object} Translator instance
     */
    remove(language) {
        if (typeof language != 'string') {
            this.debug('INVALID_PARAM_LANGUAGE', language);
            return this;
        }

        if (language.length == 0) {
            this.debug('EMPTY_PARAM_LANGUAGE');
            return this;
        }

        this.languages.delete(language);

        return this;
    }

    /**
     * Fetch a translation resource from the web server. It can either fetch
     * a single resource or an array of resources. After all resources are fetched,
     * return a Promise.
     * If the optional, second parameter is set to true, the fetched translations
     * will be added to the Translator object.
     *
     * @param {String|Array} sources The files to fetch
     * @param {Boolean} save Save the translation to the Translator object
     * @return {(Promise|null)}
     */
    fetch(sources, save = true) {
        if (!Array.isArray(sources) && typeof sources != 'string') {
            this.debug('INVALID_PARAMETER_SOURCES', sources);
            return null;
        }

        if (!Array.isArray(sources)) {
            sources = [sources];
        }

        const urls = sources.map((source) => {
            const filename = source.replace(/\.json$/, '').replace(/^\//, '');
            const path = this.config.filesLocation.replace(/\/$/, '');

            return `${path}/${filename}.json`;
        });

        if (this._env == 'browser') {
            return Promise.all(urls.map((url) => fetch(url)))
                .then((responses) =>
                    Promise.all(
                        responses.map((response) => {
                            if (response.ok) {
                                return response.json();
                            }

                            this.debug('FETCH_ERROR', response);
                        })
                    )
                )
                .then((languageFiles) => {
                    // If a file could not be fetched, it will be `undefined` and filtered out.
                    languageFiles = languageFiles.filter((file) => file);

                    if (save) {
                        languageFiles.forEach((file, index) => {
                            this.add(sources[index], file);
                        });
                    }

                    return languageFiles.length > 1 ? languageFiles : languageFiles[0];
                });
        } else if (this._env == 'node') {
            // return new Promise((resolve) => {
            //     const languageFiles = [];

            //     urls.forEach((url, index) => {
            //         try {
            //             const json = JSON.parse(
            //                 require('fs').readFileSync(process.cwd() + url, 'utf-8')
            //             );

            //             if (save) {
            //                 this.add(sources[index], json);
            //             }

            //             languageFiles.push(json);
            //         } catch (err) {
            //             this.debug('MODULE_NOT_FOUND', err.message);
            //         }
            //     });

            //     resolve(languageFiles.length > 1 ? languageFiles : languageFiles[0]);
            // });
        }
    }

    /**
     * Sets the default language of the translator instance.
     *
     * @param {String} language
     * @return {void}
     */
    setDefaultLanguage(language) {
        if (typeof language != 'string') {
            this.debug('INVALID_PARAM_LANGUAGE', language);
            return;
        }

        if (language.length == 0) {
            this.debug('EMPTY_PARAM_LANGUAGE');
            return;
        }

        if (!this.languages.has(language)) {
            this.debug('NO_LANGUAGE_REGISTERED', language);
            return null;
        }

        this.config.defaultLanguage = language;
    }

    /**
     * Return the currently selected language.
     *
     * @return {String}
     */
    get currentLanguage() {
        return this._currentLanguage || this.config.defaultLanguage;
    }

    /**
     * Returns the current default language;
     *
     * @return {String}
     */
    get defaultLanguage() {
        return this.config.defaultLanguage;
    }

    /**
     * Return the default config object whose keys can be overriden
     * by the user's config passed to the constructor.
     *
     * @return {Object}
     */
    static get defaultConfig() {
        return {
            defaultLanguage: 'en',
            detectLanguage: true,
            selector: '[data-i18n]',
            debug: false,
            registerGlobally: '__',
            persist: false,
            persistKey: 'preferred_language',
            filesLocation: '/i18n',
        };
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Translator);

/***/ }),

/***/ "./js/pdf_form/src/Translator/utils.js":
/*!*********************************************!*\
  !*** ./js/pdf_form/src/Translator/utils.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   logger: () => (/* binding */ logger)
/* harmony export */ });
const CONSOLE_MESSAGES = {
    INVALID_PARAM_LANGUAGE: (param) =>
        `Invalid parameter for \`language\` provided. Expected a string, but got ${typeof param}.`,
    INVALID_PARAM_JSON: (param) =>
        `Invalid parameter for \`json\` provided. Expected an object, but got ${typeof param}.`,
    EMPTY_PARAM_LANGUAGE: () =>
        `The parameter for \`language\` can't be an empty string.`,
    EMPTY_PARAM_JSON: () =>
        `The parameter for \`json\` must have at least one key/value pair.`,
    INVALID_PARAM_KEY: (param) =>
        `Invalid parameter for \`key\` provided. Expected a string, but got ${typeof param}.`,
    NO_LANGUAGE_REGISTERED: (language) =>
        `No translation for language "${language}" has been added, yet. Make sure to register that language using the \`.add()\` method first.`,
    TRANSLATION_NOT_FOUND: (key, language) =>
        `No translation found for key "${key}" in language "${language}". Is there a key/value in your translation file?`,
    INVALID_PARAMETER_SOURCES: (param) =>
        `Invalid parameter for \`sources\` provided. Expected either a string or an array, but got ${typeof param}.`,
    FETCH_ERROR: (response) =>
        `Could not fetch "${response.url}": ${response.status} (${response.statusText})`,
    INVALID_ENVIRONMENT: () =>
        `You are trying to execute the method \`translatePageTo()\`, which is only available in the browser. Your environment is most likely Node.js`,
    MODULE_NOT_FOUND: (message) => message,
    MISMATCHING_ATTRIBUTES: (keys, attributes, element) =>
        `The attributes "data-i18n" and "data-i18n-attr" must contain the same number of keys.

Values in \`data-i18n\`:      (${keys.length}) \`${keys.join(' ')}\`
Values in \`data-i18n-attr\`: (${attributes.length}) \`${attributes.join(' ')}\`

The HTML element is:
${element.outerHTML}`,
    INVALID_OPTIONS: (param) =>
        `Invalid config passed to the \`Translator\` constructor. Expected an object, but got ${typeof param}. Using default config instead.`,
};

/**
 *
 * @param {Boolean} isEnabled
 * @return {Function}
 */
function logger(isEnabled) {
    return function log(code, ...args) {
        if (isEnabled) {
            try {
                const message = CONSOLE_MESSAGES[code];
                throw new TypeError(message ? message(...args) : 'Unhandled Error');
            } catch (ex) {
                const line = ex.stack.split(/\n/g)[1];
                const [method, filepath] = line.split(/@/);

                console.error(`${ex.message}

This error happened in the method \`${method}\` from: \`${filepath}\`.

If you don't want to see these error messages, turn off debugging by passing \`{ debug: false }\` to the constructor.

Error code: ${code}

Check out the documentation for more details about the API:
https://github.com/andreasremdt/simple-translator#usage
        `);
            }
        }
    };
}

/***/ }),

/***/ "./js/pdf_form/src/pdf.cursor.tool.js":
/*!********************************************!*\
  !*** ./js/pdf_form/src/pdf.cursor.tool.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PDFCursorTools: () => (/* binding */ PDFCursorTools)
/* harmony export */ });
//import * as GrabToPan from './grab-to-pan.js';

const isNotIEorIsIE10plus = !document.documentMode || document.documentMode > 9;
const chrome2 = window.chrome;
const isChrome15OrOpera15plus = chrome2 && (chrome2.webstore || chrome2.app);
const isSafari6plus = /Apple/.test(navigator.vendor) && /Version\/([6-9]\d*|[1-5]\d+)/.test(navigator.userAgent);

function isLeftMouseReleased(event) {
        if ("buttons" in event && isNotIEorIsIE10plus) {
                return !(event.buttons & 1);
        }

        if (isChrome15OrOpera15plus || isSafari6plus) {
                return event.which === 0;
        }

        return false;
}
                
let matchesSelector;
["webkitM", "mozM", "msM", "oM", "m"].some(function (prefix) {
        let name = prefix + "atches";

        if (name in document.documentElement) {
                matchesSelector = name;
        }

        name += "Selector";

        if (name in document.documentElement) {
                matchesSelector = name;
        }

        return matchesSelector;
});

const CursorTool = {
        SELECT: 0,
        HAND: 1,
        ZOOM: 2
};

class PDFCursorTools {
        constructor({
                container,
                eventBus,
                cursorToolOnLoad = 1
        }) {
                this.container = container;
                this.eventBus = eventBus;
                this.active = 0;
                this.activeBeforePresentationMode = null;
                this.handTool = new GrabToPan({
                        element: this.container
                });

                this._addEventListeners();

                Promise.resolve().then(() => {
                        this.switchTool(cursorToolOnLoad);
                });
        }

        get activeTool() {
                return this.active;
        }

        switchTool(tool) {
                if (this.activeBeforePresentationMode !== null) {
                        return;
                }

                if (tool === this.active) {
                        return;
                }

                const disableActiveTool = () => {
                        switch (this.active) {
                                case CursorTool.SELECT:
                                        break;

                                case CursorTool.HAND:
                                        this.handTool.deactivate();
                                        break;

                                case CursorTool.ZOOM:
                                        break;
                        }
                };

                switch (tool) {
                        case CursorTool.SELECT:
                                disableActiveTool();
                                break;

                        case CursorTool.HAND:
                                disableActiveTool();
                                this.handTool.activate();
                                break;

                        case CursorTool.ZOOM:
                                break;
                        default:
                                console.error(`switchTool: "${tool}" is an unsupported value.`);
                                return;
                }

                this.active = tool;

                this._dispatchEvent();
        }

        _dispatchEvent() {
                this.eventBus.dispatch("cursortoolchanged", {
                        source: this,
                        tool: this.active
                });
        }

        _addEventListeners() {
                this.eventBus._on("switchcursortool", evt => {
                        this.switchTool(evt.tool);
                });

                this.eventBus._on("presentationmodechanged", evt => {
                        if (evt.switchInProgress) {
                                return;
                        }

                        let previouslyActive;

                        if (evt.active) {
                                previouslyActive = this.active;
                                this.switchTool(CursorTool.SELECT);
                                this.activeBeforePresentationMode = previouslyActive;
                        } else {
                                previouslyActive = this.activeBeforePresentationMode;
                                this.activeBeforePresentationMode = null;
                                this.switchTool(previouslyActive);
                        }
                });
        }

}

/***/ }),

/***/ "./js/pdf_form/src/template/templateData.js":
/*!**************************************************!*\
  !*** ./js/pdf_form/src/template/templateData.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TemplateData: () => (/* binding */ TemplateData)
/* harmony export */ });
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");

/**
 * @module Template/Data
 */



/**
 * @description
 * 문서의 이름과 서명자의 정보를 담고 있는 Class <br/>
 * JSON데이터를 추출하기 위해 만들어진 Data Class
 *
 * @property {String} formTemplateName {@link module:Template/Data.TemplateData#formTemplateName}
 * @property {String} formTemplateUUID {@link module:Template/Data.TemplateData#formTemplateUUID}
 * @property {Array} formerList {@link module:Template/Data.TemplateData#formerList}
 *
 * @property {Function} pushOwner {@link module:Template/Data.TemplateData#pushOwner}
 * 
 * @example
 *  아래와 같이 JSON데이터를 만들 때 사용된다.
 *  {
        "formTemplateName": "Form Template 문서 이름",
        "formTemplateUUID": "Form Template 문서 UUID",
        "formerList": [  -- TemplateDataOwner Data Class
            {
                "pages": [  -- TemplateDataPage Data Class
                    {
                        "pageNo": 0,
                        "fields": [
                        ]
                    }
                ]
            }
        ]
    }
 *
 * @FileName TemplateData.js
 * @since 2021.05.31
 */
class TemplateData {

    /**
     * @constructor
     * @param {String} name Template 문서 이름.
     *
     */
    constructor(name, uuid) {

        /**
         * @type {String}
         * @name module:Template/Data.TemplateData#formTemplateName
         * @description  Template 문서 이름.
         */
        this.formTemplateName = name;

        /**
         * @type {String}
         * @name module:Template/Data.TemplateData#formTemplateUUID
         * @description  Template 문서 UUID.
         */
        this.formTemplateUUID = uuid;
        if (uuid === undefined || uuid === null) {
            this.formTemplateUUID = _utils_utils_js__WEBPACK_IMPORTED_MODULE_0__.Utils.generate_uuidv4();
        }

        /**
         * @type {Array}
         * @name module:Template/Data.TemplateData#formerList
         * @description  TemplateDataOwner Array
         */
        this.formerList = [];
    }

    /**
     * @function pushOwner
     * @name module:Template/Data.TemplateData#pushOwner
     * @description TemplateDataOwner를 추가한다.
     *
     * @param {Object} ownerData 추가할 서명자 데이터 TemplateDataOwner
     * @Date : 2021. 5. 31
    */
    pushOwner(ownerData) {
        this.formerList.push(ownerData);
    }
}

/***/ }),

/***/ "./js/pdf_form/src/template/templateDataOwner.js":
/*!*******************************************************!*\
  !*** ./js/pdf_form/src/template/templateDataOwner.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TemplateDataOwner: () => (/* binding */ TemplateDataOwner)
/* harmony export */ });

/**
 * @module Template/Data
 */

/**
 * @description 페이지 정보를 담고 있는 서명자 정보 Class<br/>
 * JSON데이터를 추출하기 위해 만들어진 Data Class
 * 
 *
 * @property {Array} pages {@link module:Template/Data.TemplateDataOwner#pages}
 *
 * @property {Function} pushPage {@link module:Template/Data.TemplateDataOwner#pushPage}
 * @property {Function} cloneTemplateDataOwnerObject {@link module:Template/Data.TemplateDataOwner#cloneTemplateDataOwnerObject}
 * @property {Function} cloneObject {@link module:Template/Data.TemplateDataOwner#cloneObject}
 * 
 * @see module:Template/Data.TemplateData
 * @FileName TemplateDataOwner.js
 * @since 2021.05.31
 */
class TemplateDataOwner {

    /**
     * @constructor
     *
     */
    constructor() {
        /**
         * @type {Array}
         * @name module:Template/Data.TemplateDataOwner#pages
         * @description  TemplateDataPage 클래스 배열
         */
        this.pages = [];
    }

    /**
     * @function pushPage
     * @name module:Template/Data.TemplateDataOwner#pushPage
     * @description TemplateDataPage Object를 추가한다.
     *
     * @param {Object} page  TemplateDataPage Object
     * @Date : 2021. 5. 31
    */
    pushPage(page) {
        this.pages.push(page);
    }

    /**
     * @static
     * @function cloneTemplateDataOwnerObject
     * @name module:Template/Data.TemplateDataOwner#cloneTemplateDataOwnerObject
     * @description (Static) TemplateDataOwner 오브젝트를 복사한다.
     * 
     * @param {Object} obj  복사할 Object
     * @return {Object} TemplateDataOwner Object
     * @Date : 2021. 5. 31
    */
    static cloneTemplateDataOwnerObject(obj) {
        var clone = new TemplateDataOwner();
        for (var key in obj) {
            if (key === "pages" || key === "fields") {
                continue;
            }
            if (typeof obj[key] == "object" && obj[key] != null) {
                clone[key] = TemplateDataOwner.cloneObject(obj[key]);
            } else {
                clone[key] = obj[key];
            }
        }

        return clone;
    }

    /**
     * @static
     * @function cloneObject
     * @name module:Template/Data.TemplateDataOwner#cloneObject
     * @description (Static) 오브젝트를 복사한다.
     *
     * @param {Object} obj  복사할 Object
     * @return {Object}
     * @Date : 2021. 5. 31
    */
    static cloneObject(obj) {
        var clone = {};
        for (var key in obj) {
            if (key === "pages" || key === "fields") {
                continue;
            }
            if (typeof obj[key] == "object" && obj[key] != null) {
                clone[key] = TemplateDataOwner.cloneObject(obj[key]);
            } else {
                clone[key] = obj[key];
            }
        }

        return clone;
    }

}


/***/ }),

/***/ "./js/pdf_form/src/template/templateDataPage.js":
/*!******************************************************!*\
  !*** ./js/pdf_form/src/template/templateDataPage.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TemplateDataPage: () => (/* binding */ TemplateDataPage)
/* harmony export */ });

/**
 * @module Template/Data
 */

/**
 * @description  필드 리스트 정보를 담고 있는 페이지 정보 Class<br/>
 * JSON데이터를 추출하기 위해 만들어진 Data Class
 *
 * @property {Number} pageNo {@link module:Template/Data.TemplateDataPage#pageNo}
 * @property {Array} fields {@link module:Template/Data.TemplateDataPage#fields}
 *
 * @property {Function} pushField {@link module:Template/Data.TemplateDataPage#pushField}
 *
 * @see module:Template/Data.TemplateData
 * @FileName TemplateDataPage.js
 * @since 2021.05.31
 */
class TemplateDataPage {

    /**
     * @constructor
     *
     * @param {Number} pageNo 페이지 번호
     */
    constructor(pageNo) {
        /**
         * @type {Number}
         * @name module: Template/Data.TemplateDataPage#pageNo
         * @description  페이지 번호
         */
        this.pageNo = pageNo;

        /**
         * @type {Array}
         * @name module:Template/Data.TemplateDataPage#fields
         * @description  Field 리스트.
         */
        this.fields = [];
    }

    /**
     * @function pushField
     * @name module:Template/Data.TemplateDataOwner#pushField
     * @description Field Object를 추가한다.
     *
     * @param {Object} field  Field Object
     * @Date : 2021. 5. 31
    */
    pushField(field) {
        this.fields.push(field);
    }
}

/***/ }),

/***/ "./js/pdf_form/src/template/templateUserFieldInfo.js":
/*!***********************************************************!*\
  !*** ./js/pdf_form/src/template/templateUserFieldInfo.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TemplateUserFieldInfo: () => (/* binding */ TemplateUserFieldInfo)
/* harmony export */ });

/**
 * @module Template/Data
 */

/**
 * @description 서명자 정보 Class
 * 
 *
 * @property {Array} fields {@link module:Template/Data.TemplateUserFieldInfo#fields}
 *
 * @property {Function} pushField {@link module:Template/Data.TemplateUserFieldInfo#pushField}
 * @property {Function} field {@link module:Template/Data.TemplateUserFieldInfo#field}
 * @property {Function} removeField {@link module:Template/Data.TemplateUserFieldInfo#removeField}
 * @property {Function} contains {@link module:Template/Data.TemplateUserFieldInfo#contains}
 * 
 * @class
 * @FileName TemplateUserFieldInfo.js
 * @since 2021.05.31
 */
class TemplateUserFieldInfo {

    constructor() {

        /**
         * @type {Array}
         * @name module: Template/Data.TemplateUserFieldInfo#fields
         * @description  Field 리스트.
         */
        this.fields = {};
    }

    /**
     * @function pushField
     * @name module:Template/Data.TemplateUserFieldInfo#pushField
     * @description Field Object를 추가한다.
     *
     * @param {Object} field  Field Object
     * @Date : 2021. 5. 31
    */
    pushField(fieldId, field) {
        this.fields[fieldId] = field;
    }

    /**
     * @function field
     * @name module:Template/Data.TemplateUserFieldInfo#field
     * @description ID에 해당하는 Field Object를 리턴한다.
     *
     * @param {String} fieldId  Field ID
     * @return {Object} Field Object
     * @Date : 2021. 5. 31
    */
    field(fieldId) {
        return this.fields[fieldId];
    }

    /**
     * @function removeField
     * @name module:Template/Data.TemplateUserFieldInfo#removeField
     * @description ID에 해당하는 Field Object를 삭제한다.
     *
     * @param {String} fieldId  Field ID
     * @Date : 2021. 5. 31
    */
    removeField(fieldId) {
        if (this.contains(fieldId)) {
            delete this.fields[fieldId];
        }
    }

    /**
     * @function contains
     * @name module:Template/Data.TemplateUserFieldInfo#contains
     * @description ID에 해당하는 Field Object가 존재하는지 여부를 리턴한다.
     *
     * @param {String} fieldId  Field ID
     * @return {Boolean}} 존재하면 True 아니면 false
     * @Date : 2021. 5. 31
    */
    contains(fieldId) {
        return this.fields.hasOwnProperty(fieldId);
    }
}

/***/ }),

/***/ "./js/pdf_form/src/template/templatemod.js":
/*!*************************************************!*\
  !*** ./js/pdf_form/src/template/templatemod.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TemplateMod: () => (/* binding */ TemplateMod)
/* harmony export */ });
/* harmony import */ var animejs_lib_anime_es_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! animejs/lib/anime.es.js */ "./node_modules/animejs/lib/anime.es.js");
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");
/* harmony import */ var _Constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../Constants.js */ "./js/pdf_form/src/Constants.js");
/* harmony import */ var _Fields_BaseField__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../Fields/BaseField */ "./js/pdf_form/src/Fields/BaseField.js");
/* harmony import */ var _Fields_TextField__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./../Fields/TextField */ "./js/pdf_form/src/Fields/TextField.js");
/* harmony import */ var _Fields_NumberField__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./../Fields/NumberField */ "./js/pdf_form/src/Fields/NumberField.js");
/* harmony import */ var _Fields_DateField__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./../Fields/DateField */ "./js/pdf_form/src/Fields/DateField.js");
/* harmony import */ var _Fields_SignField__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./../Fields/SignField */ "./js/pdf_form/src/Fields/SignField.js");
/* harmony import */ var _Fields_TextBaseField_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./../Fields/TextBaseField.js */ "./js/pdf_form/src/Fields/TextBaseField.js");
/* harmony import */ var _Fields_ImageField_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../Fields/ImageField.js */ "./js/pdf_form/src/Fields/ImageField.js");
/* harmony import */ var _Fields_MultiLineTextField_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../Fields/MultiLineTextField.js */ "./js/pdf_form/src/Fields/MultiLineTextField.js");
/* harmony import */ var _Fields_CheckboxField_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../Fields/CheckboxField.js */ "./js/pdf_form/src/Fields/CheckboxField.js");
/* harmony import */ var _Fields_RadioField_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../Fields/RadioField.js */ "./js/pdf_form/src/Fields/RadioField.js");
/* harmony import */ var _Fields_LabelField_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../Fields/LabelField.js */ "./js/pdf_form/src/Fields/LabelField.js");
/* harmony import */ var _Fields_ComboboxField_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../Fields/ComboboxField.js */ "./js/pdf_form/src/Fields/ComboboxField.js");
/* harmony import */ var _templateData_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./templateData.js */ "./js/pdf_form/src/template/templateData.js");
/* harmony import */ var _templateDataOwner_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./templateDataOwner.js */ "./js/pdf_form/src/template/templateDataOwner.js");
/* harmony import */ var _templateDataPage_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./templateDataPage.js */ "./js/pdf_form/src/template/templateDataPage.js");
/* harmony import */ var _templateUserFieldInfo_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./templateUserFieldInfo.js */ "./js/pdf_form/src/template/templateUserFieldInfo.js");

/**
 * @module Template/TemplateMod
 */

























var _templateMod;

/**
 * @description 필드 관련 처리를 하는 Class
 * 
 * @property {Boolean} dragStart {@link module:Template/TemplateMod.TemplateMod#dragStart}
 * @property {Object} dragBox {@link module:Template/TemplateMod.TemplateMod#dragBox}
 * @property {Object} mainCanvas {@link module:Template/TemplateMod.TemplateMod#mainCanvas}
 * @property {Rect} pageBoundingBox {@link module:Template/TemplateMod.TemplateMod#pageBoundingBox}
 * @property {Object} templateRectMousePosition {@link module:Template/TemplateMod.TemplateMod#templateRectMousePosition}
 * @property {String} selectAddFieldType {@link module:Template/TemplateMod.TemplateMod#selectAddFieldType}
 * @property {Object} fieldDictionary {@link module:Template/TemplateMod.TemplateMod#fieldDictionary}
 * @property {Number} unredoActionIdx {@link module:Template/TemplateMod.TemplateMod#unredoActionIdx}
 * @property {Object} unredoActionDict {@link module:Template/TemplateMod.TemplateMod#unredoActionDict}
 * @property {Object} pdfViewer {@link module:Template/TemplateMod.TemplateMod#pdfViewer}
 * @property {Object} templateUserFieldInfo {@link module:Template/TemplateMod.TemplateMod#templateUserFieldInfo}
 * @property {Object} ownerNode {@link module:Template/TemplateMod.TemplateMod#ownerNode}
 * @property {Boolean} isFieldDragStart {@link module:Template/TemplateMod.TemplateMod#isFieldDragStart}
 * @property {String} menuCode {@link module:Template/TemplateMod.TemplateMod#menuCode}
 *
 * @property {Function} addUndoRedoAct {@link module:Template/TemplateMod.TemplateMod#addUndoRedoAct}
 * @property {Function} buildDVOptsInfo {@link module:Template/TemplateMod.TemplateMod#buildDVOptsInfo}
 * @property {Function} buildFieldformerList {@link module:Template/TemplateMod.TemplateMod#buildFieldformerList}
 * @property {Function} buildFieldUserInfo {@link module:Template/TemplateMod.TemplateMod#buildFieldUserInfo}
 * @property {Function} calcFieldPostion {@link module:Template/TemplateMod.TemplateMod#calcFieldPostion}
 * @property {Function} calcTemplateBoundary {@link module:Template/TemplateMod.TemplateMod#calcTemplateBoundary}
 * @property {Function} changeFieldPosition {@link module:Template/TemplateMod.TemplateMod#changeFieldPosition}
 * @property {Function} changeFieldValueEvent {@link module:Template/TemplateMod.TemplateMod#changeFieldValueEvent}
 * @property {Function} changeFreeTransform {@link module:Template/TemplateMod.TemplateMod#changeFreeTransform}
 * @property {Function} changeGroupBoxFreeTransform {@link module:Template/TemplateMod.TemplateMod#changeGroupBoxFreeTransform}
 * @property {Function} checkTemplateFieldData {@link module:Template/TemplateMod.TemplateMod#checkTemplateFieldData}
 * @property {Function} clearSelectedTool {@link module:Template/TemplateMod.TemplateMod#clearSelectedTool}
 * @property {Function} convertUserListToSelectOptions {@link module:Template/TemplateMod.TemplateMod#convertUserListToSelectOptions}
 * @property {Function} createDragOverGroup {@link module:Template/TemplateMod.TemplateMod#createDragOverGroup}
 * @property {Function} createField {@link module:Template/TemplateMod.TemplateMod#createField}
 * @property {Function} createFieldObject {@link module:Template/TemplateMod.TemplateMod#createFieldObject}
 * @property {Function} createTemplateRect {@link module:Template/TemplateMod.TemplateMod#createTemplateRect}
 * @property {Function} dragendFunc {@link module:Template/TemplateMod.TemplateMod#dragendFunc}
 * @property {Function} dragmoveFunc {@link module:Template/TemplateMod.TemplateMod#dragmoveFunc}
 * @property {Function} dragstartFunc {@link module:Template/TemplateMod.TemplateMod#dragstartFunc}
 * @property {Function} exportFieldData {@link module:Template/TemplateMod.TemplateMod#exportFieldData}
 * @property {Function} fieldDeleteBtnClicked {@link module:Template/TemplateMod.TemplateMod#fieldDeleteBtnClicked}
 * @property {Function} fieldFtEvent {@link module:Template/TemplateMod.TemplateMod#fieldFtEvent}
 * @property {Function} fieldRepositioning {@link module:Template/TemplateMod.TemplateMod#fieldRepositioning}
 * @property {Function} generateFieldId {@link module:Template/TemplateMod.TemplateMod#generateFieldId}
 * @property {Function} getCreateFieldDefaultWidth {@link module:Template/TemplateMod.TemplateMod#getCreateFieldDefaultWidth}
 * @property {Function} getDvTextValue {@link module:Template/TemplateMod.TemplateMod#getDvTextValue}
 * @property {Function} getFieldFromJson {@link module:Template/TemplateMod.TemplateMod#getFieldFromJson}
 * @property {Function} getFieldIdFromGroupNode {@link module:Template/TemplateMod.TemplateMod#getFieldIdFromGroupNode}
 * @property {Function} getFieldJsonData {@link module:Template/TemplateMod.TemplateMod#getFieldJsonData}
 * @property {Function} getFieldSize {@link module:Template/TemplateMod.TemplateMod#getFieldSize}
 * @property {Function} getPageBorderWidth {@link module:Template/TemplateMod.TemplateMod#getPageBorderWidth}
 * @property {Function} getPageBoundingClientRect {@link module:Template/TemplateMod.TemplateMod#getPageBoundingClientRect}
 * @property {Function} getPageElement {@link module:Template/TemplateMod.TemplateMod#getPageElement}
 * @property {Function} getPdfPageFromSvgPos {@link module:Template/TemplateMod.TemplateMod#getPdfPageFromSvgPos}
 * @property {Function} hideAllResizeHandles {@link module:Template/TemplateMod.TemplateMod#hideAllResizeHandles}
 * @property {Function} hideFieldAttribute {@link module:Template/TemplateMod.TemplateMod#hideFieldAttribute}
 * @property {Function} hideTemplateLayer {@link module:Template/TemplateMod.TemplateMod#hideTemplateLayer}
 * @property {Function} importFieldData {@link module:Template/TemplateMod.TemplateMod#importFieldData}
 * @property {Function} keycheck {@link module:Template/TemplateMod.TemplateMod#keycheck}
 * @property {Function} redoAction {@link module:Template/TemplateMod.TemplateMod#redoAction}
 * @property {Function} refreshformerList {@link module:Template/TemplateMod.TemplateMod#refreshformerList}
 * @property {Function} removeDragGroupField {@link module:Template/TemplateMod.TemplateMod#removeDragGroupField}
 * @property {Function} removeDragOverGroup {@link module:Template/TemplateMod.TemplateMod#removeDragOverGroup}
 * @property {Function} removeField {@link module:Template/TemplateMod.TemplateMod#removeField}
 * @property {Function} removeSelectedField {@link module:Template/TemplateMod.TemplateMod#removeSelectedField}
 * @property {Function} removeTemplateRect {@link module:Template/TemplateMod.TemplateMod#removeTemplateRect}
 * @property {Function} replaceFieldData {@link module:Template/TemplateMod.TemplateMod#replaceFieldData}
 * @property {Function} replaceFieldStringData {@link module:Template/TemplateMod.TemplateMod#replaceFieldStringData}
 * @property {Function} resetTool {@link module:Template/TemplateMod.TemplateMod#resetTool}
 * @property {Function} selectTool {@link module:Template/TemplateMod.TemplateMod#selectTool}
 * @property {Function} selectUserList {@link module:Template/TemplateMod.TemplateMod#selectUserList}
 * @property {Function} showAsteriskDiv {@link module:Template/TemplateMod.TemplateMod#showAsteriskDiv}
 * @property {Function} showFieldAttribute {@link module:Template/TemplateMod.TemplateMod#showFieldAttribute}
 * @property {Function} showFieldListAttribute {@link module:Template/TemplateMod.TemplateMod#showFieldListAttribute}
 * @property {Function} sortFieldsAlign {@link module:Template/TemplateMod.TemplateMod#sortFieldsAlign}
 * @property {Function} sortFieldsBottomAlign {@link module:Template/TemplateMod.TemplateMod#sortFieldsBottomAlign}
 * @property {Function} sortFieldsHCenterAlign {@link module:Template/TemplateMod.TemplateMod#sortFieldsHCenterAlign}
 * @property {Function} sortFieldsHRegularIntervalAlign {@link module:Template/TemplateMod.TemplateMod#sortFieldsHRegularIntervalAlign}
 * @property {Function} sortFieldsLeftAlign {@link module:Template/TemplateMod.TemplateMod#sortFieldsLeftAlign}
 * @property {Function} sortFieldsRightAlign {@link module:Template/TemplateMod.TemplateMod#sortFieldsRightAlign}
 * @property {Function} sortFieldsTopAlign {@link module:Template/TemplateMod.TemplateMod#sortFieldsTopAlign}
 * @property {Function} sortFieldsVCenterAlign {@link module:Template/TemplateMod.TemplateMod#sortFieldsVCenterAlign}
 * @property {Function} sortFieldsVRegularIntervalAlign {@link module:Template/TemplateMod.TemplateMod#sortFieldsVRegularIntervalAlign}
 * @property {Function} templateInit {@link module:Template/TemplateMod.TemplateMod#templateInit}
 * @property {Function} templateMouseMoveEvent {@link module:Template/TemplateMod.TemplateMod#templateMouseMoveEvent}
 * @property {Function} templateMouseUpEvent {@link module:Template/TemplateMod.TemplateMod#templateMouseUpEvent}
 * @property {Function} templateResize {@link module:Template/TemplateMod.TemplateMod#templateResize}
 * @property {Function} tmpGroupFtEvent {@link module:Template/TemplateMod.TemplateMod#tmpGroupFtEvent}
 * @property {Function} undoAction {@link module:Template/TemplateMod.TemplateMod#undoAction}
 * @property {Function} updateFieldPoint {@link module:Template/TemplateMod.TemplateMod#updateFieldPoint}
 * @property {Function} appendFontFamily {@link module:Template/TemplateMod.TemplateMod#appendFontFamily}
 * @property {Function} appendSignTabShowOpt {@link module:Template/TemplateMod.TemplateMod#appendSignTabShowOpt}
 * 
 * @FileName TemplateMod.js
 * @since 2021.05.31
 */
class TemplateMod {
  /**
   * @type {Boolean}
   * @name module:Template/TemplateMod.TemplateMod#dragStart
   * @description  SVG화면에서 드래그가 시작되었는지 여부
   */
  dragStart = false;

  /**
   * @type {Object}
   * @name module:Template/TemplateMod.TemplateMod#dragBox
   * @description  SVG에서 드래그된 것을 표현하는 Rect Node
   */
  dragBox = undefined;

  /**
   * @type {Object}
   * @name module:Template/TemplateMod.TemplateMod#mainCanvas
   * @description  Snap Instance
   */
  mainCanvas;

  /**
   * @type {Rect}
   * @name module:Template/TemplateMod.TemplateMod#pageBoundingBox
   * @description  필드들이 움직일 수 있는 경계
   */
  pageBoundingBox = { x: 0, y: 0, width: 0, height: 0 };

  /**
   * @type {Object}
   * @name module:Template/TemplateMod.TemplateMod#templateRectMousePosition
   * @description 필드를 생성하여 움직 일때 현재 마우스 위치와 기존 마우스 위치를 가지고 있는 변수
   */
  templateRectMousePosition;

  /**
   * @type {String}
   * @name module:Template/TemplateMod.TemplateMod#selectAddFieldType
   * @description 필드를 만들기 위해 선택된 필드의 종류
   */
  selectAddFieldType = "";

  /**
   * @type {Object}
   * @name module:Template/TemplateMod.TemplateMod#fieldDictionary
   * @description 필드들의 정보를 가지고 있는 Dictionary
   */
  fieldDictionary = {};

  /**
   * @type {Number}
   * @name module:Template/TemplateMod.TemplateMod#unredoActionIdx
   * @description 현재 Undo Redo Index
   */
  unredoActionIdx = -1;

  /**
   * @type {Object}
   * @name module:Template/TemplateMod.TemplateMod#unredoActionDict
   * @description Undo Redo의 Action을 가지고 있는 Dictionary
   */
  unredoActionDict = {};

  /**
   * @type {PDFViewer}
   * @name module:Template/TemplateMod.TemplateMod#pdfViewer
   * @description PDF.js 뷰어 오브젝트
   */
  pdfViewer;

  /**
   * @type {Object}
   * @name module:Template/TemplateMod.TemplateMod#templateUserFieldInfo
   * @description 서명자의 정보를 가지고 있는 Dictionary
   */
  templateUserFieldInfo = {};

  /**
   * @type {Element}
   * @name module:Template/TemplateMod.TemplateMod#ownerNode
   * @description 이 프로젝트가 포함될 Element의 부모 HTML ELEMENT
   */
  ownerNode = null;

  /**
   * @type {Boolean}
   * @name module:Template/TemplateMod.TemplateMod#isFieldDragStart
   * @description 현재 필드가 드래그 되고 있는지 여부.
   */
  isFieldDragStart = false;

  /**
   * @type {String}
   * @name module:Template/TemplateMod.TemplateMod#menuCode
   * @description smartsuit에서의 menucode
   */
  menuCode = "";

  templateClipBoard = "";

  useDrawSign = "true";
  useImageSign = "true";
  useRegSign = "true";

  /**
   * @constructor
   * @param {Object} _pdfViewer PDF Viewer Object
   * @param {Element} ownerNode 이 프로젝트가 포함될 Element의 부모 HTML ELEMENT
   *
   */
  constructor(_pdfViewer, ownerNode = null, signTabShowDefOptVal) {
    this.pdfViewer = _pdfViewer;
    _templateMod = this;
    _templateMod.appendSignTabShowOpt(signTabShowDefOptVal);
    this.ownerNode = ownerNode;
  }

  /**
   * @function addUndoRedoAct
   * @name module:Template/TemplateMod.TemplateMod#addUndoRedoAct
   * @description undo redo 처리를 위한 데이터를 추가.
   *
   * @param {String} type   action 종류
   * @param {Object} oldData     이전에 있던 데이터
   * @param {Object} newData     새로운 데이터
   * @Date : 2021. 5. 31
   */
  addUndoRedoAct(type, oldData, newData) {
    if (
      type !== _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.CREATE_FIELD_ACTION &&
      type !== _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.REMOVE_FIELD_ACTION &&
      oldData === newData
    ) {
      return;
    }
    _templateMod.unredoActionDict[++_templateMod.unredoActionIdx] = {
      action: type,
      old: oldData,
      new: newData,
    };
    _templateMod.unredoActionDict[_templateMod.unredoActionIdx + 1] = undefined;
  }

  /**
   * @function buildDVOptsInfo
   * @name module:Template/TemplateMod.TemplateMod#buildDVOptsInfo
   * @description Default Value 리스트 정보를 설정 .
   *
   * @param {Array} dvOptions   Default Value 리스트
   * @Date : 2021. 5. 31
   */
  buildDVOptsInfo(dvOptions) {
    var dvOptionList = [];
    for (var idx = 0; idx < dvOptions.length; ++idx) {
      dvOptionList.push({
        text: dvOptions[idx].displayText,
        value: dvOptions[idx].variable,
      });
    }
    _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.setDVFieldOptsList(dvOptionList);
  }

    /**
   * @function buildSignTabShowOpt
   * @name module:Template/TemplateMod.TemplateMod#buildSignTabShowOpt
   * @description Default Value 리스트 정보를 설정 .
   *
   * @param {Object} Options   Default Value 리스트
   * @Date : 2023. 12. 27
   */
    buildSignTabShowOpt(Options) {
      //var OptionList = {};
      
      _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.setSignTabShowOpt(Options);
    }

  /**
   * @function buildFieldUserInfo
   * @name module:Template/TemplateMod.TemplateMod#buildFieldUserInfo
   * @description 서명할 사람들 리스트 정보를 설정 .
   *
   * @param {Array} dvOptions   서명할 사람들 정보 리스트
   * @Date : 2021. 5. 31
   */
  buildFieldUserInfo(userList) {
    for (var idx = 0; idx < userList.length; ++idx) {
      let fieldUserInfo = Object.assign(
        new _templateUserFieldInfo_js__WEBPACK_IMPORTED_MODULE_18__.TemplateUserFieldInfo(),
        userList[idx]
      );
      _templateMod.templateUserFieldInfo[fieldUserInfo.userUUID] =
        fieldUserInfo;
    }
    _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.setUserInfoOptsList(
      _templateMod.convertUserListToSelectOptions(
        _templateMod.templateUserFieldInfo
      )
    );
    _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.setUserInfoOptsListCount(
      Object.keys(_templateMod.templateUserFieldInfo).length
    );
  }

  /**
   * @function buildFieldformerList
   * @name module:Template/TemplateMod.TemplateMod#buildFieldformerList
   * @description 사이드 패널에 있는 서명자 정보를 갱신 .
   *
   * @Date : 2021. 5. 31
   */
  buildFieldformerList() {
    const ownerDom = _templateMod.ownerNode.querySelector(
      " #Editor-User-Component_Box"
    );
    _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.removeAllChildNode(ownerDom);
    const keys = Object.keys(_templateMod.templateUserFieldInfo);
    keys.forEach(function (key) {
      const userFieldInfo = _templateMod.templateUserFieldInfo[key];
      if (userFieldInfo.isFormer === "Y") {
        return;
      }
      let fieldListDom = document.createElement("div");
      fieldListDom.setAttribute("data-user-key", key);
      fieldListDom.classList.add("User-Component-List-Conatiner");
      const fieldKeys = Object.keys(userFieldInfo.fields);
      if (fieldKeys.length === 0) {
        fieldListDom.classList.add("No-Child");
      }
      let listDom = document.createElement("ul");
      listDom.className = "User-Component-List";
      let listItemDom = document.createElement("li");
      let listItemSpanDom = document.createElement("span");
      listItemSpanDom.textContent = userFieldInfo.displayUserName;
      listItemDom.appendChild(listItemSpanDom);
      listDom.appendChild(listItemDom);
      fieldKeys.forEach(function (fieldKey) {
        const userField = userFieldInfo.field(fieldKey);
        if (userField.isRemoved) {
          return;
        }
        let listItemDom2 = document.createElement("li");
        let listItemSpanDom2 = document.createElement("span");
        let prefix =
          userField.required === "true"
            ? "[" + _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.translateForKey("Template.requireText") + "]"
            : "[" + _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.translateForKey("Template.selectText") + "]";
        if (userField.type === "SignField") {
          listItemSpanDom2.textContent =
            "[" + _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.translateForKey("Template.signText") + "]";
        }
        listItemSpanDom2.textContent = prefix + userField.fieldId;

        listItemDom2.appendChild(listItemSpanDom2);
        listDom.appendChild(listItemDom2);
      });
      fieldListDom.appendChild(listDom);
      ownerDom.appendChild(fieldListDom);
    });
  }

  /**
   * @function calcFieldPostion
   * @name module:Template/TemplateMod.TemplateMod#calcFieldPostion
   * @description Field의 위치(HTML에서)를 계산한다.
   *
   * @param {Object} field   BaseField를 상속받은 Object
   * @param {Boolean} isImport
   * Field를 Import중일 경우에 필드 위치를 계산할 때 Page Element의 보더도 함께 계산한다.
   * @return {Object} Rect  { x: , y: , width: , height:  }
   * @Date : 2021. 5. 31
   */
  calcFieldPostion(field, isImport = false) {
    var viewBBox = _templateMod.ownerNode
      .querySelector(" #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_PDF_VIEWER)
      .getBoundingClientRect();
    const fieldPageNo = field.pageNo;
    const viewport = _templateMod.pdfViewer._pages[fieldPageNo - 1].viewport;
    var viewportXY = viewport.convertToViewportPoint(field.pdfX, field.pdfY);
    var viewportXY2 = viewport.convertToViewportPoint(field.pdfX2, field.pdfY2);

    var pageOffSet = _templateMod.computePageOffset(fieldPageNo);

    var newX = viewportXY[0] + pageOffSet.left - viewBBox.left;
    var newY = viewportXY[1] + pageOffSet.top - viewBBox.top;
    var newX2 = viewportXY2[0] + pageOffSet.left - viewBBox.left;
    var newY2 = viewportXY2[1] + pageOffSet.top - viewBBox.top;

    if (isImport) {
      var pageBorderWidth = _templateMod.getPageBorderWidth(fieldPageNo);
      newX = newX + pageBorderWidth.left;
      newY = newY + pageBorderWidth.top;
      newX2 = newX2 + pageBorderWidth.left;
      newY2 = newY2 + pageBorderWidth.top;
    }

    var newW = Math.abs(newX2 - newX);
    var newH = Math.abs(newY2 - newY);

    field.x = newX;
    field.y = newY;
    field.width = newW;
    field.height = newH;
    return { x: newX, y: newY, width: newW, height: newH };
  }

  /**
   * @function calcTemplateBoundary
   * @name module:Template/TemplateMod.TemplateMod#calcTemplateBoundary
   * @description 필드들이 움직일 수 있는 경계를 계산한다.
   *
   * @param {Number} objectWidth  가로길이
   * @param {Number} objectHeight  세로 길이
   * @Date : 2021. 5. 31
   */
  calcTemplateBoundary(objectWidth, objectHeight) {
    const viewer1 = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_PDF_VIEWER
    );
    const viewerBoundingRect = viewer1.getBoundingClientRect();
    var pgRect = _templateMod.getPageBoundingClientRect();
    _templateMod.pageBoundingBox.x =
      pgRect.x + objectWidth / 2 - viewerBoundingRect.left;
    _templateMod.pageBoundingBox.y =
      pgRect.y + objectHeight / 2 - viewerBoundingRect.top;
    _templateMod.pageBoundingBox.width = pgRect.width - objectWidth;
  }

  /**
   * @function changeFieldPosition
   * @name module:Template/TemplateMod.TemplateMod#changeFieldPosition
   * @description Field의 변경된 위치를 설정한다.
   *
   * @param {Object} field   BaseField를 상속받은 Object
   * @param {Matrix} newMatrix    위치정보를 계산할때 쓰일 메트릭스 기본값 undeinfed
   * @param {Boolean} donotUndoRedo     undo redo데이터를 생성하는지 여부 기본값 false
   * @Date : 2021. 5. 31
   */
  changeFieldPosition(field, newMatrix = undefined, donotUndoRedo = false) {
    let childRect = field.select("rect");
    let fieldGlobalMatrix = newMatrix;
    if (fieldGlobalMatrix === undefined) {
      fieldGlobalMatrix = field.transform().globalMatrix;
    }
    let childRectBBox = childRect.getBBox();
    const x1 = fieldGlobalMatrix.x(childRectBBox.x, childRectBBox.y);
    const y1 = fieldGlobalMatrix.y(childRectBBox.x, childRectBBox.y);
    const x2 = fieldGlobalMatrix.x(childRectBBox.x2, childRectBBox.y2);
    const y2 = fieldGlobalMatrix.y(childRectBBox.x2, childRectBBox.y2);
    const width = Math.abs(x2 - x1);
    const height = Math.abs(y2 - y1);
    childRect.attr({ x: x1, y: y1, width: width, height: height });
    var childSvg = field.select("svg");
    childSvg.attr({ x: x1, y: y1, width: width, height: height });
    field.transform(Snap.matrix().toTransformString());
    var oldData = _templateMod.getFieldJsonData(childRect.attr("id"));
    const isUpdated = _templateMod.updateFieldPoint(field);
    if (isUpdated === false) {
      return;
    }
    _templateMod.changeFreeTransform(field, width, height);
    if (!donotUndoRedo) {
      var newData = _templateMod.getFieldJsonData(childRect.attr("id"));
      _templateMod.addUndoRedoAct(
        _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.FIELD_ATTR_CHANGE_ACTION,
        oldData,
        newData
      );
    }
  }

  /**
   * @function changeFieldValueEvent
   * @name module:Template/TemplateMod.TemplateMod#changeFieldValueEvent
   * @description 필드의 속성 값이 변경 되었을 때 속성의 종류에 따라 처리하기 위한 메소드.
   *
   * @param {Object} event  event Object
   * @Date : 2021. 5. 31
   */
  changeFieldValueEvent(event) {
    const targetNode = event.target;
    const fieldId = targetNode.getAttribute("data-field-id");
    const fieldPropetyName = targetNode.getAttribute(
      "data-field-property-name"
    );
    var oldDataArr = [];
    var newDataArr = [];
    var ownerId = "";

    fieldId.split(",").forEach((idVal) => {
      var fieldGroup = _templateMod.mainCanvas.select("#" + idVal + "Group");
      if (fieldGroup === null || fieldGroup === undefined) {
        return;
      }
      var field = _templateMod.fieldDictionary[idVal];
      if (!field.validateValue(fieldPropetyName, targetNode.value)) {
        console.log("not validate");
        return;
      }
      const oldData = _templateMod.getFieldJsonData(idVal);
      oldDataArr.push(oldData);
      _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.assign(field, "m_" + fieldPropetyName, targetNode.value);
      if (_Fields_TextBaseField_js__WEBPACK_IMPORTED_MODULE_8__.TextBaseField.needTextSvgRefresh(fieldPropetyName)) {
        if (fieldPropetyName === "defaultValue" && field.type === "TextField") {
          let dvText = _templateMod.getDvTextValue(targetNode.value);
          field.defaultValueText = dvText;
        } else if (
          fieldPropetyName === "defaultValue" &&
          field.type === "ComboboxField"
        ) {
          let dvText = targetNode.value;
          field.defaultValueText = dvText;
        }
        var curScale = _templateMod.pdfViewer.currentScale;
        field.changeTextElement(fieldGroup, curScale);
      }
      if (fieldPropetyName === "ownerId") {
        //240220 아이템 배경색 맞게 바꿔줘야함.
        /*
        1. 아이템 배경색상값을 어떻게 넣어줘야 할지.


        */


        _templateMod.refreshformerList(field);
      }
      if (fieldPropetyName === "fieldMinValue") {
        field.m_inputMin = Number(targetNode.value);
      }
      if (fieldPropetyName === "fieldMaxValue") {
        field.m_inputMax = Number(targetNode.value);
      }
      if (fieldPropetyName === "useCalc") {
        field.m_useCalc = targetNode.value;
      }
      if (fieldPropetyName === "useDrawSign") {
        field.m_useDrawSign = targetNode.value;
        _templateMod.validateSignOptions(targetNode, fieldId, fieldPropetyName);
        field.m_useDrawSign = targetNode.value;
      }
      if (fieldPropetyName === "useImageSign") {
        field.m_useImageSign = targetNode.value;
        _templateMod.validateSignOptions(targetNode, fieldId, fieldPropetyName);
        field.m_useImageSign = targetNode.value;
      }
      if (fieldPropetyName === "useRegSign") {
        field.m_useRegSign = targetNode.value;
        _templateMod.validateSignOptions(targetNode, fieldId, fieldPropetyName);
        field.m_useRegSign = targetNode.value;
      }
      if (fieldPropetyName === "required") {
        _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.showAsteriskDiv(
          _templateMod.ownerNode,
          idVal,
          targetNode.value === "true" ? true : false
        );
      }
      const newData = _templateMod.getFieldJsonData(idVal);
      newDataArr.push(newData);
      ownerId = field.ownerId;
    });
    if (oldDataArr.length === 0 || newDataArr === 0) {
      return;
    }
    if (
      fieldPropetyName === "ownerId" ||
      fieldPropetyName === "fieldId" ||
      fieldPropetyName === "required"
    ) {
      _templateMod.buildFieldformerList();
      _templateMod.selectUserList(ownerId);
    }
    let actionName = _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.GROUP_ATTR_CHANGE_ACTION;
    if (fieldPropetyName === "ownerId") {
      actionName = _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.GROUP_ATTR_OWNER_CHANGE_ACTION;
    }
    _templateMod.addUndoRedoAct(actionName, oldDataArr, newDataArr);
  }

  //병욱 추가
  validateSignOptions(targetNode, fieldId, fieldPropetyName) {
    const signField = document.querySelector(".Sign-Field");
    const useDrawSignInput = signField.querySelector(
      'input[data-field-property-name="useDrawSign"]'
    );
    const useImageSignInput = signField.querySelector(
      'input[data-field-property-name="useImageSign"]'
    );
    const useRegSignInput = signField.querySelector(
      'input[data-field-property-name="useRegSign"]'
    );

    let useDrawSign = useDrawSignInput && useDrawSignInput.value === "true" ? true : false;
    let useImageSign = useImageSignInput && useImageSignInput.value === "true" ? true : false;
    let useRegSign = useRegSignInput && useRegSignInput.value === "true" ? true : false;

    if (!useDrawSign && !useImageSign && !useRegSign) {
      console.log("targetNode.checked:" + targetNode.checked + "\n");
      console.log("targetNode.value:" + targetNode.value + "\n");
      console.log("useDrawSignInput.value:" + useDrawSignInput.value + "\n");
      targetNode.checked = true;
      targetNode.value = "true";
      //alert('적어도 하나의 서명 옵션을 활성화해야 합니다.');

      // 부모 요소를 찾고,
      let parentDiv = targetNode.parentElement;
      // 부모 요소 내에서 체크박스를 찾습니다.
      let checkboxInput = parentDiv.querySelector('input[type="checkbox"]');
      checkboxInput.checked = true;

      return true;
    }
  }

  /**
   * @function changeFreeTransform
   * @name module:Template/TemplateMod.TemplateMod#changeFreeTransform
   * @description 필드의 크기 및 위치를 변경하는 FreeTransform을 새로 변경한다.
   *
   * @param {Object} fieldGroup   SVG의 group 오브젝트
   * @param {Number} width     필드의 가로 길이
   * @param {Number} height    필드의 세로 길이
   * @Date : 2021. 5. 31
   */
  changeFreeTransform(fieldGroup, width, height) {
    if (fieldGroup.parent().attr("id") === _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME) {
      return;
    }
    let hasHideClass = false;
    if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(fieldGroup.freeTransform)) {
      hasHideClass = !fieldGroup.freeTransform.isShowResizeHandler();
      fieldGroup.freeTransform.unplug();
    }
    _templateMod.calcTemplateBoundary(width, height);
    // const startTime = performance.now();
    let ft = _templateMod.mainCanvas.freeTransform(
      fieldGroup,
      {
        snap: { rotate: 1 },
        attrs: { stroke: "#9d6859" },
        subjectBBox: fieldGroup.select("rect").getBBox(true),
        size: 4,
        draw: "bbox",
        boundary: _templateMod.pageBoundingBox,
      },
      function (ft2, events) {
        _templateMod.fieldFtEvent(events[0], fieldGroup);
      }
    );
    ft.setOpts({ rotate: false });
    if (hasHideClass) {
      fieldGroup.freeTransform.hideResizeHandler();
    }
  }

  /**
   * @function changeGroupBoxFreeTransform
   * @name module:Template/TemplateMod.TemplateMod#changeGroupBoxFreeTransform
   * @description필드 그룹박스 크기 및 위치를 변경하는 FreeTransform을 새로 변경한다.
   *
   * @param {Object} tempGroupBox  SVG의 group 오브젝트
   * @Date : 2021. 5. 31
   */
  changeGroupBoxFreeTransform(tempGroupBox) {
    if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(tempGroupBox.freeTransform)) {
      tempGroupBox.freeTransform.unplug();
    }
    _templateMod.calcTemplateBoundary(
      tempGroupBox.getBBox().width,
      tempGroupBox.getBBox().height
    );
    var tempGFt = _templateMod.mainCanvas.freeTransform(
      tempGroupBox,
      {
        snap: { rotate: 1 },
        size: 4,
        draw: "bbox",
        boundary: _templateMod.pageBoundingBox,
      },
      function (ft, events) {
        //console.log(events);
        _templateMod.tmpGroupFtEvent(events[0]);
      }
    );
    tempGFt.setOpts({ rotate: false, scale: false });
  }

  /**
   * @function checkTemplateFieldData
   * @name module:Template/TemplateMod.TemplateMod#checkTemplateFieldData
   * @description
   * Label이나 Combobox의 경우 안에 값을 셋팅하지 않으면 서명모드에서
   * 필수 값 체크 여부를 통과하지 못하기 때문에 템플릿 에디트에서 해당 값들이
   * 들어 있는지 체크한다.
   *
   * @return {Boolean}
   * @Date : 2021. 6. 18
   */
  checkTemplateFieldData() {
    const keys = Object.keys(_templateMod.templateUserFieldInfo);
    for (let usrKeyIdx = 0; usrKeyIdx < keys.length; ++usrKeyIdx) {
      const userInfo = _templateMod.templateUserFieldInfo[keys[usrKeyIdx]];
      for (
        var pageNo = 0;
        pageNo < _templateMod.pdfViewer.pagesCount;
        ++pageNo
      ) {
        const fieldKeys = Object.keys(_templateMod.fieldDictionary);
        for (let keyIdx = 0; keyIdx < fieldKeys.length; ++keyIdx) {
          const field = _templateMod.fieldDictionary[fieldKeys[keyIdx]];
          if (field.isRemoved) {
            continue;
          }
          if (field.type === "LabelField") {
            if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(field.value)) {
              let svgRect = _templateMod.mainCanvas.select(
                "#" + field.id + "Group > rect"
              );
              _templateMod.showFieldAttribute(field.id);
              let viewerContainer = _templateMod.ownerNode.querySelector(
                " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_PDF_VIEWER_CONTAINER
              );
              viewerContainer.scrollTop = svgRect.attr("y");
              return false;
            }
          } else if (field.type === "ComboboxField") {
            if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(field.comboboxList)) {
              let svgRect = _templateMod.mainCanvas.select(
                "#" + field.id + "Group > rect"
              );
              _templateMod.showFieldAttribute(field.id);
              let viewerContainer = _templateMod.ownerNode.querySelector(
                " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_PDF_VIEWER_CONTAINER
              );
              viewerContainer.scrollTop = svgRect.attr("y");
              return false;
            }
          }
        }
      }
    }

    return true;
  }

  /**
   * @function clearSelectedTool
   * @name module:Template/TemplateMod.TemplateMod#clearSelectedTool
   * @description 사이드 탭에 선탠된 모드를 초기화한다.
   *
   * @Date : 2021. 5. 31
   */
  clearSelectedTool() {
    let toolElement = _templateMod.ownerNode.querySelectorAll(
      "." + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.EDITOR_COMPONENT_CLASS + " ul li"
    );
    for (let index = 0; index < toolElement.length; index++) {
      if (toolElement[index].classList.contains("selected")) {
        toolElement[index].classList.toggle("selected");
      }
    }
  }

  /**
   * @function computePageOffset
   * @name module:Template/TemplateMod.TemplateMod#computePageOffset
   * @description사이드  페이지의 Offset을 계산한다..
   *
   * @param {Number} pageNo  페이지 번호
   * @return  {Object} { left: , top:  }
   * @Date : 2021. 5. 31
   */
  computePageOffset(pageNo) {
    let pgNode = _templateMod.getPageElement(pageNo);
    var rect = pgNode.getBoundingClientRect(),
      bodyElt = document.body;
    return {
      top: rect.top + bodyElt.scrollTop,
      left: rect.left + bodyElt.scrollLeft,
    };
  }

  /**
   * @function convertUserListToSelectOptions
   * @name module:Template/TemplateMod.TemplateMod#convertUserListToSelectOptions
   * @description 사이드 서명자 리스트를 필드 속성에서 사용하기 위해 여기서 사용할 포멧으로 변환한다. .
   *
   * @return {Array} [{ text: , value:  }...]
   * @Date : 2021. 5. 31
   */
  convertUserListToSelectOptions() {
    let optionList = [];

    const keys = Object.keys(_templateMod.templateUserFieldInfo);
    keys.forEach(function (key) {
      const usrInfo = _templateMod.templateUserFieldInfo[key];
      if (
        usrInfo.isFormer !== null &&
        usrInfo.isFormer !== undefined &&
        usrInfo.isFormer === "Y"
      ) {
        return;
      }
      optionList.push({
        text: usrInfo.displayUserName,
        value: usrInfo.userUUID,
      });
    });

    return optionList;
  }

  copyObject() {
    _templateMod.templateClipBoard = "";
    const selectedNode = _templateMod.ownerNode.querySelector(
      " ." + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.EDITOR_ATTR_CLASS
    );
    if (selectedNode === null) {
      return;
    }
    const attrPanelNode = selectedNode.querySelector(
      "." + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.EDITOR_ATTR_PANEL_CLASS
    );
    if (attrPanelNode === null) {
      return;
    }
    const idListAttr = attrPanelNode.getAttribute("Field-id-list");
    _templateMod.templateClipBoard = idListAttr;
  }

  /**
   * @function createDragOverGroup
   * @name module:Template/TemplateMod.TemplateMod#createDragOverGroup
   * @description 사이드 드래그 된 곳의 Object들을 svg 그룹으로 묶는다.
   *
   * @param {Object} border Snap의 bounding box
   * @Date : 2021. 5. 31
   */
  createDragOverGroup(border) {
    _templateMod.hideFieldAttribute();
    var tempGNew = _templateMod.mainCanvas.group();
    tempGNew.attr({ id: _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME });
    var items = _templateMod.mainCanvas.selectAll(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MAIN_GROUP_NAME + " > g"
    );
    var selectItemArray = [];
    items.forEach(function (el) {
      var mybounds = el.getBBox();
      if (Snap.path.isBBoxIntersect(mybounds, border)) {
        selectItemArray.push(el);
      }
      if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(el.freeTransform)) {
        el.freeTransform.hideResizeHandler();
      }
    });
    if (selectItemArray.length == 1) {
      if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(selectItemArray[0].freeTransform)) {
        selectItemArray[0].freeTransform.unplug();
      }
      let bbox = selectItemArray[0].getBBox();
      _templateMod.changeFreeTransform(
        selectItemArray[0],
        bbox.width,
        bbox.height
      );
      const childRect = selectItemArray[0].select("rect");
      _templateMod.showFieldAttribute(childRect.attr("id"));
      tempGNew.remove();
      return;
    }
    if (selectItemArray.length < 1) {
      tempGNew.remove();
      _templateMod.hideFieldAttribute();
      return;
    }
    var fieldList = [];
    selectItemArray.forEach(function (el) {
      if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(el.freeTransform)) {
        el.freeTransform.unplug();
      }

      const childRect = el.select("rect");
      fieldList.push(_templateMod.fieldDictionary[childRect.attr("id")]);
      tempGNew.append(el);
    });
    _templateMod.showFieldListAttribute(fieldList);
    if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(tempGNew.freeTransform)) {
      tempGNew.freeTransform.unplug();
    }
    _templateMod.calcTemplateBoundary(
      tempGNew.getBBox().width,
      tempGNew.getBBox().height
    );
    var tempGFt = _templateMod.mainCanvas.freeTransform(
      tempGNew,
      {
        snap: { rotate: 1 },
        size: 4,
        draw: "bbox",
        boundary: _templateMod.pageBoundingBox,
      },
      function (ft, events) {
        _templateMod.tmpGroupFtEvent(events[0]);
      }
    );
    tempGFt.setOpts({ rotate: false, scale: false });
  }

  /**
   * @function createField
   * @name module:Template/TemplateMod.TemplateMod#createField
   * @description 사이드 필드를 생성한다.
   *
   * @param {String} type  필드의 타입
   * @param {Number} mousePageX   마우스의 x좌표
   * @param {Number } mousePageY   마우스의 y좌표
   * @return {Object} fieldGroup SVG의 Group Object
   * @Date : 2021. 5. 31
   */
  createField(type, mousePageX, mousePageY) {
    var mainGroup = _templateMod.mainCanvas.select(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MAIN_GROUP_NAME
    );

    const viewer1 = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_PDF_VIEWER
    );
    const viewerBoundingRect = viewer1.getBoundingClientRect();
    const m1 = _templateMod.mainCanvas.transform().diffMatrix.invert();
    const fieldX = m1.x(
      mousePageX - viewerBoundingRect.left,
      mousePageY - viewerBoundingRect.top
    );
    const fieldY = m1.y(
      mousePageX - viewerBoundingRect.left,
      mousePageY - viewerBoundingRect.top
    );
    let field = _templateMod.createFieldObject(
      type,
      fieldX,
      fieldY,
      _templateMod.getPdfPageFromSvgPos(fieldX, fieldY)
    );
    _templateMod.selectAddFieldType = "";
    let ost = _templateMod.computePageOffset();
    let pageBorderWidth = _templateMod.getPageBorderWidth(field.pageNo);

    let x = mousePageX - ost.left - pageBorderWidth.left;
    let y = mousePageY - ost.top - pageBorderWidth.top;
    let fieldGroup = field.getSVGFieldObject(
      _templateMod.mainCanvas,
      mainGroup,
      _templateMod.pdfViewer.currentScale,
      _templateMod.ownerNode,
      _templateMod.removeDragOverGroup,
      _templateMod.changeFieldValueEvent,
      _templateMod.changeFreeTransform,
      "#828282"
    );
    var groupBBox = fieldGroup.getBBox();
    const viewport = _templateMod.pdfViewer._pages[field.pageNo - 1].viewport;
    let pdfPoision = viewport.convertToPdfPoint(x, y);
    let pdfPoision2 = viewport.convertToPdfPoint(
      x + groupBBox.width,
      y + groupBBox.height
    );
    field.pdfX = pdfPoision[0];
    field.pdfY = pdfPoision[1];
    field.pdfX2 = pdfPoision2[0];
    field.pdfY2 = pdfPoision2[1];
    _templateMod.fieldDictionary[field.id] = field;
    if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsListCount() === 1) {
      const keys = Object.keys(_templateMod.templateUserFieldInfo);
      field.m_ownerId = _templateMod.templateUserFieldInfo[keys[0]].userUUID;
      _templateMod.refreshformerList(field);
      _templateMod.buildFieldformerList();
    }

    _templateMod.changeFreeTransform(fieldGroup, field.width, field.height);
    _templateMod.showAsteriskDiv(
      field.id,
      field.required === "true",
      field.x,
      field.y,
      field.height
    );
    var jsonData = JSON.stringify(field);
    _templateMod.addUndoRedoAct(
      _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.CREATE_FIELD_ACTION,
      jsonData,
      jsonData
    );
    return fieldGroup;
  }

  /**
   * @function createFieldObject
   * @name module:Template/TemplateMod.TemplateMod#createFieldObject
   * @description 사이드 Filed Object의 인스턴스를 생성한다.
   *
   * @param {String} type 필드의 타입
   * @param {Number} x     x좌표
   * @param {Number} y     y좌표
   * @return {Object} Field Object
   * @Date : 2021. 5. 31
   */
  createFieldObject(type, x, y, pageNum = undefined) {
    let fieldId = _templateMod.generateFieldId(type);
    let pageNo = pageNum;
    if (pageNum === undefined) {
      pageNo = _templateMod.pdfViewer.currentPageNumber;
    }
    console.log(pageNo);
    switch (type) {
      case "TextField": {
        let textField = new _Fields_TextField__WEBPACK_IMPORTED_MODULE_4__.TextField(fieldId, pageNo, x, y);
        return textField;
      }
      case "LabelField": {
        let labelField = new _Fields_LabelField_js__WEBPACK_IMPORTED_MODULE_13__.LabelField(fieldId, pageNo, x, y);
        return labelField;
      }
      case "SignField": {
        let signField = new _Fields_SignField__WEBPACK_IMPORTED_MODULE_7__.SignField(
          fieldId,
          pageNo,
          x,
          y,
          _templateMod.useDrawSign,
          _templateMod.useImageSign,
          _templateMod.useRegSign
        );
        
        return signField;
      }
      case "NumberField": {
        let numberField = new _Fields_NumberField__WEBPACK_IMPORTED_MODULE_5__.NumberField(fieldId, pageNo, x, y);
        return numberField;
      }
      case "DateField": {
        let dateField = new _Fields_DateField__WEBPACK_IMPORTED_MODULE_6__.DateField(fieldId, pageNo, x, y);
        return dateField;
      }
      case "ImageField": {
        let imageField = new _Fields_ImageField_js__WEBPACK_IMPORTED_MODULE_9__.ImageField(fieldId, pageNo, x, y);
        return imageField;
      }
      case "MultiLineTextField": {
        let multilineTextField = new _Fields_MultiLineTextField_js__WEBPACK_IMPORTED_MODULE_10__.MultiLineTextField(fieldId, pageNo, x, y);
        return multilineTextField;
      }
      case "CheckboxField": {
        let checkboxField = new _Fields_CheckboxField_js__WEBPACK_IMPORTED_MODULE_11__.CheckboxField(fieldId, pageNo, x, y);
        return checkboxField;
      }
      case "RadioField": {
        let radioField = new _Fields_RadioField_js__WEBPACK_IMPORTED_MODULE_12__.RadioField(fieldId, pageNo, x, y);
        return radioField;
      }
      case "ComboboxField": {
        let comboboxField = new _Fields_ComboboxField_js__WEBPACK_IMPORTED_MODULE_14__.ComboboxField(fieldId, pageNo, x, y);
        return comboboxField;
      }
      default: {
        return null;
      }
    }
  }

  /**
   * @function createTemplateRect
   * @name module:Template/TemplateMod.TemplateMod#createTemplateRect
   * @description PDF위에 올라가는 Template 레이어에 필드를 만들기위해 임시 Div를 만든다.
   *
   * @Date : 2021. 5. 31
   */
  createTemplateRect() {
    var templateLayer = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_NAME
    );
    templateLayer.style.display = "block";
    let templateRect = document.createElement("div");
    templateRect.id = _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_RECT_NAME;
    templateRect.style.position = "absolute";
    templateRect.style.left = "0px";
    templateRect.style.top = "0px";
    var size = _templateMod.getFieldSize(_templateMod.selectAddFieldType);
    var curScale = _templateMod.pdfViewer.currentScale;
    templateRect.style.width = size.w * curScale + "px";
    templateRect.style.height = size.h * curScale + "px";
    templateRect.style.background = "none";
    templateRect.style.border = "1px solid red";
    _templateMod.ownerNode
      .querySelector(" #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_NAME)
      .appendChild(templateRect);

    templateLayer.addEventListener(
      "mousemove",
      _templateMod.templateMouseMoveEvent,
      true
    );
    templateLayer.addEventListener(
      "mouseup",
      _templateMod.templateMouseUpEvent,
      true
    );
  }

  /**
   * @function dragendFunc
   * @name module:Template/TemplateMod.TemplateMod#dragendFunc
   * @description SVG내에서 Drag가 끝났을떄의 후처리를 한다. .
   *
   * @param {Event} event event object
   * @Date : 2021. 5. 31
   */
  dragendFunc(event) {
    event.stopPropagation();
    if (!_templateMod.dragStart) {
      return false;
    }
    var border = _templateMod.dragBox.getBBox();
    _templateMod.dragBox.remove();
    _templateMod.dragStart = false;
    _templateMod.removeDragOverGroup();
    _templateMod.createDragOverGroup(border);
  }

  /**
   * @function dragmoveFunc
   * @name module:Template/TemplateMod.TemplateMod#dragmoveFunc
   * @description SVG내에서 드래그 중일 때 처리를 한다.
   *
   * @param {Number} dx  시작좌표로 부터 x만큼 움직인 크기
   * @param {Number} dy   시작좌표로 부터 y만큼 움직인 크기
   * @param {Number} x   마우스의 x좌표 사용하지 않음
   * @param {Number} y   마우스의 y좌표 사용하지 않음
   * @param {Object} event     Event Object
   * @Date : 2021. 5. 31
   */
  dragmoveFunc(dx, dy, x, y, event) {
    event.stopPropagation();
    if (!_templateMod.dragStart) {
      return false;
    }
    var xoffset = 0,
      yoffset = 0;

    if (dx < 0) {
      xoffset = dx;
      dx = -1 * dx;
    }

    if (dy < 0) {
      yoffset = dy;
      dy = -1 * dy;
    }

    _templateMod.dragBox.transform("T" + xoffset + "," + yoffset);
    _templateMod.dragBox.attr("width", dx);
    _templateMod.dragBox.attr("height", dy);
    _templateMod.dragBox.attr("fill", "none");
  }

  /**
   * @function dragstartFunc
   * @name module:Template/TemplateMod.TemplateMod#dragstartFunc
   * @description SVG내에서 drag를 시작할때 처리하는 메소드
   *
   * @param {Number} x   마우스의 x좌표 사용하지 않음
   * @param {Number} y   마우스의 y좌표 사용하지 않음
   * @param {Object} event     Event Object
   * @Date : 2021. 5. 31
   */
  dragstartFunc(x, y, event) {
    event.stopPropagation();
    //if path or circle were clicked don't draw box
    if (
      !(event.target.nodeName === "svg" || event.target.nodeName === "rect")
    ) {
      if (_templateMod.dragBox) {
        _templateMod.dragBox.remove();
      }
      return false;
    }
    if (event.target.nodeName === "rect") {
      var dragStop = false;
      if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(event.srcElement.id)) {
        var obj1 = _templateMod.mainCanvas
          .select("#" + event.srcElement.id)
          .parent();
        if (obj1) {
          dragStop =
            !_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(obj1.freeTransform) ||
            obj1.parent().attr("id") === _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME;
        }
      }
      if (
        (event.target !== undefined &&
          event.target.classList !== null &&
          event.target.classList !== undefined &&
          event.target.classList.length > 0 &&
          event.target.classList.contains("fthandle")) ||
        dragStop
      ) {
        if (
          _templateMod.dragBox !== undefined &&
          _templateMod.dragBox !== null
        ) {
          _templateMod.dragBox.remove();
        }
        return false;
      }
    }
    _templateMod.dragStart = true;
    var viewer1 = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_PDF_VIEWER
    );
    var br = viewer1.getBoundingClientRect();
    var mainCavnasMatrix = _templateMod.mainCanvas
      .transform()
      .diffMatrix.invert();
    var gragBoxX = mainCavnasMatrix.x(
      event.pageX - br.left,
      event.pageY - br.top
    );
    var gragBoxY = mainCavnasMatrix.y(
      event.pageX - br.left,
      event.pageY - br.top
    );
    _templateMod.dragBox = _templateMod.mainCanvas
      .rect(gragBoxX, gragBoxY, 0, 0)
      .attr("stroke", "black");
  }

  /**
   * @function exportFieldData
   * @name module:Template/TemplateMod.TemplateMod#exportFieldData
   * @description Field정보를 JSON형식으로 리턴하는 메소드
   *
   * @return {String} { formTemplateName: "", pages: [ {data..., fields: []}] }
   * @Date : 2021. 5. 31
   */
  exportFieldData() {
    var templateTitle = _templateMod.ownerNode.querySelector(
      " .Editor-Toolbar-Group.Center > span "
    );
    templateTitle.textContent;
    let templateData = new _templateData_js__WEBPACK_IMPORTED_MODULE_15__.TemplateData(templateTitle.textContent);

    const keys = Object.keys(_templateMod.templateUserFieldInfo);
    keys.forEach(function (key) {
      const userInfo = _templateMod.templateUserFieldInfo[key];
      let templateDataOwner =
        _templateDataOwner_js__WEBPACK_IMPORTED_MODULE_16__.TemplateDataOwner.cloneTemplateDataOwnerObject(userInfo);
      for (
        var pageNo = 0;
        pageNo < _templateMod.pdfViewer.pagesCount;
        ++pageNo
      ) {
        let templateDataPage = new _templateDataPage_js__WEBPACK_IMPORTED_MODULE_17__.TemplateDataPage(pageNo);

        const fieldKeys = Object.keys(_templateMod.fieldDictionary);
        fieldKeys.forEach(function (fieldKey) {
          const field = _templateMod.fieldDictionary[fieldKey];
          if (field.isRemoved) {
            return;
          }
          if (pageNo !== field.pageNo - 1) {
            return;
          }
          if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(field.ownerId) && userInfo.isFormer === "Y") {
            templateDataPage.pushField(field);
            return;
          }
          if (field.ownerId !== key) {
            return;
          }
          templateDataPage.pushField(field);
        });
        templateDataOwner.pushPage(templateDataPage);
      }
      templateData.pushOwner(templateDataOwner);
    });

    return JSON.stringify(templateData);
  }

  /**
   * @function fieldDeleteBtnClicked
   * @name module:Template/TemplateMod.TemplateMod#fieldDeleteBtnClicked
   * @description 필드의 삭제 버튼을 눌렀을때 동작하는 메소드.
   *
   * @param {Object} evt    Event Object
   * @Date : 2021. 5. 31
   */
  fieldDeleteBtnClicked(evt) {
    _templateMod.removeSelectedField();
  }

  /**
   * @function fieldFtEvent
   * @name module:Template/TemplateMod.TemplateMod#fieldFtEvent
   * @description Default Value 리스트정보를 설정 .
   *
   * @param {String} eventName   이벤트 종류
   * @param {Object} field  SVG의 Field Group Object
   * @Date : 2021. 5. 31
   */
  fieldFtEvent(eventName, field) {
    if (eventName === "drag start" || eventName === "apply") {
      //hide attr
      let childRect = field.select("rect");
      let fieldId = childRect.attr("id");
      if (_templateMod.isFieldDragStart === true) {
        _templateMod.hideFieldAttribute();
        if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isShowAsteriskDiv(_templateMod.ownerNode, fieldId)) {
          _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.showAsteriskDiv(_templateMod.ownerNode, fieldId, false);
        }
        return;
      }
      _templateMod.isFieldDragStart = true;
      _templateMod.hideFieldAttribute();

      _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.showAsteriskDiv(_templateMod.ownerNode, fieldId, false);
    }
    if (eventName === "scale end" || eventName === "drag end") {
      _templateMod.isFieldDragStart = false;
      _templateMod.changeFieldPosition(field);
      _templateMod.showFieldAttribute(
        _templateMod.getFieldIdFromGroupNode(field)
      );
    }
  }

  /**
   * @function fieldRepositioning
   * @name module:Template/TemplateMod.TemplateMod#fieldRepositioning
   * @description 필드의 위치를 재조정한다.
   *
   * @param {Object} event  event object
   * @param {Boolean} isImport  field를 임포트하는지 여부
   * @Date : 2021. 5. 31
   */
  fieldRepositioning(event, isImport = false) {
    const keys = Object.keys(_templateMod.fieldDictionary);
    keys.forEach(function (key) {
      var field = _templateMod.fieldDictionary[key];
      var fieldGroup = _templateMod.mainCanvas.select("#" + field.id + "Group");

      var fieldRect = fieldGroup.select("rect");
      var fieldSvg = fieldGroup.select("svg");
      var oldW = field.width;
      const newRect = _templateMod.calcFieldPostion(field, isImport);
      var scale = newRect.width / oldW;
      fieldRect.attr(newRect);
      fieldSvg.attr(newRect);
      var fieldSvgText = fieldSvg.select("text");
      if (fieldSvgText) {
        fieldSvgText.attr("font-size", field.fontSize * scale + "px");
        fieldGroup.transform(Snap.matrix().toTransformString());
      }

      _templateMod.changeFreeTransform(
        fieldGroup,
        newRect.width,
        newRect.height
      );

      _templateMod.showAsteriskDiv(
        field.id,
        field.required === "true",
        newRect.x,
        newRect.y,
        newRect.height
      );
    });
  }

  /**
   * @function generateFieldId
   * @name module:Template/TemplateMod.TemplateMod#generateFieldId
   * @description 필드의 이름을 현재 존재하는 필드의 No중 MAX값을 찾아서 +1해서 만든다.
   *
   * @param {String} type 필드의 종류
   * @return {String} 필드의 이름.
   * @Date : 2021. 5. 31
   */
  generateFieldId(type) {
    var typeList = _templateMod.mainCanvas.selectAll(
      "rect[id^='" + type + "']"
    );
    if (typeList.length < 1) {
      return type + 1;
    }
    let firstId = typeList[0].node.id;
    let maxNoStr = firstId.replace(type, "");
    let maxNo = parseInt(maxNoStr);
    for (var typeIdx = 1; typeIdx < typeList.length; typeIdx++) {
      let obj1 = typeList[typeIdx];
      let objNoStr = obj1.attr("id").replace(type, "");
      let objNo = parseInt(objNoStr);
      if (objNo > maxNo) {
        maxNo = objNo;
      }
    }
    maxNo = maxNo + 1;
    return type + maxNo;
  }

  /**
   * @function getCreateFieldDefaultWidth
   * @name module:Template/TemplateMod.TemplateMod#getCreateFieldDefaultWidth
   * @description 필드를 만들때 필드의 설정된 기본크기를 리턴한다.
   *
   * @param {String} type  필드의 종류
   * @return {Number} 필드의 기본 가로길이
   * @Date : 2021. 5. 31
   */
  getCreateFieldDefaultWidth(type) {
    switch (type) {
      case "TextField": {
        return _Fields_TextField__WEBPACK_IMPORTED_MODULE_4__.TextField.widthValue();
      }
      case "LabelField": {
        return _Fields_LabelField_js__WEBPACK_IMPORTED_MODULE_13__.LabelField.widthValue();
      }
      case "NumberField": {
        return _Fields_NumberField__WEBPACK_IMPORTED_MODULE_5__.NumberField.widthValue();
      }
      case "DateField": {
        return _Fields_DateField__WEBPACK_IMPORTED_MODULE_6__.DateField.widthValue();
      }
      case "SignField": {
        return _Fields_SignField__WEBPACK_IMPORTED_MODULE_7__.SignField.widthValue();
      }
      case "ImageField": {
        return _Fields_ImageField_js__WEBPACK_IMPORTED_MODULE_9__.ImageField.widthValue();
      }
      case "MultiLineTextField": {
        return _Fields_MultiLineTextField_js__WEBPACK_IMPORTED_MODULE_10__.MultiLineTextField.widthValue();
      }
      case "CheckboxField": {
        return _Fields_CheckboxField_js__WEBPACK_IMPORTED_MODULE_11__.CheckboxField.widthValue();
      }
      case "RadioField": {
        return _Fields_RadioField_js__WEBPACK_IMPORTED_MODULE_12__.RadioField.widthValue();
      }
      case "ComboboxField": {
        return _Fields_ComboboxField_js__WEBPACK_IMPORTED_MODULE_14__.ComboboxField.widthValue();
      }
    }
  }

  /**
   * @function getDvTextValue
   * @name module:Template/TemplateMod.TemplateMod#getDvTextValue
   * @description Default Value 의 읽을 수 있는 Text값을 반환한다.
   *
   * @param  {String} value 기본값의 variable
   * @return {String} 기본값의 Text 값
   * @Date : 2021. 5. 31
   */
  getDvTextValue(value) {
    const dvOpts = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getDVFieldOptsList();
    for (var idx = 0; idx < dvOpts.length; ++idx) {
      if (dvOpts[idx].value === value) {
        return dvOpts[idx].text;
      }
    }
    return "";
  }

  /**
   * @function getFieldFromJson
   * @name module:Template/TemplateMod.TemplateMod#getFieldFromJson
   * @description JSON 텍스트를 이용하여 필드의 인스턴스를 생성하여 반환한다.
   *
   * @param  {String} type 필드의 종류
   * @param  {String} jsonData  필드 데이터의 JSON 텍스트
   * @return Field Object 필드의 인스턴스
   * @Date : 2021. 5. 31
   */
  getFieldFromJson(type, jsonData) {
    switch (type) {
      case "SignField": {
        return _Fields_BaseField__WEBPACK_IMPORTED_MODULE_3__.BaseField.fromJson(new _Fields_SignField__WEBPACK_IMPORTED_MODULE_7__.SignField(), jsonData);
      }
      case "TextField": {
        return _Fields_BaseField__WEBPACK_IMPORTED_MODULE_3__.BaseField.fromJson(new _Fields_TextField__WEBPACK_IMPORTED_MODULE_4__.TextField(), jsonData);
      }
      case "LabelField": {
        return _Fields_BaseField__WEBPACK_IMPORTED_MODULE_3__.BaseField.fromJson(new _Fields_LabelField_js__WEBPACK_IMPORTED_MODULE_13__.LabelField(), jsonData);
      }
      case "NumberField": {
        return _Fields_BaseField__WEBPACK_IMPORTED_MODULE_3__.BaseField.fromJson(new _Fields_NumberField__WEBPACK_IMPORTED_MODULE_5__.NumberField(), jsonData);
      }
      case "DateField": {
        return _Fields_BaseField__WEBPACK_IMPORTED_MODULE_3__.BaseField.fromJson(new _Fields_DateField__WEBPACK_IMPORTED_MODULE_6__.DateField(), jsonData);
      }
      case "ImageField": {
        return _Fields_BaseField__WEBPACK_IMPORTED_MODULE_3__.BaseField.fromJson(new _Fields_ImageField_js__WEBPACK_IMPORTED_MODULE_9__.ImageField(), jsonData);
      }
      case "MultiLineTextField": {
        return _Fields_BaseField__WEBPACK_IMPORTED_MODULE_3__.BaseField.fromJson(new _Fields_MultiLineTextField_js__WEBPACK_IMPORTED_MODULE_10__.MultiLineTextField(), jsonData);
      }
      case "CheckboxField": {
        return _Fields_BaseField__WEBPACK_IMPORTED_MODULE_3__.BaseField.fromJson(new _Fields_CheckboxField_js__WEBPACK_IMPORTED_MODULE_11__.CheckboxField(), jsonData);
      }
      case "RadioField": {
        return _Fields_BaseField__WEBPACK_IMPORTED_MODULE_3__.BaseField.fromJson(new _Fields_RadioField_js__WEBPACK_IMPORTED_MODULE_12__.RadioField(), jsonData);
      }
      case "ComboboxField": {
        return _Fields_BaseField__WEBPACK_IMPORTED_MODULE_3__.BaseField.fromJson(new _Fields_ComboboxField_js__WEBPACK_IMPORTED_MODULE_14__.ComboboxField(), jsonData);
      }
    }
  }

  /**
   * @function getFieldIdFromGroupNode
   * @name module:Template/TemplateMod.TemplateMod#getFieldIdFromGroupNode
   * @description SVG의 Group오브젝트로부터 필드의 ID를 찾아서 반환한다.
   *
   * @param  {Object} fieldGorup  SVG의 group 오브젝트
   * @return {String} 필드의 ID
   * @Date : 2021. 5. 31
   */
  getFieldIdFromGroupNode(fieldGorup) {
    let childRect = fieldGorup.select("rect");
    return childRect.attr("id");
  }

  /**
   * @function getFieldJsonData
   * @name module:Template/TemplateMod.TemplateMod#getFieldJsonData
   * @description 필드의 데이터를 JSON Text로 반환한다.
   *
   * @param  {String} fieldId Field의 ID
   * @return {String} JSON 텍스트
   * @Date : 2021. 5. 31
   */
  getFieldJsonData(fieldId) {
    var field = _templateMod.fieldDictionary[fieldId];
    var data = JSON.stringify(field);
    return data;
  }

  /**
   * @function getFieldSize
   * @name module:Template/TemplateMod.TemplateMod#getFieldSize
   * @description 필드의 가로 세로 사이즈를 리턴.
   *
   * @param  {String} type 필드의 종류
   * @return  {Object} { w: , h:  }  default - { w: 150, h: 40 };
   * @Date : 2021. 5. 31
   */
  getFieldSize(type) {
    var size = { w: 150, h: 40 };
    switch (type) {
      case "TextField":
      case "NumberField":
      case "DateField":
      case "LabelField":
      case "ComboboxField":
        size = { w: _Fields_TextField__WEBPACK_IMPORTED_MODULE_4__.TextField.widthValue(), h: _Fields_TextField__WEBPACK_IMPORTED_MODULE_4__.TextField.heightValue() };
        break;
      case "SignField":
      case "ImageField":
        size = { w: _Fields_SignField__WEBPACK_IMPORTED_MODULE_7__.SignField.widthValue(), h: _Fields_SignField__WEBPACK_IMPORTED_MODULE_7__.SignField.heightValue() };
        break;
      case "MultiLineTextField":
        size = {
          w: _Fields_MultiLineTextField_js__WEBPACK_IMPORTED_MODULE_10__.MultiLineTextField.widthValue(),
          h: _Fields_MultiLineTextField_js__WEBPACK_IMPORTED_MODULE_10__.MultiLineTextField.heightValue(),
        };
        break;
      case "CheckboxField":
        size = {
          w: _Fields_CheckboxField_js__WEBPACK_IMPORTED_MODULE_11__.CheckboxField.widthValue(),
          h: _Fields_CheckboxField_js__WEBPACK_IMPORTED_MODULE_11__.CheckboxField.heightValue(),
        };
        break;
      case "RadioField":
        size = { w: _Fields_RadioField_js__WEBPACK_IMPORTED_MODULE_12__.RadioField.widthValue(), h: _Fields_RadioField_js__WEBPACK_IMPORTED_MODULE_12__.RadioField.heightValue() };
        break;
    }
    return size;
  }

  /**
   * @function getPageElement
   * @name module:Template/TemplateMod.TemplateMod#getPageElement
   * @description PDF 페이지 Element
   *
   * @param  {Number} pageNo  PDF 페이지 번호
   * @return {Element}
   * @Date : 2021. 5. 31
   */
  getPageElement(pageNo) {
    let pageNumber = pageNo;
    if (pageNumber === undefined) {
      pageNumber = _templateMod.pdfViewer.currentPageNumber;
    }
    let pg = _templateMod.ownerNode.querySelector(
      " #TemplatePDFViewer [aria-label='Page " + pageNumber + "']"
    );
    return pg;
  }

  /**
   * @function getPageBorderWidth
   * @name module:Template/TemplateMod.TemplateMod#getPageBorderWidth
   * @description PDF 페이지의 border Width를 반한한다.
   *
   * @param { Number} pageNo  PDF 페이지 번호
   * @return {Rect} Object { left: , top: , right: , bottom:  }
   * @Date : 2021. 5. 31
   */
  getPageBorderWidth(pageNo) {
    let pageNumber = pageNo;
    if (pageNumber === undefined) {
      pageNumber = _templateMod.pdfViewer.currentPageNumber;
    }
    let pgNode = _templateMod.ownerNode.querySelector(
      " #TemplatePDFViewer [aria-label='Page " + pageNumber + "']"
    );

    let pageComputedStyle = window.getComputedStyle(pgNode);
    let borderTopStr = pageComputedStyle.getPropertyValue("border-top-width");
    let borderLeftStr = pageComputedStyle.getPropertyValue("border-left-width");
    let borderBottomStr = pageComputedStyle.getPropertyValue(
      "border-bottom-width"
    );
    let borderRightStr =
      pageComputedStyle.getPropertyValue("border-right-width");
    let borderTopWidth = 0;
    let borderLeftWidth = 0;
    let borderBottomWidth = 0;
    let borderRightWidth = 0;
    if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(borderTopStr)) {
      borderTopWidth = parseInt(borderTopStr.replace("px", ""));
    }
    if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(borderLeftStr)) {
      borderLeftWidth = parseInt(borderLeftStr.replace("px", ""));
    }
    if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(borderBottomStr)) {
      borderBottomWidth = parseInt(borderBottomStr.replace("px", ""));
    }
    if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(borderRightStr)) {
      borderRightWidth = parseInt(borderRightStr.replace("px", ""));
    }
    return {
      top: borderTopWidth,
      left: borderLeftWidth,
      bottom: borderBottomWidth,
      right: borderRightWidth,
    };
  }

  /**
   * @function getPageBoundingClientRect
   * @name module:Template/TemplateMod.TemplateMod#getPageBoundingClientRect
   * @description PDF 페이지의 Bounding Rect
   *
   * @param { Number} pageNo  PDF 페이지 번호
   * @return {Rect} Object { x: , y: , width: , height:  }
   * @Date : 2021. 5. 31
   */
  getPageBoundingClientRect(pageNo) {
    let pageNumber = pageNo;
    if (pageNumber === undefined) {
      pageNumber = _templateMod.pdfViewer.currentPageNumber;
    }
    let pg = _templateMod.ownerNode.querySelector(
      " #TemplatePDFViewer [aria-label='Page " + pageNumber + "']"
    );
    return pg.getBoundingClientRect();
  }

  /**
   * @function getPdfPageFromSvgPos
   * @name module:Template/TemplateMod.TemplateMod#getPdfPageFromSvgPos
   * @description SVG 레이어에서 PDF의 페이지 위치를 계산하여 리턴한다.
   *
   * @param {Number} x SVG의 X좌표
   * @param {Number} y SVG의 Y좌표
   * @return {Number} Pdf Page Number
   * @Date : 2021. 5. 31
   */
  getPdfPageFromSvgPos(x, y) {
    let currentHeightSum = 0;
    for (let idx = 1; idx <= _templateMod.pdfViewer.pagesCount; ++idx) {
      let pageRect = _templateMod.getPageBoundingClientRect(idx);
      let pageHeight = pageRect.height;
      currentHeightSum += pageHeight;
      if (currentHeightSum > y) {
        console.log(`${idx}, ${pageHeight}, ${currentHeightSum}, ${y}`);
        return idx;
      }
    }
    return 1;
  }

  /**
   * @function hideAllResizeHandles
   * @name module:Template/TemplateMod.TemplateMod#hideAllResizeHandles
   * @description 필드들의 리사이즈 핸들러들을 숨긴다.
   *
   * @Date : 2021. 5. 31
   */
  hideAllResizeHandles() {
    let items = _templateMod.mainCanvas.selectAll(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MAIN_GROUP_NAME + " > g"
    );
    items.forEach(function (element) {
      if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(element.freeTransform)) {
        element.freeTransform.hideResizeHandler();
      }
    });
  }

  /**
   * @function hideFieldAttribute
   * @name module:Template/TemplateMod.TemplateMod#hideFieldAttribute
   * @description 필드의 속성 팝업을 숨긴다.
   *
   * @Date : 2021. 5. 31
   */
  hideFieldAttribute() {
    const selectedNode = _templateMod.ownerNode.querySelector(
      " ." + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.EDITOR_ATTR_CLASS
    );
    _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.removeAllChildNode(selectedNode);
    if (selectedNode !== null) {
      selectedNode.style.display = "none";
    }

    const deleteBtnNode = _templateMod.ownerNode.querySelector(
      " ." + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.FIELD_DELETE_BUTTON_CLASS
    );

    if (
      deleteBtnNode !== null &&
      deleteBtnNode.classList.contains(_Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.SHOW_CLASS)
    ) {
      deleteBtnNode.classList.toggle(_Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.SHOW_CLASS);
    }
    if (
      deleteBtnNode !== null &&
      !deleteBtnNode.classList.contains(_Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.HIDE_CLASS)
    ) {
      deleteBtnNode.classList.toggle(_Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.HIDE_CLASS);
    }
  }

  /**
   * @function hideTemplateLayer
   * @name module:Template/TemplateMod.TemplateMod#hideTemplateLayer
   * @description TemplateLayer를 숨긴다.
   *
   * @Date : 2021. 5. 31
   */
  hideTemplateLayer() {
    let templateLayer = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_NAME
    );
    templateLayer.removeEventListener(
      "mousemove",
      _templateMod.templateMouseMoveEvent,
      true
    );
    templateLayer.removeEventListener(
      "mouseup",
      _templateMod.templateMouseUpEvent,
      true
    );
    templateLayer.style.display = "none";
  }

  /**
   * @function importFieldData
   * @name module:Template/TemplateMod.TemplateMod#importFieldData
   * @description  field를 import한다.
   *
   * @param {Object} data  import할 json data
   * @Date : 2021. 5. 31
   */
  importFieldData(data) {
    // 240220
    const itemBgColorList= ["#828282","#64DB99","#7878FF","#FFC81E","#E97FE5","#8B6331","#FF5050","#00BFFF","#00008C"];
    let colorIndex = 0;

    data.formerList.forEach((owner) => {
      const bgColor = itemBgColorList[colorIndex];
      colorIndex = (colorIndex + 1) % itemBgColorList.length; // 다음 색상 인덱스 계산 및 순환( 현재는 색상이 총 9개인데 추후 보완 필요.)

      owner.pages.forEach((page) => {
        if (page.pageNo >= _templateMod.pdfViewer._pages.length) {
          return;
        }
        page.fields.forEach((field) => {
          field.m_ownerId = owner.userUUID;
          if (
            owner.isFormer !== null &&
            owner.isFormer !== undefined &&
            owner.isFormer === "Y"
          ) {
            field.m_ownerId = "";
          }
          
          _templateMod.replaceFieldData(field, true, bgColor); // 240220 변경된 코드: 세 번째 인자로 bgColor 전달
        });
      });
    });
    // _templateMod.fieldRepositioning();
    _templateMod.hideAllResizeHandles();
    _templateMod.hideFieldAttribute();
    _templateMod.hideTemplateLayer();
    _templateMod.buildFieldformerList();
  }

  /**
   * @function keycheck
   * @name module:Template/TemplateMod.TemplateMod#keycheck
   * @description  keycheck  단축키 이벤트.
   *
   * @param {Object} evt   evt객체
   * @Date : 2021. 5. 31
   */
  keycheck(evt) {
    var keyCode = evt.which ? evt.which : evt.keyCode;
    if (evt.ctrlKey) {
      switch (keyCode) {
        case 89:
          _templateMod.redoAction();
          return;
        case 90:
          _templateMod.undoAction();
          return;
        case 77:
        // let dat1 = _templateMod.exportFieldData();
        //  console.log((dat1));
        //console.log(JSON.stringify(dat1));

        // _templateMod.importFieldData("/testFields.json", true);
        // return;
        // console.log(_templateMod.isAllFieldHasOwner());

        // let ret1 = _templateMod.checkTemplateFieldData();
        // console.log(ret1);
      }
    }

    if (keyCode === 46) {
      _templateMod.removeSelectedField();
    }
  }

  pasteObject() {
    console.log(_templateMod.templateClipBoard);
    if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(_templateMod.templateClipBoard)) {
      return;
    }
    const fieldIdList = _templateMod.templateClipBoard.split(",");
    for (const fieldId of fieldIdList) {
      const field = _templateMod.fieldDictionary[fieldId];
      const fieldJsonData = JSON.stringify(field);
      const copyField1 = JSON.parse(fieldJsonData);
      let newId = _templateMod.generateFieldId(copyField1.m_type);
      copyField1.m_id = newId;
      copyField1.m_pdfX = copyField1.m_pdfX + 10;
      copyField1.m_pdfX2 = copyField1.m_pdfX2 + 10;
      copyField1.m_pdfY = copyField1.m_pdfY - 10;
      copyField1.m_pdfY2 = copyField1.m_pdfY2 - 10;
      copyField1.m_fieldId = newId.replace(
        copyField1.m_type,
        copyField1.m_kind + "-"
      );
      _templateMod.replaceFieldStringData(JSON.stringify(copyField1));
    }
    if (fieldIdList.length > 0) {
      _templateMod.hideAllResizeHandles();
      _templateMod.hideFieldAttribute();
      _templateMod.hideTemplateLayer();
      _templateMod.buildFieldformerList();
    }
  }

  /**
   * @function redoAction
   * @name module:Template/TemplateMod.TemplateMod#redoAction
   * @description   이전에 실행취소 했던 것을 다시 실행한다.
   *
   * @Date : 2021. 5. 31
   */
  redoAction() {
    var idx = ++_templateMod.unredoActionIdx;
    var data = _templateMod.unredoActionDict[idx];
    if (data === undefined) {
      _templateMod.unredoActionIdx--;
      return;
    }
    _templateMod.removeDragOverGroup();
    switch (data.action) {
      case _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.CREATE_FIELD_ACTION:
      case _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.FIELD_ATTR_CHANGE_ACTION: {
        _templateMod.replaceFieldStringData(data.new);
        _templateMod.buildFieldformerList();
        return;
      }
      case _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.REMOVE_FIELD_ACTION: {
        _templateMod.removeField(data.new);
        _templateMod.hideFieldAttribute();
        _templateMod.buildFieldformerList();
        return;
      }
      case _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.GROUP_REMOVE_ACTION: {
        data.new.forEach((newData) => {
          _templateMod.removeField(newData);
        });
        _templateMod.hideFieldAttribute();
        _templateMod.buildFieldformerList();
        return;
      }
      case _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.GROUP_ATTR_CHANGE_ACTION: {
        data.new.forEach((newData) => {
          _templateMod.replaceFieldStringData(newData);
        });
        _templateMod.buildFieldformerList();
        return;
      }
      case _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.GROUP_ATTR_OWNER_CHANGE_ACTION: {
        data.new.forEach((newData) => {
          _templateMod.replaceFieldStringData(newData);
        });
        _templateMod.buildFieldformerList();
        return;
      }
    }
  }

  /**
   * @function refreshformerList
   * @name module:Template/TemplateMod.TemplateMod#refreshformerList
   * @description  필드의 서명자 정보가 수정될 때 사이드의 서명자 리스트를 갱신한다.
   *
   * @param  {Obejct} field 갱신할 필드 인스턴스
   * @Date : 2021. 5. 31
   */
  refreshformerList(field) {
    const keys = Object.keys(_templateMod.templateUserFieldInfo);
    keys.forEach(function (key) {
      let userInfo = _templateMod.templateUserFieldInfo[key];
      if (userInfo.contains(field.id)) {
        if (field.ownerId !== key) {
          userInfo.removeField(field.id);
        }
      } else {
        if (field.ownerId === key) {
          userInfo.pushField(field.id, field);
        }
      }
    });
  }

  /**
   * @function removeDragGroupField
   * @name module:Template/TemplateMod.TemplateMod#removeDragGroupField
   * @description  Drag해서 선택한 필드의 그룹을 지운다.
   *
   * @Date : 2021. 5. 31
   */
  removeDragGroupField() {
    var tempGOld = _templateMod.mainCanvas.select(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME
    );
    var mainGroup = _templateMod.mainCanvas.select(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MAIN_GROUP_NAME
    );
    if (tempGOld !== null && tempGOld.children().length >= 1) {
      tempGOld.freeTransform.hideHandles();
      var chds = tempGOld.children();
      const tempGMatrix = tempGOld.transform().globalMatrix;
      var oldDataArr = [];
      var newDataArr = [];
      chds.forEach(function (element) {
        const childRect = element.select("rect");
        const field = _templateMod.fieldDictionary[childRect.attr("id")];
        field.isRemoved = true;

        let usrFieldData = _templateMod.templateUserFieldInfo[field.ownerId];
        if (usrFieldData !== null && usrFieldData !== undefined) {
          usrFieldData.removeField(field.id);
        }
        let layerDiv = _templateMod.ownerNode.querySelector(
          " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_ASTERISK_NAME
        );
        let asteriskDiv = _templateMod.ownerNode.querySelector(
          " #" + field.id + "_asterisk"
        );
        layerDiv.removeChild(asteriskDiv);

        const fieldJsonData = JSON.stringify(field);
        oldDataArr.push(fieldJsonData);
        newDataArr.push(fieldJsonData);
        _templateMod.hideFieldAttribute();
      });
      _templateMod.addUndoRedoAct(
        _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.GROUP_REMOVE_ACTION,
        oldDataArr,
        newDataArr
      );
      tempGOld.remove();
      _templateMod.buildFieldformerList();
    }
  }

  /**
   * @function removeDragOverGroup
   * @name module:Template/TemplateMod.TemplateMod#removeDragOverGroup
   * @description   드래그해서 만들 필드 그립을 해제한다.
   *
   * @param  {Boolean} donotUndoRedo  undoRedo를 실행하지 않는다.
   * @Date : 2021. 5. 31
   */
  removeDragOverGroup(donotUndoRedo = true) {
    var tempGOld = _templateMod.mainCanvas.select(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME
    );
    var mainGroup = _templateMod.mainCanvas.select(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MAIN_GROUP_NAME
    );
    if (tempGOld !== null && tempGOld.children().length >= 1) {
      tempGOld.freeTransform.hideHandles();
      var chds = tempGOld.children();
      const tempGMatrix = tempGOld.transform().globalMatrix;
      chds.forEach(function (element) {
        mainGroup.append(element);
        _templateMod.changeFieldPosition(element, tempGMatrix, donotUndoRedo);
        _templateMod.changeFreeTransform(
          element,
          element.width,
          element.height
        );
      });
      tempGOld.remove();
    }
  }

  /**
   * @function removeField
   * @name module:Template/TemplateMod.TemplateMod#removeField
   * @description  undo, redo에서 필드를 삭제할 때 사용.
   *
   * @param  {String} jsonData 필드의 JSON String 데이터
   * @Date : 2021. 5. 31
   */
  removeField(jsonData) {
    const replaceData = JSON.parse(jsonData);
    const field1 = _templateMod.getFieldFromJson(
      replaceData.m_type,
      replaceData
    );
    field1.isRemoved = true;
    if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(field1.ownerId)) {
      _templateMod.templateUserFieldInfo[field1.ownerId].removeField(field1.id);
    }
    const mainGroup = _templateMod.mainCanvas.select(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MAIN_GROUP_NAME
    );
    var selectedFieldGroup = mainGroup.select("#" + field1.id + "Group");
    if (selectedFieldGroup) {
      selectedFieldGroup.freeTransform.unplug();
      selectedFieldGroup.remove();

      let layerDiv = _templateMod.ownerNode.querySelector(
        " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_ASTERISK_NAME
      );
      let asteriskDiv = _templateMod.ownerNode.querySelector(
        " #" + field1.id + "_asterisk"
      );
      if (asteriskDiv !== null && asteriskDiv !== undefined) {
        layerDiv.removeChild(asteriskDiv);
      }
    }
  }

  /**
   * @function removeSelectedField
   * @name module:Template/TemplateMod.TemplateMod#removeSelectedField
   * @description  선택된 필드를 삭제한다.
   *
   * @Date : 2021. 5. 31
   */
  removeSelectedField() {
    const selectedNode = _templateMod.ownerNode.querySelector(
      " ." + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.EDITOR_ATTR_CLASS
    );
    const attrPanelNode = selectedNode.querySelector(
      "." + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.EDITOR_ATTR_PANEL_CLASS
    );
    if (attrPanelNode === null) {
      return;
    }
    const idListAttr = attrPanelNode.getAttribute("Field-id-list");
    if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(idListAttr)) {
      return;
    }
    const idArray = idListAttr.split(",");
    if (idArray.length > 1) {
      _templateMod.removeDragGroupField();
      return;
    }
    var selectedItem = _templateMod.mainCanvas.select(
      "#" + idArray[0] + "Group"
    );
    if (selectedItem === null) {
      return;
    }
    const childRect = selectedItem.select("rect");
    const field = _templateMod.fieldDictionary[childRect.attr("id")];
    field.isRemoved = true;
    let usrFieldData = _templateMod.templateUserFieldInfo[field.ownerId];
    if (usrFieldData !== null && usrFieldData !== undefined) {
      usrFieldData.removeField(field.id);
    }

    const fieldJsonData = JSON.stringify(field);
    _templateMod.addUndoRedoAct(
      _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.REMOVE_FIELD_ACTION,
      fieldJsonData,
      fieldJsonData
    );
    _templateMod.hideFieldAttribute();
    selectedItem.freeTransform.unplug();
    selectedItem.remove();

    let layerDiv = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_ASTERISK_NAME
    );
    let asteriskDiv = _templateMod.ownerNode.querySelector(
      " #" + field.id + "_asterisk"
    );
    if (asteriskDiv !== null && asteriskDiv !== undefined) {
      layerDiv.removeChild(asteriskDiv);
    }

    _templateMod.buildFieldformerList();
  }

  /**
   * @function removeTemplateRect
   * @name module:Template/TemplateMod.TemplateMod#removeTemplateRect
   * @description   PDF위에 올라가는 Template 레이어에 필드를 만들기위해 만든 임시 Div를 삭제한다.
   *
   * @Date : 2021. 5. 31
   */
  removeTemplateRect() {
    let templateLayer = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_NAME
    );
    let templateRect = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_RECT_NAME
    );
    if (templateRect === null || templateRect === undefined) {
      return;
    }
    templateLayer.removeChild(templateRect);
    templateLayer.removeEventListener(
      "mousemove",
      _templateMod.templateMouseMoveEvent,
      true
    );
    templateLayer.removeEventListener(
      "mouseup",
      _templateMod.templateMouseUpEvent,
      true
    );
    templateLayer.style.display = "none";
  }

  /**
   * @function replaceFieldData
   * @name module:Template/TemplateMod.TemplateMod#replaceFieldData
   * @description  해당하는 JSON String의 데이터로 필드를 교체한다.
   *
   * @param {String} jsonData 필드의 JSON String 데이터
   * @param {Boolean} isImport import일 때 호출되는지 여부
   * @Date : 2021. 5. 31
   */
  replaceFieldData(jsonData, isImport = false, bgColor = "#ffac7f") {
    _templateMod.hideAllResizeHandles();
    const field1 = _templateMod.getFieldFromJson(jsonData.m_type, jsonData);
    field1.isRemoved = false;
    const mainGroup = _templateMod.mainCanvas.select(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MAIN_GROUP_NAME
    );
    var selectedFieldGroup = mainGroup.select("#" + field1.id + "Group");
    if (selectedFieldGroup) {
      if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(selectedFieldGroup.freeTransform)) {
        selectedFieldGroup.freeTransform.unplug();
      }
      selectedFieldGroup.remove();
    }

    const newRect = _templateMod.calcFieldPostion(field1, isImport);
    let fieldGroup = field1.getSVGFieldObject(
      _templateMod.mainCanvas,
      mainGroup,
      1.0,
      _templateMod.ownerNode,
      _templateMod.removeDragOverGroup,
      _templateMod.changeFieldValueEvent,
      _templateMod.changeFreeTransform,
      bgColor
    );
    mainGroup.append(fieldGroup);
    _templateMod.fieldDictionary[field1.id] = field1;

    _templateMod.changeFreeTransform(fieldGroup, field1.width, field1.height);
    _templateMod.refreshformerList(field1);

    _templateMod.showAsteriskDiv(
      field1.id,
      field1.required === "true",
      field1.x,
      field1.y,
      field1.height
    );

    _templateMod.showFieldAttribute(field1.id);
  }

  /**
   * @function replaceFieldStringData
   * @name module:Template/TemplateMod.TemplateMod#replaceFieldStringData
   * @description   해당하는 JSON 데이터로 필드를 교체한다.
   *
   * @param {String} jsonData 필드의 JSON String 데이터
   * @Date : 2021. 5. 31
   */
  replaceFieldStringData(jsonData) {
    _templateMod.hideAllResizeHandles();
    const replaceData = JSON.parse(jsonData);
    _templateMod.replaceFieldData(replaceData, true);
  }

  /**
   * @function resetTool
   * @name module:Template/TemplateMod.TemplateMod#resetTool
   * @description  선택된 툴을 리셋한다.
   *
   * @Date : 2021. 5. 31
   */
  resetTool() {
    _templateMod.selectAddFieldType = "";
    _templateMod.removeTemplateRect();
  }

  /**
   * @function selectUserList
   * @name module:Template/TemplateMod.TemplateMod#selectUserList
   * @description "User ID"에 맞는 서명자를 선택된 상태로 만든다. .
   *
   * @param {String} userKey User Id
   * @Date : 2021. 5. 31
   */
  selectUserList(userKey) {
    const ownerDom = _templateMod.ownerNode.querySelector(
      " #Editor-User-Component_Box"
    );
    ownerDom.childNodes.forEach((child) => {
      if (child.classList.contains("Current")) {
        child.classList.toggle("Current");
      }
      const childUserKey = child.getAttribute("data-user-key");
      if (userKey === childUserKey) {
        child.classList.toggle("Current");
      }
    });
  }

  /**
   * @function selectTool
   * @name module:Template/TemplateMod.TemplateMod#selectTool
   * @description 필드를 만들기 위한 툴을 설정한다. .
   *
   * @param {String} tool tool 이름
   * @Date : 2021. 5. 31
   */
  selectTool(tool) {
    if (
      _templateMod.selectAddFieldType !== "" ||
      _templateMod.selectAddFieldType !== undefined
    ) {
      _templateMod.removeTemplateRect();
    }
    switch (tool) {
      case 0: {
        if (_templateMod.selectAddFieldType === "SignField") {
          _templateMod.resetTool();
          return;
        }
        _templateMod.selectAddFieldType = "SignField";
        break;
      }
      case 1: {
        if (_templateMod.selectAddFieldType === "TextField") {
          _templateMod.resetTool();
          return;
        }
        _templateMod.selectAddFieldType = "TextField";
        break;
      }
      case 2: {
        if (_templateMod.selectAddFieldType === "MultiLineTextField") {
          _templateMod.resetTool();
          return;
        }
        _templateMod.selectAddFieldType = "MultiLineTextField";
        break;
      }
      case 3: {
        if (_templateMod.selectAddFieldType === "LabelField") {
          _templateMod.resetTool();
          return;
        }
        _templateMod.selectAddFieldType = "LabelField";
        break;
      }
      case 4: {
        if (_templateMod.selectAddFieldType === "CheckboxField") {
          _templateMod.resetTool();
          return;
        }
        _templateMod.selectAddFieldType = "CheckboxField";
        break;
      }
      case 5: {
        if (_templateMod.selectAddFieldType === "RadioField") {
          _templateMod.resetTool();
          return;
        }
        _templateMod.selectAddFieldType = "RadioField";
        break;
      }
      case 6: {
        if (_templateMod.selectAddFieldType === "ComboboxField") {
          _templateMod.resetTool();
          return;
        }
        _templateMod.selectAddFieldType = "ComboboxField";
        break;
      }
      case 7: {
        if (_templateMod.selectAddFieldType === "DateField") {
          _templateMod.resetTool();
          return;
        }
        _templateMod.selectAddFieldType = "DateField";
        break;
      }
      case 8: {
        if (_templateMod.selectAddFieldType === "NumberField") {
          _templateMod.resetTool();
          return;
        }
        _templateMod.selectAddFieldType = "NumberField";
        break;
      }
      case 9: {
        if (_templateMod.selectAddFieldType === "ImageField") {
          _templateMod.resetTool();
          return;
        }
        _templateMod.selectAddFieldType = "ImageField";
        break;
      }
    }

    _templateMod.createTemplateRect();
    _templateMod.hideFieldAttribute();
    _templateMod.hideAllResizeHandles();
  }

  /**
   * @function showAsteriskDiv
   * @name module:Template/TemplateMod.TemplateMod#showAsteriskDiv
   * @description 해당 필드 ID의 필수 여부를 보여줄지 여부를 설정한다.
   *
   * @param {String} fieldId  Field id
   * @param {Boolean} isShow     보여줄지 여부
   * @param {Number} fieldX     필드의 X좌표
   * @param {Number} fieldY     필드의 Y좌표
   * @param {Number} fieldHeight   필드의 높이
   * @Date : 2021. 5. 31
   */
  showAsteriskDiv(fieldId, isShow, fieldX, fieldY, fieldHeight) {
    let asteriskDiv = _templateMod.ownerNode.querySelector(
      " #" + fieldId + "_asterisk"
    );
    if (asteriskDiv === null) {
      const asteriskDiv = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAsteriskDiv(
        _templateMod.ownerNode,
        fieldId
      );
      asteriskDiv.id = fieldId + "_asterisk";
    }
    _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.showAsteriskDiv(
      _templateMod.ownerNode,
      fieldId,
      isShow,
      fieldX,
      fieldY,
      fieldHeight
    );
  }

  /**
   * @function showFieldAttribute
   * @name module:Template/TemplateMod.TemplateMod#showFieldAttribute
   * @description  해당 필드 ID의 속성창을 보여준다.
   *
   * @param {String} fieldId  Field id
   * @Date : 2021. 5. 31
   */
  showFieldAttribute(fieldId) {
    const field = _templateMod.fieldDictionary[fieldId];
    let attrNode = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttrbutePopup(
      _templateMod.ownerNode,
      field.getBBox()
    );
    var mainGroup = _templateMod.mainCanvas.select(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MAIN_GROUP_NAME
    );
    var fieldAncestors = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.fieldAncestors(field);
    fieldAncestors[0].constructor.showFieldsAttribute(
      _templateMod.ownerNode,
      [field],
      attrNode,
      mainGroup,
      _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsList(),
      _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getDVFieldOptsList(),
      _templateMod.changeFieldValueEvent,
      _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getSignTabShowOpt(),
    );

    let deleteBtnNode = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createFieldDeleteBtn(
      _templateMod.ownerNode,
      _templateMod.fieldDeleteBtnClicked
    );
    deleteBtnNode.style.left = field.x + field.width + 10 + "px";
    const fieldCenterY = field.y + field.height / 2 - 10;
    deleteBtnNode.style.top = fieldCenterY + "px";
    _templateMod.selectUserList(field.ownerId);
  }

  showCommonFieldListAttribute(
    type,
    ownerNode,
    fieldList,
    attrNode,
    mainGroup,
    userList,
    dvOptionList,
    changeEventFunc
  ) {
    switch (type) {
      case "TF": {
        return _Fields_TextField__WEBPACK_IMPORTED_MODULE_4__.TextField.showFieldsAttribute(
          ownerNode,
          fieldList,
          attrNode,
          mainGroup,
          userList,
          dvOptionList,
          changeEventFunc
        );
      }
      case "LF": {
        return _Fields_LabelField_js__WEBPACK_IMPORTED_MODULE_13__.LabelField.showFieldsAttribute(
          ownerNode,
          fieldList,
          attrNode,
          mainGroup,
          userList,
          dvOptionList,
          changeEventFunc
        );
      }
      case "SF": {
        return _Fields_SignField__WEBPACK_IMPORTED_MODULE_7__.SignField.showFieldsAttribute(
          ownerNode,
          fieldList,
          attrNode,
          mainGroup,
          userList,
          dvOptionList,
          changeEventFunc,
          _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getSignTabShowOpt(),
        );
      }
      case "NF": {
        return _Fields_NumberField__WEBPACK_IMPORTED_MODULE_5__.NumberField.showFieldsAttribute(
          ownerNode,
          fieldList,
          attrNode,
          mainGroup,
          userList,
          dvOptionList,
          changeEventFunc
        );
      }
      case "DF": {
        return _Fields_DateField__WEBPACK_IMPORTED_MODULE_6__.DateField.showFieldsAttribute(
          ownerNode,
          fieldList,
          attrNode,
          mainGroup,
          userList,
          dvOptionList,
          changeEventFunc
        );
      }
      case "IMGF": {
        return _Fields_ImageField_js__WEBPACK_IMPORTED_MODULE_9__.ImageField.showFieldsAttribute(
          ownerNode,
          fieldList,
          attrNode,
          mainGroup,
          userList,
          dvOptionList,
          changeEventFunc
        );
      }
      case "MLTF": {
        return _Fields_MultiLineTextField_js__WEBPACK_IMPORTED_MODULE_10__.MultiLineTextField.showFieldsAttribute(
          ownerNode,
          fieldList,
          attrNode,
          mainGroup,
          userList,
          dvOptionList,
          changeEventFunc
        );
      }
      case "CBF": {
        return _Fields_CheckboxField_js__WEBPACK_IMPORTED_MODULE_11__.CheckboxField.showFieldsAttribute(
          ownerNode,
          fieldList,
          attrNode,
          mainGroup,
          userList,
          dvOptionList,
          changeEventFunc
        );
      }
      case "RF": {
        return _Fields_RadioField_js__WEBPACK_IMPORTED_MODULE_12__.RadioField.showFieldsAttribute(
          ownerNode,
          fieldList,
          attrNode,
          mainGroup,
          userList,
          dvOptionList,
          changeEventFunc
        );
      }
      case "CMBF": {
        return _Fields_ComboboxField_js__WEBPACK_IMPORTED_MODULE_14__.ComboboxField.showFieldsAttribute(
          ownerNode,
          fieldList,
          attrNode,
          mainGroup,
          userList,
          dvOptionList,
          changeEventFunc
        );
      }
      default: {
        return _Fields_BaseField__WEBPACK_IMPORTED_MODULE_3__.BaseField.showFieldsAttribute(
          ownerNode,
          fieldList,
          attrNode,
          mainGroup,
          userList,
          dvOptionList,
          changeEventFunc
        );
      }
    }
  }

  /**
   * @function showFieldListAttribute
   * @name module:Template/TemplateMod.TemplateMod#showFieldListAttribute
   * @description 해당 필드들의 속성창을 보여준다.
   *
   * @param {Array} fieldList  Field Object List
   * @Date : 2021. 5. 31
   */
  showFieldListAttribute(fieldList) {
    var dragOverBox = _templateMod.mainCanvas.select(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME
    );
    var dragOverBBox = dragOverBox.getBBox();
    let attrNode = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttrbutePopup(
      _templateMod.ownerNode,
      dragOverBBox
    );
    var mainGroup = _templateMod.mainCanvas.select(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MAIN_GROUP_NAME
    );
    // console.log(Utils.findSameAncestor2(fieldList));
    const commonFieldType = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.findSameAncestor2(fieldList);
    _templateMod.showCommonFieldListAttribute(
      commonFieldType,
      _templateMod.ownerNode,
      fieldList,
      attrNode,
      mainGroup,
      _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsList(),
      _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getDVFieldOptsList(),
      _templateMod.changeFieldValueEvent
    );

    let deleteBtnNode = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createFieldDeleteBtn(
      _templateMod.ownerNode,
      _templateMod.fieldDeleteBtnClicked
    );
    deleteBtnNode.style.left = dragOverBBox.x + dragOverBBox.width + 10 + "px";
    deleteBtnNode.style.top = dragOverBBox.y + 10 + "px";
  }

  /**
   * @function sortFieldsAlign
   * @name module:Template/TemplateMod.TemplateMod#sortFieldsAlign
   * @description 선택된 필드들의 위치를 정렬 시킨다..
   *
   * @param {String} type  정렬 이름. left, hCenter, right, top, vCenter, bottom, VRegularInterval, HRegularInterval
   * @Date : 2021. 5. 31
   */
  sortFieldsAlign(type) {
    var tempGBox = _templateMod.mainCanvas.select(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME
    );
    if (tempGBox === null) {
      return;
    }

    var selectedItems = _templateMod.mainCanvas.selectAll(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME + " > g"
    );
    switch (type) {
      case "left": {
        _templateMod.sortFieldsLeftAlign(selectedItems);
        break;
      }
      case "hCenter": {
        _templateMod.sortFieldsHCenterAlign(tempGBox, selectedItems);
        break;
      }
      case "right": {
        _templateMod.sortFieldsRightAlign(selectedItems);
        break;
      }
      case "top": {
        _templateMod.sortFieldsTopAlign(selectedItems);
        break;
      }
      case "vCenter": {
        _templateMod.sortFieldsVCenterAlign(tempGBox, selectedItems);
        break;
      }
      case "bottom": {
        _templateMod.sortFieldsBottomAlign(selectedItems);
        break;
      }
      case "VRegularInterval": {
        _templateMod.sortFieldsVRegularIntervalAlign(selectedItems);
        break;
      }
      case "HRegularInterval": {
        _templateMod.sortFieldsHRegularIntervalAlign(selectedItems);
        break;
      }
    }
    _templateMod.tmpGroupFtEvent("drag end");
    _templateMod.changeGroupBoxFreeTransform(tempGBox);
  }

  /**
   * @function sortFieldsBottomAlign
   * @name module:Template/TemplateMod.TemplateMod#sortFieldsBottomAlign
   * @description 선택된 필드들을 가장 낮은 Y좌표로 정렬시킨다.
   *
   * @param {Array} selectedItems  Field List
   * @Date : 2021. 5. 31
   */
  sortFieldsBottomAlign(selectedItems) {
    if (selectedItems.length < 2) {
      return;
    }
    var minY = 0;
    selectedItems.forEach((item) => {
      var childRect = item.select("rect");
      var bbox = childRect.getBBox();
      if (bbox.y2 > minY) {
        minY = bbox.y2;
      }
    });
    selectedItems.forEach((item) => {
      var childRect = item.select("rect");
      var bbox = childRect.getBBox();
      childRect.attr({ y: minY - bbox.height });
    });
  }

  /**
   * @function sortFieldsHCenterAlign
   * @name module:Template/TemplateMod.TemplateMod#sortFieldsHCenterAlign
   * @description  선택된 필드들의 Y좌표 중앙으로 정렬시킨다.
   *
   * @param {Array} selectedItems  Field List
   * @Date : 2021. 5. 31
   */
  sortFieldsHCenterAlign(tempGBox, selectedItems) {
    if (selectedItems.length < 2) {
      return;
    }
    var groupBbox = tempGBox.getBBox();
    var cx = groupBbox.cx;
    selectedItems.forEach((item) => {
      var childRect = item.select("rect");
      var bbox = childRect.getBBox();
      childRect.attr({ x: cx - bbox.width / 2 });
    });
  }

  /**
   * @function sortFieldsHRegularIntervalAlign
   * @name module:Template/TemplateMod.TemplateMod#sortFieldsHRegularIntervalAlign
   * @description  선택된 필드들을 가로 간격이 일정하게 정렬한다.
   *
   * @param {Array} selectedItems  Field List
   * @Date : 2021. 5. 31
   */
  sortFieldsHRegularIntervalAlign(selectedItems) {
    if (selectedItems.length < 3) {
      return;
    }
    var items = Array.from(selectedItems);
    items = items.sort(function (a, b) {
      var childRectA = a.select("rect").getBBox();
      var childRectB = b.select("rect").getBBox();
      return childRectA.x - childRectB.x;
    });

    var firstItem = items[0];
    var lastItem = items[items.length - 1];
    var firstItemBBox = firstItem.getBBox();
    var lastItemBBox = lastItem.getBBox();
    var totalInterval = Math.abs(lastItemBBox.x - firstItemBBox.x2);
    for (var idx = 1; idx < items.length - 1; ++idx) {
      var item = items[idx];
      var childRect = item.select("rect");
      var bbox = childRect.getBBox();
      totalInterval = totalInterval - bbox.width;
    }
    var betweenItemCnt = items.length - 1;
    var interval = totalInterval / betweenItemCnt;
    var beforeX2 = firstItemBBox.x2;
    for (var idx2 = 1; idx2 < items.length - 1; ++idx2) {
      var item2 = items[idx2];
      var childRect2 = item2.select("rect");
      childRect2.attr({ x: beforeX2 + interval });
      var bbox2 = childRect2.getBBox();
      beforeX2 = bbox2.x2;
    }
  }

  /**
   * @function sortFieldsLeftAlign
   * @name module:Template/TemplateMod.TemplateMod#sortFieldsLeftAlign
   * @description 선택된 필드들을 가장 낮은 X좌표로 정렬시킨다.
   *
   * @param {Array} selectedItems Field List
   * @Date : 2021. 5. 31
   */
  sortFieldsLeftAlign(selectedItems) {
    if (selectedItems.length < 2) {
      return;
    }
    var minX = Number.MAX_VALUE;
    selectedItems.forEach((item) => {
      var childRect = item.select("rect");
      var bbox = childRect.getBBox();
      if (bbox.x < minX) {
        minX = bbox.x;
      }
    });

    selectedItems.forEach((item) => {
      var childRect = item.select("rect");
      childRect.attr({ x: minX });
    });
  }

  /**
   * @function sortFieldsRightAlign
   * @name module:Template/TemplateMod.TemplateMod#sortFieldsRightAlign
   * @description  선택된 필드들을 가장 큰 X좌표로 정렬시킨다.
   *
   * @param {Array} selectedItems  Field List
   * @Date : 2021. 5. 31
   */
  sortFieldsRightAlign(selectedItems) {
    if (selectedItems.length < 2) {
      return;
    }
    var minX = 0;
    selectedItems.forEach((item) => {
      var childRect = item.select("rect");
      var bbox = childRect.getBBox();
      if (bbox.x2 > minX) {
        minX = bbox.x2;
      }
    });

    selectedItems.forEach((item) => {
      var childRect = item.select("rect");
      var bbox = childRect.getBBox();
      childRect.attr({ x: minX - bbox.width });
    });
  }

  /**
   * @function sortFieldsTopAlign
   * @name module:Template/TemplateMod.TemplateMod#sortFieldsTopAlign
   * @description 선택된 필드들을 가장 높은 Y좌표로 정렬시킨다.
   *
   * @param {Array} selectedItems  Field List
   * @Date : 2021. 5. 31
   */
  sortFieldsTopAlign(selectedItems) {
    if (selectedItems.length < 2) {
      return;
    }
    var minY = Number.MAX_VALUE;
    selectedItems.forEach((item) => {
      var childRect = item.select("rect");
      var bbox = childRect.getBBox();
      if (bbox.y < minY) {
        minY = bbox.y;
      }
    });

    selectedItems.forEach((item) => {
      var childRect = item.select("rect");
      childRect.attr({ y: minY });
    });
  }

  /**
   * @function sortFieldsVCenterAlign
   * @name module:Template/TemplateMod.TemplateMod#sortFieldsVCenterAlign
   * @description 선택된 필드들을 Y좌표의 가운데로 정렬시킨다.
   *
   * @param {Array} selectedItems  Field List
   * @Date : 2021. 5. 31
   */
  sortFieldsVCenterAlign(tempGBox, selectedItems) {
    if (selectedItems.length < 2) {
      return;
    }
    var groupBbox = tempGBox.getBBox();
    var cy = groupBbox.cy;
    selectedItems.forEach((item) => {
      var childRect = item.select("rect");
      var bbox = childRect.getBBox();
      childRect.attr({ y: cy - bbox.height / 2 });
    });
  }

  /**
   * @function sortFieldsVRegularIntervalAlign
   * @name module:Template/TemplateMod.TemplateMod#sortFieldsVRegularIntervalAlign
   * @description 선택된 필드들을 세로간격이 일정하게 정렬시킨다.
   *
   * @param {Array} selectedItems Field List
   * @Date : 2021. 5. 31
   */
  sortFieldsVRegularIntervalAlign(selectedItems) {
    if (selectedItems.length < 3) {
      return;
    }
    var items = Array.from(selectedItems);
    items = items.sort(function (a, b) {
      var childRectA = a.select("rect").getBBox();
      var childRectB = b.select("rect").getBBox();
      return childRectA.y - childRectB.y;
    });

    var firstItem = items[0];
    var lastItem = items[items.length - 1];
    var firstItemBBox = firstItem.getBBox();
    var lastItemBBox = lastItem.getBBox();
    var totalInterval = Math.abs(lastItemBBox.y - firstItemBBox.y2);
    for (var idx = 1; idx < items.length - 1; ++idx) {
      var item = items[idx];
      var childRect = item.select("rect");
      var bbox = childRect.getBBox();
      totalInterval = totalInterval - bbox.height;
    }
    var betweenItemCnt = items.length - 1;
    var interval = totalInterval / betweenItemCnt;
    var beforeY2 = firstItemBBox.y2;
    for (var idx2 = 1; idx2 < items.length - 1; ++idx2) {
      var item2 = items[idx2];
      var childRect2 = item2.select("rect");
      childRect2.attr({ y: beforeY2 + interval });
      var bbox2 = childRect2.getBBox();
      beforeY2 = bbox2.y2;
    }
  }

  /**
   * @function templateInit
   * @name module:Template/TemplateMod.TemplateMod#templateInit
   * @description 초기화 설정한다.
   *
   * @Date : 2021. 5. 31
   */
  templateInit() {
    var layerDiv = document.createElement("div");
    layerDiv.id = _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_NAME;
    layerDiv.style.position = "absolute";
    layerDiv.style.top = "0px";
    layerDiv.style.width = "100%";
    layerDiv.style.zIndex = "99";
    var pdfContainer = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_PDF_VIEWER_CONTAINER
    );
    pdfContainer.appendChild(layerDiv);

    _templateMod.mainCanvas = Snap("100%", "100%");
    let viewer = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_PDF_VIEWER
    );
    viewer.appendChild(_templateMod.mainCanvas.node);
    _templateMod.mainCanvas.attr({
      style: "position: absolute; top: 0; z-index: 99",
    });
    let mainGroup = _templateMod.mainCanvas.group();
    mainGroup.attr({ id: _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MAIN_GROUP_NAME });
    _templateMod.mainCanvas.drag(
      _templateMod.dragmoveFunc,
      _templateMod.dragstartFunc,
      _templateMod.dragendFunc
    );
    viewer.setAttribute("tabindex", 0);
    document.body.addEventListener("keyup", _templateMod.keycheck, true);

    let asteriskLayer = document.createElement("div");
    asteriskLayer.id = _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_ASTERISK_NAME;
    asteriskLayer.style.position = "absolute";
    asteriskLayer.style.top = "0";
    asteriskLayer.style.zIndex = "98";
    asteriskLayer.style.width = "100%";
    viewer.appendChild(asteriskLayer);

    _templateMod.buildFieldformerList();
  }

  /**
   * @function templateMouseMoveEvent
   * @name module:Template/TemplateMod.TemplateMod#templateMouseMoveEvent
   * @description PDF위에 올라가는 Template 레이어에 필드를 움직일 때 발생하는 MOVE Event를 처리한다.
   *
   * @param {Object} event   event Object
   * @Date : 2021. 5. 31
   */
  templateMouseMoveEvent(event) {
    let templateRect = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_RECT_NAME
    );
    let target1 = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_NAME
    );
    let target2 = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_RECT_NAME
    );

    if (!(target1 === event.target || target2 === event.target)) {
      return false;
    }
    let offsetX = event.offsetX;
    let offsetY = event.offsetY;
    if (
      event.target === target2 &&
      !_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(_templateMod.templateRectMousePosition)
    ) {
      offsetX =
        _templateMod.templateRectMousePosition.x +
        (event.pageX - _templateMod.templateRectMousePosition.ox);
      offsetY =
        _templateMod.templateRectMousePosition.y +
        (event.pageY - _templateMod.templateRectMousePosition.oy);
    }
    event.stopPropagation();
    _templateMod.templateRectMousePosition = {
      x: offsetX,
      y: offsetY,
      ox: event.pageX,
      oy: event.pageY,
    };

    (0,animejs_lib_anime_es_js__WEBPACK_IMPORTED_MODULE_0__["default"])({
      targets: templateRect,
      translateX: offsetX,
      translateY: offsetY,
      direction: "normal",
      loop: false,
      delay: animejs_lib_anime_es_js__WEBPACK_IMPORTED_MODULE_0__["default"].stagger(300, { easing: "easeOutElastic(1, .6)" }),
    });
  }

  /**
   * @function templateMouseUpEvent
   * @name module:Template/TemplateMod.TemplateMod#templateMouseUpEvent
   * @description PDF위에 올라가는 Template 레이어에 필드를 움직일 때 발생하는 mount up Event를 처리한다.
   *
   * @param {Object} event  event Object
   * @Date : 2021. 5. 31
   */
  templateMouseUpEvent(event) {
    _templateMod.removeTemplateRect();
    _templateMod.clearSelectedTool();

    var mainGroup = _templateMod.mainCanvas.select(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MAIN_GROUP_NAME
    );
    var pageX = event.pageX;
    var pageRect = _templateMod.getPageBoundingClientRect();
    if (pageX < pageRect.x) {
      pageX = pageRect.x;
    } else if (pageX > pageRect.x + pageRect.width) {
      pageX =
        pageRect.x +
        pageRect.width -
        _templateMod.getCreateFieldDefaultWidth(
          _templateMod.selectAddFieldType
        );
    }
    var fieldGroup = _templateMod.createField(
      _templateMod.selectAddFieldType,
      pageX,
      event.pageY
    );
    mainGroup.append(fieldGroup);
  }

  /**
   * @function templateResize
   * @name module:Template/TemplateMod.TemplateMod#templateResize
   * @description template에서 사용되는 노드들의 사이즈를 재조정한다.
   *
   * @param {Object} event  event Object
   * @param {Number} height   리사이즈된 높이.
   * @Date : 2021. 5. 31
   */
  templateResize(event, height) {
    var templateLayer = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_NAME
    );
    templateLayer.style.height = height + "px";
    _templateMod.mainCanvas.attr({ height: height });
    _templateMod.pageBoundingBox.height = height;
    _templateMod.fieldRepositioning(event, true);

    let asteriskLayer = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_ASTERISK_NAME
    );
    asteriskLayer.style.height = height + "px";

    var tempGBox = _templateMod.mainCanvas.select(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME
    );
    if (tempGBox === null) {
      return;
    }
    var bbox = tempGBox.getBBox();
    _templateMod.removeDragOverGroup();
    _templateMod.createDragOverGroup(bbox);
  }

  /**
   * @function tmpGroupFtEvent
   * @name module:Template/TemplateMod.TemplateMod#tmpGroupFtEvent
   * @description 드래그해서 선택된 필드 그룹 FreeTransform의 이벤트를 처리한다.
   *
   * @param {String} eventName  FreeTransform에서 발생하는 이벤트 이름.
   * @Date : 2021. 5. 31
   */
  tmpGroupFtEvent(eventName) {
    if (eventName === "drag start" || eventName === "apply") {
      //hide attr
      if (_templateMod.isFieldDragStart === true) {
        return;
      }
      _templateMod.isFieldDragStart = true;
      _templateMod.hideFieldAttribute();

      var groups = _templateMod.mainCanvas.selectAll(
        "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME + " > g"
      );
      var oldDataArr = [];
      var newDataArr = [];
      var tempGOld = _templateMod.mainCanvas.select(
        "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME
      );
      groups.forEach((element) => {
        let childRect = element.select("rect");
        _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.showAsteriskDiv(
          _templateMod.ownerNode,
          childRect.attr("id"),
          false
        );
      });
    }
    if (eventName === "drag end") {
      _templateMod.isFieldDragStart = false;
      var groups = _templateMod.mainCanvas.selectAll(
        "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME + " > g"
      );
      var oldDataArr = [];
      var newDataArr = [];
      var tempGOld = _templateMod.mainCanvas.select(
        "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME
      );
      var fieldList = [];
      groups.forEach((element) => {
        let childRect = element.select("rect");
        let fieldId = childRect.attr("id");
        var oldData = _templateMod.getFieldJsonData(fieldId);
        oldDataArr.push(oldData);
        const tempGMatrix = tempGOld.transform().globalMatrix;
        _templateMod.changeFieldPosition(element, tempGMatrix, true);
        var newData = _templateMod.getFieldJsonData(fieldId);
        newDataArr.push(newData);
        fieldList.push(_templateMod.fieldDictionary[fieldId]);
      });
      tempGOld.transform(Snap.matrix().toTransformString());
      _templateMod.showFieldListAttribute(fieldList);
      _templateMod.addUndoRedoAct(
        _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.GROUP_ATTR_CHANGE_ACTION,
        oldDataArr,
        newDataArr
      );
      _templateMod.changeGroupBoxFreeTransform(tempGOld);
    }
  }

  /**
   * @function undoAction
   * @name module:Template/TemplateMod.TemplateMod#undoAction
   * @description  Undo를 처리한다.
   *
   * @Date : 2021. 5. 31
   */
  undoAction() {
    var idx = _templateMod.unredoActionIdx--;
    if (idx < 0) {
      _templateMod.unredoActionIdx = -1;
      return;
    }
    _templateMod.removeDragOverGroup();
    var data = _templateMod.unredoActionDict[idx];
    switch (data.action) {
      case _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.CREATE_FIELD_ACTION: {
        _templateMod.removeField(data.old);
        _templateMod.hideFieldAttribute();
        _templateMod.buildFieldformerList();
        return;
      }
      case _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.REMOVE_FIELD_ACTION:
      case _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.FIELD_ATTR_CHANGE_ACTION: {
        _templateMod.replaceFieldStringData(data.old);
        _templateMod.buildFieldformerList();
        return;
      }
      case _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.GROUP_REMOVE_ACTION:
      case _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.GROUP_ATTR_CHANGE_ACTION: {
        data.old.forEach((oldData) => {
          _templateMod.replaceFieldStringData(oldData);
        });
        _templateMod.buildFieldformerList();
        return;
      }
      case _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.GROUP_ATTR_OWNER_CHANGE_ACTION: {
        data.old.forEach((oldData) => {
          _templateMod.replaceFieldStringData(oldData);
        });
        _templateMod.buildFieldformerList();
        return;
      }
    }
  }

  /**
   * @function updateFieldPoint
   * @name module:Template/TemplateMod.TemplateMod#updateFieldPoint
   * @description  필드의 PDF좌표를 업데이트 한다.
   *
   * @param {Object} fieldGroup  SVG의 group 오브젝트
   *
   * @return {Boolean} 변경이 되지 않으면 false 변경이되면 true
   * @Date : 2021. 5. 31
   */
  updateFieldPoint(fieldGroup) {
    let childRect = fieldGroup.select("rect");
    var field = _templateMod.fieldDictionary[childRect.attr("id")];
    let ost = _templateMod.computePageOffset(field.pageNo);
    const viewer1 = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_PDF_VIEWER
    );
    const viewerBoundingRect = viewer1.getBoundingClientRect();
    var diffMatrix = _templateMod.mainCanvas.transform().diffMatrix;
    var childRectBBox = childRect.getBBox();
    field.x = childRectBBox.x;
    field.y = childRectBBox.y;
    field.width = childRectBBox.width;
    field.height = childRectBBox.height;
    field.pageNo = _templateMod.getPdfPageFromSvgPos(field.x, field.y);

    let pageBorderWidth = _templateMod.getPageBorderWidth(field.pageNo);

    let x =
      diffMatrix.x(childRectBBox.x, childRectBBox.y) +
      viewerBoundingRect.left -
      ost.left -
      pageBorderWidth.left;
    let y =
      diffMatrix.y(childRectBBox.x, childRectBBox.y) +
      viewerBoundingRect.top -
      ost.top -
      pageBorderWidth.top;
    const viewport = _templateMod.pdfViewer._pages[field.pageNo - 1].viewport;
    let pdfPoision = viewport.convertToPdfPoint(x, y);
    let pdfPoision2 = viewport.convertToPdfPoint(
      x + childRectBBox.width,
      y + childRectBBox.height
    );
    let isShow = false;
    if (field.required === "true") {
      isShow = true;
    }

    _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.showAsteriskDiv(
      _templateMod.ownerNode,
      childRect.attr("id"),
      isShow,
      childRectBBox.x,
      childRectBBox.y,
      childRectBBox.height
    );
    let oldPdfX = Number(field.pdfX);
    let oldPdfX2 = Number(field.pdfX2);
    let oldPdfY = Number(field.pdfY);
    let oldPdfY2 = Number(field.pdfY2);
    if (
      pdfPoision[0].toFixed(2) === oldPdfX.toFixed(2) &&
      pdfPoision[1].toFixed(2) === oldPdfY.toFixed(2) &&
      pdfPoision2[0].toFixed(2) === oldPdfX2.toFixed(2) &&
      pdfPoision2[1].toFixed(2) === oldPdfY2.toFixed(2)
    ) {
      return false;
    }
    field.pdfX = pdfPoision[0];
    field.pdfY = pdfPoision[1];
    field.pdfX2 = pdfPoision2[0];
    field.pdfY2 = pdfPoision2[1];

    return true;
  }

  appendFontFamily(fontFamilyArr) {
    _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.appendFontFamily(fontFamilyArr);
  }

  appendSignTabShowOpt(signTabShowDefOptVal) {
    if (signTabShowDefOptVal) {
      if (typeof signTabShowDefOptVal.useDrawSign !== "undefined") {
        _templateMod.useDrawSign = signTabShowDefOptVal.useDrawSign;
      }
      if (typeof signTabShowDefOptVal.useImageSign !== "undefined") {
        _templateMod.useImageSign = signTabShowDefOptVal.useImageSign;
      }
      if (typeof signTabShowDefOptVal.useRegSign !== "undefined") {
        _templateMod.useRegSign = signTabShowDefOptVal.useRegSign;
      }
    }
  }
}


/***/ }),

/***/ "./js/pdf_form/src/utils/color-picker.js":
/*!***********************************************!*\
  !*** ./js/pdf_form/src/utils/color-picker.js ***!
  \***********************************************/
/***/ (function(module) {

/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2021 Taufik Nurrohman
 *
 * <https://github.com/taufik-nurrohman/color-picker>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */

(function (global, factory) {
     true ? module.exports = factory() : 0;
})(this, function () {
    'use strict';
    var isArray = function isArray(x) {
        return Array.isArray(x);
    };
    var isDefined = function isDefined(x) {
        return 'undefined' !== typeof x;
    };
    var isFunction = function isFunction(x) {
        return 'function' === typeof x;
    };
    var isInstance = function isInstance(x, of) {
        return x && isSet(of) && x instanceof of;
    };
    var isNull = function isNull(x) {
        return null === x;
    };
    var isNumber = function isNumber(x) {
        return 'number' === typeof x;
    };
    var isNumeric = function isNumeric(x) {
        return /^-?(?:\d*.)?\d+$/.test(x + "");
    };
    var isObject = function isObject(x, isPlain) {
        if (isPlain === void 0) {
            isPlain = true;
        }
        if ('object' !== typeof x) {
            return false;
        }
        return isPlain ? isInstance(x, Object) : true;
    };
    var isSet = function isSet(x) {
        return isDefined(x) && !isNull(x);
    };
    var isString = function isString(x) {
        return 'string' === typeof x;
    };
    var fromJSON = function fromJSON(x) {
        var value = null;
        try {
            value = JSON.parse(x);
        } catch (e) { }
        return value;
    };
    var fromStates = function fromStates() {
        for (var _len = arguments.length, lot = new Array(_len), _key = 0; _key < _len; _key++) {
            lot[_key] = arguments[_key];
        }
        return Object.assign.apply(Object, [{}].concat(lot));
    };
    var fromValue = function fromValue(x) {
        if (isArray(x)) {
            return x.map(function (v) {
                return fromValue(x);
            });
        }
        if (isObject(x)) {
            for (var k in x) {
                x[k] = fromValue(x[k]);
            }
            return x;
        }
        if (false === x) {
            return 'false';
        }
        if (null === x) {
            return 'null';
        }
        if (true === x) {
            return 'true';
        }
        return "" + x;
    };
    var toCaseCamel = function toCaseCamel(x) {
        return x.replace(/[-_.](\w)/g, function (m0, m1) {
            return toCaseUpper(m1);
        });
    };
    var toCaseUpper = function toCaseUpper(x) {
        return x.toUpperCase();
    };
    var toCount = function toCount(x) {
        return x.length;
    };
    var toEdge = function toEdge(x, edges) {
        if (isSet(edges[0]) && x < edges[0]) {
            return edges[0];
        }
        if (isSet(edges[1]) && x > edges[1]) {
            return edges[1];
        }
        return x;
    };
    var toJSON = function toJSON(x) {
        return JSON.stringify(x);
    };
    var toNumber = function toNumber(x, base) {
        if (base === void 0) {
            base = 10;
        }
        return base ? parseInt(x, base) : parseFloat(x);
    };
    var toObjectCount = function toObjectCount(x) {
        return toCount(toObjectKeys(x));
    };
    var toObjectKeys = function toObjectKeys(x) {
        return Object.keys(x);
    };
    var toRound = function toRound(x) {
        return isNumber(x) ? Math.round(x) : null;
    };
    var toString = function toString(x, base) {
        if (base === void 0) {
            base = 10;
        }
        return isNumber(x) ? x.toString(base) : "" + x;
    };
    var toValue = function toValue(x) {
        if (isArray(x)) {
            return x.map(function (v) {
                return toValue(v);
            });
        }
        if (isNumeric(x)) {
            return toNumber(x);
        }
        if (isObject(x)) {
            for (var k in x) {
                x[k] = toValue(x[k]);
            }
            return x;
        }
        if ('false' === x) {
            return false;
        }
        if ('null' === x) {
            return null;
        }
        if ('true' === x) {
            return true;
        }
        return x;
    };
    var D = document;
    var W = window;
    var B = D.body;
    var R = D.documentElement;
    var getAttribute = function getAttribute(node, attribute, parseValue) {
        if (parseValue === void 0) {
            parseValue = true;
        }
        if (!hasAttribute(node, attribute)) {
            return null;
        }
        var value = node.getAttribute(attribute);
        return parseValue ? toValue(value) : value;
    };
    var getDatum = function getDatum(node, datum, parseValue) {
        if (parseValue === void 0) {
            parseValue = true;
        }
        var value = getAttribute(node, 'data-' + datum, parseValue),
            v = (value + "").trim();
        if (parseValue && v && ('[' === v[0] && ']' === v.slice(-1) || '{' === v[0] && '}' === v.slice(-1)) && null !== (v = fromJSON(value))) {
            return v;
        }
        return value;
    };
    var getParent = function getParent(node) {
        return node.parentNode || null;
    };
    var getState = function getState(node, state) {
        return hasState(node, state) && node[state] || null;
    };
    var getText = function getText(node, trim) {
        if (trim === void 0) {
            trim = true;
        }
        var state = 'textContent';
        if (!hasState(node, state)) {
            return false;
        }
        var content = node[state];
        content = trim ? content.trim() : content;
        return "" !== content ? content : null;
    };
    var hasAttribute = function hasAttribute(node, attribute) {
        return node.hasAttribute(attribute);
    };
    var hasState = function hasState(node, state) {
        return state in node;
    };
    var isWindow = function isWindow(node) {
        return node === W;
    };
    var letAttribute = function letAttribute(node, attribute) {
        return node.removeAttribute(attribute), node;
    };
    var letElement = function letElement(node) {
        var parent = getParent(node);
        return node.remove(), parent;
    };
    var setAttribute = function setAttribute(node, attribute, value) {
        if (true === value) {
            value = attribute;
        }
        return node.setAttribute(attribute, fromValue(value)), node;
    };
    var setAttributes = function setAttributes(node, attributes) {
        var value;
        for (var attribute in attributes) {
            value = attributes[attribute];
            if (value || "" === value || 0 === value) {
                setAttribute(node, attribute, value);
            } else {
                letAttribute(node, attribute);
            }
        }
        return node;
    };
    var setChildLast = function setChildLast(parent, node) {
        return parent.appendChild(node), node;
    };
    var setDatum = function setDatum(node, datum, value) {
        if (isArray(value) || isObject(value)) {
            value = toJSON(value);
        }
        return setAttribute(node, 'data-' + datum, value);
    };
    var setElement = function setElement(node, content, attributes) {
        node = isString(node) ? D.createElement(node) : node;
        if (isObject(content)) {
            attributes = content;
            content = false;
        }
        if (isString(content)) {
            setHTML(node, content);
        }
        if (isObject(attributes)) {
            setAttributes(node, attributes);
        }
        return node;
    };
    var setHTML = function setHTML(node, content, trim) {
        if (trim === void 0) {
            trim = true;
        }
        if (null === content) {
            return node;
        }
        var state = 'innerHTML';
        return hasState(node, state) && (node[state] = trim ? content.trim() : content), node;
    };
    var setState = function setState(node, key, value) {
        return node[key] = value, node;
    };
    var setStyle = function setStyle(node, style, value) {
        if (isNumber(value)) {
            value += 'px';
        }
        return node.style[toCaseCamel(style)] = fromValue(value), node;
    };
    var setText = function setText(node, content, trim) {
        if (trim === void 0) {
            trim = true;
        }
        if (null === content) {
            return node;
        }
        var state = 'textContent';
        return hasState(node, state) && (node[state] = trim ? content.trim() : content), node;
    };
    var offEvent = function offEvent(name, node, then) {
        node.removeEventListener(name, then);
    };
    var offEventDefault = function offEventDefault(e) {
        return e;// && e.preventDefault();
    };
    var offEvents = function offEvents(names, node, then) {
        names.forEach(function (name) {
            return offEvent(name, node, then);
        });
    };
    var onEvent = function onEvent(name, node, then, options) {
        if (options === void 0 || options === false) {
            var supportsPassive = false;
            try {
                var opts = Object.defineProperty({}, 'passive', {
                    get: function () {
                        supportsPassive = true;
                    }
                });
                window.addEventListener("testPassive", null, opts);
                window.removeEventListener("testPassive", null, opts);
            } catch (e) { }
            options = supportsPassive ? { passive: true } : false;
        }
        
        node.addEventListener(name, then, options);
    };
    var onEvents = function onEvents(names, node, then, options) {
        if (options === void 0) {
            options = false;
        }
        names.forEach(function (name) {
            return onEvent(name, node, then, options);
        });
    };

    function hook($) {
        var hooks = {};

        function fire(name, data) {
            if (!isSet(hooks[name])) {
                return $;
            }
            hooks[name].forEach(function (then) {
                return then.apply($, data);
            });
            return $;
        }

        function off(name, then) {
            if (!isSet(name)) {
                return hooks = {}, $;
            }
            if (isSet(hooks[name])) {
                if (isSet(then)) {
                    for (var i = 0, _j = hooks[name].length; i < _j; ++i) {
                        if (then === hooks[name][i]) {
                            hooks[name].splice(i, 1);
                            break;
                        }
                    } // Clean-up empty hook(s)
                    if (0 === j) {
                        delete hooks[name];
                    }
                } else {
                    delete hooks[name];
                }
            }
            return $;
        }

        function on(name, then) {
            if (!isSet(hooks[name])) {
                hooks[name] = [];
            }
            if (isSet(then)) {
                hooks[name].push(then);
            }
            return $;
        }
        $.hooks = hooks;
        $.fire = fire;
        $.off = off;
        $.on = on;
        return $;
    }
    var getAxis = function getAxis(event, node) {
        var touches = event.touches,
            x = touches ? touches[0].clientX : event.clientX,
            y = touches ? touches[0].clientY : event.clientY;
        if (node) {
            var rect = getRect(node);
            return [x - rect[0], y - rect[1], rect[0], rect[1]];
        }
        return [x, y];
    };
    var getRect = function getRect(node) {
        var h, rect, w, x, y, X, Y;
        if (isWindow(node)) {
            x = node.pageXOffset || R.scrollLeft || B.scrollLeft;
            y = node.pageYOffset || R.scrollTop || B.scrollTop;
            w = node.innerWidth;
            h = node.innerHeight;
        } else {
            rect = node.getBoundingClientRect();
            x = rect.left;
            y = rect.top;
            w = rect.width;
            h = rect.height;
            X = rect.right;
            Y = rect.bottom;
        }
        return [x, y, w, h, X, Y];
    };
    let name = 'CP',
        delay = W.setTimeout,
        hex = 'HEX';

    function getClosest(a, b) {
        if (a === b) {
            return a;
        }
        while ((a = a.parentElement) && a !== b);
        return a;
    } // Convert cursor position to RGBA
    function P2RGB(a) {
        let h = +a[0],
            s = +a[1],
            v = +a[2],
            r,
            g,
            b,
            i,
            f,
            p,
            q,
            t;
        i = Math.floor(h * 6);
        f = h * 6 - i;
        p = v * (1 - s);
        q = v * (1 - f * s);
        t = v * (1 - (1 - f) * s);
        i = i || 0;
        q = q || 0;
        t = t || 0;
        switch (i % 6) {
            case 0:
                r = v, g = t, b = p;
                break;
            case 1:
                r = q, g = v, b = p;
                break;
            case 2:
                r = p, g = v, b = t;
                break;
            case 3:
                r = p, g = q, b = v;
                break;
            case 4:
                r = t, g = p, b = v;
                break;
            case 5:
                r = v, g = p, b = q;
                break;
        }
        return [toRound(r * 255), toRound(g * 255), toRound(b * 255), isSet(a[3]) ? +a[3] : 1];
    } // Convert RGBA to HSVA
    function RGB2HSV(a) {
        let r = +a[0] / 255,
            g = +a[1] / 255,
            b = +a[2] / 255,
            max = Math.max(r, g, b),
            min = Math.min(r, g, b),
            h,
            s,
            v = max,
            d = max - min;
        s = max === 0 ? 0 : d / max;
        if (max === min) {
            h = 0; // Achromatic
        } else {
            switch (max) {
                case r:
                    h = (g - b) / d + (g < b ? 6 : 0);
                    break;
                case g:
                    h = (b - r) / d + 2;
                    break;
                case b:
                    h = (r - g) / d + 4;
                    break;
            }
            h /= 6;
        }
        return [h, s, v, isSet(a[3]) ? +a[3] : 1];
    }
    const EVENTS_DOWN = ['touchstart', 'mousedown'];
    const EVENTS_MOVE = ['touchmove', 'mousemove'];
    const EVENTS_RESIZE = ['orientationchange', 'resize'];
    const EVENTS_UP = ['touchend', 'mouseup'];

    function CP(source, state = {}) {
        if (!D) {
            D = document;
        }
        if (!W) {
            W = window;
        }
        if (!B) {
            B = D.body;
        }
        if (!R) {
            R = D.documentElement;
        }
        if (!source) return;
        const $ = this; // Return new instance if `CP` was called without the `new` operator
        if (!isInstance($, CP)) {
            return new CP(source, state);
        } // Already instantiated, skip!
        if (source[name]) {
            return;
        }
        let {
            fire,
            hooks
        } = hook($);
        $.state = state = fromStates(CP.state, isString(state) ? {
            color: state
        } : state || {});
        $.source = source;
        $.visible = false; // Store current instance to `CP.instances`
        CP.instances[source.id || source.name || toObjectCount(CP.instances)] = $; // Mark current DOM as active color picker to prevent duplicate instance
        source[name] = 1;

        function theValue(from) {
            let to = CP[isFunction(CP[state.color]) ? state.color : hex],
                theColor; // Get value from `data-color` attribute
            if (theColor = getDatum(source, 'color')) {
                if (isSet(from)) {
                    return setDatum(source, 'color', to(from));
                }
                return to(theColor);
            } // Get value from `value` attribute
            if (theColor = getState(source, 'value')) {
                if (isSet(from)) {
                    return setState(source, 'value', to(from));
                }
                return to(theColor);
            } // Get value from content
            if (theColor = getText(source)) {
                if (isSet(from)) {
                    return setText(source, to(from));
                }
                return to(theColor);
            }
            if (isSet(from)) {
                return; // Do nothing
            }
            return [0, 0, 0, 1]; // Default to black
        }
        let className = state['class'],
            doEnter,
            doExit,
            doFit,
            doResize,
            theColor = theValue(),
            theData = RGB2HSV(theColor),
            self = setElement('div', {
                'class': className
            }),
            C = setElement('div'),
            SV = setElement('div', {
                'class': className + ':sv'
            }),
            H = setElement('div', {
                'class': className + ':h'
            }),
            A = setElement('div', {
                'class': className + ':a'
            }),
            SVColor = setElement('div'),
            SVSaturation = setElement('div'),
            SVValue = setElement('div'),
            SVCursor = setElement('i'),
            HColor = setElement('div'),
            HCursor = setElement('i'),
            AColor = setElement('div'),
            APattern = setElement('div'),
            ACursor = setElement('i'),
            SVStarting = 0,
            HStarting = 0,
            AStarting = 0,
            SVDragging = 0,
            HDragging = 0,
            ADragging = 0;
        setChildLast(self, C);
        setChildLast(C, SV);
        setChildLast(C, H);
        setChildLast(C, A);
        setChildLast(SV, SVColor);
        setChildLast(SV, SVSaturation);
        setChildLast(SV, SVValue);
        setChildLast(SV, SVCursor);
        setChildLast(H, HColor);
        setChildLast(H, HCursor);
        setChildLast(A, AColor);
        setChildLast(A, APattern);
        setChildLast(A, ACursor);

        function doApply(isFirst, toParent) {
            // Refresh data
            theData = RGB2HSV(theColor = theValue());
            if (!isFirst) {
                setChildLast(toParent || state.parent || B, self);
                $.visible = true;
            }
            doEnter = toParent => {
                return doApply(0, toParent), fire('enter', theColor), $;
            };
            doExit = () => {
                if (getParent(self)) {
                    letElement(self);
                    $.current = null;
                    $.visible = false;
                }
                offEvents(EVENTS_DOWN, SV, doDownSV);
                offEvents(EVENTS_DOWN, H, doDownH);
                offEvents(EVENTS_DOWN, A, doDownA);
                offEvents(EVENTS_MOVE, D, doMove);
                offEvents(EVENTS_UP, D, doStop);
                offEvents(EVENTS_RESIZE, W, doResize);
                return fire('exit', theColor);
            };
            doFit = to => {
                let rootRect = getRect(R),
                    sourceRect = getRect(source),
                    winRect = getRect(W),
                    scrollBarHeight = winRect[3] - R.clientHeight,
                    // Horizontal scroll bar
                    scrollBarWidth = winRect[2] - rootRect[2],
                    // Vertical scroll bar
                    selfRect = getRect(self),
                    selfHeight = selfRect[3],
                    selfWidth = selfRect[2],
                    selfLeft = sourceRect[0] + winRect[0],
                    selfTop = sourceRect[1] + winRect[1] + sourceRect[3]; // Drop!
                if (isObject(to)) {
                    isSet(to[0]) && (selfLeft = to[0]);
                    isSet(to[1]) && (selfTop = to[1]);
                } else {
                    let minX = winRect[0],
                        minY = winRect[1],
                        maxX = winRect[0] + winRect[2] - selfWidth - scrollBarWidth,
                        maxY = winRect[1] + winRect[3] - selfHeight - scrollBarHeight;
                    selfLeft = toEdge(selfLeft, [minX, maxX]) >> 0;
                    selfTop = toEdge(selfTop, [minY, maxY]) >> 0;
                }
                setStyle(self, 'left', selfLeft);
                setStyle(self, 'top', selfTop);
                return fire('fit', theColor);
            };
            doResize = () => doFit();

            function doDownA(e) {
                $.current = A;
                AStarting = ADragging = 1;
                doMove(e);
                offEventDefault(e);
            }

            function doDownH(e) {
                $.current = H;
                HStarting = HDragging = 1;
                doMove(e);
                offEventDefault(e);
            }

            function doDownSV(e) {
                $.current = SV;
                SVStarting = SVDragging = 1;
                doMove(e);
                offEventDefault(e);
            }

            function doMove(e) {
                SVDragging && doSetSVCursor(e);
                HDragging && doSetHCursor(e);
                ADragging && doSetACursor(e);
                theColor = P2RGB(theData);
                if (SVDragging || HDragging || ADragging) {
                    fire(SVStarting || HStarting || AStarting ? 'start' : 'drag', theColor);
                    fire('change', theColor);
                }
                SVStarting = HStarting = AStarting = 0;
            }

            function doSetColor() {
                doSetCursor(theData);
                let a = P2RGB(theData),
                    b = P2RGB([theData[0], 1, 1]);
                setStyle(SVColor, 'background-color', 'rgb(' + b[0] + ',' + b[1] + ',' + b[2] + ')');
                setStyle(AColor, 'background-image', 'linear-gradient(rgb(' + a[0] + ',' + a[1] + ',' + a[2] + '),transparent)');
            }

            function doSetCursor(x) {
                isSet(x[1]) && setStyle(SVCursor, 'right', SVWidth - SVWidthCursor / 2 - SVWidth * +x[1]);
                isSet(x[2]) && setStyle(SVCursor, 'top', SVHeight - SVHeightCursor / 2 - SVHeight * +x[2]);
                isSet(x[0]) && setStyle(HCursor, 'top', HHeight - HHeightCursor / 2 - HHeight * +x[0]);
                isSet(x[3]) && setStyle(ACursor, 'top', AHeight - AHeightCursor / 2 - AHeight * +x[3]);
            }

            function doSetACursor(e) {
                theData[3] = (AHeight - toEdge(getAxis(e, A)[1], [0, AHeight])) / AHeight;
                doSetColor();
            }

            function doSetHCursor(e) {
                theData[0] = (HHeight - toEdge(getAxis(e, H)[1], [0, HHeight])) / HHeight;
                doSetColor();
            }

            function doSetSVCursor(e) {
                let SVPoint = getAxis(e, SV),
                    x = toEdge(SVPoint[0], [0, SVWidth]),
                    y = toEdge(SVPoint[1], [0, SVHeight]);
                theData[1] = 1 - (SVWidth - x) / SVWidth;
                theData[2] = (SVHeight - y) / SVHeight;
                doSetColor();
            }

            function doStop(e) {
                theColor = P2RGB(theData);
                let t = e.target,
                    isSource = source === getClosest(t, source),
                    isSelf = self === getClosest(t, self);
                $.current = null;
                if (!isSource && !isSelf) {
                    if (hooks.blur) {
                        fire('blur', theColor);
                    } else {
                        // Click outside the source or picker element to exit
                        if (SVDragging || HDragging || ADragging);
                        else {
                            getParent(self) && doExit();
                        }
                    }
                } else {
                    if (isSelf) {
                        if (SVDragging || HDragging || ADragging) {
                            fire('stop', theColor);
                        }
                    }
                }
                SVDragging = HDragging = ADragging = 0;
            }
            let SVRect = getRect(SV),
                SVRectCursor = getRect(SVCursor),
                HRect = getRect(H),
                HRectCursor = getRect(HCursor),
                ARect = getRect(A),
                ARectCursor = getRect(ACursor),
                SVHeight = SVRect[3],
                SVHeightCursor = SVRectCursor[3],
                SVWidth = SVRect[2],
                SVWidthCursor = SVRectCursor[2],
                HHeight = HRect[3],
                HHeightCursor = HRectCursor[3],
                AHeight = ARect[3],
                AHeightCursor = ARectCursor[3];
            if (isFirst) {
                onEvents(EVENTS_DOWN, source, doClick);
                delay(() => {
                    fire('change', theColor);
                }, 1);
            } else {
                onEvents(EVENTS_DOWN, SV, doDownSV);
                onEvents(EVENTS_DOWN, H, doDownH);
                onEvents(EVENTS_DOWN, A, doDownA);
                onEvents(EVENTS_MOVE, D, doMove);
                onEvents(EVENTS_UP, D, doStop);
                onEvents(EVENTS_RESIZE, W, doResize);
                doFit();
            }
            doSetColor();
            $.color = (r, g, b, a) => CP[isFunction(CP[state.color]) ? state.color : hex]([r, g, b, a]);
            $.current = null;
            $.enter = doEnter;
            $.exit = doExit;
            $.fit = doFit;
            $.get = () => theValue();
            $.pop = () => {
                if (!source[name]) {
                    return $; // Already ejected
                }
                delete source[name];
                offEvents(EVENTS_DOWN, source, doClick);
                return doExit(), fire('pop', theColor);
            };
            $.set = (r, g, b, a) => {
                theData = RGB2HSV([r, g, b, a]);
                return doSetColor(), $;
            };
            $.self = self;
            $.value = (r, g, b, a) => ($.set(r, g, b, a), fire('change', [r, g, b, a]));
        }
        doApply(1);

        function doClick(e) {
            if (hooks.focus) {
                fire('focus', theColor);
            } else {
                let t = e.target,
                    isSource = source === getClosest(t, source);
                if (isSource) {
                    !getParent(self) && doEnter(state.parent);
                } else {
                    doExit();
                }
            }
        }
        return $;
    }
    CP[hex] = x => {
        if (isString(x)) {
            let count = (x = x.trim()).length;
            if ((4 === count || 7 === count) && '#' === x[0]) {
                if (/^#([a-f\d]{3}){1,2}$/i.test(x)) {
                    if (4 === count) {
                        return [toNumber(x[1] + x[1], 16), toNumber(x[2] + x[2], 16), toNumber(x[3] + x[3], 16), 1];
                    }
                    return [toNumber(x[1] + x[2], 16), toNumber(x[3] + x[4], 16), toNumber(x[5] + x[6], 16), 1];
                }
            } else if ((5 === count || 9 === count) && '#' === x[0]) {
                if (/^#([a-f\d]{3,4}){1,2}$/i.test(x)) {
                    if (5 === count) {
                        return [toNumber(x[1] + x[1], 16), toNumber(x[2] + x[2], 16), toNumber(x[3] + x[3], 16), toNumber(x[4] + x[4], 16) / 255];
                    }
                    return [toNumber(x[1] + x[2], 16), toNumber(x[3] + x[4], 16), toNumber(x[5] + x[6], 16), toNumber(x[7] + x[8], 16) / 255];
                }
            }
            return [0, 0, 0, 1]; // Default to black
        }
        return '#' + ('000000' + toString(+x[2] | +x[1] << 8 | +x[0] << 16, 16)).slice(-6) + (isSet(x[3]) && x[3] < 1 ? toString(toRound(x[3] * 255) + 0x10000, 16).substr(-2) : "");
    };
    CP.instances = {};
    CP.state = {
        'class': 'color-picker',
        'color': hex,
        'parent': null
    };
    CP.version = '2.2.0';
    return CP;
});

/***/ }),

/***/ "./js/pdf_form/src/utils/utils.js":
/*!****************************************!*\
  !*** ./js/pdf_form/src/utils/utils.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Utils: () => (/* binding */ Utils)
/* harmony export */ });
/* harmony import */ var _Constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./../Constants.js */ "./js/pdf_form/src/Constants.js");
/* harmony import */ var _Translator_translator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../Translator/translator.js */ "./js/pdf_form/src/Translator/translator.js");
/**
 * @module Template/Utils
 */





/**
 * @description  Util 모음 Class
 *
 * @property {Array} fontFamilyComboBox {@link module:Template/Utils.Utils#fontFamilyComboBox}
 * @property {Array} dateFormatComboBox {@link module:Template/Utils.Utils#dateFormatComboBox}
 * @property {Array} fontSizeComboBox {@link module:Template/Utils.Utils#fontSizeComboBox}
 * @property {Array} signPenWidthComboBox {@link module:Template/Utils.Utils#signPenWidthComboBox}
 * @property {Array} userInfoOptionList {@link module:Template/Utils.Utils#userInfoOptionList}
 * @property {Number} userInfoOptionListCount {@link module:Template/Utils.Utils#userInfoOptionListCount}
 * @property {Array} dvFieldOptionList {@link module:Template/Utils.Utils#dvFieldOptionList}
 *
 * @property {Function} addObjectsToCanvas {@link module:Template/Utils.Utils#addObjectsToCanvas}
 * @property {Function} addSignSvgToCanvas {@link module:Template/Utils.Utils#addSignSvgToCanvas}
 * @property {Function} boundingRectToRect {@link module:Template/Utils.Utils#boundingRectToRect}
 * @property {Function} cloneFabricCanvas {@link module:Template/Utils.Utils#cloneFabricCanvas}
 * @property {Function} cloneObject {@link module:Template/Utils.Utils#cloneObject}
 * @property {Function} cloneObjectToObject {@link module:Template/Utils.Utils#cloneObjectToObject}
 * @property {Function} closeSelect2Tag {@link module:Template/Utils.Utils#closeSelect2Tag}
 * @property {Function} createAsteriskDiv {@link module:Template/Utils.Utils#createAsteriskDiv}
 * @property {Function} createAttrbutePopup {@link module:Template/Utils.Utils#createAttrbutePopup}
 * @property {Function} createAttributeCheckBoxNode {@link module:Template/Utils.Utils#createAttributeCheckBoxNode}
 * @property {Function} createAttributeColorInputNode {@link module:Template/Utils.Utils#createAttributeColorInputNode}
 * @property {Function} createAttributeDateInputNode {@link module:Template/Utils.Utils#createAttributeDateInputNode}
 * @property {Function} createAttributeInputNode {@link module:Template/Utils.Utils#createAttributeInputNode}
 * @property {Function} createAttributeInputNode {@link module:Template/Utils.Utils#createAttributeInputNode}
 * @property {Function} createAttributePanelNode {@link module:Template/Utils.Utils#createAttributePanelNode}
 * @property {Function} createAttributeSelectInnerNode {@link module:Template/Utils.Utils#createAttributeSelectInnerNode}
 * @property {Function} createAttributeSelectNode {@link module:Template/Utils.Utils#createAttributeSelectNode}
 * @property {Function} createAttributeToggleButtonNode {@link module:Template/Utils.Utils#createAttributeToggleButtonNode}
 * @property {Function} createDividerNode {@link module:Template/Utils.Utils#createDividerNode}
 * @property {Function} createFieldDeleteBtn {@link module:Template/Utils.Utils#createFieldDeleteBtn}
 * @property {Function} createTextAlignButtonNode {@link module:Template/Utils.Utils#createTextAlignButtonNode}
 * @property {Function} createTextAttrbuteNode {@link module:Template/Utils.Utils#createTextAttrbuteNode}
 * @property {Function} createTextBoldButtonNode {@link module:Template/Utils.Utils#createTextBoldButtonNode}
 * @property {Function} createTextColorButtonNode {@link module:Template/Utils.Utils#createTextColorButtonNode}
 * @property {Function} fieldAncestors {@link module:Template/Utils.Utils#fieldAncestors}
 * @property {Function} findSameAncestor {@link module:Template/Utils.Utils#findSameAncestor}
 * @property {Function} getFonSizeComboBox {@link module:Template/Utils.Utils#getFonSizeComboBox}
 * @property {Function} getUserInfoOptsList {@link module:Template/Utils.Utils#getUserInfoOptsList}
 * @property {Function} imageFileToBase64 {@link module:Template/Utils.Utils#imageFileToBase64}
 * @property {Function} isEmptyObject {@link module:Template/Utils.Utils#isEmptyObject}
 * @property {Function} isShowAsteriskDiv {@link module:Template/Utils.Utils#isShowAsteriskDiv}
 * @property {Function} isStringEmpty {@link module:Template/Utils.Utils#isStringEmpty}
 * @property {Function} mergeFieldsBBox {@link module:Template/Utils.mergeFieldsBBox#addObjectsToCanvas}
 * @property {Function} mergeObjectsRect {@link module:Template/Utils.Utils#mergeObjectsRect}
 * @property {Function} mergeRect {@link module:Template/Utils.Utils#mergeRect}
 * @property {Function} repositionFieldDeleteBtn {@link module:Template/Utils.Utils#repositionFieldDeleteBtn}
 * @property {Function} setDVFieldOptsList {@link module:Template/Utils.Utils#setDVFieldOptsList}
 * @property {Function} setUserInfoOptsList {@link module:Template/Utils.Utils#setUserInfoOptsList}
 * @property {Function} setUserInfoOptsListCount {@link module:Template/Utils.Utils#setUserInfoOptsListCount}
 * @property {Function} showAsteriskDiv {@link module:Template/Utils.Utils#showAsteriskDiv}
 * 
 * @FileName utils.js
 * @since 2021.05.31
 */
class Utils {

    /**
     * @static
     * @type {Array}
     * @name module:Template/Utils.Utils#fontFamilyComboBox
     * @description (Static) 폰트 종류
     */
    static fontFamilyComboBox = [
        {
            text: "맑은 고딕",
            value: "MalgunGothic"
        },
        {
            text: "바탕체",
            value: "Batang"
        }
    ];

    /**
     * @static
     * @type {Array}
     * @name module:Template/Utils.Utils#dateFormatComboBox
     * @description (Static) 날짜 포멧 리스트
     */
    static dateFormatComboBox = [
        {
            text: "YYYY-MM-DD",
            value: "Y-m-d"
        },
        {
            text: "YYYY/MM/DD",
            value: "Y/m/d"
        },
        {
            text: "YYYY.MM.DD",
            value: "Y.m.d"
        }
    ]

    static radioTypeList = [
        {
            text: "Type 1",
            value: _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.RADIO_TYPE_1
        },
        {
            text: "Type 2",
            value: _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.RADIO_TYPE_2
        }
    ]
    /**
     * @static
     * @type {Array}
     * @name module:Template/Utils.Utils#fontSizeComboBox
     * @description (Static) 폰트 사이즈 콤보박스 리스트
     */
    static fontSizeComboBox = [];

    /**
     * @static
     * @type {Array}
     * @name module:Template/Utils.Utils#signPenWidthComboBox
     * @description (Static) 서명펜 두께 콤보박스 리스트
     */
    static signPenWidthComboBox = [];

    /**
     * @static
     * @type {Array}
     * @name module:Template/Utils.Utils#userInfoOptionList
     * @description (Static) 서명자 리스트
     */
    static userInfoOptionList = [];

    /**
     * @static
     * @type {Number}
     * @name module:Template/Utils.Utils#userInfoOptionListCount
     * @description (Static) 서명자 리스트 갯수
     */
    static userInfoOptionListCount = 0;

    /**
     * @static
     * @type {Array}
     * @name module:Template/Utils.Utils#dvFieldOptionList
     * @description (Static) 기본값 옵션 리스트
     */
    static dvFieldOptionList = [];

    /**
     * @static
     * @type {Object}
     * @name module:Template/Utils.Utils#signTabShowOpt
     * @description (Static) 서명탭 보임/안보임 기본값 옵션
     */
    static signTabShowOpt = {};

    /**
     * @static
     * @type {String}
     * @name module:Template/Utils.Utils#locale
     * @description (Static) 현재 언어
     */
    static locale = "ko";

    /**
     * @static
     * @type {Object}
     * @name module:Template/Utils.Utils#translator
     * @description (Static) 다국어 사용을 위한 Object
     */
    static translator = new _Translator_translator_js__WEBPACK_IMPORTED_MODULE_1__["default"]({
        filesLocation: '/js/pdf_form/i18n'
    });

    /**
     *
     * @constructor
     * 
    */
    constructor() {
        
    }


    /**
     * @static
     * @function isEmptyObject
     * @name module:Template/Utils.Utils#isEmptyObject
     * @description (Static)  Object가 비어있는지 체크
     * 
     * @param {Object} param
     * @return {Boolean} param
     * @Date : 2021. 5. 31
     */
    static isEmptyObject(param) {
        if (param === undefined ||
            param === null) {
            return true;
        }
        return Object.keys(param).length === 0;
    }

    /**
     * @static
     * @function closeSelect2Tag
     * @name module:Template/Utils.Utils#closeSelect2Tag
     * @description (Static) Select2가 열려있는 태그를 체크하여 닫는다.
     *
     * @param {Element} node
     * @return {Boolean}
     * @Date : 2021. 5. 31
     */
    static closeSelect2Tag(node) {
        node.querySelectorAll("li ." + _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_SELECT_CLASS).forEach((el) => {
            if (el.classList.contains("select2-hidden-accessible")) {
                $(el).select2('close');
            }
        });
    }

    /**
     * @static
     * @function removeAllChildNode
     * @name module:Template/Utils.Utils#removeAllChildNode
     * @description (Static) 해당하는 Node의 모든 Child를 제거한다.
     *
     * @param {Element} node
     * @Date : 2021. 5. 31
     */
    static removeAllChildNode(node) {
        if (node === null) {
            return;
        }
        while (node.firstChild) {
            if (node.lastChild.id === _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_PANEL_ID) {
                Utils.closeSelect2Tag(node.lastChild);
            }
            node.removeChild(node.lastChild);
        }
    }

    /**
     * @static
     * @function createAttributePanelNode
     * @name module:Template/Utils.Utils#createAttributePanelNode
     * @description (Static) 필드의 속성을 보여줄 Panel를 생성한다.
     *
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createAttributePanelNode() {
        var panel = document.createElement("ul");
        panel.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_PANEL_CLASS;
        panel.id = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_PANEL_ID;

        return panel;
    }

    /**
     * @static
     * @function createAttributeInputNode
     * @name module:Template/Utils.Utils#createAttributeInputNode
     * @description (Static) 필드의 속성중 input을 사용하는 Element를 만든다.
     *
     * @param {String} fieldID 사용할 Field의 ID
     * @param {String} fieldPropetyName 사용할 Field의 속성 이름
     * @param {String} title  Element에 사용할 이름
     * @param {String} value  input에 들어갈 값
     * @param {String} nodeTooltip  ToolTip에 들어갈 내용
     * @param {callback} changeEventFunc  값이 변할 때 호출되어질 callback
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createAttributeInputNode(fieldId, fieldPropetyName, title, value, type, nodeTooltip, changeEventFunc) {
        var row = document.createElement("li");
        row.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_CONTENTS_ROW_CLASS;
        var titleWrap = document.createElement("div");
        titleWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_WRAP_CLASS;
        var titleSpan = document.createElement("span");
        titleSpan.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_CLASS;
        titleSpan.textContent = Utils.translateForKey(title);
        titleSpan.setAttribute("data-i18n", title);
        titleWrap.appendChild(titleSpan);
        var input = document.createElement("input");
        input.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_INPUT_CLASS;
        input.setAttribute("data-field-id", fieldId);
        input.setAttribute("data-field-property-name", fieldPropetyName);
        if (value !== "") {
            input.value = value;
        }
        if (type !== "" ) {
            input.type = type;
        }
        input.addEventListener("change", changeEventFunc, true);
        
        row.appendChild(titleWrap);
        row.appendChild(input);
        return row;
    }

    /**
     * @static
     * @function createAttributeInputNode
     * @name module:Template/Utils.Utils#createAttributeInputNode
     * @description (Static) 필드의 속성중 textare를 사용하는 Element를 만든다.
     *
     * @param {String} fieldID 사용할 Field의 ID
     * @param {String} fieldPropetyName 사용할 Field의 속성 이름
     * @param {String} title  Element에 사용할 이름
     * @param {String} value  textare에 들어갈 값
     * @param {callback} changeEventFunc 값이 변할 때 호출되어질 callback
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createAttributeTextAreaNode(fieldId, fieldPropetyName, title, value, type, changeEventFunc) {
        var row = document.createElement("li");
        row.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_CONTENTS_ROW_CLASS;
        var titleWrap = document.createElement("div");
        titleWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_WRAP_CLASS;
        var titleSpan = document.createElement("span");
        titleSpan.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_CLASS;
        titleSpan.textContent = Utils.translateForKey(title);
        titleWrap.appendChild(titleSpan);
        var textarea = document.createElement("textarea");
        textarea.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_TEXTAREA_CLASS;
        textarea.setAttribute("data-field-id", fieldId);
        textarea.setAttribute("data-field-property-name", fieldPropetyName);
        if (value !== "") {
            textarea.value = value;
        }
        if (type !== "") {
            textarea.type = type;
        }
        textarea.addEventListener("change", changeEventFunc, true);

        row.appendChild(titleWrap);
        row.appendChild(textarea);
        return row;
    }

    /**
     * @static
     * @function createAttributeCheckBoxNode
     * @name module:Template/Utils.Utils#createAttributeCheckBoxNode
     * @description (Static)  필드의 속성중 checkbox를 사용하는 Element를 만든다.
     *
     * @param {String} fieldID 사용할 Field의 ID
     * @param {String} fieldPropetyName 사용할 Field의 속성 이름
     * @param {String} title  Element에 사용할 이름
     * @param {String} value  input에 들어갈 값
     * @param {callback} changeEventFunc 값이 변할 때 호출되어질 callback
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createAttributeCheckBoxNode(fieldId, fieldPropetyName, title, value, changeEventFunc) {
        var row = document.createElement("li");
        row.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_CONTENTS_ROW_CLASS;

        var inputText = document.createElement("input");
        inputText.type = "text";
        inputText.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_INPUT_CLASS;
        inputText.setAttribute("data-field-id", fieldId);
        inputText.setAttribute("data-field-property-name", fieldPropetyName);
        inputText.style.display = "none";
        inputText.addEventListener("change", changeEventFunc, true);

        var input = document.createElement("input");
        input.type = "checkbox";
        input.id = fieldPropetyName + "_chkbox";
        input.addEventListener("change", function (evt) {
            if (input.checked) {
                inputText.value = "true";
            } else {
                inputText.value = "false";
            }
            inputText.dispatchEvent(new Event("change"));
        });

        if (value === 'true') {
            input.checked = true;
            inputText.value = "true";
        } else {
            input.checked = false;
            inputText.value = "false";
        }

        var checkBoxContainerNode = document.createElement("p");
        checkBoxContainerNode.className = "Attribute-Contents-Row-CheckBox-Container"
        checkBoxContainerNode.appendChild(input);
        var checkBoxLabelNode = document.createElement("label");
        checkBoxLabelNode.htmlFor = fieldPropetyName + "_chkbox";
        checkBoxLabelNode.textContent = title;
        checkBoxContainerNode.appendChild(checkBoxLabelNode);

        row.appendChild(checkBoxContainerNode);
        row.appendChild(inputText);
        return row;
    }

    /**
     * @static
     * @function createAttributeDateInputNode
     * @name module:Template/Utils.Utils#createAttributeDateInputNode
     * @description (Static)  필드의 속성중 Date를 사용하는 Element를 만든다.
     *
     * @param {String} fieldID  사용할 Field의 ID
     * @param {String} fieldPropetyName  사용할 Field의 속성 이름
     * @param {String} title  Element에 사용할 이름
     * @param {String} value  input에 들어갈 값
     * @param {String} nodeTooltip  ToolTip에 들어갈 내용
     * @param {callback} changeEventFunc  값이 변할 때 호출되어질 callback
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createAttributeDateInputNode(fieldId, fieldPropetyName, title, value, nodeTooltip, changeEventFunc) {
        var row = document.createElement("li");
        row.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_CONTENTS_ROW_CLASS;
        var titleWrap = document.createElement("div");
        titleWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_WRAP_CLASS;
        var titleSpan = document.createElement("span");
        titleSpan.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_CLASS;
        titleSpan.textContent = title;
        titleWrap.appendChild(titleSpan);
        var input = document.createElement("input");
        input.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_INPUT_CLASS;
        input.id = fieldPropetyName + "_date-picker";
        input.style.display = "none";
        input.setAttribute("data-field-id", fieldId);
        input.setAttribute("data-field-property-name", fieldPropetyName);
        if (value !== "") {
            input.value = value;
        }
        var inputPicker = document.createElement("input");
        inputPicker.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_DATE_INPUT_CLASS;
        if (value !== "") {
            inputPicker.value = value;
        }
        
        input.addEventListener("change", changeEventFunc, true);
        row.appendChild(titleWrap);
        row.appendChild(input);
        row.appendChild(inputPicker);
        return row;
    }

    /**
     * @static
     * @function createAttributeColorInputNode
     * @name module:Template/Utils.Utils#createAttributeColorInputNode
     * @description (Static) 필드의 속성중 Color Picker를 사용하는 Element를 만든다.
     *
     * @param {String} fieldID  사용할 Field의 ID
     * @param {String} fieldPropetyName  사용할 Field의 속성 이름
     * @param {String} title  Element에 사용할 이름
     * @param {String} value  input에 들어갈 값
     * @param {String} type  input의 type에 들어갈 값 - 사용하지 않음.
     * @param {String} nodeTooltip  ToolTip에 들어갈 내용
     * @param {callback} changeEventFunc  값이 변할 때 호출되어질 callback
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createAttributeColorInputNode(fieldId, fieldPropetyName, title, value, type, nodeTooltip, changeEventFunc) {
        var row = document.createElement("li");
        row.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_CONTENTS_ROW_CLASS;
        var titleWrap = document.createElement("div");
        titleWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_WRAP_CLASS;
        var titleSpan = document.createElement("span");
        titleSpan.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_CLASS;
        titleSpan.textContent = title;
        titleWrap.appendChild(titleSpan);
        var input = document.createElement("input");
        input.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_INPUT_CLASS;
        input.setAttribute("data-field-id", fieldId);
        input.setAttribute("data-field-property-name", fieldPropetyName);
        if (value !== "") {
            input.value = value;
        }
        input.type = "text";
        input.id = fieldId + "_color";
        input.addEventListener("change", changeEventFunc, true);
        
        var inputBtn = document.createElement("input");
        inputBtn.type = "button";
        var inputWrap = document.createElement("div");
        inputWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_INPUT_WRAP_CLASS;
        inputWrap.appendChild(input);
        inputWrap.appendChild(inputBtn);

        row.appendChild(titleWrap);
        row.appendChild(inputWrap);
        return row;
    }

    /**
     * @static
     * @function createAttributeToggleButtonNode
     * @name module:Template/Utils.Utils#createAttributeToggleButtonNode
     * @description (Static)  필드의 속성중 Toggle button을 사용하는 Element를 만든다.
     *
     * @param {String} fieldID  사용할 Field의 ID
     * @param {String} fieldPropetyName  사용할 Field의 속성 이름
     * @param {String} title  Element에 사용할 이름
     * @param {String} value  input에 들어갈 값
     * @param {callback} changeEventFunc  값이 변할 때 호출되어질 callback
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createAttributeToggleButtonNode(fieldId, fieldPropetyName, title, value, changeEventFunc) {
        var row = document.createElement("li");
        row.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_CONTENTS_ROW_CLASS;
        var rowWrap = document.createElement("div");
        rowWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_ROW_WRAP_CLASS;
        var titleSpan = document.createElement("span");
        titleSpan.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_CLASS;
        titleSpan.textContent = Utils.translateForKey(title);
        titleSpan.setAttribute("data-i18n", title);
        rowWrap.appendChild(titleSpan);
        
        var switchLabel = document.createElement("label");
        switchLabel.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SWITCH_LABEL_CLASS;

        var inputText = document.createElement("input");
        inputText.type = "text";
        inputText.setAttribute("data-field-id", fieldId);
        inputText.setAttribute("data-field-property-name", fieldPropetyName);
        inputText.style.display = "none";
        inputText.addEventListener("change", changeEventFunc, true);

        var input = document.createElement("input");
        input.type = "checkbox";
        input.addEventListener("change", function (evt) {
            if (input.checked) {
                inputText.value = true;
            } else {
                inputText.value = false;
            }
            inputText.dispatchEvent(new Event("change"));
        });
        if (value === 'true') {
            input.checked = true;
            inputText.value = "true";
        } else {
            input.checked = false;
            inputText.value = "false";
        }

        var sliderSpan = document.createElement("span");
        sliderSpan.classList.add(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SWITCH_LABEL_SLIDER_CLASS);
        sliderSpan.classList.add(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SWITCH_LABEL_SLIDER_ROUND_CLASS);

        switchLabel.appendChild(input);
        switchLabel.appendChild(sliderSpan);

        rowWrap.appendChild(switchLabel);
        rowWrap.appendChild(inputText);
        row.appendChild(rowWrap);
        return row;
    }

    /**
     * @static
     * @function createAttributeSelectInnerNode
     * @name module:Template/Utils.Utils#createAttributeSelectInnerNode
     * @description (Static)  필드의 속성중 Select를 사용하는 Element를 만든다.
     *
     * @param {String} fieldID 사용할 Field의 ID
     * @param {String} fieldPropetyName  사용할 Field의 속성 이름
     * @param {Array} options [{value: "value", text: "text"}] select에 사용되는 Map Array
     * @param { String} title Element에 사용할 이름
     * @param {Boolean} useDefaulOptionNode 대상선택을 사용할지 여부
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createAttributeSelectInnerNode(fieldId, fieldPropetyName, options, title, useDefaulOptionNode = true) {
        var rowWrap = document.createElement("div");
        rowWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_ROW_WRAP_CLASS;

        if (title !== "") {
            var titleWrap = document.createElement("div");
            titleWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_WRAP_CLASS;
            var titleSpan = document.createElement("span");
            titleSpan.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_CLASS;
            titleSpan.textContent = Utils.translateForKey(title);
            titleSpan.setAttribute("data-i18n", title);
            titleWrap.appendChild(titleSpan);
            rowWrap.appendChild(titleWrap);
        }

        var selectNode = document.createElement("select");
        selectNode.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_SELECT_CLASS;
        if (useDefaulOptionNode) {
            var defaultOptionNode = document.createElement("option");
            defaultOptionNode.value = "";
            defaultOptionNode.text = Utils.translateForKey("Template.selectDefaultText");
            defaultOptionNode.setAttribute("data-i18n", "Template.selectDefaultText");
            selectNode.appendChild(defaultOptionNode);
        }
        for (var idx = 0; idx < options.length; idx++) {
            var optionNode = document.createElement("option");
            optionNode.value = options[idx].value;
            optionNode.text = options[idx].text;
            selectNode.appendChild(optionNode);
        }

        selectNode.setAttribute("data-field-id", fieldId);
        selectNode.setAttribute("data-field-property-name", fieldPropetyName);
        
        rowWrap.appendChild(selectNode);
        return rowWrap;
    }

    /**
     * @static
     * @function createAttributeSelectNode
     * @name module:Template/Utils.Utils#createAttributeSelectNode
     * @description (Static)   필드의 속성중 Select를 사용하는 Element를 li로 감싸서 만든다.
     *
     * @param {String} fieldID 사용할 Field의 ID
     * @param {String} fieldPropetyName 사용할 Field의 속성 이름
     * @param {Array} options [{value: "value", text: "text"}] : select에 사용되는 Map Array
     * @param {String} title  Element에 사용할 이름
     * @param {Boolean} useDefaulOptionNode 대상선택을 사용할지 여부
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createAttributeSelectNode(fieldId, fieldPropetyName, options, title, useDefaulOptionNode = true) {
        var row = document.createElement("li");
        row.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_CONTENTS_ROW_CLASS;
        var rowWrap = Utils.createAttributeSelectInnerNode(fieldId, fieldPropetyName, options, title, useDefaulOptionNode);
        row.appendChild(rowWrap);
        return row;
    }

    /**
     * @static
     * @function createDividerNode
     * @name module:Template/Utils.Utils#createDividerNode
     * @description (Static)   li의 구분자를 만든다.
     *
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createDividerNode() {
        var dividerRow = document.createElement("li");
        dividerRow.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.DIVIDER_CLASS;
        return dividerRow;
    }

    /**
     * @static
     * @function createTextAlignButtonNode
     * @name module:Template/Utils.Utils#createTextAlignButtonNode
     * @description (Static)   필드의 속성중 Text Align Button Element을 만든다.
     *
     * @param {String} fieldID  사용할 Field의 ID
     * @param {String} value  현재의 text align 값
     * @param {callback} changeEventFunc 값이 변할 때 호출되어질 callback
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createTextAlignButtonNode(fieldId, value, changeEventFunc) {
        var rowWrap = document.createElement("div");
        rowWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_ROW_WRAP_CLASS;

        var titleWrap = document.createElement("div");
        titleWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_WRAP_CLASS;
        var titleSpan = document.createElement("span");
        titleSpan.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_CLASS;
        titleSpan.textContent = Utils.translateForKey("Template.textAlignText");
        titleSpan.setAttribute("data-i18n", "Template.textAlignText");
        titleWrap.appendChild(titleSpan);
        rowWrap.appendChild(titleWrap);

        var btnsWrap = document.createElement("div");
        var leftBtn = document.createElement("button");
        leftBtn.classList.add("Template-Button");
        leftBtn.classList.add("Text-Align-Left");
        leftBtn.classList.add("Toggle-Button");

        var leftIconBtn = document.createElement("i");
        leftBtn.appendChild(leftIconBtn);

        var centerBtn = document.createElement("button");
        centerBtn.classList.add("Template-Button");
        centerBtn.classList.add("Text-Align-Center");
        centerBtn.classList.add("Toggle-Button");

        var centerIconBtn = document.createElement("i");
        centerBtn.appendChild(centerIconBtn);

        var rightBtn = document.createElement("button");
        rightBtn.classList.add("Template-Button");
        rightBtn.classList.add("Text-Align-Right");
        rightBtn.classList.add("Toggle-Button");

        var rightIconBtn = document.createElement("i");
        rightBtn.appendChild(rightIconBtn);

        switch (value) {
            case "left":
                leftBtn.classList.add("Selected");
                break;
            case "center":
                centerBtn.classList.add("Selected");
                break;
            case "right":
                rightBtn.classList.add("Selected");
                break;
        }

        var inputNode = document.createElement("input");
        inputNode.type = "text";
        inputNode.style.display = "none";
        inputNode.value = value;
        inputNode.setAttribute("data-field-id", fieldId);
        inputNode.setAttribute("data-field-property-name", "textAlign");
        inputNode.addEventListener("change", changeEventFunc);

        leftBtn.addEventListener("click", function (evt) {
            inputNode.value = "left";
            inputNode.dispatchEvent(new Event("change"));
            if (!leftBtn.classList.contains("Selected")) {
                leftBtn.classList.toggle("Selected");
            }
            if (rightBtn.classList.contains("Selected")) {
                rightBtn.classList.toggle("Selected");
            }
            if (centerBtn.classList.contains("Selected")) {
                centerBtn.classList.toggle("Selected");
            }
            
        });
        centerBtn.addEventListener("click", function (evt) {
            inputNode.value = "center";
            inputNode.dispatchEvent(new Event("change"));
            if (!centerBtn.classList.contains("Selected")) {
                centerBtn.classList.toggle("Selected");
            }
            if (rightBtn.classList.contains("Selected")) {
                rightBtn.classList.toggle("Selected");
            }
            if (leftBtn.classList.contains("Selected")) {
                leftBtn.classList.toggle("Selected");
            }

        });
        rightBtn.addEventListener("click", function (evt) {
            inputNode.value = "right";
            inputNode.dispatchEvent(new Event("change"));
            if (!rightBtn.classList.contains("Selected")) {
                rightBtn.classList.toggle("Selected");
            }
            if (leftBtn.classList.contains("Selected")) {
                leftBtn.classList.toggle("Selected");
            }
            if (centerBtn.classList.contains("Selected")) {
                centerBtn.classList.toggle("Selected");
            }

        });

        btnsWrap.appendChild(leftBtn);
        btnsWrap.appendChild(centerBtn);
        btnsWrap.appendChild(rightBtn);
        btnsWrap.appendChild(inputNode);

        rowWrap.appendChild(btnsWrap);
        return rowWrap;
    }

    /**
     * @static
     * @function createTextBoldButtonNode
     * @name module:Template/Utils.Utils#createTextBoldButtonNode
     * @description (Static)  필드의 속성중 Text Bold toggle Button Element을 만든다.
     *
     * @param {String} fieldID  사용할 Field의 ID
     * @param {String} value  현재의 text bold 값
     * @param {callback} changeEventFunc 값이 변할 때 호출되어질 callback
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createTextBoldButtonNode(fieldId, value, changeEventFunc) {
        var rowWrap = document.createElement("div");
        rowWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_ROW_WRAP_CLASS;

        var titleWrap = document.createElement("div");
        titleWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_WRAP_CLASS;
        var titleSpan = document.createElement("span");
        titleSpan.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_CLASS;
        titleSpan.textContent = Utils.translateForKey("Template.boldText");
        titleSpan.setAttribute("data-i18n", "Template.boldText");
        titleWrap.appendChild(titleSpan);
        rowWrap.appendChild(titleWrap);

        var btnsWrap = document.createElement("div");
        var boldBtn = document.createElement("button");
        boldBtn.classList.add("Template-Button");
        boldBtn.classList.add("Text-Bold-Button");
        boldBtn.classList.add("Toggle-Button");

        var boldBtnIconBtn = document.createElement("i");
        boldBtn.appendChild(boldBtnIconBtn);

        if (value === "true") {
            boldBtn.classList.add("Selected");
        }

        var inputNode = document.createElement("input");
        inputNode.type = "text";
        inputNode.style.display = "none";
        inputNode.value = value;
        inputNode.setAttribute("data-field-id", fieldId);
        inputNode.setAttribute("data-field-property-name", "bold");
        inputNode.addEventListener("change", changeEventFunc);

        boldBtn.addEventListener("click", function (evt) {
            if (!boldBtn.classList.contains("Selected")) {
                inputNode.value = "true";
            } else {
                inputNode.value = "false";
            }
            inputNode.dispatchEvent(new Event("change"));
            boldBtn.classList.toggle("Selected");

        });

        btnsWrap.appendChild(boldBtn);
        btnsWrap.appendChild(inputNode);

        rowWrap.appendChild(btnsWrap);
        return rowWrap;
    }

    /**
     * @static
     * @function createTextColorButtonNode
     * @name module:Template/Utils.Utils#createTextColorButtonNode
     * @description (Static)  필드의 속성중 Text Color picker Element을 만든다.
     *
     * @param {String} fieldID  사용할 Field의 ID
     * @param {String} value  현재의 text color 값
     * @param {callback} changeEventFunc 값이 변할 때 호출되어질 callback
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createTextColorButtonNode(fieldId, title, value, changeEventFunc) {
        var rowWrap = document.createElement("div");
        rowWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_ROW_WRAP_CLASS;

        var titleWrap = document.createElement("div");
        titleWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_WRAP_CLASS;
        var titleSpan = document.createElement("span");
        titleSpan.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_CLASS;
        titleSpan.textContent = Utils.translateForKey(title);
        titleSpan.setAttribute("data-i18n", title);
        titleWrap.appendChild(titleSpan);
        rowWrap.appendChild(titleWrap);

        var btnsWrap = document.createElement("div");
        btnsWrap.className = "Color-Button-Wrap";

        var boldBtn = document.createElement("button");
        boldBtn.classList.add("Template-Button");
        boldBtn.classList.add("Color-Button");

        var inputNode = document.createElement("input");
        inputNode.type = "text";
        inputNode.style.display = "none";
        inputNode.value = value;
        inputNode.setAttribute("data-field-id", fieldId);
        inputNode.setAttribute("data-field-property-name", "fontColor");
        inputNode.addEventListener("change", changeEventFunc);

        btnsWrap.appendChild(boldBtn);
        btnsWrap.appendChild(inputNode);

        rowWrap.appendChild(btnsWrap);
        return rowWrap;
    }

    /**
     * @static
     * @function createTextAttrbuteNode
     * @name module:Template/Utils.Utils#createTextAttrbuteNode
     * @description (Static)  필드의 속성중 Text 속성의 Element들을 만든다.
     *
     * @param {String} fieldID  사용할 Field의 ID
     * @param {String} fontColor  현재의 Font Color 값
     * @param {String} fontAlign  현재의 text align 값
     * @param {String} isBold  현재의 text bold 값
     * @param {callback} changeEventFunc  값이 변할 때 호출되어질 callback
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createTextAttrbuteNode(fieldId, fontColor, fontAlign, isBold, changeEventFunc) {
        var row = document.createElement("li");
        row.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_CONTENTS_ROW_CLASS;
        var rowWrap = document.createElement("div");
        rowWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_ROW_WRAP_CLASS;
        
        var fontAttrTable = document.createElement("table");
        fontAttrTable.style.width = "100%";
        var row1 = document.createElement("tr");
        var col1 = document.createElement("td");
        col1.style.paddingRight = "10px";
        col1.colSpan = 4;
        var fontFamilyCombo = Utils.createAttributeSelectInnerNode(fieldId, "fontName", Utils.fontFamilyComboBox, "Template.fontNameText", false);
        col1.appendChild(fontFamilyCombo);
        row1.appendChild(col1);

        var col2 = document.createElement("td");
        col2.colSpan = 4;
        var fontSizeCombo = Utils.createAttributeSelectInnerNode(fieldId, "fontSize", Utils.getFonSizeComboBox(), "Template.fontSizeText", false);
        col2.appendChild(fontSizeCombo);
        row1.appendChild(col2);

        fontAttrTable.appendChild(row1);

        var row2 = document.createElement("tr");
        var col3 = document.createElement("td");
        col3.style.paddingRight = "10px";
        col3.style.paddingTop = "20px";
        col3.colSpan = 4;
        row2.appendChild(col3);

        var alignBtnsNode = Utils.createTextAlignButtonNode(fieldId, fontAlign, changeEventFunc);
        col3.appendChild(alignBtnsNode);

        var col4 = document.createElement("td");
        col4.style.paddingRight = "10px";
        col4.style.paddingTop = "20px";
        col4.colSpan = 2;
        var boldBtnNode = Utils.createTextBoldButtonNode(fieldId, isBold, changeEventFunc);
        col4.appendChild(boldBtnNode);
        row2.appendChild(col4);

        var col5 = document.createElement("td");
        col5.style.paddingRight = "10px";
        col5.style.paddingTop = "20px";
        col5.colSpan = 2;
        var colorBtnNode = Utils.createTextColorButtonNode(fieldId, "Template.colorText", fontColor, changeEventFunc);
        col5.appendChild(colorBtnNode);
        row2.appendChild(col5);

        fontAttrTable.appendChild(row2);
        rowWrap.appendChild(fontAttrTable);
        row.appendChild(rowWrap);
        
        return {
            row: row,
            fontFamilyCombo: fontFamilyCombo,
            fontSizeCombo: fontSizeCombo,
            colorBtn: colorBtnNode
        };
    }

     /**
     * @static
     * @function createTextAttrbuteNode
     * @name module:Template/Utils.Utils#createTextMemoAttrbuteNode
     * @description (Static)  메모 속성의 Element들을 만든다.
     *
     * @param {String} fieldID  사용할 Field의 ID
     * @param {String} fontColor  현재의 Font Color 값
     * @param {String} fontAlign  현재의 text align 값
     * @param {String} isBold  현재의 text bold 값
     * @param {callback} changeEventFunc  값이 변할 때 호출되어질 callback
     * @return {Element}
     * @Date : 2021. 5. 31
     */
     static createTextMemoAttrbuteNode(fieldId, fontColor, isBold, backgroundColor, changeEventFunc) {
        let row = document.createElement("li");
        row.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_CONTENTS_ROW_CLASS;
        let rowWrap = document.createElement("div");
        rowWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_ROW_WRAP_CLASS;
        
        let fontAttrTable = document.createElement("table");
        fontAttrTable.style.width = "100%";
        let row1 = document.createElement("tr");
        let col1 = document.createElement("td");
        col1.style.paddingRight = "10px";
        col1.colSpan = 4;
        let fontFamilyCombo = Utils.createAttributeSelectInnerNode(fieldId, "fontName", Utils.fontFamilyComboBox, "Template.fontNameText", false);
        col1.appendChild(fontFamilyCombo);
        row1.appendChild(col1);

        let col2 = document.createElement("td");
        col2.colSpan = 4;
        let fontSizeCombo = Utils.createAttributeSelectInnerNode(fieldId, "fontSize", Utils.getFonSizeComboBox(), "Template.fontSizeText", false);
        col2.appendChild(fontSizeCombo);
        row1.appendChild(col2);

        fontAttrTable.appendChild(row1);

        let row2 = document.createElement("tr");

        let col4 = document.createElement("td");
        col4.style.paddingRight = "10px";
        col4.style.paddingTop = "20px";
        col4.colSpan = 2;
        let boldBtnNode = Utils.createTextBoldButtonNode(fieldId, isBold, changeEventFunc);
        col4.appendChild(boldBtnNode);
        row2.appendChild(col4);

        let col5 = document.createElement("td");
        col5.style.paddingRight = "10px";
        col5.style.paddingTop = "20px";
        col5.colSpan = 2;
        let colorBtnNode = Utils.createTextColorButtonNode(fieldId, "Template.colorText", fontColor, changeEventFunc);
        col5.appendChild(colorBtnNode);
        row2.appendChild(col5);

        
        let col6 = document.createElement("td");
        col6.style.paddingRight = "10px";
        col6.style.paddingTop = "20px";
        col6.colSpan = 2;
        let backgroundColorBtnNode = Utils.createTextColorButtonNode(fieldId, "Template.bgColorText", backgroundColor, changeEventFunc);
        col6.appendChild(backgroundColorBtnNode);
        row2.appendChild(col6);

        fontAttrTable.appendChild(row2);
        rowWrap.appendChild(fontAttrTable);
        row.appendChild(rowWrap);
        
        return {
            row: row,
            fontFamilyCombo: fontFamilyCombo,
            fontSizeCombo: fontSizeCombo,
            boldBtn: boldBtnNode,
            colorBtn: colorBtnNode,
            backgroundColorBtn: backgroundColorBtnNode
        };
    }

    /**
     * @static
     * @function assign
     * @name module:Template/Utils.Utils#assign
     * @description (Static)  object에 해당 속성이 있으면 값을 설정한다.
     *
     * @param {Object} obj  사용할 Object
     * @param {Object} prop  사용할 속성
     * @param {Object} value  속성에 사용할 값
     * @Date : 2021. 5. 31
     */
    static assign(obj, prop, value) {
        if (typeof prop === "string")
            prop = prop.split(".");

        if (prop.length > 1) {
            var e = prop.shift();
            assign(obj[e] =
                    Object.prototype.toString.call(obj[e]) === "[object Object]"
                    ? obj[e]
                    : {},
                prop,
                value);
        } else
            obj[prop[0]] = value;
    }

    /**
     * @static
     * @function fieldAncestors
     * @name module:Template/Utils.Utils#fieldAncestors
     * @description (Static) Field에 상속된 부모들을 찾는다..
     *
     * @param {Object} anyclass : 찾을 field
     * @return {Array}: 상속된 부모들
     * @Date : 2021. 5. 31
     */
    static fieldAncestors (anyclass)
    {
        switch (true) {
        case (anyclass === undefined): return;
        case (anyclass === null): return [];
        default:
            return [anyclass, ...(Utils.fieldAncestors (Object.getPrototypeOf (anyclass)))];
        }
    }

    /**
     * @static
     * @function findSameAncestor
     * @name module:Template/Utils.Utils#findSameAncestor
     * @description (Static)  Field들의 공통으로 상속된 부모를 찾는다..
     *
     * @param {Array}  fieldList 찾을 field 리스트
     * @return {Object}  공통으로 상속된 부모
     * @Date : 2021. 5. 31
     */
    static findSameAncestor(fieldList) {
        // 첫번째 필드의 조상들을 조사한다.
        var firstAncestors = Utils.fieldAncestors(fieldList[0]);
        var sameAncestor = firstAncestors[0];
        // 필드의 갯수가 1개이면 그냥 리턴한다.
        if (fieldList.length === 1) {
            return sameAncestor;
        }
        var cnt = 0;
        // 2번째 필드부터 루프를 한다.
        for (var idx = 1; idx < fieldList.length; idx++) {
            var ancestors = Utils.fieldAncestors(fieldList[idx]);
            // 부모가 1개이면 BaseField이므로 그대로 리턴한다.
            if (ancestors.length === 1) {
                return ancestors[0];
            }
            var startIdx = 0;
            // 첫번째 필드의 조상을 루프하는 index이므로 1부터 시작한다.
            var startIdx2 = 1;

            // 현재 공통으로 선택된 필드의 조상보다 지금 조사하는 필드의 조상이 갯수가 적으면 
            // 전부 조사할 필요가 없이 둘의 차이나는 만큼 부터 조사한다.
            // ex) TextField와 ImageField를 비교해보면
            // Text TextBase Base, Image Base 이렇게 조상들이 존재한다.
            // 이렇게 1번째는 무조건 다르니 1번째는 패스하고 다음부터 조사를 한다.
            const sameAncestorParents = Utils.fieldAncestors(sameAncestor);
            if (sameAncestorParents.length >= ancestors.length) {
                startIdx = sameAncestorParents.length - ancestors.length;
            }
            for (var secIdx = startIdx; secIdx < ancestors.length; secIdx++) {
                var ancestor = ancestors[secIdx];
                var findSameAncestor = false;
                
                for (var firstIdx = startIdx2; firstIdx < firstAncestors.length; firstIdx++) {
                    cnt++;
                    if (Object.getPrototypeOf(ancestor) == Object.getPrototypeOf(firstAncestors[firstIdx])) {
                        // 같을 경우 +1을 하는 이유는 prototype의 constructor가 하나 위를 바라보기 때문이다.
                        sameAncestor = firstAncestors[firstIdx + 1];
                        const sameAncestorParents = Utils.fieldAncestors(sameAncestor);
                        // 길이가 2면 BaseField이므로 그대로 리턴한다.
                        if (sameAncestorParents.length === 2) {
                            return sameAncestor;
                        }
                        findSameAncestor = true;
                        startIdx2 = firstIdx + 1;
                        break;
                    }
                }
                if (findSameAncestor) {
                    break;
                }
            }
        }
        return sameAncestor;
    }

    static findSameAncestor2(fieldList) {
        if (fieldList.length === 1) {
            return fieldList[0];
        }
        const firstFieldAncestors = fieldList[0].ancestors();
        let commonAncestor = firstFieldAncestors[0];
        for (let idx = 1; idx < fieldList.length; ++idx) {
            if (commonAncestor === "BF") {
                return commonAncestor;
            }
            const fieldAncestors = fieldList[idx].ancestors();
            if (fieldAncestors.includes(commonAncestor)) {
                continue;
            }

            for (let idx2 = 1; idx2 < firstFieldAncestors.length; ++idx2) {
                if (fieldAncestors.includes(firstFieldAncestors[idx2])) {
                    commonAncestor = firstFieldAncestors[idx2];
                    break;
                }
            }
        }
        return commonAncestor;
    }

    /**
     * @static
     * @function getUserInfoOptsList
     * @name module:Template/Utils.Utils#getUserInfoOptsList
     * @description (Static)  서명자들의 정보 리스트를 반환한다.
     *
     * @return {Array} 서명자들의 정보 리스트
     * @Date : 2021. 5. 31
     */
    static getUserInfoOptsList() {
        return Utils.userInfoOptionList;
    }

    /**
     * @static
     * @function setUserInfoOptsList
     * @name module:Template/Utils.Utils#setUserInfoOptsList
     * @description (Static)  서명자들의 정보 리스트를 설정한다.
     *
     * @param {Array} fieldList  서명자들의 정보 리스트
     * @Date : 2021. 5. 31
     */
    static setUserInfoOptsList(opts) {
        Utils.userInfoOptionList = opts;
    }

    /**
     * @static
     * @function getUserInfoOptsListCount
     * @name module:Template/Utils.Utils#getUserInfoOptsListCount
     * @description (Static) 서명자들의 정보 리스트 길이를 반환한다.
     *
     * @return {Number}: 서명자들의 정보 리스트길이
     * @Date : 2021. 5. 31
     */
    static getUserInfoOptsListCount() {
        return Utils.userInfoOptionListCount;
    }

    /**
     * @static
     * @function setUserInfoOptsListCount
     * @name module:Template/Utils.Utils#setUserInfoOptsListCount
     * @description (Static)  서명자들의 정보 리스트 길이를 설정한다.
     *
     * @param {Number} fieldList 서명자들의 정보 리스트 길이
     * @Date : 2021. 5. 31
     */
    static setUserInfoOptsListCount(count) {
        Utils.userInfoOptionListCount = count;
    }


    /**
     * @static
     * @function getDVFieldOptsList
     * @name module:Template/Utils.Utils#getDVFieldOptsList
     * @description (Static)   기본값으로 사용할 값들의 리스트를 반환한다.
     *
     * @return {Array} 기본값으로 사용할 값들의 리스트
     * @Date : 2021. 5. 31
     */
    static getDVFieldOptsList() {
        return Utils.dvFieldOptionList;
    }

    /**
     * @static
     * @function setDVFieldOptsList
     * @name module:Template/Utils.Utils#setDVFieldOptsList
     * @description (Static)  기본값으로 사용할 값들의 리스트를 설정한다.
     *
     * @param fieldList {Array}  기본값으로 사용할 값들의 리스트
     * @Date : 2021. 5. 31
     */
    static setDVFieldOptsList(opts) {
        Utils.dvFieldOptionList = opts;
    }

    /**
     * @static
     * @function getSignTabShowOpt
     * @name module:Template/Utils.Utils#getSignTabShowOpt
     * @description (Static)   서명탭 보임/안보임 기본값으로 사용할 값들을 반환한다.
     *
     * @return {Array} 서명탭 보임/안보임 기본값으로 사용할 값들 
     * @Date : 2023. 12. 27
     */
    static getSignTabShowOpt() {
        return Utils.signTabShowOpt;
    }

    /**
     * @static
     * @function setSignTabShowOpt
     * @name module:Template/Utils.Utils#setSignTabShowOpt
     * @description (Static)  서명탭 보임/안보임 기본값으로 사용할 값들을 설정한다.
     *
     * @param signTabShowOpt {Object}  서명탭 보임/안보임 기본값으로 사용할 값들
     * @Date : 2023. 12. 27
     */
    static setSignTabShowOpt(opts) {
        Utils.signTabShowOpt = opts;
    }

    /**
     * @static
     * @function getFonSizeComboBox
     * @name module:Template/Utils.Utils#getFonSizeComboBox
     * @description (Static)  속성에서 사용할 폰트 사이즈 리스트를 반환한다.
     *
     * @return {Array} 속성에서 사용할 폰트 사이즈 리스트
     * @Date : 2021. 5. 31
     */
    static getFonSizeComboBox() {
        if (Utils.fontSizeComboBox.length > 0) {
            return Utils.fontSizeComboBox;
        }
        for (var idx = 1; idx <= 50; idx++) {
            Utils.fontSizeComboBox.push({
                text: idx + "px",
                value: idx
            });
        }
        return Utils.fontSizeComboBox;
    }

    /**
     * @static
     * @function getSignPenWidthComboBox
     * @name module:Template/Utils.Utils#getSignPenWidthComboBox
     * @description (Static) 속성에서 사용할 펜 두께 리스트를 반환한다.
     *
     * @return {Array} 속성에서 사용할 펜 두께 리스트
     * @Date : 2021. 5. 31
     */
    static getSignPenWidthComboBox() {
        //console.log(Utils.signPenWidthComboBox.length);
        if (Utils.signPenWidthComboBox.length > 0) {
            return Utils.signPenWidthComboBox;
        }
        for (var idx = 1; idx <= 20; idx += 1) {
            Utils.signPenWidthComboBox.push({
                text: idx,
                value: idx
            });
        }
        return Utils.signPenWidthComboBox;
    }

    /**
     * @static
     * @function createAttrbutePopup
     * @name module:Template/Utils.Utils#createAttrbutePopup
     * @description (Static) 속성 팝업의 Element를 만든다.
     *
     * @param {Element} ownerNode 해당 프로젝트의 최상단 Element를 감싸고 있는 Element
     * @return {Element} 속성 팝업의 element
     * @Date : 2021. 5. 31
     */
    static createAttrbutePopup(ownerNode, ownerFieldBBox) {
        let attrDiv = ownerNode.querySelector(" ." + _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_CLASS);
        if (attrDiv === null) {
            attrDiv = document.createElement("div");
            attrDiv.classList.add(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_CLASS);
            attrDiv.classList.add(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SHOW_CLASS);
            let viewer = ownerNode.querySelector(" #" + _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TEMPLATE_PDF_VIEWER);
            viewer.appendChild(attrDiv);
        } else {
            Utils.removeAllChildNode(attrDiv);
        }
        if (!attrDiv.classList.contains(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SHOW_CLASS)) {
            attrDiv.classList.add(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SHOW_CLASS);
        }
        attrDiv.style.display = "block";
        if (ownerFieldBBox !== null && ownerFieldBBox !== undefined) {
            attrDiv.style.left = ownerFieldBBox.x + "px";
            attrDiv.style.top = ownerFieldBBox.y + ownerFieldBBox.height + 10 + "px";
        }
        return attrDiv;
    }

    /**
     * @static
     * @function showAsteriskDiv
     * @name module:Template/Utils.Utils#showAsteriskDiv
     * @description (Static) 필수 표시 마크를 보이거나 숨긴다.
     *
     * @param {Element} ownerNode  해당 프로젝트의 최상단 Element를 감싸고 있는 Element
     * @param {String} fieldId  필수 마크가 사용되는 필드의 id
     * @param {Boolean} isShow  true면 보이고 false면 숨긴다.
     * @param {Number} fieldX  필수 마크가 사용되는 필드의 x좌표
     * @param {Number} fieldY  필수 마크가 사용되는 필드의 y좌표
     * @param {Number} fieldHeight  필수 마크가 사용되는 필드의 높이
     * @Date : 2021. 5. 31
     */
    static showAsteriskDiv(ownerNode, fieldId, isShow, fieldX, fieldY, fieldHeight) {
        let asteriskDiv = ownerNode.querySelector(" #" + fieldId + "_asterisk");
        if (asteriskDiv === null) {
            return;
        }
    //    console.log("showAsteriskDiv   " + isShow);
        if (isShow) {
            if (fieldX === null || fieldY === null || fieldHeight === null ||
                fieldX === undefined || fieldY === undefined || fieldHeight === undefined) {
                return;
            }
            let asteriskHeight = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.ASTREISK_DIV_HEIGHT;
            asteriskDiv.style.left = (fieldX - 6 - asteriskHeight) + "px";
            let asteriskY = fieldY + (fieldHeight / 2) - (asteriskHeight / 2);
            asteriskDiv.style.top = asteriskY + "px";

            if (!asteriskDiv.classList.contains(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SHOW_CLASS)) {
                asteriskDiv.classList.toggle(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SHOW_CLASS);
            }
            if (asteriskDiv.classList.contains(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.HIDE_CLASS)) {
                asteriskDiv.classList.toggle(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.HIDE_CLASS);
            }
            return;
        }

        if (asteriskDiv.classList.contains(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SHOW_CLASS)) {
            asteriskDiv.classList.toggle(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SHOW_CLASS);
        }
        if (!asteriskDiv.classList.contains(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.HIDE_CLASS)) {
            asteriskDiv.classList.toggle(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.HIDE_CLASS);
        }
    }

    /**
     * @static
     * @function createAsteriskDiv
     * @name module:Template/Utils.Utils#createAsteriskDiv
     * @description (Static) 필수 표시 마크의 Element를 만든다.
     *
     * @param {Element} ownerNode 해당 프로젝트의 최상단 Element를 감싸고 있는 Element
     * @param {String} fieldId  필수 마크가 사용되는 필드의 id
     * @return {Element} 필수 표시 마크의 element
     * @Date : 2021. 5. 31
     */
    static createAsteriskDiv(ownerNode, fieldId) {
        let asteriskDiv = ownerNode.querySelector(" #" + fieldId + "_asterisk");
        if (asteriskDiv === null) {
            asteriskDiv = document.createElement("div");
            asteriskDiv.classList.add(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.ASTERISK_ICON_CLASS);
            asteriskDiv.style.position = "absolute"
            asteriskDiv.style.width = "11px";
            asteriskDiv.style.height = "12px";
            let layerDiv = ownerNode.querySelector(" #" + _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TEMPLATE_LAYER_ASTERISK_NAME);
            layerDiv.appendChild(asteriskDiv);
        }
        return asteriskDiv;
    }
    /**
     * @static
     * @function isShowAsteriskDiv
     * @name module:Template/Utils.Utils#isShowAsteriskDiv
     * @description (Static) 필수 표시 마크가 보이는지 여부를 반환한다.
     *
     * @param {Element} ownerNode  해당 프로젝트의 최상단 Element를 감싸고 있는 Element
     * @param {String} fieldId  필수 마크가 사용되는 필드의 id
     * @Date : 2021. 5. 31
     */
    static isShowAsteriskDiv(ownerNode, fieldId) {
        let asteriskDiv = ownerNode.querySelector(" #" + fieldId + "_asterisk");
        if (asteriskDiv === null) {
            return false;
        }

        if (asteriskDiv.classList.contains(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SHOW_CLASS)) {
            return true;
        }
        if (asteriskDiv.classList.contains(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.HIDE_CLASS)) {
            return false;
        }
        return false;
    }

    /**
     * @static
     * @function createFieldDeleteBtn
     * @name module:Template/Utils.Utils#createFieldDeleteBtn
     * @description (Static) 필드의 Delete버튼의 Element를 만든다.
     *
     * @param {Element} ownerNode  해당 프로젝트의 최상단 Element를 감싸고 있는 Element
     * @param {CallBack} btnClickEvtHandler  버튼을 눌렀을 때 동작할 Handler
     * @return {Element} 필드의 Delete버튼의 element
     * @Date : 2021. 5. 31
     */
    static createFieldDeleteBtn(ownerNode, btnClickEvtHandler) {
        let deleteBtnDiv = ownerNode.querySelector(" ." + _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.FIELD_DELETE_BUTTON_CLASS);
        if (deleteBtnDiv === null) {
            deleteBtnDiv = document.createElement("div");
            deleteBtnDiv.classList.add(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.FIELD_DELETE_BUTTON_CLASS);
            deleteBtnDiv.classList.add(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SHOW_CLASS);
            let viewer = ownerNode.querySelector(" #" + _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TEMPLATE_PDF_VIEWER);
            viewer.appendChild(deleteBtnDiv);
        }
        if (!deleteBtnDiv.classList.contains(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SHOW_CLASS)) {
            deleteBtnDiv.classList.add(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SHOW_CLASS);
        }
        if (deleteBtnDiv.classList.contains(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.HIDE_CLASS)) {
            deleteBtnDiv.classList.toggle(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.HIDE_CLASS);
        }
        
        deleteBtnDiv.addEventListener("click", btnClickEvtHandler);
        return deleteBtnDiv;
    }

    /**
     * @static
     * @function repositionFieldDeleteBtn
     * @name module:Template/Utils.Utils#repositionFieldDeleteBtn
     * @description (Static) 필드의 Delete버튼의 위치를 조정한다.
     *
     * @param {Element} ownerNode  해당 프로젝트의 최상단 Element를 감싸고 있는 Element
     * @param {Number} x  Field의 X좌표
     * @param {Number} y  Field의 y좌표
     * @param {Number} width  Field의 width
     * @return {Element} 필드의 Delete버튼의 element
     * @Date : 2021. 5. 31
     */
    static repositionFieldDeleteBtn(ownerNode, x, y, width) {

        let deleteBtnDiv = ownerNode.querySelector(" ." + _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.FIELD_DELETE_BUTTON_CLASS);
        if (deleteBtnDiv === null) {
            console.log("deleteBtnDiv empty");
            return;
        }
        if (deleteBtnDiv.classList.contains(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.HIDE_CLASS)) {
            deleteBtnDiv.classList.toggle(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.HIDE_CLASS);
        }
        deleteBtnDiv.style.left = x + width + 10 + "px";
        deleteBtnDiv.style.top = y + 10 + "px";
    }

    /**
     * @static
     * @function addSignSvgToCanvas
     * @name module:Template/Utils.Utils#addSignSvgToCanvas
     * @description (Static) canvas에 SVG를 추가한다.
     *
     * @param {Object} field  추가할 canvas의 Sign Field Object
     * @param {Element} canvasDiv  canvas의 Element
     * @param {Number} signWidth  서명필드의 Width
     * @param {Number} signHeight  서명필드의 height
     * @param {String} svg  SVG String
     * @return {Object} Fabric canvas Object: SVG데이터가 추가된 Canvas
     * @Date : 2021. 5. 31
     */
    static addSignSvgToCanvas(field, canvasDiv, signWidth, signHeight, svg) {
        let canvasObj = canvasDiv;
        if (canvasDiv === null || canvasDiv === undefined) {
            canvasObj = field.m_id + "_canvas";
        }
        let staticCanvs1 = new fabric.StaticCanvas(canvasObj, { isDrawingMode: false });
        staticCanvs1.setHeight(signHeight);
        staticCanvs1.setWidth(signWidth);

        fabric.loadSVGFromString(svg, function (objects, options) {
            var obj = fabric.util.groupSVGElements(objects, options);
            let xScale = staticCanvs1.width / obj.width;
            let yScale = staticCanvs1.height / obj.height;
            const scale1 = xScale > yScale ? yScale : xScale;
            obj.scale(scale1);

            obj.strokeWidth = obj.strokeWidth / scale1;
            if (obj._objects !== null && obj._objects !== undefined) {
                let objects = obj._objects;
                for (var idx = 0; idx < objects.length; ++idx) {
                    objects[idx].strokeWidth = objects[idx].strokeWidth / scale1;
                }
            }
            staticCanvs1.add(obj).centerObject(obj).renderAll();
            obj.setCoords();
        }, 
         null,
         {crossOrigin: 'anonymous' // CORS 설정
        });
        return staticCanvs1;
    }

    /**
     * @static
     * @function addObjectsToCanvas
     * @name module:Template/Utils.Utils#addObjectsToCanvas
     * @description (Static) canvas에 Objects를 추가한다.
     *
     * @param {Element} ownerNode  해당 프로젝트의 최상단 Element를 감싸고 있는 Element
     * @param {Object} field  추가할 canvas의 Sign Field Object
     * @param {Element} canvasDiv  canvas의 Element
     * @param {Number} signWidth  서명필드의 Width
     * @param {Number} signHeight  서명필드의 height
     * @param {Array} objects  : Path의 리스트
     * @param {Number} orgWidth  추가될 Objects의 Width
     * @param {Number} orgHeight  : 추가될 Objects의 height
     * @return {Object} Fabric canvas Object: Objects가 추가된 Canvas
     * @Date : 2021. 5. 31
     */
    static addObjectsToCanvas(_ownerNode, field, canvasDiv, signWidth, signHeight, objects, orgWidth, orgHeight) {
        let canvasObj = canvasDiv;
        if (canvasDiv === null || canvasDiv === undefined) {
            let canvasId = field.m_id + "_canvas";
            canvasObj = _ownerNode.querySelector("#" + canvasId);
        }
        let staticCanvs1 = new fabric.StaticCanvas(canvasObj, { isDrawingMode: false });
        staticCanvs1.setHeight(signHeight);
        staticCanvs1.setWidth(signWidth);
        let xScale = staticCanvs1.width / orgWidth;
        let yScale = staticCanvs1.height / orgHeight;
        const scale1 = xScale > yScale ? yScale : xScale;
       // console.log(scale1);
        fabric.util.enlivenObjects(objects, function (objs) {
            var origRenderOnAddRemove = staticCanvs1.renderOnAddRemove;
            staticCanvs1.renderOnAddRemove = false;
            let gotoCenter = true;
            if (objs.length > 1) {
                gotoCenter = false;
            }

            objs.forEach(function (o) {
                let left = o.left * scale1;
                let top = o.top * scale1;
                if (gotoCenter) {
                   left = ((staticCanvs1.width - o.width * scale1) / 2);
                   top = ((staticCanvs1.height - o.height * scale1) / 2);                    
                }
                o.set({
                    left: left,
                    top: top,
                    scaleY: scale1,
                    scaleX: scale1,
                    strokeWidth: o.strokeWidth / scale1
                });
                staticCanvs1.add(o);
            });

            staticCanvs1.renderOnAddRemove = origRenderOnAddRemove;
            staticCanvs1.renderAll();
            staticCanvs1.calcOffset();
            if (objs.length > 1) {
                var objs = staticCanvs1.getObjects();
                var group = new fabric.Group(objs, {
                });
                group.set({
                    left: ((staticCanvs1.width - group.width ) / 2),
                    top: ((staticCanvs1.height - group.height ) / 2)
                })
                group.setCoords();
                staticCanvs1.renderAll();
            }
        });

        return staticCanvs1;
    }

    /**
     * @static
     * @function cloneObject
     * @name module:Template/Utils.Utils#cloneObject
     * @description (Static)  Object deep copy
     *
     * @param {Object} toObj  복사할 object
     * @return {Object}  복사된 object
     * @Date : 2021. 5. 31
     */
    static cloneObject(obj) {
        var clone = {};
        for (var key in obj) {
            if (typeof obj[key] == "object" && obj[key] != null) {
                if (Array.isArray(obj[key])) {
                    clone[key] = [...obj[key]];
                } else {
                    clone[key] = Utils.cloneObject(obj[key]);
                }
            } else {
                clone[key] = obj[key];
            }
        }

        return clone;
    }

    /**
     * @static
     * @function cloneObjectToObject
     * @name module:Template/Utils.Utils#cloneObjectToObject
     * @description (Static) fromObj의 데이터를 toObj로 deep copy
     *
     * @param {Object} fromObj 복사할 object
     * @param {Object} toObj  복사될 object
     * @return {Object} 복사된 object
     * @Date : 2021. 5. 31
     */
    static cloneObjectToObject(fromObj, toObj) {
        for (var key in fromObj) {
            if (key === "pages" || key === "fields") {
                continue;
            }
            if (typeof fromObj[key] == "object" && fromObj[key] != null) {
                toObj[key] = Utils.cloneObject(fromObj[key]);
            } else {
                toObj[key] = fromObj[key];
            }
        }

        return toObj;
    }

    /**
     * @static
     * @function cloneFabricCanvas
     * @name module:Template/Utils.Utils#cloneFabricCanvas
     * @description (Static)  canvas에 Objects를 추가한다.
     *
     * @param {Object} canvasObj  Object가 추가될 Canvas
     * @param {Array}  objects 복사될 Object의 리스트
     * @Date : 2021. 5. 31
     */
    static cloneFabricCanvas(canvasObj, objects) {
        fabric.util.enlivenObjects(objects, function (objs) {
            var origRenderOnAddRemove = canvasObj.renderOnAddRemove;
            canvasObj.renderOnAddRemove = false;

            objs.forEach(function (o) {
                canvasObj.add(o);
            });
            canvasObj.renderOnAddRemove = origRenderOnAddRemove;
            canvasObj.renderAll();
            canvasObj.calcOffset();
        });
    }

    /**
     * @static
     * @function isStringEmpty
     * @name module:Template/Utils.Utils#isStringEmpty
     * @description (Static) 문자열이 비어있는지 확인한다.
     *
     * @param {String} str 확인할 문자열
     * @return {Boolean} 비어있으면 true 비어있지 않으면 false
     * @Date : 2021. 5. 31
     */
    static isStringEmpty(str) {
        if (str === null) {
            return true;
        }
        if (str === "") {
            return true;
        }
        if (str === undefined) {
            return true;
        }
        return false;
    }

    /**
     * @static
     * @function mergeRect
     * @name module:Template/Utils.Utils#mergeRect
     * @description (Static)  두 Rect를 합친다.
     *
     * @param {Object} r1 {left: 0, right: 0, top: 0, right: 0} 합쳐야되는 Rect Object
     * @param {Object} r2 {left: 0, right: 0, top: 0, right: 0} 합쳐야되는 Rect Object
     * @return {Object} {left: 0, right: 0, top: 0, right: 0, x: 0, y: 0, width: 0, height: 0}: 합쳐진 Rect
     * @Date : 2021. 5. 31
     */
    static mergeRect(r1, r2) {
        return {
            left: Math.min(r1.left, r2.left),
            top: Math.min(r1.top, r2.top),
            right: Math.max(r1.right, r2.right),
            bottom: Math.max(r1.bottom, r2.bottom),
            x: Math.min(r1.left, r2.left),
            y: Math.min(r1.top, r2.top),
            width: Math.abs(Math.max(r1.right, r2.right) - Math.min(r1.left, r2.left)),
            height: Math.abs(Math.max(r1.bottom, r2.bottom) - Math.min(r1.top, r2.top)),
        }
    }

    /**
     * @static
     * @function boundingRectToRect
     * @name module:Template/Utils.Utils#boundingRectToRect
     * @description (Static) BoundingRect를 여기서 사용할 Rect Object로 변경
     *
     * @param {Object} rect {left: 0, with: 0, width: 0, height: 0} Bounding Rect Object
     * @return {Object} {left: 0, right: 0, top: 0, right: 0}: 여기서 사용할 Rect Object
     * @Date : 2021. 5. 31
     */
    static boundingRectToRect(rect) {
        return {
            left: rect.left,
            top: rect.top,
            right: rect.left + rect.width,
            bottom: rect.top + rect.height
        }
    }

    /**
     * @static
     * @function mergeObjectsRect
     * @name module:Template/Utils.Utils#mergeObjectsRect
     * @description (Static) Canvas의 Path Objects의 Rect들을 하나로 합친다.
     *
     * @param {Object} canvas Fabric canvas: Path Objects가 있는 canvas
     * @return {Object} {left: 0, right: 0, top: 0, right: 0}: 여기서 사용할 Rect Object
     * @Date : 2021. 5. 31
     */
    static mergeObjectsRect(canvas) {
        let rect = null;
        canvas.forEachObject(function (obj) {
            var bound = obj.getBoundingRect();
            if (rect === null) {
                rect = Utils.mergeRect(Utils.boundingRectToRect(bound), Utils.boundingRectToRect(bound));
            } else {
                rect = Utils.mergeRect(rect, Utils.boundingRectToRect(bound));
            }
        })
        return rect;
    }

    /**
     * @static
     * @function mergeFieldsBBox
     * @name module:Template/Utils.Utils#mergeFieldsBBox
     * @description (Static) Field List의 BBox들을 하나로 합친다.
     *
     * @param {Array} fields Field의 배열
     * @return {Object} {left: 0, right: 0, top: 0, right: 0}: 여기서 사용할 Rect Object
     * @Date : 2021. 5. 31
     */
    static mergeFieldsBBox(fields) {
        let rect = null;
        for (var idx = 0; idx < fields.length; idx += 1) {
            let bound = fields[idx].getBBox();
            if (rect === null) {
                rect = Utils.mergeRect(Utils.boundingRectToRect(bound), Utils.boundingRectToRect(bound));
            } else {
                rect = Utils.mergeRect(rect, Utils.boundingRectToRect(bound));
            }
        }
        return rect;
    }

    /**
     * @static
     * @function imageFileToBase64
     * @name module:Template/Utils.Utils#imageFileToBase64
     * @description (Static) Image파일을 읽어 Base64 String으로 반환한다.
     *
     * @param {Object} file File: 이미지 파일의 File Object
     * @param {Callback} callBackFunc  Base64 문자열을 받을 callback function
     * @Date : 2021. 5. 31
     */
    static imageFileToBase64(file, callBackFunc) {
        if (file === undefined || file === null) {
            return null;
        }
        if (!file.type.startsWith('image/')) { return null; }

        var reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = function () {
            callBackFunc(reader.result);
        };
        reader.onerror = function (error) {
            console.log('Error: ', error);
        };
    }

    /**
     * @static
     * @function changeLocale
     * @name module:Template/Utils.Utils#changeLocale
     * @description (Static) 현재 언어를 파라미터에 맞게 변환한다.
     *
     * @param {String} locale 바꿀 언어
     * @Date : 2021. 5. 31
     */
    static changeLocale(locale) {
        Utils.locale = locale;
        Utils.translator.translatePageTo(locale);
    }

    /**
     * @static
     * @function translateForKey
     * @name module:Template/Utils.Utils#translateForKey
     * @description (Static) 키에 해당하는 문자열을 현재 언어로 바꾼다.
     *
     * @param {String} key 바꿀 문자열에 해당하는 키
     * @Date : 2021. 5. 31
     */
    static translateForKey(key) {
        return Utils.translator.translateForKey(key, Utils.locale);
    }

    /**
     * @static
     * @function translatorFileLocation
     * @name module:Template/Utils.Utils#translatorFileLocation
     * @description (Static) 다국어 언어 파일의 위치를 지정한다.
     * @example
     * localhost:5500/js/pdf_form/i18n의 경우  "/js/pdf_form/i18n"
     * 
     * @param {String} filesLocation 언어파일의 위치(절대 경로)
     * @Date : 2021. 5. 31
     */
    static translatorFileLocation(filesLocation) {
        Utils.translator.config.filesLocation = filesLocation;
    }

    /**
     * @static
     * @function addTranslator
     * @name module:Template/Utils.Utils#addTranslator
     * @description (Static) 다국어 언어를 추가한다.
     * @example
     * addTranslator("jp", jsonData)
     * 
     * @param {String} locale 언어 이름
     * @param {Object} langData i18n/ko.json과 같은 양식으로 된 JSON을 파싱한 데이터
     * @Date : 2021. 5. 31
     */
    static addTranslator(locale, langData) {
        Utils.translator.add(locale, langData);
    }

    static appendFontFamily(fontFamilyArr) {
        Utils.fontFamilyComboBox = Utils.fontFamilyComboBox.concat(fontFamilyArr);
    }

    static generate_uuidv4() {
        return Math.random().toString(36).substring(2, 15) +
        Math.random().toString(36).substring(2, 15);
     }
}


/***/ }),

/***/ "./node_modules/animejs/lib/anime.es.js":
/*!**********************************************!*\
  !*** ./node_modules/animejs/lib/anime.es.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/*
 * anime.js v3.2.1
 * (c) 2020 Julian Garnier
 * Released under the MIT license
 * animejs.com
 */

// Defaults

var defaultInstanceSettings = {
  update: null,
  begin: null,
  loopBegin: null,
  changeBegin: null,
  change: null,
  changeComplete: null,
  loopComplete: null,
  complete: null,
  loop: 1,
  direction: 'normal',
  autoplay: true,
  timelineOffset: 0
};

var defaultTweenSettings = {
  duration: 1000,
  delay: 0,
  endDelay: 0,
  easing: 'easeOutElastic(1, .5)',
  round: 0
};

var validTransforms = ['translateX', 'translateY', 'translateZ', 'rotate', 'rotateX', 'rotateY', 'rotateZ', 'scale', 'scaleX', 'scaleY', 'scaleZ', 'skew', 'skewX', 'skewY', 'perspective', 'matrix', 'matrix3d'];

// Caching

var cache = {
  CSS: {},
  springs: {}
};

// Utils

function minMax(val, min, max) {
  return Math.min(Math.max(val, min), max);
}

function stringContains(str, text) {
  return str.indexOf(text) > -1;
}

function applyArguments(func, args) {
  return func.apply(null, args);
}

var is = {
  arr: function (a) { return Array.isArray(a); },
  obj: function (a) { return stringContains(Object.prototype.toString.call(a), 'Object'); },
  pth: function (a) { return is.obj(a) && a.hasOwnProperty('totalLength'); },
  svg: function (a) { return a instanceof SVGElement; },
  inp: function (a) { return a instanceof HTMLInputElement; },
  dom: function (a) { return a.nodeType || is.svg(a); },
  str: function (a) { return typeof a === 'string'; },
  fnc: function (a) { return typeof a === 'function'; },
  und: function (a) { return typeof a === 'undefined'; },
  nil: function (a) { return is.und(a) || a === null; },
  hex: function (a) { return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a); },
  rgb: function (a) { return /^rgb/.test(a); },
  hsl: function (a) { return /^hsl/.test(a); },
  col: function (a) { return (is.hex(a) || is.rgb(a) || is.hsl(a)); },
  key: function (a) { return !defaultInstanceSettings.hasOwnProperty(a) && !defaultTweenSettings.hasOwnProperty(a) && a !== 'targets' && a !== 'keyframes'; },
};

// Easings

function parseEasingParameters(string) {
  var match = /\(([^)]+)\)/.exec(string);
  return match ? match[1].split(',').map(function (p) { return parseFloat(p); }) : [];
}

// Spring solver inspired by Webkit Copyright © 2016 Apple Inc. All rights reserved. https://webkit.org/demos/spring/spring.js

function spring(string, duration) {

  var params = parseEasingParameters(string);
  var mass = minMax(is.und(params[0]) ? 1 : params[0], .1, 100);
  var stiffness = minMax(is.und(params[1]) ? 100 : params[1], .1, 100);
  var damping = minMax(is.und(params[2]) ? 10 : params[2], .1, 100);
  var velocity =  minMax(is.und(params[3]) ? 0 : params[3], .1, 100);
  var w0 = Math.sqrt(stiffness / mass);
  var zeta = damping / (2 * Math.sqrt(stiffness * mass));
  var wd = zeta < 1 ? w0 * Math.sqrt(1 - zeta * zeta) : 0;
  var a = 1;
  var b = zeta < 1 ? (zeta * w0 + -velocity) / wd : -velocity + w0;

  function solver(t) {
    var progress = duration ? (duration * t) / 1000 : t;
    if (zeta < 1) {
      progress = Math.exp(-progress * zeta * w0) * (a * Math.cos(wd * progress) + b * Math.sin(wd * progress));
    } else {
      progress = (a + b * progress) * Math.exp(-progress * w0);
    }
    if (t === 0 || t === 1) { return t; }
    return 1 - progress;
  }

  function getDuration() {
    var cached = cache.springs[string];
    if (cached) { return cached; }
    var frame = 1/6;
    var elapsed = 0;
    var rest = 0;
    while(true) {
      elapsed += frame;
      if (solver(elapsed) === 1) {
        rest++;
        if (rest >= 16) { break; }
      } else {
        rest = 0;
      }
    }
    var duration = elapsed * frame * 1000;
    cache.springs[string] = duration;
    return duration;
  }

  return duration ? solver : getDuration;

}

// Basic steps easing implementation https://developer.mozilla.org/fr/docs/Web/CSS/transition-timing-function

function steps(steps) {
  if ( steps === void 0 ) steps = 10;

  return function (t) { return Math.ceil((minMax(t, 0.000001, 1)) * steps) * (1 / steps); };
}

// BezierEasing https://github.com/gre/bezier-easing

var bezier = (function () {

  var kSplineTableSize = 11;
  var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);

  function A(aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1 }
  function B(aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1 }
  function C(aA1)      { return 3.0 * aA1 }

  function calcBezier(aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT }
  function getSlope(aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1) }

  function binarySubdivide(aX, aA, aB, mX1, mX2) {
    var currentX, currentT, i = 0;
    do {
      currentT = aA + (aB - aA) / 2.0;
      currentX = calcBezier(currentT, mX1, mX2) - aX;
      if (currentX > 0.0) { aB = currentT; } else { aA = currentT; }
    } while (Math.abs(currentX) > 0.0000001 && ++i < 10);
    return currentT;
  }

  function newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {
    for (var i = 0; i < 4; ++i) {
      var currentSlope = getSlope(aGuessT, mX1, mX2);
      if (currentSlope === 0.0) { return aGuessT; }
      var currentX = calcBezier(aGuessT, mX1, mX2) - aX;
      aGuessT -= currentX / currentSlope;
    }
    return aGuessT;
  }

  function bezier(mX1, mY1, mX2, mY2) {

    if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) { return; }
    var sampleValues = new Float32Array(kSplineTableSize);

    if (mX1 !== mY1 || mX2 !== mY2) {
      for (var i = 0; i < kSplineTableSize; ++i) {
        sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);
      }
    }

    function getTForX(aX) {

      var intervalStart = 0;
      var currentSample = 1;
      var lastSample = kSplineTableSize - 1;

      for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {
        intervalStart += kSampleStepSize;
      }

      --currentSample;

      var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);
      var guessForT = intervalStart + dist * kSampleStepSize;
      var initialSlope = getSlope(guessForT, mX1, mX2);

      if (initialSlope >= 0.001) {
        return newtonRaphsonIterate(aX, guessForT, mX1, mX2);
      } else if (initialSlope === 0.0) {
        return guessForT;
      } else {
        return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);
      }

    }

    return function (x) {
      if (mX1 === mY1 && mX2 === mY2) { return x; }
      if (x === 0 || x === 1) { return x; }
      return calcBezier(getTForX(x), mY1, mY2);
    }

  }

  return bezier;

})();

var penner = (function () {

  // Based on jQuery UI's implemenation of easing equations from Robert Penner (http://www.robertpenner.com/easing)

  var eases = { linear: function () { return function (t) { return t; }; } };

  var functionEasings = {
    Sine: function () { return function (t) { return 1 - Math.cos(t * Math.PI / 2); }; },
    Circ: function () { return function (t) { return 1 - Math.sqrt(1 - t * t); }; },
    Back: function () { return function (t) { return t * t * (3 * t - 2); }; },
    Bounce: function () { return function (t) {
      var pow2, b = 4;
      while (t < (( pow2 = Math.pow(2, --b)) - 1) / 11) {}
      return 1 / Math.pow(4, 3 - b) - 7.5625 * Math.pow(( pow2 * 3 - 2 ) / 22 - t, 2)
    }; },
    Elastic: function (amplitude, period) {
      if ( amplitude === void 0 ) amplitude = 1;
      if ( period === void 0 ) period = .5;

      var a = minMax(amplitude, 1, 10);
      var p = minMax(period, .1, 2);
      return function (t) {
        return (t === 0 || t === 1) ? t : 
          -a * Math.pow(2, 10 * (t - 1)) * Math.sin((((t - 1) - (p / (Math.PI * 2) * Math.asin(1 / a))) * (Math.PI * 2)) / p);
      }
    }
  };

  var baseEasings = ['Quad', 'Cubic', 'Quart', 'Quint', 'Expo'];

  baseEasings.forEach(function (name, i) {
    functionEasings[name] = function () { return function (t) { return Math.pow(t, i + 2); }; };
  });

  Object.keys(functionEasings).forEach(function (name) {
    var easeIn = functionEasings[name];
    eases['easeIn' + name] = easeIn;
    eases['easeOut' + name] = function (a, b) { return function (t) { return 1 - easeIn(a, b)(1 - t); }; };
    eases['easeInOut' + name] = function (a, b) { return function (t) { return t < 0.5 ? easeIn(a, b)(t * 2) / 2 : 
      1 - easeIn(a, b)(t * -2 + 2) / 2; }; };
    eases['easeOutIn' + name] = function (a, b) { return function (t) { return t < 0.5 ? (1 - easeIn(a, b)(1 - t * 2)) / 2 : 
      (easeIn(a, b)(t * 2 - 1) + 1) / 2; }; };
  });

  return eases;

})();

function parseEasings(easing, duration) {
  if (is.fnc(easing)) { return easing; }
  var name = easing.split('(')[0];
  var ease = penner[name];
  var args = parseEasingParameters(easing);
  switch (name) {
    case 'spring' : return spring(easing, duration);
    case 'cubicBezier' : return applyArguments(bezier, args);
    case 'steps' : return applyArguments(steps, args);
    default : return applyArguments(ease, args);
  }
}

// Strings

function selectString(str) {
  try {
    var nodes = document.querySelectorAll(str);
    return nodes;
  } catch(e) {
    return;
  }
}

// Arrays

function filterArray(arr, callback) {
  var len = arr.length;
  var thisArg = arguments.length >= 2 ? arguments[1] : void 0;
  var result = [];
  for (var i = 0; i < len; i++) {
    if (i in arr) {
      var val = arr[i];
      if (callback.call(thisArg, val, i, arr)) {
        result.push(val);
      }
    }
  }
  return result;
}

function flattenArray(arr) {
  return arr.reduce(function (a, b) { return a.concat(is.arr(b) ? flattenArray(b) : b); }, []);
}

function toArray(o) {
  if (is.arr(o)) { return o; }
  if (is.str(o)) { o = selectString(o) || o; }
  if (o instanceof NodeList || o instanceof HTMLCollection) { return [].slice.call(o); }
  return [o];
}

function arrayContains(arr, val) {
  return arr.some(function (a) { return a === val; });
}

// Objects

function cloneObject(o) {
  var clone = {};
  for (var p in o) { clone[p] = o[p]; }
  return clone;
}

function replaceObjectProps(o1, o2) {
  var o = cloneObject(o1);
  for (var p in o1) { o[p] = o2.hasOwnProperty(p) ? o2[p] : o1[p]; }
  return o;
}

function mergeObjects(o1, o2) {
  var o = cloneObject(o1);
  for (var p in o2) { o[p] = is.und(o1[p]) ? o2[p] : o1[p]; }
  return o;
}

// Colors

function rgbToRgba(rgbValue) {
  var rgb = /rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(rgbValue);
  return rgb ? ("rgba(" + (rgb[1]) + ",1)") : rgbValue;
}

function hexToRgba(hexValue) {
  var rgx = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
  var hex = hexValue.replace(rgx, function (m, r, g, b) { return r + r + g + g + b + b; } );
  var rgb = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
  var r = parseInt(rgb[1], 16);
  var g = parseInt(rgb[2], 16);
  var b = parseInt(rgb[3], 16);
  return ("rgba(" + r + "," + g + "," + b + ",1)");
}

function hslToRgba(hslValue) {
  var hsl = /hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(hslValue) || /hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(hslValue);
  var h = parseInt(hsl[1], 10) / 360;
  var s = parseInt(hsl[2], 10) / 100;
  var l = parseInt(hsl[3], 10) / 100;
  var a = hsl[4] || 1;
  function hue2rgb(p, q, t) {
    if (t < 0) { t += 1; }
    if (t > 1) { t -= 1; }
    if (t < 1/6) { return p + (q - p) * 6 * t; }
    if (t < 1/2) { return q; }
    if (t < 2/3) { return p + (q - p) * (2/3 - t) * 6; }
    return p;
  }
  var r, g, b;
  if (s == 0) {
    r = g = b = l;
  } else {
    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;
    var p = 2 * l - q;
    r = hue2rgb(p, q, h + 1/3);
    g = hue2rgb(p, q, h);
    b = hue2rgb(p, q, h - 1/3);
  }
  return ("rgba(" + (r * 255) + "," + (g * 255) + "," + (b * 255) + "," + a + ")");
}

function colorToRgb(val) {
  if (is.rgb(val)) { return rgbToRgba(val); }
  if (is.hex(val)) { return hexToRgba(val); }
  if (is.hsl(val)) { return hslToRgba(val); }
}

// Units

function getUnit(val) {
  var split = /[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(val);
  if (split) { return split[1]; }
}

function getTransformUnit(propName) {
  if (stringContains(propName, 'translate') || propName === 'perspective') { return 'px'; }
  if (stringContains(propName, 'rotate') || stringContains(propName, 'skew')) { return 'deg'; }
}

// Values

function getFunctionValue(val, animatable) {
  if (!is.fnc(val)) { return val; }
  return val(animatable.target, animatable.id, animatable.total);
}

function getAttribute(el, prop) {
  return el.getAttribute(prop);
}

function convertPxToUnit(el, value, unit) {
  var valueUnit = getUnit(value);
  if (arrayContains([unit, 'deg', 'rad', 'turn'], valueUnit)) { return value; }
  var cached = cache.CSS[value + unit];
  if (!is.und(cached)) { return cached; }
  var baseline = 100;
  var tempEl = document.createElement(el.tagName);
  var parentEl = (el.parentNode && (el.parentNode !== document)) ? el.parentNode : document.body;
  parentEl.appendChild(tempEl);
  tempEl.style.position = 'absolute';
  tempEl.style.width = baseline + unit;
  var factor = baseline / tempEl.offsetWidth;
  parentEl.removeChild(tempEl);
  var convertedUnit = factor * parseFloat(value);
  cache.CSS[value + unit] = convertedUnit;
  return convertedUnit;
}

function getCSSValue(el, prop, unit) {
  if (prop in el.style) {
    var uppercasePropName = prop.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();
    var value = el.style[prop] || getComputedStyle(el).getPropertyValue(uppercasePropName) || '0';
    return unit ? convertPxToUnit(el, value, unit) : value;
  }
}

function getAnimationType(el, prop) {
  if (is.dom(el) && !is.inp(el) && (!is.nil(getAttribute(el, prop)) || (is.svg(el) && el[prop]))) { return 'attribute'; }
  if (is.dom(el) && arrayContains(validTransforms, prop)) { return 'transform'; }
  if (is.dom(el) && (prop !== 'transform' && getCSSValue(el, prop))) { return 'css'; }
  if (el[prop] != null) { return 'object'; }
}

function getElementTransforms(el) {
  if (!is.dom(el)) { return; }
  var str = el.style.transform || '';
  var reg  = /(\w+)\(([^)]*)\)/g;
  var transforms = new Map();
  var m; while (m = reg.exec(str)) { transforms.set(m[1], m[2]); }
  return transforms;
}

function getTransformValue(el, propName, animatable, unit) {
  var defaultVal = stringContains(propName, 'scale') ? 1 : 0 + getTransformUnit(propName);
  var value = getElementTransforms(el).get(propName) || defaultVal;
  if (animatable) {
    animatable.transforms.list.set(propName, value);
    animatable.transforms['last'] = propName;
  }
  return unit ? convertPxToUnit(el, value, unit) : value;
}

function getOriginalTargetValue(target, propName, unit, animatable) {
  switch (getAnimationType(target, propName)) {
    case 'transform': return getTransformValue(target, propName, animatable, unit);
    case 'css': return getCSSValue(target, propName, unit);
    case 'attribute': return getAttribute(target, propName);
    default: return target[propName] || 0;
  }
}

function getRelativeValue(to, from) {
  var operator = /^(\*=|\+=|-=)/.exec(to);
  if (!operator) { return to; }
  var u = getUnit(to) || 0;
  var x = parseFloat(from);
  var y = parseFloat(to.replace(operator[0], ''));
  switch (operator[0][0]) {
    case '+': return x + y + u;
    case '-': return x - y + u;
    case '*': return x * y + u;
  }
}

function validateValue(val, unit) {
  if (is.col(val)) { return colorToRgb(val); }
  if (/\s/g.test(val)) { return val; }
  var originalUnit = getUnit(val);
  var unitLess = originalUnit ? val.substr(0, val.length - originalUnit.length) : val;
  if (unit) { return unitLess + unit; }
  return unitLess;
}

// getTotalLength() equivalent for circle, rect, polyline, polygon and line shapes
// adapted from https://gist.github.com/SebLambla/3e0550c496c236709744

function getDistance(p1, p2) {
  return Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2));
}

function getCircleLength(el) {
  return Math.PI * 2 * getAttribute(el, 'r');
}

function getRectLength(el) {
  return (getAttribute(el, 'width') * 2) + (getAttribute(el, 'height') * 2);
}

function getLineLength(el) {
  return getDistance(
    {x: getAttribute(el, 'x1'), y: getAttribute(el, 'y1')}, 
    {x: getAttribute(el, 'x2'), y: getAttribute(el, 'y2')}
  );
}

function getPolylineLength(el) {
  var points = el.points;
  var totalLength = 0;
  var previousPos;
  for (var i = 0 ; i < points.numberOfItems; i++) {
    var currentPos = points.getItem(i);
    if (i > 0) { totalLength += getDistance(previousPos, currentPos); }
    previousPos = currentPos;
  }
  return totalLength;
}

function getPolygonLength(el) {
  var points = el.points;
  return getPolylineLength(el) + getDistance(points.getItem(points.numberOfItems - 1), points.getItem(0));
}

// Path animation

function getTotalLength(el) {
  if (el.getTotalLength) { return el.getTotalLength(); }
  switch(el.tagName.toLowerCase()) {
    case 'circle': return getCircleLength(el);
    case 'rect': return getRectLength(el);
    case 'line': return getLineLength(el);
    case 'polyline': return getPolylineLength(el);
    case 'polygon': return getPolygonLength(el);
  }
}

function setDashoffset(el) {
  var pathLength = getTotalLength(el);
  el.setAttribute('stroke-dasharray', pathLength);
  return pathLength;
}

// Motion path

function getParentSvgEl(el) {
  var parentEl = el.parentNode;
  while (is.svg(parentEl)) {
    if (!is.svg(parentEl.parentNode)) { break; }
    parentEl = parentEl.parentNode;
  }
  return parentEl;
}

function getParentSvg(pathEl, svgData) {
  var svg = svgData || {};
  var parentSvgEl = svg.el || getParentSvgEl(pathEl);
  var rect = parentSvgEl.getBoundingClientRect();
  var viewBoxAttr = getAttribute(parentSvgEl, 'viewBox');
  var width = rect.width;
  var height = rect.height;
  var viewBox = svg.viewBox || (viewBoxAttr ? viewBoxAttr.split(' ') : [0, 0, width, height]);
  return {
    el: parentSvgEl,
    viewBox: viewBox,
    x: viewBox[0] / 1,
    y: viewBox[1] / 1,
    w: width,
    h: height,
    vW: viewBox[2],
    vH: viewBox[3]
  }
}

function getPath(path, percent) {
  var pathEl = is.str(path) ? selectString(path)[0] : path;
  var p = percent || 100;
  return function(property) {
    return {
      property: property,
      el: pathEl,
      svg: getParentSvg(pathEl),
      totalLength: getTotalLength(pathEl) * (p / 100)
    }
  }
}

function getPathProgress(path, progress, isPathTargetInsideSVG) {
  function point(offset) {
    if ( offset === void 0 ) offset = 0;

    var l = progress + offset >= 1 ? progress + offset : 0;
    return path.el.getPointAtLength(l);
  }
  var svg = getParentSvg(path.el, path.svg);
  var p = point();
  var p0 = point(-1);
  var p1 = point(+1);
  var scaleX = isPathTargetInsideSVG ? 1 : svg.w / svg.vW;
  var scaleY = isPathTargetInsideSVG ? 1 : svg.h / svg.vH;
  switch (path.property) {
    case 'x': return (p.x - svg.x) * scaleX;
    case 'y': return (p.y - svg.y) * scaleY;
    case 'angle': return Math.atan2(p1.y - p0.y, p1.x - p0.x) * 180 / Math.PI;
  }
}

// Decompose value

function decomposeValue(val, unit) {
  // const rgx = /-?\d*\.?\d+/g; // handles basic numbers
  // const rgx = /[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g; // handles exponents notation
  var rgx = /[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g; // handles exponents notation
  var value = validateValue((is.pth(val) ? val.totalLength : val), unit) + '';
  return {
    original: value,
    numbers: value.match(rgx) ? value.match(rgx).map(Number) : [0],
    strings: (is.str(val) || unit) ? value.split(rgx) : []
  }
}

// Animatables

function parseTargets(targets) {
  var targetsArray = targets ? (flattenArray(is.arr(targets) ? targets.map(toArray) : toArray(targets))) : [];
  return filterArray(targetsArray, function (item, pos, self) { return self.indexOf(item) === pos; });
}

function getAnimatables(targets) {
  var parsed = parseTargets(targets);
  return parsed.map(function (t, i) {
    return {target: t, id: i, total: parsed.length, transforms: { list: getElementTransforms(t) } };
  });
}

// Properties

function normalizePropertyTweens(prop, tweenSettings) {
  var settings = cloneObject(tweenSettings);
  // Override duration if easing is a spring
  if (/^spring/.test(settings.easing)) { settings.duration = spring(settings.easing); }
  if (is.arr(prop)) {
    var l = prop.length;
    var isFromTo = (l === 2 && !is.obj(prop[0]));
    if (!isFromTo) {
      // Duration divided by the number of tweens
      if (!is.fnc(tweenSettings.duration)) { settings.duration = tweenSettings.duration / l; }
    } else {
      // Transform [from, to] values shorthand to a valid tween value
      prop = {value: prop};
    }
  }
  var propArray = is.arr(prop) ? prop : [prop];
  return propArray.map(function (v, i) {
    var obj = (is.obj(v) && !is.pth(v)) ? v : {value: v};
    // Default delay value should only be applied to the first tween
    if (is.und(obj.delay)) { obj.delay = !i ? tweenSettings.delay : 0; }
    // Default endDelay value should only be applied to the last tween
    if (is.und(obj.endDelay)) { obj.endDelay = i === propArray.length - 1 ? tweenSettings.endDelay : 0; }
    return obj;
  }).map(function (k) { return mergeObjects(k, settings); });
}


function flattenKeyframes(keyframes) {
  var propertyNames = filterArray(flattenArray(keyframes.map(function (key) { return Object.keys(key); })), function (p) { return is.key(p); })
  .reduce(function (a,b) { if (a.indexOf(b) < 0) { a.push(b); } return a; }, []);
  var properties = {};
  var loop = function ( i ) {
    var propName = propertyNames[i];
    properties[propName] = keyframes.map(function (key) {
      var newKey = {};
      for (var p in key) {
        if (is.key(p)) {
          if (p == propName) { newKey.value = key[p]; }
        } else {
          newKey[p] = key[p];
        }
      }
      return newKey;
    });
  };

  for (var i = 0; i < propertyNames.length; i++) loop( i );
  return properties;
}

function getProperties(tweenSettings, params) {
  var properties = [];
  var keyframes = params.keyframes;
  if (keyframes) { params = mergeObjects(flattenKeyframes(keyframes), params); }
  for (var p in params) {
    if (is.key(p)) {
      properties.push({
        name: p,
        tweens: normalizePropertyTweens(params[p], tweenSettings)
      });
    }
  }
  return properties;
}

// Tweens

function normalizeTweenValues(tween, animatable) {
  var t = {};
  for (var p in tween) {
    var value = getFunctionValue(tween[p], animatable);
    if (is.arr(value)) {
      value = value.map(function (v) { return getFunctionValue(v, animatable); });
      if (value.length === 1) { value = value[0]; }
    }
    t[p] = value;
  }
  t.duration = parseFloat(t.duration);
  t.delay = parseFloat(t.delay);
  return t;
}

function normalizeTweens(prop, animatable) {
  var previousTween;
  return prop.tweens.map(function (t) {
    var tween = normalizeTweenValues(t, animatable);
    var tweenValue = tween.value;
    var to = is.arr(tweenValue) ? tweenValue[1] : tweenValue;
    var toUnit = getUnit(to);
    var originalValue = getOriginalTargetValue(animatable.target, prop.name, toUnit, animatable);
    var previousValue = previousTween ? previousTween.to.original : originalValue;
    var from = is.arr(tweenValue) ? tweenValue[0] : previousValue;
    var fromUnit = getUnit(from) || getUnit(originalValue);
    var unit = toUnit || fromUnit;
    if (is.und(to)) { to = previousValue; }
    tween.from = decomposeValue(from, unit);
    tween.to = decomposeValue(getRelativeValue(to, from), unit);
    tween.start = previousTween ? previousTween.end : 0;
    tween.end = tween.start + tween.delay + tween.duration + tween.endDelay;
    tween.easing = parseEasings(tween.easing, tween.duration);
    tween.isPath = is.pth(tweenValue);
    tween.isPathTargetInsideSVG = tween.isPath && is.svg(animatable.target);
    tween.isColor = is.col(tween.from.original);
    if (tween.isColor) { tween.round = 1; }
    previousTween = tween;
    return tween;
  });
}

// Tween progress

var setProgressValue = {
  css: function (t, p, v) { return t.style[p] = v; },
  attribute: function (t, p, v) { return t.setAttribute(p, v); },
  object: function (t, p, v) { return t[p] = v; },
  transform: function (t, p, v, transforms, manual) {
    transforms.list.set(p, v);
    if (p === transforms.last || manual) {
      var str = '';
      transforms.list.forEach(function (value, prop) { str += prop + "(" + value + ") "; });
      t.style.transform = str;
    }
  }
};

// Set Value helper

function setTargetsValue(targets, properties) {
  var animatables = getAnimatables(targets);
  animatables.forEach(function (animatable) {
    for (var property in properties) {
      var value = getFunctionValue(properties[property], animatable);
      var target = animatable.target;
      var valueUnit = getUnit(value);
      var originalValue = getOriginalTargetValue(target, property, valueUnit, animatable);
      var unit = valueUnit || getUnit(originalValue);
      var to = getRelativeValue(validateValue(value, unit), originalValue);
      var animType = getAnimationType(target, property);
      setProgressValue[animType](target, property, to, animatable.transforms, true);
    }
  });
}

// Animations

function createAnimation(animatable, prop) {
  var animType = getAnimationType(animatable.target, prop.name);
  if (animType) {
    var tweens = normalizeTweens(prop, animatable);
    var lastTween = tweens[tweens.length - 1];
    return {
      type: animType,
      property: prop.name,
      animatable: animatable,
      tweens: tweens,
      duration: lastTween.end,
      delay: tweens[0].delay,
      endDelay: lastTween.endDelay
    }
  }
}

function getAnimations(animatables, properties) {
  return filterArray(flattenArray(animatables.map(function (animatable) {
    return properties.map(function (prop) {
      return createAnimation(animatable, prop);
    });
  })), function (a) { return !is.und(a); });
}

// Create Instance

function getInstanceTimings(animations, tweenSettings) {
  var animLength = animations.length;
  var getTlOffset = function (anim) { return anim.timelineOffset ? anim.timelineOffset : 0; };
  var timings = {};
  timings.duration = animLength ? Math.max.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.duration; })) : tweenSettings.duration;
  timings.delay = animLength ? Math.min.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.delay; })) : tweenSettings.delay;
  timings.endDelay = animLength ? timings.duration - Math.max.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.duration - anim.endDelay; })) : tweenSettings.endDelay;
  return timings;
}

var instanceID = 0;

function createNewInstance(params) {
  var instanceSettings = replaceObjectProps(defaultInstanceSettings, params);
  var tweenSettings = replaceObjectProps(defaultTweenSettings, params);
  var properties = getProperties(tweenSettings, params);
  var animatables = getAnimatables(params.targets);
  var animations = getAnimations(animatables, properties);
  var timings = getInstanceTimings(animations, tweenSettings);
  var id = instanceID;
  instanceID++;
  return mergeObjects(instanceSettings, {
    id: id,
    children: [],
    animatables: animatables,
    animations: animations,
    duration: timings.duration,
    delay: timings.delay,
    endDelay: timings.endDelay
  });
}

// Core

var activeInstances = [];

var engine = (function () {
  var raf;

  function play() {
    if (!raf && (!isDocumentHidden() || !anime.suspendWhenDocumentHidden) && activeInstances.length > 0) {
      raf = requestAnimationFrame(step);
    }
  }
  function step(t) {
    // memo on algorithm issue:
    // dangerous iteration over mutable `activeInstances`
    // (that collection may be updated from within callbacks of `tick`-ed animation instances)
    var activeInstancesLength = activeInstances.length;
    var i = 0;
    while (i < activeInstancesLength) {
      var activeInstance = activeInstances[i];
      if (!activeInstance.paused) {
        activeInstance.tick(t);
        i++;
      } else {
        activeInstances.splice(i, 1);
        activeInstancesLength--;
      }
    }
    raf = i > 0 ? requestAnimationFrame(step) : undefined;
  }

  function handleVisibilityChange() {
    if (!anime.suspendWhenDocumentHidden) { return; }

    if (isDocumentHidden()) {
      // suspend ticks
      raf = cancelAnimationFrame(raf);
    } else { // is back to active tab
      // first adjust animations to consider the time that ticks were suspended
      activeInstances.forEach(
        function (instance) { return instance ._onDocumentVisibility(); }
      );
      engine();
    }
  }
  if (typeof document !== 'undefined') {
    document.addEventListener('visibilitychange', handleVisibilityChange);
  }

  return play;
})();

function isDocumentHidden() {
  return !!document && document.hidden;
}

// Public Instance

function anime(params) {
  if ( params === void 0 ) params = {};


  var startTime = 0, lastTime = 0, now = 0;
  var children, childrenLength = 0;
  var resolve = null;

  function makePromise(instance) {
    var promise = window.Promise && new Promise(function (_resolve) { return resolve = _resolve; });
    instance.finished = promise;
    return promise;
  }

  var instance = createNewInstance(params);
  var promise = makePromise(instance);

  function toggleInstanceDirection() {
    var direction = instance.direction;
    if (direction !== 'alternate') {
      instance.direction = direction !== 'normal' ? 'normal' : 'reverse';
    }
    instance.reversed = !instance.reversed;
    children.forEach(function (child) { return child.reversed = instance.reversed; });
  }

  function adjustTime(time) {
    return instance.reversed ? instance.duration - time : time;
  }

  function resetTime() {
    startTime = 0;
    lastTime = adjustTime(instance.currentTime) * (1 / anime.speed);
  }

  function seekChild(time, child) {
    if (child) { child.seek(time - child.timelineOffset); }
  }

  function syncInstanceChildren(time) {
    if (!instance.reversePlayback) {
      for (var i = 0; i < childrenLength; i++) { seekChild(time, children[i]); }
    } else {
      for (var i$1 = childrenLength; i$1--;) { seekChild(time, children[i$1]); }
    }
  }

  function setAnimationsProgress(insTime) {
    var i = 0;
    var animations = instance.animations;
    var animationsLength = animations.length;
    while (i < animationsLength) {
      var anim = animations[i];
      var animatable = anim.animatable;
      var tweens = anim.tweens;
      var tweenLength = tweens.length - 1;
      var tween = tweens[tweenLength];
      // Only check for keyframes if there is more than one tween
      if (tweenLength) { tween = filterArray(tweens, function (t) { return (insTime < t.end); })[0] || tween; }
      var elapsed = minMax(insTime - tween.start - tween.delay, 0, tween.duration) / tween.duration;
      var eased = isNaN(elapsed) ? 1 : tween.easing(elapsed);
      var strings = tween.to.strings;
      var round = tween.round;
      var numbers = [];
      var toNumbersLength = tween.to.numbers.length;
      var progress = (void 0);
      for (var n = 0; n < toNumbersLength; n++) {
        var value = (void 0);
        var toNumber = tween.to.numbers[n];
        var fromNumber = tween.from.numbers[n] || 0;
        if (!tween.isPath) {
          value = fromNumber + (eased * (toNumber - fromNumber));
        } else {
          value = getPathProgress(tween.value, eased * toNumber, tween.isPathTargetInsideSVG);
        }
        if (round) {
          if (!(tween.isColor && n > 2)) {
            value = Math.round(value * round) / round;
          }
        }
        numbers.push(value);
      }
      // Manual Array.reduce for better performances
      var stringsLength = strings.length;
      if (!stringsLength) {
        progress = numbers[0];
      } else {
        progress = strings[0];
        for (var s = 0; s < stringsLength; s++) {
          var a = strings[s];
          var b = strings[s + 1];
          var n$1 = numbers[s];
          if (!isNaN(n$1)) {
            if (!b) {
              progress += n$1 + ' ';
            } else {
              progress += n$1 + b;
            }
          }
        }
      }
      setProgressValue[anim.type](animatable.target, anim.property, progress, animatable.transforms);
      anim.currentValue = progress;
      i++;
    }
  }

  function setCallback(cb) {
    if (instance[cb] && !instance.passThrough) { instance[cb](instance); }
  }

  function countIteration() {
    if (instance.remaining && instance.remaining !== true) {
      instance.remaining--;
    }
  }

  function setInstanceProgress(engineTime) {
    var insDuration = instance.duration;
    var insDelay = instance.delay;
    var insEndDelay = insDuration - instance.endDelay;
    var insTime = adjustTime(engineTime);
    instance.progress = minMax((insTime / insDuration) * 100, 0, 100);
    instance.reversePlayback = insTime < instance.currentTime;
    if (children) { syncInstanceChildren(insTime); }
    if (!instance.began && instance.currentTime > 0) {
      instance.began = true;
      setCallback('begin');
    }
    if (!instance.loopBegan && instance.currentTime > 0) {
      instance.loopBegan = true;
      setCallback('loopBegin');
    }
    if (insTime <= insDelay && instance.currentTime !== 0) {
      setAnimationsProgress(0);
    }
    if ((insTime >= insEndDelay && instance.currentTime !== insDuration) || !insDuration) {
      setAnimationsProgress(insDuration);
    }
    if (insTime > insDelay && insTime < insEndDelay) {
      if (!instance.changeBegan) {
        instance.changeBegan = true;
        instance.changeCompleted = false;
        setCallback('changeBegin');
      }
      setCallback('change');
      setAnimationsProgress(insTime);
    } else {
      if (instance.changeBegan) {
        instance.changeCompleted = true;
        instance.changeBegan = false;
        setCallback('changeComplete');
      }
    }
    instance.currentTime = minMax(insTime, 0, insDuration);
    if (instance.began) { setCallback('update'); }
    if (engineTime >= insDuration) {
      lastTime = 0;
      countIteration();
      if (!instance.remaining) {
        instance.paused = true;
        if (!instance.completed) {
          instance.completed = true;
          setCallback('loopComplete');
          setCallback('complete');
          if (!instance.passThrough && 'Promise' in window) {
            resolve();
            promise = makePromise(instance);
          }
        }
      } else {
        startTime = now;
        setCallback('loopComplete');
        instance.loopBegan = false;
        if (instance.direction === 'alternate') {
          toggleInstanceDirection();
        }
      }
    }
  }

  instance.reset = function() {
    var direction = instance.direction;
    instance.passThrough = false;
    instance.currentTime = 0;
    instance.progress = 0;
    instance.paused = true;
    instance.began = false;
    instance.loopBegan = false;
    instance.changeBegan = false;
    instance.completed = false;
    instance.changeCompleted = false;
    instance.reversePlayback = false;
    instance.reversed = direction === 'reverse';
    instance.remaining = instance.loop;
    children = instance.children;
    childrenLength = children.length;
    for (var i = childrenLength; i--;) { instance.children[i].reset(); }
    if (instance.reversed && instance.loop !== true || (direction === 'alternate' && instance.loop === 1)) { instance.remaining++; }
    setAnimationsProgress(instance.reversed ? instance.duration : 0);
  };

  // internal method (for engine) to adjust animation timings before restoring engine ticks (rAF)
  instance._onDocumentVisibility = resetTime;

  // Set Value helper

  instance.set = function(targets, properties) {
    setTargetsValue(targets, properties);
    return instance;
  };

  instance.tick = function(t) {
    now = t;
    if (!startTime) { startTime = now; }
    setInstanceProgress((now + (lastTime - startTime)) * anime.speed);
  };

  instance.seek = function(time) {
    setInstanceProgress(adjustTime(time));
  };

  instance.pause = function() {
    instance.paused = true;
    resetTime();
  };

  instance.play = function() {
    if (!instance.paused) { return; }
    if (instance.completed) { instance.reset(); }
    instance.paused = false;
    activeInstances.push(instance);
    resetTime();
    engine();
  };

  instance.reverse = function() {
    toggleInstanceDirection();
    instance.completed = instance.reversed ? false : true;
    resetTime();
  };

  instance.restart = function() {
    instance.reset();
    instance.play();
  };

  instance.remove = function(targets) {
    var targetsArray = parseTargets(targets);
    removeTargetsFromInstance(targetsArray, instance);
  };

  instance.reset();

  if (instance.autoplay) { instance.play(); }

  return instance;

}

// Remove targets from animation

function removeTargetsFromAnimations(targetsArray, animations) {
  for (var a = animations.length; a--;) {
    if (arrayContains(targetsArray, animations[a].animatable.target)) {
      animations.splice(a, 1);
    }
  }
}

function removeTargetsFromInstance(targetsArray, instance) {
  var animations = instance.animations;
  var children = instance.children;
  removeTargetsFromAnimations(targetsArray, animations);
  for (var c = children.length; c--;) {
    var child = children[c];
    var childAnimations = child.animations;
    removeTargetsFromAnimations(targetsArray, childAnimations);
    if (!childAnimations.length && !child.children.length) { children.splice(c, 1); }
  }
  if (!animations.length && !children.length) { instance.pause(); }
}

function removeTargetsFromActiveInstances(targets) {
  var targetsArray = parseTargets(targets);
  for (var i = activeInstances.length; i--;) {
    var instance = activeInstances[i];
    removeTargetsFromInstance(targetsArray, instance);
  }
}

// Stagger helpers

function stagger(val, params) {
  if ( params === void 0 ) params = {};

  var direction = params.direction || 'normal';
  var easing = params.easing ? parseEasings(params.easing) : null;
  var grid = params.grid;
  var axis = params.axis;
  var fromIndex = params.from || 0;
  var fromFirst = fromIndex === 'first';
  var fromCenter = fromIndex === 'center';
  var fromLast = fromIndex === 'last';
  var isRange = is.arr(val);
  var val1 = isRange ? parseFloat(val[0]) : parseFloat(val);
  var val2 = isRange ? parseFloat(val[1]) : 0;
  var unit = getUnit(isRange ? val[1] : val) || 0;
  var start = params.start || 0 + (isRange ? val1 : 0);
  var values = [];
  var maxValue = 0;
  return function (el, i, t) {
    if (fromFirst) { fromIndex = 0; }
    if (fromCenter) { fromIndex = (t - 1) / 2; }
    if (fromLast) { fromIndex = t - 1; }
    if (!values.length) {
      for (var index = 0; index < t; index++) {
        if (!grid) {
          values.push(Math.abs(fromIndex - index));
        } else {
          var fromX = !fromCenter ? fromIndex%grid[0] : (grid[0]-1)/2;
          var fromY = !fromCenter ? Math.floor(fromIndex/grid[0]) : (grid[1]-1)/2;
          var toX = index%grid[0];
          var toY = Math.floor(index/grid[0]);
          var distanceX = fromX - toX;
          var distanceY = fromY - toY;
          var value = Math.sqrt(distanceX * distanceX + distanceY * distanceY);
          if (axis === 'x') { value = -distanceX; }
          if (axis === 'y') { value = -distanceY; }
          values.push(value);
        }
        maxValue = Math.max.apply(Math, values);
      }
      if (easing) { values = values.map(function (val) { return easing(val / maxValue) * maxValue; }); }
      if (direction === 'reverse') { values = values.map(function (val) { return axis ? (val < 0) ? val * -1 : -val : Math.abs(maxValue - val); }); }
    }
    var spacing = isRange ? (val2 - val1) / maxValue : val1;
    return start + (spacing * (Math.round(values[i] * 100) / 100)) + unit;
  }
}

// Timeline

function timeline(params) {
  if ( params === void 0 ) params = {};

  var tl = anime(params);
  tl.duration = 0;
  tl.add = function(instanceParams, timelineOffset) {
    var tlIndex = activeInstances.indexOf(tl);
    var children = tl.children;
    if (tlIndex > -1) { activeInstances.splice(tlIndex, 1); }
    function passThrough(ins) { ins.passThrough = true; }
    for (var i = 0; i < children.length; i++) { passThrough(children[i]); }
    var insParams = mergeObjects(instanceParams, replaceObjectProps(defaultTweenSettings, params));
    insParams.targets = insParams.targets || params.targets;
    var tlDuration = tl.duration;
    insParams.autoplay = false;
    insParams.direction = tl.direction;
    insParams.timelineOffset = is.und(timelineOffset) ? tlDuration : getRelativeValue(timelineOffset, tlDuration);
    passThrough(tl);
    tl.seek(insParams.timelineOffset);
    var ins = anime(insParams);
    passThrough(ins);
    children.push(ins);
    var timings = getInstanceTimings(children, params);
    tl.delay = timings.delay;
    tl.endDelay = timings.endDelay;
    tl.duration = timings.duration;
    tl.seek(0);
    tl.reset();
    if (tl.autoplay) { tl.play(); }
    return tl;
  };
  return tl;
}

anime.version = '3.2.1';
anime.speed = 1;
// TODO:#review: naming, documentation
anime.suspendWhenDocumentHidden = true;
anime.running = activeInstances;
anime.remove = removeTargetsFromActiveInstances;
anime.get = getOriginalTargetValue;
anime.set = setTargetsValue;
anime.convertPx = convertPxToUnit;
anime.path = getPath;
anime.setDashoffset = setDashoffset;
anime.stagger = stagger;
anime.timeline = timeline;
anime.easing = parseEasings;
anime.penner = penner;
anime.random = function (min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; };

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (anime);


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			loaded: false,
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/harmony module decorator */
/******/ 	(() => {
/******/ 		__webpack_require__.hmd = (module) => {
/******/ 			module = Object.create(module);
/******/ 			if (!module.children) module.children = [];
/******/ 			Object.defineProperty(module, 'exports', {
/******/ 				enumerable: true,
/******/ 				set: () => {
/******/ 					throw new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);
/******/ 				}
/******/ 			});
/******/ 			return module;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!**************************************************!*\
  !*** ./js/pdf_form/src/template/templateMain.js ***!
  \**************************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addTranslator: () => (/* binding */ addTranslator),
/* harmony export */   appendEditorHTMLToTarget: () => (/* binding */ appendEditorHTMLToTarget),
/* harmony export */   appendFontFamily: () => (/* binding */ appendFontFamily),
/* harmony export */   appendSignTabShowOpt: () => (/* binding */ appendSignTabShowOpt),
/* harmony export */   changeTemplateLocale: () => (/* binding */ changeTemplateLocale),
/* harmony export */   changeTranslatorFileLocation: () => (/* binding */ changeTranslatorFileLocation),
/* harmony export */   checkTemplateFieldData: () => (/* binding */ checkTemplateFieldData),
/* harmony export */   copyField: () => (/* binding */ copyField),
/* harmony export */   getJsonData: () => (/* binding */ getJsonData),
/* harmony export */   initDocument: () => (/* binding */ initDocument),
/* harmony export */   pasteField: () => (/* binding */ pasteField),
/* harmony export */   releaseTemplate: () => (/* binding */ releaseTemplate),
/* harmony export */   removeEditorHTMLFromTarget: () => (/* binding */ removeEditorHTMLFromTarget)
/* harmony export */ });
/* harmony import */ var _Constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Constants */ "./js/pdf_form/src/Constants.js");
/* harmony import */ var _pdf_cursor_tool__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../pdf.cursor.tool */ "./js/pdf_form/src/pdf.cursor.tool.js");
/* harmony import */ var _templatemod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./templatemod */ "./js/pdf_form/src/template/templatemod.js");
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");
/**
 * @module Template/TemplateMain
 */

console.log('Template VERSION:', "1.0.0000");







var pdfCursorTools, pdfViewer, templatemod, __templateOwnerNode;

const USE_ONLY_CSS_ZOOM = false;
const TEXT_LAYER_MODE = 0; // DISABLE
const MAX_IMAGE_SIZE = 1024 * 1024;
const DEFAULT_SCALE_DELTA = 1.0;

/**
 * @description PDF문서를 로드하고 초기 셋팅을 한다.
 * 
 * @param {Element} ownerNode  해당 프로젝트의 최상단 Element를 감싸고 있는 Element
 * @param {String} pdfFileUrl   PDF FILE URL
 * @param {Array}  userList  서명자 정보 리스트
 * @param {Array} dvOptionList  기본값 정보 리스트
 * @param {Object} importData  기존 Template에서 저장한 Json Object
 * @param {Array} langs  사용할 다국어 리스트 기본값으로 ["ko", "en"]가 들어있다.
 * @Date : 2021. 5. 31
 * @Method Name : initDocument
 */
function initDocument(ownerNode, pdfFileUrl, userList, dvOptionList, signTabShowDefOptVal, importData, langs = ["ko", "en"]) {
    __templateOwnerNode = ownerNode;
    
    _utils_utils_js__WEBPACK_IMPORTED_MODULE_3__.Utils.translator.fetch(langs).then(() => {
        // -> Translations are ready...
        _utils_utils_js__WEBPACK_IMPORTED_MODULE_3__.Utils.changeLocale(langs[0]);
    });

    let pdfContainer = __templateOwnerNode.querySelector(' #' + _Constants__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TEMPLATE_PDF_VIEWER_CONTAINER);
    let eventBus = new pdfjsViewer.EventBus();
    pdfCursorTools = new _pdf_cursor_tool__WEBPACK_IMPORTED_MODULE_1__.PDFCursorTools({
        container: pdfContainer,
        eventBus: eventBus,
        cursorToolOnLoad: 0
    });

    pdfViewer = new pdfjsViewer.PDFViewer({
        container: pdfContainer,
        eventBus: eventBus,
        useOnlyCssZoom: USE_ONLY_CSS_ZOOM,
        textLayerMode: TEXT_LAYER_MODE,
    });

    templatemod = new _templatemod__WEBPACK_IMPORTED_MODULE_2__.TemplateMod(pdfViewer, ownerNode);
    templatemod.appendSignTabShowOpt(signTabShowDefOptVal);
    templatemod.buildSignTabShowOpt(signTabShowDefOptVal);
    templatemod.buildFieldUserInfo(userList);
    templatemod.buildDVOptsInfo(dvOptionList);
     
    eventBus.on("pagerendered", function (evt) {
        console.log("pageRendered: ");
    });

    eventBus.on("pagechanging", function (evt) {
        console.log("pagechanging");
    });

    eventBus.on("scalechanging", function (evt) {
        console.log("scalechanging");
        changeLayerSize(evt);
    });

    eventBus.on("pagesinit", function () {
        console.log("pagesinit");
        pdfViewer.currentScale = DEFAULT_SCALE_DELTA;
        // We can use pdfViewer now, e.g. let's change default scale.
    });

    let loadingTask = pdfjsLib.getDocument({
        url: pdfFileUrl,
        cMapUrl: '/js/pdf_form/pdfjs/cmaps/',
        cMapPacked: true,
    })
    loadingTask.promise.then(function (pdfDocument) {
        pdfDocument.getData().then((data) => {
        })
        pdfViewer.currentScale = DEFAULT_SCALE_DELTA;
        pdfViewer.setDocument(pdfDocument)
        //pdfCursorTools.switchTool(1);
        templatemod.templateInit();

        if (importData === null || importData === undefined) {
            return;
        }
        checkPageViewsReady(pdfViewer.pageViewsReady, importData);
    })

    __templateOwnerNode.querySelector("#" + "Zoom-Out-Button").addEventListener("click", documentZoomOut);
    __templateOwnerNode.querySelector("#" + "Zoom-In-Button").addEventListener("click", documentZoomIn);
    __templateOwnerNode.querySelector(" .Button-Icon-Component").addEventListener("click", hideShowSidePanel);

    __templateOwnerNode.querySelectorAll(" .Editor-Component_Box > div > ul > li").forEach((el) => {
        if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_3__.Utils.isEmptyObject(el.onclick)) {
            return;
        }
        el.addEventListener("click", fieldSelectTool, true);
    });

    __templateOwnerNode.querySelector(" .Editor-Toolbar-Group.Left > button.Undo-Button").addEventListener("click", undoAction);
    
    __templateOwnerNode.querySelector(" .Editor-Toolbar-Group.Left > button.Redo-Button").addEventListener("click", redoAction);

    __templateOwnerNode.querySelector(" .Editor-Toolbar-Group.Right  button.Align-Left-Button").addEventListener("click", sortFieldAligLeft);
    __templateOwnerNode.querySelector(" .Editor-Toolbar-Group.Right  button.Align-Center-Button").addEventListener("click", sortFieldAligHCenter);
    __templateOwnerNode.querySelector(" .Editor-Toolbar-Group.Right  button.Align-Right-Button").addEventListener("click", sortFieldAligRight);
    __templateOwnerNode.querySelector(" .Editor-Toolbar-Group.Right  button.Align-Top-Button").addEventListener("click", sortFieldAligTop);
    __templateOwnerNode.querySelector(" .Editor-Toolbar-Group.Right  button.Align-Middle-Button").addEventListener("click", sortFieldAligVCenter);
    __templateOwnerNode.querySelector(" .Editor-Toolbar-Group.Right  button.Align-Bottom-Button").addEventListener("click", sortFieldAligBottom);

    __templateOwnerNode.querySelector("#scaleSelectContainer").addEventListener("click", showScaleSelector);
    window.addEventListener('resize', function(event) {
        changeLayerSize(event);
    }, true);
}

/**
 * @description 초기 targetElement 하위에 editor html요소를 추가(append)한다.
 *
 * @param {Element} ownerNode  해당 프로젝트의 최상단 Element로 지정할 targetElement
 * @Date : 2024. 2. 13
 * @Method Name : appendEditorHTMLToTarget
 */
function appendEditorHTMLToTarget(targetElement) {
    targetElement.innerHTML += `
    <div id="udm_editor_outerContainer_div" class="min-w1200"
			style="display: flex; width: 100%; height: 100%; overflow: visible; flex-direction: column;">
			<div id="outerContainer" class="Outer-Container">
				<div id="MainContainer" class="Main-Container">
					<div class="Top-Toolbar">
						<div class="Editor-Toolbar-Group Left Button-List">
							<button class="Template-Button Transparent Toolbar-Border Upload-Button"><i
									class="Upload-Button"></i>파일 불러오기</button>
						</div>
						<div class="Editor-Toolbar-Group Center MAIN-TITLE">
							<span></span>
						</div>
						<div class="Editor-Toolbar-Group Right Button-List">
							<button class="Template-Button Transparent Toolbar-Border Preview-Button"><i
									class="Preview-Button"></i>양식 미리보기</button>
						</div>

					</div>
					<div class="Editor-Toolbar">
						<div class="Editor-Toolbar-Group Left Button-List">
							<button class="Template-Button Transparent Toolbar-Border Undo-Button"><i
									class="Undo-Button"></i>실행취소</button>
							<button class="Template-Button Transparent Toolbar-Border Redo-Button"><i
									class="Redo-Button"></i>다시실행</button>
						</div>
						<div class="Editor-Toolbar-Group Center MAIN-TITLE">
							<span></span>
						</div>
						<div class="Editor-Toolbar-Group Right Button-List">
							<ul>
								<li>
									<div>
										<button class="Template-Button Transparent Align-Left-Button"><i
												class=""></i></button>
									</div>
								</li>
								<li>
									<div>
										<button class="Template-Button Transparent Align-Center-Button"><i
												class=""></i></button>
									</div>

								</li>
								<li>
									<div><button class="Template-Button Transparent Align-Right-Button"><i
												class=""></i></button></div>
								</li>
								<li>
									<div>
										<div class="Toolbar-Button-Divider"></div>
									</div>
								</li>
								<li>
									<div><button class="Template-Button Transparent Align-Top-Button "><i
												class=""></i></button></div>
								</li>
								<li>
									<div><button class="Template-Button Transparent Align-Middle-Button "><i
												class=""></i></button></div>
								</li>
								<li>
									<div><button class="Template-Button Transparent Align-Bottom-Button"><i
												class=""></i></button></div>
								</li>
								<li>
									<span id="scaleSelectContainer" class="Toolbar-Label"><a>100%</a></span>
								</li>
								<li>
									<div><button class="Template-Button Transparent Zoom-Out-Button"
											id="Zoom-Out-Button"><i class=""></i></button></div>
								</li>
								<li>
									<div><button class="Template-Button Transparent Zoom-In-Button"
											id="Zoom-In-Button"><i class=""></i></button></div>
								</li>
							</ul>
						</div>
					</div>
					<div class="Editor-Component" id="Editor-Component">
						<div class="Editor-Component_Box">
							<div>
								<ul style="touch-action: none;">
									<li data-index=0><span data-i18n="Template.signFieldTool"
											class="tit sign-field-ico">서명</span>
									</li>
									<li data-index=1><span data-i18n="Template.textFieldTool"
											class="tit text-field-ico">텍스트</span>
									</li>
									<li data-index=2 class=""><span data-i18n="Template.multilineFieldTool"
											class="tit multiline-field-ico">멀티라인</span>
									</li>
									<li data-index=3 class=""><span data-i18n="Template.labelFieldTool"
											class="tit label-field-ico">레이블</span>
									</li>
									<li data-index=4 class=""><span data-i18n="Template.checkFieldTool"
											class="tit check-field-ico">체크</span>
									</li>
									<li data-index=5 class=""><span data-i18n="Template.radioFieldTool"
											class="tit radio-field-ico">라디오</span>
									</li>
									<li data-index=6 class=""><span data-i18n="Template.comboFieldTool"
											class="tit combo-field-ico">콤보</span>
									</li>
									<li data-index=7><span data-i18n="Template.dateFieldTool"
											class="tit date-field-ico">날짜</span>
									</li>
									<li data-index=8><span data-i18n="Template.numberFieldTool"
											class="tit number-field-ico">숫자</span>
									</li>
									<li data-index=9 class=""><span data-i18n="Template.imageFieldTool"
											class="tit image-field-ico">이미지</span>
									</li>
								</ul>
							</div>
						</div>
						<div class="Editor-User-Component_Box" id="Editor-User-Component_Box">

						</div>
					</div>

					<!-- 발송 관련 영역 -->
					<div class="Editor-Right-Component" id="Editor-Right-Component">
						<div class="Editor-Send-Component_Box">
							<div>
								<ul style="touch-action: none;">
									<p>
										<span class="tit tit-send sign-field-ico">양식 정보</span>
									</p>
									<li data-index=0>
										<span class="tit">문서제목 </span>
										<input type="text" name="udm_template_title" id="udm_template_title">
									</li>
									<li data-index=0>
										<span class="tit">알림내용 </span>
										<input type="text" name="udm_message" id="udm_message">
									</li>
									<li data-index=0>
										<span class="tit">만료일자 </span>
										<input type="text" name="udm_expired_date" id="udm_expired_date">
									</li>

									<p>
										<span class="tit tit-send sign-field-ico">보내는 분</span>
									</p>
									<li data-index=0>
										<span class="tit">이 름 </span>
										<input type="text" name="udm_sender_nm" id="udm_sender_nm">
									</li>
									<li data-index=0>
										<span class="tit">이메일</span>
										<input type="text" name="udm_sender_email" id="udm_sender_email">
									</li>

									<p>
										<span class="tit tit-send sign-field-ico">받는 분</span>
									</p>
									<li data-index=0>
										<span class="tit">이 름 </span>
										<input type="text" name="udm_reciever_nm" id="udm_reciever_nm">
									</li>
									<li data-index=0>
										<span class="tit">이 메 일</span>
										<input type="text" name="udm_reciever_email" id="udm_reciever_email">
									</li>
									<li data-index=0>
										<span class="tit">연 락 처</span>
										<input type="text" name="udm_reciever_phone" id="udm_reciever_phone">
									</li>
								</ul>
							</div>

						</div>
						<div class="Editor-User-Send-Component_Box" id="Editor-User-Send-Component_Box">
						</div>

						<div class="Button-List">
							<button type="button" class="Template-Button Template-Editort-Button01 Margin-Right-5"
								onclick="jsonSave(); console.log(templatemod.getJsonData());">편집 내용 저장</button>
							<button type="button" class="Template-Button Template-Editort-Button02" onclick="mailSend()"> 메일 발송
							</button>
						</div>

					</div>

					<div class="Editor-Component-Active-Button" id="Editor-Component-Active-Button">
						<div class="Button-Icon-Component">
							<span class="Arrow-Btn Reverse-Btn"></span>
						</div>
					</div>

					<div id="TemplateViewerContainer" class="Viewer-Container">
						<div id="TemplatePDFViewer" class="pdfViewer"></div>
						<!--     파일업로드       -->
						<div id="fileUpload" class="dragAndDropDiv">
							<div class="dragAndDropDiv_content">PDF 파일을 Drag & Drop <BR><BR>혹은<BR><BR>클릭하여 파일업로드 해주세요.</div>
						</div>
						<input type="file" name="fileUpload" id="fileUpload" style="display:none;" multiple/>
					</div>

					<div class="Scale-Seletor-Container Template-Hide" id="Scale-Seletor">
						<select>
							<option value="0.3">30%</option>
							<option value="0.5">50%</option>
							<option value="0.8">80%</option>
							<option value="1">100%</option>
							<option value="1.2">120%</option>
							<option value="1.5">150%</option>
							<option value="2">200%</option>
							<option value="3">300%</option>
							<option value="4">400%</option>
						</select>
					</div>
				</div>
			</div>
		</div>
    `;
}

/**
 * @description 생성된 editor HTML 요소를 삭제한다.
 *
 * @param {Element} targetElement 삭제할 HTML 요소의 상위 노드
 * @Date : 2024. 2. 23
 * @Method Name : removeEditorHTMLFromTarget
 */
function removeEditorHTMLFromTarget(targetElement) {
    const editorContainer = document.getElementById("udm_editor_outerContainer_div");
    if (editorContainer) {
        // editorContainer가 존재하면 삭제합니다.
        targetElement.removeChild(editorContainer);
    } else {
        //console.log("Editor HTML 요소가 존재하지 않습니다.");
    }
}


/**
 * @description Template Field정보를 반환한다.
 *
 * @return {Object} Template Field 정보
 * @Date : 2021. 5. 31
 * @Method Name : getJsonData
 */
function getJsonData() {
    return templatemod.exportFieldData();
}

/**
 * @description Template에서 사용했던 데이터들을 초기화한다.
 *
 * @Date : 2021. 5. 31
 * @Method Name : releaseTemplate
 */
function releaseTemplate() {

    let targetElBtn = __templateOwnerNode.querySelector("#Editor-Component-Active-Button");
    let targetElPanel = __templateOwnerNode.querySelector("#Editor-Component");
    if (targetElBtn.classList.contains("Left-Panel-Btn-Hide-Animation")) {
        targetElBtn.classList.toggle("Left-Panel-Btn-Hide-Animation");
    }
    if (targetElPanel.classList.contains("Left-Panel-Hide-Animation")) {
        targetElPanel.classList.toggle("Left-Panel-Hide-Animation");
    }
    if (targetElBtn.classList.contains("Left-Panel-Btn-Show-Animation")) {
        targetElBtn.classList.toggle("Left-Panel-Btn-Show-Animation");
    }
    if (targetElPanel.classList.contains("Left-Panel-Show-Animation")) {
        targetElPanel.classList.toggle("Left-Panel-Show-Animation");
    }

    let templateLayer = __templateOwnerNode.querySelector("#" + _Constants__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TEMPLATE_LAYER_NAME);
    if (templateLayer !== null) {
        _utils_utils_js__WEBPACK_IMPORTED_MODULE_3__.Utils.removeAllChildNode(templateLayer);
    }
    let asteriskLayer = __templateOwnerNode.querySelector("#" + _Constants__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TEMPLATE_LAYER_ASTERISK_NAME);
    if (asteriskLayer !== null) {
        _utils_utils_js__WEBPACK_IMPORTED_MODULE_3__.Utils.removeAllChildNode(asteriskLayer);
    }
}

/**
 * @description Field중에 반드시 설정해야될 속성이 설정 되어있는지 체크한다.
 * @Date : 2021. 5. 31
 * @Method Name : checkTemplateFieldData
 */
function checkTemplateFieldData() {
    return templatemod.checkTemplateFieldData();
}

/**
 * @description 현재 언어를 파라미터에 맞게 변환한다.
 *
 * @param {String} locale 바꿀 언어
 * @Date : 2021. 5. 31
 * @Method Name : changeTemplateLocale
 */
function changeTemplateLocale(locale) {
    _utils_utils_js__WEBPACK_IMPORTED_MODULE_3__.Utils.changeLocale(locale);
    templatemod.buildFieldformerList();
}


/**
 * @description  다국어 언어 파일의 위치를 지정한다.
 * @example
 * localhost:5500/js/pdf_form/i18n의 경우  "/js/pdf_form/i18n"
 * initDocument 이전에 호출이 되어야한다.
 * @param {String} filesLocation 언어파일의 위치(절대 경로)
 * @Date : 2021. 5. 31
 * @Method Name : changeTranslatorFileLocation
 */
function changeTranslatorFileLocation(lcation) {
    _utils_utils_js__WEBPACK_IMPORTED_MODULE_3__.Utils.translatorFileLocation(lcation);
}

/**
 * @description  다국어 언어를 추가한다.
 * @param {String} locale 언어 이름
 * @param {Object} langData i18n/ko.json과 같은 양식으로 된 JSON을 파싱한 데이터
 * @Date : 2021. 5. 31
 * @Method Name : addTranslator
 */
function addTranslator(locale, langData) {
    _utils_utils_js__WEBPACK_IMPORTED_MODULE_3__.Utils.addTranslator(locale, langData);
}

function copyField() {
    templatemod.copyObject();
}

function pasteField() {
    templatemod.pasteObject();
}

/**
 * @description Page의 높이를 계산한다.
 *
 * @param {Element} PDF.js에서 만든 Page Element : 계산할 Page Element
 * @return {Number} Page Height
 * @Date : 2021. 5. 31
 * @Method Name : calcPageHeight
 */
 function calcPageHeight(pageElement) {
    var style = pageElement.div.currentStyle || window.getComputedStyle(pageElement.div);
    const marginHeight = parseFloat(style.marginTop) + parseFloat(style.marginBottom);
    const paddingHeight = parseFloat(style.paddingTop) + parseFloat(style.paddingBottom);
    const borderHeight = parseFloat(style.borderTopWidth) + parseFloat(style.borderBottomWidth);
    return pageElement.height + marginHeight + paddingHeight + borderHeight;
}

/**
 * @description Pdf.js에서 pageViewsReady가 true될때 까지 체크해서 Template Field Data 추가한다.
 *
 * @param {Boolean} oldvalue pageViewsReady의 현재 데이터값
 * @param {Object} importData  추가할 Template Field Data
 * @Date : 2021. 5. 31
 * @Method Name : checkPageViewsReady
 */
function checkPageViewsReady(oldvalue, importData) {
    undefined === oldvalue && (oldvalue = pdfViewer.pageViewsReady);
    var clearcheck = setInterval(repeatcheck, 100);
    function repeatcheck() {
        return new Promise(function (resolve, reject) {
                if (pdfViewer.pageViewsReady) {
                    resolve("pageViewsReady");
                    clearInterval(clearcheck);
                }
            }).then(function (text) {
                console.log(text);
                templatemod.importFieldData(importData);
            });
    }
}

/**
 * @description PDF 페이지의 Layer사이즈가 변할 때의 처리를한다.
 *
 * @param {Event} evt event
 * @Date : 2021. 5. 31
 * @Method Name : changeLayerSize
 */
 function changeLayerSize(evt) {
    let height = 0;
    pdfViewer._pages.forEach(function (element) {
        height += calcPageHeight(element);
    });
    templatemod.templateResize(evt, height);//evt 내부적으로 사용 안 되고 있음. 형식상 넣은듯. 
}

/**
 * @description  문서의 배율을 축소한다.
 *
 * @Date : 2021. 5. 31
 * @Method Name : documentZoomOut
 */
function  documentZoomOut() {
    const currentValue = parseFloat(pdfViewer.currentScale);
    pdfViewer.currentScale = currentValue - 0.1;
    setScaleValueText(pdfViewer.currentScale);
}

/**
 * @description  문서의 배율을 확대한다.
 *
 * @Date : 2021. 5. 31
 * @Method Name : documentZoomIn
 */
function  documentZoomIn() {
    const currentValue = parseFloat(pdfViewer.currentScale);
    pdfViewer.currentScale = currentValue + 0.1;
    setScaleValueText(pdfViewer.currentScale);
}

/**
 * @description  문서의 배율을 설정한다.
 *
 * @param {String}  value문서의 배율
 * @Date : 2021. 5. 31
 * @Method Name : setScaleValueText
 */
 function setScaleValueText(value) {
    const currentValue = Math.floor(parseFloat(value) * 100);
     var element = __templateOwnerNode.querySelector(" #scaleSelectContainer > a");
    element.textContent = currentValue + "%";
}

/**
 * @description  사이드 패널이 보이고 있으면 숨기고 숨겨있으면 보이게한다.
 *
 * @param {Event} event event
 * @Date : 2021. 5. 31
 * @Method Name : hideShowSidePanel
 */
function hideShowSidePanel(event) {
    let targetElBtn = __templateOwnerNode.querySelector("#Editor-Component-Active-Button");
    let targetElPanel = __templateOwnerNode.querySelector("#Editor-Component");
	let targetElViewerContainer = __templateOwnerNode.querySelector("#TemplateViewerContainer");
	let targetElEditorToolbar = __templateOwnerNode.querySelector(".Editor-Toolbar");
    let arrowBtn = __templateOwnerNode.querySelector("#Editor-Component-Active-Button > .Button-Icon-Component .Arrow-Btn ");
    arrowBtn.classList.toggle("Reverse-Btn");
    if (!targetElBtn.classList.contains("Left-Panel-Btn-Hide-Animation")) {
		//닫을때
        targetElBtn.classList.toggle("Left-Panel-Btn-Hide-Animation");
        targetElPanel.classList.toggle("Left-Panel-Hide-Animation");
        targetElViewerContainer.classList.toggle("leftfull");
        targetElEditorToolbar.classList.toggle("leftfull");

    } else {
		//열때
        targetElBtn.classList.toggle("Left-Panel-Btn-Show-Animation");
        targetElPanel.classList.toggle("Left-Panel-Show-Animation");
        targetElViewerContainer.classList.toggle("leftfull");
        targetElEditorToolbar.classList.toggle("leftfull");

    }


	console.log("changeLayerSize");
    changeLayerSize(event);
}

/**
 * @description  사이드 패널이 보이고 있으면 숨기고 숨겨있으면 보이게한다.
 *
 * @param {Event} evt event
 * @Date : 2021. 5. 31
 * @Method Name : hideShowSidePanel
 */
function fieldSelectTool(evt) {
    evt.stopPropagation();
    const element = evt.target.closest("li");
    const selectValue = element.getAttribute("data-index");
    templatemod.clearSelectedTool();
    if (!element.classList.contains("selected")) {
        element.classList.add("selected");
    }
    templatemod.selectTool(parseInt(selectValue));
}

/**
 * @description  undo button handler
 *
 * @param {Event} evt  event
 * @Date : 2021. 5. 31
 * @Method Name : undoAction
 */
function undoAction(evt) {
    templatemod.undoAction();
}

/**
 * @description  redo button handler
 *
 * @param {Event} evt event
 * @Date : 2021. 5. 31
 * @Method Name : redoAction
 */
function redoAction(evt) {
    templatemod.redoAction();
}

/**
 * @description  Field들을 왼쪽라인에 맞춰서 정렬
 *
 * @param {Event} evt event
 * @Date : 2021. 5. 31
 * @Method Name : sortFieldAligLeft
 */
function sortFieldAligLeft(evt) {
    templatemod.sortFieldsAlign("left");
}

/**
 * @description  Field들을 오른쪽라인에 맞춰서 정렬
 *
 * @param {Event} evt event
 * @Date : 2021. 5. 31
 * @Method Name : sortFieldsAlign
 */
function sortFieldAligRight(evt) {
    templatemod.sortFieldsAlign("right");
}

/**
 * @description  Field들을 x좌표 기준의 센터라인에 맞춰서 정렬
 *
 * @param {Event} evt event
 * @Date : 2021. 5. 31
 * @Method Name : sortFieldAligHCenter
 */
function sortFieldAligHCenter(evt) {
    templatemod.sortFieldsAlign("hCenter");
}

/**
 * @description  Field들을 Top라인에 맞춰서 정렬
 *
 * @param {Event} evt event
 * @Date : 2021. 5. 31
 * @Method Name : sortFieldAligTop
 */
function sortFieldAligTop(evt) {
    templatemod.sortFieldsAlign("top");
}

/**
 * @description  Field들을 y좌표 기준의 센터라인에 맞춰서 정렬
 *
 * @param {Event} evt  event
 * @Date : 2021. 5. 31
 * @Method Name : sortFieldAligVCenter
 */
function sortFieldAligVCenter(evt) {
    templatemod.sortFieldsAlign("vCenter");
}

/**
 * @description  Field들을 Bottom라인에 맞춰서 정렬
 *
 * @param {Event} evt event
 * @Date : 2021. 5. 31
 * @Method Name : sortFieldAligBottom
 */
function sortFieldAligBottom(evt) {
    templatemod.sortFieldsAlign("bottom");
}

/**
 * @description  PDF문서의 배율 Select를 보여준다.
 *
 * @param {Event} evt event
 * @Date : 2021. 5. 31
 * @Method Name : showScaleSelector
 */
function showScaleSelector(evt) {

    const targetBbox = evt.target.getBoundingClientRect();
    let scaleContainer = __templateOwnerNode.querySelector(".Scale-Seletor-Container");
    console.log(targetBbox);
    scaleContainer.style.left = targetBbox.left + "px";
    scaleContainer.style.top = targetBbox.top + "px";
    scaleContainer.style.zIndex = "-1";
    
    if (scaleContainer.classList.contains("Template-Hide")) {
        scaleContainer.classList.toggle("Template-Hide");
    }
    let scaleSelect = scaleContainer.querySelector("select");
    if (!$(scaleSelect).hasClass("select2-hidden-accessible")) {
        // Select2 has been initialized
        $(scaleSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "80px"
        });
    }
    $(scaleSelect).val(pdfViewer.currentScale).trigger("change");
    $(scaleSelect).select2('open');
    $(scaleSelect).on('select2:select', function (e) {
        // Do something
        var data = e.params.data;
        pdfViewer.currentScale = data.id;
        setScaleValueText(data.id);
    });
}

function appendFontFamily(fontFamilyArr) {
    templatemod.appendFontFamily(fontFamilyArr);
}

function appendSignTabShowOpt(signTabShowDefOptVal) {
  templatemod.appendSignTabShowOpt(signTabShowDefOptVal);
}
})();

/******/ 	return __webpack_exports__;
/******/ })()
;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDcmJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDMEM7QUFDRTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsUUFBUSxNQUFNO0FBQzVCLGNBQWMsUUFBUSxLQUFLO0FBQzNCLGNBQWMsUUFBUSxLQUFLO0FBQzNCLGNBQWMsUUFBUSxTQUFTO0FBQy9CLGNBQWMsUUFBUSxVQUFVO0FBQ2hDLGNBQWMsUUFBUSxVQUFVO0FBQ2hDLGNBQWMsUUFBUSxRQUFRO0FBQzlCLGNBQWMsUUFBUSxTQUFTO0FBQy9CLGNBQWMsUUFBUSxRQUFRO0FBQzlCLGNBQWMsUUFBUSxTQUFTO0FBQy9CLGNBQWMsUUFBUSxRQUFRO0FBQzlCLGNBQWMsUUFBUSxZQUFZO0FBQ2xDLGNBQWMsUUFBUSxZQUFZO0FBQ2xDLGNBQWMsUUFBUSxjQUFjO0FBQ3BDLGNBQWMsUUFBUSxhQUFhO0FBQ25DLGNBQWMsUUFBUSxhQUFhO0FBQ25DLGNBQWMsUUFBUSxRQUFRO0FBQzlCLGNBQWMsU0FBUyxhQUFhO0FBQ3BDLGNBQWMsUUFBUSxTQUFTO0FBQy9CLGNBQWMsUUFBUSxXQUFXO0FBQ2pDLGNBQWMsUUFBUSxXQUFXO0FBQ2pDLGNBQWMsUUFBUSxZQUFZO0FBQ2xDO0FBQ0EsY0FBYyxVQUFVLFVBQVU7QUFDbEMsY0FBYyxVQUFVLFNBQVM7QUFDakMsY0FBYyxVQUFVLFdBQVc7QUFDbkMsY0FBYyxVQUFVLG9CQUFvQjtBQUM1QyxjQUFjLFVBQVUscUJBQXFCO0FBQzdDO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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LFVBQVUsU0FBUyxLQUE2QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxhQUFhO0FBQzVCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxR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Ozs7Ozs7Ozs7OztBQy9EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBQThELEtBQUs7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7OztBQy9JQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQzBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsUUFBUSxrQkFB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QUNBO0FBQ0E7QUFDQSxXQUFXLGtEQUFLO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QVcsb0RBQVM7QUFDcEI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCO0FBQ0EsY0FBYyxTQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxvREFBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGtEQUFLO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGtEQUFLO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDbHdHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxLQUE0RCxnQ0FBZ0MsQ0FBZ0s7QUFDaFEsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFLGFBQWE7QUFDeEY7QUFDQTtBQUNBLDhDQUE4QztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RUFBeUUsZ0JBQWdCO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRDtBQUNuRDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGNBQWM7QUFDZCwwQ0FBMEMsZ0JBQWdCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQSw2REFBNkQsUUFBUTtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxVQUFVLGFBQWE7QUFDdkI7QUFDQSwyQkFBMkI7QUFDM0IsbUZBQW1GO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwRUFBMEU7QUFDMUU7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFVBQVU7QUFDekIsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG9EQUFTO0FBQ3JDO0FBQ0E7QUFDQSw4QkFBOEIsb0RBQVM7QUFDdkM7QUFDQSw4QkFBOEIsb0RBQVM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFVBQVU7QUFDekIsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG9EQUFTO0FBQ3JDO0FBQ0E7QUFDQSw4QkFBOEIsb0RBQVM7QUFDdkM7QUFDQSw4QkFBOEIsb0RBQVM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxzQkFBc0IscURBQVc7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGtEQUFLO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQjtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSx5QkFBeUIsYUFBYSxjQUFjLG1CQUFtQix1QkFBdUI7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHVDQUF1QztBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRUFBK0U7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksUUFBUTtBQUNwQjtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsaURBQVM7QUFDekU7QUFDQSxRQUFRLGtEQUFLO0FBQ2I7QUFDQSxnRUFBZ0UsaURBQVM7QUFDekU7QUFDQSxRQUFRLGtEQUFLO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsSUFBSSxrREFBSztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQjtBQUNBO0FBQ0E7QUFDTztBQUNQLElBQUksa0RBQUs7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBO0FBQ087QUFDUCxJQUFJLGtEQUFLO0FBQ1Q7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEIsWUFBWSxRQUFRO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEIsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGVtcGxhdGUtZGVzaWduZXIvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL3RlbXBsYXRlLWRlc2lnbmVyLy4vanMvcGRmX2Zvcm0vc3JjL0NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly90ZW1wbGF0ZS1kZXNpZ25lci8uL2pzL3BkZl9mb3JtL3NyYy9GaWVsZHMvQmFzZUZpZWxkLmpzIiwid2VicGFjazovL3RlbXBsYXRlLWRlc2lnbmVyLy4vanMvcGRmX2Zvcm0vc3JjL0ZpZWxkcy9DaGVja2JveEZpZWxkLmpzIiwid2VicGFjazovL3RlbXBsYXRlLWRlc2lnbmVyLy4vanMvcGRmX2Zvcm0vc3JjL0ZpZWxkcy9Db21ib2JveEZpZWxkLmpzIiwid2VicGFjazovL3RlbXBsYXRlLWRlc2lnbmVyLy4vanMvcGRmX2Zvcm0vc3JjL0ZpZWxkcy9EYXRlRmllbGQuanMiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUtZGVzaWduZXIvLi9qcy9wZGZfZm9ybS9zcmMvRmllbGRzL0ltYWdlRmllbGQuanMiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUtZGVzaWduZXIvLi9qcy9wZGZfZm9ybS9zcmMvRmllbGRzL0xhYmVsRmllbGQuanMiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUtZGVzaWduZXIvLi9qcy9wZGZfZm9ybS9zcmMvRmllbGRzL011bHRpTGluZVRleHRGaWVsZC5qcyIsIndlYnBhY2s6Ly90ZW1wbGF0ZS1kZXNpZ25lci8uL2pzL3BkZl9mb3JtL3NyYy9GaWVsZHMvTnVtYmVyRmllbGQuanMiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUtZGVzaWduZXIvLi9qcy9wZGZfZm9ybS9zcmMvRmllbGRzL1JhZGlvRmllbGQuanMiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUtZGVzaWduZXIvLi9qcy9wZGZfZm9ybS9zcmMvRmllbGRzL1NpZ25GaWVsZC5qcyIsIndlYnBhY2s6Ly90ZW1wbGF0ZS1kZXNpZ25lci8uL2pzL3BkZl9mb3JtL3NyYy9GaWVsZHMvVGV4dEJhc2VGaWVsZC5qcyIsIndlYnBhY2s6Ly90ZW1wbGF0ZS1kZXNpZ25lci8uL2pzL3BkZl9mb3JtL3NyYy9GaWVsZHMvVGV4dEZpZWxkLmpzIiwid2VicGFjazovL3RlbXBsYXRlLWRlc2lnbmVyLy4vanMvcGRmX2Zvcm0vc3JjL1RyYW5zbGF0b3IvdHJhbnNsYXRvci5qcyIsIndlYnBhY2s6Ly90ZW1wbGF0ZS1kZXNpZ25lci8uL2pzL3BkZl9mb3JtL3NyYy9UcmFuc2xhdG9yL3V0aWxzLmpzIiwid2VicGFjazovL3RlbXBsYXRlLWRlc2lnbmVyLy4vanMvcGRmX2Zvcm0vc3JjL3BkZi5jdXJzb3IudG9vbC5qcyIsIndlYnBhY2s6Ly90ZW1wbGF0ZS1kZXNpZ25lci8uL2pzL3BkZl9mb3JtL3NyYy90ZW1wbGF0ZS90ZW1wbGF0ZURhdGEuanMiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUtZGVzaWduZXIvLi9qcy9wZGZfZm9ybS9zcmMvdGVtcGxhdGUvdGVtcGxhdGVEYXRhT3duZXIuanMiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUtZGVzaWduZXIvLi9qcy9wZGZfZm9ybS9zcmMvdGVtcGxhdGUvdGVtcGxhdGVEYXRhUGFnZS5qcyIsIndlYnBhY2s6Ly90ZW1wbGF0ZS1kZXNpZ25lci8uL2pzL3BkZl9mb3JtL3NyYy90ZW1wbGF0ZS90ZW1wbGF0ZVVzZXJGaWVsZEluZm8uanMiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUtZGVzaWduZXIvLi9qcy9wZGZfZm9ybS9zcmMvdGVtcGxhdGUvdGVtcGxhdGVtb2QuanMiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUtZGVzaWduZXIvLi9qcy9wZGZfZm9ybS9zcmMvdXRpbHMvY29sb3ItcGlja2VyLmpzIiwid2VicGFjazovL3RlbXBsYXRlLWRlc2lnbmVyLy4vanMvcGRmX2Zvcm0vc3JjL3V0aWxzL3V0aWxzLmpzIiwid2VicGFjazovL3RlbXBsYXRlLWRlc2lnbmVyLy4vbm9kZV9tb2R1bGVzL2FuaW1lanMvbGliL2FuaW1lLmVzLmpzIiwid2VicGFjazovL3RlbXBsYXRlLWRlc2lnbmVyL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RlbXBsYXRlLWRlc2lnbmVyL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL3RlbXBsYXRlLWRlc2lnbmVyL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly90ZW1wbGF0ZS1kZXNpZ25lci93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL3RlbXBsYXRlLWRlc2lnbmVyL3dlYnBhY2svcnVudGltZS9oYXJtb255IG1vZHVsZSBkZWNvcmF0b3IiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUtZGVzaWduZXIvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90ZW1wbGF0ZS1kZXNpZ25lci93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3RlbXBsYXRlLWRlc2lnbmVyLy4vanMvcGRmX2Zvcm0vc3JjL3RlbXBsYXRlL3RlbXBsYXRlTWFpbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcInRlbXBsYXRlbW9kXCIsIFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcInRlbXBsYXRlbW9kXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcInRlbXBsYXRlbW9kXCJdID0gZmFjdG9yeSgpO1xufSkodGhpcywgKCkgPT4ge1xucmV0dXJuICIsIlxyXG4vKipcclxuICogQG1vZHVsZSBUZW1wbGF0ZS9DT05TVEFOVFNcclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiDtlITroZzsoJ3tirjsl5DshJwg7IKs7Jqp7ZWY64qUIOyDgeyImCDrqqjsnYxcclxuICpcclxuICogQHByb3BlcnR5IHtTdHJpbmd9IEFTVEVSSVNLX0lDT05fQ0xBU1Mge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0FTVEVSSVNLX0lDT05fQ0xBU1N9XHJcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBBU1RSRUlTS19ESVZfSEVJR0hUIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNBU1RSRUlTS19ESVZfSEVJR0hUfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gQ1JFQVRFX0ZJRUxEX0FDVElPTiAge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0NSRUFURV9GSUVMRF9BQ1RJT04gfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gRElWSURFUl9DTEFTUyAge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0RJVklERVJfQ0xBU1MgfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gRFJBR19CT1hfTkFNRSAge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0RSQUdfQk9YX05BTUUgfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gRURJVE9SX0FUVFJfQ0xBU1MgIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNFRElUT1JfQVRUUl9DTEFTUyB9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBFRElUT1JfQVRUUl9DT05URU5UU19ST1dfQ0xBU1Mge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0VESVRPUl9BVFRSX0NPTlRFTlRTX1JPV19DTEFTU31cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IEVESVRPUl9BVFRSX0RBVEVfSU5QVVRfQ0xBU1Mge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0VESVRPUl9BVFRSX0RBVEVfSU5QVVRfQ0xBU1N9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBFRElUT1JfQVRUUl9JTlBVVF9DTEFTUyAge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0VESVRPUl9BVFRSX0lOUFVUX0NMQVNTIH1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IEVESVRPUl9BVFRSX0lOUFVUX1dSQVBfQ0xBU1MgIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNFRElUT1JfQVRUUl9JTlBVVF9XUkFQX0NMQVNTIH1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IEVESVRPUl9BVFRSX0tJTkRfQ0xBU1Mge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0VESVRPUl9BVFRSX0tJTkRfQ0xBU1N9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBFRElUT1JfQVRUUl9QQU5FTF9DTEFTUyAge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0VESVRPUl9BVFRSX1BBTkVMX0NMQVNTIH1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IEVESVRPUl9BVFRSX1BBTkVMX0lEICB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjRURJVE9SX0FUVFJfUEFORUxfSUQgfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gRURJVE9SX0FUVFJfUk9XX1dSQVBfQ0xBU1MgIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNFRElUT1JfQVRUUl9ST1dfV1JBUF9DTEFTUyB9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBFRElUT1JfQVRUUl9TRUxFQ1RfQ0xBU1Mge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0VESVRPUl9BVFRSX1NFTEVDVF9DTEFTU31cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IEVESVRPUl9BVFRSX1RFWFRBUkVBX0NMQVNTICB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjRURJVE9SX0FUVFJfVEVYVEFSRUFfQ0xBU1MgfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gRURJVE9SX0NPTVBPTkVOVF9DTEFTUyAge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0VESVRPUl9DT01QT05FTlRfQ0xBU1MgfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gRklFTERfQVRUUl9DSEFOR0VfQUNUSU9OICB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjRklFTERfQVRUUl9DSEFOR0VfQUNUSU9OIH1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IEZJRUxEX0RFTEVURV9CVVRUT05fQ0xBU1MgIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNGSUVMRF9ERUxFVEVfQlVUVE9OX0NMQVNTIH1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IEdST1VQX0FUVFJfQ0hBTkdFX0FDVElPTiB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjR1JPVVBfQVRUUl9DSEFOR0VfQUNUSU9OfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gR1JPVVBfQVRUUl9PV05FUl9DSEFOR0VfQUNUSU9OIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNHUk9VUF9BVFRSX09XTkVSX0NIQU5HRV9BQ1RJT059XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBHUk9VUF9SRU1PVkVfQUNUSU9OIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNHUk9VUF9SRU1PVkVfQUNUSU9OfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gSElERV9DTEFTUyB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjSElERV9DTEFTU31cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IE1BSU5fR1JPVVBfTkFNRSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjTUFJTl9HUk9VUF9OQU1FfVxyXG4gKiBAcHJvcGVydHkge051bWJlcn0gTUlOSU1VTV9EUkFHX1NJWkUgIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNNSU5JTVVNX0RSQUdfU0laRSB9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBQUkVWSUVXX1JFQURFUl9QREZfVklFV0VSIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNQUkVWSUVXX1JFQURFUl9QREZfVklFV0VSfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gUFJFVklFV19SRUFERVJfUERGX1ZJRVdFUl9DT05UQUlORVIgIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNQUkVWSUVXX1JFQURFUl9QREZfVklFV0VSX0NPTlRBSU5FUiB9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBSRUFERVJfUEFHRV9GSUVMRF9MQVlFUl9DTEFTUyAge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI1JFQURFUl9QQUdFX0ZJRUxEX0xBWUVSX0NMQVNTIH1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IFJFQURFUl9QREZfVklFV0VSICB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjUkVBREVSX1BERl9WSUVXRVIgfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gUkVBREVSX1BERl9WSUVXRVJfQ09OVEFJTkVSICB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjUkVBREVSX1BERl9WSUVXRVJfQ09OVEFJTkVSIH1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IFJFTU9WRV9GSUVMRF9BQ1RJT04ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI1JFTU9WRV9GSUVMRF9BQ1RJT059XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBTSE9XX0NMQVNTICB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjU0hPV19DTEFTUyB9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBTV0lUQ0hfTEFCRUxfQ0xBU1Mge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI1NXSVRDSF9MQUJFTF9DTEFTU31cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IFNXSVRDSF9MQUJFTF9TTElERVJfQ0xBU1MgIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNTV0lUQ0hfTEFCRUxfU0xJREVSX0NMQVNTIH1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IFNXSVRDSF9MQUJFTF9TTElERVJfUk9VTkRfQ0xBU1MgIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNTV0lUQ0hfTEFCRUxfU0xJREVSX1JPVU5EX0NMQVNTIH1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IFRFTVBMQVRFX0xBWUVSX0FTVEVSSVNLX05BTUUgIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNURU1QTEFURV9MQVlFUl9BU1RFUklTS19OQU1FIH1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IFRFTVBMQVRFX0xBWUVSX05BTUUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI1RFTVBMQVRFX0xBWUVSX05BTUV9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBURU1QTEFURV9MQVlFUl9SRUNUX05BTUUgIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNURU1QTEFURV9MQVlFUl9SRUNUX05BTUUgfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gVEVNUExBVEVfUERGX1ZJRVdFUiAge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI1RFTVBMQVRFX1BERl9WSUVXRVIgfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gVEVNUExBVEVfUERGX1ZJRVdFUl9DT05UQUlORVIgIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNURU1QTEFURV9QREZfVklFV0VSX0NPTlRBSU5FUiB9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBUSVRMRV9DTEFTUyAge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI1RJVExFX0NMQVNTIH1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IFRJVExFX1dSQVBfQ0xBU1MgIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNUSVRMRV9XUkFQX0NMQVNTIH1cclxuICogXHJcbiAqIEBjbGFzc1xyXG4gKiBARmlsZU5hbWUgQ09OU1RBTlRTLmpzXHJcbiAqIEBzaW5jZSAyMDIxLjA1LjMxXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ09OU1RBTlRTIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNNQUlOX0dST1VQX05BTUVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBDYW52YXPsnZgg66mU7J24IOuFuOuTnFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgTUFJTl9HUk9VUF9OQU1FID0gXCJNYWluQ29udGFpbmVyXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjVEVNUExBVEVfUERGX1ZJRVdFUl9DT05UQUlORVJcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBUZW1wbGF0ZeuqqOuTnOyXkOyEnOydmCBQREYgVmlld2VyIENvbnRhaW5lclxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgVEVNUExBVEVfUERGX1ZJRVdFUl9DT05UQUlORVIgPSBcIlRlbXBsYXRlVmlld2VyQ29udGFpbmVyXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjVEVNUExBVEVfUERGX1ZJRVdFUlxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRl66qo65Oc7JeQ7ISc7J2YIFBERiBWaWV3ZXJcclxuICAgICAqL1xyXG4gICAgc3RhdGljIFRFTVBMQVRFX1BERl9WSUVXRVIgPSBcIlRlbXBsYXRlUERGVmlld2VyXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjUkVBREVSX1BERl9WSUVXRVJfQ09OVEFJTkVSXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ISc66qF66qo65Oc7JeQ7ISc7J2YIFBERiBWaWV3ZXIgQ29udGFpbmVyXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBSRUFERVJfUERGX1ZJRVdFUl9DT05UQUlORVIgPSBcIlJlYWRlclZpZXdlckNvbnRhaW5lclwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI1JFQURFUl9QREZfVklFV0VSXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ISc66qF66qo65Oc7JeQ7ISc7J2YIFBERiBWaWV3ZXJcclxuICAgICAqL1xyXG4gICAgc3RhdGljIFJFQURFUl9QREZfVklFV0VSID0gXCJSZWFkZXJQREZWaWV3ZXJcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNQUkVWSUVXX1JFQURFUl9QREZfVklFV0VSX0NPTlRBSU5FUlxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIOuvuOumrOuztOq4sCDrqqjrk5zsl5DshJzsnZggUERGIFZpZXdlciBDb250YWluZXJcclxuICAgICAqL1xyXG4gICAgc3RhdGljIFBSRVZJRVdfUkVBREVSX1BERl9WSUVXRVJfQ09OVEFJTkVSID0gXCJQcmV2aWV3UmVhZGVyVmlld2VyQ29udGFpbmVyXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjUFJFVklFV19SRUFERVJfUERGX1ZJRVdFUlxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIOuvuOumrOuztOq4sCDrqqjrk5zsl5DshJzsnZggUERGIFZpZXdlclxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgUFJFVklFV19SRUFERVJfUERGX1ZJRVdFUiA9IFwiUHJldmlld1JlYWRlclBERlZpZXdlclwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI1RFTVBMQVRFX0xBWUVSX05BTUVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBUZW1wbGF0ZSDroIjsnbTslrQg7J2066aEXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBURU1QTEFURV9MQVlFUl9OQU1FID0gXCJUZW1wbGF0ZUxheWVyXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjVEVNUExBVEVfTEFZRVJfQVNURVJJU0tfTkFNRVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRl7JeQ7IScIO2VhOyImCDsl6zrtoAg66eI7YGs6rCAIOyeiOuKlCDroIjsnbTslrQg7J2066aEXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBURU1QTEFURV9MQVlFUl9BU1RFUklTS19OQU1FID0gXCJUZW1wbGF0ZUFzdGVyaXNrTGF5ZXJcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNURU1QTEFURV9MQVlFUl9SRUNUX05BTUVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBUZW1wbGF0ZeyXkOyEnCDtlYTrk5zrpbwg66eM65Ok6riwIOychO2VtCDsg53shLHtlZjripQg7J6E7IucIGRpdiDsnbTrpoRcclxuICAgICAqL1xyXG4gICAgc3RhdGljIFRFTVBMQVRFX0xBWUVSX1JFQ1RfTkFNRSA9IFwiVGVtcGxhdGVSZWN0XCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjRFJBR19CT1hfTkFNRVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRl7JeQ7IScIOuTnOuemOq3uCDtlojsnYTrlYwg7ZWE65Oc65Ok7J20IOyeiOydhCDqsr3smrAg66eM65Oc64qUIFNWRyDqt7jro7kg64W465OcIOydtOumhFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgRFJBR19CT1hfTkFNRSA9IFwiRHJhZ0JveEdyb3VwXCI7XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI1NIT1dfQ0xBU1NcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDrhbjrk5zrpbwg67O07J2064+E66GdIO2VmOuKlCBDU1Mg7YG0656Y7IqkIOydtOumhFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgU0hPV19DTEFTUyA9IFwiVGVtcGxhdGUtU2hvd1wiXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjSElERV9DTEFTU1xyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIOuFuOuTnOulvCDslYjrs7TsnbTrj4TroZ0g7ZWY64qUIENTUyDtgbTrnpjsiqQg7J2066aEXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBISURFX0NMQVNTID0gXCJUZW1wbGF0ZS1IaWRlXCJcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNFRElUT1JfQ09NUE9ORU5UX0NMQVNTXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgVGVtcGxhdGXrqqjrk5zsl5DshJwg7IKs7J2065OcIO2DreydmCDtgbTrnbzsiqQg7J2066aELlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgRURJVE9SX0NPTVBPTkVOVF9DTEFTUyA9IFwiRWRpdG9yLUNvbXBvbmVudF9Cb3hcIjtcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjRURJVE9SX0FUVFJfQ0xBU1NcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBUZW1wbGF0ZeuqqOuTnOyXkOyEnCDtlYTrk5zsnZgg7IaN7ISxIOuFuOuTnCDtgbTrnpjsiqQg7J2066aELlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgRURJVE9SX0FUVFJfQ0xBU1MgPSBcIkVkaXRvci1BdHRyaWJ1dGVcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNGSUVMRF9ERUxFVEVfQlVUVE9OX0NMQVNTXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgVGVtcGxhdGXrqqjrk5zsl5DshJwg7IKt7KCc67KE7Yq8IOuFuOuTnCDtgbTrnpjsiqQg7J2066aELlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgRklFTERfREVMRVRFX0JVVFRPTl9DTEFTUyA9IFwiRmllbGQtRGVsZXRlLUJ1dHRvblwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI01FTU9fUFJPUEVSVFlfQlVUVE9OX0NMQVNTXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgUmVhZGVy66qo65Oc7JeQ7IScIOuplOuqqCDsho3shLEg67KE7Yq8IOuFuOuTnCDtgbTrnpjsiqQg7J2066aELlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgTUVNT19QUk9QRVJUWV9CVVRUT05fQ0xBU1MgPSBcIk1FTU8tUHJvcGVydHktQnV0dG9uXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjRURJVE9SX0FUVFJfS0lORF9DTEFTU1xyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRl66qo65Oc7JeQ7IScIO2VhOuTnOydmCDsho3shLEg7KKF66WYIOuFuOuTnCDtgbTrnpjsiqQg7J2066aELlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgRURJVE9SX0FUVFJfS0lORF9DTEFTUyA9IFwiQXR0cmlidXRlLWtpbmRcIjtcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjRURJVE9SX0FUVFJfUEFORUxfQ0xBU1NcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBUZW1wbGF0ZeuqqOuTnOyXkOyEnCDtlYTrk5zsnZgg7IaN7ISxIO2MkOuErCDrhbjrk5wg7YG0656Y7IqkIOydtOumhC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIEVESVRPUl9BVFRSX1BBTkVMX0NMQVNTID0gXCJBdHRyaWJ1dGUtQ29udGVudHNcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNFRElUT1JfQVRUUl9QQU5FTF9JRFxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRl66qo65Oc7JeQ7IScIO2VhOuTnOydmCDsho3shLEg7YyQ64SsIOuFuOuTnCBJRC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIEVESVRPUl9BVFRSX1BBTkVMX0lEID0gXCJBdHRyaWJ1dGUtUGFuZWxcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNFRElUT1JfQVRUUl9DT05URU5UU19ST1dfQ0xBU1NcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBUZW1wbGF0ZeuqqOuTnOyXkOyEnCDtlYTrk5zsnZgg7IaN7ISxIOy7qO2FkOy4oCDsl7TsnZgg7YG0656Y7IqkIOydtOumhFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgRURJVE9SX0FUVFJfQ09OVEVOVFNfUk9XX0NMQVNTID0gXCJBdHRyaWJ1dGUtQ29udGVudHMtUm93XCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjRURJVE9SX0FUVFJfUk9XX1dSQVBfQ0xBU1NcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBUZW1wbGF0ZeuqqOuTnOyXkOyEnCDtlYTrk5zsnZgg7IaN7ISxIOy7qO2FkOy4oCDsl7TsnYQg6rCQ7Iu46rOgIOyeiOuKlCDrhbjrk5zsnZgg7YG0656Y7IqkIOydtOumhFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgRURJVE9SX0FUVFJfUk9XX1dSQVBfQ0xBU1MgPSBcIkF0dHJpYnV0ZS1Db250ZW50cy1Sb3ctV3JhcFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI1RJVExFX1dSQVBfQ0xBU1NcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBUZW1wbGF0ZeuqqOuTnOyXkOyEnCDtlYTrk5zsnZgg7IaN7ISxIOy7qO2FkOy4oCDsl7TsnZgg7YOA7J207YuA7J2EIOqwkOyLuOqzoCDsnojripQg64W465Oc7J2YIO2BtOuemOyKpCDsnbTrpoRcclxuICAgICAqL1xyXG4gICAgc3RhdGljIFRJVExFX1dSQVBfQ0xBU1MgPSBcIlRpdGxlLVdyYXBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNUSVRMRV9DTEFTU1xyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRl66qo65Oc7JeQ7IScIO2VhOuTnOydmCDsho3shLEg7Luo7YWQ7LigIOyXtOydmCDtg4DsnbTti4Ag64W465Oc7J2YIO2BtOuemOyKpCDsnbTrpoRcclxuICAgICAqL1xyXG4gICAgc3RhdGljIFRJVExFX0NMQVNTID0gXCJUaXRsZVwiO1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNFRElUT1JfQVRUUl9TRUxFQ1RfQ0xBU1NcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBUZW1wbGF0ZeuqqOuTnOyXkOyEnCDtlYTrk5zsnZgg7IaN7ISxIOydmCBTZWxlY3Qg64W465Oc7J2YIO2BtOuemOyKpCDsnbTrpoRcclxuICAgICAqL1xyXG4gICAgc3RhdGljIEVESVRPUl9BVFRSX1NFTEVDVF9DTEFTUyA9IFwiQXR0cmlidXRlLVNlbGVjdFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI1NXSVRDSF9MQUJFTF9DTEFTU1xyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRl66qo65Oc7JeQ7IScIO2VhOuTnOydmCDsho3shLEg7J2YIFN3aXRjaOuyhO2KvCAg64W465Oc7J2YIO2BtOuemOyKpCDsnbTrpoRcclxuICAgICAqL1xyXG4gICAgc3RhdGljIFNXSVRDSF9MQUJFTF9DTEFTUyA9IFwiQXR0cmlidXRlLVN3aXRjaC1MYWJlbFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI1NXSVRDSF9MQUJFTF9TTElERVJfQ0xBU1NcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBUZW1wbGF0ZeuqqOuTnOyXkOyEnCDtlYTrk5zsnZgg7IaN7ISxIOydmCBTd2l0Y2jrsoTtirzsnZgg7Iqs65287J20642UIOuFuOuTnOydmCDtgbTrnpjsiqQg7J2066aEXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBTV0lUQ0hfTEFCRUxfU0xJREVSX0NMQVNTID0gXCJBdHRyaWJ1dGUtU3dpdGNoLVNsaWRlclwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI1NXSVRDSF9MQUJFTF9TTElERVJfUk9VTkRfQ0xBU1NcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBUZW1wbGF0ZeuqqOuTnOyXkOyEnCDtlYTrk5zsnZgg7IaN7ISxIOydmCBTd2l0Y2jrsoTtirzsnZgg7Iqs65287J20642U7J2YIOuPhOq3uOuegCBEaXYg64W465Oc7J2YIO2BtOuemOyKpCDsnbTrpoRcclxuICAgICAqL1xyXG4gICAgc3RhdGljIFNXSVRDSF9MQUJFTF9TTElERVJfUk9VTkRfQ0xBU1MgPSBcIlJvdW5kXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjRElWSURFUl9DTEFTU1xyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIOq1rOu2hOyekCDrhbjrk5zsnZgg7YG0656Y7IqkIOydtOumhFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgRElWSURFUl9DTEFTUyA9IFwiRGl2aWRlclwiO1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNFRElUT1JfQVRUUl9JTlBVVF9DTEFTU1xyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRl66qo65Oc7JeQ7IScIO2VhOuTnOydmCDsho3shLEg7J2YIGlucHV0IOuFuOuTnOydmCDtgbTrnpjsiqQg7J2066aEXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBFRElUT1JfQVRUUl9JTlBVVF9DTEFTUyA9IFwiQXR0cmlidXRlLUlucHV0XCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjRURJVE9SX0FUVFJfVEVYVEFSRUFfQ0xBU1NcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBUZW1wbGF0ZeuqqOuTnOyXkOyEnCDtlYTrk5zsnZgg7IaN7ISxIOydmCBUZXh0YXJlYSDrhbjrk5zsnZgg7YG0656Y7IqkIOydtOumhFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgRURJVE9SX0FUVFJfVEVYVEFSRUFfQ0xBU1MgPSBcIkF0dHJpYnV0ZS1UZXh0YXJlYVwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0VESVRPUl9BVFRSX0RBVEVfSU5QVVRfQ0xBU1NcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBUZW1wbGF0ZeuqqOuTnOyXkOyEnCDtlYTrk5zsnZgg7IaN7ISxIOydmCBEYXRlIGlucHV0IOuFuOuTnOydmCDtgbTrnpjsiqQg7J2066aEXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBFRElUT1JfQVRUUl9EQVRFX0lOUFVUX0NMQVNTID0gXCJBdHRyaWJ1dGUtRGF0ZS1JbnB1dFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0VESVRPUl9BVFRSX0lOUFVUX1dSQVBfQ0xBU1NcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBUZW1wbGF0ZeuqqOuTnOyXkOyEnCDtlYTrk5zsnZgg7IaN7ISxIOydmCBpbnB1dCDrhbjrk5zrpbwg6rCQ7Iu46rOgIOyeiOuKlCDrhbjrk5zsnZgg7YG0656Y7IqkIOydtOumhFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgRURJVE9SX0FUVFJfSU5QVVRfV1JBUF9DTEFTUyA9IFwiQXR0cmlidXRlLUlucHV0LVdyYXBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNDUkVBVEVfRklFTERfQUNUSU9OXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgVGVtcGxhdGXrqqjrk5zsl5DshJwgVU5ETyBSRURP7J2YIO2VhOuTnCDsg53shLEgQWN0aW9u7J2YIOydtOumhFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgQ1JFQVRFX0ZJRUxEX0FDVElPTiA9IFwiQ3JlYXRlRmllbGRBY3Rpb25cIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNSRU1PVkVfRklFTERfQUNUSU9OXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgVGVtcGxhdGXrqqjrk5zsl5DshJwgVU5ETyBSRURP7J2YIO2VhOuTnCDsgq3soJwgQWN0aW9u7J2YIOydtOumhFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgUkVNT1ZFX0ZJRUxEX0FDVElPTiA9IFwiUmVtb3ZlRmllbGRBY3Rpb25cIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNGSUVMRF9BVFRSX0NIQU5HRV9BQ1RJT05cclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBUZW1wbGF0ZeuqqOuTnOyXkOyEnCBVTkRPIFJFRE/snZgg7ZWE65OcIOyGjeyEsSDrs4Dqsr0gQWN0aW9u7J2YIOydtOumhFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgRklFTERfQVRUUl9DSEFOR0VfQUNUSU9OID0gXCJGaWVsZEF0dHJDaGFuZ2VBY3Rpb25cIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNHUk9VUF9SRU1PVkVfQUNUSU9OXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgVGVtcGxhdGXrqqjrk5zsl5DshJwgVU5ETyBSRURP7J2YIO2VhOuTnCDsgq3soJwgQWN0aW9u7J2YIOydtOumhFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgR1JPVVBfUkVNT1ZFX0FDVElPTiA9IFwiR3JvdXBSZW1vdmVBY3Rpb25cIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNHUk9VUF9BVFRSX0NIQU5HRV9BQ1RJT05cclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBUZW1wbGF0ZeuqqOuTnOyXkOyEnCBVTkRPIFJFRE/snZgg7ZWE65Oc65Ok7J2YIOyGjeyEsSDrs4Dqsr0gQWN0aW9u7J2YIOydtOumhFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgR1JPVVBfQVRUUl9DSEFOR0VfQUNUSU9OID0gXCJHcm91cEF0dHJDaGFuZ2VBY3Rpb25cIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNHUk9VUF9BVFRSX09XTkVSX0NIQU5HRV9BQ1RJT05cclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBUZW1wbGF0ZeuqqOuTnOyXkOyEnCBVTkRPIFJFRE/snZgg7ZWE65Oc65Ok7J2YIOyEnOuqheyekCDrs4Dqsr0gQWN0aW9u7J2YIOydtOumhFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgR1JPVVBfQVRUUl9PV05FUl9DSEFOR0VfQUNUSU9OID0gXCJHcm91cEF0dHJPd25lckNoYW5nZUFjdGlvblwiO1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNSRUFERVJfUEFHRV9GSUVMRF9MQVlFUl9DTEFTU1xyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIOyEnOuqhSDrqqjrk5zsl5DshJwgRmllbGTrk6TsnbQg7Jis65286rCIIOugiOydtOyWtCDtgbTrnpjsiqQg7J2066aELlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgUkVBREVSX1BBR0VfRklFTERfTEFZRVJfQ0xBU1MgPSBcIlJlYWRlci1QYWdlLUZpZWxkLUxheWVyXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjUkVBREVSX1BBR0VfTUVNT19MQVlFUl9DTEFTU1xyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIOyEnOuqhSDrqqjrk5zsl5DshJwgTUVNT+uTpOydtCDsmKzrnbzqsIgg66CI7J207Ja0IO2BtOuemOyKpCDsnbTrpoQuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBSRUFERVJfUEFHRV9NRU1PX0xBWUVSX0NMQVNTID0gXCJSZWFkZXItUGFnZS1NZW1vLUxheWVyXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjQVNURVJJU0tfSUNPTl9DTEFTU1xyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRl66qo65Oc7JeQ7IScIO2VhOyImCDsl6zrtoAg7JWE7J207L2YIO2BtOuemOyKpCDsnbTrpoRcclxuICAgICAqL1xyXG4gICAgc3RhdGljIEFTVEVSSVNLX0lDT05fQ0xBU1MgPSBcIkFzdGVyaXNrLUljb25cIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtOdW1iZXJ9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNBU1RSRUlTS19ESVZfSEVJR0hUXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgVGVtcGxhdGXrqqjrk5zsl5DshJwg7ZWE7IiYIOyXrOu2gCDslYTsnbTsvZgg7IS466Gc6ri47J20XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBBU1RSRUlTS19ESVZfSEVJR0hUID0gMTI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7TnVtYmVyfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjTUlOSU1VTV9EUkFHX1NJWkVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBUZW1wbGF0ZeuqqOuTnOyXkOyEnCDrk5zrnpjqt7jrpbwg7ZaI64uk64qUIOy1nOyGjOydmCDsgqzsnbTspogg6riw7KSAXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBNSU5JTVVNX0RSQUdfU0laRSA9IDEwO1xyXG5cclxuICAgIHN0YXRpYyBSQURJT19UWVBFXzEgPSAnMSc7XHJcbiAgICBzdGF0aWMgUkFJT0RfVFlQRV8xX1BBVEggPSBgPHBhdGggZD1cIk0yNCwxMmMtNi42LDAtMTIsNS40LTEyLDEyczUuNCwxMiwxMiwxMnMxMi01LjQsMTItMTJTMzAuNixcclxuICAgICAgICAgICAgMTIsMjQsMTJ6TTI0LDBDMTAuOCwwLDAsMTAuOCwwLDI0czEwLjgsMjQsMjQsMjRzMjQtMTAuOCwyNC0yNFMzNy4yLDAsMjQsMHpNMjQsNDMuMkMxMy40LDQzLjIsNC44LDM0LjYsNC44LDI0UzEzLjQsXHJcbiAgICAgICAgICAgIDQuOCwyNCw0LjhTNDMuMiwxMy40LDQzLjIsMjRTMzQuNiw0My4yLDI0LDQzLjJ6XCIvPmA7XHJcbiAgICBzdGF0aWMgUkFESU9fVFlQRV8yID0gJzInO1xyXG4gICAgc3RhdGljIFJBSU9EX1RZUEVfMl9QQVRIID0gYDxwYXRoIGQ9XCJNMjQsMEMxMC44LDAsMCwxMC44LDAsMjRzMTAuOCwyNCwyNCwyNHMyNC0xMC44LDI0LTI0UzM3LjIsMCwyNCwwek0yNCw0My4yQzEzLjQsNDMuMiw0LjgsMzQuNiw0LjgsMjRTMTMuNCxcXFxyXG4gICAgICAgICAgICA0LjgsMjQsNC44UzQzLjIsMTMuNCw0My4yLDI0UzM0LjYsNDMuMiwyNCw0My4yelwiLz5gO1xyXG5cclxuICAgICAgICAgICAgXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNOT19FVkVOVF9MQVlFUlxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIOydtOuypO2KuOulvCDrsJvsp4Ag7JWK64qUIGNsYXNzLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgTk9fRVZFTlRfTEFZRVIgPSBcIk5vLUV2ZW50LUxheWVyXCI7XHJcblxyXG4gICAgc3RhdGljIFJFQURFUl9GSUVMRF9JTlBVVF9NT0RFICAgICAgPSAwO1xyXG4gICAgc3RhdGljIFJFQURFUl9GSUVMRF9NRU1PX01PREUgICAgICAgPSAxO1xyXG4gICAgc3RhdGljIFJFQURFUl9GSUVMRF9NRU1PX01BS0VfTU9ERSAgPSAyO1xyXG59XHJcblxyXG4iLCJcclxuLyoqXHJcbiAqIEBtb2R1bGUgVGVtcGxhdGUvRmllbGRcclxuICovXHJcblxyXG5pbXBvcnQge1V0aWxzfSBmcm9tICcuLy4uL3V0aWxzL3V0aWxzLmpzJztcclxuaW1wb3J0IHtDT05TVEFOVFN9IGZyb20gJy4vLi4vQ29uc3RhbnRzLmpzJztcclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24g7ZWE65Oc65Ok7J2YIOq4sOuzuOydtCDrkJjripQgQ2xhc3NcclxuICogXHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBtX2lkIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI21faWR9XHJcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBtX3gge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV94fVxyXG4gKiBAcHJvcGVydHkge051bWJlcn0gbV95IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI21feX1cclxuICogQHByb3BlcnR5IHtOdW1iZXJ9IG1fd2lkdGgge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV93aWR0aH1cclxuICogQHByb3BlcnR5IHtOdW1iZXJ9IG1faGVpZ2h0IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI21faGVpZ2h0fVxyXG4gKiBAcHJvcGVydHkge051bWJlcn0gbV9wYWdlTm8ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV9wYWdlTm99XHJcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBtX3BkZlgge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV9wZGZYfVxyXG4gKiBAcHJvcGVydHkge051bWJlcn0gbV9wZGZYMiB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX3BkZlgyfVxyXG4gKiBAcHJvcGVydHkge051bWJlcn0gbV9wZGZZIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI21fcGRmWX1cclxuICogQHByb3BlcnR5IHtOdW1iZXJ9IG1fcGRmWTIge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV9wZGZZMn1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IG1fdHlwZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX3R5cGV9XHJcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBtX2ZvbnRTaXplIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI21fZm9udFNpemV9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBtX2ZvbnROYW1lIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI21fZm9udE5hbWV9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBtX2ZvbnRXZWlnaHQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV9mb250V2VpZ2h0fVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gbV9mb250U3R5bGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV9mb250U3R5bGV9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBtX2ZvbnRDb2xvciB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX2ZvbnRDb2xvcn1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IG1fa2luZCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX2tpbmR9XHJcbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gbV9pc1JlbW92ZWQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV9pc1JlbW92ZWR9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBtX3ZhbHVlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI21fdmFsdWV9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBtX293bmVySWQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV9vd25lcklkfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gbV9maWVsZElkIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI21fZmllbGRJZH1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IG1fcmVxdWlyZWQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV9yZXF1aXJlZH1cclxuICogXHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGZyb21Kc29uIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI2Zyb21Kc29ufVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBnZXRCQm94IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI2dldEJCb3h9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGZpZWxkTmFtZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNmaWVsZE5hbWV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNob3dGaWVsZEF0dHJpYnV0ZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNzaG93RmllbGRBdHRyaWJ1dGV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNob3dGaWVsZHNBdHRyaWJ1dGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjc2hvd0ZpZWxkc0F0dHJpYnV0ZX1cclxuICogQEZpbGVOYW1lIEJhc2VGaWVsZC5qc1xyXG4gKiBAc2luY2UgMjAyMS4wNS4zMVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJhc2VGaWVsZCB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAqIEBwYXJhbSBpZCDtlYTrk5zsnZggSURcclxuICAgICAqIEBwYXJhbSBwYWdlTm8g7ZWE65Oc6rCAIOyGje2VnCDtjpjsnbTsp4Ag67KI7Zi4XHJcbiAgICAgKiBAcGFyYW0geCDtlYTrk5zsnZggc3Zn7IOB7J2YIHjsooztkZxcclxuICAgICAqIEBwYXJhbSB5IO2VhOuTnOydmCBzdmfsg4HsnZggeeyijO2RnFxyXG4gICAgICogQHBhcmFtIHdpZHRoIO2VhOuTnOydmCDqsIDroZzquLjsnbRcclxuICAgICAqIEBwYXJhbSBoZWlnaHQg7ZWE65Oc7J2YIOyEuOuhnOq4uOydtFxyXG4gICAgICogXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGlkLCBwYWdlTm8sIHgsIHksIHdpZHRoLCBoZWlnaHQpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV9pZFxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zsnZgg6rOg7JygIElEXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKiAvLyBnZXR0ZXIgaWQoKVxyXG4gICAgICAgICAqIC8vIHNldHRlciBpZCh2YWwpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tX2lkID0gaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX3hcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24g7ZWE65Oc7J2YIHN2Z+yDgeydmCB4IOyijO2RnFxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIHgoKVxyXG4gICAgICAgICAqIC8vIHNldHRlciB4KHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1feCA9IHg7XHJcblxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7TnVtYmVyfVxyXG4gICAgICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV95XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIO2VhOuTnOydmCBzdmfsg4HsnZggeSDsooztkZxcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciB5KClcclxuICAgICAgICAgKiAvLyBzZXR0ZXIgeSh2YWwpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tX3kgPSB5O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7TnVtYmVyfVxyXG4gICAgICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV93aWR0aFxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zsnZggc3Zn7IOB7J2YIOqwgOuhnCDquLjsnbRcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciB3aWR0aCgpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIHdpZHRoKHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1fd2lkdGggPSB3aWR0aDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge051bWJlcn1cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI21faGVpZ2h0XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIO2VhOuTnOydmCBzdmfsg4HsnZgg7IS466GcIOq4uOydtFxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIGhlaWdodCgpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIGhlaWdodCh2YWwpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tX2hlaWdodCA9IGhlaWdodDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge051bWJlcn1cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI21fcGFnZU5vXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIO2VhOuTnOydmCBQREbsl5DshJzsnZgg7Y6Y7J207KeAIOuyiO2YuFxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIHBhZ2VObygpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIHBhZ2VObyh2YWwpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tX3BhZ2VObyA9IHBhZ2VObztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge051bWJlcn1cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI21fcGRmWFxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zsnZggUERG7JeQ7ISc7J2YIFjsooztkZxcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciBwZGZYKClcclxuICAgICAgICAgKiAvLyBzZXR0ZXIgcGRmWCh2YWwpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tX3BkZlggPSAwO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7TnVtYmVyfVxyXG4gICAgICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV9wZGZZXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIO2VhOuTnOydmCBQREbsl5DshJzsnZggWeyijO2RnFxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIHBkZlkoKVxyXG4gICAgICAgICAqIC8vIHNldHRlciBwZGZZKHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1fcGRmWSA9IDA7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX3BkZlgyXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIO2VhOuTnOydmCBQREbsl5DshJzsnZggWDLsooztkZxcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciBwZGZYMigpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIHBkZlgyKHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1fcGRmWDIgPSAwO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7TnVtYmVyfVxyXG4gICAgICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV9wZGZZMlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zsnZggUERG7JeQ7ISc7J2YIFky7KKM7ZGcXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKiAvLyBnZXR0ZXIgcGRmWTIoKVxyXG4gICAgICAgICAqIC8vIHNldHRlciBwZGZZMih2YWwpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tX3BkZlkyID0gMDtcclxuXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX3R5cGVcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24g7ZWE65Oc7J2YIO2DgOyeheydtOumhFxyXG4gICAgICAgICAqIEByZWFkb25seVxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIHR5cGUoKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubV90eXBlID0gQmFzZUZpZWxkLmZpZWxkTmFtZSgpO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7TnVtYmVyfVxyXG4gICAgICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV9mb250U2l6ZVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zsl5DshJwg7IKs7Jqp65CY64qUIO2PsO2KuO2BrOq4sOqwklxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIGZvbnRTaXplKClcclxuICAgICAgICAgKiAvLyBzZXR0ZXIgZm9udFNpemUodmFsKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubV9mb250U2l6ZSA9IDE2O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV9mb250TmFtZVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zsl5DshJwg7IKs7Jqp65CY64qUIO2PsO2KuOydtOumhC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciBmb250TmFtZSgpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIGZvbnROYW1lKHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1fZm9udE5hbWUgPSAnTWFsZ3VuR290aGljJztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI21fZm9udFdlaWdodFxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zsl5DshJwg7IKs7Jqp65CY64qUIO2PsO2KuCDrkZDqu5hcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciBmb250V2VpZ2h0KClcclxuICAgICAgICAgKiAvLyBzZXR0ZXIgZm9udFdlaWdodCh2YWwpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tX2ZvbnRXZWlnaHQgPSBcIlwiO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV9mb250U3R5bGVcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24g7ZWE65Oc7JeQ7IScIOyCrOyaqeuQmOuKlCDtj7Dtirgg7Iqk7YOA7J28XHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKiAvLyBnZXR0ZXIgZm9udFN0eWxlKClcclxuICAgICAgICAgKiAvLyBzZXR0ZXIgZm9udFN0eWxlKHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1fZm9udFN0eWxlID0gXCJcIjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI21fZm9udENvbG9yXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIO2VhOuTnOyXkOyEnCDsgqzsmqnrkJjripQg7Y+w7Yq4IOyDieyDgVxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIGZvbnRDb2xvcigpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIGZvbnRDb2xvcih2YWwpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tX2ZvbnRDb2xvciA9IFwiIzAwMDAwMFwiXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX2tpbmRcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gIO2VhOuTnOyiheulmOydmCDtlZzquIDsnbTrpoRcclxuICAgICAgICAgKiBAcmVhZG9ubHlcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciBraW5kKClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1fa2luZCA9IFwiXCI7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtCb29sZWFufVxyXG4gICAgICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV9pc1JlbW92ZWRcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciBpc1JlbW92ZWQoKVxyXG4gICAgICAgICAqIC8vIHNldHRlciBpc1JlbW92ZWQodmFsKVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiAg7ZWE65Oc7IKt7KCc7Jes67aAXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tX2lzUmVtb3ZlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV92YWx1ZVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiAg7ZWE65OcIOqwklxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIHZhbHVlKClcclxuICAgICAgICAgKiAvLyBzZXR0ZXIgdmFsdWUodmFsKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubV92YWx1ZSA9IFwiXCI7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX293bmVySWRcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gIO2VhOuTnOqwgCDsho3tlZwg7ISc66qF7J6Q7J2YIElEXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKiAvLyBnZXR0ZXIgb3duZXJJZCgpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIG93bmVySWQodmFsKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubV9vd25lcklkID0gXCJcIlxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV9maWVsZElkXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uICDtlYTrk5zsnZgg67OE7LmtXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKiAvLyBnZXR0ZXIgZmllbGRJZCgpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIGZpZWxkSWQodmFsKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubV9maWVsZElkID0gaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX3JlcXVpcmVkXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uICDtlYTrk5zsnZgg7ZWE7IiY7Jes67aAXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKiAvLyBnZXR0ZXIgcmVxdWlyZWQoKVxyXG4gICAgICAgICAqIC8vIHNldHRlciByZXF1aXJlZCh2YWwpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tX3JlcXVpcmVkID0gXCJ0cnVlXCI7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIGZyb21Kc29uXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI2Zyb21Kc29uXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgSlNPTuuNsOydtO2EsOuhnCDroZzrk5ztlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHRhcmdldCDrs7XsgqztlaAg7ZWE65OcIOyYpOu4jOygne2KuFxyXG4gICAgICogQHBhcmFtIGpzb25EYXRhIO2VhOuTnOydmCBKU09O642w7J207YSwLlxyXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBKU09O642w7J207YSw66W8IOuhnOuTnO2VnCDtlYTrk5zrpbwg66as7YS07ZWc64ukLlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICovIFxyXG4gICAgc3RhdGljIGZyb21Kc29uKHRhcmdldCwganNvbkRhdGEpIHtcclxuICAgICAgICBsZXQgZmllbGQgPSBPYmplY3QuYXNzaWduKHRhcmdldCwganNvbkRhdGEpO1xyXG4gICAgICAgIHJldHVybiBmaWVsZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiBmaWVsZE5hbWVcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjZmllbGROYW1lXHJcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE65OcIO2DgOyeheydmCDsnbTrpoRcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBmaWVsZE5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiQmFzZUZpZWxkXCI7XHJcbiAgICB9XHJcblxyXG4gICAgYW5jZXN0b3JzKCkge1xyXG4gICAgICAgIHJldHVybiBbXCJCRlwiXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdHlwZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX3R5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1faWQ7XHJcbiAgICB9XHJcbiAgICBnZXQga2luZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX2tpbmQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGlkKF9faWQpIHtcclxuICAgICAgICB0aGlzLm1faWQgPSBfX2lkO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBmaWVsZElkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fZmllbGRJZDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgZmllbGRJZChfX2ZpZWxkSWQpIHtcclxuICAgICAgICB0aGlzLm1faWQgPSBfX2ZpZWxkSWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHBhZ2VObygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX3BhZ2VObztcclxuICAgIH1cclxuXHJcbiAgICBzZXQgcGFnZU5vKF9wYWdlTm8pIHtcclxuICAgICAgICB0aGlzLm1fcGFnZU5vID0gX3BhZ2VObztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgeCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX3g7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHgoX194KSB7XHJcbiAgICAgICAgdGhpcy5tX3ggPSBfX3g7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHkoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV95O1xyXG4gICAgfVxyXG5cclxuICAgIHNldCB5KF9feSkge1xyXG4gICAgICAgIHRoaXMubV95ID0gX195O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB3aWR0aCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX3dpZHRoO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCB3aWR0aChfX3dpZHRoKSB7XHJcbiAgICAgICAgdGhpcy5tX3dpZHRoID0gX193aWR0aDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaGVpZ2h0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1faGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBoZWlnaHQoX19oZWlnaHQpIHtcclxuICAgICAgICB0aGlzLm1faGVpZ2h0ID0gX19oZWlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHRvb2xUaXAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV90b29sVGlwO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCB0b29sVGlwKF9fdG9vbFRpcCkge1xyXG4gICAgICAgIHRoaXMubV90b29sVGlwID0gX190b29sVGlwO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBwZGZYKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fcGRmWDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgcGRmWChfX3BkZlgpIHtcclxuICAgICAgICB0aGlzLm1fcGRmWCA9IF9fcGRmWDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcGRmWSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX3BkZlk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHBkZlkoX19wZGZZKSB7XHJcbiAgICAgICAgdGhpcy5tX3BkZlkgPSBfX3BkZlk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHBkZlgyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fcGRmWDI7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHBkZlgyKF9fcGRmWDIpIHtcclxuICAgICAgICB0aGlzLm1fcGRmWDIgPSBfX3BkZlgyO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBwZGZZMigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX3BkZlkyO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBwZGZZMihfX3BkZlkyKSB7XHJcbiAgICAgICAgdGhpcy5tX3BkZlkyID0gX19wZGZZMjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZm9udFNpemUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV9mb250U2l6ZTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgZm9udFNpemUoX19mb250U2l6ZSkge1xyXG4gICAgICAgIHRoaXMubV9mb250U2l6ZSA9IF9fZm9udFNpemU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGZvbnROYW1lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fZm9udE5hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGZvbnROYW1lKF9fZm9udE5hbWUpIHtcclxuICAgICAgICB0aGlzLm1fZm9udE5hbWUgPSBfX2ZvbnROYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBmb250V2VpZ2h0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fZm9udFdlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgZm9udFdlaWdodChfX2ZvbnRXZWlnaHQpIHtcclxuICAgICAgICB0aGlzLm1fZm9udFdlaWdodCA9IF9fZm9udFdlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZm9udFN0eWxlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fZm9udFN0eWxlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBmb250U3R5bGUoX19mb250U3R5bGUpIHtcclxuICAgICAgICB0aGlzLm1fZm9udFN0eWxlID0gX19mb250U3R5bGU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGZvbnRDb2xvcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX2ZvbnRDb2xvcjtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgZm9udENvbG9yKF9fZm9udENvbG9yKSB7XHJcbiAgICAgICAgdGhpcy5tX2ZvbnRDb2xvciA9IF9fZm9udENvbG9yO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpc1JlbW92ZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV9pc1JlbW92ZWQ7XHJcbiAgICB9XHJcbiAgICBzZXQgaXNSZW1vdmVkKF9pc1JlbW92ZWQpIHtcclxuICAgICAgICB0aGlzLm1faXNSZW1vdmVkID0gX2lzUmVtb3ZlZDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdmFsdWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV92YWx1ZTtcclxuICAgIH1cclxuICAgIHNldCB2YWx1ZShfdmFsdWUpIHtcclxuICAgICAgICB0aGlzLm1fdmFsdWUgPSBfdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG93bmVySWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV9vd25lcklkO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBvd25lcklkKF9fb3duZXJJZCkge1xyXG4gICAgICAgIHRoaXMubV9vd25lcklkID0gX19vd25lcklkO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCByZXF1aXJlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX3JlcXVpcmVkO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCByZXF1aXJlZChfX3JlcXVpcmVkKSB7XHJcbiAgICAgICAgdGhpcy5tX3JlcXVpcmVkID0gX19yZXF1aXJlZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAZnVuY3Rpb24gc2hvd0ZpZWxkQXR0cmlidXRlXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI3Nob3dGaWVsZEF0dHJpYnV0ZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOuTnOydmCDsho3shLEg7Yyd7JeF7LC97J2EIOyEpOygle2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0VMRU1FTlR9IG5vZGUgIOyGjeyEsSDtjJ3sl4UgTm9kZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGlkVmFsdWUgICAgIO2VhOuTnOydmCBpZOqwklxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHJlcXVpcmVkVmFsdWUgICAgIO2VhOyImOyXrOu2gCDqsJJcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvd25lcklkVmFsdWUgICAg7ISc66qF7J6QIOyVhOydtOuUlFxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gdXNlckxpc3QgICDshJzrqoXsnpAg66as7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge0NhbGxiYWNrfSBjaGFuZ2VFdmVudEZ1bmMgICAg7IaN7ISx6rCS7J20IOuzgO2VoOuVjCDtmLjstpzrkJjripQgY2FsbGJhY2sgZnVuY3Rpb25cclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHNob3dGaWVsZEF0dHJpYnV0ZShub2RlLFxyXG4gICAgICAgIGlkVmFsdWUsIGZpZWxkSWRWYWx1ZSwgcmVxdWlyZWRWYWx1ZSwgb3duZXJJZFZhbHVlLFxyXG4gICAgICAgIHVzZXJMaXN0LFxyXG4gICAgICAgIGNoYW5nZUV2ZW50RnVuYykge1xyXG5cclxuICAgICAgICB2YXIgcGFuZWwgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVQYW5lbE5vZGUoKTtcclxuXHJcbiAgICAgICAgdmFyIHJlcXVpcmVSb3cgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVUb2dnbGVCdXR0b25Ob2RlKGlkVmFsdWUsIFwicmVxdWlyZWRcIiwgXCJUZW1wbGF0ZS5pc1JlcXVpcmVkXCIsIHJlcXVpcmVkVmFsdWUsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQocmVxdWlyZVJvdyk7XHJcbiAgICAgICAgbGV0IHVzZURlZmF1bE9wdGlvbk5vZGUgPSBVdGlscy5nZXRVc2VySW5mb09wdHNMaXN0Q291bnQoKSAhPT0gMTtcclxuICAgICAgICB2YXIgb3duZXJTZWxlY3RSb3cgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVTZWxlY3ROb2RlKGlkVmFsdWUsIFwib3duZXJJZFwiLCB1c2VyTGlzdCwgXCJcIiwgdXNlRGVmYXVsT3B0aW9uTm9kZSk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQob3duZXJTZWxlY3RSb3cpO1xyXG5cclxuICAgICAgICBsZXQgb3duZXJTZWxlY3QgPSBvd25lclNlbGVjdFJvdy5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xyXG4gICAgICAgICQob3duZXJTZWxlY3QpLnNlbGVjdDIoe1xyXG4gICAgICAgICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXHJcbiAgICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQob3duZXJTZWxlY3QpLnZhbChvd25lcklkVmFsdWUpLnRyaWdnZXIoXCJjaGFuZ2VcIik7XHJcbiAgICAgICAgJChvd25lclNlbGVjdCkub24oXCJjaGFuZ2VcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuXHJcbiAgICAgICAgdmFyIGZpZWxkSWRWYWx1ZVJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZUlucHV0Tm9kZShpZFZhbHVlLCBcImZpZWxkSWRcIiwgXCJUZW1wbGF0ZS5maWVsZElkVGV4dFwiLCBmaWVsZElkVmFsdWUsIFwiXCIsIFwiXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQoZmllbGRJZFZhbHVlUm93KTtcclxuXHJcblxyXG4gICAgICAgIHBhbmVsLnNldEF0dHJpYnV0ZShcIkZpZWxkLWlkLWxpc3RcIiwgaWRWYWx1ZSk7XHJcbiAgICAgICAgbm9kZS5jbGFzc05hbWUgPSBcIkVkaXRvci1BdHRyaWJ1dGVcIjtcclxuICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoXCJCYXNlLUZpZWxkXCIpO1xyXG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQocGFuZWwpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBmdW5jdGlvbiBzaG93RmllbGRzQXR0cmlidXRlXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI3Nob3dGaWVsZHNBdHRyaWJ1dGVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtlYTrk5zsnZgg7IaN7ISxIO2MneyXheywveydhCDshKTsoJXtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtIVE1MfSBvd25lck5vZGUgIOyGjeyEsSDtjJ3sl4UgTm9kZVxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gZmllbGRMaXN0ICAgIO2VhOuTnOuTpOydmCDrpqzsiqTtirhcclxuICAgICAqIEBwYXJhbSB7SFRNTH0gYXR0ck5vZGUgICDsho3shLEg7Yyd7JeF7J2YIE5vZGVcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtYWluR3JvdXAgICAgU1ZH7J2YIOuplOyduCBFbGVtZW50XHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSB1c2VyTGlzdCAg7ISc66qF7J6QIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gZHZPcHRpb25MaXN0ICAg6riw67O46rCSIOyEoO2DnSDrpqzsiqTtirhcclxuICAgICAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNoYW5nZUV2ZW50RnVuYyAgIOyGjeyEseqwkuydtCDrs4DtlaDrlYwg7Zi47Lac65CY64qUIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBzaG93RmllbGRzQXR0cmlidXRlKG93bmVyTm9kZSwgZmllbGRMaXN0LCBhdHRyTm9kZSwgbWFpbkdyb3VwLCB1c2VyTGlzdCwgZHZPcHRpb25MaXN0LCBjaGFuZ2VFdmVudEZ1bmMpIHtcclxuICAgICAgICBsZXQgbm9kZSA9IGF0dHJOb2RlO1xyXG4gICAgICAgIGlmIChhdHRyTm9kZSA9PT0gbnVsbCB8fCBVdGlscy5pc0VtcHR5T2JqZWN0KGF0dHJOb2RlKSkge1xyXG4gICAgICAgICAgICBjb25zdCBiYm94ID0gVXRpbHMubWVyZ2VGaWVsZHNCQm94KGZpZWxkTGlzdCk7XHJcbiAgICAgICAgICAgIG5vZGUgPSBVdGlscy5jcmVhdGVBdHRyYnV0ZVBvcHVwKG93bmVyTm9kZSwgYmJveCk7XHJcbiAgICAgICAgICAgIFV0aWxzLnJlcG9zaXRpb25GaWVsZERlbGV0ZUJ0bihvd25lck5vZGUsIGJib3gueCwgYmJveC55LCBiYm94LndpZHRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgVXRpbHMucmVtb3ZlQWxsQ2hpbGROb2RlKG5vZGUpO1xyXG5cclxuICAgICAgICB2YXIgaWRWYWx1ZUFyciA9IFtdO1xyXG4gICAgICAgIGZpZWxkTGlzdC5mb3JFYWNoKChmaWVsZCkgPT4ge1xyXG4gICAgICAgICAgICBpZFZhbHVlQXJyLnB1c2goZmllbGQuaWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBpZFZhbHVlID0gaWRWYWx1ZUFyci5qb2luKCk7XHJcblxyXG4gICAgICAgIHZhciBvd25lcklkVmFsdWUgPSBmaWVsZExpc3RbMF0ub3duZXJJZDtcclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0ub3duZXJJZCAhPT0gb3duZXJJZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBvd25lcklkVmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgcmVxdWlyZWRWYWx1ZSA9IGZpZWxkTGlzdFswXS5yZXF1aXJlZDtcclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0ucmVxdWlyZWQgIT09IHJlcXVpcmVkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHJlcXVpcmVkVmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZmllbGRJZFZhbHVlID0gZmllbGRMaXN0WzBdLmZpZWxkSWQ7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmZpZWxkSWQgIT09IGZpZWxkSWRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgZmllbGRJZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgQmFzZUZpZWxkLnNob3dGaWVsZEF0dHJpYnV0ZShub2RlLFxyXG4gICAgICAgICAgICBpZFZhbHVlLCBmaWVsZElkVmFsdWUsIHJlcXVpcmVkVmFsdWUsIG93bmVySWRWYWx1ZSxcclxuICAgICAgICAgICAgdXNlckxpc3QsXHJcbiAgICAgICAgICAgIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFsaWRhdGVWYWx1ZShwcm9wZXJ0eU5hbWUsIHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBmdW5jdGlvbiBnZXRCQm94XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI2dldEJCb3hcclxuICAgICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zsnZggYm91bmRpbmcgUmVjdOulvCDrpqzthLQgLlxyXG4gICAgICogQG1lbWJlck9mIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGRcclxuICAgICAqIEByZXR1cm4ge1JlY3R9IE9iamVjdCBcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgZ2V0QkJveCgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBsZWZ0OiB0aGlzLngsXHJcbiAgICAgICAgICAgIHRvcDogdGhpcy55LFxyXG4gICAgICAgICAgICByaWdodDogdGhpcy54ICsgdGhpcy53aWR0aCxcclxuICAgICAgICAgICAgYm90dG9tOiB0aGlzLnkgKyB0aGlzLmhlaWdodCxcclxuICAgICAgICAgICAgeDogdGhpcy54LFxyXG4gICAgICAgICAgICB5OiB0aGlzLnksXHJcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLndpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IFxyXG4iLCJcclxuLyoqXHJcbiAqIEBtb2R1bGUgVGVtcGxhdGUvRmllbGRcclxuKi9cclxuXHJcbmltcG9ydCB7IEJhc2VGaWVsZCB9IGZyb20gJy4vQmFzZUZpZWxkJztcclxuaW1wb3J0IHtVdGlsc30gZnJvbSAnLi8uLi91dGlscy91dGlscy5qcyc7XHJcbmltcG9ydCB7Q09OU1RBTlRTfSBmcm9tICcuLy4uL0NvbnN0YW50cy5qcyc7XHJcblxyXG4vKipcclxuICogQGRlc2NyaXB0aW9uIOyytO2BrOuwleyKpCDtlYTrk5wgQ2xhc3NcclxuICpcclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZmllbGROYW1lIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQ2hlY2tib3hGaWVsZCNmaWVsZE5hbWV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHdpZHRoVmFsdWUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5DaGVja2JveEZpZWxkI3dpZHRoVmFsdWV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGhlaWdodFZhbHVlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQ2hlY2tib3hGaWVsZCNoZWlnaHRWYWx1ZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZ2V0U1ZHRmllbGRPYmplY3Qge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5DaGVja2JveEZpZWxkI2dldFNWR0ZpZWxkT2JqZWN0fVxyXG4gKiBcclxuICogQGF1Z21lbnRzIEJhc2VGaWVsZCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNCYXNlRmllbGR9XHJcbiAqIEBGaWxlTmFtZSBDaGVja2JveEZpZWxkLmpzXHJcbiAqIEBzaW5jZSAyMDIxLjA1LjMxXHJcbiAqL1xyXG5cclxuZXhwb3J0IGNsYXNzIENoZWNrYm94RmllbGQgZXh0ZW5kcyBCYXNlRmllbGQge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgKiBAcGFyYW0gaWQg7ZWE65Oc7J2YIElEXHJcbiAgICAgKiBAcGFyYW0gcGFnZU5vIO2VhOuTnOqwgCDsho3tlZwg7Y6Y7J207KeAIOuyiO2YuFxyXG4gICAgICogQHBhcmFtIHgg7ZWE65Oc7J2YIHN2Z+yDgeydmCB47KKM7ZGcXHJcbiAgICAgKiBAcGFyYW0geSDtlYTrk5zsnZggc3Zn7IOB7J2YIHnsooztkZxcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGlkLCBwYWdlTm8sIHgsIHkpIHtcclxuICAgICAgICBzdXBlcihpZCwgcGFnZU5vLCB4LCB5LCBDaGVja2JveEZpZWxkLndpZHRoVmFsdWUoKSwgQ2hlY2tib3hGaWVsZC5oZWlnaHRWYWx1ZSgpKTtcclxuICAgICAgICB0aGlzLm1fdHlwZSA9IENoZWNrYm94RmllbGQuZmllbGROYW1lKCk7XHJcblxyXG4gICAgICAgIHRoaXMubV9raW5kID0gVXRpbHMudHJhbnNsYXRlRm9yS2V5KFwiVGVtcGxhdGUuY2hlY2tGaWVsZFRvb2xcIik7XHJcblxyXG4gICAgICAgIGlmIChVdGlscy5pc1N0cmluZ0VtcHR5KGlkKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubV9maWVsZElkID0gdGhpcy5tX2lkLnJlcGxhY2UodGhpcy5tX3R5cGUsIHRoaXMubV9raW5kICsgXCItXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIGZpZWxkTmFtZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkNoZWNrYm94RmllbGQjZmllbGROYW1lXHJcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE65OcIO2DgOyeheydmCDsnbTrpoRcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBmaWVsZE5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiQ2hlY2tib3hGaWVsZFwiO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBhbmNlc3RvcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFtcIkNCRlwiLCBcIkJGXCJdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIHdpZHRoVmFsdWVcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5DaGVja2JveEZpZWxkI3dpZHRoVmFsdWVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtlYTrk5zsnZgg7LSI6riwIOqwgOuhnCDquLjsnbRcclxuICAgICAqIEByZXR1cm4ge051bWJlcn1cclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyB3aWR0aFZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybiA2MDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiBoZWlnaHRWYWx1ZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkNoZWNrYm94RmllbGQjaGVpZ2h0VmFsdWVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtlYTrk5zsnZgg7LSI6riwIOyEuOuhnCDquLjsnbRcclxuICAgICAqIEByZXR1cm4ge051bWJlcn1cclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBoZWlnaHRWYWx1ZSgpIHtcclxuICAgICAgICByZXR1cm4gNjA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gZ2V0U1ZHRmllbGRPYmplY3RcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5DaGVja2JveEZpZWxkI2dldFNWR0ZpZWxkT2JqZWN0XHJcbiAgICAgKiBAbWVtYmVyT2YgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkNoZWNrYm94RmllbGRcclxuICAgICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zsnZgg7KCV67O066W8IOqwgOyngOqzoCBTVkcgRWxlbWVudOulvCDsg53shLHtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGNhbnZhcyAgU25hcCBTVkfsnZggQ2FudmFzIE9iamVjdFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG1haW5Hcm91cCAgIFNWR+ydmCDrqZTsnbggTm9kZVxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHNjYWxlICDtmITsnqwgUERG7J2YIFNjYWxlXHJcbiAgICAgKiBAcGFyYW0ge0hUTUx9IG93bmVyTm9kZSAgIO2VtOuLuSDtlITroZzsoJ3tirjsnZgg7LWc7IOB64uoIEVsZW1lbnTrpbwg6rCQ7Iu46rOgIOyeiOuKlCBFbGVtZW50XHJcbiAgICAgKiBAcGFyYW0ge0NhbGxiYWNrfSByZW1vdmVEcmFnT3Zlckdyb3VwRnVuYyAgIOuTnOuemOq3uCDrkJjslrQg7ISg7YOd65CY7Ja07KeEIEZpZWxkIEdyb3Vw7J2EIOygnOqxsO2VmOuKlCBjYWxsYmFjayBmdW5jdGlvblxyXG4gICAgICogQHBhcmFtIHtDYWxsYmFja30gY2hhbmdlVmFsdWVFdmVudEZ1bmMgICAgIOyGjeyEseqwkuydtCDrs4DtlaDrlYwg7Zi47Lac65CY64qUIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICAgKiBAcGFyYW0ge0NhbGxiYWNrfSBjaGFuZ2VGcmVlVHJhbnNmb3JtRnVuYyAgICAgRnJlZVRyYW5zZm9ybeydhCDri6Tsi5wg7IOd7ISx7ZWY6riwIOychO2VnCBjYWxsYmFjayBmdW5jdGlvblxyXG4gICAgICogQHJldHVybiBTVkcgTm9kZSBFbGVtZW50XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIGdldFNWR0ZpZWxkT2JqZWN0KGNhbnZhcywgbWFpbkdyb3VwLCBzY2FsZSwgb3duZXJOb2RlLCByZW1vdmVEcmFnT3Zlckdyb3VwRnVuYywgY2hhbmdlVmFsdWVFdmVudEZ1bmMsIGNoYW5nZUZyZWVUcmFuc2Zvcm1GdW5jLCBiZ0NvbG9yPVwiI2ZmYWM3ZlwiKSB7XHJcbiAgICAgICAgbGV0IGdyb3VwID0gbWFpbkdyb3VwLmdyb3VwKCk7XHJcbiAgICAgICAgZ3JvdXAuYXR0cih7XHJcbiAgICAgICAgICAgIGlkOiB0aGlzLmlkICsgXCJHcm91cFwiLFxyXG4gICAgICAgICAgICBjdXJzb3I6IFwibW92ZVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbGV0IHJlY3QgPSBjYW52YXMucmVjdCh0aGlzLngsIHRoaXMueSwgdGhpcy53aWR0aCAqIHNjYWxlLCB0aGlzLmhlaWdodCAqIHNjYWxlKTtcclxuICAgICAgICByZWN0LmF0dHIoe1xyXG4gICAgICAgICAgICBpZDogdGhpcy5pZCxcclxuICAgICAgICAgICAgXCJmaWxsLW9wYWNpdHlcIjogXCIwLjZcIixcclxuICAgICAgICAgICAgXCJmaWxsXCI6IGJnQ29sb3JcclxuICAgICAgICB9KTtcclxuICAgICAgICBncm91cC5hcHBlbmQocmVjdCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY2hlY2tTdHJpbmcgPSAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeD1cIicgKyB0aGlzLnggKyAncHhcIiB5PVwiJyArIHRoaXMueSArICdweFwiIHdpZHRoPVwiJyArIHRoaXMud2lkdGggKiBzY2FsZSArXHJcbiAgICAgICAgICAgICdweFwiIGhlaWdodD1cIicgKyB0aGlzLmhlaWdodCAqIHNjYWxlICsgJ3B4XCIgIHZpZXdCb3g9XCIwIDAgNDggNDhcIj48cGF0aCBkPVwiTTE3LjIgMzIuMkw0LjkgMTkuOSAwIDI0LjggMTcuMiA0MiA0OCAxMC45IDQzLjEgNnpcIi8+PC9zdmcgPidcclxuICAgICAgICBjb25zdCBwID0gU25hcC5wYXJzZShjaGVja1N0cmluZyk7XHJcbiAgICAgICAgZ3JvdXAuYXBwZW5kKHApO1xyXG5cclxuICAgICAgICBncm91cC5ob3ZlcihcclxuICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyAvLyBmX2luXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLy8gZl9vdXRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGxldCBfY2hrRmllbGQgPSB0aGlzO1xyXG4gICAgICAgIGxldCBtb3VzZVBvcyA9IHsgeDogMCwgeTogMCB9O1xyXG4gICAgICAgIGdyb3VwLm1vdXNlZG93bihmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgIG1vdXNlUG9zLnggPSBldnQucGFnZVg7XHJcbiAgICAgICAgICAgIG1vdXNlUG9zLnkgPSBldnQucGFnZVk7XHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gbWFpbkdyb3VwLnNlbGVjdEFsbCgnZycpO1xyXG4gICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCAhPT0gZ3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIVV0aWxzLmlzRW1wdHlPYmplY3QoZWxlbWVudC5mcmVlVHJhbnNmb3JtKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmZyZWVUcmFuc2Zvcm0uaGlkZVJlc2l6ZUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoIVV0aWxzLmlzRW1wdHlPYmplY3QoZ3JvdXAuZnJlZVRyYW5zZm9ybSkpIHtcclxuICAgICAgICAgICAgICAgIGdyb3VwLmZyZWVUcmFuc2Zvcm0uc2hvd1Jlc2l6ZUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNoYW5nZUZyZWVUcmFuc2Zvcm1GdW5jKGdyb3VwLCByZWN0LmF0dHIoXCJ3aWR0aFwiKSwgcmVjdC5hdHRyKFwiaGVpZ2h0XCIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBncm91cC5tb3VzZXVwKGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgaWYgKGdyb3VwLnBhcmVudCgpLmF0dHIoXCJpZFwiKSA9PT0gQ09OU1RBTlRTLkRSQUdfQk9YX05BTUUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb3VzZVBvcy54IC0gZXZ0LnBhZ2VYKSA+IENPTlNUQU5UUy5NSU5JTVVNX0RSQUdfU0laRVxyXG4gICAgICAgICAgICAgICAgICAgIHx8IE1hdGguYWJzKG1vdXNlUG9zLnkgLSBldnQucGFnZVkpID4gQ09OU1RBTlRTLk1JTklNVU1fRFJBR19TSVpFKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVtb3ZlRHJhZ092ZXJHcm91cEZ1bmMuY2FsbCgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBtYWluR3JvdXAuc2VsZWN0QWxsKCdnJyk7XHJcbiAgICAgICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgIT09IGdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghVXRpbHMuaXNFbXB0eU9iamVjdChlbGVtZW50LmZyZWVUcmFuc2Zvcm0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmZyZWVUcmFuc2Zvcm0uaGlkZVJlc2l6ZUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFVdGlscy5pc0VtcHR5T2JqZWN0KGdyb3VwLmZyZWVUcmFuc2Zvcm0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXAuZnJlZVRyYW5zZm9ybS5zaG93UmVzaXplSGFuZGxlcigpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VGcmVlVHJhbnNmb3JtRnVuYyhncm91cCwgcmVjdC5hdHRyKFwid2lkdGhcIiksIHJlY3QuYXR0cihcImhlaWdodFwiKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfY2hrRmllbGQuY29uc3RydWN0b3Iuc2hvd0ZpZWxkc0F0dHJpYnV0ZShvd25lck5vZGUsIFtfY2hrRmllbGRdLCB1bmRlZmluZWQsIG1haW5Hcm91cCwgVXRpbHMuZ2V0VXNlckluZm9PcHRzTGlzdCgpLCBVdGlscy5nZXREVkZpZWxkT3B0c0xpc3QoKSwgY2hhbmdlVmFsdWVFdmVudEZ1bmMpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX2Noa0ZpZWxkLmNvbnN0cnVjdG9yLnNob3dGaWVsZHNBdHRyaWJ1dGUob3duZXJOb2RlLCBbX2Noa0ZpZWxkXSwgdW5kZWZpbmVkLCBtYWluR3JvdXAsIFV0aWxzLmdldFVzZXJJbmZvT3B0c0xpc3QoKSwgVXRpbHMuZ2V0RFZGaWVsZE9wdHNMaXN0KCksIGNoYW5nZVZhbHVlRXZlbnRGdW5jKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBncm91cDtcclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbiIsIlxyXG4vKipcclxuICogQG1vZHVsZSBUZW1wbGF0ZS9GaWVsZFxyXG4qL1xyXG5cclxuaW1wb3J0IHtUZXh0QmFzZUZpZWxkfSBmcm9tICcuL1RleHRCYXNlRmllbGQnO1xyXG5pbXBvcnQge1V0aWxzfSBmcm9tICcuLy4uL3V0aWxzL3V0aWxzLmpzJztcclxuaW1wb3J0IHtDT05TVEFOVFN9IGZyb20gJy4vLi4vQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IENQIGZyb20gJy4vLi4vdXRpbHMvY29sb3ItcGlja2VyJztcclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24g7L2k67O067CV7IqkIO2VhOuTnCBDbGFzc1xyXG4gKlxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gbV9jb21ib2JveExpc3Qge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5Db21ib2JveEZpZWxkI21fY29tYm9ib3hMaXN0fVxyXG4gKlxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBmaWVsZE5hbWUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5Db21ib2JveEZpZWxkI2ZpZWxkTmFtZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gc2hvd0ZpZWxkQXR0cmlidXRlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQ29tYm9ib3hGaWVsZCNzaG93RmllbGRBdHRyaWJ1dGV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNob3dGaWVsZHNBdHRyaWJ1dGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5Db21ib2JveEZpZWxkI3Nob3dGaWVsZHNBdHRyaWJ1dGV9XHJcbiAqIFxyXG4gKiBAYXVnbWVudHMgVGV4dEJhc2VGaWVsZCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRCYXNlRmllbGQjVGV4dEJhc2VGaWVsZH1cclxuICogQEZpbGVOYW1lIENvbWJvYm94RmllbGQuanNcclxuICogQHNpbmNlIDIwMjEuMDUuMzFcclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb21ib2JveEZpZWxkIGV4dGVuZHMgVGV4dEJhc2VGaWVsZCB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAqIEBwYXJhbSBpZCDtlYTrk5zsnZggSURcclxuICAgICAqIEBwYXJhbSBwYWdlTm8g7ZWE65Oc6rCAIOyGje2VnCDtjpjsnbTsp4Ag67KI7Zi4XHJcbiAgICAgKiBAcGFyYW0geCDtlYTrk5zsnZggc3Zn7IOB7J2YIHjsooztkZxcclxuICAgICAqIEBwYXJhbSB5IO2VhOuTnOydmCBzdmfsg4HsnZggeeyijO2RnFxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoaWQsIHBhZ2VObywgeCwgeSkge1xyXG4gICAgICAgIHN1cGVyKGlkLCBwYWdlTm8sIHgsIHksIENvbWJvYm94RmllbGQud2lkdGhWYWx1ZSgpLCBDb21ib2JveEZpZWxkLmhlaWdodFZhbHVlKCkpO1xyXG4gICAgICAgIHRoaXMubV90eXBlID0gQ29tYm9ib3hGaWVsZC5maWVsZE5hbWUoKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQ29tYm9ib3hGaWVsZCNtX2NvbWJvYm94TGlzdFxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiDsvaTrs7TrsJXsiqTsl5Ag65Ok7Ja06rCIIOumrOyKpO2KuFxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIGNvbWJvYm94TGlzdCgpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIGNvbWJvYm94TGlzdCh2YWwpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tX2NvbWJvYm94TGlzdCA9IFwiXCI7XHJcblxyXG4gICAgICAgIHRoaXMubV9raW5kID0gVXRpbHMudHJhbnNsYXRlRm9yS2V5KFwiVGVtcGxhdGUuY29tYm9GaWVsZFRvb2xcIik7XHJcbiAgICAgICAgaWYgKFV0aWxzLmlzU3RyaW5nRW1wdHkoaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tX2ZpZWxkSWQgPSB0aGlzLm1faWQucmVwbGFjZSh0aGlzLm1fdHlwZSwgdGhpcy5tX2tpbmQgKyBcIi1cIik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gZmllbGROYW1lXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQ29tYm9ib3hGaWVsZCNmaWVsZE5hbWVcclxuICAgICAqIEByZXR1cm4ge1N0cmluZ31cclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtlYTrk5wg7YOA7J6F7J2YIOydtOumhFxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZpZWxkTmFtZSgpIHtcclxuICAgICAgICByZXR1cm4gXCJDb21ib2JveEZpZWxkXCI7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGFuY2VzdG9ycygpIHtcclxuICAgICAgICByZXR1cm4gW1wiQ01CRlwiLCBcIlRCRlwiLCBcIkJGXCJdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjb21ib2JveExpc3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV9jb21ib2JveExpc3Q7XHJcbiAgICB9XHJcbiAgICBzZXQgY29tYm9ib3hMaXN0KF9fY29tYm9ib3hMaXN0KSB7XHJcbiAgICAgICAgdGhpcy5tX2NvbWJvYm94TGlzdCA9IF9fY29tYm9ib3hMaXN0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIHNob3dGaWVsZEF0dHJpYnV0ZVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkNvbWJvYm94RmllbGQjc2hvd0ZpZWxkQXR0cmlidXRlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE65Oc7J2YIOyGjeyEsSDtjJ3sl4XssL3snYQg7ISk7KCV7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7SFRNTH0gbm9kZSAgIOyGjeyEsSDtjJ3sl4UgTm9kZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGlkVmFsdWUgICAgIO2VhOuTnOydmCBpZOqwklxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHJlcXVpcmVkVmFsdWUgICAgIO2VhOyImOyXrOu2gCDqsJJcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvd25lcklkVmFsdWUgICAg7ISc66qF7J6QIOyVhOydtOuUlFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGR2VmFsdWUgICAgIOq4sOuzuOqwklxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZvbnRGYW1pbHlOYW1lVmFsdWUgICAg7Y+w7Yq4IOydtOumhFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZvbnRTaXplVmFsdWUgICAgIO2PsO2KuCDtgazquLAg6rCSXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dEFsaWduVmFsdWUgICAg7YWN7Iqk7Yq4IOqwgOuhnCDsoJXroKwg6rCSXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gYm9sZFZhbHVlICAgICDtj7Dtirgg67O865OcIOyXrOu2gFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZvbnRDb2xvclZhbHVlICAgICDtj7Dtirgg7Lm86528XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY29tYm9ib3hMaXN0VmFsdWUgICAg7L2k67O067CV7IqkIOumrOyKpO2KuOyXkCDrk6TslrTqsIDripQg66as7Iqk7Yq4IOqwklxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gdXNlckxpc3QgICDshJzrqoXsnpAg66as7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBkdk9wdGlvbkxpc3QgICDquLDrs7jqsJIg7ISg7YOdIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtDYWxsYmFja30gY2hhbmdlRXZlbnRGdW5jICAgIOyGjeyEseqwkuydtCDrs4DtlaDrlYwg7Zi47Lac65CY64qUIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBzaG93RmllbGRBdHRyaWJ1dGUobm9kZSxcclxuICAgICAgICBpZFZhbHVlLCBmaWVsZElkVmFsdWUsIHJlcXVpcmVkVmFsdWUsIG93bmVySWRWYWx1ZSwgZHZWYWx1ZSwgZm9udEZhbWlseU5hbWVWYWx1ZSwgZm9udFNpemVWYWx1ZSwgdGV4dEFsaWduVmFsdWUsIGJvbGRWYWx1ZSwgZm9udENvbG9yVmFsdWUsIGNvbWJvYm94TGlzdFZhbHVlLFxyXG4gICAgICAgIHVzZXJMaXN0LCBkdk9wdGlvbkxpc3QsXHJcbiAgICAgICAgY2hhbmdlRXZlbnRGdW5jKSB7XHJcblxyXG4gICAgICAgIHZhciBwYW5lbCA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVBhbmVsTm9kZSgpO1xyXG5cclxuICAgICAgICB2YXIgcmVxdWlyZVJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVRvZ2dsZUJ1dHRvbk5vZGUoaWRWYWx1ZSwgXCJyZXF1aXJlZFwiLCBcIlRlbXBsYXRlLmlzUmVxdWlyZWRcIiwgcmVxdWlyZWRWYWx1ZSwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChyZXF1aXJlUm93KTtcclxuXHJcbiAgICAgICAgbGV0IHVzZURlZmF1bE9wdGlvbk5vZGUgPSBVdGlscy5nZXRVc2VySW5mb09wdHNMaXN0Q291bnQoKSAhPT0gMTtcclxuICAgICAgICB2YXIgb3duZXJTZWxlY3RSb3cgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVTZWxlY3ROb2RlKGlkVmFsdWUsIFwib3duZXJJZFwiLCB1c2VyTGlzdCwgXCJcIiwgdXNlRGVmYXVsT3B0aW9uTm9kZSk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQob3duZXJTZWxlY3RSb3cpO1xyXG5cclxuICAgICAgICBsZXQgb3duZXJTZWxlY3QgPSBvd25lclNlbGVjdFJvdy5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xyXG4gICAgICAgIGpRdWVyeShvd25lclNlbGVjdCkuc2VsZWN0Mih7XHJcbiAgICAgICAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcclxuICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgalF1ZXJ5KG93bmVyU2VsZWN0KS52YWwob3duZXJJZFZhbHVlKS50cmlnZ2VyKFwiY2hhbmdlXCIpO1xyXG4gICAgICAgIGpRdWVyeShvd25lclNlbGVjdCkub24oXCJjaGFuZ2VcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuXHJcbiAgICAgICAgLy8xMi0yOFxyXG4gICAgICAgIGlmIChkdk9wdGlvbkxpc3QgJiYgQXJyYXkuaXNBcnJheShkdk9wdGlvbkxpc3QpICYmIGR2T3B0aW9uTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciBkZWZhdWx0VmFsdWVSb3cgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVTZWxlY3ROb2RlKGlkVmFsdWUsIFwiZGVmYXVsdFZhbHVlXCIsIGR2T3B0aW9uTGlzdCwgXCJUZW1wbGF0ZS5kZWZhdWx0VmFsdWVUZXh0XCIsIHRydWUpO1xyXG4gICAgICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChkZWZhdWx0VmFsdWVSb3cpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGRlZmF1bHRWYWx1ZVNlbGVjdCA9IGRlZmF1bHRWYWx1ZVJvdy5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xyXG4gICAgICAgICAgICAkKGRlZmF1bHRWYWx1ZVNlbGVjdCkuc2VsZWN0Mih7XHJcbiAgICAgICAgICAgICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogXCIxMDAlXCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICQoZGVmYXVsdFZhbHVlU2VsZWN0KS52YWwoZHZWYWx1ZSkudHJpZ2dlcihcImNoYW5nZVwiKTtcclxuICAgICAgICAgICAgJChkZWZhdWx0VmFsdWVTZWxlY3QpLm9uKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgdmFyIGZpZWxkSWRWYWx1ZVJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZUlucHV0Tm9kZShpZFZhbHVlLCBcImZpZWxkSWRcIiwgXCJUZW1wbGF0ZS5maWVsZElkVGV4dFwiLCBmaWVsZElkVmFsdWUsIFwiXCIsIFwiXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQoZmllbGRJZFZhbHVlUm93KTtcclxuXHJcbiAgICAgICAgdmFyIGNvbWJvYm94Um93ID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlVGV4dEFyZWFOb2RlKGlkVmFsdWUsIFwiY29tYm9ib3hMaXN0XCIsIFwiVGVtcGxhdGUuY29tYm9Cb3hTZWxjdFZhbHVlVGV4dFwiLCBjb21ib2JveExpc3RWYWx1ZSwgXCJcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChjb21ib2JveFJvdyk7XHJcblxyXG4gICAgICAgIHZhciBmb250QXR0clJvdyA9IFV0aWxzLmNyZWF0ZVRleHRBdHRyYnV0ZU5vZGUoaWRWYWx1ZSwgZm9udENvbG9yVmFsdWUsIHRleHRBbGlnblZhbHVlLCBib2xkVmFsdWUsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQoZm9udEF0dHJSb3cucm93KTtcclxuXHJcbiAgICAgICAgbGV0IGZvbnRGYW1pbHlDb21ib1NlbGVjdCA9IGZvbnRBdHRyUm93LmZvbnRGYW1pbHlDb21iby5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xyXG4gICAgICAgICQoZm9udEZhbWlseUNvbWJvU2VsZWN0KS5zZWxlY3QyKHtcclxuICAgICAgICAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxyXG4gICAgICAgICAgICB3aWR0aDogXCIxMDAlXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGZvbnRGYW1pbHlDb21ib1NlbGVjdCkudmFsKGZvbnRGYW1pbHlOYW1lVmFsdWUpLnRyaWdnZXIoXCJjaGFuZ2VcIik7XHJcbiAgICAgICAgJChmb250RmFtaWx5Q29tYm9TZWxlY3QpLm9uKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgbGV0IGZvbnRTaXplQ29tYm9TZWxlY3QgPSBmb250QXR0clJvdy5mb250U2l6ZUNvbWJvLnF1ZXJ5U2VsZWN0b3IoXCJzZWxlY3RcIik7XHJcbiAgICAgICAgJChmb250U2l6ZUNvbWJvU2VsZWN0KS5zZWxlY3QyKHtcclxuICAgICAgICAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxyXG4gICAgICAgICAgICB3aWR0aDogXCIxMDAlXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGZvbnRTaXplQ29tYm9TZWxlY3QpLnZhbChmb250U2l6ZVZhbHVlKS50cmlnZ2VyKFwiY2hhbmdlXCIpO1xyXG4gICAgICAgICQoZm9udFNpemVDb21ib1NlbGVjdCkub24oXCJjaGFuZ2VcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuXHJcbiAgICAgICAgbGV0IGNvbG9ySW5wdXQgPSBmb250QXR0clJvdy5jb2xvckJ0bi5xdWVyeVNlbGVjdG9yKFwiYnV0dG9uXCIpO1xyXG4gICAgICAgIGNvbG9ySW5wdXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gZm9udENvbG9yVmFsdWU7XHJcbiAgICAgICAgbGV0IHBpY2tlciA9IG5ldyBDUChjb2xvcklucHV0LCB7IGNvbG9yOiBmb250Q29sb3JWYWx1ZSB9KTtcclxuICAgICAgICBjb2xvcklucHV0LnZhbHVlID0gZm9udENvbG9yVmFsdWU7XHJcbiAgICAgICAgcGlja2VyLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAociwgZywgYiwgYSkge1xyXG4gICAgICAgICAgICBpZiAoIXBpY2tlci52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29sb3JJbnB1dC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBDUC5IRVgoW3IsIGcsIGIsIGFdKTtcclxuICAgICAgICAgICAgY29sb3JJbnB1dC52YWx1ZSA9IENQLkhFWChbciwgZywgYiwgYV0pO1xyXG5cclxuICAgICAgICAgICAgbGV0IGNvbG9yVGV4dElucHV0ID0gZm9udEF0dHJSb3cuY29sb3JCdG4ucXVlcnlTZWxlY3RvcihcImlucHV0W3R5cGU9J3RleHQnXVwiKTtcclxuICAgICAgICAgICAgY29sb3JUZXh0SW5wdXQudmFsdWUgPSAoQ1AuSEVYKFtyLCBnLCBiLCBhXSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBpY2tlci5vbignZXhpdCcsIGZ1bmN0aW9uIChyLCBnLCBiLCBhKSB7XHJcbiAgICAgICAgICAgIGNvbG9ySW5wdXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gQ1AuSEVYKFtyLCBnLCBiLCBhXSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgY29sb3JUZXh0SW5wdXQgPSBmb250QXR0clJvdy5jb2xvckJ0bi5xdWVyeVNlbGVjdG9yKFwiaW5wdXRbdHlwZT0ndGV4dCddXCIpO1xyXG4gICAgICAgICAgICBjb2xvclRleHRJbnB1dC52YWx1ZSA9IChDUC5IRVgoW3IsIGcsIGIsIGFdKSk7XHJcbiAgICAgICAgICAgIGNvbG9yVGV4dElucHV0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiY2hhbmdlXCIpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcGFuZWwuc2V0QXR0cmlidXRlKFwiRmllbGQtaWQtbGlzdFwiLCBpZFZhbHVlKTtcclxuICAgICAgICBub2RlLmNsYXNzTmFtZSA9IFwiRWRpdG9yLUF0dHJpYnV0ZVwiO1xyXG4gICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZChcIlRleHQtRmllbGRcIik7XHJcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChwYW5lbCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIHNob3dGaWVsZHNBdHRyaWJ1dGVcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5Db21ib2JveEZpZWxkI3Nob3dGaWVsZHNBdHRyaWJ1dGVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtlYTrk5zsnZgg7IaN7ISxIO2MneyXheywveydhCDshKTsoJXtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtIVE1MfSBvd25lck5vZGUgIOyGjeyEsSDtjJ3sl4UgTm9kZVxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gZmllbGRMaXN0ICAgICDtlYTrk5zrk6TsnZgg66as7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge0hUTUx9IGF0dHJOb2RlICAgIOyGjeyEsSDtjJ3sl4XsnZggTm9kZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1haW5Hcm91cCAgICBTVkfsnZgg66mU7J24IEVsZW1lbnRcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHVzZXJMaXN0ICAg7ISc66qF7J6QIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gZHZPcHRpb25MaXN0ICAg6riw67O46rCSIOyEoO2DnSDrpqzsiqTtirhcclxuICAgICAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNoYW5nZUV2ZW50RnVuYyAgICDsho3shLHqsJLsnbQg67OA7ZWg65WMIO2YuOy2nOuQmOuKlCBjYWxsYmFjayBmdW5jdGlvblxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgc2hvd0ZpZWxkc0F0dHJpYnV0ZShvd25lck5vZGUsIGZpZWxkTGlzdCwgYXR0ck5vZGUsIG1haW5Hcm91cCwgdXNlckxpc3QsIGR2T3B0aW9uTGlzdCwgY2hhbmdlRXZlbnRGdW5jKSB7XHJcbiAgICAgICAgbGV0IG5vZGUgPSBhdHRyTm9kZTtcclxuICAgICAgICBpZiAoYXR0ck5vZGUgPT09IG51bGwgfHwgVXRpbHMuaXNFbXB0eU9iamVjdChhdHRyTm9kZSkpIHtcclxuICAgICAgICAgICAgY29uc3QgYmJveCA9IFV0aWxzLm1lcmdlRmllbGRzQkJveChmaWVsZExpc3QpO1xyXG4gICAgICAgICAgICBub2RlID0gVXRpbHMuY3JlYXRlQXR0cmJ1dGVQb3B1cChvd25lck5vZGUsIGJib3gpO1xyXG4gICAgICAgICAgICBVdGlscy5yZXBvc2l0aW9uRmllbGREZWxldGVCdG4ob3duZXJOb2RlLCBiYm94LngsIGJib3gueSwgYmJveC53aWR0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFV0aWxzLnJlbW92ZUFsbENoaWxkTm9kZShub2RlKTtcclxuXHJcbiAgICAgICAgdmFyIGlkVmFsdWVBcnIgPSBbXTtcclxuICAgICAgICBmaWVsZExpc3QuZm9yRWFjaCgoZmllbGQpID0+IHtcclxuICAgICAgICAgICAgaWRWYWx1ZUFyci5wdXNoKGZpZWxkLmlkKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdmFyIGlkVmFsdWUgPSBpZFZhbHVlQXJyLmpvaW4oKTtcclxuXHJcbiAgICAgICAgdmFyIG93bmVySWRWYWx1ZSA9IGZpZWxkTGlzdFswXS5vd25lcklkO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5vd25lcklkICE9PSBvd25lcklkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIG93bmVySWRWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciByZXF1aXJlZFZhbHVlID0gZmllbGRMaXN0WzBdLnJlcXVpcmVkO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5yZXF1aXJlZCAhPT0gcmVxdWlyZWRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgcmVxdWlyZWRWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBkdlZhbHVlID0gZmllbGRMaXN0WzBdLmRlZmF1bHRWYWx1ZTtcclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0uZGVmYXVsdFZhbHVlICE9PSBkdlZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBkdlZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGZvbnRGYW1pbHlOYW1lVmFsdWUgPSBmaWVsZExpc3RbMF0uZm9udE5hbWU7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmZvbnROYW1lICE9PSBmb250RmFtaWx5TmFtZVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBmb250RmFtaWx5TmFtZVZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZm9udFNpemVWYWx1ZSA9IGZpZWxkTGlzdFswXS5mb250U2l6ZTtcclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0uZm9udFNpemUgIT09IGZvbnRTaXplVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplVmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgdGV4dEFsaWduVmFsdWUgPSBmaWVsZExpc3RbMF0udGV4dEFsaWduO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS50ZXh0QWxpZ24gIT09IHRleHRBbGlnblZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QWxpZ25WYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBib2xkVmFsdWUgPSBmaWVsZExpc3RbMF0uaXNCb2xkO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5pc0JvbGQgIT09IGJvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgYm9sZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZm9udENvbG9yVmFsdWUgPSBmaWVsZExpc3RbMF0uZm9udENvbG9yO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5mb250Q29sb3IgIT09IGZvbnRDb2xvclZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBmb250Q29sb3JWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBjb21ib2JveExpc3RWYWx1ZSA9IGZpZWxkTGlzdFswXS5jb21ib2JveExpc3Q7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmNvbWJvYm94TGlzdCAhPT0gY29tYm9ib3hMaXN0VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbWJvYm94TGlzdFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGR2T3B0aW9ucyA9IFtdO1xyXG5cclxuICAgICAgICBpZiAoY29tYm9ib3hMaXN0VmFsdWUgIT09ICcnKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbWJvbGlzdCA9IGNvbWJvYm94TGlzdFZhbHVlLnNwbGl0KFwiXFxuXCIpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBjb21ib2xpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKFV0aWxzLmlzU3RyaW5nRW1wdHkoY29tYm9saXN0W2lkeF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBkdk9wdGlvbnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogY29tYm9saXN0W2lkeF0sXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNvbWJvbGlzdFtpZHhdXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZmllbGRJZFZhbHVlID0gZmllbGRMaXN0WzBdLmZpZWxkSWQ7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmZpZWxkSWQgIT09IGZpZWxkSWRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgZmllbGRJZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgQ29tYm9ib3hGaWVsZC5zaG93RmllbGRBdHRyaWJ1dGUobm9kZSxcclxuICAgICAgICAgICAgaWRWYWx1ZSwgZmllbGRJZFZhbHVlLCByZXF1aXJlZFZhbHVlLCBvd25lcklkVmFsdWUsIGR2VmFsdWUsIGZvbnRGYW1pbHlOYW1lVmFsdWUsIGZvbnRTaXplVmFsdWUsIHRleHRBbGlnblZhbHVlLCBib2xkVmFsdWUsIGZvbnRDb2xvclZhbHVlLCBjb21ib2JveExpc3RWYWx1ZSxcclxuICAgICAgICAgICAgdXNlckxpc3QsIGR2T3B0aW9ucyxcclxuICAgICAgICAgICAgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgIH1cclxuXHJcbiAgICB2YWxpZGF0ZVZhbHVlKHByb3BlcnR5TmFtZSwgdmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbn1cclxuIiwiXHJcbi8qKlxyXG4gKiBAbW9kdWxlIFRlbXBsYXRlL0ZpZWxkXHJcbiovXHJcblxyXG5pbXBvcnQge1RleHRCYXNlRmllbGR9IGZyb20gJy4vVGV4dEJhc2VGaWVsZCc7XHJcbmltcG9ydCB7VXRpbHN9IGZyb20gJy4vLi4vdXRpbHMvdXRpbHMuanMnO1xyXG5pbXBvcnQge0NPTlNUQU5UU30gZnJvbSAnLi8uLi9Db25zdGFudHMuanMnO1xyXG5pbXBvcnQgQ1AgZnJvbSAnLi8uLi91dGlscy9jb2xvci1waWNrZXInO1xyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiDrgqDsp5wg7ZWE65OcIENsYXNzXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGZpZWxkTmFtZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkRhdGVGaWVsZCNmaWVsZE5hbWV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNob3dGaWVsZEF0dHJpYnV0ZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkRhdGVGaWVsZCNzaG93RmllbGRBdHRyaWJ1dGV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNob3dGaWVsZHNBdHRyaWJ1dGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5EYXRlRmllbGQjc2hvd0ZpZWxkc0F0dHJpYnV0ZX1cclxuICogXHJcbiAqIEBhdWdtZW50cyBUZXh0QmFzZUZpZWxkIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuVGV4dEJhc2VGaWVsZCNUZXh0QmFzZUZpZWxkfVxyXG4gKiBARmlsZU5hbWUgRGF0ZUZpZWxkLmpzXHJcbiAqIEBzaW5jZSAyMDIxLjA1LjMxXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRGF0ZUZpZWxkIGV4dGVuZHMgVGV4dEJhc2VGaWVsZCB7XHJcbiAgICAvKipcclxuICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICogQHBhcmFtIGlkIO2VhOuTnOydmCBJRFxyXG4gICAgICogQHBhcmFtIHBhZ2VObyDtlYTrk5zqsIAg7IaN7ZWcIO2OmOydtOyngCDrsojtmLhcclxuICAgICAqIEBwYXJhbSB4IO2VhOuTnOydmCBzdmfsg4HsnZggeOyijO2RnFxyXG4gICAgICogQHBhcmFtIHkg7ZWE65Oc7J2YIHN2Z+yDgeydmCB57KKM7ZGcXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihpZCwgcGFnZU5vLCB4LCB5KSB7XHJcbiAgICAgICAgc3VwZXIoaWQsIHBhZ2VObywgeCwgeSwgRGF0ZUZpZWxkLndpZHRoVmFsdWUoKSwgRGF0ZUZpZWxkLmhlaWdodFZhbHVlKCkpO1xyXG4gICAgICAgIHRoaXMubV90eXBlID0gRGF0ZUZpZWxkLmZpZWxkTmFtZSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMubV9raW5kID0gVXRpbHMudHJhbnNsYXRlRm9yS2V5KFwiVGVtcGxhdGUuZGF0ZUZpZWxkVG9vbFwiKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuRGF0ZUZpZWxkI21faW5wdXRNYXhcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24g64Kg7Kec7J2YIOy1nOuMgOqwklxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIGlucHV0TWF4KClcclxuICAgICAgICAgKiAvLyBzZXR0ZXIgaW5wdXRNYXgodmFsKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubV9pbnB1dE1heCA9IFwiXCI7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkRhdGVGaWVsZCNtX2lucHV0TWluXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIOuCoOynnOydmCDstZzshozqsJJcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciBpbnB1dE1pbigpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIGlucHV0TWluKHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1faW5wdXRNaW4gPSBcIlwiO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5EYXRlRmllbGQjbV91c2VDdXJyZW50RGF0ZVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiAg7ZiE7J6sIOuCoOynnOulvCDquLDrs7jqsJLsnLzroZwg7IKs7Jqp7ZWgIOyngCDsl6zrtoBcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciB1c2VDdXJyZW50RGF0ZSgpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIHVzZUN1cnJlbnREYXRlKHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1fdXNlQ3VycmVudERhdGUgPSBcInRydWVcIjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuRGF0ZUZpZWxkI21faW5wdXRGb3JtYXRcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gIOuCoOynnCDtj6zrqadcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciBpbnB1dEZvcm1hdCgpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIGlucHV0Rm9ybWF0KHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1faW5wdXRGb3JtYXQgPSBcIlktbS1kXCI7XHJcbiAgICAgICAgaWYgKFV0aWxzLmlzU3RyaW5nRW1wdHkoaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tX2ZpZWxkSWQgPSB0aGlzLm1faWQucmVwbGFjZSh0aGlzLm1fdHlwZSwgdGhpcy5tX2tpbmQgKyBcIi1cIik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gZmllbGROYW1lXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuRGF0ZUZpZWxkI2ZpZWxkTmFtZVxyXG4gICAgICogQHJldHVybiB7U3RyaW5nfVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOuTnCDtg4DsnoXsnZgg7J2066aEXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZmllbGROYW1lKCkge1xyXG4gICAgICAgIHJldHVybiBcIkRhdGVGaWVsZFwiO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBhbmNlc3RvcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFtcIkRGXCIsIFwiVEJGXCIsIFwiQkZcIl07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlucHV0Rm9ybWF0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1faW5wdXRGb3JtYXQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGlucHV0Rm9ybWF0KF9faW5wdXRGb3JtYXQpIHtcclxuICAgICAgICB0aGlzLm1faW5wdXRGb3JtYXQgPSBfX2lucHV0Rm9ybWF0O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpbnB1dE1heCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX2lucHV0TWF4O1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBpbnB1dE1heChfX2lucHV0TWF4KSB7XHJcbiAgICAgICAgdGhpcy5tX2lucHV0TWF4ID0gX19pbnB1dE1heDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaW5wdXRNaW4oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV9pbnB1dE1pbjtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgaW5wdXRNaW4oX19pbnB1dE1pbikge1xyXG4gICAgICAgIHRoaXMubV9pbnB1dE1pbiA9IF9faW5wdXRNaW47XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHVzZUN1cnJlbnREYXRlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fdXNlQ3VycmVudERhdGU7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHVzZUN1cnJlbnREYXRlKF9fdXNlQ3VycmVudERhdGUpIHtcclxuICAgICAgICB0aGlzLm1fdXNlQ3VycmVudERhdGUgPSBfX3VzZUN1cnJlbnREYXRlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIHNob3dGaWVsZEF0dHJpYnV0ZVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkRhdGVGaWVsZCNzaG93RmllbGRBdHRyaWJ1dGVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSAg7ZWE65Oc7J2YIOyGjeyEsSDtjJ3sl4XssL3snYQg7ISk7KCV7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7SFRNTH0gbm9kZSAg7IaN7ISxIO2MneyXhSBOb2RlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gaWRWYWx1ZSAgICAg7ZWE65Oc7J2YIGlk6rCSXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcmVxdWlyZWRWYWx1ZSAgICAg7ZWE7IiY7Jes67aAIOqwklxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG93bmVySWRWYWx1ZSAgICAg7ISc66qF7J6QIOyVhOydtOuUlFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGlucHV0Rm9ybWF0VmFsdWUgICAgIOuCoOynnCDtmJXsi51cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB1c2VDdXJyZW50RGF0ZVZhbHVlICAgICDtmITsnqwg64Kg7Kec66W8IOyTsOuKlOyngCDsl6zrtoBcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmb250RmFtaWx5TmFtZVZhbHVlICAgICDtj7Dtirgg7J2066aEXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZm9udFNpemVWYWx1ZSAgICAg7Y+w7Yq4IO2BrOq4sCDqsJJcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0QWxpZ25WYWx1ZSAgICAg7YWN7Iqk7Yq4IOqwgOuhnCDsoJXroKwg6rCSXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gYm9sZFZhbHVlICAgICDtj7Dtirgg67O865OcIOyXrOu2gFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZvbnRDb2xvclZhbHVlICAgICDtj7Dtirgg7Lm86528XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY29tYm9ib3hMaXN0VmFsdWUgICAg7L2k67O067CV7IqkIOumrOyKpO2KuOyXkCDrk6TslrTqsIDripQg66as7Iqk7Yq4IOqwklxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gdXNlckxpc3QgICDshJzrqoXsnpAg66as7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBkdk9wdGlvbkxpc3QgICDquLDrs7jqsJIg7ISg7YOdIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtDYWxsYmFja30gY2hhbmdlRXZlbnRGdW5jICAgIOyGjeyEseqwkuydtCDrs4DtlaDrlYwg7Zi47Lac65CY64qUIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBzaG93RmllbGRBdHRyaWJ1dGUobm9kZSxcclxuICAgICAgICBpZFZhbHVlLCBmaWVsZElkVmFsdWUsIHJlcXVpcmVkVmFsdWUsIG93bmVySWRWYWx1ZSwgaW5wdXRGb3JtYXRWYWx1ZSwgdXNlQ3VycmVudERhdGVWYWx1ZSxcclxuICAgICAgICBmb250RmFtaWx5TmFtZVZhbHVlLCBmb250U2l6ZVZhbHVlLCB0ZXh0QWxpZ25WYWx1ZSwgYm9sZFZhbHVlLCBmb250Q29sb3JWYWx1ZSxcclxuICAgICAgICB1c2VyTGlzdCxcclxuICAgICAgICBjaGFuZ2VFdmVudEZ1bmMpIHtcclxuICAgICAgICB2YXIgcGFuZWwgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVQYW5lbE5vZGUoKTtcclxuXHJcbiAgICAgICAgdmFyIHJlcXVpcmVSb3cgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVUb2dnbGVCdXR0b25Ob2RlKGlkVmFsdWUsIFwicmVxdWlyZWRcIiwgXCJUZW1wbGF0ZS5pc1JlcXVpcmVkXCIsIHJlcXVpcmVkVmFsdWUsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQocmVxdWlyZVJvdyk7XHJcblxyXG4gICAgICAgIGxldCB1c2VEZWZhdWxPcHRpb25Ob2RlID0gVXRpbHMuZ2V0VXNlckluZm9PcHRzTGlzdENvdW50KCkgIT09IDE7XHJcbiAgICAgICAgdmFyIG93bmVyU2VsZWN0Um93ID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlU2VsZWN0Tm9kZShpZFZhbHVlLCBcIm93bmVySWRcIiwgdXNlckxpc3QsIFwiXCIsIHVzZURlZmF1bE9wdGlvbk5vZGUpO1xyXG4gICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKG93bmVyU2VsZWN0Um93KTtcclxuXHJcbiAgICAgICAgbGV0IG93bmVyU2VsZWN0ID0gb3duZXJTZWxlY3RSb3cucXVlcnlTZWxlY3RvcihcInNlbGVjdFwiKTtcclxuICAgICAgICAkKG93bmVyU2VsZWN0KS5zZWxlY3QyKHtcclxuICAgICAgICAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxyXG4gICAgICAgICAgICB3aWR0aDogXCIxMDAlXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKG93bmVyU2VsZWN0KS52YWwob3duZXJJZFZhbHVlKS50cmlnZ2VyKFwiY2hhbmdlXCIpO1xyXG4gICAgICAgICQob3duZXJTZWxlY3QpLm9uKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcblxyXG4gICAgICAgIHZhciBmb250QXR0clJvdyA9IFV0aWxzLmNyZWF0ZVRleHRBdHRyYnV0ZU5vZGUoaWRWYWx1ZSwgZm9udENvbG9yVmFsdWUsIHRleHRBbGlnblZhbHVlLCBib2xkVmFsdWUsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQoZm9udEF0dHJSb3cucm93KTtcclxuXHJcbiAgICAgICAgbGV0IGZvbnRGYW1pbHlDb21ib1NlbGVjdCA9IGZvbnRBdHRyUm93LmZvbnRGYW1pbHlDb21iby5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xyXG4gICAgICAgICQoZm9udEZhbWlseUNvbWJvU2VsZWN0KS5zZWxlY3QyKHtcclxuICAgICAgICAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxyXG4gICAgICAgICAgICB3aWR0aDogXCIxMDAlXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGZvbnRGYW1pbHlDb21ib1NlbGVjdCkudmFsKGZvbnRGYW1pbHlOYW1lVmFsdWUpLnRyaWdnZXIoXCJjaGFuZ2VcIik7XHJcbiAgICAgICAgJChmb250RmFtaWx5Q29tYm9TZWxlY3QpLm9uKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgbGV0IGZvbnRTaXplQ29tYm9TZWxlY3QgPSBmb250QXR0clJvdy5mb250U2l6ZUNvbWJvLnF1ZXJ5U2VsZWN0b3IoXCJzZWxlY3RcIik7XHJcbiAgICAgICAgJChmb250U2l6ZUNvbWJvU2VsZWN0KS5zZWxlY3QyKHtcclxuICAgICAgICAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxyXG4gICAgICAgICAgICB3aWR0aDogXCIxMDAlXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGZvbnRTaXplQ29tYm9TZWxlY3QpLnZhbChmb250U2l6ZVZhbHVlKS50cmlnZ2VyKFwiY2hhbmdlXCIpO1xyXG4gICAgICAgICQoZm9udFNpemVDb21ib1NlbGVjdCkub24oXCJjaGFuZ2VcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuXHJcbiAgICAgICAgbGV0IGNvbG9ySW5wdXQgPSBmb250QXR0clJvdy5jb2xvckJ0bi5xdWVyeVNlbGVjdG9yKFwiYnV0dG9uXCIpO1xyXG4gICAgICAgIGNvbG9ySW5wdXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gZm9udENvbG9yVmFsdWU7XHJcbiAgICAgICAgbGV0IHBpY2tlciA9IG5ldyBDUChjb2xvcklucHV0LCB7IGNvbG9yOiBmb250Q29sb3JWYWx1ZSB9KTtcclxuICAgICAgICBjb2xvcklucHV0LnZhbHVlID0gZm9udENvbG9yVmFsdWU7XHJcbiAgICAgICAgcGlja2VyLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAociwgZywgYiwgYSkge1xyXG4gICAgICAgICAgICBpZiAoIXBpY2tlci52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29sb3JJbnB1dC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBDUC5IRVgoW3IsIGcsIGIsIGFdKTtcclxuICAgICAgICAgICAgY29sb3JJbnB1dC52YWx1ZSA9IENQLkhFWChbciwgZywgYiwgYV0pO1xyXG5cclxuICAgICAgICAgICAgbGV0IGNvbG9yVGV4dElucHV0ID0gZm9udEF0dHJSb3cuY29sb3JCdG4ucXVlcnlTZWxlY3RvcihcImlucHV0W3R5cGU9J3RleHQnXVwiKTtcclxuICAgICAgICAgICAgY29sb3JUZXh0SW5wdXQudmFsdWUgPSAoQ1AuSEVYKFtyLCBnLCBiLCBhXSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBpY2tlci5vbignZXhpdCcsIGZ1bmN0aW9uIChyLCBnLCBiLCBhKSB7XHJcbiAgICAgICAgICAgIGNvbG9ySW5wdXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gQ1AuSEVYKFtyLCBnLCBiLCBhXSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgY29sb3JUZXh0SW5wdXQgPSBmb250QXR0clJvdy5jb2xvckJ0bi5xdWVyeVNlbGVjdG9yKFwiaW5wdXRbdHlwZT0ndGV4dCddXCIpO1xyXG4gICAgICAgICAgICBjb2xvclRleHRJbnB1dC52YWx1ZSA9IChDUC5IRVgoW3IsIGcsIGIsIGFdKSk7XHJcbiAgICAgICAgICAgIGNvbG9yVGV4dElucHV0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiY2hhbmdlXCIpKTtcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIHZhciBmaWVsZElkVmFsdWVSb3cgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVJbnB1dE5vZGUoaWRWYWx1ZSwgXCJmaWVsZElkXCIsIFwiVGVtcGxhdGUuZmllbGRJZFRleHRcIiwgZmllbGRJZFZhbHVlLCBcIlwiLCBcIlwiLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG4gICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKGZpZWxkSWRWYWx1ZVJvdyk7XHJcblxyXG4gICAgICAgIHZhciBpbnB1dEZvcm1hdFJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVNlbGVjdE5vZGUoaWRWYWx1ZSwgXCJpbnB1dEZvcm1hdFwiLCBVdGlscy5kYXRlRm9ybWF0Q29tYm9Cb3gsIFwiVGVtcGxhdGUuZGF0ZUZvcm1hdFRleHRcIiwgZmFsc2UpO1xyXG4gICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKGlucHV0Rm9ybWF0Um93KTtcclxuXHJcbiAgICAgICAgbGV0IGlucHV0Rm9ybWF0U2VsZWN0ID0gaW5wdXRGb3JtYXRSb3cucXVlcnlTZWxlY3RvcihcInNlbGVjdFwiKTtcclxuICAgICAgICAkKGlucHV0Rm9ybWF0U2VsZWN0KS5zZWxlY3QyKHtcclxuICAgICAgICAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxyXG4gICAgICAgICAgICB3aWR0aDogXCIxMDAlXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGlucHV0Rm9ybWF0U2VsZWN0KS52YWwoaW5wdXRGb3JtYXRWYWx1ZSkudHJpZ2dlcihcImNoYW5nZVwiKTtcclxuICAgICAgICAkKGlucHV0Rm9ybWF0U2VsZWN0KS5vbihcImNoYW5nZVwiLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG5cclxuICAgICAgICB2YXIgdXNlQ3VycmVudFJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZUNoZWNrQm94Tm9kZShpZFZhbHVlLCBcInVzZUN1cnJlbnREYXRlXCIsIFwiVGVtcGxhdGUudXNlQ3VycmVudERhdGVUZXh0XCIsIHVzZUN1cnJlbnREYXRlVmFsdWUsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQodXNlQ3VycmVudFJvdyk7XHJcblxyXG4gICAgICAgIHBhbmVsLnNldEF0dHJpYnV0ZShcIkZpZWxkLWlkLWxpc3RcIiwgaWRWYWx1ZSk7XHJcbiAgICAgICAgbm9kZS5jbGFzc05hbWUgPSBcIkVkaXRvci1BdHRyaWJ1dGVcIjtcclxuICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoXCJUZXh0LUZpZWxkXCIpO1xyXG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQocGFuZWwpO1xyXG4gICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gc2hvd0ZpZWxkc0F0dHJpYnV0ZVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkRhdGVGaWVsZCNzaG93RmllbGRzQXR0cmlidXRlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgIO2VhOuTnOydmCDsho3shLEg7Yyd7JeF7LC97J2EIOyEpOygle2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0hUTUx9IG93bmVyTm9kZSAg7IaN7ISxIO2MneyXhSBOb2RlXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBmaWVsZExpc3QgICAgIO2VhOuTnOuTpOydmCDrpqzsiqTtirhcclxuICAgICAqIEBwYXJhbSB7SFRNTH0gYXR0ck5vZGUgICAg7IaN7ISxIO2MneyXheydmCBOb2RlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWFpbkdyb3VwICAgIFNWR+ydmCDrqZTsnbggRWxlbWVudFxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gdXNlckxpc3QgICDshJzrqoXsnpAg66as7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBkdk9wdGlvbkxpc3QgICDquLDrs7jqsJIg7ISg7YOdIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtDYWxsYmFja30gY2hhbmdlRXZlbnRGdW5jICAgIOyGjeyEseqwkuydtCDrs4DtlaDrlYwg7Zi47Lac65CY64qUIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBzaG93RmllbGRzQXR0cmlidXRlKG93bmVyTm9kZSwgZmllbGRMaXN0LCBhdHRyTm9kZSwgbWFpbkdyb3VwLCB1c2VyTGlzdCwgZHZPcHRpb25MaXN0LCBjaGFuZ2VFdmVudEZ1bmMpIHtcclxuICAgICAgICBsZXQgbm9kZSA9IGF0dHJOb2RlO1xyXG4gICAgICAgIGlmIChhdHRyTm9kZSA9PT0gbnVsbCB8fCBVdGlscy5pc0VtcHR5T2JqZWN0KGF0dHJOb2RlKSkge1xyXG4gICAgICAgICAgICBjb25zdCBiYm94ID0gVXRpbHMubWVyZ2VGaWVsZHNCQm94KGZpZWxkTGlzdCk7XHJcbiAgICAgICAgICAgIG5vZGUgPSBVdGlscy5jcmVhdGVBdHRyYnV0ZVBvcHVwKG93bmVyTm9kZSwgYmJveCk7XHJcbiAgICAgICAgICAgIFV0aWxzLnJlcG9zaXRpb25GaWVsZERlbGV0ZUJ0bihvd25lck5vZGUsIGJib3gueCwgYmJveC55LCBiYm94LndpZHRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgVXRpbHMucmVtb3ZlQWxsQ2hpbGROb2RlKG5vZGUpO1xyXG5cclxuICAgICAgICB2YXIgaWRWYWx1ZUFyciA9IFtdO1xyXG4gICAgICAgIGZpZWxkTGlzdC5mb3JFYWNoKChmaWVsZCkgPT4ge1xyXG4gICAgICAgICAgICBpZFZhbHVlQXJyLnB1c2goZmllbGQuaWQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgaWRWYWx1ZSA9IGlkVmFsdWVBcnIuam9pbigpO1xyXG5cclxuICAgICAgICB2YXIgb3duZXJJZFZhbHVlID0gZmllbGRMaXN0WzBdLm93bmVySWQ7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLm93bmVySWQgIT09IG93bmVySWRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgb3duZXJJZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHJlcXVpcmVkVmFsdWUgPSBmaWVsZExpc3RbMF0ucmVxdWlyZWQ7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLnJlcXVpcmVkICE9PSByZXF1aXJlZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICByZXF1aXJlZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGlkVmFsdWUgPSBpZFZhbHVlQXJyLmpvaW4oKTtcclxuICAgICAgICB2YXIgZmllbGRJZFZhbHVlID0gZmllbGRMaXN0WzBdLmZpZWxkSWQ7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmZpZWxkSWQgIT09IGZpZWxkSWRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgZmllbGRJZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGZvbnRGYW1pbHlOYW1lVmFsdWUgPSBmaWVsZExpc3RbMF0uZm9udE5hbWU7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmZvbnROYW1lICE9PSBmb250RmFtaWx5TmFtZVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBmb250RmFtaWx5TmFtZVZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZm9udFNpemVWYWx1ZSA9IGZpZWxkTGlzdFswXS5mb250U2l6ZTtcclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0uZm9udFNpemUgIT09IGZvbnRTaXplVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplVmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgdGV4dEFsaWduVmFsdWUgPSBmaWVsZExpc3RbMF0udGV4dEFsaWduO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS50ZXh0QWxpZ24gIT09IHRleHRBbGlnblZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QWxpZ25WYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBib2xkVmFsdWUgPSBmaWVsZExpc3RbMF0uaXNCb2xkO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5pc0JvbGQgIT09IGJvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgYm9sZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZm9udENvbG9yVmFsdWUgPSBmaWVsZExpc3RbMF0uZm9udENvbG9yO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5mb250Q29sb3IgIT09IGZvbnRDb2xvclZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBmb250Q29sb3JWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGlucHV0Rm9ybWF0VmFsdWUgPSBmaWVsZExpc3RbMF0uaW5wdXRGb3JtYXQ7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmlucHV0Rm9ybWF0ICE9PSBpbnB1dEZvcm1hdFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dEZvcm1hdFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHVzZUN1cnJlbnREYXRlVmFsdWUgPSBmaWVsZExpc3RbMF0udXNlQ3VycmVudERhdGU7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLnVzZUN1cnJlbnREYXRlICE9PSB1c2VDdXJyZW50RGF0ZVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB1c2VDdXJyZW50RGF0ZVZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGZpZWxkSWRWYWx1ZSA9IGZpZWxkTGlzdFswXS5maWVsZElkO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5maWVsZElkICE9PSBmaWVsZElkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGZpZWxkSWRWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIERhdGVGaWVsZC5zaG93RmllbGRBdHRyaWJ1dGUobm9kZSxcclxuICAgICAgICAgICAgaWRWYWx1ZSwgZmllbGRJZFZhbHVlLCByZXF1aXJlZFZhbHVlLCBvd25lcklkVmFsdWUsIGlucHV0Rm9ybWF0VmFsdWUsIHVzZUN1cnJlbnREYXRlVmFsdWUsXHJcbiAgICAgICAgICAgIGZvbnRGYW1pbHlOYW1lVmFsdWUsIGZvbnRTaXplVmFsdWUsIHRleHRBbGlnblZhbHVlLCBib2xkVmFsdWUsIGZvbnRDb2xvclZhbHVlLFxyXG4gICAgICAgICAgICB1c2VyTGlzdCxcclxuICAgICAgICAgICAgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgIH1cclxufVxyXG4iLCJcclxuLyoqXHJcbiAqIEBtb2R1bGUgVGVtcGxhdGUvRmllbGRcclxuKi9cclxuXHJcbmltcG9ydCB7IEJhc2VGaWVsZCB9IGZyb20gJy4vQmFzZUZpZWxkJztcclxuaW1wb3J0IHtVdGlsc30gZnJvbSAnLi8uLi91dGlscy91dGlscy5qcyc7XHJcbmltcG9ydCB7Q09OU1RBTlRTfSBmcm9tICcuLy4uL0NvbnN0YW50cy5qcyc7XHJcblxyXG4vKipcclxuICogQGRlc2NyaXB0aW9uIOydtOuvuOyngCDtlYTrk5wgQ2xhc3NcclxuICpcclxuICpcclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZmllbGROYW1lIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuSW1hZ2VGaWVsZCNmaWVsZE5hbWV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHdpZHRoVmFsdWUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5JbWFnZUZpZWxkI3dpZHRoVmFsdWV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGhlaWdodFZhbHVlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuSW1hZ2VGaWVsZCNoZWlnaHRWYWx1ZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gbWFrZVNWR1RleHQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5JbWFnZUZpZWxkI21ha2VTVkdUZXh0fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBnZXRTVkdGaWVsZE9iamVjdCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkltYWdlRmllbGQjZ2V0U1ZHRmllbGRPYmplY3R9XHJcbiAqXHJcbiAqIEBhdWdtZW50cyBCYXNlRmllbGQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjQmFzZUZpZWxkfVxyXG4gKiBARmlsZU5hbWUgSW1hZ2VGaWVsZC5qc1xyXG4gKiBAc2luY2UgMjAyMS4wNS4zMVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEltYWdlRmllbGQgZXh0ZW5kcyBCYXNlRmllbGQge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAqIEBwYXJhbSBpZCDtlYTrk5zsnZggSURcclxuICAgICAqIEBwYXJhbSBwYWdlTm8g7ZWE65Oc6rCAIOyGje2VnCDtjpjsnbTsp4Ag67KI7Zi4XHJcbiAgICAgKiBAcGFyYW0geCDtlYTrk5zsnZggc3Zn7IOB7J2YIHjsooztkZxcclxuICAgICAqIEBwYXJhbSB5IO2VhOuTnOydmCBzdmfsg4HsnZggeeyijO2RnFxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoaWQsIHBhZ2VObywgeCwgeSkge1xyXG4gICAgICAgIHN1cGVyKGlkLCBwYWdlTm8sIHgsIHksIEltYWdlRmllbGQud2lkdGhWYWx1ZSgpLCBJbWFnZUZpZWxkLmhlaWdodFZhbHVlKCkpO1xyXG4gICAgICAgIHRoaXMubV90eXBlID0gSW1hZ2VGaWVsZC5maWVsZE5hbWUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5tX2tpbmQgPSBVdGlscy50cmFuc2xhdGVGb3JLZXkoXCJUZW1wbGF0ZS5pbWFnZUZpZWxkVG9vbFwiKTtcclxuXHJcbiAgICAgICAgaWYgKFV0aWxzLmlzU3RyaW5nRW1wdHkoaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tX2ZpZWxkSWQgPSB0aGlzLm1faWQucmVwbGFjZSh0aGlzLm1fdHlwZSwgdGhpcy5tX2tpbmQgKyBcIi1cIik7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIGZpZWxkTmFtZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkltYWdlRmllbGQjZmllbGROYW1lXHJcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE65OcIO2DgOyeheydmCDsnbTrpoRcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBmaWVsZE5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiSW1hZ2VGaWVsZFwiO1xyXG4gICAgfVxyXG5cclxuICAgIFxyXG4gICAgYW5jZXN0b3JzKCkge1xyXG4gICAgICAgIHJldHVybiBbXCJJTUdGXCIsIFwiQkZcIl07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gd2lkdGhWYWx1ZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkltYWdlRmllbGQjd2lkdGhWYWx1ZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOuTnOydmCDstIjquLAg6rCA66GcIOq4uOydtFxyXG4gICAgICogQHJldHVybiB7TnVtYmVyfVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHdpZHRoVmFsdWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIDE1MDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gaGVpZ2h0VmFsdWVcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5JbWFnZUZpZWxkI2hlaWdodFZhbHVlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgIO2VhOuTnOydmCDstIjquLAg7IS466GcIOq4uOydtFxyXG4gICAgICogQHJldHVybiB7TnVtYmVyfVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGhlaWdodFZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybiA2MDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiBnZXRTVkdGaWVsZE9iamVjdFxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkltYWdlRmllbGQjbWFrZVNWR1RleHRcclxuICAgICAqIEBtZW1iZXJPZiBtb2R1bGU6VGVtcGxhdGUvRmllbGQuSW1hZ2VGaWVsZFxyXG4gICAgICogQGRlc2NyaXB0aW9uIO2VhOuTnOydmCDsooXrpZjrpbwg7ZGc7ZiE7ZWY64qUIFNWRyBUZXh0IGVsZW1lbnRcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gc2NhbGUg7ZiE7J6sIFBERuydmCBTY2FsZVxyXG4gICAgICogQHJldHVybiBTVkcgTm9kZSBFbGVtZW50XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIG1ha2VTVkdUZXh0KHNjYWxlKSB7XHJcbiAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5tX2ZpZWxkSWQ7XHJcbiAgICAgICAgdmFyIHRleHRGb250Q29sb3IgPSBcImZpbGw9J1wiICsgdGhpcy5mb250Q29sb3IgKyBcIicgXCI7XHJcblxyXG4gICAgICAgIGxldCB0ZXh0UG9zID0gJyB4PVwiNTAlXCIgIGR5PVwiMC4zNWVtXCIgdGV4dC1hbmNob3I9XCJtaWRkbGVcIiAnXHJcbiAgICAgICAgaWYgKHRoaXMudGV4dEFsaWduID09PSBcImxlZnRcIikge1xyXG4gICAgICAgICAgICB0ZXh0UG9zID0gJyB4PVwiMyVcIiAgZHk9XCIwLjM1ZW1cIiB0ZXh0LWFuY2hvcj1cInN0YXJ0XCIgJztcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGV4dEFsaWduID09PSBcInJpZ2h0XCIpIHtcclxuICAgICAgICAgICAgdGV4dFBvcyA9ICcgeD1cIjk3JVwiIGR5PVwiMC4zNWVtXCIgdGV4dC1hbmNob3I9XCJlbmRcIiAnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHRleHRWZXJ0aWNhbFBvcyA9ICd5PVwiNTAlXCInO1xyXG5cclxuICAgICAgICBsZXQgZm9udEluZm8gPSAnIGZvbnQtc2l6ZT1cIicgKyB0aGlzLmZvbnRTaXplICsgJ3B4XCIgJztcclxuICAgICAgICBsZXQgdGV4dE9iaiA9ICc8dGV4dCcgKyB0ZXh0UG9zICsgdGV4dFZlcnRpY2FsUG9zICsgZm9udEluZm8gKyB0ZXh0Rm9udENvbG9yICsgJz4nICsgdmFsdWUgKyAnPC90ZXh0Pic7XHJcbiAgICAgICAgY29uc3QgZm9iamVjdFNWRyA9ICc8c3ZnIHg9XCInICsgdGhpcy54ICsgJ3B4XCIgeT1cIicgKyB0aGlzLnkgKyAncHhcIiB3aWR0aD1cIicgKyB0aGlzLndpZHRoICogc2NhbGUgK1xyXG4gICAgICAgICAgICAncHhcIiBoZWlnaHQ9XCInICsgdGhpcy5oZWlnaHQgKiBzY2FsZSArICdweFwiPjxnICA+JyArIHRleHRPYmogKyAnPC9nPjwvc3ZnPic7XHJcblxyXG4gICAgICAgIHJldHVybiBmb2JqZWN0U1ZHO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIGdldFNWR0ZpZWxkT2JqZWN0XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuSW1hZ2VGaWVsZCNnZXRTVkdGaWVsZE9iamVjdFxyXG4gICAgICogQG1lbWJlck9mIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5JbWFnZUZpZWxkXHJcbiAgICAgKiBAZGVzY3JpcHRpb24g7ZWE65Oc7J2YIOygleuztOulvCDqsIDsp4Dqs6AgU1ZHIEVsZW1lbnTrpbwg7IOd7ISx7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjYW52YXMgU25hcCBTVkfsnZggQ2FudmFzIE9iamVjdFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG1haW5Hcm91cCAgIFNWR+ydmCDrqZTsnbggTm9kZVxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHNjYWxlICDtmITsnqwgUERG7J2YIFNjYWxlXHJcbiAgICAgKiBAcGFyYW0ge0hUTUx9IG93bmVyTm9kZSAgICDtlbTri7kg7ZSE66Gc7KCd7Yq47J2YIOy1nOyDgeuLqCBFbGVtZW5066W8IOqwkOyLuOqzoCDsnojripQgRWxlbWVudFxyXG4gICAgICogQHBhcmFtIHtDYWxsYmFja30gcmVtb3ZlRHJhZ092ZXJHcm91cEZ1bmMgICAgIOuTnOuemOq3uCDrkJjslrQg7ISg7YOd65CY7Ja07KeEIEZpZWxkIEdyb3Vw7J2EIOygnOqxsO2VmOuKlCBjYWxsYmFjayBmdW5jdGlvblxyXG4gICAgICogQHBhcmFtIHtDYWxsYmFja30gY2hhbmdlVmFsdWVFdmVudEZ1bmMgICAg7IaN7ISx6rCS7J20IOuzgO2VoOuVjCDtmLjstpzrkJjripQgY2FsbGJhY2sgZnVuY3Rpb25cclxuICAgICAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNoYW5nZUZyZWVUcmFuc2Zvcm1GdW5jICAgICBGcmVlVHJhbnNmb3Jt7J2EIOuLpOyLnCDsg53shLHtlZjquLAg7JyE7ZWcIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICAgKiBAcmV0dXJuIFNWRyBOb2RlIEVsZW1lbnRcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgZ2V0U1ZHRmllbGRPYmplY3QoY2FudmFzLCBtYWluR3JvdXAsIHNjYWxlLCBvd25lck5vZGUsIHJlbW92ZURyYWdPdmVyR3JvdXBGdW5jLCBjaGFuZ2VWYWx1ZUV2ZW50RnVuYywgY2hhbmdlRnJlZVRyYW5zZm9ybUZ1bmMsIGJnQ29sb3I9XCIjZmZhYzdmXCIpIHtcclxuICAgICAgICBsZXQgZ3JvdXAgPSBtYWluR3JvdXAuZ3JvdXAoKTtcclxuICAgICAgICBncm91cC5hdHRyKHtcclxuICAgICAgICAgICAgaWQ6IHRoaXMuaWQgKyBcIkdyb3VwXCIsXHJcbiAgICAgICAgICAgIGN1cnNvcjogXCJtb3ZlXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICBsZXQgcmVjdCA9IGNhbnZhcy5yZWN0KHRoaXMueCwgdGhpcy55LCB0aGlzLndpZHRoICogc2NhbGUsIHRoaXMuaGVpZ2h0ICogc2NhbGUpO1xyXG4gICAgICAgIHJlY3QuYXR0cih7XHJcbiAgICAgICAgICAgIGlkOiB0aGlzLmlkLFxyXG4gICAgICAgICAgICBcImZpbGwtb3BhY2l0eVwiOiBcIjAuNlwiLFxyXG4gICAgICAgICAgICBcImZpbGxcIjogYmdDb2xvclxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGdyb3VwLmFwcGVuZChyZWN0KTtcclxuICAgICAgICBjb25zdCBwID0gU25hcC5wYXJzZSh0aGlzLm1ha2VTVkdUZXh0KHNjYWxlKSk7XHJcbiAgICAgICAgZ3JvdXAuYXBwZW5kKHApO1xyXG5cclxuICAgICAgICBncm91cC5ob3ZlcihcclxuICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyAvLyBmX2luXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLy8gZl9vdXRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGxldCBfaW1nRmllbGQgPSB0aGlzO1xyXG4gICAgICAgIGxldCBtb3VzZVBvcyA9IHsgeDogMCwgeTogMCB9O1xyXG4gICAgICAgIGdyb3VwLm1vdXNlZG93bihmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgIG1vdXNlUG9zLnggPSBldnQucGFnZVg7XHJcbiAgICAgICAgICAgIG1vdXNlUG9zLnkgPSBldnQucGFnZVk7XHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gbWFpbkdyb3VwLnNlbGVjdEFsbCgnZycpO1xyXG4gICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCAhPT0gZ3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIVV0aWxzLmlzRW1wdHlPYmplY3QoZWxlbWVudC5mcmVlVHJhbnNmb3JtKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmZyZWVUcmFuc2Zvcm0uaGlkZVJlc2l6ZUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoIVV0aWxzLmlzRW1wdHlPYmplY3QoZ3JvdXAuZnJlZVRyYW5zZm9ybSkpIHtcclxuICAgICAgICAgICAgICAgIGdyb3VwLmZyZWVUcmFuc2Zvcm0uc2hvd1Jlc2l6ZUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNoYW5nZUZyZWVUcmFuc2Zvcm1GdW5jKGdyb3VwLCByZWN0LmF0dHIoXCJ3aWR0aFwiKSwgcmVjdC5hdHRyKFwiaGVpZ2h0XCIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBncm91cC5tb3VzZXVwKGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgaWYgKGdyb3VwLnBhcmVudCgpLmF0dHIoXCJpZFwiKSA9PT0gQ09OU1RBTlRTLkRSQUdfQk9YX05BTUUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb3VzZVBvcy54IC0gZXZ0LnBhZ2VYKSA+IENPTlNUQU5UUy5NSU5JTVVNX0RSQUdfU0laRVxyXG4gICAgICAgICAgICAgICAgICAgIHx8IE1hdGguYWJzKG1vdXNlUG9zLnkgLSBldnQucGFnZVkpID4gQ09OU1RBTlRTLk1JTklNVU1fRFJBR19TSVpFKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVtb3ZlRHJhZ092ZXJHcm91cEZ1bmMuY2FsbCgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBtYWluR3JvdXAuc2VsZWN0QWxsKCdnJyk7XHJcbiAgICAgICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgIT09IGdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghVXRpbHMuaXNFbXB0eU9iamVjdChlbGVtZW50LmZyZWVUcmFuc2Zvcm0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmZyZWVUcmFuc2Zvcm0uaGlkZVJlc2l6ZUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFVdGlscy5pc0VtcHR5T2JqZWN0KGdyb3VwLmZyZWVUcmFuc2Zvcm0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXAuZnJlZVRyYW5zZm9ybS5zaG93UmVzaXplSGFuZGxlcigpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VGcmVlVHJhbnNmb3JtRnVuYyhncm91cCwgcmVjdC5hdHRyKFwid2lkdGhcIiksIHJlY3QuYXR0cihcImhlaWdodFwiKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfaW1nRmllbGQuY29uc3RydWN0b3Iuc2hvd0ZpZWxkc0F0dHJpYnV0ZShvd25lck5vZGUsIFtfaW1nRmllbGRdLCB1bmRlZmluZWQsIG1haW5Hcm91cCwgVXRpbHMuZ2V0VXNlckluZm9PcHRzTGlzdCgpLCBVdGlscy5nZXREVkZpZWxkT3B0c0xpc3QoKSwgY2hhbmdlVmFsdWVFdmVudEZ1bmMpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX2ltZ0ZpZWxkLmNvbnN0cnVjdG9yLnNob3dGaWVsZHNBdHRyaWJ1dGUob3duZXJOb2RlLCBbX2ltZ0ZpZWxkXSwgdW5kZWZpbmVkLCBtYWluR3JvdXAsIFV0aWxzLmdldFVzZXJJbmZvT3B0c0xpc3QoKSwgVXRpbHMuZ2V0RFZGaWVsZE9wdHNMaXN0KCksIGNoYW5nZVZhbHVlRXZlbnRGdW5jKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBncm91cDtcclxuXHJcbiAgICB9XHJcbn1cclxuIiwiXHJcbi8qKlxyXG4gKiBAbW9kdWxlIFRlbXBsYXRlL0ZpZWxkXHJcbiovXHJcblxyXG5pbXBvcnQge1RleHRCYXNlRmllbGR9IGZyb20gJy4vVGV4dEJhc2VGaWVsZCc7XHJcbmltcG9ydCB7VXRpbHN9IGZyb20gJy4vLi4vdXRpbHMvdXRpbHMuanMnO1xyXG5pbXBvcnQge0NPTlNUQU5UU30gZnJvbSAnLi8uLi9Db25zdGFudHMuanMnO1xyXG5pbXBvcnQgQ1AgZnJvbSAnLi8uLi91dGlscy9jb2xvci1waWNrZXInO1xyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiDroIjsnbTruJQg7ZWE65OcIENsYXNzXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGZpZWxkTmFtZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkxhYmVsRmllbGQjZmllbGROYW1lfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBzaG93RmllbGRBdHRyaWJ1dGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5MYWJlbEZpZWxkI3Nob3dGaWVsZEF0dHJpYnV0ZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gc2hvd0ZpZWxkc0F0dHJpYnV0ZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkxhYmVsRmllbGQjc2hvd0ZpZWxkc0F0dHJpYnV0ZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gbWFrZVNWR1RleHQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5MYWJlbEZpZWxkI21ha2VTVkdUZXh0fVxyXG4gKlxyXG4gKiBAYXVnbWVudHMgVGV4dEJhc2VGaWVsZCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRCYXNlRmllbGQjVGV4dEJhc2VGaWVsZH1cclxuICogQEZpbGVOYW1lIExhYmVsRmllbGQuanNcclxuICogQHNpbmNlIDIwMjEuMDUuMzFcclxuICovXHJcbmV4cG9ydCBjbGFzcyBMYWJlbEZpZWxkIGV4dGVuZHMgVGV4dEJhc2VGaWVsZCB7XHJcbiAgICAvKipcclxuICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICogQHBhcmFtIGlkIO2VhOuTnOydmCBJRFxyXG4gICAgICogQHBhcmFtIHBhZ2VObyDtlYTrk5zqsIAg7IaN7ZWcIO2OmOydtOyngCDrsojtmLhcclxuICAgICAqIEBwYXJhbSB4IO2VhOuTnOydmCBzdmfsg4HsnZggeOyijO2RnFxyXG4gICAgICogQHBhcmFtIHkg7ZWE65Oc7J2YIHN2Z+yDgeydmCB57KKM7ZGcXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihpZCwgcGFnZU5vLCB4LCB5KSB7XHJcbiAgICAgICAgc3VwZXIoaWQsIHBhZ2VObywgeCwgeSwgTGFiZWxGaWVsZC53aWR0aFZhbHVlKCksIExhYmVsRmllbGQuaGVpZ2h0VmFsdWUoKSk7XHJcbiAgICAgICAgdGhpcy5tX3R5cGUgPSBMYWJlbEZpZWxkLmZpZWxkTmFtZSgpO1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5tX21heFZhbHVlTGVuZ3RoID0gMTAwO1xyXG5cclxuICAgICAgICB0aGlzLm1fa2luZCA9IFV0aWxzLnRyYW5zbGF0ZUZvcktleShcIlRlbXBsYXRlLmxhYmVsRmllbGRUb29sXCIpO1xyXG4gICAgICAgIGlmIChVdGlscy5pc1N0cmluZ0VtcHR5KGlkKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubV9maWVsZElkID0gdGhpcy5tX2lkLnJlcGxhY2UodGhpcy5tX3R5cGUsIHRoaXMubV9raW5kICsgXCItXCIpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiBmaWVsZE5hbWVcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5MYWJlbEZpZWxkI2ZpZWxkTmFtZVxyXG4gICAgICogQHJldHVybiB7U3RyaW5nfVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOuTnCDtg4DsnoXsnZgg7J2066aEXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZmllbGROYW1lKCkge1xyXG4gICAgICAgIHJldHVybiBcIkxhYmVsRmllbGRcIjtcclxuICAgIH1cclxuXHJcbiAgICBhbmNlc3RvcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFtcIkxGXCIsIFwiVEJGXCIsIFwiQkZcIl07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gc2hvd0ZpZWxkQXR0cmlidXRlXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuTGFiZWxGaWVsZCNzaG93RmllbGRBdHRyaWJ1dGVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtlYTrk5zsnZgg7IaN7ISxIO2MneyXheywveydhCDshKTsoJXtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtIVE1MfSBub2RlICAg7IaN7ISxIO2MneyXhSBOb2RlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gaWRWYWx1ZSAgICAg7ZWE65Oc7J2YIGlk6rCSXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcmVxdWlyZWRWYWx1ZSAgICAg7ZWE7IiY7Jes67aAIOqwklxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG93bmVySWRWYWx1ZSAgICAg7ISc66qF7J6QIOyVhOydtOuUlFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGR2VmFsdWUgICAgIOq4sOuzuOqwklxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZvbnRGYW1pbHlOYW1lVmFsdWUgICAgIO2PsO2KuCDsnbTrpoRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmb250U2l6ZVZhbHVlICAgICDtj7Dtirgg7YGs6riwIOqwklxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRleHRBbGlnblZhbHVlICAgICDthY3siqTtirgg6rCA66GcIOygleugrCDqsJJcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBib2xkVmFsdWUgICAgIO2PsO2KuCDrs7zrk5wg7Jes67aAXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZm9udENvbG9yVmFsdWUgICAgIO2PsO2KuCDsubzrnbxcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZFZhbHVlICAgIOugiOydtOu4lCDthY3siqTtirhcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHVzZXJMaXN0ICAg7ISc66qF7J6QIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gZHZPcHRpb25MaXN0ICAg6riw67O46rCSIOyEoO2DnSDrpqzsiqTtirhcclxuICAgICAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNoYW5nZUV2ZW50RnVuYyAgICDsho3shLHqsJLsnbQg67OA7ZWg65WMIO2YuOy2nOuQmOuKlCBjYWxsYmFjayBmdW5jdGlvblxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgc2hvd0ZpZWxkQXR0cmlidXRlKG5vZGUsXHJcbiAgICAgICAgaWRWYWx1ZSwgZmllbGRJZFZhbHVlLCByZXF1aXJlZFZhbHVlLCBvd25lcklkVmFsdWUsIGR2VmFsdWUsIGZvbnRGYW1pbHlOYW1lVmFsdWUsIGZvbnRTaXplVmFsdWUsIHRleHRBbGlnblZhbHVlLCBib2xkVmFsdWUsIGZvbnRDb2xvclZhbHVlLCBmaWVsZFZhbHVlLFxyXG4gICAgICAgIHVzZXJMaXN0LCBkdk9wdGlvbkxpc3QsXHJcbiAgICAgICAgY2hhbmdlRXZlbnRGdW5jKSB7XHJcblxyXG4gICAgICAgIHZhciBwYW5lbCA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVBhbmVsTm9kZSgpO1xyXG5cclxuICAgICAgICB2YXIgcmVxdWlyZVJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVRvZ2dsZUJ1dHRvbk5vZGUoaWRWYWx1ZSwgXCJyZXF1aXJlZFwiLCBcIlRlbXBsYXRlLmlzUmVxdWlyZWRcIiwgcmVxdWlyZWRWYWx1ZSwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChyZXF1aXJlUm93KTtcclxuXHJcbiAgICAgICAgbGV0IHVzZURlZmF1bE9wdGlvbk5vZGUgPSBVdGlscy5nZXRVc2VySW5mb09wdHNMaXN0Q291bnQoKSAhPT0gMTtcclxuICAgICAgICB2YXIgb3duZXJTZWxlY3RSb3cgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVTZWxlY3ROb2RlKGlkVmFsdWUsIFwib3duZXJJZFwiLCB1c2VyTGlzdCwgXCJcIiwgdXNlRGVmYXVsT3B0aW9uTm9kZSk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQob3duZXJTZWxlY3RSb3cpO1xyXG5cclxuICAgICAgICBsZXQgb3duZXJTZWxlY3QgPSBvd25lclNlbGVjdFJvdy5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xyXG4gICAgICAgIGpRdWVyeShvd25lclNlbGVjdCkuc2VsZWN0Mih7XHJcbiAgICAgICAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcclxuICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgalF1ZXJ5KG93bmVyU2VsZWN0KS52YWwob3duZXJJZFZhbHVlKS50cmlnZ2VyKFwiY2hhbmdlXCIpO1xyXG4gICAgICAgIGpRdWVyeShvd25lclNlbGVjdCkub24oXCJjaGFuZ2VcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuXHJcbiAgICAgICAgLy8xMi0yOFxyXG4gICAgICAgIGlmIChkdk9wdGlvbkxpc3QgJiYgQXJyYXkuaXNBcnJheShkdk9wdGlvbkxpc3QpICYmIGR2T3B0aW9uTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciBkZWZhdWx0VmFsdWVSb3cgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVTZWxlY3ROb2RlKGlkVmFsdWUsIFwiZGVmYXVsdFZhbHVlXCIsIGR2T3B0aW9uTGlzdCwgXCJUZW1wbGF0ZS5kZWZhdWx0VmFsdWVUZXh0XCIsIHRydWUpO1xyXG4gICAgICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChkZWZhdWx0VmFsdWVSb3cpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGRlZmF1bHRWYWx1ZVNlbGVjdCA9IGRlZmF1bHRWYWx1ZVJvdy5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xyXG4gICAgICAgICAgICAkKGRlZmF1bHRWYWx1ZVNlbGVjdCkuc2VsZWN0Mih7XHJcbiAgICAgICAgICAgICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogXCIxMDAlXCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICQoZGVmYXVsdFZhbHVlU2VsZWN0KS52YWwoZHZWYWx1ZSkudHJpZ2dlcihcImNoYW5nZVwiKTtcclxuICAgICAgICAgICAgJChkZWZhdWx0VmFsdWVTZWxlY3QpLm9uKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZmllbGRJZFZhbHVlUm93ID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlSW5wdXROb2RlKGlkVmFsdWUsIFwiZmllbGRJZFwiLCBcIlRlbXBsYXRlLmZpZWxkSWRUZXh0XCIsIGZpZWxkSWRWYWx1ZSwgXCJcIiwgXCJcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChmaWVsZElkVmFsdWVSb3cpO1xyXG5cclxuICAgICAgICB2YXIgZmllbGRWYWx1ZVJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZUlucHV0Tm9kZShpZFZhbHVlLCBcInZhbHVlXCIsIFwiVGVtcGxhdGUubGFiZWxWYWx1ZVRleHRcIiwgZmllbGRWYWx1ZSwgXCJcIiwgXCJcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChmaWVsZFZhbHVlUm93KTtcclxuXHJcbiAgICAgICAgdmFyIGZvbnRBdHRyUm93ID0gVXRpbHMuY3JlYXRlVGV4dEF0dHJidXRlTm9kZShpZFZhbHVlLCBmb250Q29sb3JWYWx1ZSwgdGV4dEFsaWduVmFsdWUsIGJvbGRWYWx1ZSwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChmb250QXR0clJvdy5yb3cpO1xyXG5cclxuICAgICAgICBsZXQgZm9udEZhbWlseUNvbWJvU2VsZWN0ID0gZm9udEF0dHJSb3cuZm9udEZhbWlseUNvbWJvLnF1ZXJ5U2VsZWN0b3IoXCJzZWxlY3RcIik7XHJcbiAgICAgICAgJChmb250RmFtaWx5Q29tYm9TZWxlY3QpLnNlbGVjdDIoe1xyXG4gICAgICAgICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXHJcbiAgICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZm9udEZhbWlseUNvbWJvU2VsZWN0KS52YWwoZm9udEZhbWlseU5hbWVWYWx1ZSkudHJpZ2dlcihcImNoYW5nZVwiKTtcclxuICAgICAgICAkKGZvbnRGYW1pbHlDb21ib1NlbGVjdCkub24oXCJjaGFuZ2VcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgICAgICBsZXQgZm9udFNpemVDb21ib1NlbGVjdCA9IGZvbnRBdHRyUm93LmZvbnRTaXplQ29tYm8ucXVlcnlTZWxlY3RvcihcInNlbGVjdFwiKTtcclxuICAgICAgICAkKGZvbnRTaXplQ29tYm9TZWxlY3QpLnNlbGVjdDIoe1xyXG4gICAgICAgICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXHJcbiAgICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZm9udFNpemVDb21ib1NlbGVjdCkudmFsKGZvbnRTaXplVmFsdWUpLnRyaWdnZXIoXCJjaGFuZ2VcIik7XHJcbiAgICAgICAgJChmb250U2l6ZUNvbWJvU2VsZWN0KS5vbihcImNoYW5nZVwiLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG5cclxuICAgICAgICBsZXQgY29sb3JJbnB1dCA9IGZvbnRBdHRyUm93LmNvbG9yQnRuLnF1ZXJ5U2VsZWN0b3IoXCJidXR0b25cIik7XHJcbiAgICAgICAgY29sb3JJbnB1dC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBmb250Q29sb3JWYWx1ZTtcclxuICAgICAgICBsZXQgcGlja2VyID0gbmV3IENQKGNvbG9ySW5wdXQsIHsgY29sb3I6IGZvbnRDb2xvclZhbHVlIH0pO1xyXG4gICAgICAgIGNvbG9ySW5wdXQudmFsdWUgPSBmb250Q29sb3JWYWx1ZTtcclxuICAgICAgICBwaWNrZXIub24oJ2NoYW5nZScsIGZ1bmN0aW9uIChyLCBnLCBiLCBhKSB7XHJcbiAgICAgICAgICAgIGlmICghcGlja2VyLnZpc2libGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb2xvcklucHV0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IENQLkhFWChbciwgZywgYiwgYV0pO1xyXG4gICAgICAgICAgICBjb2xvcklucHV0LnZhbHVlID0gQ1AuSEVYKFtyLCBnLCBiLCBhXSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgY29sb3JUZXh0SW5wdXQgPSBmb250QXR0clJvdy5jb2xvckJ0bi5xdWVyeVNlbGVjdG9yKFwiaW5wdXRbdHlwZT0ndGV4dCddXCIpO1xyXG4gICAgICAgICAgICBjb2xvclRleHRJbnB1dC52YWx1ZSA9IChDUC5IRVgoW3IsIGcsIGIsIGFdKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcGlja2VyLm9uKCdleGl0JywgZnVuY3Rpb24gKHIsIGcsIGIsIGEpIHtcclxuICAgICAgICAgICAgY29sb3JJbnB1dC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBDUC5IRVgoW3IsIGcsIGIsIGFdKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBjb2xvclRleHRJbnB1dCA9IGZvbnRBdHRyUm93LmNvbG9yQnRuLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFt0eXBlPSd0ZXh0J11cIik7XHJcbiAgICAgICAgICAgIGNvbG9yVGV4dElucHV0LnZhbHVlID0gKENQLkhFWChbciwgZywgYiwgYV0pKTtcclxuICAgICAgICAgICAgY29sb3JUZXh0SW5wdXQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJjaGFuZ2VcIikpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBwYW5lbC5zZXRBdHRyaWJ1dGUoXCJGaWVsZC1pZC1saXN0XCIsIGlkVmFsdWUpO1xyXG5cclxuICAgICAgICBub2RlLmNsYXNzTmFtZSA9IFwiRWRpdG9yLUF0dHJpYnV0ZVwiO1xyXG4gICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZChcIlRleHQtRmllbGRcIik7XHJcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChwYW5lbCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIHNob3dGaWVsZHNBdHRyaWJ1dGVcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5MYWJlbEZpZWxkI3Nob3dGaWVsZHNBdHRyaWJ1dGVcclxuICAgICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zsnZgg7IaN7ISxIO2MneyXheywveydhCDshKTsoJXtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtIVE1MfSBvd25lck5vZGUgIOyGjeyEsSDtjJ3sl4UgTm9kZVxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gZmllbGRMaXN0ICAgICDtlYTrk5zrk6TsnZgg66as7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge0hUTUx9IGF0dHJOb2RlICAgIOyGjeyEsSDtjJ3sl4XsnZggTm9kZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1haW5Hcm91cCAgICBTVkfsnZgg66mU7J24IEVsZW1lbnRcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHVzZXJMaXN0ICAg7ISc66qF7J6QIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gZHZPcHRpb25MaXN0ICAg6riw67O46rCSIOyEoO2DnSDrpqzsiqTtirhcclxuICAgICAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNoYW5nZUV2ZW50RnVuYyAgICDsho3shLHqsJLsnbQg67OA7ZWg65WMIO2YuOy2nOuQmOuKlCBjYWxsYmFjayBmdW5jdGlvblxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgc2hvd0ZpZWxkc0F0dHJpYnV0ZShvd25lck5vZGUsIGZpZWxkTGlzdCwgYXR0ck5vZGUsIG1haW5Hcm91cCwgdXNlckxpc3QsIGR2T3B0aW9uTGlzdCwgY2hhbmdlRXZlbnRGdW5jKSB7XHJcbiAgICAgICAgbGV0IG5vZGUgPSBhdHRyTm9kZTtcclxuICAgICAgICBpZiAoYXR0ck5vZGUgPT09IG51bGwgfHwgVXRpbHMuaXNFbXB0eU9iamVjdChhdHRyTm9kZSkpIHtcclxuICAgICAgICAgICAgY29uc3QgYmJveCA9IFV0aWxzLm1lcmdlRmllbGRzQkJveChmaWVsZExpc3QpO1xyXG4gICAgICAgICAgICBub2RlID0gVXRpbHMuY3JlYXRlQXR0cmJ1dGVQb3B1cChvd25lck5vZGUsIGJib3gpO1xyXG4gICAgICAgICAgICBVdGlscy5yZXBvc2l0aW9uRmllbGREZWxldGVCdG4ob3duZXJOb2RlLCBiYm94LngsIGJib3gueSwgYmJveC53aWR0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFV0aWxzLnJlbW92ZUFsbENoaWxkTm9kZShub2RlKTtcclxuXHJcbiAgICAgICAgdmFyIGlkVmFsdWVBcnIgPSBbXTtcclxuICAgICAgICBmaWVsZExpc3QuZm9yRWFjaCgoZmllbGQpID0+IHtcclxuICAgICAgICAgICAgaWRWYWx1ZUFyci5wdXNoKGZpZWxkLmlkKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdmFyIGlkVmFsdWUgPSBpZFZhbHVlQXJyLmpvaW4oKTtcclxuXHJcbiAgICAgICAgdmFyIG93bmVySWRWYWx1ZSA9IGZpZWxkTGlzdFswXS5vd25lcklkO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5vd25lcklkICE9PSBvd25lcklkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIG93bmVySWRWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB2YXIgZmllbGRJZFZhbHVlID0gZmllbGRMaXN0WzBdLmZpZWxkSWQ7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmZpZWxkSWQgIT09IGZpZWxkSWRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgZmllbGRJZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHJlcXVpcmVkVmFsdWUgPSBmaWVsZExpc3RbMF0ucmVxdWlyZWQ7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLnJlcXVpcmVkICE9PSByZXF1aXJlZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICByZXF1aXJlZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGR2VmFsdWUgPSBmaWVsZExpc3RbMF0uZGVmYXVsdFZhbHVlO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5kZWZhdWx0VmFsdWUgIT09IGR2VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGR2VmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZm9udEZhbWlseU5hbWVWYWx1ZSA9IGZpZWxkTGlzdFswXS5mb250TmFtZTtcclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0uZm9udE5hbWUgIT09IGZvbnRGYW1pbHlOYW1lVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGZvbnRGYW1pbHlOYW1lVmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBmb250U2l6ZVZhbHVlID0gZmllbGRMaXN0WzBdLmZvbnRTaXplO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5mb250U2l6ZSAhPT0gZm9udFNpemVWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgZm9udFNpemVWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciB0ZXh0QWxpZ25WYWx1ZSA9IGZpZWxkTGlzdFswXS50ZXh0QWxpZ247XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLnRleHRBbGlnbiAhPT0gdGV4dEFsaWduVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHRleHRBbGlnblZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGJvbGRWYWx1ZSA9IGZpZWxkTGlzdFswXS5pc0JvbGQ7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmlzQm9sZCAhPT0gYm9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBib2xkVmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBmb250Q29sb3JWYWx1ZSA9IGZpZWxkTGlzdFswXS5mb250Q29sb3I7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmZvbnRDb2xvciAhPT0gZm9udENvbG9yVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGZvbnRDb2xvclZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGZpZWxkVmFsdWUgPSBmaWVsZExpc3RbMF0udmFsdWU7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLnZhbHVlICE9PSBmaWVsZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTGFiZWxGaWVsZC5zaG93RmllbGRBdHRyaWJ1dGUobm9kZSxcclxuICAgICAgICAgICAgaWRWYWx1ZSwgZmllbGRJZFZhbHVlLCByZXF1aXJlZFZhbHVlLCBvd25lcklkVmFsdWUsIGR2VmFsdWUsIGZvbnRGYW1pbHlOYW1lVmFsdWUsIGZvbnRTaXplVmFsdWUsIHRleHRBbGlnblZhbHVlLCBib2xkVmFsdWUsIGZvbnRDb2xvclZhbHVlLCBmaWVsZFZhbHVlLFxyXG4gICAgICAgICAgICB1c2VyTGlzdCwgZHZPcHRpb25MaXN0LFxyXG4gICAgICAgICAgICBjaGFuZ2VFdmVudEZ1bmMpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhbGlkYXRlVmFsdWUocHJvcGVydHlOYW1lLCB2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiBnZXRTVkdGaWVsZE9iamVjdFxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkxhYmVsRmllbGQjbWFrZVNWR1RleHRcclxuICAgICAqIEBtZW1iZXJPZiBtb2R1bGU6VGVtcGxhdGUvRmllbGQuTGFiZWxGaWVsZFxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpICDtlYTrk5zsnZgg7KKF66WY66W8IO2RnO2YhO2VmOuKlCBTVkcgVGV4dCBlbGVtZW50XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHNjYWxlIO2YhOyerCBQREbsnZggU2NhbGVcclxuICAgICAqIEByZXR1cm4ge09iamVjdH0gU1ZHIE5vZGUgRWxlbWVudFxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBtYWtlU1ZHVGV4dChzY2FsZSkge1xyXG4gICAgICAgIGxldCB2YWx1ZSA9IHRoaXMudmFsdWU7XHJcbiAgICAgICAgaWYgKHZhbHVlID09PSAnJyAmJiB0aGlzLmRlZmF1bHRWYWx1ZVRleHQgPT09ICcnKSB7XHJcbiAgICAgICAgICAgIHZhbHVlID0gdGhpcy5tX2ZpZWxkSWQ7XHJcbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gJycgJiYgdGhpcy5kZWZhdWx0VmFsdWVUZXh0ICE9PSAnJykge1xyXG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMuZGVmYXVsdFZhbHVlVGV4dDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHRleHRGb250Q29sb3IgPSBcImZpbGw9J1wiICsgdGhpcy5mb250Q29sb3IgKyBcIicgXCI7XHJcblxyXG4gICAgICAgIGxldCB0ZXh0UG9zID0gJyB4PVwiNTAlXCIgIGR5PVwiMC4zNWVtXCIgdGV4dC1hbmNob3I9XCJtaWRkbGVcIiAnXHJcbiAgICAgICAgaWYgKHRoaXMudGV4dEFsaWduID09PSBcImxlZnRcIikge1xyXG4gICAgICAgICAgICB0ZXh0UG9zID0gJyB4PVwiMyVcIiAgZHk9XCIwLjM1ZW1cIiB0ZXh0LWFuY2hvcj1cInN0YXJ0XCIgJztcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGV4dEFsaWduID09PSBcInJpZ2h0XCIpIHtcclxuICAgICAgICAgICAgdGV4dFBvcyA9ICcgeD1cIjk3JVwiIGR5PVwiMC4zNWVtXCIgdGV4dC1hbmNob3I9XCJlbmRcIiAnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHRleHRWZXJ0aWNhbFBvcyA9ICd5PVwiNTAlXCInO1xyXG4gICAgICAgIGlmICh0aGlzLnRleHRWZXRpY2FsQWxpZ24gPT09IFwidG9wXCIpIHtcclxuICAgICAgICAgICAgdGV4dFZlcnRpY2FsUG9zID0gJ3k9XCIyNSVcIic7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRleHRWZXRpY2FsQWxpZ24gPT09IFwiYm90dG9tXCIpIHtcclxuICAgICAgICAgICAgdGV4dFZlcnRpY2FsUG9zID0gJ3k9XCI3MCVcIic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgZm9udFdlaWd0aCA9IFwiXCI7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNCb2xkID09PSBcInRydWVcIikge1xyXG4gICAgICAgICAgICBmb250V2VpZ3RoID0gXCIgZm9udC13ZWlnaHQ9J2JvbGQnIFwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGZvbnRGbWFpbHkgPSBcIiBmb250LWZhbWlseT0nXCIgKyB0aGlzLmZvbnROYW1lICsgXCInIFwiO1xyXG5cclxuICAgICAgICBsZXQgZm9udEluZm8gPSAnIGZvbnQtc2l6ZT1cIicgKyB0aGlzLmZvbnRTaXplICogc2NhbGUgKyAncHhcIiAnO1xyXG4gICAgICAgIGxldCB0ZXh0T2JqID0gJzx0ZXh0JyArIHRleHRQb3MgKyB0ZXh0VmVydGljYWxQb3MgKyBmb250Rm1haWx5ICsgZm9udEluZm8gKyB0ZXh0Rm9udENvbG9yICsgZm9udFdlaWd0aCArICc+JyArIHZhbHVlICsgJzwvdGV4dD4nO1xyXG4gICAgICAgIGNvbnN0IGZvYmplY3RTVkcgPSAnPHN2ZyB4PVwiJyArIHRoaXMueCArICdweFwiIHk9XCInICsgdGhpcy55ICsgJ3B4XCIgd2lkdGg9XCInICsgdGhpcy53aWR0aCAqIHNjYWxlICtcclxuICAgICAgICAgICAgJ3B4XCIgaGVpZ2h0PVwiJyArIHRoaXMuaGVpZ2h0ICogc2NhbGUgKyAncHhcIj48ZyAgPicgKyB0ZXh0T2JqICsgJzwvZz48L3N2Zz4nO1xyXG5cclxuICAgICAgICByZXR1cm4gZm9iamVjdFNWRztcclxuICAgIH1cclxufVxyXG5cclxuIiwiXHJcbi8qKlxyXG4gKiBAbW9kdWxlIFRlbXBsYXRlL0ZpZWxkXHJcbiovXHJcblxyXG5cclxuaW1wb3J0IHtUZXh0QmFzZUZpZWxkfSBmcm9tICcuL1RleHRCYXNlRmllbGQnO1xyXG5pbXBvcnQge1V0aWxzfSBmcm9tICcuLi91dGlscy91dGlscy5qcyc7XHJcblxyXG4vKipcclxuICogQGRlc2NyaXB0aW9uIOupgO2LsOudvOyduCDtlYTrk5wgQ2xhc3NcclxuICpcclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZmllbGROYW1lIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuTXVsdGlMaW5lVGV4dEZpZWxkI2ZpZWxkTmFtZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gc2hvd0ZpZWxkQXR0cmlidXRlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuTXVsdGlMaW5lVGV4dEZpZWxkI3Nob3dGaWVsZEF0dHJpYnV0ZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gc2hvd0ZpZWxkc0F0dHJpYnV0ZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLk11bHRpTGluZVRleHRGaWVsZCNzaG93RmllbGRzQXR0cmlidXRlfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBtYWtlU1ZHVGV4dCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLk11bHRpTGluZVRleHRGaWVsZCNtYWtlU1ZHVGV4dH1cclxuICpcclxuICogQGF1Z21lbnRzIFRleHRCYXNlRmllbGQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5UZXh0QmFzZUZpZWxkI1RleHRCYXNlRmllbGR9XHJcbiAqIEBGaWxlTmFtZSBNdWx0aUxpbmVUZXh0RmllbGQuanNcclxuICogQHNpbmNlIDIwMjEuMDUuMzFcclxuICovXHJcbmV4cG9ydCBjbGFzcyBNdWx0aUxpbmVUZXh0RmllbGQgZXh0ZW5kcyBUZXh0QmFzZUZpZWxkIHtcclxuICAgIC8qKlxyXG4gICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgKiBAcGFyYW0gaWQg7ZWE65Oc7J2YIElEXHJcbiAgICAgKiBAcGFyYW0gcGFnZU5vIO2VhOuTnOqwgCDsho3tlZwg7Y6Y7J207KeAIOuyiO2YuFxyXG4gICAgICogQHBhcmFtIHgg7ZWE65Oc7J2YIHN2Z+yDgeydmCB47KKM7ZGcXHJcbiAgICAgKiBAcGFyYW0geSDtlYTrk5zsnZggc3Zn7IOB7J2YIHnsooztkZxcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGlkLCBwYWdlTm8sIHgsIHkpIHtcclxuICAgICAgICBzdXBlcihpZCwgcGFnZU5vLCB4LCB5LCBNdWx0aUxpbmVUZXh0RmllbGQud2lkdGhWYWx1ZSgpLCBNdWx0aUxpbmVUZXh0RmllbGQuaGVpZ2h0VmFsdWUoKSk7XHJcbiAgICAgICAgdGhpcy5tX3R5cGUgPSBNdWx0aUxpbmVUZXh0RmllbGQuZmllbGROYW1lKCk7XHJcblxyXG4gICAgICAgIHRoaXMubV9raW5kID0gVXRpbHMudHJhbnNsYXRlRm9yS2V5KFwiVGVtcGxhdGUubXVsdGlsaW5lRmllbGRUb29sXCIpO1xyXG4gICAgICAgIGlmIChVdGlscy5pc1N0cmluZ0VtcHR5KGlkKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubV9maWVsZElkID0gdGhpcy5tX2lkLnJlcGxhY2UodGhpcy5tX3R5cGUsIHRoaXMubV9raW5kICsgXCItXCIpO1xyXG4gICAgICAgIHRoaXMudGV4dFZldGljYWxBbGlnbiA9IFwidG9wXCI7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gZmllbGROYW1lXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuTXVsdGlMaW5lVGV4dEZpZWxkI2ZpZWxkTmFtZVxyXG4gICAgICogQHJldHVybiB7U3RyaW5nfVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOuTnCDtg4DsnoXsnZgg7J2066aEXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZmllbGROYW1lKCkge1xyXG4gICAgICAgIHJldHVybiBcIk11bHRpTGluZVRleHRGaWVsZFwiO1xyXG4gICAgfVxyXG5cclxuICAgIGFuY2VzdG9ycygpIHtcclxuICAgICAgICByZXR1cm4gW1wiTUxURlwiLCBcIlRCRlwiLCBcIkJGXCJdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIHdpZHRoVmFsdWVcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5NdWx0aUxpbmVUZXh0RmllbGQjd2lkdGhWYWx1ZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOuTnOydmCDstIjquLAg6rCA66GcIOq4uOydtFxyXG4gICAgICogQHJldHVybiB7TnVtYmVyfVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHdpZHRoVmFsdWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIDE1MDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiBoZWlnaHRWYWx1ZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLk11bHRpTGluZVRleHRGaWVsZCNoZWlnaHRWYWx1ZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOuTnOydmCDstIjquLAg7IS466GcIOq4uOydtFxyXG4gICAgICogQHJldHVybiB7TnVtYmVyfVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGhlaWdodFZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybiA2MDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiBzaG93RmllbGRzQXR0cmlidXRlXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuTXVsdGlMaW5lVGV4dEZpZWxkI3Nob3dGaWVsZHNBdHRyaWJ1dGVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSAg7ZWE65Oc7J2YIOyGjeyEsSDtjJ3sl4XssL3snYQg7ISk7KCV7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7RUxFTUVOVH0gb3duZXJOb2RlICDsho3shLEg7Yyd7JeFIE5vZGVcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGZpZWxkTGlzdCAgICAg7ZWE65Oc65Ok7J2YIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtIVE1MfSBhdHRyTm9kZSAgICDsho3shLEg7Yyd7JeF7J2YIE5vZGVcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtYWluR3JvdXAgICAgU1ZH7J2YIOuplOyduCBFbGVtZW50XHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSB1c2VyTGlzdCAgIOyEnOuqheyekCDrpqzsiqTtirhcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGR2T3B0aW9uTGlzdCAgIOq4sOuzuOqwkiDshKDtg50g66as7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge0NhbGxiYWNrfSBjaGFuZ2VFdmVudEZ1bmMgICAg7IaN7ISx6rCS7J20IOuzgO2VoOuVjCDtmLjstpzrkJjripQgY2FsbGJhY2sgZnVuY3Rpb25cclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHNob3dGaWVsZHNBdHRyaWJ1dGUob3duZXJOb2RlLCBmaWVsZExpc3QsIGF0dHJOb2RlLCBtYWluR3JvdXAsIHVzZXJMaXN0LCBkdk9wdGlvbkxpc3QsIGNoYW5nZUV2ZW50RnVuYykge1xyXG4gICAgICAgIFRleHRCYXNlRmllbGQuc2hvd0ZpZWxkc0F0dHJpYnV0ZShvd25lck5vZGUsIGZpZWxkTGlzdCwgYXR0ck5vZGUsIG1haW5Hcm91cCwgdXNlckxpc3QsIGR2T3B0aW9uTGlzdCwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgIH1cclxuXHJcbiAgICB2YWxpZGF0ZVZhbHVlKHByb3BlcnR5TmFtZSwgdmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufVxyXG4iLCJcclxuLyoqXHJcbiAqIEBtb2R1bGUgVGVtcGxhdGUvRmllbGRcclxuICovXHJcblxyXG5pbXBvcnQge1RleHRCYXNlRmllbGR9IGZyb20gJy4vVGV4dEJhc2VGaWVsZCc7XHJcbmltcG9ydCB7VXRpbHN9IGZyb20gJy4vLi4vdXRpbHMvdXRpbHMuanMnO1xyXG5pbXBvcnQgQ1AgZnJvbSAnLi8uLi91dGlscy9jb2xvci1waWNrZXInO1xyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiDsiKvsnpAg7ZWE65OcIENsYXNzXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBtX2lucHV0TWF4IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuTnVtYmVyRmllbGQjbV9pbnB1dE1heH1cclxuICogQHByb3BlcnR5IHtOdW1iZXJ9IG1faW5wdXRNaW4ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5OdW1iZXJGaWVsZCNtX2lucHV0TWlufVxyXG4gKiBcclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZmllbGROYW1lIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuTnVtYmVyRmllbGQjZmllbGROYW1lfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBzaG93RmllbGRzQXR0cmlidXRlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuTnVtYmVyRmllbGQjc2hvd0ZpZWxkc0F0dHJpYnV0ZX1cclxuICogXHJcbiAqIEBhdWdtZW50cyBUZXh0QmFzZUZpZWxkIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuVGV4dEJhc2VGaWVsZCNUZXh0QmFzZUZpZWxkfVxyXG4gKiBARmlsZU5hbWUgTnVtYmVyRmllbGQuanNcclxuICogQHNpbmNlIDIwMjEuMDUuMzFcclxuICovXHJcbmV4cG9ydCBjbGFzcyBOdW1iZXJGaWVsZCBleHRlbmRzIFRleHRCYXNlRmllbGQge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAqIEBwYXJhbSBpZCDtlYTrk5zsnZggSURcclxuICAgICAqIEBwYXJhbSBwYWdlTm8g7ZWE65Oc6rCAIOyGje2VnCDtjpjsnbTsp4Ag67KI7Zi4XHJcbiAgICAgKiBAcGFyYW0geCDtlYTrk5zsnZggc3Zn7IOB7J2YIHjsooztkZxcclxuICAgICAqIEBwYXJhbSB5IO2VhOuTnOydmCBzdmfsg4HsnZggeeyijO2RnFxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoaWQsIHBhZ2VObywgeCwgeSkge1xyXG4gICAgICAgIHN1cGVyKGlkLCBwYWdlTm8sIHgsIHksIE51bWJlckZpZWxkLndpZHRoVmFsdWUoKSwgTnVtYmVyRmllbGQuaGVpZ2h0VmFsdWUoKSk7XHJcbiAgICAgICAgdGhpcy5tX3R5cGUgPSBOdW1iZXJGaWVsZC5maWVsZE5hbWUoKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLm1fa2luZCA9IFV0aWxzLnRyYW5zbGF0ZUZvcktleShcIlRlbXBsYXRlLm51bWJlckZpZWxkVG9vbFwiKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge051bWJlcn1cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuTnVtYmVyRmllbGQjbV9pbnB1dE1heFxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiDsiKvsnpAg7ZWE65Oc7J2YIOy1nOuMgOqwklxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIGlucHV0TWF4KClcclxuICAgICAgICAgKiAvLyBzZXR0ZXIgaW5wdXRNYXgodmFsKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubV9pbnB1dE1heCA9IG51bGw7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLk51bWJlckZpZWxkI21faW5wdXRNaW5cclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24g7Iir7J6QIO2VhOuTnOydmCDstZzshozqsJJcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciBpbnB1dE1pbigpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIGlucHV0TWluKHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1faW5wdXRNaW4gPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLm1fdXNlQ2FsYyA9ICdmYWxzZSc7XHJcblxyXG4gICAgICAgIGlmIChVdGlscy5pc1N0cmluZ0VtcHR5KGlkKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubV9maWVsZElkID0gdGhpcy5tX2lkLnJlcGxhY2UodGhpcy5tX3R5cGUsIHRoaXMubV9raW5kICsgXCItXCIpO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIGZpZWxkTmFtZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLk51bWJlckZpZWxkI2ZpZWxkTmFtZVxyXG4gICAgICogQHJldHVybiB7U3RyaW5nfVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOuTnCDtg4DsnoXsnZgg7J2066aEXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZmllbGROYW1lKCkge1xyXG4gICAgICAgIHJldHVybiBcIk51bWJlckZpZWxkXCI7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGFuY2VzdG9ycygpIHtcclxuICAgICAgICByZXR1cm4gW1wiTkZcIiwgXCJUQkZcIiwgXCJCRlwiXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaW5wdXRNYXgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV9pbnB1dE1heDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgaW5wdXRNYXgoX19pbnB1dE1heCkge1xyXG4gICAgICAgIHRoaXMubV9pbnB1dE1heCA9IF9faW5wdXRNYXg7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlucHV0TWluKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1faW5wdXRNaW47XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGlucHV0TWluKF9faW5wdXRNaW4pIHtcclxuICAgICAgICB0aGlzLm1faW5wdXRNaW4gPSBfX2lucHV0TWluO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIHNob3dGaWVsZEF0dHJpYnV0ZVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRCYXNlRmllbGQjc2hvd0ZpZWxkQXR0cmlidXRlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gIChTdGF0aWMpIO2VhOuTnOydmCDsho3shLEg7Yyd7JeF7LC97J2EIOyEpOygle2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0VMRU1FTlR9IG5vZGUgIOyGjeyEsSDtjJ3sl4UgTm9kZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGlkVmFsdWUgICAgIO2VhOuTnOydmCBpZOqwklxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHJlcXVpcmVkVmFsdWUgICAgIO2VhOyImOyXrOu2gCDqsJJcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvd25lcklkVmFsdWUgICAgIOyEnOuqheyekCDslYTsnbTrlJRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkdlZhbHVlICAgICDquLDrs7jqsJJcclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBtaW5WYWx1ZSAgICAg7LWc7IaM6rCSXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gbWF4VmFsdWUgICAgIOy1nOuMgOqwklxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZvbnRGYW1pbHlOYW1lVmFsdWUgICAgIO2PsO2KuCDsnbTrpoRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmb250U2l6ZVZhbHVlICAgICDtj7Dtirgg7YGs6riwIOqwklxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRleHRBbGlnblZhbHVlICAgICDthY3siqTtirgg6rCA66GcIOygleugrCDqsJJcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBib2xkVmFsdWUgICAgIO2PsO2KuCDrs7zrk5wg7Jes67aAXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZm9udENvbG9yVmFsdWUgICAgIO2PsO2KuCDsubzrnbxcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHVzZXJMaXN0ICAg7ISc66qF7J6QIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gZHZPcHRpb25MaXN0ICAg6riw67O46rCSIOyEoO2DnSDrpqzsiqTtirhcclxuICAgICAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNoYW5nZUV2ZW50RnVuYyAgICDsho3shLHqsJLsnbQg67OA7ZWg65WMIO2YuOy2nOuQmOuKlCBjYWxsYmFjayBmdW5jdGlvblxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgc2hvd0ZpZWxkQXR0cmlidXRlKG5vZGUsXHJcbiAgICAgICAgaWRWYWx1ZSwgZmllbGRJZFZhbHVlLCByZXF1aXJlZFZhbHVlLCBvd25lcklkVmFsdWUsIGR2VmFsdWUsIG1pblZhbHVlLCBtYXhWYWx1ZSwgdXNlQ2FsY1ZhbCwgZm9udEZhbWlseU5hbWVWYWx1ZSwgZm9udFNpemVWYWx1ZSwgdGV4dEFsaWduVmFsdWUsIGJvbGRWYWx1ZSwgZm9udENvbG9yVmFsdWUsXHJcbiAgICAgICAgdXNlckxpc3QsIGR2T3B0aW9uTGlzdCxcclxuICAgICAgICBjaGFuZ2VFdmVudEZ1bmMpIHtcclxuXHJcbiAgICAgICAgdmFyIHBhbmVsID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlUGFuZWxOb2RlKCk7XHJcblxyXG4gICAgICAgIHZhciByZXF1aXJlUm93ID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlVG9nZ2xlQnV0dG9uTm9kZShpZFZhbHVlLCBcInJlcXVpcmVkXCIsIFwiVGVtcGxhdGUuaXNSZXF1aXJlZFwiLCByZXF1aXJlZFZhbHVlLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG4gICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKHJlcXVpcmVSb3cpO1xyXG5cclxuICAgICAgICBsZXQgdXNlRGVmYXVsT3B0aW9uTm9kZSA9IFV0aWxzLmdldFVzZXJJbmZvT3B0c0xpc3RDb3VudCgpICE9PSAxO1xyXG4gICAgICAgIHZhciBvd25lclNlbGVjdFJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVNlbGVjdE5vZGUoaWRWYWx1ZSwgXCJvd25lcklkXCIsIHVzZXJMaXN0LCBcIlwiLCB1c2VEZWZhdWxPcHRpb25Ob2RlKTtcclxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChvd25lclNlbGVjdFJvdyk7XHJcblxyXG4gICAgICAgIGxldCBvd25lclNlbGVjdCA9IG93bmVyU2VsZWN0Um93LnF1ZXJ5U2VsZWN0b3IoXCJzZWxlY3RcIik7XHJcbiAgICAgICAgalF1ZXJ5KG93bmVyU2VsZWN0KS5zZWxlY3QyKHtcclxuICAgICAgICAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxyXG4gICAgICAgICAgICB3aWR0aDogXCIxMDAlXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICBqUXVlcnkob3duZXJTZWxlY3QpLnZhbChvd25lcklkVmFsdWUpLnRyaWdnZXIoXCJjaGFuZ2VcIik7XHJcbiAgICAgICAgalF1ZXJ5KG93bmVyU2VsZWN0KS5vbihcImNoYW5nZVwiLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG5cclxuICAgICAgICAvLzEyLTI4XHJcbiAgICAgICAgaWYgKGR2T3B0aW9uTGlzdCAmJiBBcnJheS5pc0FycmF5KGR2T3B0aW9uTGlzdCkgJiYgZHZPcHRpb25MaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdmFyIGRlZmF1bHRWYWx1ZVJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVNlbGVjdE5vZGUoaWRWYWx1ZSwgXCJkZWZhdWx0VmFsdWVcIiwgZHZPcHRpb25MaXN0LCBcIlRlbXBsYXRlLmRlZmF1bHRWYWx1ZVRleHRcIiwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKGRlZmF1bHRWYWx1ZVJvdyk7XHJcblxyXG4gICAgICAgICAgICBsZXQgZGVmYXVsdFZhbHVlU2VsZWN0ID0gZGVmYXVsdFZhbHVlUm93LnF1ZXJ5U2VsZWN0b3IoXCJzZWxlY3RcIik7XHJcbiAgICAgICAgICAgICQoZGVmYXVsdFZhbHVlU2VsZWN0KS5zZWxlY3QyKHtcclxuICAgICAgICAgICAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIlxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJChkZWZhdWx0VmFsdWVTZWxlY3QpLnZhbChkdlZhbHVlKS50cmlnZ2VyKFwiY2hhbmdlXCIpO1xyXG4gICAgICAgICAgICAkKGRlZmF1bHRWYWx1ZVNlbGVjdCkub24oXCJjaGFuZ2VcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBtaW5WYWwgPSBVdGlscy5pc1N0cmluZ0VtcHR5KG1pblZhbHVlKSA/ICcnIDogTnVtYmVyKG1pblZhbHVlKTtcclxuICAgICAgICB2YXIgbWluVmFsdWVSb3cgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVJbnB1dE5vZGUoaWRWYWx1ZSwgXCJmaWVsZE1pblZhbHVlXCIsIFwiVGVtcGxhdGUuZmllbGRNaW5WYWx1ZVwiLCBtaW5WYWwsIFwibnVtYmVyXCIsIFwiXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQobWluVmFsdWVSb3cpO1xyXG4gICAgICAgIGxldCBtYXhWYWwgPSBVdGlscy5pc1N0cmluZ0VtcHR5KG1heFZhbHVlKSA/ICcnIDogTnVtYmVyKG1heFZhbHVlKTtcclxuICAgICAgICB2YXIgbWF4VmFsdWVSb3cgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVJbnB1dE5vZGUoaWRWYWx1ZSwgXCJmaWVsZE1heFZhbHVlXCIsIFwiVGVtcGxhdGUuZmllbGRNYXhWYWx1ZVwiLCBtYXhWYWwsIFwibnVtYmVyXCIsIFwiXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQobWF4VmFsdWVSb3cpO1xyXG5cclxuICAgICAgICBsZXQgY2FsY1JvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVRvZ2dsZUJ1dHRvbk5vZGUoaWRWYWx1ZSwgXCJ1c2VDYWxjXCIsIFwiVGVtcGxhdGUudXNlQ2FsY1wiLCB1c2VDYWxjVmFsLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG4gICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKGNhbGNSb3cpO1xyXG5cclxuICAgICAgICB2YXIgZmllbGRJZFZhbHVlUm93ID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlSW5wdXROb2RlKGlkVmFsdWUsIFwiZmllbGRJZFwiLCBcIlRlbXBsYXRlLmZpZWxkSWRUZXh0XCIsIGZpZWxkSWRWYWx1ZSwgXCJcIiwgXCJcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChmaWVsZElkVmFsdWVSb3cpO1xyXG5cclxuICAgICAgICB2YXIgZm9udEF0dHJSb3cgPSBVdGlscy5jcmVhdGVUZXh0QXR0cmJ1dGVOb2RlKGlkVmFsdWUsIGZvbnRDb2xvclZhbHVlLCB0ZXh0QWxpZ25WYWx1ZSwgYm9sZFZhbHVlLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG4gICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKGZvbnRBdHRyUm93LnJvdyk7XHJcblxyXG4gICAgICAgIGxldCBmb250RmFtaWx5Q29tYm9TZWxlY3QgPSBmb250QXR0clJvdy5mb250RmFtaWx5Q29tYm8ucXVlcnlTZWxlY3RvcihcInNlbGVjdFwiKTtcclxuICAgICAgICAkKGZvbnRGYW1pbHlDb21ib1NlbGVjdCkuc2VsZWN0Mih7XHJcbiAgICAgICAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcclxuICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChmb250RmFtaWx5Q29tYm9TZWxlY3QpLnZhbChmb250RmFtaWx5TmFtZVZhbHVlKS50cmlnZ2VyKFwiY2hhbmdlXCIpO1xyXG4gICAgICAgICQoZm9udEZhbWlseUNvbWJvU2VsZWN0KS5vbihcImNoYW5nZVwiLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG4gICAgICAgIGxldCBmb250U2l6ZUNvbWJvU2VsZWN0ID0gZm9udEF0dHJSb3cuZm9udFNpemVDb21iby5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xyXG4gICAgICAgICQoZm9udFNpemVDb21ib1NlbGVjdCkuc2VsZWN0Mih7XHJcbiAgICAgICAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcclxuICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChmb250U2l6ZUNvbWJvU2VsZWN0KS52YWwoZm9udFNpemVWYWx1ZSkudHJpZ2dlcihcImNoYW5nZVwiKTtcclxuICAgICAgICAkKGZvbnRTaXplQ29tYm9TZWxlY3QpLm9uKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcblxyXG4gICAgICAgIGxldCBjb2xvcklucHV0ID0gZm9udEF0dHJSb3cuY29sb3JCdG4ucXVlcnlTZWxlY3RvcihcImJ1dHRvblwiKTtcclxuICAgICAgICBjb2xvcklucHV0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGZvbnRDb2xvclZhbHVlO1xyXG4gICAgICAgIGxldCBwaWNrZXIgPSBuZXcgQ1AoY29sb3JJbnB1dCwgeyBjb2xvcjogZm9udENvbG9yVmFsdWUgfSk7XHJcbiAgICAgICAgY29sb3JJbnB1dC52YWx1ZSA9IGZvbnRDb2xvclZhbHVlO1xyXG4gICAgICAgIHBpY2tlci5vbignY2hhbmdlJywgZnVuY3Rpb24gKHIsIGcsIGIsIGEpIHtcclxuICAgICAgICAgICAgaWYgKCFwaWNrZXIudmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbG9ySW5wdXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gQ1AuSEVYKFtyLCBnLCBiLCBhXSk7XHJcbiAgICAgICAgICAgIGNvbG9ySW5wdXQudmFsdWUgPSBDUC5IRVgoW3IsIGcsIGIsIGFdKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBjb2xvclRleHRJbnB1dCA9IGZvbnRBdHRyUm93LmNvbG9yQnRuLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFt0eXBlPSd0ZXh0J11cIik7XHJcbiAgICAgICAgICAgIGNvbG9yVGV4dElucHV0LnZhbHVlID0gKENQLkhFWChbciwgZywgYiwgYV0pKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBwaWNrZXIub24oJ2V4aXQnLCBmdW5jdGlvbiAociwgZywgYiwgYSkge1xyXG4gICAgICAgICAgICBjb2xvcklucHV0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IENQLkhFWChbciwgZywgYiwgYV0pO1xyXG5cclxuICAgICAgICAgICAgbGV0IGNvbG9yVGV4dElucHV0ID0gZm9udEF0dHJSb3cuY29sb3JCdG4ucXVlcnlTZWxlY3RvcihcImlucHV0W3R5cGU9J3RleHQnXVwiKTtcclxuICAgICAgICAgICAgY29sb3JUZXh0SW5wdXQudmFsdWUgPSAoQ1AuSEVYKFtyLCBnLCBiLCBhXSkpO1xyXG4gICAgICAgICAgICBjb2xvclRleHRJbnB1dC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImNoYW5nZVwiKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHBhbmVsLnNldEF0dHJpYnV0ZShcIkZpZWxkLWlkLWxpc3RcIiwgaWRWYWx1ZSk7XHJcblxyXG4gICAgICAgIG5vZGUuY2xhc3NOYW1lID0gXCJFZGl0b3ItQXR0cmlidXRlXCI7XHJcbiAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKFwiVGV4dC1GaWVsZFwiKTtcclxuICAgICAgICBub2RlLmFwcGVuZENoaWxkKHBhbmVsKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIHNob3dGaWVsZHNBdHRyaWJ1dGVcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5OdW1iZXJGaWVsZCNzaG93RmllbGRzQXR0cmlidXRlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE65Oc7J2YIOyGjeyEsSDtjJ3sl4XssL3snYQg7ISk7KCV7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7SFRNTH0gb3duZXJOb2RlICDsho3shLEg7Yyd7JeFIE5vZGVcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGZpZWxkTGlzdCAgICAg7ZWE65Oc65Ok7J2YIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtIVE1MfSBhdHRyTm9kZSAgICDsho3shLEg7Yyd7JeF7J2YIE5vZGVcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtYWluR3JvdXAgICAgU1ZH7J2YIOuplOyduCBFbGVtZW50XHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSB1c2VyTGlzdCAgIOyEnOuqheyekCDrpqzsiqTtirhcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGR2T3B0aW9uTGlzdCAgIOq4sOuzuOqwkiDshKDtg50g66as7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge0NhbGxiYWNrfSBjaGFuZ2VFdmVudEZ1bmMgICAg7IaN7ISx6rCS7J20IOuzgO2VoOuVjCDtmLjstpzrkJjripQgY2FsbGJhY2sgZnVuY3Rpb25cclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHNob3dGaWVsZHNBdHRyaWJ1dGUob3duZXJOb2RlLCBmaWVsZExpc3QsIGF0dHJOb2RlLCBtYWluR3JvdXAsIHVzZXJMaXN0LCBkdk9wdGlvbkxpc3QsIGNoYW5nZUV2ZW50RnVuYykge1xyXG4gICAgICAgIGxldCBub2RlID0gYXR0ck5vZGU7XHJcbiAgICAgICAgaWYgKGF0dHJOb2RlID09PSBudWxsIHx8IFV0aWxzLmlzRW1wdHlPYmplY3QoYXR0ck5vZGUpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJib3ggPSBVdGlscy5tZXJnZUZpZWxkc0JCb3goZmllbGRMaXN0KTtcclxuICAgICAgICAgICAgbm9kZSA9IFV0aWxzLmNyZWF0ZUF0dHJidXRlUG9wdXAob3duZXJOb2RlLCBiYm94KTtcclxuICAgICAgICAgICAgVXRpbHMucmVwb3NpdGlvbkZpZWxkRGVsZXRlQnRuKG93bmVyTm9kZSwgYmJveC54LCBiYm94LnksIGJib3gud2lkdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBVdGlscy5yZW1vdmVBbGxDaGlsZE5vZGUobm9kZSk7XHJcblxyXG4gICAgICAgIHZhciBpZFZhbHVlQXJyID0gW107XHJcbiAgICAgICAgZmllbGRMaXN0LmZvckVhY2goKGZpZWxkKSA9PiB7XHJcbiAgICAgICAgICAgIGlkVmFsdWVBcnIucHVzaChmaWVsZC5pZCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciBpZFZhbHVlID0gaWRWYWx1ZUFyci5qb2luKCk7XHJcblxyXG4gICAgICAgIHZhciBvd25lcklkVmFsdWUgPSBmaWVsZExpc3RbMF0ub3duZXJJZDtcclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0ub3duZXJJZCAhPT0gb3duZXJJZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBvd25lcklkVmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgcmVxdWlyZWRWYWx1ZSA9IGZpZWxkTGlzdFswXS5yZXF1aXJlZDtcclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0ucmVxdWlyZWQgIT09IHJlcXVpcmVkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHJlcXVpcmVkVmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZHZWYWx1ZSA9IGZpZWxkTGlzdFswXS5kZWZhdWx0VmFsdWU7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmRlZmF1bHRWYWx1ZSAhPT0gZHZWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgZHZWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBmaWVsZElkVmFsdWUgPSBmaWVsZExpc3RbMF0uZmllbGRJZDtcclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0uZmllbGRJZCAhPT0gZmllbGRJZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZElkVmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbWluVmFsdWUgPSBmaWVsZExpc3RbMF0ubV9pbnB1dE1pbjtcclxuICAgICAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0ubV9pbnB1dE1pbiAhPT0gbWluVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIG1pblZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgbWF4VmFsdWUgPSBmaWVsZExpc3RbMF0ubV9pbnB1dE1heDtcclxuICAgICAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0ubV9pbnB1dE1heCAhPT0gbWF4VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIG1heFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHVzZUNhbGNWYWx1ZSA9IGZpZWxkTGlzdFswXS5tX3VzZUNhbGM7XHJcbiAgICAgICAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLm1fdXNlQ2FsYyAhPT0gdXNlQ2FsY1ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB1c2VDYWxjVmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZm9udEZhbWlseU5hbWVWYWx1ZSA9IGZpZWxkTGlzdFswXS5mb250TmFtZTtcclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0uZm9udE5hbWUgIT09IGZvbnRGYW1pbHlOYW1lVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGZvbnRGYW1pbHlOYW1lVmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBmb250U2l6ZVZhbHVlID0gZmllbGRMaXN0WzBdLmZvbnRTaXplO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5mb250U2l6ZSAhPT0gZm9udFNpemVWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgZm9udFNpemVWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciB0ZXh0QWxpZ25WYWx1ZSA9IGZpZWxkTGlzdFswXS50ZXh0QWxpZ247XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLnRleHRBbGlnbiAhPT0gdGV4dEFsaWduVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHRleHRBbGlnblZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGJvbGRWYWx1ZSA9IGZpZWxkTGlzdFswXS5pc0JvbGQ7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmlzQm9sZCAhPT0gYm9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBib2xkVmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBmb250Q29sb3JWYWx1ZSA9IGZpZWxkTGlzdFswXS5mb250Q29sb3I7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmZvbnRDb2xvciAhPT0gZm9udENvbG9yVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGZvbnRDb2xvclZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTnVtYmVyRmllbGQuc2hvd0ZpZWxkQXR0cmlidXRlKG5vZGUsXHJcbiAgICAgICAgICAgIGlkVmFsdWUsIGZpZWxkSWRWYWx1ZSwgcmVxdWlyZWRWYWx1ZSwgb3duZXJJZFZhbHVlLCBkdlZhbHVlLCBtaW5WYWx1ZSwgbWF4VmFsdWUsIHVzZUNhbGNWYWx1ZSwgZm9udEZhbWlseU5hbWVWYWx1ZSwgZm9udFNpemVWYWx1ZSwgdGV4dEFsaWduVmFsdWUsIGJvbGRWYWx1ZSwgZm9udENvbG9yVmFsdWUsXHJcbiAgICAgICAgICAgIHVzZXJMaXN0LCBkdk9wdGlvbkxpc3QsXHJcbiAgICAgICAgICAgIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiB2YWxpZGF0ZVZhbHVlXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuTnVtYmVyRmllbGQjdmFsaWRhdGVWYWx1ZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIO2VtOuLuSDtlITroZztjbzti7DsnZgg6rCS7J20IOycoO2aqO2VnOyngCDssrTtgaztlZzri6QuIC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRQcm9wZXR5TmFtZSDtlYTrk5zsnZgg7IaN7ISxIOydtOumhFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlICAg7ZWE65Oc7J2YIOyGjeyEsSDqsJJcclxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHZhbGlkYXRlVmFsdWUoZmllbGRQcm9wZXR5TmFtZSwgdmFsdWUpIHtcclxuICAgICAgICBpZiAoZmllbGRQcm9wZXR5TmFtZSA9PT0gXCJkZWZhdWx0VmFsdWVcIikge1xyXG4gICAgICAgICAgICBsZXQgaXNudW0gPSAvXlxcZCskLy50ZXN0KHZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKCFpc251bSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59XHJcblxyXG4iLCJcclxuLyoqXHJcbiAqIEBtb2R1bGUgVGVtcGxhdGUvRmllbGRcclxuKi9cclxuXHJcbmltcG9ydCB7IEJhc2VGaWVsZCB9IGZyb20gJy4vQmFzZUZpZWxkJztcclxuaW1wb3J0IHtVdGlsc30gZnJvbSAnLi8uLi91dGlscy91dGlscy5qcyc7XHJcbmltcG9ydCB7Q09OU1RBTlRTfSBmcm9tICcuLy4uL0NvbnN0YW50cy5qcyc7XHJcblxyXG4vKipcclxuICogQGRlc2NyaXB0aW9uIOudvOuUlOyYpCDtlYTrk5wgQ2xhc3NcclxuICpcclxuICogQHByb3BlcnR5IHtTdHJpbmd9IG1fZ3JvdXBOYW1lIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuUmFkaW9GaWVsZCNtX2dyb3VwTmFtZX1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IG1fZGVmYXVsdFZhbHVlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuUmFkaW9GaWVsZCNtX2RlZmF1bHRWYWx1ZX1cclxuICogXHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGZpZWxkTmFtZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlJhZGlvRmllbGQjZmllbGROYW1lfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSB3aWR0aFZhbHVlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuUmFkaW9GaWVsZCN3aWR0aFZhbHVlfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBoZWlnaHRWYWx1ZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlJhZGlvRmllbGQjaGVpZ2h0VmFsdWV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGdldFNWR0ZpZWxkT2JqZWN0IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuUmFkaW9GaWVsZCNnZXRTVkdGaWVsZE9iamVjdH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gc2hvd0ZpZWxkQXR0cmlidXRlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuUmFkaW9GaWVsZCNzaG93RmllbGRBdHRyaWJ1dGV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNob3dGaWVsZHNBdHRyaWJ1dGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5SYWRpb0ZpZWxkI3Nob3dGaWVsZHNBdHRyaWJ1dGV9XHJcbiAqXHJcbiAqIEBhdWdtZW50cyBCYXNlRmllbGQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjQmFzZUZpZWxkfVxyXG4gKiBARmlsZU5hbWUgUmFkaW9GaWVsZC5qc1xyXG4gKiBAc2luY2UgMjAyMS4wNS4zMVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFJhZGlvRmllbGQgZXh0ZW5kcyBCYXNlRmllbGQge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAqIEBwYXJhbSBpZCDtlYTrk5zsnZggSURcclxuICAgICAqIEBwYXJhbSBwYWdlTm8g7ZWE65Oc6rCAIOyGje2VnCDtjpjsnbTsp4Ag67KI7Zi4XHJcbiAgICAgKiBAcGFyYW0geCDtlYTrk5zsnZggc3Zn7IOB7J2YIHjsooztkZxcclxuICAgICAqIEBwYXJhbSB5IO2VhOuTnOydmCBzdmfsg4HsnZggeeyijO2RnFxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoaWQsIHBhZ2VObywgeCwgeSkge1xyXG4gICAgICAgIHN1cGVyKGlkLCBwYWdlTm8sIHgsIHksIFJhZGlvRmllbGQud2lkdGhWYWx1ZSgpLCBSYWRpb0ZpZWxkLmhlaWdodFZhbHVlKCkpO1xyXG4gICAgICAgIHRoaXMubV90eXBlID0gUmFkaW9GaWVsZC5maWVsZE5hbWUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5tX2tpbmQgPSBVdGlscy50cmFuc2xhdGVGb3JLZXkoXCJUZW1wbGF0ZS5yYWRpb0ZpZWxkVG9vbFwiKTtcclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKFV0aWxzLmlzU3RyaW5nRW1wdHkoaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlJhZGlvRmllbGQjbV9ncm91cE5hbWVcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24g652865SU7JikIOq3uOujuSDsnbTrpoRcclxuICAgICAgICAgKiBAZGVmYXVsdCBpZOqwgCDrk6TslrTqsITri6QuXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKiAvLyBnZXR0ZXIgZ3JvdXBOYW1lKClcclxuICAgICAgICAgKiAvLyBzZXR0ZXIgZ3JvdXBOYW1lKHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1fZ3JvdXBOYW1lID0gaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlJhZGlvRmllbGQjbV9kZWZhdWx0VmFsdWVcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24g652865SU7Jik66W8IOyEoO2Dne2WiOydhCDrlYzsnZgg6rCSXHJcbiAgICAgICAgICogQGRlZmF1bHQgaWTqsIAg65Ok7Ja06rCE64ukLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIGRlZmF1bHRWYWx1ZSgpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIGRlZmF1bHRWYWx1ZSh2YWwpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tX2RlZmF1bHRWYWx1ZSA9IGlkO1xyXG4gICAgICAgIHRoaXMubV9maWVsZElkID0gdGhpcy5tX2lkLnJlcGxhY2UodGhpcy5tX3R5cGUsIHRoaXMubV9raW5kICsgXCItXCIpO1xyXG4gICAgICAgIHRoaXMubV9yYWRpb1R5cGUgPSBDT05TVEFOVFMuUkFESU9fVFlQRV8xO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIGZpZWxkTmFtZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlJhZGlvRmllbGQjZmllbGROYW1lXHJcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE65OcIO2DgOyeheydmCDsnbTrpoRcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBmaWVsZE5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiUmFkaW9GaWVsZFwiO1xyXG4gICAgfVxyXG5cclxuICAgIGFuY2VzdG9ycygpIHtcclxuICAgICAgICByZXR1cm4gWyBcIlJGXCIsIFwiQkZcIl07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiB3aWR0aFZhbHVlXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuUmFkaW9GaWVsZCN3aWR0aFZhbHVlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE65Oc7J2YIOy0iOq4sCDqsIDroZwg6ri47J20XHJcbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9XHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgd2lkdGhWYWx1ZSgpIHtcclxuICAgICAgICByZXR1cm4gNjA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gaGVpZ2h0VmFsdWVcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5SYWRpb0ZpZWxkI2hlaWdodFZhbHVlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE65Oc7J2YIOy0iOq4sCDshLjroZwg6ri47J20XHJcbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9XHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgaGVpZ2h0VmFsdWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIDYwO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBncm91cE5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV9ncm91cE5hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGdyb3VwTmFtZShfX2dyb3VwTmFtZSkge1xyXG4gICAgICAgIHRoaXMubV9ncm91cE5hbWUgPSBfX2dyb3VwTmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZGVmYXVsdFZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fZGVmYXVsdFZhbHVlO1xyXG4gICAgfVxyXG4gICAgc2V0IGRlZmF1bHRWYWx1ZShfX2RlZmF1bHRWYWx1ZSkge1xyXG4gICAgICAgIHRoaXMubV9kZWZhdWx0VmFsdWUgPSBfX2RlZmF1bHRWYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcmFkaW9UeXBlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fcmFkaW9UeXBlO1xyXG4gICAgfVxyXG4gICAgc2V0IHJhZGlvVHlwZShfX3JhZGlvVHlwZSkge1xyXG4gICAgICAgIHRoaXMubV9yYWRpb1R5cGUgPSBfX3JhZGlvVHlwZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiBnZXRTVkdGaWVsZE9iamVjdFxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlJhZGlvRmllbGQjZ2V0U1ZHRmllbGRPYmplY3RcclxuICAgICAqIEBtZW1iZXJPZiBtb2R1bGU6VGVtcGxhdGUuQ2hlY2tib3hGaWVsZFxyXG4gICAgICogQGRlc2NyaXB0aW9uICDtlYTrk5zsnZgg7KCV67O066W8IOqwgOyngOqzoCBTVkcgRWxlbWVudOulvCDsg53shLHtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGNhbnZhcyBTbmFwIFNWR+ydmCBDYW52YXMgT2JqZWN0XHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbWFpbkdyb3VwICAgU1ZH7J2YIOuplOyduCBOb2RlXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gc2NhbGUgIO2YhOyerCBQREbsnZggU2NhbGVcclxuICAgICAqIEBwYXJhbSB7RUxFTUVOVH0gb3duZXJOb2RlICAg7ZW064u5IO2UhOuhnOygne2KuOydmCDstZzsg4Hri6ggRWxlbWVudOulvCDqsJDsi7jqs6Ag7J6I64qUIEVsZW1lbnRcclxuICAgICAqIEBwYXJhbSB7Q2FsbGJhY2t9IHJlbW92ZURyYWdPdmVyR3JvdXBGdW5jICAgICDrk5zrnpjqt7gg65CY7Ja0IOyEoO2DneuQmOyWtOynhCBGaWVsZCBHcm91cOydhCDsoJzqsbDtlZjripQgY2FsbGJhY2sgZnVuY3Rpb25cclxuICAgICAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNoYW5nZVZhbHVlRXZlbnRGdW5jICAgICDsho3shLHqsJLsnbQg67OA7ZWg65WMIO2YuOy2nOuQmOuKlCBjYWxsYmFjayBmdW5jdGlvblxyXG4gICAgICogQHBhcmFtIHtDYWxsYmFja30gY2hhbmdlRnJlZVRyYW5zZm9ybUZ1bmMgICAgIEZyZWVUcmFuc2Zvcm3snYQg64uk7IucIOyDneyEse2VmOq4sCDsnITtlZwgY2FsbGJhY2sgZnVuY3Rpb25cclxuICAgICAqIEByZXR1cm4ge09iamVjdH0gU1ZHIE5vZGUgRWxlbWVudFxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBnZXRTVkdGaWVsZE9iamVjdChjYW52YXMsIG1haW5Hcm91cCwgc2NhbGUsIG93bmVyTm9kZSwgcmVtb3ZlRHJhZ092ZXJHcm91cEZ1bmMsIGNoYW5nZVZhbHVlRXZlbnRGdW5jLCBjaGFuZ2VGcmVlVHJhbnNmb3JtRnVuYywgYmdDb2xvcj1cIiNmZmFjN2ZcIikge1xyXG4gICAgICAgIGxldCBncm91cCA9IG1haW5Hcm91cC5ncm91cCgpO1xyXG4gICAgICAgIGdyb3VwLmF0dHIoe1xyXG4gICAgICAgICAgICBpZDogdGhpcy5pZCArIFwiR3JvdXBcIixcclxuICAgICAgICAgICAgY3Vyc29yOiBcIm1vdmVcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxldCByZWN0ID0gY2FudmFzLnJlY3QodGhpcy54LCB0aGlzLnksIHRoaXMud2lkdGggKiBzY2FsZSwgdGhpcy5oZWlnaHQgKiBzY2FsZSk7XHJcbiAgICAgICAgcmVjdC5hdHRyKHtcclxuICAgICAgICAgICAgaWQ6IHRoaXMuaWQsXHJcbiAgICAgICAgICAgIFwiZmlsbC1vcGFjaXR5XCI6IFwiMC42XCIsXHJcbiAgICAgICAgICAgIFwiZmlsbFwiOiBiZ0NvbG9yXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZ3JvdXAuYXBwZW5kKHJlY3QpO1xyXG4gICAgICAgIGNvbnN0IHJhZGlvUGF0aCA9IHRoaXMubV9yYWRpb1R5cGUgPT09IENPTlNUQU5UUy5SQURJT19UWVBFXzEgPyBDT05TVEFOVFMuUkFJT0RfVFlQRV8xX1BBVEggOiBDT05TVEFOVFMuUkFJT0RfVFlQRV8yX1BBVEggXHJcbiAgICAgICAgY29uc3QgcmFkaW9TdHJpbmcgPSAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeD1cIicgKyB0aGlzLnggKyAncHhcIiB5PVwiJyArIHRoaXMueSArICdweFwiIHdpZHRoPVwiJyArIHRoaXMud2lkdGggKiBzY2FsZSArXHJcbiAgICAgICAgICAgICdweFwiIGhlaWdodD1cIicgKyB0aGlzLmhlaWdodCAqIHNjYWxlICsgJ3B4XCIgIHZpZXdCb3g9XCIwIDAgNDggNDhcIj4gJyArIHJhZGlvUGF0aCArICcgPC9zdmcgPidcclxuICAgICAgICBjb25zdCBwID0gU25hcC5wYXJzZShyYWRpb1N0cmluZyk7XHJcbiAgICAgICAgZ3JvdXAuYXBwZW5kKHApO1xyXG5cclxuXHJcbiAgICAgICAgZ3JvdXAuaG92ZXIoXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLy8gZl9pblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7IC8vIGZfb3V0XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBsZXQgX3JhZGlvRmllbGQgPSB0aGlzO1xyXG4gICAgICAgIGxldCBtb3VzZVBvcyA9IHsgeDogMCwgeTogMCB9O1xyXG4gICAgICAgIGdyb3VwLm1vdXNlZG93bihmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgIG1vdXNlUG9zLnggPSBldnQucGFnZVg7XHJcbiAgICAgICAgICAgIG1vdXNlUG9zLnkgPSBldnQucGFnZVk7XHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gbWFpbkdyb3VwLnNlbGVjdEFsbCgnZycpO1xyXG4gICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCAhPT0gZ3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIVV0aWxzLmlzRW1wdHlPYmplY3QoZWxlbWVudC5mcmVlVHJhbnNmb3JtKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmZyZWVUcmFuc2Zvcm0uaGlkZVJlc2l6ZUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFVdGlscy5pc0VtcHR5T2JqZWN0KGdyb3VwLmZyZWVUcmFuc2Zvcm0pKSB7XHJcbiAgICAgICAgICAgICAgICBncm91cC5mcmVlVHJhbnNmb3JtLnNob3dSZXNpemVIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VGcmVlVHJhbnNmb3JtRnVuYyhncm91cCwgcmVjdC5hdHRyKFwid2lkdGhcIiksIHJlY3QuYXR0cihcImhlaWdodFwiKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZ3JvdXAubW91c2V1cChmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgIGlmIChncm91cC5wYXJlbnQoKS5hdHRyKFwiaWRcIikgPT09IENPTlNUQU5UUy5EUkFHX0JPWF9OQU1FKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMobW91c2VQb3MueCAtIGV2dC5wYWdlWCkgPiBDT05TVEFOVFMuTUlOSU1VTV9EUkFHX1NJWkVcclxuICAgICAgICAgICAgICAgICAgICB8fCBNYXRoLmFicyhtb3VzZVBvcy55IC0gZXZ0LnBhZ2VZKSA+IENPTlNUQU5UUy5NSU5JTVVNX0RSQUdfU0laRSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlbW92ZURyYWdPdmVyR3JvdXBGdW5jLmNhbGwoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gbWFpbkdyb3VwLnNlbGVjdEFsbCgnZycpO1xyXG4gICAgICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50ICE9PSBncm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIVV0aWxzLmlzRW1wdHlPYmplY3QoZWxlbWVudC5mcmVlVHJhbnNmb3JtKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5mcmVlVHJhbnNmb3JtLmhpZGVSZXNpemVIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmICghVXRpbHMuaXNFbXB0eU9iamVjdChncm91cC5mcmVlVHJhbnNmb3JtKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwLmZyZWVUcmFuc2Zvcm0uc2hvd1Jlc2l6ZUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlRnJlZVRyYW5zZm9ybUZ1bmMoZ3JvdXAsIHJlY3QuYXR0cihcIndpZHRoXCIpLCByZWN0LmF0dHIoXCJoZWlnaHRcIikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgX3JhZGlvRmllbGQuY29uc3RydWN0b3Iuc2hvd0ZpZWxkc0F0dHJpYnV0ZShvd25lck5vZGUsIFtfcmFkaW9GaWVsZF0sIHVuZGVmaW5lZCwgbWFpbkdyb3VwLCBVdGlscy5nZXRVc2VySW5mb09wdHNMaXN0KCksIFV0aWxzLmdldERWRmllbGRPcHRzTGlzdCgpLCBjaGFuZ2VWYWx1ZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfcmFkaW9GaWVsZC5jb25zdHJ1Y3Rvci5zaG93RmllbGRzQXR0cmlidXRlKG93bmVyTm9kZSwgW19yYWRpb0ZpZWxkXSwgdW5kZWZpbmVkLCBtYWluR3JvdXAsIFV0aWxzLmdldFVzZXJJbmZvT3B0c0xpc3QoKSwgVXRpbHMuZ2V0RFZGaWVsZE9wdHNMaXN0KCksIGNoYW5nZVZhbHVlRXZlbnRGdW5jKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBncm91cDtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgY2hhbmdlVGV4dEVsZW1lbnQoZmllbGRHcm91cCwgc2NhbGUpIHtcclxuICAgICAgICBmaWVsZEdyb3VwLnNlbGVjdChcInN2Z1wiKS5yZW1vdmUoKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCByYWRpb1BhdGggPSB0aGlzLm1fcmFkaW9UeXBlID09PSBDT05TVEFOVFMuUkFESU9fVFlQRV8xID8gQ09OU1RBTlRTLlJBSU9EX1RZUEVfMV9QQVRIIDogQ09OU1RBTlRTLlJBSU9EX1RZUEVfMl9QQVRIIFxyXG4gICAgICAgIGNvbnN0IHJhZGlvU3RyaW5nID0gJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHg9XCInICsgdGhpcy54ICsgJ3B4XCIgeT1cIicgKyB0aGlzLnkgKyAncHhcIiB3aWR0aD1cIicgKyB0aGlzLndpZHRoICogc2NhbGUgK1xyXG4gICAgICAgICAgICAncHhcIiBoZWlnaHQ9XCInICsgdGhpcy5oZWlnaHQgKiBzY2FsZSArICdweFwiICB2aWV3Qm94PVwiMCAwIDQ4IDQ4XCI+ICcgKyByYWRpb1BhdGggKyAnIDwvc3ZnID4nXHJcbiAgICAgICAgY29uc3QgcCA9IFNuYXAucGFyc2UocmFkaW9TdHJpbmcpO1xyXG4gICAgICAgIGZpZWxkR3JvdXAuYXBwZW5kKHApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBmdW5jdGlvbiBzaG93RmllbGRBdHRyaWJ1dGVcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5SYWRpb0ZpZWxkI3Nob3dGaWVsZEF0dHJpYnV0ZVxyXG4gICAgICogQGRlc2NyaXB0aW9uICAoU3RhdGljKSDtlYTrk5zsnZgg7IaN7ISxIO2MneyXheywveydhCDshKTsoJXtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtFTEVNRU5UfSBub2RlICDsho3shLEg7Yyd7JeFIE5vZGVcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBpZFZhbHVlICAgICDtlYTrk5zsnZggaWTqsJJcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSByZXF1aXJlZFZhbHVlICAgICDtlYTsiJjsl6zrtoAg6rCSXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gb3duZXJJZFZhbHVlICAgICDshJzrqoXsnpAg7JWE7J2065SUXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZ3JvdXBOYW1lVmFsdWUgICAgIOudvOuUlOyYpCDqt7jro7kg7J2066aELlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGR2VmFsdWUgICAgIOq4sOuzuOqwklxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gdXNlckxpc3QgICDshJzrqoXsnpAg66as7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge0NhbGxiYWNrfSBjaGFuZ2VFdmVudEZ1bmMgICAg7IaN7ISx6rCS7J20IOuzgO2VoOuVjCDtmLjstpzrkJjripQgY2FsbGJhY2sgZnVuY3Rpb25cclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHNob3dGaWVsZEF0dHJpYnV0ZShub2RlLFxyXG4gICAgICAgIGlkVmFsdWUsIGZpZWxkSWRWYWx1ZSwgcmVxdWlyZWRWYWx1ZSwgb3duZXJJZFZhbHVlLCBncm91cE5hbWVWYWx1ZSwgZHZWYWx1ZSwgcmFpb2RUeXBlVmFsdWUsXHJcbiAgICAgICAgdXNlckxpc3QsXHJcbiAgICAgICAgY2hhbmdlRXZlbnRGdW5jKSB7XHJcblxyXG4gICAgICAgIHZhciBwYW5lbCA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVBhbmVsTm9kZSgpO1xyXG5cclxuICAgICAgICB2YXIgcmVxdWlyZVJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVRvZ2dsZUJ1dHRvbk5vZGUoaWRWYWx1ZSwgXCJyZXF1aXJlZFwiLCBcIlRlbXBsYXRlLmlzUmVxdWlyZWRcIiwgcmVxdWlyZWRWYWx1ZSwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChyZXF1aXJlUm93KTtcclxuXHJcbiAgICAgICAgbGV0IHVzZURlZmF1bE9wdGlvbk5vZGUgPSBVdGlscy5nZXRVc2VySW5mb09wdHNMaXN0Q291bnQoKSAhPT0gMTtcclxuICAgICAgICB2YXIgb3duZXJTZWxlY3RSb3cgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVTZWxlY3ROb2RlKGlkVmFsdWUsIFwib3duZXJJZFwiLCB1c2VyTGlzdCwgXCJcIiwgdXNlRGVmYXVsT3B0aW9uTm9kZSk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQob3duZXJTZWxlY3RSb3cpO1xyXG5cclxuICAgICAgICBsZXQgb3duZXJTZWxlY3QgPSBvd25lclNlbGVjdFJvdy5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xyXG4gICAgICAgICQob3duZXJTZWxlY3QpLnNlbGVjdDIoe1xyXG4gICAgICAgICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXHJcbiAgICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQob3duZXJTZWxlY3QpLnZhbChvd25lcklkVmFsdWUpLnRyaWdnZXIoXCJjaGFuZ2VcIik7XHJcbiAgICAgICAgJChvd25lclNlbGVjdCkub24oXCJjaGFuZ2VcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuXHJcbiAgICAgICAgdmFyIHJhZGlvVHlwZVJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVNlbGVjdE5vZGUoaWRWYWx1ZSwgXCJyYWRpb1R5cGVcIiwgVXRpbHMucmFkaW9UeXBlTGlzdCwgXCJcIiwgdXNlRGVmYXVsT3B0aW9uTm9kZSk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQocmFkaW9UeXBlUm93KTtcclxuXHJcbiAgICAgICAgbGV0IHJhZGlvVHlwZVNlbGVjdCA9IHJhZGlvVHlwZVJvdy5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xyXG4gICAgICAgICQocmFkaW9UeXBlU2VsZWN0KS5zZWxlY3QyKHtcclxuICAgICAgICAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxyXG4gICAgICAgICAgICB3aWR0aDogXCIxMDAlXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKHJhZGlvVHlwZVNlbGVjdCkudmFsKHJhaW9kVHlwZVZhbHVlKS50cmlnZ2VyKFwiY2hhbmdlXCIpO1xyXG4gICAgICAgICQocmFkaW9UeXBlU2VsZWN0KS5vbihcImNoYW5nZVwiLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG5cclxuICAgICAgICB2YXIgZ3JvdXBSb3cgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVJbnB1dE5vZGUoaWRWYWx1ZSwgXCJncm91cE5hbWVcIiwgXCJUZW1wbGF0ZS5yYWRpb0dyb3VwTmFtZVRleHRcIiwgZ3JvdXBOYW1lVmFsdWUsIFwiXCIsIFwiXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQoZ3JvdXBSb3cpO1xyXG5cclxuICAgICAgICB2YXIgZHZWYWx1ZVJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZUlucHV0Tm9kZShpZFZhbHVlLCBcImRlZmF1bHRWYWx1ZVwiLCBcIlRlbXBsYXRlLnJhZGlvVmFsdWVUZXh0XCIsIGR2VmFsdWUsIFwiXCIsIFwiXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQoZHZWYWx1ZVJvdyk7XHJcblxyXG4gICAgICAgIHZhciBmaWVsZElkVmFsdWVSb3cgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVJbnB1dE5vZGUoaWRWYWx1ZSwgXCJmaWVsZElkXCIsIFwiVGVtcGxhdGUuZmllbGRJZFRleHRcIiwgZmllbGRJZFZhbHVlLCBcIlwiLCBcIlwiLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG4gICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKGZpZWxkSWRWYWx1ZVJvdyk7XHJcblxyXG4gICAgICAgIHBhbmVsLnNldEF0dHJpYnV0ZShcIkZpZWxkLWlkLWxpc3RcIiwgaWRWYWx1ZSk7XHJcblxyXG4gICAgICAgIG5vZGUuY2xhc3NOYW1lID0gXCJFZGl0b3ItQXR0cmlidXRlXCI7XHJcbiAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKFwiQmFzZS1GaWVsZFwiKTtcclxuICAgICAgICBub2RlLmFwcGVuZENoaWxkKHBhbmVsKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gc2hvd0ZpZWxkc0F0dHJpYnV0ZVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlJhZGlvRmllbGQjc2hvd0ZpZWxkc0F0dHJpYnV0ZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOuTnOydmCDsho3shLEg7Yyd7JeF7LC97J2EIOyEpOygle2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0VMRU1FTlR9IG93bmVyTm9kZSAg7IaN7ISxIO2MneyXhSBOb2RlXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBmaWVsZExpc3QgICAgIO2VhOuTnOuTpOydmCDrpqzsiqTtirhcclxuICAgICAqIEBwYXJhbSB7RUxFTUVOVH0gYXR0ck5vZGUgICDsho3shLEg7Yyd7JeF7J2YIE5vZGVcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtYWluR3JvdXAgICAgU1ZH7J2YIOuplOyduCBFbGVtZW50XHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSB1c2VyTGlzdCAgIOyEnOuqheyekCDrpqzsiqTtirhcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGR2T3B0aW9uTGlzdCAgIOq4sOuzuOqwkiDshKDtg50g66as7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge0NhbGxiYWNrfSBjaGFuZ2VFdmVudEZ1bmMgICAg7IaN7ISx6rCS7J20IOuzgO2VoOuVjCDtmLjstpzrkJjripQgY2FsbGJhY2sgZnVuY3Rpb25cclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHNob3dGaWVsZHNBdHRyaWJ1dGUob3duZXJOb2RlLCBmaWVsZExpc3QsIGF0dHJOb2RlLCBtYWluR3JvdXAsIHVzZXJMaXN0LCBkdk9wdGlvbkxpc3QsIGNoYW5nZUV2ZW50RnVuYykge1xyXG4gICAgICAgIGxldCBub2RlID0gYXR0ck5vZGU7XHJcbiAgICAgICAgaWYgKGF0dHJOb2RlID09PSBudWxsIHx8IFV0aWxzLmlzRW1wdHlPYmplY3QoYXR0ck5vZGUpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJib3ggPSBVdGlscy5tZXJnZUZpZWxkc0JCb3goZmllbGRMaXN0KTtcclxuICAgICAgICAgICAgbm9kZSA9IFV0aWxzLmNyZWF0ZUF0dHJidXRlUG9wdXAob3duZXJOb2RlLCBiYm94KTtcclxuICAgICAgICAgICAgVXRpbHMucmVwb3NpdGlvbkZpZWxkRGVsZXRlQnRuKG93bmVyTm9kZSwgYmJveC54LCBiYm94LnksIGJib3gud2lkdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBVdGlscy5yZW1vdmVBbGxDaGlsZE5vZGUobm9kZSk7XHJcblxyXG5cclxuICAgICAgICB2YXIgaWRWYWx1ZUFyciA9IFtdO1xyXG4gICAgICAgIGZpZWxkTGlzdC5mb3JFYWNoKChmaWVsZCkgPT4ge1xyXG4gICAgICAgICAgICBpZFZhbHVlQXJyLnB1c2goZmllbGQuaWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBpZFZhbHVlID0gaWRWYWx1ZUFyci5qb2luKCk7XHJcblxyXG4gICAgICAgIHZhciBvd25lcklkVmFsdWUgPSBmaWVsZExpc3RbMF0ub3duZXJJZDtcclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0ub3duZXJJZCAhPT0gb3duZXJJZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBvd25lcklkVmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZmllbGRJZFZhbHVlID0gZmllbGRMaXN0WzBdLmZpZWxkSWQ7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmZpZWxkSWQgIT09IGZpZWxkSWRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgZmllbGRJZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHJlcXVpcmVkVmFsdWUgPSBmaWVsZExpc3RbMF0ucmVxdWlyZWQ7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLnJlcXVpcmVkICE9PSByZXF1aXJlZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICByZXF1aXJlZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGdyb3VwTmFtZVZhbHVlID0gZmllbGRMaXN0WzBdLmdyb3VwTmFtZTtcclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0uZ3JvdXBOYW1lICE9PSBncm91cE5hbWVWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXBOYW1lVmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZHZWYWx1ZSA9IGZpZWxkTGlzdFswXS5kZWZhdWx0VmFsdWU7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmRlZmF1bHRWYWx1ZSAhPT0gZHZWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgZHZWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciByYWlvZFR5cGVWYWx1ZSA9IGZpZWxkTGlzdFswXS5tX3JhZGlvVHlwZTtcclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0ubV9yYWRpb1R5cGUgIT09IHJhaW9kVHlwZVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICByYWlvZFR5cGVWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFJhZGlvRmllbGQuc2hvd0ZpZWxkQXR0cmlidXRlKG5vZGUsXHJcbiAgICAgICAgICAgIGlkVmFsdWUsIGZpZWxkSWRWYWx1ZSwgcmVxdWlyZWRWYWx1ZSwgb3duZXJJZFZhbHVlLCBncm91cE5hbWVWYWx1ZSwgZHZWYWx1ZSwgcmFpb2RUeXBlVmFsdWUsXHJcbiAgICAgICAgICAgIHVzZXJMaXN0LFxyXG4gICAgICAgICAgICBjaGFuZ2VFdmVudEZ1bmMpO1xyXG4gICAgfVxyXG59XHJcblxyXG4iLCJcclxuLyoqXHJcbiAqIEBtb2R1bGUgVGVtcGxhdGUvRmllbGRcclxuKi9cclxuXHJcbmltcG9ydCB7IEJhc2VGaWVsZCB9IGZyb20gJy4vQmFzZUZpZWxkJztcclxuaW1wb3J0IHtVdGlsc30gZnJvbSAnLi8uLi91dGlscy91dGlscy5qcyc7XHJcbmltcG9ydCB7Q09OU1RBTlRTfSBmcm9tICcuLy4uL0NvbnN0YW50cy5qcyc7XHJcblxyXG4vKipcclxuICogQGRlc2NyaXB0aW9uIOyEnOuqhSDtlYTrk5wgQ2xhc3NcclxuICpcclxuICogQHByb3BlcnR5IHtOdW1iZXJ9IG1fc2lnblBlblRoaWNrbmVzcyB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlNpZ25GaWVsZCNtX3NpZ25QZW5UaGlja25lc3N9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBtX3NpZ25QZW5Db2xvciB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlNpZ25GaWVsZCNtX3NpZ25QZW5Db2xvcn1cclxuICpcclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZmllbGROYW1lIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuU2lnbkZpZWxkI2ZpZWxkTmFtZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gd2lkdGhWYWx1ZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlNpZ25GaWVsZCN3aWR0aFZhbHVlfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBoZWlnaHRWYWx1ZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlNpZ25GaWVsZCNoZWlnaHRWYWx1ZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZ2V0U1ZHRmllbGRPYmplY3Qge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5TaWduRmllbGQjZ2V0U1ZHRmllbGRPYmplY3R9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IG1ha2VTVkdUZXh0IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuU2lnbkZpZWxkI21ha2VTVkdUZXh0fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBzaG93RmllbGRBdHRyaWJ1dGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5TaWduRmllbGQjc2hvd0ZpZWxkQXR0cmlidXRlfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBzaG93RmllbGRzQXR0cmlidXRlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuU2lnbkZpZWxkI3Nob3dGaWVsZHNBdHRyaWJ1dGV9XHJcbiAqXHJcbiAqIEBhdWdtZW50cyBCYXNlRmllbGQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS5CYXNlRmllbGQjQmFzZUZpZWxkfVxyXG4gKiBARmlsZU5hbWUgU2lnbkZpZWxkLmpzXHJcbiAqIEBzaW5jZSAyMDIxLjA1LjMxXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU2lnbkZpZWxkIGV4dGVuZHMgQmFzZUZpZWxkIHtcclxuICAvKipcclxuICAgKiBAY29uc3RydWN0b3JcclxuICAgKiBAcGFyYW0gaWQg7ZWE65Oc7J2YIElEXHJcbiAgICogQHBhcmFtIHBhZ2VObyDtlYTrk5zqsIAg7IaN7ZWcIO2OmOydtOyngCDrsojtmLhcclxuICAgKiBAcGFyYW0geCDtlYTrk5zsnZggc3Zn7IOB7J2YIHjsooztkZxcclxuICAgKiBAcGFyYW0geSDtlYTrk5zsnZggc3Zn7IOB7J2YIHnsooztkZxcclxuICAgKlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKGlkLCBwYWdlTm8sIHgsIHksIHVzZURyYXdTaWduLCB1c2VJbWFnZVNpZ24sIHVzZVJlZ1NpZ24pIHtcclxuICAgIHN1cGVyKGlkLCBwYWdlTm8sIHgsIHksIFNpZ25GaWVsZC53aWR0aFZhbHVlKCksIFNpZ25GaWVsZC5oZWlnaHRWYWx1ZSgpKTtcclxuICAgIHRoaXMubV90eXBlID0gU2lnbkZpZWxkLmZpZWxkTmFtZSgpO1xyXG5cclxuICAgIHRoaXMubV9raW5kID0gVXRpbHMudHJhbnNsYXRlRm9yS2V5KFwiVGVtcGxhdGUuc2lnbkZpZWxkVG9vbFwiKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEB0eXBlIHtOdW1iZXJ9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUuUmFkaW9GaWVsZCNtX3NpZ25QZW5UaGlja25lc3NcclxuICAgICAqIEBkZXNjcmlwdGlvbiDshJzrqoXtjpzsnZgg65GQ6ruYXHJcbiAgICAgKiBAZGVmYXVsdCAxLjBcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiAvLyBnZXR0ZXIgc2lnblBlblRoaWNrbmVzcygpXHJcbiAgICAgKiAvLyBzZXR0ZXIgc2lnblBlblRoaWNrbmVzcyh2YWwpXHJcbiAgICAgKi9cclxuICAgIHRoaXMubV9zaWduUGVuVGhpY2tuZXNzID0gMTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUuUmFkaW9GaWVsZCNtX3NpZ25QZW5Db2xvclxyXG4gICAgICogQGRlc2NyaXB0aW9uIOyEnOuqhe2OnOydmCDsg4nsg4FcclxuICAgICAqIEBkZWZhdWx0ICMwMDAwMDBcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiAvLyBnZXR0ZXIgc2lnblBlbkNvbG9yKClcclxuICAgICAqIC8vIHNldHRlciBzaWduUGVuQ29sb3IodmFsKVxyXG4gICAgICovXHJcbiAgICB0aGlzLm1fc2lnblBlbkNvbG9yID0gXCIjMDAwMDAwXCI7XHJcbiAgICBpZiAoVXRpbHMuaXNTdHJpbmdFbXB0eShpZCkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5tX2ZpZWxkSWQgPSB0aGlzLm1faWQucmVwbGFjZSh0aGlzLm1fdHlwZSwgdGhpcy5tX2tpbmQgKyBcIi1cIik7XHJcblxyXG4gICAgU2lnbkZpZWxkLnVzZURyYXdTaWduRGVmID0gdXNlRHJhd1NpZ247XHJcbiAgICBTaWduRmllbGQudXNlSW1hZ2VTaWduRGVmID0gdXNlSW1hZ2VTaWduO1xyXG4gICAgU2lnbkZpZWxkLnVzZVJlZ1NpZ25EZWYgPSB1c2VSZWdTaWduO1xyXG5cclxuXHJcbiAgICB0aGlzLm1fdXNlRHJhd1NpZ24gPSB1c2VEcmF3U2lnbjtcclxuICAgIHRoaXMubV91c2VJbWFnZVNpZ24gPSB1c2VJbWFnZVNpZ247XHJcbiAgICB0aGlzLm1fdXNlUmVnU2lnbiA9IHVzZVJlZ1NpZ247XHJcbiAgICAvL3JlZ1NpZ25BcGlcclxuICAgIHRoaXMubV9yZWdTaWduQXBpVXJsID0gXCJcIjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBmaWVsZE5hbWVcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuU2lnbkZpZWxkI2ZpZWxkTmFtZVxyXG4gICAqIEByZXR1cm4ge1N0cmluZ31cclxuICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE65OcIO2DgOyeheydmCDsnbTrpoRcclxuICAgKiBAc3RhdGljXHJcbiAgICpcclxuICAgKi9cclxuICBzdGF0aWMgZmllbGROYW1lKCkge1xyXG4gICAgcmV0dXJuIFwiU2lnbkZpZWxkXCI7XHJcbiAgfVxyXG5cclxuICBhbmNlc3RvcnMoKSB7XHJcbiAgICByZXR1cm4gW1wiU0ZcIiwgXCJCRlwiXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiB3aWR0aFZhbHVlXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlNpZ25GaWVsZCN3aWR0aFZhbHVlXHJcbiAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOuTnOydmCDstIjquLAg6rCA66GcIOq4uOydtFxyXG4gICAqIEByZXR1cm4ge051bWJlcn1cclxuICAgKiBAc3RhdGljXHJcbiAgICpcclxuICAgKi9cclxuICBzdGF0aWMgd2lkdGhWYWx1ZSgpIHtcclxuICAgIHJldHVybiAxNTA7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gaGVpZ2h0VmFsdWVcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuU2lnbkZpZWxkI2hlaWdodFZhbHVlXHJcbiAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOuTnOydmCDstIjquLAg7IS466GcIOq4uOydtFxyXG4gICAqIEByZXR1cm4ge051bWJlcn1cclxuICAgKiBAc3RhdGljXHJcbiAgICpcclxuICAgKi9cclxuICBzdGF0aWMgaGVpZ2h0VmFsdWUoKSB7XHJcbiAgICByZXR1cm4gNjA7XHJcbiAgfVxyXG5cclxuICBnZXQgc2lnblBlblRoaWNrbmVzcygpIHtcclxuICAgIHJldHVybiB0aGlzLm1fc2lnblBlblRoaWNrbmVzcztcclxuICB9XHJcbiAgc2V0IHNpZ25QZW5UaGlja25lc3MoX19zaWduUGVuVGhpY2tuZXNzKSB7XHJcbiAgICB0aGlzLm1fc2lnblBlblRoaWNrbmVzcyA9IF9fc2lnblBlblRoaWNrbmVzcztcclxuICB9XHJcblxyXG4gIGdldCBzaWduUGVuQ29sb3IoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5tX3NpZ25QZW5Db2xvcjtcclxuICB9XHJcbiAgc2V0IHNpZ25QZW5Db2xvcihfX3NpZ25QZW5Db2xvcikge1xyXG4gICAgdGhpcy5tX3NpZ25QZW5Db2xvciA9IF9fc2lnblBlbkNvbG9yO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBzaG93RmllbGRBdHRyaWJ1dGVcclxuICAgKiBAc3RhdGljXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlNpZ25GaWVsZCNzaG93RmllbGRBdHRyaWJ1dGVcclxuICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgIO2VhOuTnOydmCDsho3shLEg7Yyd7JeF7LC97J2EIOyEpOygle2VnOuLpC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RUxFTUVOVH0gbm9kZSAg7IaN7ISxIO2MneyXhSBOb2RlXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGlkVmFsdWUgICAgIO2VhOuTnOydmCBpZOqwklxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSByZXF1aXJlZFZhbHVlICAgICDtlYTsiJjsl6zrtoAg6rCSXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IG93bmVySWRWYWx1ZSAgICAg7ISc66qF7J6QIOyVhOydtOuUlFxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzaWduUGVuVGhpY2tuZXNzVmFsdWUgICAgIOyCrOyduCDtjKwg65GQ6rmoXHJcbiAgICogQHBhcmFtIHtBcnJheX0gdXNlckxpc3QgICDshJzrqoXsnpAg66as7Iqk7Yq4XHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHVzZURyYXdTaWduICAgICDtlYTsiJjsl6zrtoAg6rCSXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHVzZUltYWdlU2lnbiAgICAg7ZWE7IiY7Jes67aAIOqwklxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB1c2VSZWdTaWduICAgICDtlYTsiJjsl6zrtoAg6rCSXHJcbiAgICogQHBhcmFtIHtDYWxsYmFja30gY2hhbmdlRXZlbnRGdW5jICAgIOyGjeyEseqwkuydtCDrs4DtlaDrlYwg7Zi47Lac65CY64qUIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIHN0YXRpYyBzaG93RmllbGRBdHRyaWJ1dGUoXHJcbiAgICBub2RlLFxyXG4gICAgaWRWYWx1ZSxcclxuICAgIGZpZWxkSWRWYWx1ZSxcclxuICAgIHJlcXVpcmVkVmFsdWUsXHJcbiAgICBvd25lcklkVmFsdWUsXHJcbiAgICBzaWduUGVuVGhpY2tuZXNzVmFsdWUsXHJcbiAgICB1c2VyTGlzdCxcclxuICAgIHVzZURyYXdTaWduVmFsdWUsXHJcbiAgICB1c2VJbWFnZVNpZ25WYWx1ZSxcclxuICAgIHVzZVJlZ1NpZ25WYWx1ZSxcclxuICAgIHJlZ1NpZ25BcGlVcmxWYWx1ZSxcclxuICAgIGNoYW5nZUV2ZW50RnVuYyxcclxuICAgIHNpZ25UYWJTaG93T3B0XHJcbiAgKSB7XHJcbiAgICB2YXIgcGFuZWwgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVQYW5lbE5vZGUoKTtcclxuXHJcbiAgICB2YXIgcmVxdWlyZVJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVRvZ2dsZUJ1dHRvbk5vZGUoXHJcbiAgICAgIGlkVmFsdWUsXHJcbiAgICAgIFwicmVxdWlyZWRcIixcclxuICAgICAgXCJUZW1wbGF0ZS5pc1JlcXVpcmVkXCIsXHJcbiAgICAgIHJlcXVpcmVkVmFsdWUsXHJcbiAgICAgIGNoYW5nZUV2ZW50RnVuY1xyXG4gICAgKTtcclxuICAgIHBhbmVsLmFwcGVuZENoaWxkKHJlcXVpcmVSb3cpO1xyXG5cclxuICAgIGxldCB1c2VEZWZhdWxPcHRpb25Ob2RlID0gVXRpbHMuZ2V0VXNlckluZm9PcHRzTGlzdENvdW50KCkgIT09IDE7XHJcbiAgICB2YXIgb3duZXJTZWxlY3RSb3cgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVTZWxlY3ROb2RlKFxyXG4gICAgICBpZFZhbHVlLFxyXG4gICAgICBcIm93bmVySWRcIixcclxuICAgICAgdXNlckxpc3QsXHJcbiAgICAgIFwiXCIsXHJcbiAgICAgIHVzZURlZmF1bE9wdGlvbk5vZGVcclxuICAgICk7XHJcbiAgICBwYW5lbC5hcHBlbmRDaGlsZChvd25lclNlbGVjdFJvdyk7XHJcblxyXG4gICAgbGV0IG93bmVyU2VsZWN0ID0gb3duZXJTZWxlY3RSb3cucXVlcnlTZWxlY3RvcihcInNlbGVjdFwiKTtcclxuICAgICQob3duZXJTZWxlY3QpLnNlbGVjdDIoe1xyXG4gICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXHJcbiAgICAgIHdpZHRoOiBcIjEwMCVcIixcclxuICAgIH0pO1xyXG4gICAgJChvd25lclNlbGVjdCkudmFsKG93bmVySWRWYWx1ZSkudHJpZ2dlcihcImNoYW5nZVwiKTtcclxuICAgICQob3duZXJTZWxlY3QpLm9uKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcblxyXG4gICAgdmFyIHBlbldpZHRoU2VsZWN0Um93ID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlU2VsZWN0Tm9kZShcclxuICAgICAgaWRWYWx1ZSxcclxuICAgICAgXCJzaWduUGVuVGhpY2tuZXNzXCIsXHJcbiAgICAgIFV0aWxzLmdldFNpZ25QZW5XaWR0aENvbWJvQm94KCksXHJcbiAgICAgIFwiVGVtcGxhdGUuc2lnblBlblRoaWNrbmVzc1RleHRcIixcclxuICAgICAgZmFsc2VcclxuICAgICk7XHJcbiAgICBwYW5lbC5hcHBlbmRDaGlsZChwZW5XaWR0aFNlbGVjdFJvdyk7XHJcblxyXG4gICAgbGV0IHBlbldpZHRoU2VsZWN0ID0gcGVuV2lkdGhTZWxlY3RSb3cucXVlcnlTZWxlY3RvcihcInNlbGVjdFwiKTtcclxuICAgICQocGVuV2lkdGhTZWxlY3QpLnNlbGVjdDIoe1xyXG4gICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXHJcbiAgICAgIHdpZHRoOiBcIjEwMCVcIixcclxuICAgIH0pO1xyXG4gICAgJChwZW5XaWR0aFNlbGVjdCkudmFsKHNpZ25QZW5UaGlja25lc3NWYWx1ZSkudHJpZ2dlcihcImNoYW5nZVwiKTtcclxuICAgICQocGVuV2lkdGhTZWxlY3QpLm9uKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcblxyXG4gICAgdmFyIGZpZWxkSWRWYWx1ZVJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZUlucHV0Tm9kZShcclxuICAgICAgaWRWYWx1ZSxcclxuICAgICAgXCJmaWVsZElkXCIsXHJcbiAgICAgIFwiVGVtcGxhdGUuZmllbGRJZFRleHRcIixcclxuICAgICAgZmllbGRJZFZhbHVlLFxyXG4gICAgICBcIlwiLFxyXG4gICAgICBcIlwiLFxyXG4gICAgICBjaGFuZ2VFdmVudEZ1bmNcclxuICAgICk7XHJcbiAgICBwYW5lbC5hcHBlbmRDaGlsZChmaWVsZElkVmFsdWVSb3cpO1xyXG5cclxuICAgIC8qXHJcbiAgICAgICAgMTIxNCBsYncg7Iuc7J6RXHJcbiAgICAgICAgKi9cclxuXHJcbiAgICBcclxuICAgIHRoaXMudXNlRHJhd1NpZ25EZWYgPSBzaWduVGFiU2hvd09wdC51c2VEcmF3U2lnbjtcclxuICAgIHRoaXMudXNlSW1hZ2VTaWduRGVmID0gc2lnblRhYlNob3dPcHQudXNlSW1hZ2VTaWduO1xyXG4gICAgdGhpcy51c2VSZWdTaWduRGVmID0gc2lnblRhYlNob3dPcHQudXNlUmVnU2lnbjtcclxuXHJcbiAgICBpZiAodGhpcy51c2VEcmF3U2lnbkRlZiA9PSB1bmRlZmluZWQpe1xyXG4gICAgICB0aGlzLnVzZURyYXdTaWduRGVmID0gXCJ0cnVlXCI7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy51c2VJbWFnZVNpZ25EZWYgPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHRoaXMudXNlSW1hZ2VTaWduRGVmID0gXCJ0cnVlXCI7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy51c2VSZWdTaWduRGVmID09IHVuZGVmaW5lZCkge1xyXG4gICAgICB0aGlzLnVzZVJlZ1NpZ25EZWYgPSBcInRydWVcIjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgXHJcbiAgICAvLzEu7Y6cXHJcbiAgICBpZiAoXCJ0cnVlXCIgPT0gdGhpcy51c2VEcmF3U2lnbkRlZiB8fCB1c2VEcmF3U2lnblZhbHVlID09IFwidHJ1ZVwiKSB7XHJcbiAgICAgIHZhciB1c2VEcmF3U2lnblJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVRvZ2dsZUJ1dHRvbk5vZGUoXHJcbiAgICAgICAgaWRWYWx1ZSxcclxuICAgICAgICBcInVzZURyYXdTaWduXCIsXHJcbiAgICAgICAgXCJUZW1wbGF0ZS5kcmF3U2lnblRleHRcIixcclxuICAgICAgICB1c2VEcmF3U2lnblZhbHVlLFxyXG4gICAgICAgIGNoYW5nZUV2ZW50RnVuY1xyXG4gICAgICApO1xyXG4gICAgICBwYW5lbC5hcHBlbmRDaGlsZCh1c2VEcmF3U2lnblJvdyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8yLiDsnbTrr7jsp4BcclxuICAgIGlmIChcInRydWVcIiA9PSB0aGlzLnVzZUltYWdlU2lnbkRlZiB8fCB1c2VJbWFnZVNpZ25WYWx1ZSA9PSBcInRydWVcIikge1xyXG4gICAgICB2YXIgdXNlSW1hZ2VTaWduUm93ID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlVG9nZ2xlQnV0dG9uTm9kZShcclxuICAgICAgICBpZFZhbHVlLFxyXG4gICAgICAgIFwidXNlSW1hZ2VTaWduXCIsXHJcbiAgICAgICAgXCJUZW1wbGF0ZS5pbWFnZVNpZ25UZXh0XCIsXHJcbiAgICAgICAgdXNlSW1hZ2VTaWduVmFsdWUsXHJcbiAgICAgICAgY2hhbmdlRXZlbnRGdW5jXHJcbiAgICAgICk7XHJcbiAgICAgIHBhbmVsLmFwcGVuZENoaWxkKHVzZUltYWdlU2lnblJvdyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8zLiDrk7HroZ3rkJwg7J2066+47KeAXHJcbiAgICBpZiAoXCJ0cnVlXCIgPT0gdGhpcy51c2VSZWdTaWduRGVmIHx8IHVzZVJlZ1NpZ25WYWx1ZSA9PSBcInRydWVcIikge1xyXG4gICAgICB2YXIgdXNlUmVnU2lnblJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVRvZ2dsZUJ1dHRvbk5vZGUoXHJcbiAgICAgICAgaWRWYWx1ZSxcclxuICAgICAgICBcInVzZVJlZ1NpZ25cIixcclxuICAgICAgICBcIlRlbXBsYXRlLnJlZ1NpZ25UZXh0XCIsXHJcbiAgICAgICAgdXNlUmVnU2lnblZhbHVlLFxyXG4gICAgICAgIGNoYW5nZUV2ZW50RnVuY1xyXG4gICAgICApO1xyXG4gICAgICBwYW5lbC5hcHBlbmRDaGlsZCh1c2VSZWdTaWduUm93KTtcclxuICAgIH1cclxuICAgIFxyXG5cclxuICAgIC8qIDEyMTUg7KCc7Jm4XHJcbiAgICB2YXIgcmVnU2lnbkFwaVVybFJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZUlucHV0Tm9kZShcclxuICAgICAgaWRWYWx1ZSxcclxuICAgICAgXCJyZWdTaWduQXBpVXJsXCIsXHJcbiAgICAgIFwiVGVtcGxhdGUucmVnU2lnbkFwaVVybFRleHRcIixcclxuICAgICAgcmVnU2lnbkFwaVVybFZhbHVlLFxyXG4gICAgICBcIuuTseuhneuQnCDsnbTrr7jsp4Ag7ISc66qF7YOt7JeQIOydtOuvuOyngOulvCDrtojrn6zsmKwg7IiYIOyeiOuPhOuhnSDshJzrsoTsnZggQVBJIFVSTOydhCDsnoXroKXtlanri4jri6QuXCIsXHJcbiAgICAgIFwiXCIsXHJcbiAgICAgIGNoYW5nZUV2ZW50RnVuY1xyXG4gICAgKTtcclxuICAgIHBhbmVsLmFwcGVuZENoaWxkKHJlZ1NpZ25BcGlVcmxSb3cpO1xyXG4gICAgKi9cclxuICAgIC8qXHJcbiAgICAgICAgMTIxNCBsYncg64GdXHJcbiAgICAgICAgKi9cclxuXHJcbiAgICBwYW5lbC5zZXRBdHRyaWJ1dGUoXCJGaWVsZC1pZC1saXN0XCIsIGlkVmFsdWUpO1xyXG5cclxuICAgIG5vZGUuY2xhc3NOYW1lID0gXCJFZGl0b3ItQXR0cmlidXRlXCI7XHJcbiAgICBub2RlLmNsYXNzTGlzdC5hZGQoXCJTaWduLUZpZWxkXCIpO1xyXG4gICAgbm9kZS5hcHBlbmRDaGlsZChwYW5lbCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gc2hvd0ZpZWxkc0F0dHJpYnV0ZVxyXG4gICAqIEBzdGF0aWNcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuU2lnbkZpZWxkI3Nob3dGaWVsZHNBdHRyaWJ1dGVcclxuICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE65Oc7J2YIOyGjeyEsSDtjJ3sl4XssL3snYQg7ISk7KCV7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtFTEVNRU5UfSBvd25lck5vZGUgIOyGjeyEsSDtjJ3sl4UgTm9kZVxyXG4gICAqIEBwYXJhbSB7QXJyYXl9IGZpZWxkTGlzdCAgICAg7ZWE65Oc65Ok7J2YIOumrOyKpO2KuFxyXG4gICAqIEBwYXJhbSB7RUxFTUVOVH0gYXR0ck5vZGUgICAg7IaN7ISxIO2MneyXheydmCBOb2RlXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1haW5Hcm91cCAgICBTVkfsnZgg66mU7J24IEVsZW1lbnRcclxuICAgKiBAcGFyYW0ge0FycmF5fSB1c2VyTGlzdCAgIOyEnOuqheyekCDrpqzsiqTtirhcclxuICAgKiBAcGFyYW0ge0FycmF5fSBkdk9wdGlvbkxpc3QgICDquLDrs7jqsJIg7ISg7YOdIOumrOyKpO2KuFxyXG4gICAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNoYW5nZUV2ZW50RnVuYyAgICDsho3shLHqsJLsnbQg67OA7ZWg65WMIO2YuOy2nOuQmOuKlCBjYWxsYmFjayBmdW5jdGlvblxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBzdGF0aWMgc2hvd0ZpZWxkc0F0dHJpYnV0ZShcclxuICAgIG93bmVyTm9kZSxcclxuICAgIGZpZWxkTGlzdCxcclxuICAgIGF0dHJOb2RlLFxyXG4gICAgbWFpbkdyb3VwLFxyXG4gICAgdXNlckxpc3QsXHJcbiAgICBkdk9wdGlvbkxpc3QsXHJcbiAgICBjaGFuZ2VFdmVudEZ1bmMsXHJcbiAgICBzaWduVGFiU2hvd09wdFxyXG4gICkge1xyXG4gICAgbGV0IG5vZGUgPSBhdHRyTm9kZTtcclxuICAgIGlmIChhdHRyTm9kZSA9PT0gbnVsbCB8fCBVdGlscy5pc0VtcHR5T2JqZWN0KGF0dHJOb2RlKSkge1xyXG4gICAgICBjb25zdCBiYm94ID0gVXRpbHMubWVyZ2VGaWVsZHNCQm94KGZpZWxkTGlzdCk7XHJcbiAgICAgIG5vZGUgPSBVdGlscy5jcmVhdGVBdHRyYnV0ZVBvcHVwKG93bmVyTm9kZSwgYmJveCk7XHJcbiAgICAgIFV0aWxzLnJlcG9zaXRpb25GaWVsZERlbGV0ZUJ0bihvd25lck5vZGUsIGJib3gueCwgYmJveC55LCBiYm94LndpZHRoKTtcclxuICAgIH1cclxuICAgIFV0aWxzLnJlbW92ZUFsbENoaWxkTm9kZShub2RlKTtcclxuXHJcbiAgICB2YXIgaWRWYWx1ZUFyciA9IFtdO1xyXG4gICAgZmllbGRMaXN0LmZvckVhY2goKGZpZWxkKSA9PiB7XHJcbiAgICAgIGlkVmFsdWVBcnIucHVzaChmaWVsZC5pZCk7XHJcbiAgICB9KTtcclxuICAgIHZhciBpZFZhbHVlID0gaWRWYWx1ZUFyci5qb2luKCk7XHJcblxyXG4gICAgdmFyIG93bmVySWRWYWx1ZSA9IGZpZWxkTGlzdFswXS5vd25lcklkO1xyXG4gICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLm93bmVySWQgIT09IG93bmVySWRWYWx1ZSkge1xyXG4gICAgICAgIG93bmVySWRWYWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgZmllbGRJZFZhbHVlID0gZmllbGRMaXN0WzBdLmZpZWxkSWQ7XHJcbiAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICBpZiAoZmllbGRMaXN0W2lkeF0uZmllbGRJZCAhPT0gZmllbGRJZFZhbHVlKSB7XHJcbiAgICAgICAgZmllbGRJZFZhbHVlID0gXCJcIjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciByZXF1aXJlZFZhbHVlID0gZmllbGRMaXN0WzBdLnJlcXVpcmVkO1xyXG4gICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLnJlcXVpcmVkICE9PSByZXF1aXJlZFZhbHVlKSB7XHJcbiAgICAgICAgcmVxdWlyZWRWYWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgc2lnblBlblRoaWNrbmVzc1ZhbHVlID0gZmllbGRMaXN0WzBdLnNpZ25QZW5UaGlja25lc3M7XHJcbiAgICBmaWVsZExpc3QuZm9yRWFjaCgoZmllbGQpID0+IHtcclxuICAgICAgaWYgKGZpZWxkLnNpZ25QZW5UaGlja25lc3MgIT09IHNpZ25QZW5UaGlja25lc3NWYWx1ZSkge1xyXG4gICAgICAgIHNpZ25QZW5UaGlja25lc3NWYWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBsZXQgdXNlRHJhd1NpZ25WYWx1ZSA9IGZpZWxkTGlzdFswXS5tX3VzZURyYXdTaWduO1xyXG4gICAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLm1fdXNlRHJhd1NpZ24gIT09IHVzZURyYXdTaWduVmFsdWUpIHtcclxuICAgICAgICB1c2VEcmF3U2lnblZhbHVlID0gXCJcIjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxldCB1c2VJbWFnZVNpZ25WYWx1ZSA9IGZpZWxkTGlzdFswXS5tX3VzZUltYWdlU2lnbjtcclxuICAgIGZvciAobGV0IGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5tX3VzZUltYWdlU2lnbiAhPT0gdXNlSW1hZ2VTaWduVmFsdWUpIHtcclxuICAgICAgICB1c2VJbWFnZVNpZ25WYWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsZXQgdXNlUmVnU2lnblZhbHVlID0gZmllbGRMaXN0WzBdLm1fdXNlUmVnU2lnbjtcclxuICAgIGZvciAobGV0IGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5tX3VzZVJlZ1NpZ24gIT09IHVzZVJlZ1NpZ25WYWx1ZSkge1xyXG4gICAgICAgIHVzZVJlZ1NpZ25WYWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgcmVnU2lnbkFwaVVybFZhbHVlID0gZmllbGRMaXN0WzBdLm1fcmVnU2lnbkFwaVVybDtcclxuICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5tX3JlZ1NpZ25BcGlVcmwgIT09IHJlZ1NpZ25BcGlVcmxWYWx1ZSkge1xyXG4gICAgICAgIHJlZ1NpZ25BcGlVcmxWYWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBTaWduRmllbGQuc2hvd0ZpZWxkQXR0cmlidXRlKFxyXG4gICAgICBub2RlLFxyXG4gICAgICBpZFZhbHVlLFxyXG4gICAgICBmaWVsZElkVmFsdWUsXHJcbiAgICAgIHJlcXVpcmVkVmFsdWUsXHJcbiAgICAgIG93bmVySWRWYWx1ZSxcclxuICAgICAgc2lnblBlblRoaWNrbmVzc1ZhbHVlLFxyXG4gICAgICB1c2VyTGlzdCxcclxuICAgICAgdXNlRHJhd1NpZ25WYWx1ZSxcclxuICAgICAgdXNlSW1hZ2VTaWduVmFsdWUsXHJcbiAgICAgIHVzZVJlZ1NpZ25WYWx1ZSxcclxuICAgICAgcmVnU2lnbkFwaVVybFZhbHVlLFxyXG4gICAgICBjaGFuZ2VFdmVudEZ1bmMsXHJcbiAgICAgIHNpZ25UYWJTaG93T3B0XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGdldFNWR0ZpZWxkT2JqZWN0XHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlLkltYWdlRmllbGQjbWFrZVNWR1RleHRcclxuICAgKiBAbWVtYmVyT2YgbW9kdWxlOlRlbXBsYXRlLkltYWdlRmllbGRcclxuICAgKiBAZGVzY3JpcHRpb24g7ZWE65Oc7J2YIOyiheulmOulvCDtkZztmITtlZjripQgU1ZHIFRleHQgZWxlbWVudFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHNjYWxlIO2YhOyerCBQREbsnZggU2NhbGVcclxuICAgKiBAcmV0dXJuIHtPYmplY3R9IFNWRyBOb2RlIEVsZW1lbnRcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgbWFrZVNWR1RleHQoc2NhbGUpIHtcclxuICAgIGxldCB2YWx1ZSA9IHRoaXMubV9maWVsZElkO1xyXG4gICAgdmFyIHRleHRGb250Q29sb3IgPSBcImZpbGw9J1wiICsgdGhpcy5mb250Q29sb3IgKyBcIicgXCI7XHJcblxyXG4gICAgbGV0IHRleHRQb3MgPSAnIHg9XCI1MCVcIiAgZHk9XCIwLjM1ZW1cIiB0ZXh0LWFuY2hvcj1cIm1pZGRsZVwiICc7XHJcbiAgICBpZiAodGhpcy50ZXh0QWxpZ24gPT09IFwibGVmdFwiKSB7XHJcbiAgICAgIHRleHRQb3MgPSAnIHg9XCIzJVwiICBkeT1cIjAuMzVlbVwiIHRleHQtYW5jaG9yPVwic3RhcnRcIiAnO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnRleHRBbGlnbiA9PT0gXCJyaWdodFwiKSB7XHJcbiAgICAgIHRleHRQb3MgPSAnIHg9XCI5NyVcIiBkeT1cIjAuMzVlbVwiIHRleHQtYW5jaG9yPVwiZW5kXCIgJztcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdGV4dFZlcnRpY2FsUG9zID0gJ3k9XCI1MCVcIic7XHJcblxyXG4gICAgbGV0IGZvbnRJbmZvID0gJyBmb250LXNpemU9XCInICsgdGhpcy5mb250U2l6ZSArICdweFwiICc7XHJcbiAgICBsZXQgdGV4dE9iaiA9XHJcbiAgICAgIFwiPHRleHRcIiArXHJcbiAgICAgIHRleHRQb3MgK1xyXG4gICAgICB0ZXh0VmVydGljYWxQb3MgK1xyXG4gICAgICBmb250SW5mbyArXHJcbiAgICAgIHRleHRGb250Q29sb3IgK1xyXG4gICAgICBcIj5cIiArXHJcbiAgICAgIHZhbHVlICtcclxuICAgICAgXCI8L3RleHQ+XCI7XHJcbiAgICBjb25zdCBmb2JqZWN0U1ZHID1cclxuICAgICAgJzxzdmcgeD1cIicgK1xyXG4gICAgICB0aGlzLnggK1xyXG4gICAgICAncHhcIiB5PVwiJyArXHJcbiAgICAgIHRoaXMueSArXHJcbiAgICAgICdweFwiIHdpZHRoPVwiJyArXHJcbiAgICAgIHRoaXMud2lkdGggKiBzY2FsZSArXHJcbiAgICAgICdweFwiIGhlaWdodD1cIicgK1xyXG4gICAgICB0aGlzLmhlaWdodCAqIHNjYWxlICtcclxuICAgICAgJ3B4XCI+PGcgID4nICtcclxuICAgICAgdGV4dE9iaiArXHJcbiAgICAgIFwiPC9nPjwvc3ZnPlwiO1xyXG5cclxuICAgIHJldHVybiBmb2JqZWN0U1ZHO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGdldFNWR0ZpZWxkT2JqZWN0XHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlLlJhZGlvRmllbGQjZ2V0U1ZHRmllbGRPYmplY3RcclxuICAgKiBAbWVtYmVyT2YgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlNpZ25GaWVsZFxyXG4gICAqIEBkZXNjcmlwdGlvbiAg7ZWE65Oc7J2YIOygleuztOulvCDqsIDsp4Dqs6AgU1ZHIEVsZW1lbnTrpbwg7IOd7ISx7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGNhbnZhcyBTbmFwIFNWR+ydmCBDYW52YXMgT2JqZWN0XHJcbiAgICogQHBhcmFtIHtPYmplY3R9IG1haW5Hcm91cCAgIFNWR+ydmCDrqZTsnbggTm9kZVxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBzY2FsZSAg7ZiE7J6sIFBERuydmCBTY2FsZVxyXG4gICAqIEBwYXJhbSB7RUxFTUVOVH0gb3duZXJOb2RlICAgIO2VtOuLuSDtlITroZzsoJ3tirjsnZgg7LWc7IOB64uoIEVsZW1lbnTrpbwg6rCQ7Iu46rOgIOyeiOuKlCBFbGVtZW50XHJcbiAgICogQHBhcmFtIHtDYWxsYmFja30gcmVtb3ZlRHJhZ092ZXJHcm91cEZ1bmMgICAgIOuTnOuemOq3uCDrkJjslrQg7ISg7YOd65CY7Ja07KeEIEZpZWxkIEdyb3Vw7J2EIOygnOqxsO2VmOuKlCBjYWxsYmFjayBmdW5jdGlvblxyXG4gICAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNoYW5nZVZhbHVlRXZlbnRGdW5jICAgICDsho3shLHqsJLsnbQg67OA7ZWg65WMIO2YuOy2nOuQmOuKlCBjYWxsYmFjayBmdW5jdGlvblxyXG4gICAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNoYW5nZUZyZWVUcmFuc2Zvcm1GdW5jICAgIEZyZWVUcmFuc2Zvcm3snYQg64uk7IucIOyDneyEse2VmOq4sCDsnITtlZwgY2FsbGJhY2sgZnVuY3Rpb25cclxuICAgKiBAcmV0dXJuIFNWRyBOb2RlIEVsZW1lbnRcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgZ2V0U1ZHRmllbGRPYmplY3QoXHJcbiAgICBjYW52YXMsXHJcbiAgICBtYWluR3JvdXAsXHJcbiAgICBzY2FsZSxcclxuICAgIG93bmVyTm9kZSxcclxuICAgIHJlbW92ZURyYWdPdmVyR3JvdXBGdW5jLFxyXG4gICAgY2hhbmdlVmFsdWVFdmVudEZ1bmMsXHJcbiAgICBjaGFuZ2VGcmVlVHJhbnNmb3JtRnVuYyxcclxuICAgIGJnQ29sb3I9XCIjZmZhYzdmXCJcclxuICApIHtcclxuICAgIGxldCBncm91cCA9IG1haW5Hcm91cC5ncm91cCgpO1xyXG4gICAgZ3JvdXAuYXR0cih7XHJcbiAgICAgIGlkOiB0aGlzLmlkICsgXCJHcm91cFwiLFxyXG4gICAgICBjdXJzb3I6IFwibW92ZVwiLFxyXG4gICAgfSk7XHJcbiAgICBsZXQgcmVjdCA9IGNhbnZhcy5yZWN0KFxyXG4gICAgICB0aGlzLngsXHJcbiAgICAgIHRoaXMueSxcclxuICAgICAgdGhpcy53aWR0aCAqIHNjYWxlLFxyXG4gICAgICB0aGlzLmhlaWdodCAqIHNjYWxlXHJcbiAgICApO1xyXG4gICAgcmVjdC5hdHRyKHtcclxuICAgICAgaWQ6IHRoaXMuaWQsXHJcbiAgICAgIFwiZmlsbC1vcGFjaXR5XCI6IFwiMC42XCIsXHJcbiAgICAgIGZpbGw6IGJnQ29sb3IsXHJcbiAgICB9KTtcclxuICAgIGdyb3VwLmFwcGVuZChyZWN0KTtcclxuICAgIGNvbnN0IHAgPSBTbmFwLnBhcnNlKHRoaXMubWFrZVNWR1RleHQoc2NhbGUpKTtcclxuICAgIGdyb3VwLmFwcGVuZChwKTtcclxuXHJcbiAgICBncm91cC5ob3ZlcihcclxuICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIGZfaW5cclxuICAgICAgfSxcclxuICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIGZfb3V0XHJcbiAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgbGV0IF9zaWduRmllbGQgPSB0aGlzO1xyXG4gICAgbGV0IG1vdXNlUG9zID0geyB4OiAwLCB5OiAwIH07XHJcbiAgICBncm91cC5tb3VzZWRvd24oZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICBtb3VzZVBvcy54ID0gZXZ0LnBhZ2VYO1xyXG4gICAgICBtb3VzZVBvcy55ID0gZXZ0LnBhZ2VZO1xyXG4gICAgICBjb25zdCBpdGVtcyA9IG1haW5Hcm91cC5zZWxlY3RBbGwoXCJnXCIpO1xyXG4gICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgaWYgKGVsZW1lbnQgIT09IGdyb3VwKSB7XHJcbiAgICAgICAgICBpZiAoIVV0aWxzLmlzRW1wdHlPYmplY3QoZWxlbWVudC5mcmVlVHJhbnNmb3JtKSkge1xyXG4gICAgICAgICAgICBlbGVtZW50LmZyZWVUcmFuc2Zvcm0uaGlkZVJlc2l6ZUhhbmRsZXIoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBpZiAoIVV0aWxzLmlzRW1wdHlPYmplY3QoZ3JvdXAuZnJlZVRyYW5zZm9ybSkpIHtcclxuICAgICAgICBncm91cC5mcmVlVHJhbnNmb3JtLnNob3dSZXNpemVIYW5kbGVyKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY2hhbmdlRnJlZVRyYW5zZm9ybUZ1bmMoZ3JvdXAsIHJlY3QuYXR0cihcIndpZHRoXCIpLCByZWN0LmF0dHIoXCJoZWlnaHRcIikpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBncm91cC5tb3VzZXVwKGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgaWYgKGdyb3VwLnBhcmVudCgpLmF0dHIoXCJpZFwiKSA9PT0gQ09OU1RBTlRTLkRSQUdfQk9YX05BTUUpIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBNYXRoLmFicyhtb3VzZVBvcy54IC0gZXZ0LnBhZ2VYKSA+IENPTlNUQU5UUy5NSU5JTVVNX0RSQUdfU0laRSB8fFxyXG4gICAgICAgICAgTWF0aC5hYnMobW91c2VQb3MueSAtIGV2dC5wYWdlWSkgPiBDT05TVEFOVFMuTUlOSU1VTV9EUkFHX1NJWkVcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVtb3ZlRHJhZ092ZXJHcm91cEZ1bmMuY2FsbCgpO1xyXG4gICAgICAgIGNvbnN0IGl0ZW1zID0gbWFpbkdyb3VwLnNlbGVjdEFsbChcImdcIik7XHJcbiAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgaWYgKGVsZW1lbnQgIT09IGdyb3VwKSB7XHJcbiAgICAgICAgICAgIGlmICghVXRpbHMuaXNFbXB0eU9iamVjdChlbGVtZW50LmZyZWVUcmFuc2Zvcm0pKSB7XHJcbiAgICAgICAgICAgICAgZWxlbWVudC5mcmVlVHJhbnNmb3JtLmhpZGVSZXNpemVIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoIVV0aWxzLmlzRW1wdHlPYmplY3QoZ3JvdXAuZnJlZVRyYW5zZm9ybSkpIHtcclxuICAgICAgICAgIGdyb3VwLmZyZWVUcmFuc2Zvcm0uc2hvd1Jlc2l6ZUhhbmRsZXIoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY2hhbmdlRnJlZVRyYW5zZm9ybUZ1bmMoXHJcbiAgICAgICAgICAgIGdyb3VwLFxyXG4gICAgICAgICAgICByZWN0LmF0dHIoXCJ3aWR0aFwiKSxcclxuICAgICAgICAgICAgcmVjdC5hdHRyKFwiaGVpZ2h0XCIpXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfc2lnbkZpZWxkLmNvbnN0cnVjdG9yLnNob3dGaWVsZHNBdHRyaWJ1dGUoXHJcbiAgICAgICAgICBvd25lck5vZGUsXHJcbiAgICAgICAgICBbX3NpZ25GaWVsZF0sXHJcbiAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICBtYWluR3JvdXAsXHJcbiAgICAgICAgICBVdGlscy5nZXRVc2VySW5mb09wdHNMaXN0KCksXHJcbiAgICAgICAgICBVdGlscy5nZXREVkZpZWxkT3B0c0xpc3QoKSxcclxuICAgICAgICAgIGNoYW5nZVZhbHVlRXZlbnRGdW5jLFxyXG4gICAgICAgICAgVXRpbHMuZ2V0U2lnblRhYlNob3dPcHQoKSxcclxuICAgICAgICApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIF9zaWduRmllbGQuY29uc3RydWN0b3Iuc2hvd0ZpZWxkc0F0dHJpYnV0ZShcclxuICAgICAgICAgIG93bmVyTm9kZSxcclxuICAgICAgICAgIFtfc2lnbkZpZWxkXSxcclxuICAgICAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgICAgIG1haW5Hcm91cCxcclxuICAgICAgICAgIFV0aWxzLmdldFVzZXJJbmZvT3B0c0xpc3QoKSxcclxuICAgICAgICAgIFV0aWxzLmdldERWRmllbGRPcHRzTGlzdCgpLFxyXG4gICAgICAgICAgY2hhbmdlVmFsdWVFdmVudEZ1bmMsXHJcbiAgICAgICAgICBVdGlscy5nZXRTaWduVGFiU2hvd09wdCgpLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGdyb3VwO1xyXG4gIH1cclxufVxyXG4iLCJcclxuLyoqXHJcbiAqIEBtb2R1bGUgVGVtcGxhdGUvRmllbGRcclxuKi9cclxuXHJcbmltcG9ydCB7IEJhc2VGaWVsZCB9IGZyb20gJy4vQmFzZUZpZWxkJztcclxuaW1wb3J0IHtVdGlsc30gZnJvbSAnLi8uLi91dGlscy91dGlscy5qcyc7XHJcbmltcG9ydCB7Q09OU1RBTlRTfSBmcm9tICcuLy4uL0NvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBDUCBmcm9tICcuLy4uL3V0aWxzL2NvbG9yLXBpY2tlcic7XHJcblxyXG4vKipcclxuICogQO2FjeyKpO2KuCDtlYTrk5zsnZgg6riw67O47J20IOuQmOuKlCBDbGFzc1xyXG4gKlxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBmaWVsZE5hbWUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5UZXh0QmFzZUZpZWxkI2ZpZWxkTmFtZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gd2lkdGhWYWx1ZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRCYXNlRmllbGQjd2lkdGhWYWx1ZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gaGVpZ2h0VmFsdWUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5UZXh0QmFzZUZpZWxkI2hlaWdodFZhbHVlfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBuZWVkVGV4dFN2Z1JlZnJlc2gge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5UZXh0QmFzZUZpZWxkI25lZWRUZXh0U3ZnUmVmcmVzaH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gbWFrZVNWR1RleHQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5UZXh0QmFzZUZpZWxkI21ha2VTVkdUZXh0fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBnZXRTVkdGaWVsZE9iamVjdCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRCYXNlRmllbGQjZ2V0U1ZHRmllbGRPYmplY3R9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNoYW5nZVRleHRFbGVtZW50IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuVGV4dEJhc2VGaWVsZCNjaGFuZ2VUZXh0RWxlbWVudH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gc2hvd0ZpZWxkQXR0cmlidXRlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuVGV4dEJhc2VGaWVsZCNzaG93RmllbGRBdHRyaWJ1dGV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNob3dGaWVsZHNBdHRyaWJ1dGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5UZXh0QmFzZUZpZWxkI3Nob3dGaWVsZHNBdHRyaWJ1dGV9XHJcbiAqXHJcbiAqIEBhdWdtZW50cyBCYXNlRmllbGQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjQmFzZUZpZWxkfVxyXG4gKiBARmlsZU5hbWUgVGV4dEJhc2VGaWVsZC5qc1xyXG4gKiBAc2luY2UgMjAyMS4wNS4zMVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRleHRCYXNlRmllbGQgZXh0ZW5kcyBCYXNlRmllbGQge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgKiBAcGFyYW0gaWQg7ZWE65Oc7J2YIElEXHJcbiAgICAgKiBAcGFyYW0gcGFnZU5vIO2VhOuTnOqwgCDsho3tlZwg7Y6Y7J207KeAIOuyiO2YuFxyXG4gICAgICogQHBhcmFtIHgg7ZWE65Oc7J2YIHN2Z+yDgeydmCB47KKM7ZGcXHJcbiAgICAgKiBAcGFyYW0geSDtlYTrk5zsnZggc3Zn7IOB7J2YIHnsooztkZxcclxuICAgICAqIEBwYXJhbSB3aWR0aCDtlYTrk5zsnZgg6rCA66Gc6ri47J20XHJcbiAgICAgKiBAcGFyYW0gaGVpZ2h0IO2VhOuTnOydmCDshLjroZzquLjsnbRcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGlkLCBwYWdlTm8sIHgsIHksIHdpZHRoLCBoZWlnaHQpIHtcclxuICAgICAgICBzdXBlcihpZCwgcGFnZU5vLCB4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICB0aGlzLm1fdHlwZSA9IFRleHRCYXNlRmllbGQuZmllbGROYW1lKCk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRCYXNlRmllbGQjbV9wbGFjZUhvbGRlclxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBwbGFjZUhvbGRlclxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIHBsYWNlSG9sZGVyKClcclxuICAgICAgICAgKiAvLyBzZXR0ZXIgcGxhY2VIb2xkZXIodmFsKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubV9wbGFjZUhvbGRlciA9ICcnO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5UZXh0QmFzZUZpZWxkI21fZGVmYXVsdFZhbHVlXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIO2FjeyKpO2KuCDquLDrs7jqsJIgIElEXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKiAvLyBnZXR0ZXIgZGVmYXVsdFZhbHVlKClcclxuICAgICAgICAgKiAvLyBzZXR0ZXIgZGVmYXVsdFZhbHVlKHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1fZGVmYXVsdFZhbHVlID0gXCJcIjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuVGV4dEJhc2VGaWVsZCNtX2RlZmF1bHRWYWx1ZVRleHRcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gIO2FjeyKpO2KuCDquLDrs7jqsJLsnYQg7ZGc7ZiE7ZWY64qUIO2FjeyKpO2KuFxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIGRlZmF1bHRWYWx1ZVRleHQoKVxyXG4gICAgICAgICAqIC8vIHNldHRlciBkZWZhdWx0VmFsdWVUZXh0KHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1fZGVmYXVsdFZhbHVlVGV4dCA9IFwiXCI7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRCYXNlRmllbGQjbV90ZXh0QWxpZ25cclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24g7YWN7Iqk7Yq47J2YIOqwgOuhnCDsoJXroKzqsJJcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciB0ZXh0QWxpZ24oKVxyXG4gICAgICAgICAqIC8vIHNldHRlciB0ZXh0QWxpZ24odmFsKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubV90ZXh0QWxpZ24gPSBcImxlZnRcIjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuVGV4dEJhc2VGaWVsZCNtX3RleHRWZXRpY2FsQWxpZ25cclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24g7YWN7Iqk7Yq47J2YIOyEuOuhnCDsoJXroKzqsJJcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciB0ZXh0VmV0aWNhbEFsaWduKClcclxuICAgICAgICAgKiAvLyBzZXR0ZXIgdGV4dFZldGljYWxBbGlnbih2YWwpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tX3RleHRWZXRpY2FsQWxpZ24gPSBcIm1pZGRsZVwiO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5UZXh0QmFzZUZpZWxkI21fYm9sZFxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiDthY3siqTtirjsnZgg67O865OcIOyXrOu2gFxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIGJvbGQoKVxyXG4gICAgICAgICAqIC8vIHNldHRlciBib2xkKHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1fYm9sZCA9IFwiZmFsc2VcIjtcclxuICAgICAgICB0aGlzLm1fa2luZCA9IFwiXCI7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gd2lkdGhWYWx1ZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRCYXNlRmllbGQjd2lkdGhWYWx1ZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOuTnOydmCDstIjquLAg6rCA66GcIOq4uOydtFxyXG4gICAgICogQHJldHVybiB7TnVtYmVyfVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHdpZHRoVmFsdWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIDE1MDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiBoZWlnaHRWYWx1ZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRCYXNlRmllbGQjaGVpZ2h0VmFsdWVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtlYTrk5zsnZgg7LSI6riwIOyEuOuhnCDquLjsnbRcclxuICAgICAqIEByZXR1cm4ge051bWJlcn1cclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBoZWlnaHRWYWx1ZSgpIHtcclxuICAgICAgICByZXR1cm4gNDA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gZmllbGROYW1lXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuVGV4dEJhc2VGaWVsZCNmaWVsZE5hbWVcclxuICAgICAqIEByZXR1cm4ge1N0cmluZ31cclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSAg7ZWE65OcIO2DgOyeheydmCDsnbTrpoRcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBmaWVsZE5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiVGV4dEJhc2VGaWVsZFwiO1xyXG4gICAgfVxyXG5cclxuICAgIGFuY2VzdG9ycygpIHtcclxuICAgICAgICByZXR1cm4gWyBcIlRCRlwiLCBcIkJGXCJdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBwbGFjZUhvbGRlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX3BsYWNlSG9sZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBwbGFjZUhvbGRlcihfX3BsYWNlSG9sZGVyKSB7XHJcbiAgICAgICAgdGhpcy5tX3BsYWNlSG9sZGVyID0gX19wbGFjZUhvbGRlcjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZGVmYXVsdFZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fZGVmYXVsdFZhbHVlO1xyXG4gICAgfVxyXG4gICAgc2V0IGRlZmF1bHRWYWx1ZShfX2RlZmF1bHRWYWx1ZSkge1xyXG4gICAgICAgIHRoaXMubV9kZWZhdWx0VmFsdWUgPSBfX2RlZmF1bHRWYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZGVmYXVsdFZhbHVlVGV4dCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX2RlZmF1bHRWYWx1ZVRleHQ7XHJcbiAgICB9XHJcbiAgICBzZXQgZGVmYXVsdFZhbHVlVGV4dChfX2RlZmF1bHRWYWx1ZVRleHQpIHtcclxuICAgICAgICB0aGlzLm1fZGVmYXVsdFZhbHVlVGV4dCA9IF9fZGVmYXVsdFZhbHVlVGV4dDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdGV4dEFsaWduKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fdGV4dEFsaWduO1xyXG4gICAgfVxyXG4gICAgc2V0IHRleHRBbGlnbihfX3RleHRBbGlnbikge1xyXG4gICAgICAgIHRoaXMubV90ZXh0QWxpZ24gPSBfX3RleHRBbGlnbjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdGV4dFZldGljYWxBbGlnbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX3RleHRWZXRpY2FsQWxpZ247XHJcbiAgICB9XHJcbiAgICBzZXQgdGV4dFZldGljYWxBbGlnbihfX3RleHRWZXRpY2FsQWxpZ24pIHtcclxuICAgICAgICB0aGlzLm1fdGV4dFZldGljYWxBbGlnbiA9IF9fdGV4dFZldGljYWxBbGlnbjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaXNCb2xkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fYm9sZDtcclxuICAgIH1cclxuICAgIHNldCBpc0JvbGQoX19ib2xkKSB7XHJcbiAgICAgICAgdGhpcy5tX2JvbGQgPSBfX2JvbGQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gbmVlZFRleHRTdmdSZWZyZXNoXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuVGV4dEJhc2VGaWVsZCNuZWVkVGV4dFN2Z1JlZnJlc2hcclxuICAgICAqIEBkZXNjcmlwdGlvbiAgKFN0YXRpYykg7ZW064u57ZWY64qUIO2VhOuTnOydmCDsho3shLHsnbQgU1ZH7J2YIO2FjeyKpO2KuCBOb2Rl66W8IOuzgOqyve2VtOyVvOuQmOuKlOyngCDssrTtgaztlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHsgU3RyaW5nfSBmaWVsZFByb3BldHlOYW1lIO2VhOuTnOydmCDsho3shLHqsJJcclxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IO2FjeyKpO2KuOulvCDsg4jroZwg6re466Ck7JW865CY64qUIO2VhOuTnOydmCDqsr3smrAgVFJVReulvCDrpqzthLTtlZzri6QuXHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBuZWVkVGV4dFN2Z1JlZnJlc2goZmllbGRQcm9wZXR5TmFtZSkge1xyXG4gICAgICAgIGlmIChmaWVsZFByb3BldHlOYW1lID09PSBcImRlZmF1bHRWYWx1ZVwiIHx8XHJcbiAgICAgICAgICAgIGZpZWxkUHJvcGV0eU5hbWUgPT09IFwidmFsdWVcIiB8fFxyXG4gICAgICAgICAgICBmaWVsZFByb3BldHlOYW1lID09PSBcImZpZWxkSWRcIiB8fFxyXG4gICAgICAgICAgICBmaWVsZFByb3BldHlOYW1lID09PSBcInBsYWNlSG9sZGVyXCIgfHxcclxuICAgICAgICAgICAgZmllbGRQcm9wZXR5TmFtZSA9PT0gXCJ0ZXh0QWxpZ25cIiB8fFxyXG4gICAgICAgICAgICBmaWVsZFByb3BldHlOYW1lID09PSBcImJvbGRcIiB8fFxyXG4gICAgICAgICAgICBmaWVsZFByb3BldHlOYW1lID09PSBcImZvbnRTaXplXCIgfHxcclxuICAgICAgICAgICAgZmllbGRQcm9wZXR5TmFtZSA9PT0gXCJmb250TmFtZVwiIHx8XHJcbiAgICAgICAgICAgIGZpZWxkUHJvcGV0eU5hbWUgPT09IFwicmFkaW9UeXBlXCIgfHxcclxuICAgICAgICAgICAgZmllbGRQcm9wZXR5TmFtZSA9PT0gXCJmb250Q29sb3JcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIG1ha2VTVkdUZXh0XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuVGV4dEJhc2VGaWVsZCNtYWtlU1ZHVGV4dFxyXG4gICAgICogQG1lbWJlck9mIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5UZXh0QmFzZUZpZWxkXHJcbiAgICAgKiBAZGVzY3JpcHRpb24g7ZWE65Oc7J2YIOyiheulmOulvCDtkZztmITtlZjripQgU1ZHIFRleHQgZWxlbWVudFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzY2FsZSDtmITsnqwgUERG7J2YIFNjYWxlXHJcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IFNWRyBOb2RlIEVsZW1lbnRcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgbWFrZVNWR1RleHQoc2NhbGUpIHtcclxuICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLmRlZmF1bHRWYWx1ZVRleHQ7XHJcbiAgICAgICAgaWYgKHZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMubV9maWVsZElkO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdGV4dEZvbnRDb2xvciA9IFwiZmlsbD0nXCIgKyB0aGlzLmZvbnRDb2xvciArIFwiJyBcIjtcclxuIFxyXG4gICAgICAgIGxldCB0ZXh0UG9zID0gJyB4PVwiNTAlXCIgIGR5PVwiMC4zNWVtXCIgdGV4dC1hbmNob3I9XCJtaWRkbGVcIiAnXHJcbiAgICAgICAgaWYgKHRoaXMudGV4dEFsaWduID09PSBcImxlZnRcIikge1xyXG4gICAgICAgICAgICB0ZXh0UG9zID0gJyB4PVwiMyVcIiAgZHk9XCIwLjM1ZW1cIiB0ZXh0LWFuY2hvcj1cInN0YXJ0XCIgJztcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGV4dEFsaWduID09PSBcInJpZ2h0XCIpIHtcclxuICAgICAgICAgICAgdGV4dFBvcyA9ICcgeD1cIjk3JVwiIGR5PVwiMC4zNWVtXCIgdGV4dC1hbmNob3I9XCJlbmRcIiAnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHRleHRWZXJ0aWNhbFBvcyA9ICd5PVwiNTAlXCInO1xyXG4gICAgICAgIGlmICh0aGlzLnRleHRWZXRpY2FsQWxpZ24gPT09IFwidG9wXCIpIHtcclxuICAgICAgICAgICAgdGV4dFZlcnRpY2FsUG9zID0gJ3k9XCIyNSVcIic7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRleHRWZXRpY2FsQWxpZ24gPT09IFwiYm90dG9tXCIpIHtcclxuICAgICAgICAgICAgdGV4dFZlcnRpY2FsUG9zID0gJ3k9XCI3MCVcIic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgZm9udFdlaWd0aCA9IFwiXCI7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNCb2xkID09PSBcInRydWVcIikge1xyXG4gICAgICAgICAgICBmb250V2VpZ3RoID0gXCIgZm9udC13ZWlnaHQ9J2JvbGQnIFwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGZvbnRGbWFpbHkgPSBcIiBmb250LWZhbWlseT0nXCIgKyB0aGlzLmZvbnROYW1lICsgXCInIFwiO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBmb250SW5mbyA9ICcgZm9udC1zaXplPVwiJyArIHRoaXMuZm9udFNpemUgICogc2NhbGUgKyAncHhcIiAnO1xyXG4gICAgICAgIGxldCB0ZXh0T2JqID0gJzx0ZXh0JyArIHRleHRQb3MgKyB0ZXh0VmVydGljYWxQb3MgKyBmb250Rm1haWx5ICsgZm9udEluZm8gKyB0ZXh0Rm9udENvbG9yICsgZm9udFdlaWd0aCArICAnPicgKyB2YWx1ZSArICc8L3RleHQ+JztcclxuICAgICAgICBjb25zdCBmb2JqZWN0U1ZHID0gJzxzdmcgeD1cIicgKyB0aGlzLnggKyAncHhcIiB5PVwiJyArIHRoaXMueSArICdweFwiIHdpZHRoPVwiJyArIHRoaXMud2lkdGggKiBzY2FsZSArXHJcbiAgICAgICAgICAgICdweFwiIGhlaWdodD1cIicgKyB0aGlzLmhlaWdodCAqIHNjYWxlICsgJ3B4XCI+PGcgID4nICsgdGV4dE9iaiArICc8L2c+PC9zdmc+JztcclxuXHJcbiAgICAgICAgcmV0dXJuIGZvYmplY3RTVkc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gZ2V0U1ZHRmllbGRPYmplY3RcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5UZXh0QmFzZUZpZWxkI2dldFNWR0ZpZWxkT2JqZWN0XHJcbiAgICAgKiBAbWVtYmVyT2YgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRCYXNlRmllbGRcclxuICAgICAqIEBkZXNjcmlwdGlvbiAg7ZWE65Oc7J2YIOygleuztOulvCDqsIDsp4Dqs6AgU1ZHIEVsZW1lbnTrpbwg7IOd7ISx7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjYW52YXMgU25hcCBTVkfsnZggQ2FudmFzIE9iamVjdFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG1haW5Hcm91cCAgIFNWR+ydmCDrqZTsnbggTm9kZVxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHNjYWxlICDtmITsnqwgUERG7J2YIFNjYWxlXHJcbiAgICAgKiBAcGFyYW0ge0VMRU1FTlR9IG93bmVyTm9kZSAgICDtlbTri7kg7ZSE66Gc7KCd7Yq47J2YIOy1nOyDgeuLqCBFbGVtZW5066W8IOqwkOyLuOqzoCDsnojripQgRWxlbWVudFxyXG4gICAgICogQHBhcmFtIHtDYWxsYmFja30gcmVtb3ZlRHJhZ092ZXJHcm91cEZ1bmMgICAg65Oc656Y6re4IOuQmOyWtCDshKDtg53rkJjslrTsp4QgRmllbGQgR3JvdXDsnYQg7KCc6rGw7ZWY64qUIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICAgKiBAcGFyYW0ge0NhbGxiYWNrfSBjaGFuZ2VWYWx1ZUV2ZW50RnVuYyAgICAg7IaN7ISx6rCS7J20IOuzgO2VoOuVjCDtmLjstpzrkJjripQgY2FsbGJhY2sgZnVuY3Rpb25cclxuICAgICAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNoYW5nZUZyZWVUcmFuc2Zvcm1GdW5jICAgICBGcmVlVHJhbnNmb3Jt7J2EIOuLpOyLnCDsg53shLHtlZjquLAg7JyE7ZWcIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICAgKiBAcmV0dXJuIFNWRyBOb2RlIEVsZW1lbnRcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgZ2V0U1ZHRmllbGRPYmplY3QoY2FudmFzLCBtYWluR3JvdXAsIHNjYWxlLCBvd25lck5vZGUsIHJlbW92ZURyYWdPdmVyR3JvdXBGdW5jLCBjaGFuZ2VWYWx1ZUV2ZW50RnVuYywgY2hhbmdlRnJlZVRyYW5zZm9ybUZ1bmMsIGJnQ29sb3I9XCIjZmZhYzdmXCIpIHtcclxuICAgICAgICBsZXQgZ3JvdXAgPSBtYWluR3JvdXAuZ3JvdXAoKTtcclxuICAgICAgICBncm91cC5hdHRyKHtcclxuICAgICAgICAgICAgaWQ6IHRoaXMuaWQgKyBcIkdyb3VwXCIsXHJcbiAgICAgICAgICAgIGN1cnNvcjogXCJtb3ZlXCJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IHJlY3QgPSBjYW52YXMucmVjdCh0aGlzLngsIHRoaXMueSwgdGhpcy53aWR0aCAqIHNjYWxlLCB0aGlzLmhlaWdodCAqIHNjYWxlKTtcclxuICAgICAgICByZWN0LmF0dHIoe1xyXG4gICAgICAgICAgICBpZDogdGhpcy5pZCxcclxuICAgICAgICAgICAgXCJmaWxsLW9wYWNpdHlcIjogXCIwLjVcIixcclxuICAgICAgICAgICAgXCJmaWxsXCI6IGJnQ29sb3JcclxuICAgICAgICB9KTtcclxuICAgICAgICBncm91cC5hcHBlbmQocmVjdCk7XHJcbiAgICAgICAgY29uc3QgcCA9IFNuYXAucGFyc2UodGhpcy5tYWtlU1ZHVGV4dChzY2FsZSkpO1xyXG4gICAgICAgIGdyb3VwLmFwcGVuZChwKTtcclxuXHJcbiAgICAgICAgZ3JvdXAuaG92ZXIoXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLy8gZl9pblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7IC8vIGZfb3V0XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgXHJcbiAgICAgICAgbGV0IF90ZXh0QmFzZUZpZWxkID0gdGhpcztcclxuICAgICAgICBsZXQgbW91c2VQb3MgPSB7IHg6IDAsIHk6IDAgfTtcclxuICAgICAgICBncm91cC5tb3VzZWRvd24oZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICAgICAgICBtb3VzZVBvcy54ID0gZXZ0LnBhZ2VYO1xyXG4gICAgICAgICAgICBtb3VzZVBvcy55ID0gZXZ0LnBhZ2VZO1xyXG4gICAgICAgICAgICBjb25zdCBpdGVtcyA9IG1haW5Hcm91cC5zZWxlY3RBbGwoJ2cnKTtcclxuICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgIT09IGdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFVdGlscy5pc0VtcHR5T2JqZWN0KGVsZW1lbnQuZnJlZVRyYW5zZm9ybSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5mcmVlVHJhbnNmb3JtLmhpZGVSZXNpemVIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghVXRpbHMuaXNFbXB0eU9iamVjdChncm91cC5mcmVlVHJhbnNmb3JtKSkge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXAuZnJlZVRyYW5zZm9ybS5zaG93UmVzaXplSGFuZGxlcigpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlRnJlZVRyYW5zZm9ybUZ1bmMoZ3JvdXAsIHJlY3QuYXR0cihcIndpZHRoXCIpLCByZWN0LmF0dHIoXCJoZWlnaHRcIikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZ3JvdXAubW91c2V1cChmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgIGlmIChncm91cC5wYXJlbnQoKS5hdHRyKFwiaWRcIikgPT09IENPTlNUQU5UUy5EUkFHX0JPWF9OQU1FKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMobW91c2VQb3MueCAtIGV2dC5wYWdlWCkgPiBDT05TVEFOVFMuTUlOSU1VTV9EUkFHX1NJWkVcclxuICAgICAgICAgICAgICAgICAgICB8fCBNYXRoLmFicyhtb3VzZVBvcy55IC0gZXZ0LnBhZ2VZKSA+IENPTlNUQU5UUy5NSU5JTVVNX0RSQUdfU0laRSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlbW92ZURyYWdPdmVyR3JvdXBGdW5jLmNhbGwoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gbWFpbkdyb3VwLnNlbGVjdEFsbCgnZycpO1xyXG4gICAgICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50ICE9PSBncm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIVV0aWxzLmlzRW1wdHlPYmplY3QoZWxlbWVudC5mcmVlVHJhbnNmb3JtKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5mcmVlVHJhbnNmb3JtLmhpZGVSZXNpemVIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmICghVXRpbHMuaXNFbXB0eU9iamVjdChncm91cC5mcmVlVHJhbnNmb3JtKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwLmZyZWVUcmFuc2Zvcm0uc2hvd1Jlc2l6ZUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlRnJlZVRyYW5zZm9ybUZ1bmMoZ3JvdXAsIHJlY3QuYXR0cihcIndpZHRoXCIpLCByZWN0LmF0dHIoXCJoZWlnaHRcIikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgX3RleHRCYXNlRmllbGQuY29uc3RydWN0b3Iuc2hvd0ZpZWxkc0F0dHJpYnV0ZShvd25lck5vZGUsIFtfdGV4dEJhc2VGaWVsZF0sIHVuZGVmaW5lZCwgbWFpbkdyb3VwLCBVdGlscy5nZXRVc2VySW5mb09wdHNMaXN0KCksIFV0aWxzLmdldERWRmllbGRPcHRzTGlzdCgpLCBjaGFuZ2VWYWx1ZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfdGV4dEJhc2VGaWVsZC5jb25zdHJ1Y3Rvci5zaG93RmllbGRzQXR0cmlidXRlKG93bmVyTm9kZSwgW190ZXh0QmFzZUZpZWxkXSwgdW5kZWZpbmVkLCBtYWluR3JvdXAsIFV0aWxzLmdldFVzZXJJbmZvT3B0c0xpc3QoKSwgVXRpbHMuZ2V0RFZGaWVsZE9wdHNMaXN0KCksIGNoYW5nZVZhbHVlRXZlbnRGdW5jKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBncm91cDtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gY2hhbmdlVGV4dEVsZW1lbnRcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5UZXh0QmFzZUZpZWxkI2NoYW5nZVRleHRFbGVtZW50XHJcbiAgICAgKiBAbWVtYmVyT2YgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRCYXNlRmllbGRcclxuICAgICAqIEBkZXNjcmlwdGlvbiAgIO2VhOuTnOulvCDtkZztmITtlZjripQgVGV4dCBOb2Rl7J2YIFRleHTrpbwg67OA6rK97ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBmaWVsZEdyb3VwIEZpZWxk7J2YIFNWRyDrhbjrk5xcclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzY2FsZSDtmITsnqwgUERG7J2YIFNjYWxlXHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIGNoYW5nZVRleHRFbGVtZW50KGZpZWxkR3JvdXAsIHNjYWxlKSB7XHJcbiAgICAgICAgZmllbGRHcm91cC5zZWxlY3QoXCJzdmdcIikucmVtb3ZlKCk7XHJcbiAgICAgICAgdmFyIG5ld1RleHQgPSB0aGlzLm1ha2VTVkdUZXh0KHNjYWxlKTtcclxuICAgICAgICBjb25zdCBwID0gU25hcC5wYXJzZShuZXdUZXh0KTtcclxuICAgICAgICBmaWVsZEdyb3VwLmFwcGVuZChwKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiBzaG93RmllbGRBdHRyaWJ1dGVcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5UZXh0QmFzZUZpZWxkI3Nob3dGaWVsZEF0dHJpYnV0ZVxyXG4gICAgICogQGRlc2NyaXB0aW9uICAoU3RhdGljKSDtlYTrk5zsnZgg7IaN7ISxIO2MneyXheywveydhCDshKTsoJXtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtFTEVNRU5UfSBub2RlICDsho3shLEg7Yyd7JeFIE5vZGVcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBpZFZhbHVlICAgICDtlYTrk5zsnZggaWTqsJJcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSByZXF1aXJlZFZhbHVlICAgICDtlYTsiJjsl6zrtoAg6rCSXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gb3duZXJJZFZhbHVlICAgICDshJzrqoXsnpAg7JWE7J2065SUXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZHZWYWx1ZSAgICAg6riw67O46rCSXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZm9udEZhbWlseU5hbWVWYWx1ZSAgICAg7Y+w7Yq4IOydtOumhFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZvbnRTaXplVmFsdWUgICAgIO2PsO2KuCDtgazquLAg6rCSXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dEFsaWduVmFsdWUgICAgIO2FjeyKpO2KuCDqsIDroZwg7KCV66CsIOqwklxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGJvbGRWYWx1ZSAgICAg7Y+w7Yq4IOuzvOuTnCDsl6zrtoBcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmb250Q29sb3JWYWx1ZSAgICAg7Y+w7Yq4IOy5vOudvFxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gdXNlckxpc3QgICDshJzrqoXsnpAg66as7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBkdk9wdGlvbkxpc3QgICDquLDrs7jqsJIg7ISg7YOdIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtDYWxsYmFja30gY2hhbmdlRXZlbnRGdW5jICAgIOyGjeyEseqwkuydtCDrs4DtlaDrlYwg7Zi47Lac65CY64qUIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBzaG93RmllbGRBdHRyaWJ1dGUobm9kZSxcclxuICAgICAgICBpZFZhbHVlLCBmaWVsZElkVmFsdWUsIHJlcXVpcmVkVmFsdWUsIG93bmVySWRWYWx1ZSwgZHZWYWx1ZSwgZm9udEZhbWlseU5hbWVWYWx1ZSwgZm9udFNpemVWYWx1ZSwgdGV4dEFsaWduVmFsdWUsIGJvbGRWYWx1ZSwgZm9udENvbG9yVmFsdWUsXHJcbiAgICAgICAgdXNlckxpc3QsIGR2T3B0aW9uTGlzdCxcclxuICAgICAgICBjaGFuZ2VFdmVudEZ1bmMpIHtcclxuXHJcbiAgICAgICAgdmFyIHBhbmVsID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlUGFuZWxOb2RlKCk7XHJcblxyXG4gICAgICAgIHZhciByZXF1aXJlUm93ID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlVG9nZ2xlQnV0dG9uTm9kZShpZFZhbHVlLCBcInJlcXVpcmVkXCIsIFwiVGVtcGxhdGUuaXNSZXF1aXJlZFwiLCByZXF1aXJlZFZhbHVlLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG4gICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKHJlcXVpcmVSb3cpO1xyXG5cclxuICAgICAgICBsZXQgdXNlRGVmYXVsT3B0aW9uTm9kZSA9IFV0aWxzLmdldFVzZXJJbmZvT3B0c0xpc3RDb3VudCgpICE9PSAxO1xyXG4gICAgICAgIHZhciBvd25lclNlbGVjdFJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVNlbGVjdE5vZGUoaWRWYWx1ZSwgXCJvd25lcklkXCIsIHVzZXJMaXN0LCBcIlwiLCB1c2VEZWZhdWxPcHRpb25Ob2RlKTtcclxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChvd25lclNlbGVjdFJvdyk7XHJcblxyXG4gICAgICAgIGxldCBvd25lclNlbGVjdCA9IG93bmVyU2VsZWN0Um93LnF1ZXJ5U2VsZWN0b3IoXCJzZWxlY3RcIik7XHJcbiAgICAgICAgalF1ZXJ5KG93bmVyU2VsZWN0KS5zZWxlY3QyKHtcclxuICAgICAgICAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxyXG4gICAgICAgICAgICB3aWR0aDogXCIxMDAlXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICBqUXVlcnkob3duZXJTZWxlY3QpLnZhbChvd25lcklkVmFsdWUpLnRyaWdnZXIoXCJjaGFuZ2VcIik7XHJcbiAgICAgICAgalF1ZXJ5KG93bmVyU2VsZWN0KS5vbihcImNoYW5nZVwiLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG5cclxuICAgICAgICAvLzEyLTI4XHJcbiAgICAgICAgaWYgKGR2T3B0aW9uTGlzdCAmJiBBcnJheS5pc0FycmF5KGR2T3B0aW9uTGlzdCkgJiYgZHZPcHRpb25MaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdmFyIGRlZmF1bHRWYWx1ZVJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVNlbGVjdE5vZGUoaWRWYWx1ZSwgXCJkZWZhdWx0VmFsdWVcIiwgZHZPcHRpb25MaXN0LCBcIlRlbXBsYXRlLmRlZmF1bHRWYWx1ZVRleHRcIiwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKGRlZmF1bHRWYWx1ZVJvdyk7XHJcbiAgICBcclxuICAgICAgICAgICAgbGV0IGRlZmF1bHRWYWx1ZVNlbGVjdCA9IGRlZmF1bHRWYWx1ZVJvdy5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xyXG4gICAgICAgICAgICAkKGRlZmF1bHRWYWx1ZVNlbGVjdCkuc2VsZWN0Mih7XHJcbiAgICAgICAgICAgICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogXCIxMDAlXCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICQoZGVmYXVsdFZhbHVlU2VsZWN0KS52YWwoZHZWYWx1ZSkudHJpZ2dlcihcImNoYW5nZVwiKTtcclxuICAgICAgICAgICAgJChkZWZhdWx0VmFsdWVTZWxlY3QpLm9uKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZmllbGRJZFZhbHVlUm93ID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlSW5wdXROb2RlKGlkVmFsdWUsIFwiZmllbGRJZFwiLCBcIlRlbXBsYXRlLmZpZWxkSWRUZXh0XCIsIGZpZWxkSWRWYWx1ZSwgXCJcIiwgXCJcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChmaWVsZElkVmFsdWVSb3cpO1xyXG5cclxuICAgICAgICB2YXIgZm9udEF0dHJSb3cgPSBVdGlscy5jcmVhdGVUZXh0QXR0cmJ1dGVOb2RlKGlkVmFsdWUsIGZvbnRDb2xvclZhbHVlLCB0ZXh0QWxpZ25WYWx1ZSwgYm9sZFZhbHVlLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG4gICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKGZvbnRBdHRyUm93LnJvdyk7XHJcblxyXG4gICAgICAgIGxldCBmb250RmFtaWx5Q29tYm9TZWxlY3QgPSBmb250QXR0clJvdy5mb250RmFtaWx5Q29tYm8ucXVlcnlTZWxlY3RvcihcInNlbGVjdFwiKTtcclxuICAgICAgICAkKGZvbnRGYW1pbHlDb21ib1NlbGVjdCkuc2VsZWN0Mih7XHJcbiAgICAgICAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcclxuICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChmb250RmFtaWx5Q29tYm9TZWxlY3QpLnZhbChmb250RmFtaWx5TmFtZVZhbHVlKS50cmlnZ2VyKFwiY2hhbmdlXCIpO1xyXG4gICAgICAgICQoZm9udEZhbWlseUNvbWJvU2VsZWN0KS5vbihcImNoYW5nZVwiLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG4gICAgICAgIGxldCBmb250U2l6ZUNvbWJvU2VsZWN0ID0gZm9udEF0dHJSb3cuZm9udFNpemVDb21iby5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xyXG4gICAgICAgICQoZm9udFNpemVDb21ib1NlbGVjdCkuc2VsZWN0Mih7XHJcbiAgICAgICAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcclxuICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChmb250U2l6ZUNvbWJvU2VsZWN0KS52YWwoZm9udFNpemVWYWx1ZSkudHJpZ2dlcihcImNoYW5nZVwiKTtcclxuICAgICAgICAkKGZvbnRTaXplQ29tYm9TZWxlY3QpLm9uKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcblxyXG4gICAgICAgIGxldCBjb2xvcklucHV0ID0gZm9udEF0dHJSb3cuY29sb3JCdG4ucXVlcnlTZWxlY3RvcihcImJ1dHRvblwiKTtcclxuICAgICAgICBjb2xvcklucHV0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGZvbnRDb2xvclZhbHVlO1xyXG4gICAgICAgIGxldCBwaWNrZXIgPSBuZXcgQ1AoY29sb3JJbnB1dCwgeyBjb2xvcjogZm9udENvbG9yVmFsdWUgfSk7XHJcbiAgICAgICAgY29sb3JJbnB1dC52YWx1ZSA9IGZvbnRDb2xvclZhbHVlO1xyXG4gICAgICAgIHBpY2tlci5vbignY2hhbmdlJywgZnVuY3Rpb24gKHIsIGcsIGIsIGEpIHtcclxuICAgICAgICAgICAgaWYgKCFwaWNrZXIudmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbG9ySW5wdXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gQ1AuSEVYKFtyLCBnLCBiLCBhXSk7XHJcbiAgICAgICAgICAgIGNvbG9ySW5wdXQudmFsdWUgPSBDUC5IRVgoW3IsIGcsIGIsIGFdKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBjb2xvclRleHRJbnB1dCA9IGZvbnRBdHRyUm93LmNvbG9yQnRuLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFt0eXBlPSd0ZXh0J11cIik7XHJcbiAgICAgICAgICAgIGNvbG9yVGV4dElucHV0LnZhbHVlID0gKENQLkhFWChbciwgZywgYiwgYV0pKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBwaWNrZXIub24oJ2V4aXQnLCBmdW5jdGlvbiAociwgZywgYiwgYSkge1xyXG4gICAgICAgICAgICBjb2xvcklucHV0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IENQLkhFWChbciwgZywgYiwgYV0pO1xyXG5cclxuICAgICAgICAgICAgbGV0IGNvbG9yVGV4dElucHV0ID0gZm9udEF0dHJSb3cuY29sb3JCdG4ucXVlcnlTZWxlY3RvcihcImlucHV0W3R5cGU9J3RleHQnXVwiKTtcclxuICAgICAgICAgICAgY29sb3JUZXh0SW5wdXQudmFsdWUgPSAoQ1AuSEVYKFtyLCBnLCBiLCBhXSkpO1xyXG4gICAgICAgICAgICBjb2xvclRleHRJbnB1dC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImNoYW5nZVwiKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHBhbmVsLnNldEF0dHJpYnV0ZShcIkZpZWxkLWlkLWxpc3RcIiwgaWRWYWx1ZSk7XHJcblxyXG4gICAgICAgIG5vZGUuY2xhc3NOYW1lID0gXCJFZGl0b3ItQXR0cmlidXRlXCI7XHJcbiAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKFwiVGV4dC1GaWVsZFwiKTtcclxuICAgICAgICBub2RlLmFwcGVuZENoaWxkKHBhbmVsKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gc2hvd0ZpZWxkc0F0dHJpYnV0ZVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRCYXNlRmllbGQjc2hvd0ZpZWxkc0F0dHJpYnV0ZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOuTnOydmCDsho3shLEg7Yyd7JeF7LC97J2EIOyEpOygle2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0VMRU1FTlR9IG93bmVyTm9kZSAg7IaN7ISxIO2MneyXhSBOb2RlXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBmaWVsZExpc3QgICAgIO2VhOuTnOuTpOydmCDrpqzsiqTtirhcclxuICAgICAqIEBwYXJhbSB7RUxFTUVOVH0gYXR0ck5vZGUgICAg7IaN7ISxIO2MneyXheydmCBOb2RlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWFpbkdyb3VwICAgIFNWR+ydmCDrqZTsnbggRWxlbWVudFxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gdXNlckxpc3QgICDshJzrqoXsnpAg66as7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBkdk9wdGlvbkxpc3QgICDquLDrs7jqsJIg7ISg7YOdIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtDYWxsYmFja30gY2hhbmdlRXZlbnRGdW5jICAgIOyGjeyEseqwkuydtCDrs4DtlaDrlYwg7Zi47Lac65CY64qUIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBzaG93RmllbGRzQXR0cmlidXRlKG93bmVyTm9kZSwgZmllbGRMaXN0LCBhdHRyTm9kZSwgbWFpbkdyb3VwLCB1c2VyTGlzdCwgZHZPcHRpb25MaXN0LCBjaGFuZ2VFdmVudEZ1bmMpIHtcclxuICAgICAgICBsZXQgbm9kZSA9IGF0dHJOb2RlO1xyXG4gICAgICAgIGlmIChhdHRyTm9kZSA9PT0gbnVsbCB8fCBVdGlscy5pc0VtcHR5T2JqZWN0KGF0dHJOb2RlKSkge1xyXG4gICAgICAgICAgICBjb25zdCBiYm94ID0gVXRpbHMubWVyZ2VGaWVsZHNCQm94KGZpZWxkTGlzdCk7XHJcbiAgICAgICAgICAgIG5vZGUgPSBVdGlscy5jcmVhdGVBdHRyYnV0ZVBvcHVwKG93bmVyTm9kZSwgYmJveCk7XHJcbiAgICAgICAgICAgIFV0aWxzLnJlcG9zaXRpb25GaWVsZERlbGV0ZUJ0bihvd25lck5vZGUsIGJib3gueCwgYmJveC55LCBiYm94LndpZHRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgVXRpbHMucmVtb3ZlQWxsQ2hpbGROb2RlKG5vZGUpO1xyXG5cclxuICAgICAgICB2YXIgaWRWYWx1ZUFyciA9IFtdO1xyXG4gICAgICAgIGZpZWxkTGlzdC5mb3JFYWNoKChmaWVsZCkgPT4ge1xyXG4gICAgICAgICAgICBpZFZhbHVlQXJyLnB1c2goZmllbGQuaWQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgaWRWYWx1ZSA9IGlkVmFsdWVBcnIuam9pbigpO1xyXG5cclxuICAgICAgICB2YXIgb3duZXJJZFZhbHVlID0gZmllbGRMaXN0WzBdLm93bmVySWQ7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLm93bmVySWQgIT09IG93bmVySWRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgb3duZXJJZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHJlcXVpcmVkVmFsdWUgPSBmaWVsZExpc3RbMF0ucmVxdWlyZWQ7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLnJlcXVpcmVkICE9PSByZXF1aXJlZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICByZXF1aXJlZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGR2VmFsdWUgPSBmaWVsZExpc3RbMF0uZGVmYXVsdFZhbHVlO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5kZWZhdWx0VmFsdWUgIT09IGR2VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGR2VmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZmllbGRJZFZhbHVlID0gZmllbGRMaXN0WzBdLmZpZWxkSWQ7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmZpZWxkSWQgIT09IGZpZWxkSWRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgZmllbGRJZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGZvbnRGYW1pbHlOYW1lVmFsdWUgPSBmaWVsZExpc3RbMF0uZm9udE5hbWU7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmZvbnROYW1lICE9PSBmb250RmFtaWx5TmFtZVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBmb250RmFtaWx5TmFtZVZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZm9udFNpemVWYWx1ZSA9IGZpZWxkTGlzdFswXS5mb250U2l6ZTtcclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0uZm9udFNpemUgIT09IGZvbnRTaXplVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplVmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgdGV4dEFsaWduVmFsdWUgPSBmaWVsZExpc3RbMF0udGV4dEFsaWduO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS50ZXh0QWxpZ24gIT09IHRleHRBbGlnblZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QWxpZ25WYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBib2xkVmFsdWUgPSBmaWVsZExpc3RbMF0uaXNCb2xkO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5pc0JvbGQgIT09IGJvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgYm9sZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZm9udENvbG9yVmFsdWUgPSBmaWVsZExpc3RbMF0uZm9udENvbG9yO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5mb250Q29sb3IgIT09IGZvbnRDb2xvclZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBmb250Q29sb3JWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFRleHRCYXNlRmllbGQuc2hvd0ZpZWxkQXR0cmlidXRlKG5vZGUsXHJcbiAgICAgICAgICAgIGlkVmFsdWUsIGZpZWxkSWRWYWx1ZSwgcmVxdWlyZWRWYWx1ZSwgb3duZXJJZFZhbHVlLCBkdlZhbHVlLCBmb250RmFtaWx5TmFtZVZhbHVlLCBmb250U2l6ZVZhbHVlLCB0ZXh0QWxpZ25WYWx1ZSwgYm9sZFZhbHVlLCBmb250Q29sb3JWYWx1ZSxcclxuICAgICAgICAgICAgdXNlckxpc3QsIGR2T3B0aW9uTGlzdCxcclxuICAgICAgICAgICAgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdmFsaWRhdGVWYWx1ZShwcm9wZXJ0eU5hbWUsIHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsIlxyXG4vKipcclxuICogQG1vZHVsZSBUZW1wbGF0ZS9GaWVsZFxyXG4qL1xyXG5cclxuaW1wb3J0IHtUZXh0QmFzZUZpZWxkfSBmcm9tICcuL1RleHRCYXNlRmllbGQnO1xyXG5pbXBvcnQge1V0aWxzfSBmcm9tICcuLy4uL3V0aWxzL3V0aWxzLmpzJztcclxuXHJcbi8qKlxyXG4gKiDthY3siqTtirgg7ZWE65OcIENsYXNzXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBtX21heFZhbHVlTGVuZ3RoIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuVGV4dEZpZWxkI21fbWF4VmFsdWVMZW5ndGh9XHJcbiAqIFxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBmaWVsZE5hbWUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5UZXh0RmllbGQjZmllbGROYW1lfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBzaG93RmllbGRzQXR0cmlidXRlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuVGV4dEZpZWxkI3Nob3dGaWVsZHNBdHRyaWJ1dGV9XHJcbiAqIFxyXG4gKiBAYXVnbWVudHMgVGV4dEJhc2VGaWVsZCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRCYXNlRmllbGQjVGV4dEJhc2VGaWVsZH1cclxuICogQEZpbGVOYW1lIFRleHRGaWVsZC5qc1xyXG4gKiBAc2luY2UgMjAyMS4wNS4zMVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRleHRGaWVsZCBleHRlbmRzIFRleHRCYXNlRmllbGQge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAqIEBwYXJhbSBpZCDtlYTrk5zsnZggSURcclxuICAgICAqIEBwYXJhbSBwYWdlTm8g7ZWE65Oc6rCAIOyGje2VnCDtjpjsnbTsp4Ag67KI7Zi4XHJcbiAgICAgKiBAcGFyYW0geCDtlYTrk5zsnZggc3Zn7IOB7J2YIHjsooztkZxcclxuICAgICAqIEBwYXJhbSB5IO2VhOuTnOydmCBzdmfsg4HsnZggeeyijO2RnFxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoaWQsIHBhZ2VObywgeCwgeSkge1xyXG4gICAgICAgIHN1cGVyKGlkLCBwYWdlTm8sIHgsIHksIFRleHRGaWVsZC53aWR0aFZhbHVlKCksIFRleHRGaWVsZC5oZWlnaHRWYWx1ZSgpKTtcclxuICAgICAgICB0aGlzLm1fdHlwZSA9IFRleHRGaWVsZC5maWVsZE5hbWUoKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge051bWJlcn1cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUuTnVtYmVyRmllbGQjbV9tYXhWYWx1ZUxlbmd0aFxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiDthY3siqTtirgg7ZWE65OcIOqwkuydmCDstZzrjIDquLjsnbRcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciBtYXhWYWx1ZUxlbmd0aCgpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIG1heFZhbHVlTGVuZ3RoKHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1fbWF4VmFsdWVMZW5ndGggPSAxMDA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5tX2tpbmQgPSBVdGlscy50cmFuc2xhdGVGb3JLZXkoXCJUZW1wbGF0ZS50ZXh0RmllbGRUb29sXCIpO1xyXG4gICAgICAgIGlmIChVdGlscy5pc1N0cmluZ0VtcHR5KGlkKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubV9maWVsZElkID0gdGhpcy5tX2lkLnJlcGxhY2UodGhpcy5tX3R5cGUsIHRoaXMubV9raW5kICsgXCItXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIGZpZWxkTmFtZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRGaWVsZCNmaWVsZE5hbWVcclxuICAgICAqIEByZXR1cm4ge1N0cmluZ31cclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtlYTrk5wg7YOA7J6F7J2YIOydtOumhFxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZpZWxkTmFtZSgpIHtcclxuICAgICAgICByZXR1cm4gXCJUZXh0RmllbGRcIjtcclxuICAgIH1cclxuXHJcbiAgICBhbmNlc3RvcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFtcIlRGXCIsIFwiVEJGXCIsIFwiQkZcIl07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG1heFZhbHVlTGVuZ3RoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fbWF4VmFsdWVMZW5ndGg7XHJcbiAgICB9XHJcbiAgICBzZXQgbWF4VmFsdWVMZW5ndGgoX19tYXhWYWx1ZUxlbmd0aCkge1xyXG4gICAgICAgIHRoaXMubV9tYXhWYWx1ZUxlbmd0aCA9IF9fbWF4VmFsdWVMZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gc2hvd0ZpZWxkc0F0dHJpYnV0ZVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRGaWVsZCNzaG93RmllbGRzQXR0cmlidXRlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE65Oc7J2YIOyGjeyEsSDtjJ3sl4XssL3snYQg7ISk7KCV7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7RUxFTUVOVH0gb3duZXJOb2RlICDsho3shLEg7Yyd7JeFIE5vZGVcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGZpZWxkTGlzdCAgICAg7ZWE65Oc65Ok7J2YIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtFTEVNRU5UfSBhdHRyTm9kZSAgICDsho3shLEg7Yyd7JeF7J2YIE5vZGVcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtYWluR3JvdXAgICAgU1ZH7J2YIOuplOyduCBFbGVtZW50XHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSB1c2VyTGlzdCAgIOyEnOuqheyekCDrpqzsiqTtirhcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGR2T3B0aW9uTGlzdCAgIOq4sOuzuOqwkiDshKDtg50g66as7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge0NhbGxiYWNrfSBjaGFuZ2VFdmVudEZ1bmMgICAg7IaN7ISx6rCS7J20IOuzgO2VoOuVjCDtmLjstpzrkJjripQgY2FsbGJhY2sgZnVuY3Rpb25cclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHNob3dGaWVsZHNBdHRyaWJ1dGUob3duZXJOb2RlLCBmaWVsZExpc3QsIGF0dHJOb2RlLCBtYWluR3JvdXAsIHVzZXJMaXN0LCBkdk9wdGlvbkxpc3QsIGNoYW5nZUV2ZW50RnVuYykge1xyXG4gICAgICAgIFRleHRCYXNlRmllbGQuc2hvd0ZpZWxkc0F0dHJpYnV0ZShvd25lck5vZGUsIGZpZWxkTGlzdCwgYXR0ck5vZGUsIG1haW5Hcm91cCwgdXNlckxpc3QsIGR2T3B0aW9uTGlzdCwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdmFsaWRhdGVWYWx1ZShwcm9wZXJ0eU5hbWUsIHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4vdXRpbHMuanMnO1xyXG5cclxuLyoqXHJcbiAqIHNpbXBsZS10cmFuc2xhdG9yXHJcbiAqIEEgc21hbGwgSmF2YVNjcmlwdCBsaWJyYXJ5IHRvIHRyYW5zbGF0ZSB3ZWJwYWdlcyBpbnRvIGRpZmZlcmVudCBsYW5ndWFnZXMuXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmRyZWFzcmVtZHQvc2ltcGxlLXRyYW5zbGF0b3JcclxuICpcclxuICogQXV0aG9yOiBBbmRyZWFzIFJlbWR0IDxtZUBhbmRyZWFzcmVtZHQuY29tPiAoaHR0cHM6Ly9hbmRyZWFzcmVtZHQuY29tKVxyXG4gKiBMaWNlbnNlOiBNSVQgKGh0dHBzOi8vbWl0LWxpY2Vuc2Uub3JnLylcclxuICovXHJcbmNsYXNzIFRyYW5zbGF0b3Ige1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplIHRoZSBUcmFuc2xhdG9yIGJ5IHByb3ZpZGluZyBvcHRpb25zLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIHRoaXMuZGVidWcgPSBsb2dnZXIodHJ1ZSk7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyAhPSAnb2JqZWN0JyB8fCBBcnJheS5pc0FycmF5KG9wdGlvbnMpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVidWcoJ0lOVkFMSURfT1BUSU9OUycsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBvcHRpb25zID0ge307XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmxhbmd1YWdlcyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IE9iamVjdC5hc3NpZ24oVHJhbnNsYXRvci5kZWZhdWx0Q29uZmlnLCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgY29uc3QgeyBkZWJ1ZywgcmVnaXN0ZXJHbG9iYWxseSwgZGV0ZWN0TGFuZ3VhZ2UgfSA9IHRoaXMuY29uZmlnO1xyXG5cclxuICAgICAgICB0aGlzLmRlYnVnID0gbG9nZ2VyKGRlYnVnKTtcclxuXHJcbiAgICAgICAgaWYgKHJlZ2lzdGVyR2xvYmFsbHkpIHtcclxuICAgICAgICAgICAgdGhpcy5fZ2xvYmFsT2JqZWN0W3JlZ2lzdGVyR2xvYmFsbHldID0gdGhpcy50cmFuc2xhdGVGb3JLZXkuYmluZCh0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkZXRlY3RMYW5ndWFnZSAmJiB0aGlzLl9lbnYgPT0gJ2Jyb3dzZXInKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RldGVjdExhbmd1YWdlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIHRoZSBnbG9iYWwgb2JqZWN0LCBkZXBlbmRpbmcgb24gdGhlIGVudmlyb25tZW50LlxyXG4gICAgICogSWYgdGhlIHNjcmlwdCBpcyBleGVjdXRlZCBpbiBhIGJyb3dzZXIsIHJldHVybiB0aGUgd2luZG93IG9iamVjdCxcclxuICAgICAqIG90aGVyd2lzZSwgaW4gTm9kZS5qcywgcmV0dXJuIHRoZSBnbG9iYWwgb2JqZWN0LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge09iamVjdH1cclxuICAgICAqL1xyXG4gICAgZ2V0IF9nbG9iYWxPYmplY3QoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2VudiA9PSAnYnJvd3NlcicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBnbG9iYWw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBhbmQgcmV0dXJuIHRoZSBlbnZpcm9ubWVudCBpbiB3aGljaCB0aGUgc2NyaXB0IGlzIGV4ZWN1dGVkLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gVGhlIGVudmlyb25tZW50XHJcbiAgICAgKi9cclxuICAgIGdldCBfZW52KCkge1xyXG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnYnJvd3Nlcic7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xyXG4gICAgICAgICAgICByZXR1cm4gJ25vZGUnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuICdicm93c2VyJztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERldGVjdCB0aGUgdXNlcnMgcHJlZmVycmVkIGxhbmd1YWdlLiBJZiB0aGUgbGFuZ3VhZ2UgaXMgc3RvcmVkIGluXHJcbiAgICAgKiBsb2NhbFN0b3JhZ2UgZHVlIHRvIGEgcHJldmlvdXMgaW50ZXJhY3Rpb24sIHVzZSBpdC5cclxuICAgICAqIElmIG5vIGxvY2FsU3RvcmFnZSBlbnRyeSBoYXMgYmVlbiBmb3VuZCwgdXNlIHRoZSBkZWZhdWx0IGJyb3dzZXIgbGFuZ3VhZ2UuXHJcbiAgICAgKi9cclxuICAgIF9kZXRlY3RMYW5ndWFnZSgpIHtcclxuICAgICAgICBjb25zdCBpbk1lbW9yeSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMuY29uZmlnLnBlcnNpc3RLZXkpO1xyXG5cclxuICAgICAgICBpZiAoaW5NZW1vcnkpIHtcclxuICAgICAgICAgICAgdGhpcy5jb25maWcuZGVmYXVsdExhbmd1YWdlID0gaW5NZW1vcnk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgbGFuZyA9IG5hdmlnYXRvci5sYW5ndWFnZXNcclxuICAgICAgICAgICAgICAgID8gbmF2aWdhdG9yLmxhbmd1YWdlc1swXVxyXG4gICAgICAgICAgICAgICAgOiBuYXZpZ2F0b3IubGFuZ3VhZ2U7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5kZWZhdWx0TGFuZ3VhZ2UgPSBsYW5nLnN1YnN0cigwLCAyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYSB0cmFuc2xhdGVkIHZhbHVlIGZyb20gYSBKU09OIGJ5IHByb3ZpZGluZyBhIGtleS4gQWRkaXRpb25hbGx5LFxyXG4gICAgICogdGhlIHRhcmdldCBsYW5ndWFnZSBjYW4gYmUgc3BlY2lmaWVkIGFzIHRoZSBzZWNvbmQgcGFyYW1ldGVyLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0b0xhbmd1YWdlXHJcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XHJcbiAgICAgKi9cclxuICAgIF9nZXRWYWx1ZUZyb21KU09OKGtleSwgdG9MYW5ndWFnZSkge1xyXG4gICAgICAgIGNvbnN0IGpzb24gPSB0aGlzLmxhbmd1YWdlcy5nZXQodG9MYW5ndWFnZSk7XHJcblxyXG4gICAgICAgIHJldHVybiBrZXkuc3BsaXQoJy4nKS5yZWR1Y2UoKG9iaiwgaSkgPT4gKG9iaiA/IG9ialtpXSA6IG51bGwpLCBqc29uKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlcGxhY2UgYSBnaXZlbiBET00gbm9kZXMnIGF0dHJpYnV0ZSB2YWx1ZXMgKGJ5IGRlZmF1bHQgaW5uZXJIVE1MKSB3aXRoXHJcbiAgICAgKiB0aGUgdHJhbnNsYXRlZCB0ZXh0LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0b0xhbmd1YWdlXHJcbiAgICAgKi9cclxuICAgIF9yZXBsYWNlKGVsZW1lbnQsIHRvTGFuZ3VhZ2UpIHtcclxuICAgICAgICBjb25zdCBrZXlzID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaTE4bicpPy5zcGxpdCgvXFxzL2cpO1xyXG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBlbGVtZW50Py5nZXRBdHRyaWJ1dGUoJ2RhdGEtaTE4bi1hdHRyJyk/LnNwbGl0KC9cXHMvZyk7XHJcblxyXG4gICAgICAgIGlmIChhdHRyaWJ1dGVzICYmIGtleXMubGVuZ3RoICE9IGF0dHJpYnV0ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVidWcoJ01JU01BVENISU5HX0FUVFJJQlVURVMnLCBrZXlzLCBhdHRyaWJ1dGVzLCBlbGVtZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGtleXMuZm9yRWFjaCgoa2V5LCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0gdGhpcy5fZ2V0VmFsdWVGcm9tSlNPTihrZXksIHRvTGFuZ3VhZ2UpO1xyXG4gICAgICAgICAgICBjb25zdCBhdHRyID0gYXR0cmlidXRlcyA/IGF0dHJpYnV0ZXNbaW5kZXhdIDogJ2lubmVySFRNTCc7XHJcblxyXG4gICAgICAgICAgICBpZiAodGV4dCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGF0dHIgPT0gJ2lubmVySFRNTCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50W2F0dHJdID0gdGV4dDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0ciwgdGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlYnVnKCdUUkFOU0xBVElPTl9OT1RfRk9VTkQnLCBrZXksIHRvTGFuZ3VhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUcmFuc2xhdGUgYWxsIERPTSBub2RlcyB0aGF0IG1hdGNoIHRoZSBnaXZlbiBzZWxlY3RvciBpbnRvIHRoZVxyXG4gICAgICogc3BlY2lmaWVkIHRhcmdldCBsYW5ndWFnZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdG9MYW5ndWFnZSBUaGUgdGFyZ2V0IGxhbmd1YWdlXHJcbiAgICAgKi9cclxuICAgIHRyYW5zbGF0ZVBhZ2VUbyh0b0xhbmd1YWdlID0gdGhpcy5jb25maWcuZGVmYXVsdExhbmd1YWdlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2VudiA9PSAnbm9kZScpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWJ1ZygnSU5WQUxJRF9FTlZJUk9OTUVOVCcpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodHlwZW9mIHRvTGFuZ3VhZ2UgIT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWJ1ZygnSU5WQUxJRF9QQVJBTV9MQU5HVUFHRScsIHRvTGFuZ3VhZ2UpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodG9MYW5ndWFnZS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmRlYnVnKCdFTVBUWV9QQVJBTV9MQU5HVUFHRScpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMubGFuZ3VhZ2VzLmhhcyh0b0xhbmd1YWdlKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRlYnVnKCdOT19MQU5HVUFHRV9SRUdJU1RFUkVEJywgdG9MYW5ndWFnZSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID1cclxuICAgICAgICAgICAgdHlwZW9mIHRoaXMuY29uZmlnLnNlbGVjdG9yID09ICdzdHJpbmcnXHJcbiAgICAgICAgICAgICAgICA/IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLmNvbmZpZy5zZWxlY3RvcikpXHJcbiAgICAgICAgICAgICAgICA6IHRoaXMuY29uZmlnLnNlbGVjdG9yO1xyXG5cclxuICAgICAgICBpZiAoZWxlbWVudHMubGVuZ3RoICYmIGVsZW1lbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4gdGhpcy5fcmVwbGFjZShlbGVtZW50LCB0b0xhbmd1YWdlKSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50cy5sZW5ndGggPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlcGxhY2UoZWxlbWVudHMsIHRvTGFuZ3VhZ2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fY3VycmVudExhbmd1YWdlID0gdG9MYW5ndWFnZTtcclxuICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubGFuZyA9IHRvTGFuZ3VhZ2U7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5wZXJzaXN0KSB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMuY29uZmlnLnBlcnNpc3RLZXksIHRvTGFuZ3VhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRyYW5zbGF0ZSBhIGdpdmVuIGtleSBpbnRvIHRoZSBzcGVjaWZpZWQgbGFuZ3VhZ2UgaWYgaXQgZXhpc3RzXHJcbiAgICAgKiBpbiB0aGUgdHJhbnNsYXRpb24gZmlsZS4gSWYgbm90IG9yIGlmIHRoZSBsYW5ndWFnZSBoYXNuJ3QgYmVlbiBhZGRlZCB5ZXQsXHJcbiAgICAgKiB0aGUgcmV0dXJuIHZhbHVlIGlzIGBudWxsYC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5IFRoZSBrZXkgZnJvbSB0aGUgbGFuZ3VhZ2UgZmlsZSB0byB0cmFuc2xhdGVcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0b0xhbmd1YWdlIFRoZSB0YXJnZXQgbGFuZ3VhZ2VcclxuICAgICAqIEByZXR1cm4geyhTdHJpbmd8bnVsbCl9XHJcbiAgICAgKi9cclxuICAgIHRyYW5zbGF0ZUZvcktleShrZXksIHRvTGFuZ3VhZ2UgPSB0aGlzLmNvbmZpZy5kZWZhdWx0TGFuZ3VhZ2UpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGtleSAhPSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICB0aGlzLmRlYnVnKCdJTlZBTElEX1BBUkFNX0tFWScsIGtleSk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmxhbmd1YWdlcy5oYXModG9MYW5ndWFnZSkpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWJ1ZygnTk9fTEFOR1VBR0VfUkVHSVNURVJFRCcsIHRvTGFuZ3VhZ2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHRleHQgPSB0aGlzLl9nZXRWYWx1ZUZyb21KU09OKGtleSwgdG9MYW5ndWFnZSk7XHJcblxyXG4gICAgICAgIGlmICghdGV4dCkge1xyXG4gICAgICAgICAgICB0aGlzLmRlYnVnKCdUUkFOU0xBVElPTl9OT1RfRk9VTkQnLCBrZXksIHRvTGFuZ3VhZ2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkIGEgdHJhbnNsYXRpb24gcmVzb3VyY2UgdG8gdGhlIFRyYW5zbGF0b3Igb2JqZWN0LiBUaGUgbGFuZ3VhZ2VcclxuICAgICAqIGNhbiB0aGVuIGJlIHVzZWQgdG8gdHJhbnNsYXRlIHNpbmdsZSBrZXlzIG9yIHRoZSBlbnRpcmUgcGFnZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbGFuZ3VhZ2UgVGhlIHRhcmdldCBsYW5ndWFnZSB0byBhZGRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBqc29uIFRoZSBsYW5ndWFnZSByZXNvdXJjZSBmaWxlIGFzIEpTT05cclxuICAgICAqIEByZXR1cm4ge09iamVjdH0gVHJhbnNsYXRvciBpbnN0YW5jZVxyXG4gICAgICovXHJcbiAgICBhZGQobGFuZ3VhZ2UsIGpzb24pIHtcclxuICAgICAgICBpZiAodHlwZW9mIGxhbmd1YWdlICE9ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVidWcoJ0lOVkFMSURfUEFSQU1fTEFOR1VBR0UnLCBsYW5ndWFnZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGxhbmd1YWdlLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVidWcoJ0VNUFRZX1BBUkFNX0xBTkdVQUdFJyk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoanNvbikgfHwgdHlwZW9mIGpzb24gIT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWJ1ZygnSU5WQUxJRF9QQVJBTV9KU09OJywganNvbik7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKGpzb24pLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVidWcoJ0VNUFRZX1BBUkFNX0pTT04nKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmxhbmd1YWdlcy5zZXQobGFuZ3VhZ2UsIGpzb24pO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZSBhIHRyYW5zbGF0aW9uIHJlc291cmNlIGZyb20gdGhlIFRyYW5zbGF0b3Igb2JqZWN0LiBUaGUgbGFuZ3VhZ2VcclxuICAgICAqIHdvbid0IGJlIGF2YWlsYWJsZSBhZnRlcndhcmRzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBsYW5ndWFnZSBUaGUgdGFyZ2V0IGxhbmd1YWdlIHRvIHJlbW92ZVxyXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBUcmFuc2xhdG9yIGluc3RhbmNlXHJcbiAgICAgKi9cclxuICAgIHJlbW92ZShsYW5ndWFnZSkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgbGFuZ3VhZ2UgIT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWJ1ZygnSU5WQUxJRF9QQVJBTV9MQU5HVUFHRScsIGxhbmd1YWdlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobGFuZ3VhZ2UubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5kZWJ1ZygnRU1QVFlfUEFSQU1fTEFOR1VBR0UnKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmxhbmd1YWdlcy5kZWxldGUobGFuZ3VhZ2UpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZldGNoIGEgdHJhbnNsYXRpb24gcmVzb3VyY2UgZnJvbSB0aGUgd2ViIHNlcnZlci4gSXQgY2FuIGVpdGhlciBmZXRjaFxyXG4gICAgICogYSBzaW5nbGUgcmVzb3VyY2Ugb3IgYW4gYXJyYXkgb2YgcmVzb3VyY2VzLiBBZnRlciBhbGwgcmVzb3VyY2VzIGFyZSBmZXRjaGVkLFxyXG4gICAgICogcmV0dXJuIGEgUHJvbWlzZS5cclxuICAgICAqIElmIHRoZSBvcHRpb25hbCwgc2Vjb25kIHBhcmFtZXRlciBpcyBzZXQgdG8gdHJ1ZSwgdGhlIGZldGNoZWQgdHJhbnNsYXRpb25zXHJcbiAgICAgKiB3aWxsIGJlIGFkZGVkIHRvIHRoZSBUcmFuc2xhdG9yIG9iamVjdC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xBcnJheX0gc291cmNlcyBUaGUgZmlsZXMgdG8gZmV0Y2hcclxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gc2F2ZSBTYXZlIHRoZSB0cmFuc2xhdGlvbiB0byB0aGUgVHJhbnNsYXRvciBvYmplY3RcclxuICAgICAqIEByZXR1cm4geyhQcm9taXNlfG51bGwpfVxyXG4gICAgICovXHJcbiAgICBmZXRjaChzb3VyY2VzLCBzYXZlID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShzb3VyY2VzKSAmJiB0eXBlb2Ygc291cmNlcyAhPSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICB0aGlzLmRlYnVnKCdJTlZBTElEX1BBUkFNRVRFUl9TT1VSQ0VTJywgc291cmNlcyk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHNvdXJjZXMpKSB7XHJcbiAgICAgICAgICAgIHNvdXJjZXMgPSBbc291cmNlc107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB1cmxzID0gc291cmNlcy5tYXAoKHNvdXJjZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBmaWxlbmFtZSA9IHNvdXJjZS5yZXBsYWNlKC9cXC5qc29uJC8sICcnKS5yZXBsYWNlKC9eXFwvLywgJycpO1xyXG4gICAgICAgICAgICBjb25zdCBwYXRoID0gdGhpcy5jb25maWcuZmlsZXNMb2NhdGlvbi5yZXBsYWNlKC9cXC8kLywgJycpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGAke3BhdGh9LyR7ZmlsZW5hbWV9Lmpzb25gO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fZW52ID09ICdicm93c2VyJykge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwodXJscy5tYXAoKHVybCkgPT4gZmV0Y2godXJsKSkpXHJcbiAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2VzKSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZXMubWFwKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlYnVnKCdGRVRDSF9FUlJPUicsIHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAudGhlbigobGFuZ3VhZ2VGaWxlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGEgZmlsZSBjb3VsZCBub3QgYmUgZmV0Y2hlZCwgaXQgd2lsbCBiZSBgdW5kZWZpbmVkYCBhbmQgZmlsdGVyZWQgb3V0LlxyXG4gICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlRmlsZXMgPSBsYW5ndWFnZUZpbGVzLmZpbHRlcigoZmlsZSkgPT4gZmlsZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzYXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlRmlsZXMuZm9yRWFjaCgoZmlsZSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkKHNvdXJjZXNbaW5kZXhdLCBmaWxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFuZ3VhZ2VGaWxlcy5sZW5ndGggPiAxID8gbGFuZ3VhZ2VGaWxlcyA6IGxhbmd1YWdlRmlsZXNbMF07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2VudiA9PSAnbm9kZScpIHtcclxuICAgICAgICAgICAgLy8gcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICBjb25zdCBsYW5ndWFnZUZpbGVzID0gW107XHJcblxyXG4gICAgICAgICAgICAvLyAgICAgdXJscy5mb3JFYWNoKCh1cmwsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgY29uc3QganNvbiA9IEpTT04ucGFyc2UoXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICByZXF1aXJlKCdmcycpLnJlYWRGaWxlU3luYyhwcm9jZXNzLmN3ZCgpICsgdXJsLCAndXRmLTgnKVxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgaWYgKHNhdmUpIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHRoaXMuYWRkKHNvdXJjZXNbaW5kZXhdLCBqc29uKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgbGFuZ3VhZ2VGaWxlcy5wdXNoKGpzb24pO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLmRlYnVnKCdNT0RVTEVfTk9UX0ZPVU5EJywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gICAgIHJlc29sdmUobGFuZ3VhZ2VGaWxlcy5sZW5ndGggPiAxID8gbGFuZ3VhZ2VGaWxlcyA6IGxhbmd1YWdlRmlsZXNbMF0pO1xyXG4gICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBkZWZhdWx0IGxhbmd1YWdlIG9mIHRoZSB0cmFuc2xhdG9yIGluc3RhbmNlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBsYW5ndWFnZVxyXG4gICAgICogQHJldHVybiB7dm9pZH1cclxuICAgICAqL1xyXG4gICAgc2V0RGVmYXVsdExhbmd1YWdlKGxhbmd1YWdlKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBsYW5ndWFnZSAhPSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICB0aGlzLmRlYnVnKCdJTlZBTElEX1BBUkFNX0xBTkdVQUdFJywgbGFuZ3VhZ2UpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobGFuZ3VhZ2UubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5kZWJ1ZygnRU1QVFlfUEFSQU1fTEFOR1VBR0UnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmxhbmd1YWdlcy5oYXMobGFuZ3VhZ2UpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVidWcoJ05PX0xBTkdVQUdFX1JFR0lTVEVSRUQnLCBsYW5ndWFnZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jb25maWcuZGVmYXVsdExhbmd1YWdlID0gbGFuZ3VhZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBsYW5ndWFnZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XHJcbiAgICAgKi9cclxuICAgIGdldCBjdXJyZW50TGFuZ3VhZ2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRMYW5ndWFnZSB8fCB0aGlzLmNvbmZpZy5kZWZhdWx0TGFuZ3VhZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IGRlZmF1bHQgbGFuZ3VhZ2U7XHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7U3RyaW5nfVxyXG4gICAgICovXHJcbiAgICBnZXQgZGVmYXVsdExhbmd1YWdlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZy5kZWZhdWx0TGFuZ3VhZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gdGhlIGRlZmF1bHQgY29uZmlnIG9iamVjdCB3aG9zZSBrZXlzIGNhbiBiZSBvdmVycmlkZW5cclxuICAgICAqIGJ5IHRoZSB1c2VyJ3MgY29uZmlnIHBhc3NlZCB0byB0aGUgY29uc3RydWN0b3IuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7T2JqZWN0fVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0IGRlZmF1bHRDb25maWcoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZGVmYXVsdExhbmd1YWdlOiAnZW4nLFxyXG4gICAgICAgICAgICBkZXRlY3RMYW5ndWFnZTogdHJ1ZSxcclxuICAgICAgICAgICAgc2VsZWN0b3I6ICdbZGF0YS1pMThuXScsXHJcbiAgICAgICAgICAgIGRlYnVnOiBmYWxzZSxcclxuICAgICAgICAgICAgcmVnaXN0ZXJHbG9iYWxseTogJ19fJyxcclxuICAgICAgICAgICAgcGVyc2lzdDogZmFsc2UsXHJcbiAgICAgICAgICAgIHBlcnNpc3RLZXk6ICdwcmVmZXJyZWRfbGFuZ3VhZ2UnLFxyXG4gICAgICAgICAgICBmaWxlc0xvY2F0aW9uOiAnL2kxOG4nLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFRyYW5zbGF0b3I7IiwiY29uc3QgQ09OU09MRV9NRVNTQUdFUyA9IHtcclxuICAgIElOVkFMSURfUEFSQU1fTEFOR1VBR0U6IChwYXJhbSkgPT5cclxuICAgICAgICBgSW52YWxpZCBwYXJhbWV0ZXIgZm9yIFxcYGxhbmd1YWdlXFxgIHByb3ZpZGVkLiBFeHBlY3RlZCBhIHN0cmluZywgYnV0IGdvdCAke3R5cGVvZiBwYXJhbX0uYCxcclxuICAgIElOVkFMSURfUEFSQU1fSlNPTjogKHBhcmFtKSA9PlxyXG4gICAgICAgIGBJbnZhbGlkIHBhcmFtZXRlciBmb3IgXFxganNvblxcYCBwcm92aWRlZC4gRXhwZWN0ZWQgYW4gb2JqZWN0LCBidXQgZ290ICR7dHlwZW9mIHBhcmFtfS5gLFxyXG4gICAgRU1QVFlfUEFSQU1fTEFOR1VBR0U6ICgpID0+XHJcbiAgICAgICAgYFRoZSBwYXJhbWV0ZXIgZm9yIFxcYGxhbmd1YWdlXFxgIGNhbid0IGJlIGFuIGVtcHR5IHN0cmluZy5gLFxyXG4gICAgRU1QVFlfUEFSQU1fSlNPTjogKCkgPT5cclxuICAgICAgICBgVGhlIHBhcmFtZXRlciBmb3IgXFxganNvblxcYCBtdXN0IGhhdmUgYXQgbGVhc3Qgb25lIGtleS92YWx1ZSBwYWlyLmAsXHJcbiAgICBJTlZBTElEX1BBUkFNX0tFWTogKHBhcmFtKSA9PlxyXG4gICAgICAgIGBJbnZhbGlkIHBhcmFtZXRlciBmb3IgXFxga2V5XFxgIHByb3ZpZGVkLiBFeHBlY3RlZCBhIHN0cmluZywgYnV0IGdvdCAke3R5cGVvZiBwYXJhbX0uYCxcclxuICAgIE5PX0xBTkdVQUdFX1JFR0lTVEVSRUQ6IChsYW5ndWFnZSkgPT5cclxuICAgICAgICBgTm8gdHJhbnNsYXRpb24gZm9yIGxhbmd1YWdlIFwiJHtsYW5ndWFnZX1cIiBoYXMgYmVlbiBhZGRlZCwgeWV0LiBNYWtlIHN1cmUgdG8gcmVnaXN0ZXIgdGhhdCBsYW5ndWFnZSB1c2luZyB0aGUgXFxgLmFkZCgpXFxgIG1ldGhvZCBmaXJzdC5gLFxyXG4gICAgVFJBTlNMQVRJT05fTk9UX0ZPVU5EOiAoa2V5LCBsYW5ndWFnZSkgPT5cclxuICAgICAgICBgTm8gdHJhbnNsYXRpb24gZm91bmQgZm9yIGtleSBcIiR7a2V5fVwiIGluIGxhbmd1YWdlIFwiJHtsYW5ndWFnZX1cIi4gSXMgdGhlcmUgYSBrZXkvdmFsdWUgaW4geW91ciB0cmFuc2xhdGlvbiBmaWxlP2AsXHJcbiAgICBJTlZBTElEX1BBUkFNRVRFUl9TT1VSQ0VTOiAocGFyYW0pID0+XHJcbiAgICAgICAgYEludmFsaWQgcGFyYW1ldGVyIGZvciBcXGBzb3VyY2VzXFxgIHByb3ZpZGVkLiBFeHBlY3RlZCBlaXRoZXIgYSBzdHJpbmcgb3IgYW4gYXJyYXksIGJ1dCBnb3QgJHt0eXBlb2YgcGFyYW19LmAsXHJcbiAgICBGRVRDSF9FUlJPUjogKHJlc3BvbnNlKSA9PlxyXG4gICAgICAgIGBDb3VsZCBub3QgZmV0Y2ggXCIke3Jlc3BvbnNlLnVybH1cIjogJHtyZXNwb25zZS5zdGF0dXN9ICgke3Jlc3BvbnNlLnN0YXR1c1RleHR9KWAsXHJcbiAgICBJTlZBTElEX0VOVklST05NRU5UOiAoKSA9PlxyXG4gICAgICAgIGBZb3UgYXJlIHRyeWluZyB0byBleGVjdXRlIHRoZSBtZXRob2QgXFxgdHJhbnNsYXRlUGFnZVRvKClcXGAsIHdoaWNoIGlzIG9ubHkgYXZhaWxhYmxlIGluIHRoZSBicm93c2VyLiBZb3VyIGVudmlyb25tZW50IGlzIG1vc3QgbGlrZWx5IE5vZGUuanNgLFxyXG4gICAgTU9EVUxFX05PVF9GT1VORDogKG1lc3NhZ2UpID0+IG1lc3NhZ2UsXHJcbiAgICBNSVNNQVRDSElOR19BVFRSSUJVVEVTOiAoa2V5cywgYXR0cmlidXRlcywgZWxlbWVudCkgPT5cclxuICAgICAgICBgVGhlIGF0dHJpYnV0ZXMgXCJkYXRhLWkxOG5cIiBhbmQgXCJkYXRhLWkxOG4tYXR0clwiIG11c3QgY29udGFpbiB0aGUgc2FtZSBudW1iZXIgb2Yga2V5cy5cclxuXHJcblZhbHVlcyBpbiBcXGBkYXRhLWkxOG5cXGA6ICAgICAgKCR7a2V5cy5sZW5ndGh9KSBcXGAke2tleXMuam9pbignICcpfVxcYFxyXG5WYWx1ZXMgaW4gXFxgZGF0YS1pMThuLWF0dHJcXGA6ICgke2F0dHJpYnV0ZXMubGVuZ3RofSkgXFxgJHthdHRyaWJ1dGVzLmpvaW4oJyAnKX1cXGBcclxuXHJcblRoZSBIVE1MIGVsZW1lbnQgaXM6XHJcbiR7ZWxlbWVudC5vdXRlckhUTUx9YCxcclxuICAgIElOVkFMSURfT1BUSU9OUzogKHBhcmFtKSA9PlxyXG4gICAgICAgIGBJbnZhbGlkIGNvbmZpZyBwYXNzZWQgdG8gdGhlIFxcYFRyYW5zbGF0b3JcXGAgY29uc3RydWN0b3IuIEV4cGVjdGVkIGFuIG9iamVjdCwgYnV0IGdvdCAke3R5cGVvZiBwYXJhbX0uIFVzaW5nIGRlZmF1bHQgY29uZmlnIGluc3RlYWQuYCxcclxufTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGlzRW5hYmxlZFxyXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBsb2dnZXIoaXNFbmFibGVkKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gbG9nKGNvZGUsIC4uLmFyZ3MpIHtcclxuICAgICAgICBpZiAoaXNFbmFibGVkKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gQ09OU09MRV9NRVNTQUdFU1tjb2RlXTtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IobWVzc2FnZSA/IG1lc3NhZ2UoLi4uYXJncykgOiAnVW5oYW5kbGVkIEVycm9yJyk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lID0gZXguc3RhY2suc3BsaXQoL1xcbi9nKVsxXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IFttZXRob2QsIGZpbGVwYXRoXSA9IGxpbmUuc3BsaXQoL0AvKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGAke2V4Lm1lc3NhZ2V9XHJcblxyXG5UaGlzIGVycm9yIGhhcHBlbmVkIGluIHRoZSBtZXRob2QgXFxgJHttZXRob2R9XFxgIGZyb206IFxcYCR7ZmlsZXBhdGh9XFxgLlxyXG5cclxuSWYgeW91IGRvbid0IHdhbnQgdG8gc2VlIHRoZXNlIGVycm9yIG1lc3NhZ2VzLCB0dXJuIG9mZiBkZWJ1Z2dpbmcgYnkgcGFzc2luZyBcXGB7IGRlYnVnOiBmYWxzZSB9XFxgIHRvIHRoZSBjb25zdHJ1Y3Rvci5cclxuXHJcbkVycm9yIGNvZGU6ICR7Y29kZX1cclxuXHJcbkNoZWNrIG91dCB0aGUgZG9jdW1lbnRhdGlvbiBmb3IgbW9yZSBkZXRhaWxzIGFib3V0IHRoZSBBUEk6XHJcbmh0dHBzOi8vZ2l0aHViLmNvbS9hbmRyZWFzcmVtZHQvc2ltcGxlLXRyYW5zbGF0b3IjdXNhZ2VcclxuICAgICAgICBgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0iLCIvL2ltcG9ydCAqIGFzIEdyYWJUb1BhbiBmcm9tICcuL2dyYWItdG8tcGFuLmpzJztcclxuXHJcbmNvbnN0IGlzTm90SUVvcklzSUUxMHBsdXMgPSAhZG9jdW1lbnQuZG9jdW1lbnRNb2RlIHx8IGRvY3VtZW50LmRvY3VtZW50TW9kZSA+IDk7XHJcbmNvbnN0IGNocm9tZTIgPSB3aW5kb3cuY2hyb21lO1xyXG5jb25zdCBpc0Nocm9tZTE1T3JPcGVyYTE1cGx1cyA9IGNocm9tZTIgJiYgKGNocm9tZTIud2Vic3RvcmUgfHwgY2hyb21lMi5hcHApO1xyXG5jb25zdCBpc1NhZmFyaTZwbHVzID0gL0FwcGxlLy50ZXN0KG5hdmlnYXRvci52ZW5kb3IpICYmIC9WZXJzaW9uXFwvKFs2LTldXFxkKnxbMS01XVxcZCspLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG5cclxuZnVuY3Rpb24gaXNMZWZ0TW91c2VSZWxlYXNlZChldmVudCkge1xyXG4gICAgICAgIGlmIChcImJ1dHRvbnNcIiBpbiBldmVudCAmJiBpc05vdElFb3JJc0lFMTBwbHVzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gIShldmVudC5idXR0b25zICYgMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoaXNDaHJvbWUxNU9yT3BlcmExNXBsdXMgfHwgaXNTYWZhcmk2cGx1cykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGV2ZW50LndoaWNoID09PSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbiAgICAgICAgICAgICAgICBcclxubGV0IG1hdGNoZXNTZWxlY3RvcjtcclxuW1wid2Via2l0TVwiLCBcIm1vek1cIiwgXCJtc01cIiwgXCJvTVwiLCBcIm1cIl0uc29tZShmdW5jdGlvbiAocHJlZml4KSB7XHJcbiAgICAgICAgbGV0IG5hbWUgPSBwcmVmaXggKyBcImF0Y2hlc1wiO1xyXG5cclxuICAgICAgICBpZiAobmFtZSBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIG1hdGNoZXNTZWxlY3RvciA9IG5hbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBuYW1lICs9IFwiU2VsZWN0b3JcIjtcclxuXHJcbiAgICAgICAgaWYgKG5hbWUgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBtYXRjaGVzU2VsZWN0b3IgPSBuYW1lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG1hdGNoZXNTZWxlY3RvcjtcclxufSk7XHJcblxyXG5jb25zdCBDdXJzb3JUb29sID0ge1xyXG4gICAgICAgIFNFTEVDVDogMCxcclxuICAgICAgICBIQU5EOiAxLFxyXG4gICAgICAgIFpPT006IDJcclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBQREZDdXJzb3JUb29scyB7XHJcbiAgICAgICAgY29uc3RydWN0b3Ioe1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLFxyXG4gICAgICAgICAgICAgICAgZXZlbnRCdXMsXHJcbiAgICAgICAgICAgICAgICBjdXJzb3JUb29sT25Mb2FkID0gMVxyXG4gICAgICAgIH0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudEJ1cyA9IGV2ZW50QnVzO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVCZWZvcmVQcmVzZW50YXRpb25Nb2RlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZFRvb2wgPSBuZXcgR3JhYlRvUGFuKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogdGhpcy5jb250YWluZXJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3dpdGNoVG9vbChjdXJzb3JUb29sT25Mb2FkKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZ2V0IGFjdGl2ZVRvb2woKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzd2l0Y2hUb29sKHRvb2wpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZUJlZm9yZVByZXNlbnRhdGlvbk1vZGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0b29sID09PSB0aGlzLmFjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlzYWJsZUFjdGl2ZVRvb2wgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy5hY3RpdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEN1cnNvclRvb2wuU0VMRUNUOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ3Vyc29yVG9vbC5IQU5EOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kVG9vbC5kZWFjdGl2YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDdXJzb3JUb29sLlpPT006XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRvb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDdXJzb3JUb29sLlNFTEVDVDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlQWN0aXZlVG9vbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDdXJzb3JUb29sLkhBTkQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZUFjdGl2ZVRvb2woKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRUb29sLmFjdGl2YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEN1cnNvclRvb2wuWk9PTTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBzd2l0Y2hUb29sOiBcIiR7dG9vbH1cIiBpcyBhbiB1bnN1cHBvcnRlZCB2YWx1ZS5gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSB0b29sO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2Rpc3BhdGNoRXZlbnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF9kaXNwYXRjaEV2ZW50KCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudEJ1cy5kaXNwYXRjaChcImN1cnNvcnRvb2xjaGFuZ2VkXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sOiB0aGlzLmFjdGl2ZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50QnVzLl9vbihcInN3aXRjaGN1cnNvcnRvb2xcIiwgZXZ0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hUb29sKGV2dC50b29sKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRCdXMuX29uKFwicHJlc2VudGF0aW9ubW9kZWNoYW5nZWRcIiwgZXZ0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2dC5zd2l0Y2hJblByb2dyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcHJldmlvdXNseUFjdGl2ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldnQuYWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNseUFjdGl2ZSA9IHRoaXMuYWN0aXZlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3dpdGNoVG9vbChDdXJzb3JUb29sLlNFTEVDVCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVCZWZvcmVQcmVzZW50YXRpb25Nb2RlID0gcHJldmlvdXNseUFjdGl2ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c2x5QWN0aXZlID0gdGhpcy5hY3RpdmVCZWZvcmVQcmVzZW50YXRpb25Nb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlQmVmb3JlUHJlc2VudGF0aW9uTW9kZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hUb29sKHByZXZpb3VzbHlBY3RpdmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG59IiwiXHJcbi8qKlxyXG4gKiBAbW9kdWxlIFRlbXBsYXRlL0RhdGFcclxuICovXHJcblxyXG5pbXBvcnQge1V0aWxzfSBmcm9tICcuLy4uL3V0aWxzL3V0aWxzLmpzJztcclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICog66y47ISc7J2YIOydtOumhOqzvCDshJzrqoXsnpDsnZgg7KCV67O066W8IOuLtOqzoCDsnojripQgQ2xhc3MgPGJyLz5cclxuICogSlNPTuuNsOydtO2EsOulvCDstpTstpztlZjquLAg7JyE7ZW0IOunjOuTpOyWtOynhCBEYXRhIENsYXNzXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBmb3JtVGVtcGxhdGVOYW1lIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZURhdGEjZm9ybVRlbXBsYXRlTmFtZX1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IGZvcm1UZW1wbGF0ZVVVSUQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9EYXRhLlRlbXBsYXRlRGF0YSNmb3JtVGVtcGxhdGVVVUlEfVxyXG4gKiBAcHJvcGVydHkge0FycmF5fSBmb3JtZXJMaXN0IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZURhdGEjZm9ybWVyTGlzdH1cclxuICpcclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gcHVzaE93bmVyIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZURhdGEjcHVzaE93bmVyfVxyXG4gKiBcclxuICogQGV4YW1wbGVcclxuICogIOyVhOuemOyZgCDqsJnsnbQgSlNPTuuNsOydtO2EsOulvCDrp4zrk6Qg65WMIOyCrOyaqeuQnOuLpC5cclxuICogIHtcclxuICAgICAgICBcImZvcm1UZW1wbGF0ZU5hbWVcIjogXCJGb3JtIFRlbXBsYXRlIOusuOyEnCDsnbTrpoRcIixcclxuICAgICAgICBcImZvcm1UZW1wbGF0ZVVVSURcIjogXCJGb3JtIFRlbXBsYXRlIOusuOyEnCBVVUlEXCIsXHJcbiAgICAgICAgXCJmb3JtZXJMaXN0XCI6IFsgIC0tIFRlbXBsYXRlRGF0YU93bmVyIERhdGEgQ2xhc3NcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJwYWdlc1wiOiBbICAtLSBUZW1wbGF0ZURhdGFQYWdlIERhdGEgQ2xhc3NcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwicGFnZU5vXCI6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZmllbGRzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF1cclxuICAgIH1cclxuICpcclxuICogQEZpbGVOYW1lIFRlbXBsYXRlRGF0YS5qc1xyXG4gKiBAc2luY2UgMjAyMS4wNS4zMVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRlbXBsYXRlRGF0YSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFRlbXBsYXRlIOusuOyEnCDsnbTrpoQuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCB1dWlkKSB7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0RhdGEuVGVtcGxhdGVEYXRhI2Zvcm1UZW1wbGF0ZU5hbWVcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gIFRlbXBsYXRlIOusuOyEnCDsnbTrpoQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5mb3JtVGVtcGxhdGVOYW1lID0gbmFtZTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZURhdGEjZm9ybVRlbXBsYXRlVVVJRFxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiAgVGVtcGxhdGUg66y47IScIFVVSUQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5mb3JtVGVtcGxhdGVVVUlEID0gdXVpZDtcclxuICAgICAgICBpZiAodXVpZCA9PT0gdW5kZWZpbmVkIHx8IHV1aWQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5mb3JtVGVtcGxhdGVVVUlEID0gVXRpbHMuZ2VuZXJhdGVfdXVpZHY0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7QXJyYXl9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0RhdGEuVGVtcGxhdGVEYXRhI2Zvcm1lckxpc3RcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gIFRlbXBsYXRlRGF0YU93bmVyIEFycmF5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5mb3JtZXJMaXN0ID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gcHVzaE93bmVyXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZURhdGEjcHVzaE93bmVyXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gVGVtcGxhdGVEYXRhT3duZXLrpbwg7LaU6rCA7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvd25lckRhdGEg7LaU6rCA7ZWgIOyEnOuqheyekCDrjbDsnbTthLAgVGVtcGxhdGVEYXRhT3duZXJcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICovXHJcbiAgICBwdXNoT3duZXIob3duZXJEYXRhKSB7XHJcbiAgICAgICAgdGhpcy5mb3JtZXJMaXN0LnB1c2gob3duZXJEYXRhKTtcclxuICAgIH1cclxufSIsIlxyXG4vKipcclxuICogQG1vZHVsZSBUZW1wbGF0ZS9EYXRhXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiDtjpjsnbTsp4Ag7KCV67O066W8IOuLtOqzoCDsnojripQg7ISc66qF7J6QIOygleuztCBDbGFzczxici8+XHJcbiAqIEpTT07rjbDsnbTthLDrpbwg7LaU7Lac7ZWY6riwIOychO2VtCDrp4zrk6TslrTsp4QgRGF0YSBDbGFzc1xyXG4gKiBcclxuICpcclxuICogQHByb3BlcnR5IHtBcnJheX0gcGFnZXMge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9EYXRhLlRlbXBsYXRlRGF0YU93bmVyI3BhZ2VzfVxyXG4gKlxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBwdXNoUGFnZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0RhdGEuVGVtcGxhdGVEYXRhT3duZXIjcHVzaFBhZ2V9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNsb25lVGVtcGxhdGVEYXRhT3duZXJPYmplY3Qge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9EYXRhLlRlbXBsYXRlRGF0YU93bmVyI2Nsb25lVGVtcGxhdGVEYXRhT3duZXJPYmplY3R9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNsb25lT2JqZWN0IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZURhdGFPd25lciNjbG9uZU9iamVjdH1cclxuICogXHJcbiAqIEBzZWUgbW9kdWxlOlRlbXBsYXRlL0RhdGEuVGVtcGxhdGVEYXRhXHJcbiAqIEBGaWxlTmFtZSBUZW1wbGF0ZURhdGFPd25lci5qc1xyXG4gKiBAc2luY2UgMjAyMS4wNS4zMVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRlbXBsYXRlRGF0YU93bmVyIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge0FycmF5fVxyXG4gICAgICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9EYXRhLlRlbXBsYXRlRGF0YU93bmVyI3BhZ2VzXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uICBUZW1wbGF0ZURhdGFQYWdlIO2BtOuemOyKpCDrsLDsl7RcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnBhZ2VzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gcHVzaFBhZ2VcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9EYXRhLlRlbXBsYXRlRGF0YU93bmVyI3B1c2hQYWdlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gVGVtcGxhdGVEYXRhUGFnZSBPYmplY3Trpbwg7LaU6rCA7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlICBUZW1wbGF0ZURhdGFQYWdlIE9iamVjdFxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgKi9cclxuICAgIHB1c2hQYWdlKHBhZ2UpIHtcclxuICAgICAgICB0aGlzLnBhZ2VzLnB1c2gocGFnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gY2xvbmVUZW1wbGF0ZURhdGFPd25lck9iamVjdFxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0RhdGEuVGVtcGxhdGVEYXRhT3duZXIjY2xvbmVUZW1wbGF0ZURhdGFPd25lck9iamVjdFxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRlRGF0YU93bmVyIOyYpOu4jOygne2KuOulvCDrs7XsgqztlZzri6QuXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogIOuzteyCrO2VoCBPYmplY3RcclxuICAgICAqIEByZXR1cm4ge09iamVjdH0gVGVtcGxhdGVEYXRhT3duZXIgT2JqZWN0XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAqL1xyXG4gICAgc3RhdGljIGNsb25lVGVtcGxhdGVEYXRhT3duZXJPYmplY3Qob2JqKSB7XHJcbiAgICAgICAgdmFyIGNsb25lID0gbmV3IFRlbXBsYXRlRGF0YU93bmVyKCk7XHJcbiAgICAgICAgZm9yICh2YXIga2V5IGluIG9iaikge1xyXG4gICAgICAgICAgICBpZiAoa2V5ID09PSBcInBhZ2VzXCIgfHwga2V5ID09PSBcImZpZWxkc1wiKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9ialtrZXldID09IFwib2JqZWN0XCIgJiYgb2JqW2tleV0gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY2xvbmVba2V5XSA9IFRlbXBsYXRlRGF0YU93bmVyLmNsb25lT2JqZWN0KG9ialtrZXldKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNsb25lW2tleV0gPSBvYmpba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGNsb25lO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGNsb25lT2JqZWN0XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZURhdGFPd25lciNjbG9uZU9iamVjdFxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIOyYpOu4jOygne2KuOulvCDrs7XsgqztlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiAg67O17IKs7ZWgIE9iamVjdFxyXG4gICAgICogQHJldHVybiB7T2JqZWN0fVxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgKi9cclxuICAgIHN0YXRpYyBjbG9uZU9iamVjdChvYmopIHtcclxuICAgICAgICB2YXIgY2xvbmUgPSB7fTtcclxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgIGlmIChrZXkgPT09IFwicGFnZXNcIiB8fCBrZXkgPT09IFwiZmllbGRzXCIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqW2tleV0gPT0gXCJvYmplY3RcIiAmJiBvYmpba2V5XSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjbG9uZVtrZXldID0gVGVtcGxhdGVEYXRhT3duZXIuY2xvbmVPYmplY3Qob2JqW2tleV0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2xvbmVba2V5XSA9IG9ialtrZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY2xvbmU7XHJcbiAgICB9XHJcblxyXG59XHJcbiIsIlxyXG4vKipcclxuICogQG1vZHVsZSBUZW1wbGF0ZS9EYXRhXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiAg7ZWE65OcIOumrOyKpO2KuCDsoJXrs7Trpbwg64u06rOgIOyeiOuKlCDtjpjsnbTsp4Ag7KCV67O0IENsYXNzPGJyLz5cclxuICogSlNPTuuNsOydtO2EsOulvCDstpTstpztlZjquLAg7JyE7ZW0IOunjOuTpOyWtOynhCBEYXRhIENsYXNzXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBwYWdlTm8ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9EYXRhLlRlbXBsYXRlRGF0YVBhZ2UjcGFnZU5vfVxyXG4gKiBAcHJvcGVydHkge0FycmF5fSBmaWVsZHMge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9EYXRhLlRlbXBsYXRlRGF0YVBhZ2UjZmllbGRzfVxyXG4gKlxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBwdXNoRmllbGQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9EYXRhLlRlbXBsYXRlRGF0YVBhZ2UjcHVzaEZpZWxkfVxyXG4gKlxyXG4gKiBAc2VlIG1vZHVsZTpUZW1wbGF0ZS9EYXRhLlRlbXBsYXRlRGF0YVxyXG4gKiBARmlsZU5hbWUgVGVtcGxhdGVEYXRhUGFnZS5qc1xyXG4gKiBAc2luY2UgMjAyMS4wNS4zMVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRlbXBsYXRlRGF0YVBhZ2Uge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHBhZ2VObyDtjpjsnbTsp4Ag67KI7Zi4XHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHBhZ2VObykge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOiBUZW1wbGF0ZS9EYXRhLlRlbXBsYXRlRGF0YVBhZ2UjcGFnZU5vXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uICDtjpjsnbTsp4Ag67KI7Zi4XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5wYWdlTm8gPSBwYWdlTm87XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtBcnJheX1cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZURhdGFQYWdlI2ZpZWxkc1xyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiAgRmllbGQg66as7Iqk7Yq4LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuZmllbGRzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gcHVzaEZpZWxkXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZURhdGFPd25lciNwdXNoRmllbGRcclxuICAgICAqIEBkZXNjcmlwdGlvbiBGaWVsZCBPYmplY3Trpbwg7LaU6rCA7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBmaWVsZCAgRmllbGQgT2JqZWN0XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAqL1xyXG4gICAgcHVzaEZpZWxkKGZpZWxkKSB7XHJcbiAgICAgICAgdGhpcy5maWVsZHMucHVzaChmaWVsZCk7XHJcbiAgICB9XHJcbn0iLCJcclxuLyoqXHJcbiAqIEBtb2R1bGUgVGVtcGxhdGUvRGF0YVxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24g7ISc66qF7J6QIOygleuztCBDbGFzc1xyXG4gKiBcclxuICpcclxuICogQHByb3BlcnR5IHtBcnJheX0gZmllbGRzIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZVVzZXJGaWVsZEluZm8jZmllbGRzfVxyXG4gKlxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBwdXNoRmllbGQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9EYXRhLlRlbXBsYXRlVXNlckZpZWxkSW5mbyNwdXNoRmllbGR9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGZpZWxkIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZVVzZXJGaWVsZEluZm8jZmllbGR9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHJlbW92ZUZpZWxkIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZVVzZXJGaWVsZEluZm8jcmVtb3ZlRmllbGR9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNvbnRhaW5zIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZVVzZXJGaWVsZEluZm8jY29udGFpbnN9XHJcbiAqIFxyXG4gKiBAY2xhc3NcclxuICogQEZpbGVOYW1lIFRlbXBsYXRlVXNlckZpZWxkSW5mby5qc1xyXG4gKiBAc2luY2UgMjAyMS4wNS4zMVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRlbXBsYXRlVXNlckZpZWxkSW5mbyB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtBcnJheX1cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6IFRlbXBsYXRlL0RhdGEuVGVtcGxhdGVVc2VyRmllbGRJbmZvI2ZpZWxkc1xyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiAgRmllbGQg66as7Iqk7Yq4LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuZmllbGRzID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gcHVzaEZpZWxkXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZVVzZXJGaWVsZEluZm8jcHVzaEZpZWxkXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gRmllbGQgT2JqZWN066W8IOy2lOqwgO2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZmllbGQgIEZpZWxkIE9iamVjdFxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgKi9cclxuICAgIHB1c2hGaWVsZChmaWVsZElkLCBmaWVsZCkge1xyXG4gICAgICAgIHRoaXMuZmllbGRzW2ZpZWxkSWRdID0gZmllbGQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gZmllbGRcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9EYXRhLlRlbXBsYXRlVXNlckZpZWxkSW5mbyNmaWVsZFxyXG4gICAgICogQGRlc2NyaXB0aW9uIElE7JeQIO2VtOuLue2VmOuKlCBGaWVsZCBPYmplY3Trpbwg66as7YS07ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZElkICBGaWVsZCBJRFxyXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBGaWVsZCBPYmplY3RcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICovXHJcbiAgICBmaWVsZChmaWVsZElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmllbGRzW2ZpZWxkSWRdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIHJlbW92ZUZpZWxkXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZVVzZXJGaWVsZEluZm8jcmVtb3ZlRmllbGRcclxuICAgICAqIEBkZXNjcmlwdGlvbiBJROyXkCDtlbTri7ntlZjripQgRmllbGQgT2JqZWN066W8IOyCreygnO2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRJZCAgRmllbGQgSURcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICovXHJcbiAgICByZW1vdmVGaWVsZChmaWVsZElkKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29udGFpbnMoZmllbGRJZCkpIHtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuZmllbGRzW2ZpZWxkSWRdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiBjb250YWluc1xyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0RhdGEuVGVtcGxhdGVVc2VyRmllbGRJbmZvI2NvbnRhaW5zXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gSUTsl5Ag7ZW064u57ZWY64qUIEZpZWxkIE9iamVjdOqwgCDsobTsnqztlZjripTsp4Ag7Jes67aA66W8IOumrO2EtO2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRJZCAgRmllbGQgSURcclxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59fSDsobTsnqztlZjrqbQgVHJ1ZSDslYTri4jrqbQgZmFsc2VcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICovXHJcbiAgICBjb250YWlucyhmaWVsZElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmllbGRzLmhhc093blByb3BlcnR5KGZpZWxkSWQpO1xyXG4gICAgfVxyXG59IiwiXHJcbi8qKlxyXG4gKiBAbW9kdWxlIFRlbXBsYXRlL1RlbXBsYXRlTW9kXHJcbiAqL1xyXG5cclxuaW1wb3J0IGFuaW1lIGZyb20gJ2FuaW1lanMvbGliL2FuaW1lLmVzLmpzJztcclxuXHJcbmltcG9ydCB7VXRpbHN9IGZyb20gJy4vLi4vdXRpbHMvdXRpbHMuanMnO1xyXG5pbXBvcnQge0NPTlNUQU5UU30gZnJvbSAnLi8uLi9Db25zdGFudHMuanMnO1xyXG5pbXBvcnQge0Jhc2VGaWVsZH0gZnJvbSAnLi8uLi9GaWVsZHMvQmFzZUZpZWxkJztcclxuaW1wb3J0IHtUZXh0RmllbGR9IGZyb20gJy4vLi4vRmllbGRzL1RleHRGaWVsZCc7XHJcbmltcG9ydCB7TnVtYmVyRmllbGR9IGZyb20gJy4vLi4vRmllbGRzL051bWJlckZpZWxkJztcclxuaW1wb3J0IHtEYXRlRmllbGR9IGZyb20gJy4vLi4vRmllbGRzL0RhdGVGaWVsZCc7XHJcbmltcG9ydCB7U2lnbkZpZWxkfSBmcm9tICcuLy4uL0ZpZWxkcy9TaWduRmllbGQnO1xyXG5pbXBvcnQge1RleHRCYXNlRmllbGR9IGZyb20gJy4vLi4vRmllbGRzL1RleHRCYXNlRmllbGQuanMnO1xyXG5pbXBvcnQge0ltYWdlRmllbGR9IGZyb20gXCIuLi9GaWVsZHMvSW1hZ2VGaWVsZC5qc1wiO1xyXG5pbXBvcnQge011bHRpTGluZVRleHRGaWVsZH0gZnJvbSBcIi4uL0ZpZWxkcy9NdWx0aUxpbmVUZXh0RmllbGQuanNcIjtcclxuaW1wb3J0IHtDaGVja2JveEZpZWxkfSBmcm9tIFwiLi4vRmllbGRzL0NoZWNrYm94RmllbGQuanNcIjtcclxuaW1wb3J0IHtSYWRpb0ZpZWxkfSBmcm9tIFwiLi4vRmllbGRzL1JhZGlvRmllbGQuanNcIjtcclxuaW1wb3J0IHtMYWJlbEZpZWxkfSBmcm9tIFwiLi4vRmllbGRzL0xhYmVsRmllbGQuanNcIjtcclxuaW1wb3J0IHtDb21ib2JveEZpZWxkfSBmcm9tIFwiLi4vRmllbGRzL0NvbWJvYm94RmllbGQuanNcIjtcclxuXHJcbmltcG9ydCB7VGVtcGxhdGVEYXRhfSBmcm9tICcuL3RlbXBsYXRlRGF0YS5qcyc7XHJcbmltcG9ydCB7VGVtcGxhdGVEYXRhT3duZXJ9IGZyb20gJy4vdGVtcGxhdGVEYXRhT3duZXIuanMnO1xyXG5pbXBvcnQge1RlbXBsYXRlRGF0YVBhZ2V9IGZyb20gJy4vdGVtcGxhdGVEYXRhUGFnZS5qcyc7XHJcbmltcG9ydCB7VGVtcGxhdGVVc2VyRmllbGRJbmZvfSBmcm9tICcuL3RlbXBsYXRlVXNlckZpZWxkSW5mby5qcyc7XHJcblxyXG5cclxuXHJcbnZhciBfdGVtcGxhdGVNb2Q7XHJcblxyXG4vKipcclxuICogQGRlc2NyaXB0aW9uIO2VhOuTnCDqtIDroKgg7LKY66as66W8IO2VmOuKlCBDbGFzc1xyXG4gKiBcclxuICogQHByb3BlcnR5IHtCb29sZWFufSBkcmFnU3RhcnQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNkcmFnU3RhcnR9XHJcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBkcmFnQm94IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZHJhZ0JveH1cclxuICogQHByb3BlcnR5IHtPYmplY3R9IG1haW5DYW52YXMge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNtYWluQ2FudmFzfVxyXG4gKiBAcHJvcGVydHkge1JlY3R9IHBhZ2VCb3VuZGluZ0JveCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3BhZ2VCb3VuZGluZ0JveH1cclxuICogQHByb3BlcnR5IHtPYmplY3R9IHRlbXBsYXRlUmVjdE1vdXNlUG9zaXRpb24ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCN0ZW1wbGF0ZVJlY3RNb3VzZVBvc2l0aW9ufVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gc2VsZWN0QWRkRmllbGRUeXBlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2Qjc2VsZWN0QWRkRmllbGRUeXBlfVxyXG4gKiBAcHJvcGVydHkge09iamVjdH0gZmllbGREaWN0aW9uYXJ5IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZmllbGREaWN0aW9uYXJ5fVxyXG4gKiBAcHJvcGVydHkge051bWJlcn0gdW5yZWRvQWN0aW9uSWR4IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjdW5yZWRvQWN0aW9uSWR4fVxyXG4gKiBAcHJvcGVydHkge09iamVjdH0gdW5yZWRvQWN0aW9uRGljdCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3VucmVkb0FjdGlvbkRpY3R9XHJcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBwZGZWaWV3ZXIge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNwZGZWaWV3ZXJ9XHJcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSB0ZW1wbGF0ZVVzZXJGaWVsZEluZm8ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCN0ZW1wbGF0ZVVzZXJGaWVsZEluZm99XHJcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBvd25lck5vZGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNvd25lck5vZGV9XHJcbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gaXNGaWVsZERyYWdTdGFydCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2lzRmllbGREcmFnU3RhcnR9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBtZW51Q29kZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI21lbnVDb2RlfVxyXG4gKlxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBhZGRVbmRvUmVkb0FjdCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2FkZFVuZG9SZWRvQWN0fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBidWlsZERWT3B0c0luZm8ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNidWlsZERWT3B0c0luZm99XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGJ1aWxkRmllbGRmb3JtZXJMaXN0IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjYnVpbGRGaWVsZGZvcm1lckxpc3R9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGJ1aWxkRmllbGRVc2VySW5mbyB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2J1aWxkRmllbGRVc2VySW5mb31cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gY2FsY0ZpZWxkUG9zdGlvbiB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2NhbGNGaWVsZFBvc3Rpb259XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNhbGNUZW1wbGF0ZUJvdW5kYXJ5IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjY2FsY1RlbXBsYXRlQm91bmRhcnl9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNoYW5nZUZpZWxkUG9zaXRpb24ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNjaGFuZ2VGaWVsZFBvc2l0aW9ufVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBjaGFuZ2VGaWVsZFZhbHVlRXZlbnQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNjaGFuZ2VGaWVsZFZhbHVlRXZlbnR9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNoYW5nZUZyZWVUcmFuc2Zvcm0ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNjaGFuZ2VGcmVlVHJhbnNmb3JtfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBjaGFuZ2VHcm91cEJveEZyZWVUcmFuc2Zvcm0ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNjaGFuZ2VHcm91cEJveEZyZWVUcmFuc2Zvcm19XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNoZWNrVGVtcGxhdGVGaWVsZERhdGEge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNjaGVja1RlbXBsYXRlRmllbGREYXRhfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBjbGVhclNlbGVjdGVkVG9vbCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2NsZWFyU2VsZWN0ZWRUb29sfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBjb252ZXJ0VXNlckxpc3RUb1NlbGVjdE9wdGlvbnMge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNjb252ZXJ0VXNlckxpc3RUb1NlbGVjdE9wdGlvbnN9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNyZWF0ZURyYWdPdmVyR3JvdXAge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNjcmVhdGVEcmFnT3Zlckdyb3VwfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBjcmVhdGVGaWVsZCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2NyZWF0ZUZpZWxkfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBjcmVhdGVGaWVsZE9iamVjdCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2NyZWF0ZUZpZWxkT2JqZWN0fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBjcmVhdGVUZW1wbGF0ZVJlY3Qge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNjcmVhdGVUZW1wbGF0ZVJlY3R9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGRyYWdlbmRGdW5jIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZHJhZ2VuZEZ1bmN9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGRyYWdtb3ZlRnVuYyB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2RyYWdtb3ZlRnVuY31cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZHJhZ3N0YXJ0RnVuYyB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2RyYWdzdGFydEZ1bmN9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGV4cG9ydEZpZWxkRGF0YSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2V4cG9ydEZpZWxkRGF0YX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZmllbGREZWxldGVCdG5DbGlja2VkIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZmllbGREZWxldGVCdG5DbGlja2VkfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBmaWVsZEZ0RXZlbnQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNmaWVsZEZ0RXZlbnR9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGZpZWxkUmVwb3NpdGlvbmluZyB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2ZpZWxkUmVwb3NpdGlvbmluZ31cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZ2VuZXJhdGVGaWVsZElkIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZ2VuZXJhdGVGaWVsZElkfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBnZXRDcmVhdGVGaWVsZERlZmF1bHRXaWR0aCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2dldENyZWF0ZUZpZWxkRGVmYXVsdFdpZHRofVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBnZXREdlRleHRWYWx1ZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2dldER2VGV4dFZhbHVlfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBnZXRGaWVsZEZyb21Kc29uIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZ2V0RmllbGRGcm9tSnNvbn1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZ2V0RmllbGRJZEZyb21Hcm91cE5vZGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNnZXRGaWVsZElkRnJvbUdyb3VwTm9kZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZ2V0RmllbGRKc29uRGF0YSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2dldEZpZWxkSnNvbkRhdGF9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGdldEZpZWxkU2l6ZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2dldEZpZWxkU2l6ZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZ2V0UGFnZUJvcmRlcldpZHRoIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZ2V0UGFnZUJvcmRlcldpZHRofVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBnZXRQYWdlQm91bmRpbmdDbGllbnRSZWN0IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZ2V0UGFnZUJvdW5kaW5nQ2xpZW50UmVjdH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZ2V0UGFnZUVsZW1lbnQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNnZXRQYWdlRWxlbWVudH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZ2V0UGRmUGFnZUZyb21TdmdQb3Mge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNnZXRQZGZQYWdlRnJvbVN2Z1Bvc31cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gaGlkZUFsbFJlc2l6ZUhhbmRsZXMge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNoaWRlQWxsUmVzaXplSGFuZGxlc31cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gaGlkZUZpZWxkQXR0cmlidXRlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjaGlkZUZpZWxkQXR0cmlidXRlfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBoaWRlVGVtcGxhdGVMYXllciB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2hpZGVUZW1wbGF0ZUxheWVyfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBpbXBvcnRGaWVsZERhdGEge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNpbXBvcnRGaWVsZERhdGF9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGtleWNoZWNrIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2Qja2V5Y2hlY2t9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHJlZG9BY3Rpb24ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNyZWRvQWN0aW9ufVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSByZWZyZXNoZm9ybWVyTGlzdCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3JlZnJlc2hmb3JtZXJMaXN0fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSByZW1vdmVEcmFnR3JvdXBGaWVsZCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3JlbW92ZURyYWdHcm91cEZpZWxkfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSByZW1vdmVEcmFnT3Zlckdyb3VwIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjcmVtb3ZlRHJhZ092ZXJHcm91cH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gcmVtb3ZlRmllbGQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNyZW1vdmVGaWVsZH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gcmVtb3ZlU2VsZWN0ZWRGaWVsZCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3JlbW92ZVNlbGVjdGVkRmllbGR9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHJlbW92ZVRlbXBsYXRlUmVjdCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3JlbW92ZVRlbXBsYXRlUmVjdH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gcmVwbGFjZUZpZWxkRGF0YSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3JlcGxhY2VGaWVsZERhdGF9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHJlcGxhY2VGaWVsZFN0cmluZ0RhdGEge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNyZXBsYWNlRmllbGRTdHJpbmdEYXRhfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSByZXNldFRvb2wge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNyZXNldFRvb2x9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNlbGVjdFRvb2wge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNzZWxlY3RUb29sfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBzZWxlY3RVc2VyTGlzdCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3NlbGVjdFVzZXJMaXN0fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBzaG93QXN0ZXJpc2tEaXYge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNzaG93QXN0ZXJpc2tEaXZ9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNob3dGaWVsZEF0dHJpYnV0ZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3Nob3dGaWVsZEF0dHJpYnV0ZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gc2hvd0ZpZWxkTGlzdEF0dHJpYnV0ZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3Nob3dGaWVsZExpc3RBdHRyaWJ1dGV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNvcnRGaWVsZHNBbGlnbiB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3NvcnRGaWVsZHNBbGlnbn1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gc29ydEZpZWxkc0JvdHRvbUFsaWduIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2Qjc29ydEZpZWxkc0JvdHRvbUFsaWdufVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBzb3J0RmllbGRzSENlbnRlckFsaWduIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2Qjc29ydEZpZWxkc0hDZW50ZXJBbGlnbn1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gc29ydEZpZWxkc0hSZWd1bGFySW50ZXJ2YWxBbGlnbiB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3NvcnRGaWVsZHNIUmVndWxhckludGVydmFsQWxpZ259XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNvcnRGaWVsZHNMZWZ0QWxpZ24ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNzb3J0RmllbGRzTGVmdEFsaWdufVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBzb3J0RmllbGRzUmlnaHRBbGlnbiB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3NvcnRGaWVsZHNSaWdodEFsaWdufVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBzb3J0RmllbGRzVG9wQWxpZ24ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNzb3J0RmllbGRzVG9wQWxpZ259XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNvcnRGaWVsZHNWQ2VudGVyQWxpZ24ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNzb3J0RmllbGRzVkNlbnRlckFsaWdufVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBzb3J0RmllbGRzVlJlZ3VsYXJJbnRlcnZhbEFsaWduIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2Qjc29ydEZpZWxkc1ZSZWd1bGFySW50ZXJ2YWxBbGlnbn1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gdGVtcGxhdGVJbml0IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjdGVtcGxhdGVJbml0fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSB0ZW1wbGF0ZU1vdXNlTW92ZUV2ZW50IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjdGVtcGxhdGVNb3VzZU1vdmVFdmVudH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gdGVtcGxhdGVNb3VzZVVwRXZlbnQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCN0ZW1wbGF0ZU1vdXNlVXBFdmVudH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gdGVtcGxhdGVSZXNpemUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCN0ZW1wbGF0ZVJlc2l6ZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gdG1wR3JvdXBGdEV2ZW50IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjdG1wR3JvdXBGdEV2ZW50fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSB1bmRvQWN0aW9uIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjdW5kb0FjdGlvbn1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gdXBkYXRlRmllbGRQb2ludCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3VwZGF0ZUZpZWxkUG9pbnR9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGFwcGVuZEZvbnRGYW1pbHkge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNhcHBlbmRGb250RmFtaWx5fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBhcHBlbmRTaWduVGFiU2hvd09wdCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2FwcGVuZFNpZ25UYWJTaG93T3B0fVxyXG4gKiBcclxuICogQEZpbGVOYW1lIFRlbXBsYXRlTW9kLmpzXHJcbiAqIEBzaW5jZSAyMDIxLjA1LjMxXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVGVtcGxhdGVNb2Qge1xyXG4gIC8qKlxyXG4gICAqIEB0eXBlIHtCb29sZWFufVxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNkcmFnU3RhcnRcclxuICAgKiBAZGVzY3JpcHRpb24gIFNWR+2ZlOuptOyXkOyEnCDrk5zrnpjqt7jqsIAg7Iuc7J6R65CY7JeI64qU7KeAIOyXrOu2gFxyXG4gICAqL1xyXG4gIGRyYWdTdGFydCA9IGZhbHNlO1xyXG5cclxuICAvKipcclxuICAgKiBAdHlwZSB7T2JqZWN0fVxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNkcmFnQm94XHJcbiAgICogQGRlc2NyaXB0aW9uICBTVkfsl5DshJwg65Oc656Y6re465CcIOqyg+ydhCDtkZztmITtlZjripQgUmVjdCBOb2RlXHJcbiAgICovXHJcbiAgZHJhZ0JveCA9IHVuZGVmaW5lZDtcclxuXHJcbiAgLyoqXHJcbiAgICogQHR5cGUge09iamVjdH1cclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjbWFpbkNhbnZhc1xyXG4gICAqIEBkZXNjcmlwdGlvbiAgU25hcCBJbnN0YW5jZVxyXG4gICAqL1xyXG4gIG1haW5DYW52YXM7XHJcblxyXG4gIC8qKlxyXG4gICAqIEB0eXBlIHtSZWN0fVxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNwYWdlQm91bmRpbmdCb3hcclxuICAgKiBAZGVzY3JpcHRpb24gIO2VhOuTnOuTpOydtCDsm4Dsp4Hsnbwg7IiYIOyeiOuKlCDqsr3qs4RcclxuICAgKi9cclxuICBwYWdlQm91bmRpbmdCb3ggPSB7IHg6IDAsIHk6IDAsIHdpZHRoOiAwLCBoZWlnaHQ6IDAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQHR5cGUge09iamVjdH1cclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjdGVtcGxhdGVSZWN0TW91c2VQb3NpdGlvblxyXG4gICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zrpbwg7IOd7ISx7ZWY7JesIOybgOyngSDsnbzrlYwg7ZiE7J6sIOuniOyasOyKpCDsnITsuZjsmYAg6riw7KG0IOuniOyasOyKpCDsnITsuZjrpbwg6rCA7KeA6rOgIOyeiOuKlCDrs4DsiJhcclxuICAgKi9cclxuICB0ZW1wbGF0ZVJlY3RNb3VzZVBvc2l0aW9uO1xyXG5cclxuICAvKipcclxuICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNzZWxlY3RBZGRGaWVsZFR5cGVcclxuICAgKiBAZGVzY3JpcHRpb24g7ZWE65Oc66W8IOunjOuTpOq4sCDsnITtlbQg7ISg7YOd65CcIO2VhOuTnOydmCDsooXrpZhcclxuICAgKi9cclxuICBzZWxlY3RBZGRGaWVsZFR5cGUgPSBcIlwiO1xyXG5cclxuICAvKipcclxuICAgKiBAdHlwZSB7T2JqZWN0fVxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNmaWVsZERpY3Rpb25hcnlcclxuICAgKiBAZGVzY3JpcHRpb24g7ZWE65Oc65Ok7J2YIOygleuztOulvCDqsIDsp4Dqs6Ag7J6I64qUIERpY3Rpb25hcnlcclxuICAgKi9cclxuICBmaWVsZERpY3Rpb25hcnkgPSB7fTtcclxuXHJcbiAgLyoqXHJcbiAgICogQHR5cGUge051bWJlcn1cclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjdW5yZWRvQWN0aW9uSWR4XHJcbiAgICogQGRlc2NyaXB0aW9uIO2YhOyerCBVbmRvIFJlZG8gSW5kZXhcclxuICAgKi9cclxuICB1bnJlZG9BY3Rpb25JZHggPSAtMTtcclxuXHJcbiAgLyoqXHJcbiAgICogQHR5cGUge09iamVjdH1cclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjdW5yZWRvQWN0aW9uRGljdFxyXG4gICAqIEBkZXNjcmlwdGlvbiBVbmRvIFJlZG/snZggQWN0aW9u7J2EIOqwgOyngOqzoCDsnojripQgRGljdGlvbmFyeVxyXG4gICAqL1xyXG4gIHVucmVkb0FjdGlvbkRpY3QgPSB7fTtcclxuXHJcbiAgLyoqXHJcbiAgICogQHR5cGUge1BERlZpZXdlcn1cclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjcGRmVmlld2VyXHJcbiAgICogQGRlc2NyaXB0aW9uIFBERi5qcyDrt7DslrQg7Jik67iM7KCd7Yq4XHJcbiAgICovXHJcbiAgcGRmVmlld2VyO1xyXG5cclxuICAvKipcclxuICAgKiBAdHlwZSB7T2JqZWN0fVxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCN0ZW1wbGF0ZVVzZXJGaWVsZEluZm9cclxuICAgKiBAZGVzY3JpcHRpb24g7ISc66qF7J6Q7J2YIOygleuztOulvCDqsIDsp4Dqs6Ag7J6I64qUIERpY3Rpb25hcnlcclxuICAgKi9cclxuICB0ZW1wbGF0ZVVzZXJGaWVsZEluZm8gPSB7fTtcclxuXHJcbiAgLyoqXHJcbiAgICogQHR5cGUge0VsZW1lbnR9XHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI293bmVyTm9kZVxyXG4gICAqIEBkZXNjcmlwdGlvbiDsnbQg7ZSE66Gc7KCd7Yq46rCAIO2PrO2VqOuQoCBFbGVtZW507J2YIOu2gOuqqCBIVE1MIEVMRU1FTlRcclxuICAgKi9cclxuICBvd25lck5vZGUgPSBudWxsO1xyXG5cclxuICAvKipcclxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjaXNGaWVsZERyYWdTdGFydFxyXG4gICAqIEBkZXNjcmlwdGlvbiDtmITsnqwg7ZWE65Oc6rCAIOuTnOuemOq3uCDrkJjqs6Ag7J6I64qU7KeAIOyXrOu2gC5cclxuICAgKi9cclxuICBpc0ZpZWxkRHJhZ1N0YXJ0ID0gZmFsc2U7XHJcblxyXG4gIC8qKlxyXG4gICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI21lbnVDb2RlXHJcbiAgICogQGRlc2NyaXB0aW9uIHNtYXJ0c3VpdOyXkOyEnOydmCBtZW51Y29kZVxyXG4gICAqL1xyXG4gIG1lbnVDb2RlID0gXCJcIjtcclxuXHJcbiAgdGVtcGxhdGVDbGlwQm9hcmQgPSBcIlwiO1xyXG5cclxuICB1c2VEcmF3U2lnbiA9IFwidHJ1ZVwiO1xyXG4gIHVzZUltYWdlU2lnbiA9IFwidHJ1ZVwiO1xyXG4gIHVzZVJlZ1NpZ24gPSBcInRydWVcIjtcclxuXHJcbiAgLyoqXHJcbiAgICogQGNvbnN0cnVjdG9yXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IF9wZGZWaWV3ZXIgUERGIFZpZXdlciBPYmplY3RcclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IG93bmVyTm9kZSDsnbQg7ZSE66Gc7KCd7Yq46rCAIO2PrO2VqOuQoCBFbGVtZW507J2YIOu2gOuqqCBIVE1MIEVMRU1FTlRcclxuICAgKlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKF9wZGZWaWV3ZXIsIG93bmVyTm9kZSA9IG51bGwsIHNpZ25UYWJTaG93RGVmT3B0VmFsKSB7XHJcbiAgICB0aGlzLnBkZlZpZXdlciA9IF9wZGZWaWV3ZXI7XHJcbiAgICBfdGVtcGxhdGVNb2QgPSB0aGlzO1xyXG4gICAgX3RlbXBsYXRlTW9kLmFwcGVuZFNpZ25UYWJTaG93T3B0KHNpZ25UYWJTaG93RGVmT3B0VmFsKTtcclxuICAgIHRoaXMub3duZXJOb2RlID0gb3duZXJOb2RlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGFkZFVuZG9SZWRvQWN0XHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2FkZFVuZG9SZWRvQWN0XHJcbiAgICogQGRlc2NyaXB0aW9uIHVuZG8gcmVkbyDsspjrpqzrpbwg7JyE7ZWcIOuNsOydtO2EsOulvCDstpTqsIAuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAgIGFjdGlvbiDsooXrpZhcclxuICAgKiBAcGFyYW0ge09iamVjdH0gb2xkRGF0YSAgICAg7J207KCE7JeQIOyeiOuNmCDrjbDsnbTthLBcclxuICAgKiBAcGFyYW0ge09iamVjdH0gbmV3RGF0YSAgICAg7IOI66Gc7Jq0IOuNsOydtO2EsFxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBhZGRVbmRvUmVkb0FjdCh0eXBlLCBvbGREYXRhLCBuZXdEYXRhKSB7XHJcbiAgICBpZiAoXHJcbiAgICAgIHR5cGUgIT09IENPTlNUQU5UUy5DUkVBVEVfRklFTERfQUNUSU9OICYmXHJcbiAgICAgIHR5cGUgIT09IENPTlNUQU5UUy5SRU1PVkVfRklFTERfQUNUSU9OICYmXHJcbiAgICAgIG9sZERhdGEgPT09IG5ld0RhdGFcclxuICAgICkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBfdGVtcGxhdGVNb2QudW5yZWRvQWN0aW9uRGljdFsrK190ZW1wbGF0ZU1vZC51bnJlZG9BY3Rpb25JZHhdID0ge1xyXG4gICAgICBhY3Rpb246IHR5cGUsXHJcbiAgICAgIG9sZDogb2xkRGF0YSxcclxuICAgICAgbmV3OiBuZXdEYXRhLFxyXG4gICAgfTtcclxuICAgIF90ZW1wbGF0ZU1vZC51bnJlZG9BY3Rpb25EaWN0W190ZW1wbGF0ZU1vZC51bnJlZG9BY3Rpb25JZHggKyAxXSA9IHVuZGVmaW5lZDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBidWlsZERWT3B0c0luZm9cclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjYnVpbGREVk9wdHNJbmZvXHJcbiAgICogQGRlc2NyaXB0aW9uIERlZmF1bHQgVmFsdWUg66as7Iqk7Yq4IOygleuztOulvCDshKTsoJUgLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtBcnJheX0gZHZPcHRpb25zICAgRGVmYXVsdCBWYWx1ZSDrpqzsiqTtirhcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgYnVpbGREVk9wdHNJbmZvKGR2T3B0aW9ucykge1xyXG4gICAgdmFyIGR2T3B0aW9uTGlzdCA9IFtdO1xyXG4gICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZHZPcHRpb25zLmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgZHZPcHRpb25MaXN0LnB1c2goe1xyXG4gICAgICAgIHRleHQ6IGR2T3B0aW9uc1tpZHhdLmRpc3BsYXlUZXh0LFxyXG4gICAgICAgIHZhbHVlOiBkdk9wdGlvbnNbaWR4XS52YXJpYWJsZSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBVdGlscy5zZXREVkZpZWxkT3B0c0xpc3QoZHZPcHRpb25MaXN0KTtcclxuICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGJ1aWxkU2lnblRhYlNob3dPcHRcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjYnVpbGRTaWduVGFiU2hvd09wdFxyXG4gICAqIEBkZXNjcmlwdGlvbiBEZWZhdWx0IFZhbHVlIOumrOyKpO2KuCDsoJXrs7Trpbwg7ISk7KCVIC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBPcHRpb25zICAgRGVmYXVsdCBWYWx1ZSDrpqzsiqTtirhcclxuICAgKiBARGF0ZSA6IDIwMjMuIDEyLiAyN1xyXG4gICAqL1xyXG4gICAgYnVpbGRTaWduVGFiU2hvd09wdChPcHRpb25zKSB7XHJcbiAgICAgIC8vdmFyIE9wdGlvbkxpc3QgPSB7fTtcclxuICAgICAgXHJcbiAgICAgIFV0aWxzLnNldFNpZ25UYWJTaG93T3B0KE9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gYnVpbGRGaWVsZFVzZXJJbmZvXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2J1aWxkRmllbGRVc2VySW5mb1xyXG4gICAqIEBkZXNjcmlwdGlvbiDshJzrqoXtlaAg7IKs656M65OkIOumrOyKpO2KuCDsoJXrs7Trpbwg7ISk7KCVIC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7QXJyYXl9IGR2T3B0aW9ucyAgIOyEnOuqhe2VoCDsgqzrnozrk6Qg7KCV67O0IOumrOyKpO2KuFxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBidWlsZEZpZWxkVXNlckluZm8odXNlckxpc3QpIHtcclxuICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IHVzZXJMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgbGV0IGZpZWxkVXNlckluZm8gPSBPYmplY3QuYXNzaWduKFxyXG4gICAgICAgIG5ldyBUZW1wbGF0ZVVzZXJGaWVsZEluZm8oKSxcclxuICAgICAgICB1c2VyTGlzdFtpZHhdXHJcbiAgICAgICk7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC50ZW1wbGF0ZVVzZXJGaWVsZEluZm9bZmllbGRVc2VySW5mby51c2VyVVVJRF0gPVxyXG4gICAgICAgIGZpZWxkVXNlckluZm87XHJcbiAgICB9XHJcbiAgICBVdGlscy5zZXRVc2VySW5mb09wdHNMaXN0KFxyXG4gICAgICBfdGVtcGxhdGVNb2QuY29udmVydFVzZXJMaXN0VG9TZWxlY3RPcHRpb25zKFxyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC50ZW1wbGF0ZVVzZXJGaWVsZEluZm9cclxuICAgICAgKVxyXG4gICAgKTtcclxuICAgIFV0aWxzLnNldFVzZXJJbmZvT3B0c0xpc3RDb3VudChcclxuICAgICAgT2JqZWN0LmtleXMoX3RlbXBsYXRlTW9kLnRlbXBsYXRlVXNlckZpZWxkSW5mbykubGVuZ3RoXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGJ1aWxkRmllbGRmb3JtZXJMaXN0XHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2J1aWxkRmllbGRmb3JtZXJMaXN0XHJcbiAgICogQGRlc2NyaXB0aW9uIOyCrOydtOuTnCDtjKjrhJDsl5Ag7J6I64qUIOyEnOuqheyekCDsoJXrs7Trpbwg6rCx7IugIC5cclxuICAgKlxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBidWlsZEZpZWxkZm9ybWVyTGlzdCgpIHtcclxuICAgIGNvbnN0IG93bmVyRG9tID0gX3RlbXBsYXRlTW9kLm93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiAjRWRpdG9yLVVzZXItQ29tcG9uZW50X0JveFwiXHJcbiAgICApO1xyXG4gICAgVXRpbHMucmVtb3ZlQWxsQ2hpbGROb2RlKG93bmVyRG9tKTtcclxuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhfdGVtcGxhdGVNb2QudGVtcGxhdGVVc2VyRmllbGRJbmZvKTtcclxuICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgIGNvbnN0IHVzZXJGaWVsZEluZm8gPSBfdGVtcGxhdGVNb2QudGVtcGxhdGVVc2VyRmllbGRJbmZvW2tleV07XHJcbiAgICAgIGlmICh1c2VyRmllbGRJbmZvLmlzRm9ybWVyID09PSBcIllcIikge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBsZXQgZmllbGRMaXN0RG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgZmllbGRMaXN0RG9tLnNldEF0dHJpYnV0ZShcImRhdGEtdXNlci1rZXlcIiwga2V5KTtcclxuICAgICAgZmllbGRMaXN0RG9tLmNsYXNzTGlzdC5hZGQoXCJVc2VyLUNvbXBvbmVudC1MaXN0LUNvbmF0aW5lclwiKTtcclxuICAgICAgY29uc3QgZmllbGRLZXlzID0gT2JqZWN0LmtleXModXNlckZpZWxkSW5mby5maWVsZHMpO1xyXG4gICAgICBpZiAoZmllbGRLZXlzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIGZpZWxkTGlzdERvbS5jbGFzc0xpc3QuYWRkKFwiTm8tQ2hpbGRcIik7XHJcbiAgICAgIH1cclxuICAgICAgbGV0IGxpc3REb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidWxcIik7XHJcbiAgICAgIGxpc3REb20uY2xhc3NOYW1lID0gXCJVc2VyLUNvbXBvbmVudC1MaXN0XCI7XHJcbiAgICAgIGxldCBsaXN0SXRlbURvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuICAgICAgbGV0IGxpc3RJdGVtU3BhbkRvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICBsaXN0SXRlbVNwYW5Eb20udGV4dENvbnRlbnQgPSB1c2VyRmllbGRJbmZvLmRpc3BsYXlVc2VyTmFtZTtcclxuICAgICAgbGlzdEl0ZW1Eb20uYXBwZW5kQ2hpbGQobGlzdEl0ZW1TcGFuRG9tKTtcclxuICAgICAgbGlzdERvbS5hcHBlbmRDaGlsZChsaXN0SXRlbURvbSk7XHJcbiAgICAgIGZpZWxkS2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZEtleSkge1xyXG4gICAgICAgIGNvbnN0IHVzZXJGaWVsZCA9IHVzZXJGaWVsZEluZm8uZmllbGQoZmllbGRLZXkpO1xyXG4gICAgICAgIGlmICh1c2VyRmllbGQuaXNSZW1vdmVkKSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBsaXN0SXRlbURvbTIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XHJcbiAgICAgICAgbGV0IGxpc3RJdGVtU3BhbkRvbTIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICBsZXQgcHJlZml4ID1cclxuICAgICAgICAgIHVzZXJGaWVsZC5yZXF1aXJlZCA9PT0gXCJ0cnVlXCJcclxuICAgICAgICAgICAgPyBcIltcIiArIFV0aWxzLnRyYW5zbGF0ZUZvcktleShcIlRlbXBsYXRlLnJlcXVpcmVUZXh0XCIpICsgXCJdXCJcclxuICAgICAgICAgICAgOiBcIltcIiArIFV0aWxzLnRyYW5zbGF0ZUZvcktleShcIlRlbXBsYXRlLnNlbGVjdFRleHRcIikgKyBcIl1cIjtcclxuICAgICAgICBpZiAodXNlckZpZWxkLnR5cGUgPT09IFwiU2lnbkZpZWxkXCIpIHtcclxuICAgICAgICAgIGxpc3RJdGVtU3BhbkRvbTIudGV4dENvbnRlbnQgPVxyXG4gICAgICAgICAgICBcIltcIiArIFV0aWxzLnRyYW5zbGF0ZUZvcktleShcIlRlbXBsYXRlLnNpZ25UZXh0XCIpICsgXCJdXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxpc3RJdGVtU3BhbkRvbTIudGV4dENvbnRlbnQgPSBwcmVmaXggKyB1c2VyRmllbGQuZmllbGRJZDtcclxuXHJcbiAgICAgICAgbGlzdEl0ZW1Eb20yLmFwcGVuZENoaWxkKGxpc3RJdGVtU3BhbkRvbTIpO1xyXG4gICAgICAgIGxpc3REb20uYXBwZW5kQ2hpbGQobGlzdEl0ZW1Eb20yKTtcclxuICAgICAgfSk7XHJcbiAgICAgIGZpZWxkTGlzdERvbS5hcHBlbmRDaGlsZChsaXN0RG9tKTtcclxuICAgICAgb3duZXJEb20uYXBwZW5kQ2hpbGQoZmllbGRMaXN0RG9tKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGNhbGNGaWVsZFBvc3Rpb25cclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjY2FsY0ZpZWxkUG9zdGlvblxyXG4gICAqIEBkZXNjcmlwdGlvbiBGaWVsZOydmCDsnITsuZgoSFRNTOyXkOyEnCnrpbwg6rOE7IKw7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGZpZWxkICAgQmFzZUZpZWxk66W8IOyDgeyGjeuwm+ydgCBPYmplY3RcclxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlzSW1wb3J0XHJcbiAgICogRmllbGTrpbwgSW1wb3J07KSR7J28IOqyveyasOyXkCDtlYTrk5wg7JyE7LmY66W8IOqzhOyCsO2VoCDrlYwgUGFnZSBFbGVtZW507J2YIOuztOuNlOuPhCDtlajqu5gg6rOE7IKw7ZWc64ukLlxyXG4gICAqIEByZXR1cm4ge09iamVjdH0gUmVjdCAgeyB4OiAsIHk6ICwgd2lkdGg6ICwgaGVpZ2h0OiAgfVxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBjYWxjRmllbGRQb3N0aW9uKGZpZWxkLCBpc0ltcG9ydCA9IGZhbHNlKSB7XHJcbiAgICB2YXIgdmlld0JCb3ggPSBfdGVtcGxhdGVNb2Qub3duZXJOb2RlXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiICNcIiArIENPTlNUQU5UUy5URU1QTEFURV9QREZfVklFV0VSKVxyXG4gICAgICAuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICBjb25zdCBmaWVsZFBhZ2VObyA9IGZpZWxkLnBhZ2VObztcclxuICAgIGNvbnN0IHZpZXdwb3J0ID0gX3RlbXBsYXRlTW9kLnBkZlZpZXdlci5fcGFnZXNbZmllbGRQYWdlTm8gLSAxXS52aWV3cG9ydDtcclxuICAgIHZhciB2aWV3cG9ydFhZID0gdmlld3BvcnQuY29udmVydFRvVmlld3BvcnRQb2ludChmaWVsZC5wZGZYLCBmaWVsZC5wZGZZKTtcclxuICAgIHZhciB2aWV3cG9ydFhZMiA9IHZpZXdwb3J0LmNvbnZlcnRUb1ZpZXdwb3J0UG9pbnQoZmllbGQucGRmWDIsIGZpZWxkLnBkZlkyKTtcclxuXHJcbiAgICB2YXIgcGFnZU9mZlNldCA9IF90ZW1wbGF0ZU1vZC5jb21wdXRlUGFnZU9mZnNldChmaWVsZFBhZ2VObyk7XHJcblxyXG4gICAgdmFyIG5ld1ggPSB2aWV3cG9ydFhZWzBdICsgcGFnZU9mZlNldC5sZWZ0IC0gdmlld0JCb3gubGVmdDtcclxuICAgIHZhciBuZXdZID0gdmlld3BvcnRYWVsxXSArIHBhZ2VPZmZTZXQudG9wIC0gdmlld0JCb3gudG9wO1xyXG4gICAgdmFyIG5ld1gyID0gdmlld3BvcnRYWTJbMF0gKyBwYWdlT2ZmU2V0LmxlZnQgLSB2aWV3QkJveC5sZWZ0O1xyXG4gICAgdmFyIG5ld1kyID0gdmlld3BvcnRYWTJbMV0gKyBwYWdlT2ZmU2V0LnRvcCAtIHZpZXdCQm94LnRvcDtcclxuXHJcbiAgICBpZiAoaXNJbXBvcnQpIHtcclxuICAgICAgdmFyIHBhZ2VCb3JkZXJXaWR0aCA9IF90ZW1wbGF0ZU1vZC5nZXRQYWdlQm9yZGVyV2lkdGgoZmllbGRQYWdlTm8pO1xyXG4gICAgICBuZXdYID0gbmV3WCArIHBhZ2VCb3JkZXJXaWR0aC5sZWZ0O1xyXG4gICAgICBuZXdZID0gbmV3WSArIHBhZ2VCb3JkZXJXaWR0aC50b3A7XHJcbiAgICAgIG5ld1gyID0gbmV3WDIgKyBwYWdlQm9yZGVyV2lkdGgubGVmdDtcclxuICAgICAgbmV3WTIgPSBuZXdZMiArIHBhZ2VCb3JkZXJXaWR0aC50b3A7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIG5ld1cgPSBNYXRoLmFicyhuZXdYMiAtIG5ld1gpO1xyXG4gICAgdmFyIG5ld0ggPSBNYXRoLmFicyhuZXdZMiAtIG5ld1kpO1xyXG5cclxuICAgIGZpZWxkLnggPSBuZXdYO1xyXG4gICAgZmllbGQueSA9IG5ld1k7XHJcbiAgICBmaWVsZC53aWR0aCA9IG5ld1c7XHJcbiAgICBmaWVsZC5oZWlnaHQgPSBuZXdIO1xyXG4gICAgcmV0dXJuIHsgeDogbmV3WCwgeTogbmV3WSwgd2lkdGg6IG5ld1csIGhlaWdodDogbmV3SCB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGNhbGNUZW1wbGF0ZUJvdW5kYXJ5XHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2NhbGNUZW1wbGF0ZUJvdW5kYXJ5XHJcbiAgICogQGRlc2NyaXB0aW9uIO2VhOuTnOuTpOydtCDsm4Dsp4Hsnbwg7IiYIOyeiOuKlCDqsr3qs4Trpbwg6rOE7IKw7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IG9iamVjdFdpZHRoICDqsIDroZzquLjsnbRcclxuICAgKiBAcGFyYW0ge051bWJlcn0gb2JqZWN0SGVpZ2h0ICDshLjroZwg6ri47J20XHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIGNhbGNUZW1wbGF0ZUJvdW5kYXJ5KG9iamVjdFdpZHRoLCBvYmplY3RIZWlnaHQpIHtcclxuICAgIGNvbnN0IHZpZXdlcjEgPSBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiICNcIiArIENPTlNUQU5UUy5URU1QTEFURV9QREZfVklFV0VSXHJcbiAgICApO1xyXG4gICAgY29uc3Qgdmlld2VyQm91bmRpbmdSZWN0ID0gdmlld2VyMS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIHZhciBwZ1JlY3QgPSBfdGVtcGxhdGVNb2QuZ2V0UGFnZUJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgX3RlbXBsYXRlTW9kLnBhZ2VCb3VuZGluZ0JveC54ID1cclxuICAgICAgcGdSZWN0LnggKyBvYmplY3RXaWR0aCAvIDIgLSB2aWV3ZXJCb3VuZGluZ1JlY3QubGVmdDtcclxuICAgIF90ZW1wbGF0ZU1vZC5wYWdlQm91bmRpbmdCb3gueSA9XHJcbiAgICAgIHBnUmVjdC55ICsgb2JqZWN0SGVpZ2h0IC8gMiAtIHZpZXdlckJvdW5kaW5nUmVjdC50b3A7XHJcbiAgICBfdGVtcGxhdGVNb2QucGFnZUJvdW5kaW5nQm94LndpZHRoID0gcGdSZWN0LndpZHRoIC0gb2JqZWN0V2lkdGg7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gY2hhbmdlRmllbGRQb3NpdGlvblxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNjaGFuZ2VGaWVsZFBvc2l0aW9uXHJcbiAgICogQGRlc2NyaXB0aW9uIEZpZWxk7J2YIOuzgOqyveuQnCDsnITsuZjrpbwg7ISk7KCV7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGZpZWxkICAgQmFzZUZpZWxk66W8IOyDgeyGjeuwm+ydgCBPYmplY3RcclxuICAgKiBAcGFyYW0ge01hdHJpeH0gbmV3TWF0cml4ICAgIOychOy5mOygleuztOulvCDqs4TsgrDtlaDrlYwg7JOw7J28IOuplO2KuOumreyKpCDquLDrs7jqsJIgdW5kZWluZmVkXHJcbiAgICogQHBhcmFtIHtCb29sZWFufSBkb25vdFVuZG9SZWRvICAgICB1bmRvIHJlZG/rjbDsnbTthLDrpbwg7IOd7ISx7ZWY64qU7KeAIOyXrOu2gCDquLDrs7jqsJIgZmFsc2VcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgY2hhbmdlRmllbGRQb3NpdGlvbihmaWVsZCwgbmV3TWF0cml4ID0gdW5kZWZpbmVkLCBkb25vdFVuZG9SZWRvID0gZmFsc2UpIHtcclxuICAgIGxldCBjaGlsZFJlY3QgPSBmaWVsZC5zZWxlY3QoXCJyZWN0XCIpO1xyXG4gICAgbGV0IGZpZWxkR2xvYmFsTWF0cml4ID0gbmV3TWF0cml4O1xyXG4gICAgaWYgKGZpZWxkR2xvYmFsTWF0cml4ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgZmllbGRHbG9iYWxNYXRyaXggPSBmaWVsZC50cmFuc2Zvcm0oKS5nbG9iYWxNYXRyaXg7XHJcbiAgICB9XHJcbiAgICBsZXQgY2hpbGRSZWN0QkJveCA9IGNoaWxkUmVjdC5nZXRCQm94KCk7XHJcbiAgICBjb25zdCB4MSA9IGZpZWxkR2xvYmFsTWF0cml4LngoY2hpbGRSZWN0QkJveC54LCBjaGlsZFJlY3RCQm94LnkpO1xyXG4gICAgY29uc3QgeTEgPSBmaWVsZEdsb2JhbE1hdHJpeC55KGNoaWxkUmVjdEJCb3gueCwgY2hpbGRSZWN0QkJveC55KTtcclxuICAgIGNvbnN0IHgyID0gZmllbGRHbG9iYWxNYXRyaXgueChjaGlsZFJlY3RCQm94LngyLCBjaGlsZFJlY3RCQm94LnkyKTtcclxuICAgIGNvbnN0IHkyID0gZmllbGRHbG9iYWxNYXRyaXgueShjaGlsZFJlY3RCQm94LngyLCBjaGlsZFJlY3RCQm94LnkyKTtcclxuICAgIGNvbnN0IHdpZHRoID0gTWF0aC5hYnMoeDIgLSB4MSk7XHJcbiAgICBjb25zdCBoZWlnaHQgPSBNYXRoLmFicyh5MiAtIHkxKTtcclxuICAgIGNoaWxkUmVjdC5hdHRyKHsgeDogeDEsIHk6IHkxLCB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0IH0pO1xyXG4gICAgdmFyIGNoaWxkU3ZnID0gZmllbGQuc2VsZWN0KFwic3ZnXCIpO1xyXG4gICAgY2hpbGRTdmcuYXR0cih7IHg6IHgxLCB5OiB5MSwgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCB9KTtcclxuICAgIGZpZWxkLnRyYW5zZm9ybShTbmFwLm1hdHJpeCgpLnRvVHJhbnNmb3JtU3RyaW5nKCkpO1xyXG4gICAgdmFyIG9sZERhdGEgPSBfdGVtcGxhdGVNb2QuZ2V0RmllbGRKc29uRGF0YShjaGlsZFJlY3QuYXR0cihcImlkXCIpKTtcclxuICAgIGNvbnN0IGlzVXBkYXRlZCA9IF90ZW1wbGF0ZU1vZC51cGRhdGVGaWVsZFBvaW50KGZpZWxkKTtcclxuICAgIGlmIChpc1VwZGF0ZWQgPT09IGZhbHNlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIF90ZW1wbGF0ZU1vZC5jaGFuZ2VGcmVlVHJhbnNmb3JtKGZpZWxkLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgIGlmICghZG9ub3RVbmRvUmVkbykge1xyXG4gICAgICB2YXIgbmV3RGF0YSA9IF90ZW1wbGF0ZU1vZC5nZXRGaWVsZEpzb25EYXRhKGNoaWxkUmVjdC5hdHRyKFwiaWRcIikpO1xyXG4gICAgICBfdGVtcGxhdGVNb2QuYWRkVW5kb1JlZG9BY3QoXHJcbiAgICAgICAgQ09OU1RBTlRTLkZJRUxEX0FUVFJfQ0hBTkdFX0FDVElPTixcclxuICAgICAgICBvbGREYXRhLFxyXG4gICAgICAgIG5ld0RhdGFcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBjaGFuZ2VGaWVsZFZhbHVlRXZlbnRcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjY2hhbmdlRmllbGRWYWx1ZUV2ZW50XHJcbiAgICogQGRlc2NyaXB0aW9uIO2VhOuTnOydmCDsho3shLEg6rCS7J20IOuzgOqyvSDrkJjsl4jsnYQg65WMIOyGjeyEseydmCDsooXrpZjsl5Ag65Sw6528IOyymOumrO2VmOq4sCDsnITtlZwg66mU7IaM65OcLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50ICBldmVudCBPYmplY3RcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgY2hhbmdlRmllbGRWYWx1ZUV2ZW50KGV2ZW50KSB7XHJcbiAgICBjb25zdCB0YXJnZXROb2RlID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgY29uc3QgZmllbGRJZCA9IHRhcmdldE5vZGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1maWVsZC1pZFwiKTtcclxuICAgIGNvbnN0IGZpZWxkUHJvcGV0eU5hbWUgPSB0YXJnZXROb2RlLmdldEF0dHJpYnV0ZShcclxuICAgICAgXCJkYXRhLWZpZWxkLXByb3BlcnR5LW5hbWVcIlxyXG4gICAgKTtcclxuICAgIHZhciBvbGREYXRhQXJyID0gW107XHJcbiAgICB2YXIgbmV3RGF0YUFyciA9IFtdO1xyXG4gICAgdmFyIG93bmVySWQgPSBcIlwiO1xyXG5cclxuICAgIGZpZWxkSWQuc3BsaXQoXCIsXCIpLmZvckVhY2goKGlkVmFsKSA9PiB7XHJcbiAgICAgIHZhciBmaWVsZEdyb3VwID0gX3RlbXBsYXRlTW9kLm1haW5DYW52YXMuc2VsZWN0KFwiI1wiICsgaWRWYWwgKyBcIkdyb3VwXCIpO1xyXG4gICAgICBpZiAoZmllbGRHcm91cCA9PT0gbnVsbCB8fCBmaWVsZEdyb3VwID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgdmFyIGZpZWxkID0gX3RlbXBsYXRlTW9kLmZpZWxkRGljdGlvbmFyeVtpZFZhbF07XHJcbiAgICAgIGlmICghZmllbGQudmFsaWRhdGVWYWx1ZShmaWVsZFByb3BldHlOYW1lLCB0YXJnZXROb2RlLnZhbHVlKSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwibm90IHZhbGlkYXRlXCIpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBvbGREYXRhID0gX3RlbXBsYXRlTW9kLmdldEZpZWxkSnNvbkRhdGEoaWRWYWwpO1xyXG4gICAgICBvbGREYXRhQXJyLnB1c2gob2xkRGF0YSk7XHJcbiAgICAgIFV0aWxzLmFzc2lnbihmaWVsZCwgXCJtX1wiICsgZmllbGRQcm9wZXR5TmFtZSwgdGFyZ2V0Tm9kZS52YWx1ZSk7XHJcbiAgICAgIGlmIChUZXh0QmFzZUZpZWxkLm5lZWRUZXh0U3ZnUmVmcmVzaChmaWVsZFByb3BldHlOYW1lKSkge1xyXG4gICAgICAgIGlmIChmaWVsZFByb3BldHlOYW1lID09PSBcImRlZmF1bHRWYWx1ZVwiICYmIGZpZWxkLnR5cGUgPT09IFwiVGV4dEZpZWxkXCIpIHtcclxuICAgICAgICAgIGxldCBkdlRleHQgPSBfdGVtcGxhdGVNb2QuZ2V0RHZUZXh0VmFsdWUodGFyZ2V0Tm9kZS52YWx1ZSk7XHJcbiAgICAgICAgICBmaWVsZC5kZWZhdWx0VmFsdWVUZXh0ID0gZHZUZXh0O1xyXG4gICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICBmaWVsZFByb3BldHlOYW1lID09PSBcImRlZmF1bHRWYWx1ZVwiICYmXHJcbiAgICAgICAgICBmaWVsZC50eXBlID09PSBcIkNvbWJvYm94RmllbGRcIlxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgbGV0IGR2VGV4dCA9IHRhcmdldE5vZGUudmFsdWU7XHJcbiAgICAgICAgICBmaWVsZC5kZWZhdWx0VmFsdWVUZXh0ID0gZHZUZXh0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY3VyU2NhbGUgPSBfdGVtcGxhdGVNb2QucGRmVmlld2VyLmN1cnJlbnRTY2FsZTtcclxuICAgICAgICBmaWVsZC5jaGFuZ2VUZXh0RWxlbWVudChmaWVsZEdyb3VwLCBjdXJTY2FsZSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGZpZWxkUHJvcGV0eU5hbWUgPT09IFwib3duZXJJZFwiKSB7XHJcbiAgICAgICAgLy8yNDAyMjAg7JWE7J207YWcIOuwsOqyveyDiSDrp57qsowg67CU6r+U7KSY7JW87ZWoLlxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgMS4g7JWE7J207YWcIOuwsOqyveyDieyDgeqwkuydhCDslrTrlrvqsowg64Sj7Ja07KSY7JW8IO2VoOyngC5cclxuXHJcblxyXG4gICAgICAgICovXHJcblxyXG5cclxuICAgICAgICBfdGVtcGxhdGVNb2QucmVmcmVzaGZvcm1lckxpc3QoZmllbGQpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChmaWVsZFByb3BldHlOYW1lID09PSBcImZpZWxkTWluVmFsdWVcIikge1xyXG4gICAgICAgIGZpZWxkLm1faW5wdXRNaW4gPSBOdW1iZXIodGFyZ2V0Tm9kZS52YWx1ZSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGZpZWxkUHJvcGV0eU5hbWUgPT09IFwiZmllbGRNYXhWYWx1ZVwiKSB7XHJcbiAgICAgICAgZmllbGQubV9pbnB1dE1heCA9IE51bWJlcih0YXJnZXROb2RlLnZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZmllbGRQcm9wZXR5TmFtZSA9PT0gXCJ1c2VDYWxjXCIpIHtcclxuICAgICAgICBmaWVsZC5tX3VzZUNhbGMgPSB0YXJnZXROb2RlLnZhbHVlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChmaWVsZFByb3BldHlOYW1lID09PSBcInVzZURyYXdTaWduXCIpIHtcclxuICAgICAgICBmaWVsZC5tX3VzZURyYXdTaWduID0gdGFyZ2V0Tm9kZS52YWx1ZTtcclxuICAgICAgICBfdGVtcGxhdGVNb2QudmFsaWRhdGVTaWduT3B0aW9ucyh0YXJnZXROb2RlLCBmaWVsZElkLCBmaWVsZFByb3BldHlOYW1lKTtcclxuICAgICAgICBmaWVsZC5tX3VzZURyYXdTaWduID0gdGFyZ2V0Tm9kZS52YWx1ZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZmllbGRQcm9wZXR5TmFtZSA9PT0gXCJ1c2VJbWFnZVNpZ25cIikge1xyXG4gICAgICAgIGZpZWxkLm1fdXNlSW1hZ2VTaWduID0gdGFyZ2V0Tm9kZS52YWx1ZTtcclxuICAgICAgICBfdGVtcGxhdGVNb2QudmFsaWRhdGVTaWduT3B0aW9ucyh0YXJnZXROb2RlLCBmaWVsZElkLCBmaWVsZFByb3BldHlOYW1lKTtcclxuICAgICAgICBmaWVsZC5tX3VzZUltYWdlU2lnbiA9IHRhcmdldE5vZGUudmFsdWU7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGZpZWxkUHJvcGV0eU5hbWUgPT09IFwidXNlUmVnU2lnblwiKSB7XHJcbiAgICAgICAgZmllbGQubV91c2VSZWdTaWduID0gdGFyZ2V0Tm9kZS52YWx1ZTtcclxuICAgICAgICBfdGVtcGxhdGVNb2QudmFsaWRhdGVTaWduT3B0aW9ucyh0YXJnZXROb2RlLCBmaWVsZElkLCBmaWVsZFByb3BldHlOYW1lKTtcclxuICAgICAgICBmaWVsZC5tX3VzZVJlZ1NpZ24gPSB0YXJnZXROb2RlLnZhbHVlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChmaWVsZFByb3BldHlOYW1lID09PSBcInJlcXVpcmVkXCIpIHtcclxuICAgICAgICBVdGlscy5zaG93QXN0ZXJpc2tEaXYoXHJcbiAgICAgICAgICBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLFxyXG4gICAgICAgICAgaWRWYWwsXHJcbiAgICAgICAgICB0YXJnZXROb2RlLnZhbHVlID09PSBcInRydWVcIiA/IHRydWUgOiBmYWxzZVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgbmV3RGF0YSA9IF90ZW1wbGF0ZU1vZC5nZXRGaWVsZEpzb25EYXRhKGlkVmFsKTtcclxuICAgICAgbmV3RGF0YUFyci5wdXNoKG5ld0RhdGEpO1xyXG4gICAgICBvd25lcklkID0gZmllbGQub3duZXJJZDtcclxuICAgIH0pO1xyXG4gICAgaWYgKG9sZERhdGFBcnIubGVuZ3RoID09PSAwIHx8IG5ld0RhdGFBcnIgPT09IDApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKFxyXG4gICAgICBmaWVsZFByb3BldHlOYW1lID09PSBcIm93bmVySWRcIiB8fFxyXG4gICAgICBmaWVsZFByb3BldHlOYW1lID09PSBcImZpZWxkSWRcIiB8fFxyXG4gICAgICBmaWVsZFByb3BldHlOYW1lID09PSBcInJlcXVpcmVkXCJcclxuICAgICkge1xyXG4gICAgICBfdGVtcGxhdGVNb2QuYnVpbGRGaWVsZGZvcm1lckxpc3QoKTtcclxuICAgICAgX3RlbXBsYXRlTW9kLnNlbGVjdFVzZXJMaXN0KG93bmVySWQpO1xyXG4gICAgfVxyXG4gICAgbGV0IGFjdGlvbk5hbWUgPSBDT05TVEFOVFMuR1JPVVBfQVRUUl9DSEFOR0VfQUNUSU9OO1xyXG4gICAgaWYgKGZpZWxkUHJvcGV0eU5hbWUgPT09IFwib3duZXJJZFwiKSB7XHJcbiAgICAgIGFjdGlvbk5hbWUgPSBDT05TVEFOVFMuR1JPVVBfQVRUUl9PV05FUl9DSEFOR0VfQUNUSU9OO1xyXG4gICAgfVxyXG4gICAgX3RlbXBsYXRlTW9kLmFkZFVuZG9SZWRvQWN0KGFjdGlvbk5hbWUsIG9sZERhdGFBcnIsIG5ld0RhdGFBcnIpO1xyXG4gIH1cclxuXHJcbiAgLy/rs5HsmrEg7LaU6rCAXHJcbiAgdmFsaWRhdGVTaWduT3B0aW9ucyh0YXJnZXROb2RlLCBmaWVsZElkLCBmaWVsZFByb3BldHlOYW1lKSB7XHJcbiAgICBjb25zdCBzaWduRmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLlNpZ24tRmllbGRcIik7XHJcbiAgICBjb25zdCB1c2VEcmF3U2lnbklucHV0ID0gc2lnbkZpZWxkLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICdpbnB1dFtkYXRhLWZpZWxkLXByb3BlcnR5LW5hbWU9XCJ1c2VEcmF3U2lnblwiXSdcclxuICAgICk7XHJcbiAgICBjb25zdCB1c2VJbWFnZVNpZ25JbnB1dCA9IHNpZ25GaWVsZC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAnaW5wdXRbZGF0YS1maWVsZC1wcm9wZXJ0eS1uYW1lPVwidXNlSW1hZ2VTaWduXCJdJ1xyXG4gICAgKTtcclxuICAgIGNvbnN0IHVzZVJlZ1NpZ25JbnB1dCA9IHNpZ25GaWVsZC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAnaW5wdXRbZGF0YS1maWVsZC1wcm9wZXJ0eS1uYW1lPVwidXNlUmVnU2lnblwiXSdcclxuICAgICk7XHJcblxyXG4gICAgbGV0IHVzZURyYXdTaWduID0gdXNlRHJhd1NpZ25JbnB1dCAmJiB1c2VEcmF3U2lnbklucHV0LnZhbHVlID09PSBcInRydWVcIiA/IHRydWUgOiBmYWxzZTtcclxuICAgIGxldCB1c2VJbWFnZVNpZ24gPSB1c2VJbWFnZVNpZ25JbnB1dCAmJiB1c2VJbWFnZVNpZ25JbnB1dC52YWx1ZSA9PT0gXCJ0cnVlXCIgPyB0cnVlIDogZmFsc2U7XHJcbiAgICBsZXQgdXNlUmVnU2lnbiA9IHVzZVJlZ1NpZ25JbnB1dCAmJiB1c2VSZWdTaWduSW5wdXQudmFsdWUgPT09IFwidHJ1ZVwiID8gdHJ1ZSA6IGZhbHNlO1xyXG5cclxuICAgIGlmICghdXNlRHJhd1NpZ24gJiYgIXVzZUltYWdlU2lnbiAmJiAhdXNlUmVnU2lnbikge1xyXG4gICAgICBjb25zb2xlLmxvZyhcInRhcmdldE5vZGUuY2hlY2tlZDpcIiArIHRhcmdldE5vZGUuY2hlY2tlZCArIFwiXFxuXCIpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcInRhcmdldE5vZGUudmFsdWU6XCIgKyB0YXJnZXROb2RlLnZhbHVlICsgXCJcXG5cIik7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwidXNlRHJhd1NpZ25JbnB1dC52YWx1ZTpcIiArIHVzZURyYXdTaWduSW5wdXQudmFsdWUgKyBcIlxcblwiKTtcclxuICAgICAgdGFyZ2V0Tm9kZS5jaGVja2VkID0gdHJ1ZTtcclxuICAgICAgdGFyZ2V0Tm9kZS52YWx1ZSA9IFwidHJ1ZVwiO1xyXG4gICAgICAvL2FsZXJ0KCfsoIHslrTrj4Qg7ZWY64KY7J2YIOyEnOuqhSDsmLXshZjsnYQg7Zmc7ISx7ZmU7ZW07JW8IO2VqeuLiOuLpC4nKTtcclxuXHJcbiAgICAgIC8vIOu2gOuqqCDsmpTshozrpbwg7LC+6rOgLFxyXG4gICAgICBsZXQgcGFyZW50RGl2ID0gdGFyZ2V0Tm9kZS5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAvLyDrtoDrqqgg7JqU7IaMIOuCtOyXkOyEnCDssrTtgazrsJXsiqTrpbwg7LC+7Iq164uI64ukLlxyXG4gICAgICBsZXQgY2hlY2tib3hJbnB1dCA9IHBhcmVudERpdi5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKTtcclxuICAgICAgY2hlY2tib3hJbnB1dC5jaGVja2VkID0gdHJ1ZTtcclxuXHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGNoYW5nZUZyZWVUcmFuc2Zvcm1cclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjY2hhbmdlRnJlZVRyYW5zZm9ybVxyXG4gICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zsnZgg7YGs6riwIOuwjyDsnITsuZjrpbwg67OA6rK97ZWY64qUIEZyZWVUcmFuc2Zvcm3snYQg7IOI66GcIOuzgOqyve2VnOuLpC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBmaWVsZEdyb3VwICAgU1ZH7J2YIGdyb3VwIOyYpOu4jOygne2KuFxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB3aWR0aCAgICAg7ZWE65Oc7J2YIOqwgOuhnCDquLjsnbRcclxuICAgKiBAcGFyYW0ge051bWJlcn0gaGVpZ2h0ICAgIO2VhOuTnOydmCDshLjroZwg6ri47J20XHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIGNoYW5nZUZyZWVUcmFuc2Zvcm0oZmllbGRHcm91cCwgd2lkdGgsIGhlaWdodCkge1xyXG4gICAgaWYgKGZpZWxkR3JvdXAucGFyZW50KCkuYXR0cihcImlkXCIpID09PSBDT05TVEFOVFMuRFJBR19CT1hfTkFNRSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBsZXQgaGFzSGlkZUNsYXNzID0gZmFsc2U7XHJcbiAgICBpZiAoIVV0aWxzLmlzRW1wdHlPYmplY3QoZmllbGRHcm91cC5mcmVlVHJhbnNmb3JtKSkge1xyXG4gICAgICBoYXNIaWRlQ2xhc3MgPSAhZmllbGRHcm91cC5mcmVlVHJhbnNmb3JtLmlzU2hvd1Jlc2l6ZUhhbmRsZXIoKTtcclxuICAgICAgZmllbGRHcm91cC5mcmVlVHJhbnNmb3JtLnVucGx1ZygpO1xyXG4gICAgfVxyXG4gICAgX3RlbXBsYXRlTW9kLmNhbGNUZW1wbGF0ZUJvdW5kYXJ5KHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgLy8gY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICBsZXQgZnQgPSBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy5mcmVlVHJhbnNmb3JtKFxyXG4gICAgICBmaWVsZEdyb3VwLFxyXG4gICAgICB7XHJcbiAgICAgICAgc25hcDogeyByb3RhdGU6IDEgfSxcclxuICAgICAgICBhdHRyczogeyBzdHJva2U6IFwiIzlkNjg1OVwiIH0sXHJcbiAgICAgICAgc3ViamVjdEJCb3g6IGZpZWxkR3JvdXAuc2VsZWN0KFwicmVjdFwiKS5nZXRCQm94KHRydWUpLFxyXG4gICAgICAgIHNpemU6IDQsXHJcbiAgICAgICAgZHJhdzogXCJiYm94XCIsXHJcbiAgICAgICAgYm91bmRhcnk6IF90ZW1wbGF0ZU1vZC5wYWdlQm91bmRpbmdCb3gsXHJcbiAgICAgIH0sXHJcbiAgICAgIGZ1bmN0aW9uIChmdDIsIGV2ZW50cykge1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5maWVsZEZ0RXZlbnQoZXZlbnRzWzBdLCBmaWVsZEdyb3VwKTtcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIGZ0LnNldE9wdHMoeyByb3RhdGU6IGZhbHNlIH0pO1xyXG4gICAgaWYgKGhhc0hpZGVDbGFzcykge1xyXG4gICAgICBmaWVsZEdyb3VwLmZyZWVUcmFuc2Zvcm0uaGlkZVJlc2l6ZUhhbmRsZXIoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBjaGFuZ2VHcm91cEJveEZyZWVUcmFuc2Zvcm1cclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjY2hhbmdlR3JvdXBCb3hGcmVlVHJhbnNmb3JtXHJcbiAgICogQGRlc2NyaXB0aW9u7ZWE65OcIOq3uOujueuwleyKpCDtgazquLAg67CPIOychOy5mOulvCDrs4Dqsr3tlZjripQgRnJlZVRyYW5zZm9ybeydhCDsg4jroZwg67OA6rK97ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHRlbXBHcm91cEJveCAgU1ZH7J2YIGdyb3VwIOyYpOu4jOygne2KuFxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBjaGFuZ2VHcm91cEJveEZyZWVUcmFuc2Zvcm0odGVtcEdyb3VwQm94KSB7XHJcbiAgICBpZiAoIVV0aWxzLmlzRW1wdHlPYmplY3QodGVtcEdyb3VwQm94LmZyZWVUcmFuc2Zvcm0pKSB7XHJcbiAgICAgIHRlbXBHcm91cEJveC5mcmVlVHJhbnNmb3JtLnVucGx1ZygpO1xyXG4gICAgfVxyXG4gICAgX3RlbXBsYXRlTW9kLmNhbGNUZW1wbGF0ZUJvdW5kYXJ5KFxyXG4gICAgICB0ZW1wR3JvdXBCb3guZ2V0QkJveCgpLndpZHRoLFxyXG4gICAgICB0ZW1wR3JvdXBCb3guZ2V0QkJveCgpLmhlaWdodFxyXG4gICAgKTtcclxuICAgIHZhciB0ZW1wR0Z0ID0gX3RlbXBsYXRlTW9kLm1haW5DYW52YXMuZnJlZVRyYW5zZm9ybShcclxuICAgICAgdGVtcEdyb3VwQm94LFxyXG4gICAgICB7XHJcbiAgICAgICAgc25hcDogeyByb3RhdGU6IDEgfSxcclxuICAgICAgICBzaXplOiA0LFxyXG4gICAgICAgIGRyYXc6IFwiYmJveFwiLFxyXG4gICAgICAgIGJvdW5kYXJ5OiBfdGVtcGxhdGVNb2QucGFnZUJvdW5kaW5nQm94LFxyXG4gICAgICB9LFxyXG4gICAgICBmdW5jdGlvbiAoZnQsIGV2ZW50cykge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coZXZlbnRzKTtcclxuICAgICAgICBfdGVtcGxhdGVNb2QudG1wR3JvdXBGdEV2ZW50KGV2ZW50c1swXSk7XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICB0ZW1wR0Z0LnNldE9wdHMoeyByb3RhdGU6IGZhbHNlLCBzY2FsZTogZmFsc2UgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gY2hlY2tUZW1wbGF0ZUZpZWxkRGF0YVxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNjaGVja1RlbXBsYXRlRmllbGREYXRhXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogTGFiZWzsnbTrgpggQ29tYm9ib3jsnZgg6rK97JqwIOyViOyXkCDqsJLsnYQg7IWL7YyF7ZWY7KeAIOyViuycvOuptCDshJzrqoXrqqjrk5zsl5DshJxcclxuICAgKiDtlYTsiJgg6rCSIOyytO2BrCDsl6zrtoDrpbwg7Ya16rO87ZWY7KeAIOuqu+2VmOq4sCDrlYzrrLjsl5Ag7YWc7ZSM66a/IOyXkOuUlO2KuOyXkOyEnCDtlbTri7kg6rCS65Ok7J20XHJcbiAgICog65Ok7Ja0IOyeiOuKlOyngCDssrTtgaztlZzri6QuXHJcbiAgICpcclxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gICAqIEBEYXRlIDogMjAyMS4gNi4gMThcclxuICAgKi9cclxuICBjaGVja1RlbXBsYXRlRmllbGREYXRhKCkge1xyXG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKF90ZW1wbGF0ZU1vZC50ZW1wbGF0ZVVzZXJGaWVsZEluZm8pO1xyXG4gICAgZm9yIChsZXQgdXNyS2V5SWR4ID0gMDsgdXNyS2V5SWR4IDwga2V5cy5sZW5ndGg7ICsrdXNyS2V5SWR4KSB7XHJcbiAgICAgIGNvbnN0IHVzZXJJbmZvID0gX3RlbXBsYXRlTW9kLnRlbXBsYXRlVXNlckZpZWxkSW5mb1trZXlzW3VzcktleUlkeF1dO1xyXG4gICAgICBmb3IgKFxyXG4gICAgICAgIHZhciBwYWdlTm8gPSAwO1xyXG4gICAgICAgIHBhZ2VObyA8IF90ZW1wbGF0ZU1vZC5wZGZWaWV3ZXIucGFnZXNDb3VudDtcclxuICAgICAgICArK3BhZ2VOb1xyXG4gICAgICApIHtcclxuICAgICAgICBjb25zdCBmaWVsZEtleXMgPSBPYmplY3Qua2V5cyhfdGVtcGxhdGVNb2QuZmllbGREaWN0aW9uYXJ5KTtcclxuICAgICAgICBmb3IgKGxldCBrZXlJZHggPSAwOyBrZXlJZHggPCBmaWVsZEtleXMubGVuZ3RoOyArK2tleUlkeCkge1xyXG4gICAgICAgICAgY29uc3QgZmllbGQgPSBfdGVtcGxhdGVNb2QuZmllbGREaWN0aW9uYXJ5W2ZpZWxkS2V5c1trZXlJZHhdXTtcclxuICAgICAgICAgIGlmIChmaWVsZC5pc1JlbW92ZWQpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoZmllbGQudHlwZSA9PT0gXCJMYWJlbEZpZWxkXCIpIHtcclxuICAgICAgICAgICAgaWYgKFV0aWxzLmlzU3RyaW5nRW1wdHkoZmllbGQudmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgbGV0IHN2Z1JlY3QgPSBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy5zZWxlY3QoXHJcbiAgICAgICAgICAgICAgICBcIiNcIiArIGZpZWxkLmlkICsgXCJHcm91cCA+IHJlY3RcIlxyXG4gICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgX3RlbXBsYXRlTW9kLnNob3dGaWVsZEF0dHJpYnV0ZShmaWVsZC5pZCk7XHJcbiAgICAgICAgICAgICAgbGV0IHZpZXdlckNvbnRhaW5lciA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgICAgICAgICAgIFwiICNcIiArIENPTlNUQU5UUy5URU1QTEFURV9QREZfVklFV0VSX0NPTlRBSU5FUlxyXG4gICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgdmlld2VyQ29udGFpbmVyLnNjcm9sbFRvcCA9IHN2Z1JlY3QuYXR0cihcInlcIik7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGZpZWxkLnR5cGUgPT09IFwiQ29tYm9ib3hGaWVsZFwiKSB7XHJcbiAgICAgICAgICAgIGlmIChVdGlscy5pc1N0cmluZ0VtcHR5KGZpZWxkLmNvbWJvYm94TGlzdCkpIHtcclxuICAgICAgICAgICAgICBsZXQgc3ZnUmVjdCA9IF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzLnNlbGVjdChcclxuICAgICAgICAgICAgICAgIFwiI1wiICsgZmllbGQuaWQgKyBcIkdyb3VwID4gcmVjdFwiXHJcbiAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICBfdGVtcGxhdGVNb2Quc2hvd0ZpZWxkQXR0cmlidXRlKGZpZWxkLmlkKTtcclxuICAgICAgICAgICAgICBsZXQgdmlld2VyQ29udGFpbmVyID0gX3RlbXBsYXRlTW9kLm93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgICAgICAgICAgXCIgI1wiICsgQ09OU1RBTlRTLlRFTVBMQVRFX1BERl9WSUVXRVJfQ09OVEFJTkVSXHJcbiAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICB2aWV3ZXJDb250YWluZXIuc2Nyb2xsVG9wID0gc3ZnUmVjdC5hdHRyKFwieVwiKTtcclxuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBjbGVhclNlbGVjdGVkVG9vbFxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNjbGVhclNlbGVjdGVkVG9vbFxyXG4gICAqIEBkZXNjcmlwdGlvbiDsgqzsnbTrk5wg7YOt7JeQIOyEoO2DoOuQnCDrqqjrk5zrpbwg7LSI6riw7ZmU7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIGNsZWFyU2VsZWN0ZWRUb29sKCkge1xyXG4gICAgbGV0IHRvb2xFbGVtZW50ID0gX3RlbXBsYXRlTW9kLm93bmVyTm9kZS5xdWVyeVNlbGVjdG9yQWxsKFxyXG4gICAgICBcIi5cIiArIENPTlNUQU5UUy5FRElUT1JfQ09NUE9ORU5UX0NMQVNTICsgXCIgdWwgbGlcIlxyXG4gICAgKTtcclxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0b29sRWxlbWVudC5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgaWYgKHRvb2xFbGVtZW50W2luZGV4XS5jbGFzc0xpc3QuY29udGFpbnMoXCJzZWxlY3RlZFwiKSkge1xyXG4gICAgICAgIHRvb2xFbGVtZW50W2luZGV4XS5jbGFzc0xpc3QudG9nZ2xlKFwic2VsZWN0ZWRcIik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBjb21wdXRlUGFnZU9mZnNldFxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNjb21wdXRlUGFnZU9mZnNldFxyXG4gICAqIEBkZXNjcmlwdGlvbuyCrOydtOuTnCAg7Y6Y7J207KeA7J2YIE9mZnNldOydhCDqs4TsgrDtlZzri6QuLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHBhZ2VObyAg7Y6Y7J207KeAIOuyiO2YuFxyXG4gICAqIEByZXR1cm4gIHtPYmplY3R9IHsgbGVmdDogLCB0b3A6ICB9XHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIGNvbXB1dGVQYWdlT2Zmc2V0KHBhZ2VObykge1xyXG4gICAgbGV0IHBnTm9kZSA9IF90ZW1wbGF0ZU1vZC5nZXRQYWdlRWxlbWVudChwYWdlTm8pO1xyXG4gICAgdmFyIHJlY3QgPSBwZ05vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXHJcbiAgICAgIGJvZHlFbHQgPSBkb2N1bWVudC5ib2R5O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdG9wOiByZWN0LnRvcCArIGJvZHlFbHQuc2Nyb2xsVG9wLFxyXG4gICAgICBsZWZ0OiByZWN0LmxlZnQgKyBib2R5RWx0LnNjcm9sbExlZnQsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGNvbnZlcnRVc2VyTGlzdFRvU2VsZWN0T3B0aW9uc1xyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNjb252ZXJ0VXNlckxpc3RUb1NlbGVjdE9wdGlvbnNcclxuICAgKiBAZGVzY3JpcHRpb24g7IKs7J2065OcIOyEnOuqheyekCDrpqzsiqTtirjrpbwg7ZWE65OcIOyGjeyEseyXkOyEnCDsgqzsmqntlZjquLAg7JyE7ZW0IOyXrOq4sOyEnCDsgqzsmqntlaAg7Y+s66mn7Jy866GcIOuzgO2ZmO2VnOuLpC4gLlxyXG4gICAqXHJcbiAgICogQHJldHVybiB7QXJyYXl9IFt7IHRleHQ6ICwgdmFsdWU6ICB9Li4uXVxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBjb252ZXJ0VXNlckxpc3RUb1NlbGVjdE9wdGlvbnMoKSB7XHJcbiAgICBsZXQgb3B0aW9uTGlzdCA9IFtdO1xyXG5cclxuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhfdGVtcGxhdGVNb2QudGVtcGxhdGVVc2VyRmllbGRJbmZvKTtcclxuICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgIGNvbnN0IHVzckluZm8gPSBfdGVtcGxhdGVNb2QudGVtcGxhdGVVc2VyRmllbGRJbmZvW2tleV07XHJcbiAgICAgIGlmIChcclxuICAgICAgICB1c3JJbmZvLmlzRm9ybWVyICE9PSBudWxsICYmXHJcbiAgICAgICAgdXNySW5mby5pc0Zvcm1lciAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgdXNySW5mby5pc0Zvcm1lciA9PT0gXCJZXCJcclxuICAgICAgKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIG9wdGlvbkxpc3QucHVzaCh7XHJcbiAgICAgICAgdGV4dDogdXNySW5mby5kaXNwbGF5VXNlck5hbWUsXHJcbiAgICAgICAgdmFsdWU6IHVzckluZm8udXNlclVVSUQsXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIG9wdGlvbkxpc3Q7XHJcbiAgfVxyXG5cclxuICBjb3B5T2JqZWN0KCkge1xyXG4gICAgX3RlbXBsYXRlTW9kLnRlbXBsYXRlQ2xpcEJvYXJkID0gXCJcIjtcclxuICAgIGNvbnN0IHNlbGVjdGVkTm9kZSA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIgLlwiICsgQ09OU1RBTlRTLkVESVRPUl9BVFRSX0NMQVNTXHJcbiAgICApO1xyXG4gICAgaWYgKHNlbGVjdGVkTm9kZSA9PT0gbnVsbCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBhdHRyUGFuZWxOb2RlID0gc2VsZWN0ZWROb2RlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLlwiICsgQ09OU1RBTlRTLkVESVRPUl9BVFRSX1BBTkVMX0NMQVNTXHJcbiAgICApO1xyXG4gICAgaWYgKGF0dHJQYW5lbE5vZGUgPT09IG51bGwpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgaWRMaXN0QXR0ciA9IGF0dHJQYW5lbE5vZGUuZ2V0QXR0cmlidXRlKFwiRmllbGQtaWQtbGlzdFwiKTtcclxuICAgIF90ZW1wbGF0ZU1vZC50ZW1wbGF0ZUNsaXBCb2FyZCA9IGlkTGlzdEF0dHI7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gY3JlYXRlRHJhZ092ZXJHcm91cFxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNjcmVhdGVEcmFnT3Zlckdyb3VwXHJcbiAgICogQGRlc2NyaXB0aW9uIOyCrOydtOuTnCDrk5zrnpjqt7gg65CcIOqzs+ydmCBPYmplY3Trk6TsnYQgc3ZnIOq3uOujueycvOuhnCDrrLbripTri6QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdH0gYm9yZGVyIFNuYXDsnZggYm91bmRpbmcgYm94XHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIGNyZWF0ZURyYWdPdmVyR3JvdXAoYm9yZGVyKSB7XHJcbiAgICBfdGVtcGxhdGVNb2QuaGlkZUZpZWxkQXR0cmlidXRlKCk7XHJcbiAgICB2YXIgdGVtcEdOZXcgPSBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy5ncm91cCgpO1xyXG4gICAgdGVtcEdOZXcuYXR0cih7IGlkOiBDT05TVEFOVFMuRFJBR19CT1hfTkFNRSB9KTtcclxuICAgIHZhciBpdGVtcyA9IF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzLnNlbGVjdEFsbChcclxuICAgICAgXCIjXCIgKyBDT05TVEFOVFMuTUFJTl9HUk9VUF9OQU1FICsgXCIgPiBnXCJcclxuICAgICk7XHJcbiAgICB2YXIgc2VsZWN0SXRlbUFycmF5ID0gW107XHJcbiAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICB2YXIgbXlib3VuZHMgPSBlbC5nZXRCQm94KCk7XHJcbiAgICAgIGlmIChTbmFwLnBhdGguaXNCQm94SW50ZXJzZWN0KG15Ym91bmRzLCBib3JkZXIpKSB7XHJcbiAgICAgICAgc2VsZWN0SXRlbUFycmF5LnB1c2goZWwpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICghVXRpbHMuaXNFbXB0eU9iamVjdChlbC5mcmVlVHJhbnNmb3JtKSkge1xyXG4gICAgICAgIGVsLmZyZWVUcmFuc2Zvcm0uaGlkZVJlc2l6ZUhhbmRsZXIoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBpZiAoc2VsZWN0SXRlbUFycmF5Lmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgIGlmICghVXRpbHMuaXNFbXB0eU9iamVjdChzZWxlY3RJdGVtQXJyYXlbMF0uZnJlZVRyYW5zZm9ybSkpIHtcclxuICAgICAgICBzZWxlY3RJdGVtQXJyYXlbMF0uZnJlZVRyYW5zZm9ybS51bnBsdWcoKTtcclxuICAgICAgfVxyXG4gICAgICBsZXQgYmJveCA9IHNlbGVjdEl0ZW1BcnJheVswXS5nZXRCQm94KCk7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5jaGFuZ2VGcmVlVHJhbnNmb3JtKFxyXG4gICAgICAgIHNlbGVjdEl0ZW1BcnJheVswXSxcclxuICAgICAgICBiYm94LndpZHRoLFxyXG4gICAgICAgIGJib3guaGVpZ2h0XHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IGNoaWxkUmVjdCA9IHNlbGVjdEl0ZW1BcnJheVswXS5zZWxlY3QoXCJyZWN0XCIpO1xyXG4gICAgICBfdGVtcGxhdGVNb2Quc2hvd0ZpZWxkQXR0cmlidXRlKGNoaWxkUmVjdC5hdHRyKFwiaWRcIikpO1xyXG4gICAgICB0ZW1wR05ldy5yZW1vdmUoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHNlbGVjdEl0ZW1BcnJheS5sZW5ndGggPCAxKSB7XHJcbiAgICAgIHRlbXBHTmV3LnJlbW92ZSgpO1xyXG4gICAgICBfdGVtcGxhdGVNb2QuaGlkZUZpZWxkQXR0cmlidXRlKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciBmaWVsZExpc3QgPSBbXTtcclxuICAgIHNlbGVjdEl0ZW1BcnJheS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICBpZiAoIVV0aWxzLmlzRW1wdHlPYmplY3QoZWwuZnJlZVRyYW5zZm9ybSkpIHtcclxuICAgICAgICBlbC5mcmVlVHJhbnNmb3JtLnVucGx1ZygpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBjaGlsZFJlY3QgPSBlbC5zZWxlY3QoXCJyZWN0XCIpO1xyXG4gICAgICBmaWVsZExpc3QucHVzaChfdGVtcGxhdGVNb2QuZmllbGREaWN0aW9uYXJ5W2NoaWxkUmVjdC5hdHRyKFwiaWRcIildKTtcclxuICAgICAgdGVtcEdOZXcuYXBwZW5kKGVsKTtcclxuICAgIH0pO1xyXG4gICAgX3RlbXBsYXRlTW9kLnNob3dGaWVsZExpc3RBdHRyaWJ1dGUoZmllbGRMaXN0KTtcclxuICAgIGlmICghVXRpbHMuaXNFbXB0eU9iamVjdCh0ZW1wR05ldy5mcmVlVHJhbnNmb3JtKSkge1xyXG4gICAgICB0ZW1wR05ldy5mcmVlVHJhbnNmb3JtLnVucGx1ZygpO1xyXG4gICAgfVxyXG4gICAgX3RlbXBsYXRlTW9kLmNhbGNUZW1wbGF0ZUJvdW5kYXJ5KFxyXG4gICAgICB0ZW1wR05ldy5nZXRCQm94KCkud2lkdGgsXHJcbiAgICAgIHRlbXBHTmV3LmdldEJCb3goKS5oZWlnaHRcclxuICAgICk7XHJcbiAgICB2YXIgdGVtcEdGdCA9IF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzLmZyZWVUcmFuc2Zvcm0oXHJcbiAgICAgIHRlbXBHTmV3LFxyXG4gICAgICB7XHJcbiAgICAgICAgc25hcDogeyByb3RhdGU6IDEgfSxcclxuICAgICAgICBzaXplOiA0LFxyXG4gICAgICAgIGRyYXc6IFwiYmJveFwiLFxyXG4gICAgICAgIGJvdW5kYXJ5OiBfdGVtcGxhdGVNb2QucGFnZUJvdW5kaW5nQm94LFxyXG4gICAgICB9LFxyXG4gICAgICBmdW5jdGlvbiAoZnQsIGV2ZW50cykge1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC50bXBHcm91cEZ0RXZlbnQoZXZlbnRzWzBdKTtcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIHRlbXBHRnQuc2V0T3B0cyh7IHJvdGF0ZTogZmFsc2UsIHNjYWxlOiBmYWxzZSB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBjcmVhdGVGaWVsZFxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNjcmVhdGVGaWVsZFxyXG4gICAqIEBkZXNjcmlwdGlvbiDsgqzsnbTrk5wg7ZWE65Oc66W8IOyDneyEse2VnOuLpC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlICDtlYTrk5zsnZgg7YOA7J6FXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IG1vdXNlUGFnZVggICDrp4jsmrDsiqTsnZggeOyijO2RnFxyXG4gICAqIEBwYXJhbSB7TnVtYmVyIH0gbW91c2VQYWdlWSAgIOuniOyasOyKpOydmCB57KKM7ZGcXHJcbiAgICogQHJldHVybiB7T2JqZWN0fSBmaWVsZEdyb3VwIFNWR+ydmCBHcm91cCBPYmplY3RcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgY3JlYXRlRmllbGQodHlwZSwgbW91c2VQYWdlWCwgbW91c2VQYWdlWSkge1xyXG4gICAgdmFyIG1haW5Hcm91cCA9IF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzLnNlbGVjdChcclxuICAgICAgXCIjXCIgKyBDT05TVEFOVFMuTUFJTl9HUk9VUF9OQU1FXHJcbiAgICApO1xyXG5cclxuICAgIGNvbnN0IHZpZXdlcjEgPSBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiICNcIiArIENPTlNUQU5UUy5URU1QTEFURV9QREZfVklFV0VSXHJcbiAgICApO1xyXG4gICAgY29uc3Qgdmlld2VyQm91bmRpbmdSZWN0ID0gdmlld2VyMS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGNvbnN0IG0xID0gX3RlbXBsYXRlTW9kLm1haW5DYW52YXMudHJhbnNmb3JtKCkuZGlmZk1hdHJpeC5pbnZlcnQoKTtcclxuICAgIGNvbnN0IGZpZWxkWCA9IG0xLngoXHJcbiAgICAgIG1vdXNlUGFnZVggLSB2aWV3ZXJCb3VuZGluZ1JlY3QubGVmdCxcclxuICAgICAgbW91c2VQYWdlWSAtIHZpZXdlckJvdW5kaW5nUmVjdC50b3BcclxuICAgICk7XHJcbiAgICBjb25zdCBmaWVsZFkgPSBtMS55KFxyXG4gICAgICBtb3VzZVBhZ2VYIC0gdmlld2VyQm91bmRpbmdSZWN0LmxlZnQsXHJcbiAgICAgIG1vdXNlUGFnZVkgLSB2aWV3ZXJCb3VuZGluZ1JlY3QudG9wXHJcbiAgICApO1xyXG4gICAgbGV0IGZpZWxkID0gX3RlbXBsYXRlTW9kLmNyZWF0ZUZpZWxkT2JqZWN0KFxyXG4gICAgICB0eXBlLFxyXG4gICAgICBmaWVsZFgsXHJcbiAgICAgIGZpZWxkWSxcclxuICAgICAgX3RlbXBsYXRlTW9kLmdldFBkZlBhZ2VGcm9tU3ZnUG9zKGZpZWxkWCwgZmllbGRZKVxyXG4gICAgKTtcclxuICAgIF90ZW1wbGF0ZU1vZC5zZWxlY3RBZGRGaWVsZFR5cGUgPSBcIlwiO1xyXG4gICAgbGV0IG9zdCA9IF90ZW1wbGF0ZU1vZC5jb21wdXRlUGFnZU9mZnNldCgpO1xyXG4gICAgbGV0IHBhZ2VCb3JkZXJXaWR0aCA9IF90ZW1wbGF0ZU1vZC5nZXRQYWdlQm9yZGVyV2lkdGgoZmllbGQucGFnZU5vKTtcclxuXHJcbiAgICBsZXQgeCA9IG1vdXNlUGFnZVggLSBvc3QubGVmdCAtIHBhZ2VCb3JkZXJXaWR0aC5sZWZ0O1xyXG4gICAgbGV0IHkgPSBtb3VzZVBhZ2VZIC0gb3N0LnRvcCAtIHBhZ2VCb3JkZXJXaWR0aC50b3A7XHJcbiAgICBsZXQgZmllbGRHcm91cCA9IGZpZWxkLmdldFNWR0ZpZWxkT2JqZWN0KFxyXG4gICAgICBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcyxcclxuICAgICAgbWFpbkdyb3VwLFxyXG4gICAgICBfdGVtcGxhdGVNb2QucGRmVmlld2VyLmN1cnJlbnRTY2FsZSxcclxuICAgICAgX3RlbXBsYXRlTW9kLm93bmVyTm9kZSxcclxuICAgICAgX3RlbXBsYXRlTW9kLnJlbW92ZURyYWdPdmVyR3JvdXAsXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5jaGFuZ2VGaWVsZFZhbHVlRXZlbnQsXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5jaGFuZ2VGcmVlVHJhbnNmb3JtLFxyXG4gICAgICBcIiM4MjgyODJcIlxyXG4gICAgKTtcclxuICAgIHZhciBncm91cEJCb3ggPSBmaWVsZEdyb3VwLmdldEJCb3goKTtcclxuICAgIGNvbnN0IHZpZXdwb3J0ID0gX3RlbXBsYXRlTW9kLnBkZlZpZXdlci5fcGFnZXNbZmllbGQucGFnZU5vIC0gMV0udmlld3BvcnQ7XHJcbiAgICBsZXQgcGRmUG9pc2lvbiA9IHZpZXdwb3J0LmNvbnZlcnRUb1BkZlBvaW50KHgsIHkpO1xyXG4gICAgbGV0IHBkZlBvaXNpb24yID0gdmlld3BvcnQuY29udmVydFRvUGRmUG9pbnQoXHJcbiAgICAgIHggKyBncm91cEJCb3gud2lkdGgsXHJcbiAgICAgIHkgKyBncm91cEJCb3guaGVpZ2h0XHJcbiAgICApO1xyXG4gICAgZmllbGQucGRmWCA9IHBkZlBvaXNpb25bMF07XHJcbiAgICBmaWVsZC5wZGZZID0gcGRmUG9pc2lvblsxXTtcclxuICAgIGZpZWxkLnBkZlgyID0gcGRmUG9pc2lvbjJbMF07XHJcbiAgICBmaWVsZC5wZGZZMiA9IHBkZlBvaXNpb24yWzFdO1xyXG4gICAgX3RlbXBsYXRlTW9kLmZpZWxkRGljdGlvbmFyeVtmaWVsZC5pZF0gPSBmaWVsZDtcclxuICAgIGlmIChVdGlscy5nZXRVc2VySW5mb09wdHNMaXN0Q291bnQoKSA9PT0gMSkge1xyXG4gICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoX3RlbXBsYXRlTW9kLnRlbXBsYXRlVXNlckZpZWxkSW5mbyk7XHJcbiAgICAgIGZpZWxkLm1fb3duZXJJZCA9IF90ZW1wbGF0ZU1vZC50ZW1wbGF0ZVVzZXJGaWVsZEluZm9ba2V5c1swXV0udXNlclVVSUQ7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5yZWZyZXNoZm9ybWVyTGlzdChmaWVsZCk7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5idWlsZEZpZWxkZm9ybWVyTGlzdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIF90ZW1wbGF0ZU1vZC5jaGFuZ2VGcmVlVHJhbnNmb3JtKGZpZWxkR3JvdXAsIGZpZWxkLndpZHRoLCBmaWVsZC5oZWlnaHQpO1xyXG4gICAgX3RlbXBsYXRlTW9kLnNob3dBc3Rlcmlza0RpdihcclxuICAgICAgZmllbGQuaWQsXHJcbiAgICAgIGZpZWxkLnJlcXVpcmVkID09PSBcInRydWVcIixcclxuICAgICAgZmllbGQueCxcclxuICAgICAgZmllbGQueSxcclxuICAgICAgZmllbGQuaGVpZ2h0XHJcbiAgICApO1xyXG4gICAgdmFyIGpzb25EYXRhID0gSlNPTi5zdHJpbmdpZnkoZmllbGQpO1xyXG4gICAgX3RlbXBsYXRlTW9kLmFkZFVuZG9SZWRvQWN0KFxyXG4gICAgICBDT05TVEFOVFMuQ1JFQVRFX0ZJRUxEX0FDVElPTixcclxuICAgICAganNvbkRhdGEsXHJcbiAgICAgIGpzb25EYXRhXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIGZpZWxkR3JvdXA7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gY3JlYXRlRmllbGRPYmplY3RcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjY3JlYXRlRmllbGRPYmplY3RcclxuICAgKiBAZGVzY3JpcHRpb24g7IKs7J2065OcIEZpbGVkIE9iamVjdOydmCDsnbjsiqTthLTsiqTrpbwg7IOd7ISx7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUg7ZWE65Oc7J2YIO2DgOyehVxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB4ICAgICB47KKM7ZGcXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHkgICAgIHnsooztkZxcclxuICAgKiBAcmV0dXJuIHtPYmplY3R9IEZpZWxkIE9iamVjdFxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBjcmVhdGVGaWVsZE9iamVjdCh0eXBlLCB4LCB5LCBwYWdlTnVtID0gdW5kZWZpbmVkKSB7XHJcbiAgICBsZXQgZmllbGRJZCA9IF90ZW1wbGF0ZU1vZC5nZW5lcmF0ZUZpZWxkSWQodHlwZSk7XHJcbiAgICBsZXQgcGFnZU5vID0gcGFnZU51bTtcclxuICAgIGlmIChwYWdlTnVtID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgcGFnZU5vID0gX3RlbXBsYXRlTW9kLnBkZlZpZXdlci5jdXJyZW50UGFnZU51bWJlcjtcclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKHBhZ2VObyk7XHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgY2FzZSBcIlRleHRGaWVsZFwiOiB7XHJcbiAgICAgICAgbGV0IHRleHRGaWVsZCA9IG5ldyBUZXh0RmllbGQoZmllbGRJZCwgcGFnZU5vLCB4LCB5KTtcclxuICAgICAgICByZXR1cm4gdGV4dEZpZWxkO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgXCJMYWJlbEZpZWxkXCI6IHtcclxuICAgICAgICBsZXQgbGFiZWxGaWVsZCA9IG5ldyBMYWJlbEZpZWxkKGZpZWxkSWQsIHBhZ2VObywgeCwgeSk7XHJcbiAgICAgICAgcmV0dXJuIGxhYmVsRmllbGQ7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIlNpZ25GaWVsZFwiOiB7XHJcbiAgICAgICAgbGV0IHNpZ25GaWVsZCA9IG5ldyBTaWduRmllbGQoXHJcbiAgICAgICAgICBmaWVsZElkLFxyXG4gICAgICAgICAgcGFnZU5vLFxyXG4gICAgICAgICAgeCxcclxuICAgICAgICAgIHksXHJcbiAgICAgICAgICBfdGVtcGxhdGVNb2QudXNlRHJhd1NpZ24sXHJcbiAgICAgICAgICBfdGVtcGxhdGVNb2QudXNlSW1hZ2VTaWduLFxyXG4gICAgICAgICAgX3RlbXBsYXRlTW9kLnVzZVJlZ1NpZ25cclxuICAgICAgICApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBzaWduRmllbGQ7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIk51bWJlckZpZWxkXCI6IHtcclxuICAgICAgICBsZXQgbnVtYmVyRmllbGQgPSBuZXcgTnVtYmVyRmllbGQoZmllbGRJZCwgcGFnZU5vLCB4LCB5KTtcclxuICAgICAgICByZXR1cm4gbnVtYmVyRmllbGQ7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIkRhdGVGaWVsZFwiOiB7XHJcbiAgICAgICAgbGV0IGRhdGVGaWVsZCA9IG5ldyBEYXRlRmllbGQoZmllbGRJZCwgcGFnZU5vLCB4LCB5KTtcclxuICAgICAgICByZXR1cm4gZGF0ZUZpZWxkO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgXCJJbWFnZUZpZWxkXCI6IHtcclxuICAgICAgICBsZXQgaW1hZ2VGaWVsZCA9IG5ldyBJbWFnZUZpZWxkKGZpZWxkSWQsIHBhZ2VObywgeCwgeSk7XHJcbiAgICAgICAgcmV0dXJuIGltYWdlRmllbGQ7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIk11bHRpTGluZVRleHRGaWVsZFwiOiB7XHJcbiAgICAgICAgbGV0IG11bHRpbGluZVRleHRGaWVsZCA9IG5ldyBNdWx0aUxpbmVUZXh0RmllbGQoZmllbGRJZCwgcGFnZU5vLCB4LCB5KTtcclxuICAgICAgICByZXR1cm4gbXVsdGlsaW5lVGV4dEZpZWxkO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgXCJDaGVja2JveEZpZWxkXCI6IHtcclxuICAgICAgICBsZXQgY2hlY2tib3hGaWVsZCA9IG5ldyBDaGVja2JveEZpZWxkKGZpZWxkSWQsIHBhZ2VObywgeCwgeSk7XHJcbiAgICAgICAgcmV0dXJuIGNoZWNrYm94RmllbGQ7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIlJhZGlvRmllbGRcIjoge1xyXG4gICAgICAgIGxldCByYWRpb0ZpZWxkID0gbmV3IFJhZGlvRmllbGQoZmllbGRJZCwgcGFnZU5vLCB4LCB5KTtcclxuICAgICAgICByZXR1cm4gcmFkaW9GaWVsZDtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwiQ29tYm9ib3hGaWVsZFwiOiB7XHJcbiAgICAgICAgbGV0IGNvbWJvYm94RmllbGQgPSBuZXcgQ29tYm9ib3hGaWVsZChmaWVsZElkLCBwYWdlTm8sIHgsIHkpO1xyXG4gICAgICAgIHJldHVybiBjb21ib2JveEZpZWxkO1xyXG4gICAgICB9XHJcbiAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGNyZWF0ZVRlbXBsYXRlUmVjdFxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNjcmVhdGVUZW1wbGF0ZVJlY3RcclxuICAgKiBAZGVzY3JpcHRpb24gUERG7JyE7JeQIOyYrOudvOqwgOuKlCBUZW1wbGF0ZSDroIjsnbTslrTsl5Ag7ZWE65Oc66W8IOunjOuTpOq4sOychO2VtCDsnoTsi5wgRGl266W8IOunjOuToOuLpC5cclxuICAgKlxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBjcmVhdGVUZW1wbGF0ZVJlY3QoKSB7XHJcbiAgICB2YXIgdGVtcGxhdGVMYXllciA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIgI1wiICsgQ09OU1RBTlRTLlRFTVBMQVRFX0xBWUVSX05BTUVcclxuICAgICk7XHJcbiAgICB0ZW1wbGF0ZUxheWVyLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICBsZXQgdGVtcGxhdGVSZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIHRlbXBsYXRlUmVjdC5pZCA9IENPTlNUQU5UUy5URU1QTEFURV9MQVlFUl9SRUNUX05BTUU7XHJcbiAgICB0ZW1wbGF0ZVJlY3Quc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XHJcbiAgICB0ZW1wbGF0ZVJlY3Quc3R5bGUubGVmdCA9IFwiMHB4XCI7XHJcbiAgICB0ZW1wbGF0ZVJlY3Quc3R5bGUudG9wID0gXCIwcHhcIjtcclxuICAgIHZhciBzaXplID0gX3RlbXBsYXRlTW9kLmdldEZpZWxkU2l6ZShfdGVtcGxhdGVNb2Quc2VsZWN0QWRkRmllbGRUeXBlKTtcclxuICAgIHZhciBjdXJTY2FsZSA9IF90ZW1wbGF0ZU1vZC5wZGZWaWV3ZXIuY3VycmVudFNjYWxlO1xyXG4gICAgdGVtcGxhdGVSZWN0LnN0eWxlLndpZHRoID0gc2l6ZS53ICogY3VyU2NhbGUgKyBcInB4XCI7XHJcbiAgICB0ZW1wbGF0ZVJlY3Quc3R5bGUuaGVpZ2h0ID0gc2l6ZS5oICogY3VyU2NhbGUgKyBcInB4XCI7XHJcbiAgICB0ZW1wbGF0ZVJlY3Quc3R5bGUuYmFja2dyb3VuZCA9IFwibm9uZVwiO1xyXG4gICAgdGVtcGxhdGVSZWN0LnN0eWxlLmJvcmRlciA9IFwiMXB4IHNvbGlkIHJlZFwiO1xyXG4gICAgX3RlbXBsYXRlTW9kLm93bmVyTm9kZVxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIiAjXCIgKyBDT05TVEFOVFMuVEVNUExBVEVfTEFZRVJfTkFNRSlcclxuICAgICAgLmFwcGVuZENoaWxkKHRlbXBsYXRlUmVjdCk7XHJcblxyXG4gICAgdGVtcGxhdGVMYXllci5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICBcIm1vdXNlbW92ZVwiLFxyXG4gICAgICBfdGVtcGxhdGVNb2QudGVtcGxhdGVNb3VzZU1vdmVFdmVudCxcclxuICAgICAgdHJ1ZVxyXG4gICAgKTtcclxuICAgIHRlbXBsYXRlTGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgXCJtb3VzZXVwXCIsXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC50ZW1wbGF0ZU1vdXNlVXBFdmVudCxcclxuICAgICAgdHJ1ZVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBkcmFnZW5kRnVuY1xyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNkcmFnZW5kRnVuY1xyXG4gICAqIEBkZXNjcmlwdGlvbiBTVkfrgrTsl5DshJwgRHJhZ+qwgCDrgZ3rgqzsnYTrloTsnZgg7ZuE7LKY66as66W8IO2VnOuLpC4gLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgZXZlbnQgb2JqZWN0XHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIGRyYWdlbmRGdW5jKGV2ZW50KSB7XHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIGlmICghX3RlbXBsYXRlTW9kLmRyYWdTdGFydCkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICB2YXIgYm9yZGVyID0gX3RlbXBsYXRlTW9kLmRyYWdCb3guZ2V0QkJveCgpO1xyXG4gICAgX3RlbXBsYXRlTW9kLmRyYWdCb3gucmVtb3ZlKCk7XHJcbiAgICBfdGVtcGxhdGVNb2QuZHJhZ1N0YXJ0ID0gZmFsc2U7XHJcbiAgICBfdGVtcGxhdGVNb2QucmVtb3ZlRHJhZ092ZXJHcm91cCgpO1xyXG4gICAgX3RlbXBsYXRlTW9kLmNyZWF0ZURyYWdPdmVyR3JvdXAoYm9yZGVyKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBkcmFnbW92ZUZ1bmNcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZHJhZ21vdmVGdW5jXHJcbiAgICogQGRlc2NyaXB0aW9uIFNWR+uCtOyXkOyEnCDrk5zrnpjqt7gg7KSR7J28IOuVjCDsspjrpqzrpbwg7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGR4ICDsi5zsnpHsooztkZzroZwg67aA7YSwIHjrp4ztgbwg7JuA7KeB7J24IO2BrOq4sFxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkeSAgIOyLnOyekeyijO2RnOuhnCDrtoDthLAgeeunjO2BvCDsm4Dsp4Hsnbgg7YGs6riwXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHggICDrp4jsmrDsiqTsnZggeOyijO2RnCDsgqzsmqntlZjsp4Ag7JWK7J2MXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHkgICDrp4jsmrDsiqTsnZggeeyijO2RnCDsgqzsmqntlZjsp4Ag7JWK7J2MXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50ICAgICBFdmVudCBPYmplY3RcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgZHJhZ21vdmVGdW5jKGR4LCBkeSwgeCwgeSwgZXZlbnQpIHtcclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgaWYgKCFfdGVtcGxhdGVNb2QuZHJhZ1N0YXJ0KSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHZhciB4b2Zmc2V0ID0gMCxcclxuICAgICAgeW9mZnNldCA9IDA7XHJcblxyXG4gICAgaWYgKGR4IDwgMCkge1xyXG4gICAgICB4b2Zmc2V0ID0gZHg7XHJcbiAgICAgIGR4ID0gLTEgKiBkeDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZHkgPCAwKSB7XHJcbiAgICAgIHlvZmZzZXQgPSBkeTtcclxuICAgICAgZHkgPSAtMSAqIGR5O1xyXG4gICAgfVxyXG5cclxuICAgIF90ZW1wbGF0ZU1vZC5kcmFnQm94LnRyYW5zZm9ybShcIlRcIiArIHhvZmZzZXQgKyBcIixcIiArIHlvZmZzZXQpO1xyXG4gICAgX3RlbXBsYXRlTW9kLmRyYWdCb3guYXR0cihcIndpZHRoXCIsIGR4KTtcclxuICAgIF90ZW1wbGF0ZU1vZC5kcmFnQm94LmF0dHIoXCJoZWlnaHRcIiwgZHkpO1xyXG4gICAgX3RlbXBsYXRlTW9kLmRyYWdCb3guYXR0cihcImZpbGxcIiwgXCJub25lXCIpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGRyYWdzdGFydEZ1bmNcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZHJhZ3N0YXJ0RnVuY1xyXG4gICAqIEBkZXNjcmlwdGlvbiBTVkfrgrTsl5DshJwgZHJhZ+ulvCDsi5zsnpHtlaDrlYwg7LKY66as7ZWY64qUIOuplOyGjOuTnFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHggICDrp4jsmrDsiqTsnZggeOyijO2RnCDsgqzsmqntlZjsp4Ag7JWK7J2MXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHkgICDrp4jsmrDsiqTsnZggeeyijO2RnCDsgqzsmqntlZjsp4Ag7JWK7J2MXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50ICAgICBFdmVudCBPYmplY3RcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgZHJhZ3N0YXJ0RnVuYyh4LCB5LCBldmVudCkge1xyXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAvL2lmIHBhdGggb3IgY2lyY2xlIHdlcmUgY2xpY2tlZCBkb24ndCBkcmF3IGJveFxyXG4gICAgaWYgKFxyXG4gICAgICAhKGV2ZW50LnRhcmdldC5ub2RlTmFtZSA9PT0gXCJzdmdcIiB8fCBldmVudC50YXJnZXQubm9kZU5hbWUgPT09IFwicmVjdFwiKVxyXG4gICAgKSB7XHJcbiAgICAgIGlmIChfdGVtcGxhdGVNb2QuZHJhZ0JveCkge1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5kcmFnQm94LnJlbW92ZSgpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmIChldmVudC50YXJnZXQubm9kZU5hbWUgPT09IFwicmVjdFwiKSB7XHJcbiAgICAgIHZhciBkcmFnU3RvcCA9IGZhbHNlO1xyXG4gICAgICBpZiAoIVV0aWxzLmlzU3RyaW5nRW1wdHkoZXZlbnQuc3JjRWxlbWVudC5pZCkpIHtcclxuICAgICAgICB2YXIgb2JqMSA9IF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzXHJcbiAgICAgICAgICAuc2VsZWN0KFwiI1wiICsgZXZlbnQuc3JjRWxlbWVudC5pZClcclxuICAgICAgICAgIC5wYXJlbnQoKTtcclxuICAgICAgICBpZiAob2JqMSkge1xyXG4gICAgICAgICAgZHJhZ1N0b3AgPVxyXG4gICAgICAgICAgICAhVXRpbHMuaXNFbXB0eU9iamVjdChvYmoxLmZyZWVUcmFuc2Zvcm0pIHx8XHJcbiAgICAgICAgICAgIG9iajEucGFyZW50KCkuYXR0cihcImlkXCIpID09PSBDT05TVEFOVFMuRFJBR19CT1hfTkFNRTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKFxyXG4gICAgICAgIChldmVudC50YXJnZXQgIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdCAhPT0gbnVsbCAmJlxyXG4gICAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdCAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0Lmxlbmd0aCA+IDAgJiZcclxuICAgICAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJmdGhhbmRsZVwiKSkgfHxcclxuICAgICAgICBkcmFnU3RvcFxyXG4gICAgICApIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBfdGVtcGxhdGVNb2QuZHJhZ0JveCAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICBfdGVtcGxhdGVNb2QuZHJhZ0JveCAhPT0gbnVsbFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgX3RlbXBsYXRlTW9kLmRyYWdCb3gucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgX3RlbXBsYXRlTW9kLmRyYWdTdGFydCA9IHRydWU7XHJcbiAgICB2YXIgdmlld2VyMSA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIgI1wiICsgQ09OU1RBTlRTLlRFTVBMQVRFX1BERl9WSUVXRVJcclxuICAgICk7XHJcbiAgICB2YXIgYnIgPSB2aWV3ZXIxLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgdmFyIG1haW5DYXZuYXNNYXRyaXggPSBfdGVtcGxhdGVNb2QubWFpbkNhbnZhc1xyXG4gICAgICAudHJhbnNmb3JtKClcclxuICAgICAgLmRpZmZNYXRyaXguaW52ZXJ0KCk7XHJcbiAgICB2YXIgZ3JhZ0JveFggPSBtYWluQ2F2bmFzTWF0cml4LngoXHJcbiAgICAgIGV2ZW50LnBhZ2VYIC0gYnIubGVmdCxcclxuICAgICAgZXZlbnQucGFnZVkgLSBici50b3BcclxuICAgICk7XHJcbiAgICB2YXIgZ3JhZ0JveFkgPSBtYWluQ2F2bmFzTWF0cml4LnkoXHJcbiAgICAgIGV2ZW50LnBhZ2VYIC0gYnIubGVmdCxcclxuICAgICAgZXZlbnQucGFnZVkgLSBici50b3BcclxuICAgICk7XHJcbiAgICBfdGVtcGxhdGVNb2QuZHJhZ0JveCA9IF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzXHJcbiAgICAgIC5yZWN0KGdyYWdCb3hYLCBncmFnQm94WSwgMCwgMClcclxuICAgICAgLmF0dHIoXCJzdHJva2VcIiwgXCJibGFja1wiKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBleHBvcnRGaWVsZERhdGFcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZXhwb3J0RmllbGREYXRhXHJcbiAgICogQGRlc2NyaXB0aW9uIEZpZWxk7KCV67O066W8IEpTT07tmJXsi53snLzroZwg66as7YS07ZWY64qUIOuplOyGjOuTnFxyXG4gICAqXHJcbiAgICogQHJldHVybiB7U3RyaW5nfSB7IGZvcm1UZW1wbGF0ZU5hbWU6IFwiXCIsIHBhZ2VzOiBbIHtkYXRhLi4uLCBmaWVsZHM6IFtdfV0gfVxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBleHBvcnRGaWVsZERhdGEoKSB7XHJcbiAgICB2YXIgdGVtcGxhdGVUaXRsZSA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIgLkVkaXRvci1Ub29sYmFyLUdyb3VwLkNlbnRlciA+IHNwYW4gXCJcclxuICAgICk7XHJcbiAgICB0ZW1wbGF0ZVRpdGxlLnRleHRDb250ZW50O1xyXG4gICAgbGV0IHRlbXBsYXRlRGF0YSA9IG5ldyBUZW1wbGF0ZURhdGEodGVtcGxhdGVUaXRsZS50ZXh0Q29udGVudCk7XHJcblxyXG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKF90ZW1wbGF0ZU1vZC50ZW1wbGF0ZVVzZXJGaWVsZEluZm8pO1xyXG4gICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgY29uc3QgdXNlckluZm8gPSBfdGVtcGxhdGVNb2QudGVtcGxhdGVVc2VyRmllbGRJbmZvW2tleV07XHJcbiAgICAgIGxldCB0ZW1wbGF0ZURhdGFPd25lciA9XHJcbiAgICAgICAgVGVtcGxhdGVEYXRhT3duZXIuY2xvbmVUZW1wbGF0ZURhdGFPd25lck9iamVjdCh1c2VySW5mbyk7XHJcbiAgICAgIGZvciAoXHJcbiAgICAgICAgdmFyIHBhZ2VObyA9IDA7XHJcbiAgICAgICAgcGFnZU5vIDwgX3RlbXBsYXRlTW9kLnBkZlZpZXdlci5wYWdlc0NvdW50O1xyXG4gICAgICAgICsrcGFnZU5vXHJcbiAgICAgICkge1xyXG4gICAgICAgIGxldCB0ZW1wbGF0ZURhdGFQYWdlID0gbmV3IFRlbXBsYXRlRGF0YVBhZ2UocGFnZU5vKTtcclxuXHJcbiAgICAgICAgY29uc3QgZmllbGRLZXlzID0gT2JqZWN0LmtleXMoX3RlbXBsYXRlTW9kLmZpZWxkRGljdGlvbmFyeSk7XHJcbiAgICAgICAgZmllbGRLZXlzLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkS2V5KSB7XHJcbiAgICAgICAgICBjb25zdCBmaWVsZCA9IF90ZW1wbGF0ZU1vZC5maWVsZERpY3Rpb25hcnlbZmllbGRLZXldO1xyXG4gICAgICAgICAgaWYgKGZpZWxkLmlzUmVtb3ZlZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAocGFnZU5vICE9PSBmaWVsZC5wYWdlTm8gLSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChVdGlscy5pc1N0cmluZ0VtcHR5KGZpZWxkLm93bmVySWQpICYmIHVzZXJJbmZvLmlzRm9ybWVyID09PSBcIllcIikge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZURhdGFQYWdlLnB1c2hGaWVsZChmaWVsZCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChmaWVsZC5vd25lcklkICE9PSBrZXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGVtcGxhdGVEYXRhUGFnZS5wdXNoRmllbGQoZmllbGQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRlbXBsYXRlRGF0YU93bmVyLnB1c2hQYWdlKHRlbXBsYXRlRGF0YVBhZ2UpO1xyXG4gICAgICB9XHJcbiAgICAgIHRlbXBsYXRlRGF0YS5wdXNoT3duZXIodGVtcGxhdGVEYXRhT3duZXIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRlbXBsYXRlRGF0YSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gZmllbGREZWxldGVCdG5DbGlja2VkXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2ZpZWxkRGVsZXRlQnRuQ2xpY2tlZFxyXG4gICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zsnZgg7IKt7KCcIOuyhO2KvOydhCDriIzroIDsnYTrlYwg64+Z7J6R7ZWY64qUIOuplOyGjOuTnC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBldnQgICAgRXZlbnQgT2JqZWN0XHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIGZpZWxkRGVsZXRlQnRuQ2xpY2tlZChldnQpIHtcclxuICAgIF90ZW1wbGF0ZU1vZC5yZW1vdmVTZWxlY3RlZEZpZWxkKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gZmllbGRGdEV2ZW50XHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2ZpZWxkRnRFdmVudFxyXG4gICAqIEBkZXNjcmlwdGlvbiBEZWZhdWx0IFZhbHVlIOumrOyKpO2KuOygleuztOulvCDshKTsoJUgLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZSAgIOydtOuypO2KuCDsooXrpZhcclxuICAgKiBAcGFyYW0ge09iamVjdH0gZmllbGQgIFNWR+ydmCBGaWVsZCBHcm91cCBPYmplY3RcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgZmllbGRGdEV2ZW50KGV2ZW50TmFtZSwgZmllbGQpIHtcclxuICAgIGlmIChldmVudE5hbWUgPT09IFwiZHJhZyBzdGFydFwiIHx8IGV2ZW50TmFtZSA9PT0gXCJhcHBseVwiKSB7XHJcbiAgICAgIC8vaGlkZSBhdHRyXHJcbiAgICAgIGxldCBjaGlsZFJlY3QgPSBmaWVsZC5zZWxlY3QoXCJyZWN0XCIpO1xyXG4gICAgICBsZXQgZmllbGRJZCA9IGNoaWxkUmVjdC5hdHRyKFwiaWRcIik7XHJcbiAgICAgIGlmIChfdGVtcGxhdGVNb2QuaXNGaWVsZERyYWdTdGFydCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5oaWRlRmllbGRBdHRyaWJ1dGUoKTtcclxuICAgICAgICBpZiAoVXRpbHMuaXNTaG93QXN0ZXJpc2tEaXYoX3RlbXBsYXRlTW9kLm93bmVyTm9kZSwgZmllbGRJZCkpIHtcclxuICAgICAgICAgIFV0aWxzLnNob3dBc3Rlcmlza0RpdihfdGVtcGxhdGVNb2Qub3duZXJOb2RlLCBmaWVsZElkLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBfdGVtcGxhdGVNb2QuaXNGaWVsZERyYWdTdGFydCA9IHRydWU7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5oaWRlRmllbGRBdHRyaWJ1dGUoKTtcclxuXHJcbiAgICAgIFV0aWxzLnNob3dBc3Rlcmlza0RpdihfdGVtcGxhdGVNb2Qub3duZXJOb2RlLCBmaWVsZElkLCBmYWxzZSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZXZlbnROYW1lID09PSBcInNjYWxlIGVuZFwiIHx8IGV2ZW50TmFtZSA9PT0gXCJkcmFnIGVuZFwiKSB7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5pc0ZpZWxkRHJhZ1N0YXJ0ID0gZmFsc2U7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5jaGFuZ2VGaWVsZFBvc2l0aW9uKGZpZWxkKTtcclxuICAgICAgX3RlbXBsYXRlTW9kLnNob3dGaWVsZEF0dHJpYnV0ZShcclxuICAgICAgICBfdGVtcGxhdGVNb2QuZ2V0RmllbGRJZEZyb21Hcm91cE5vZGUoZmllbGQpXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gZmllbGRSZXBvc2l0aW9uaW5nXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2ZpZWxkUmVwb3NpdGlvbmluZ1xyXG4gICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zsnZgg7JyE7LmY66W8IOyerOyhsOygle2VnOuLpC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudCAgZXZlbnQgb2JqZWN0XHJcbiAgICogQHBhcmFtIHtCb29sZWFufSBpc0ltcG9ydCAgZmllbGTrpbwg7J6E7Y+s7Yq47ZWY64qU7KeAIOyXrOu2gFxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBmaWVsZFJlcG9zaXRpb25pbmcoZXZlbnQsIGlzSW1wb3J0ID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhfdGVtcGxhdGVNb2QuZmllbGREaWN0aW9uYXJ5KTtcclxuICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgIHZhciBmaWVsZCA9IF90ZW1wbGF0ZU1vZC5maWVsZERpY3Rpb25hcnlba2V5XTtcclxuICAgICAgdmFyIGZpZWxkR3JvdXAgPSBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy5zZWxlY3QoXCIjXCIgKyBmaWVsZC5pZCArIFwiR3JvdXBcIik7XHJcblxyXG4gICAgICB2YXIgZmllbGRSZWN0ID0gZmllbGRHcm91cC5zZWxlY3QoXCJyZWN0XCIpO1xyXG4gICAgICB2YXIgZmllbGRTdmcgPSBmaWVsZEdyb3VwLnNlbGVjdChcInN2Z1wiKTtcclxuICAgICAgdmFyIG9sZFcgPSBmaWVsZC53aWR0aDtcclxuICAgICAgY29uc3QgbmV3UmVjdCA9IF90ZW1wbGF0ZU1vZC5jYWxjRmllbGRQb3N0aW9uKGZpZWxkLCBpc0ltcG9ydCk7XHJcbiAgICAgIHZhciBzY2FsZSA9IG5ld1JlY3Qud2lkdGggLyBvbGRXO1xyXG4gICAgICBmaWVsZFJlY3QuYXR0cihuZXdSZWN0KTtcclxuICAgICAgZmllbGRTdmcuYXR0cihuZXdSZWN0KTtcclxuICAgICAgdmFyIGZpZWxkU3ZnVGV4dCA9IGZpZWxkU3ZnLnNlbGVjdChcInRleHRcIik7XHJcbiAgICAgIGlmIChmaWVsZFN2Z1RleHQpIHtcclxuICAgICAgICBmaWVsZFN2Z1RleHQuYXR0cihcImZvbnQtc2l6ZVwiLCBmaWVsZC5mb250U2l6ZSAqIHNjYWxlICsgXCJweFwiKTtcclxuICAgICAgICBmaWVsZEdyb3VwLnRyYW5zZm9ybShTbmFwLm1hdHJpeCgpLnRvVHJhbnNmb3JtU3RyaW5nKCkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBfdGVtcGxhdGVNb2QuY2hhbmdlRnJlZVRyYW5zZm9ybShcclxuICAgICAgICBmaWVsZEdyb3VwLFxyXG4gICAgICAgIG5ld1JlY3Qud2lkdGgsXHJcbiAgICAgICAgbmV3UmVjdC5oZWlnaHRcclxuICAgICAgKTtcclxuXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5zaG93QXN0ZXJpc2tEaXYoXHJcbiAgICAgICAgZmllbGQuaWQsXHJcbiAgICAgICAgZmllbGQucmVxdWlyZWQgPT09IFwidHJ1ZVwiLFxyXG4gICAgICAgIG5ld1JlY3QueCxcclxuICAgICAgICBuZXdSZWN0LnksXHJcbiAgICAgICAgbmV3UmVjdC5oZWlnaHRcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGdlbmVyYXRlRmllbGRJZFxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNnZW5lcmF0ZUZpZWxkSWRcclxuICAgKiBAZGVzY3JpcHRpb24g7ZWE65Oc7J2YIOydtOumhOydhCDtmITsnqwg7KG07J6s7ZWY64qUIO2VhOuTnOydmCBOb+ykkSBNQVjqsJLsnYQg7LC+7JWE7IScICsx7ZW07IScIOunjOuToOuLpC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIO2VhOuTnOydmCDsooXrpZhcclxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IO2VhOuTnOydmCDsnbTrpoQuXHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIGdlbmVyYXRlRmllbGRJZCh0eXBlKSB7XHJcbiAgICB2YXIgdHlwZUxpc3QgPSBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy5zZWxlY3RBbGwoXHJcbiAgICAgIFwicmVjdFtpZF49J1wiICsgdHlwZSArIFwiJ11cIlxyXG4gICAgKTtcclxuICAgIGlmICh0eXBlTGlzdC5sZW5ndGggPCAxKSB7XHJcbiAgICAgIHJldHVybiB0eXBlICsgMTtcclxuICAgIH1cclxuICAgIGxldCBmaXJzdElkID0gdHlwZUxpc3RbMF0ubm9kZS5pZDtcclxuICAgIGxldCBtYXhOb1N0ciA9IGZpcnN0SWQucmVwbGFjZSh0eXBlLCBcIlwiKTtcclxuICAgIGxldCBtYXhObyA9IHBhcnNlSW50KG1heE5vU3RyKTtcclxuICAgIGZvciAodmFyIHR5cGVJZHggPSAxOyB0eXBlSWR4IDwgdHlwZUxpc3QubGVuZ3RoOyB0eXBlSWR4KyspIHtcclxuICAgICAgbGV0IG9iajEgPSB0eXBlTGlzdFt0eXBlSWR4XTtcclxuICAgICAgbGV0IG9iak5vU3RyID0gb2JqMS5hdHRyKFwiaWRcIikucmVwbGFjZSh0eXBlLCBcIlwiKTtcclxuICAgICAgbGV0IG9iak5vID0gcGFyc2VJbnQob2JqTm9TdHIpO1xyXG4gICAgICBpZiAob2JqTm8gPiBtYXhObykge1xyXG4gICAgICAgIG1heE5vID0gb2JqTm87XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIG1heE5vID0gbWF4Tm8gKyAxO1xyXG4gICAgcmV0dXJuIHR5cGUgKyBtYXhObztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBnZXRDcmVhdGVGaWVsZERlZmF1bHRXaWR0aFxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNnZXRDcmVhdGVGaWVsZERlZmF1bHRXaWR0aFxyXG4gICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zrpbwg66eM65Ok65WMIO2VhOuTnOydmCDshKTsoJXrkJwg6riw67O47YGs6riw66W8IOumrO2EtO2VnOuLpC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlICDtlYTrk5zsnZgg7KKF66WYXHJcbiAgICogQHJldHVybiB7TnVtYmVyfSDtlYTrk5zsnZgg6riw67O4IOqwgOuhnOq4uOydtFxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBnZXRDcmVhdGVGaWVsZERlZmF1bHRXaWR0aCh0eXBlKSB7XHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgY2FzZSBcIlRleHRGaWVsZFwiOiB7XHJcbiAgICAgICAgcmV0dXJuIFRleHRGaWVsZC53aWR0aFZhbHVlKCk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIkxhYmVsRmllbGRcIjoge1xyXG4gICAgICAgIHJldHVybiBMYWJlbEZpZWxkLndpZHRoVmFsdWUoKTtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwiTnVtYmVyRmllbGRcIjoge1xyXG4gICAgICAgIHJldHVybiBOdW1iZXJGaWVsZC53aWR0aFZhbHVlKCk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIkRhdGVGaWVsZFwiOiB7XHJcbiAgICAgICAgcmV0dXJuIERhdGVGaWVsZC53aWR0aFZhbHVlKCk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIlNpZ25GaWVsZFwiOiB7XHJcbiAgICAgICAgcmV0dXJuIFNpZ25GaWVsZC53aWR0aFZhbHVlKCk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIkltYWdlRmllbGRcIjoge1xyXG4gICAgICAgIHJldHVybiBJbWFnZUZpZWxkLndpZHRoVmFsdWUoKTtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwiTXVsdGlMaW5lVGV4dEZpZWxkXCI6IHtcclxuICAgICAgICByZXR1cm4gTXVsdGlMaW5lVGV4dEZpZWxkLndpZHRoVmFsdWUoKTtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwiQ2hlY2tib3hGaWVsZFwiOiB7XHJcbiAgICAgICAgcmV0dXJuIENoZWNrYm94RmllbGQud2lkdGhWYWx1ZSgpO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgXCJSYWRpb0ZpZWxkXCI6IHtcclxuICAgICAgICByZXR1cm4gUmFkaW9GaWVsZC53aWR0aFZhbHVlKCk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIkNvbWJvYm94RmllbGRcIjoge1xyXG4gICAgICAgIHJldHVybiBDb21ib2JveEZpZWxkLndpZHRoVmFsdWUoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGdldER2VGV4dFZhbHVlXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2dldER2VGV4dFZhbHVlXHJcbiAgICogQGRlc2NyaXB0aW9uIERlZmF1bHQgVmFsdWUg7J2YIOydveydhCDsiJgg7J6I64qUIFRleHTqsJLsnYQg67CY7ZmY7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtICB7U3RyaW5nfSB2YWx1ZSDquLDrs7jqsJLsnZggdmFyaWFibGVcclxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IOq4sOuzuOqwkuydmCBUZXh0IOqwklxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBnZXREdlRleHRWYWx1ZSh2YWx1ZSkge1xyXG4gICAgY29uc3QgZHZPcHRzID0gVXRpbHMuZ2V0RFZGaWVsZE9wdHNMaXN0KCk7XHJcbiAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBkdk9wdHMubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICBpZiAoZHZPcHRzW2lkeF0udmFsdWUgPT09IHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIGR2T3B0c1tpZHhdLnRleHQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBcIlwiO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGdldEZpZWxkRnJvbUpzb25cclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZ2V0RmllbGRGcm9tSnNvblxyXG4gICAqIEBkZXNjcmlwdGlvbiBKU09OIO2FjeyKpO2KuOulvCDsnbTsmqntlZjsl6wg7ZWE65Oc7J2YIOyduOyKpO2EtOyKpOulvCDsg53shLHtlZjsl6wg67CY7ZmY7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtICB7U3RyaW5nfSB0eXBlIO2VhOuTnOydmCDsooXrpZhcclxuICAgKiBAcGFyYW0gIHtTdHJpbmd9IGpzb25EYXRhICDtlYTrk5wg642w7J207YSw7J2YIEpTT04g7YWN7Iqk7Yq4XHJcbiAgICogQHJldHVybiBGaWVsZCBPYmplY3Qg7ZWE65Oc7J2YIOyduOyKpO2EtOyKpFxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBnZXRGaWVsZEZyb21Kc29uKHR5cGUsIGpzb25EYXRhKSB7XHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgY2FzZSBcIlNpZ25GaWVsZFwiOiB7XHJcbiAgICAgICAgcmV0dXJuIEJhc2VGaWVsZC5mcm9tSnNvbihuZXcgU2lnbkZpZWxkKCksIGpzb25EYXRhKTtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwiVGV4dEZpZWxkXCI6IHtcclxuICAgICAgICByZXR1cm4gQmFzZUZpZWxkLmZyb21Kc29uKG5ldyBUZXh0RmllbGQoKSwganNvbkRhdGEpO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgXCJMYWJlbEZpZWxkXCI6IHtcclxuICAgICAgICByZXR1cm4gQmFzZUZpZWxkLmZyb21Kc29uKG5ldyBMYWJlbEZpZWxkKCksIGpzb25EYXRhKTtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwiTnVtYmVyRmllbGRcIjoge1xyXG4gICAgICAgIHJldHVybiBCYXNlRmllbGQuZnJvbUpzb24obmV3IE51bWJlckZpZWxkKCksIGpzb25EYXRhKTtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwiRGF0ZUZpZWxkXCI6IHtcclxuICAgICAgICByZXR1cm4gQmFzZUZpZWxkLmZyb21Kc29uKG5ldyBEYXRlRmllbGQoKSwganNvbkRhdGEpO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgXCJJbWFnZUZpZWxkXCI6IHtcclxuICAgICAgICByZXR1cm4gQmFzZUZpZWxkLmZyb21Kc29uKG5ldyBJbWFnZUZpZWxkKCksIGpzb25EYXRhKTtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwiTXVsdGlMaW5lVGV4dEZpZWxkXCI6IHtcclxuICAgICAgICByZXR1cm4gQmFzZUZpZWxkLmZyb21Kc29uKG5ldyBNdWx0aUxpbmVUZXh0RmllbGQoKSwganNvbkRhdGEpO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgXCJDaGVja2JveEZpZWxkXCI6IHtcclxuICAgICAgICByZXR1cm4gQmFzZUZpZWxkLmZyb21Kc29uKG5ldyBDaGVja2JveEZpZWxkKCksIGpzb25EYXRhKTtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwiUmFkaW9GaWVsZFwiOiB7XHJcbiAgICAgICAgcmV0dXJuIEJhc2VGaWVsZC5mcm9tSnNvbihuZXcgUmFkaW9GaWVsZCgpLCBqc29uRGF0YSk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIkNvbWJvYm94RmllbGRcIjoge1xyXG4gICAgICAgIHJldHVybiBCYXNlRmllbGQuZnJvbUpzb24obmV3IENvbWJvYm94RmllbGQoKSwganNvbkRhdGEpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gZ2V0RmllbGRJZEZyb21Hcm91cE5vZGVcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZ2V0RmllbGRJZEZyb21Hcm91cE5vZGVcclxuICAgKiBAZGVzY3JpcHRpb24gU1ZH7J2YIEdyb3Vw7Jik67iM7KCd7Yq466Gc67aA7YSwIO2VhOuTnOydmCBJROulvCDssL7slYTshJwg67CY7ZmY7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtICB7T2JqZWN0fSBmaWVsZEdvcnVwICBTVkfsnZggZ3JvdXAg7Jik67iM7KCd7Yq4XHJcbiAgICogQHJldHVybiB7U3RyaW5nfSDtlYTrk5zsnZggSURcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgZ2V0RmllbGRJZEZyb21Hcm91cE5vZGUoZmllbGRHb3J1cCkge1xyXG4gICAgbGV0IGNoaWxkUmVjdCA9IGZpZWxkR29ydXAuc2VsZWN0KFwicmVjdFwiKTtcclxuICAgIHJldHVybiBjaGlsZFJlY3QuYXR0cihcImlkXCIpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGdldEZpZWxkSnNvbkRhdGFcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZ2V0RmllbGRKc29uRGF0YVxyXG4gICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zsnZgg642w7J207YSw66W8IEpTT04gVGV4dOuhnCDrsJjtmZjtlZzri6QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gIHtTdHJpbmd9IGZpZWxkSWQgRmllbGTsnZggSURcclxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IEpTT04g7YWN7Iqk7Yq4XHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIGdldEZpZWxkSnNvbkRhdGEoZmllbGRJZCkge1xyXG4gICAgdmFyIGZpZWxkID0gX3RlbXBsYXRlTW9kLmZpZWxkRGljdGlvbmFyeVtmaWVsZElkXTtcclxuICAgIHZhciBkYXRhID0gSlNPTi5zdHJpbmdpZnkoZmllbGQpO1xyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gZ2V0RmllbGRTaXplXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2dldEZpZWxkU2l6ZVxyXG4gICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zsnZgg6rCA66GcIOyEuOuhnCDsgqzsnbTspojrpbwg66as7YS0LlxyXG4gICAqXHJcbiAgICogQHBhcmFtICB7U3RyaW5nfSB0eXBlIO2VhOuTnOydmCDsooXrpZhcclxuICAgKiBAcmV0dXJuICB7T2JqZWN0fSB7IHc6ICwgaDogIH0gIGRlZmF1bHQgLSB7IHc6IDE1MCwgaDogNDAgfTtcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgZ2V0RmllbGRTaXplKHR5cGUpIHtcclxuICAgIHZhciBzaXplID0geyB3OiAxNTAsIGg6IDQwIH07XHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgY2FzZSBcIlRleHRGaWVsZFwiOlxyXG4gICAgICBjYXNlIFwiTnVtYmVyRmllbGRcIjpcclxuICAgICAgY2FzZSBcIkRhdGVGaWVsZFwiOlxyXG4gICAgICBjYXNlIFwiTGFiZWxGaWVsZFwiOlxyXG4gICAgICBjYXNlIFwiQ29tYm9ib3hGaWVsZFwiOlxyXG4gICAgICAgIHNpemUgPSB7IHc6IFRleHRGaWVsZC53aWR0aFZhbHVlKCksIGg6IFRleHRGaWVsZC5oZWlnaHRWYWx1ZSgpIH07XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJTaWduRmllbGRcIjpcclxuICAgICAgY2FzZSBcIkltYWdlRmllbGRcIjpcclxuICAgICAgICBzaXplID0geyB3OiBTaWduRmllbGQud2lkdGhWYWx1ZSgpLCBoOiBTaWduRmllbGQuaGVpZ2h0VmFsdWUoKSB9O1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiTXVsdGlMaW5lVGV4dEZpZWxkXCI6XHJcbiAgICAgICAgc2l6ZSA9IHtcclxuICAgICAgICAgIHc6IE11bHRpTGluZVRleHRGaWVsZC53aWR0aFZhbHVlKCksXHJcbiAgICAgICAgICBoOiBNdWx0aUxpbmVUZXh0RmllbGQuaGVpZ2h0VmFsdWUoKSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiQ2hlY2tib3hGaWVsZFwiOlxyXG4gICAgICAgIHNpemUgPSB7XHJcbiAgICAgICAgICB3OiBDaGVja2JveEZpZWxkLndpZHRoVmFsdWUoKSxcclxuICAgICAgICAgIGg6IENoZWNrYm94RmllbGQuaGVpZ2h0VmFsdWUoKSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiUmFkaW9GaWVsZFwiOlxyXG4gICAgICAgIHNpemUgPSB7IHc6IFJhZGlvRmllbGQud2lkdGhWYWx1ZSgpLCBoOiBSYWRpb0ZpZWxkLmhlaWdodFZhbHVlKCkgfTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgIHJldHVybiBzaXplO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGdldFBhZ2VFbGVtZW50XHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2dldFBhZ2VFbGVtZW50XHJcbiAgICogQGRlc2NyaXB0aW9uIFBERiDtjpjsnbTsp4AgRWxlbWVudFxyXG4gICAqXHJcbiAgICogQHBhcmFtICB7TnVtYmVyfSBwYWdlTm8gIFBERiDtjpjsnbTsp4Ag67KI7Zi4XHJcbiAgICogQHJldHVybiB7RWxlbWVudH1cclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgZ2V0UGFnZUVsZW1lbnQocGFnZU5vKSB7XHJcbiAgICBsZXQgcGFnZU51bWJlciA9IHBhZ2VObztcclxuICAgIGlmIChwYWdlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgcGFnZU51bWJlciA9IF90ZW1wbGF0ZU1vZC5wZGZWaWV3ZXIuY3VycmVudFBhZ2VOdW1iZXI7XHJcbiAgICB9XHJcbiAgICBsZXQgcGcgPSBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiICNUZW1wbGF0ZVBERlZpZXdlciBbYXJpYS1sYWJlbD0nUGFnZSBcIiArIHBhZ2VOdW1iZXIgKyBcIiddXCJcclxuICAgICk7XHJcbiAgICByZXR1cm4gcGc7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gZ2V0UGFnZUJvcmRlcldpZHRoXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2dldFBhZ2VCb3JkZXJXaWR0aFxyXG4gICAqIEBkZXNjcmlwdGlvbiBQREYg7Y6Y7J207KeA7J2YIGJvcmRlciBXaWR0aOulvCDrsJjtlZztlZzri6QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0geyBOdW1iZXJ9IHBhZ2VObyAgUERGIO2OmOydtOyngCDrsojtmLhcclxuICAgKiBAcmV0dXJuIHtSZWN0fSBPYmplY3QgeyBsZWZ0OiAsIHRvcDogLCByaWdodDogLCBib3R0b206ICB9XHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIGdldFBhZ2VCb3JkZXJXaWR0aChwYWdlTm8pIHtcclxuICAgIGxldCBwYWdlTnVtYmVyID0gcGFnZU5vO1xyXG4gICAgaWYgKHBhZ2VOdW1iZXIgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBwYWdlTnVtYmVyID0gX3RlbXBsYXRlTW9kLnBkZlZpZXdlci5jdXJyZW50UGFnZU51bWJlcjtcclxuICAgIH1cclxuICAgIGxldCBwZ05vZGUgPSBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiICNUZW1wbGF0ZVBERlZpZXdlciBbYXJpYS1sYWJlbD0nUGFnZSBcIiArIHBhZ2VOdW1iZXIgKyBcIiddXCJcclxuICAgICk7XHJcblxyXG4gICAgbGV0IHBhZ2VDb21wdXRlZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUocGdOb2RlKTtcclxuICAgIGxldCBib3JkZXJUb3BTdHIgPSBwYWdlQ29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKFwiYm9yZGVyLXRvcC13aWR0aFwiKTtcclxuICAgIGxldCBib3JkZXJMZWZ0U3RyID0gcGFnZUNvbXB1dGVkU3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShcImJvcmRlci1sZWZ0LXdpZHRoXCIpO1xyXG4gICAgbGV0IGJvcmRlckJvdHRvbVN0ciA9IHBhZ2VDb21wdXRlZFN0eWxlLmdldFByb3BlcnR5VmFsdWUoXHJcbiAgICAgIFwiYm9yZGVyLWJvdHRvbS13aWR0aFwiXHJcbiAgICApO1xyXG4gICAgbGV0IGJvcmRlclJpZ2h0U3RyID1cclxuICAgICAgcGFnZUNvbXB1dGVkU3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShcImJvcmRlci1yaWdodC13aWR0aFwiKTtcclxuICAgIGxldCBib3JkZXJUb3BXaWR0aCA9IDA7XHJcbiAgICBsZXQgYm9yZGVyTGVmdFdpZHRoID0gMDtcclxuICAgIGxldCBib3JkZXJCb3R0b21XaWR0aCA9IDA7XHJcbiAgICBsZXQgYm9yZGVyUmlnaHRXaWR0aCA9IDA7XHJcbiAgICBpZiAoIVV0aWxzLmlzU3RyaW5nRW1wdHkoYm9yZGVyVG9wU3RyKSkge1xyXG4gICAgICBib3JkZXJUb3BXaWR0aCA9IHBhcnNlSW50KGJvcmRlclRvcFN0ci5yZXBsYWNlKFwicHhcIiwgXCJcIikpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFVdGlscy5pc1N0cmluZ0VtcHR5KGJvcmRlckxlZnRTdHIpKSB7XHJcbiAgICAgIGJvcmRlckxlZnRXaWR0aCA9IHBhcnNlSW50KGJvcmRlckxlZnRTdHIucmVwbGFjZShcInB4XCIsIFwiXCIpKTtcclxuICAgIH1cclxuICAgIGlmICghVXRpbHMuaXNTdHJpbmdFbXB0eShib3JkZXJCb3R0b21TdHIpKSB7XHJcbiAgICAgIGJvcmRlckJvdHRvbVdpZHRoID0gcGFyc2VJbnQoYm9yZGVyQm90dG9tU3RyLnJlcGxhY2UoXCJweFwiLCBcIlwiKSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIVV0aWxzLmlzU3RyaW5nRW1wdHkoYm9yZGVyUmlnaHRTdHIpKSB7XHJcbiAgICAgIGJvcmRlclJpZ2h0V2lkdGggPSBwYXJzZUludChib3JkZXJSaWdodFN0ci5yZXBsYWNlKFwicHhcIiwgXCJcIikpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdG9wOiBib3JkZXJUb3BXaWR0aCxcclxuICAgICAgbGVmdDogYm9yZGVyTGVmdFdpZHRoLFxyXG4gICAgICBib3R0b206IGJvcmRlckJvdHRvbVdpZHRoLFxyXG4gICAgICByaWdodDogYm9yZGVyUmlnaHRXaWR0aCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gZ2V0UGFnZUJvdW5kaW5nQ2xpZW50UmVjdFxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNnZXRQYWdlQm91bmRpbmdDbGllbnRSZWN0XHJcbiAgICogQGRlc2NyaXB0aW9uIFBERiDtjpjsnbTsp4DsnZggQm91bmRpbmcgUmVjdFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHsgTnVtYmVyfSBwYWdlTm8gIFBERiDtjpjsnbTsp4Ag67KI7Zi4XHJcbiAgICogQHJldHVybiB7UmVjdH0gT2JqZWN0IHsgeDogLCB5OiAsIHdpZHRoOiAsIGhlaWdodDogIH1cclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgZ2V0UGFnZUJvdW5kaW5nQ2xpZW50UmVjdChwYWdlTm8pIHtcclxuICAgIGxldCBwYWdlTnVtYmVyID0gcGFnZU5vO1xyXG4gICAgaWYgKHBhZ2VOdW1iZXIgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBwYWdlTnVtYmVyID0gX3RlbXBsYXRlTW9kLnBkZlZpZXdlci5jdXJyZW50UGFnZU51bWJlcjtcclxuICAgIH1cclxuICAgIGxldCBwZyA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIgI1RlbXBsYXRlUERGVmlld2VyIFthcmlhLWxhYmVsPSdQYWdlIFwiICsgcGFnZU51bWJlciArIFwiJ11cIlxyXG4gICAgKTtcclxuICAgIHJldHVybiBwZy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBnZXRQZGZQYWdlRnJvbVN2Z1Bvc1xyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNnZXRQZGZQYWdlRnJvbVN2Z1Bvc1xyXG4gICAqIEBkZXNjcmlwdGlvbiBTVkcg66CI7J207Ja07JeQ7IScIFBERuydmCDtjpjsnbTsp4Ag7JyE7LmY66W8IOqzhOyCsO2VmOyXrCDrpqzthLTtlZzri6QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge051bWJlcn0geCBTVkfsnZggWOyijO2RnFxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB5IFNWR+ydmCBZ7KKM7ZGcXHJcbiAgICogQHJldHVybiB7TnVtYmVyfSBQZGYgUGFnZSBOdW1iZXJcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgZ2V0UGRmUGFnZUZyb21TdmdQb3MoeCwgeSkge1xyXG4gICAgbGV0IGN1cnJlbnRIZWlnaHRTdW0gPSAwO1xyXG4gICAgZm9yIChsZXQgaWR4ID0gMTsgaWR4IDw9IF90ZW1wbGF0ZU1vZC5wZGZWaWV3ZXIucGFnZXNDb3VudDsgKytpZHgpIHtcclxuICAgICAgbGV0IHBhZ2VSZWN0ID0gX3RlbXBsYXRlTW9kLmdldFBhZ2VCb3VuZGluZ0NsaWVudFJlY3QoaWR4KTtcclxuICAgICAgbGV0IHBhZ2VIZWlnaHQgPSBwYWdlUmVjdC5oZWlnaHQ7XHJcbiAgICAgIGN1cnJlbnRIZWlnaHRTdW0gKz0gcGFnZUhlaWdodDtcclxuICAgICAgaWYgKGN1cnJlbnRIZWlnaHRTdW0gPiB5KSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYCR7aWR4fSwgJHtwYWdlSGVpZ2h0fSwgJHtjdXJyZW50SGVpZ2h0U3VtfSwgJHt5fWApO1xyXG4gICAgICAgIHJldHVybiBpZHg7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiAxO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGhpZGVBbGxSZXNpemVIYW5kbGVzXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2hpZGVBbGxSZXNpemVIYW5kbGVzXHJcbiAgICogQGRlc2NyaXB0aW9uIO2VhOuTnOuTpOydmCDrpqzsgqzsnbTspogg7ZW465Ok65+s65Ok7J2EIOyIqOq4tOuLpC5cclxuICAgKlxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBoaWRlQWxsUmVzaXplSGFuZGxlcygpIHtcclxuICAgIGxldCBpdGVtcyA9IF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzLnNlbGVjdEFsbChcclxuICAgICAgXCIjXCIgKyBDT05TVEFOVFMuTUFJTl9HUk9VUF9OQU1FICsgXCIgPiBnXCJcclxuICAgICk7XHJcbiAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgIGlmICghVXRpbHMuaXNFbXB0eU9iamVjdChlbGVtZW50LmZyZWVUcmFuc2Zvcm0pKSB7XHJcbiAgICAgICAgZWxlbWVudC5mcmVlVHJhbnNmb3JtLmhpZGVSZXNpemVIYW5kbGVyKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGhpZGVGaWVsZEF0dHJpYnV0ZVxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNoaWRlRmllbGRBdHRyaWJ1dGVcclxuICAgKiBAZGVzY3JpcHRpb24g7ZWE65Oc7J2YIOyGjeyEsSDtjJ3sl4XsnYQg7Iio6ri064ukLlxyXG4gICAqXHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIGhpZGVGaWVsZEF0dHJpYnV0ZSgpIHtcclxuICAgIGNvbnN0IHNlbGVjdGVkTm9kZSA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIgLlwiICsgQ09OU1RBTlRTLkVESVRPUl9BVFRSX0NMQVNTXHJcbiAgICApO1xyXG4gICAgVXRpbHMucmVtb3ZlQWxsQ2hpbGROb2RlKHNlbGVjdGVkTm9kZSk7XHJcbiAgICBpZiAoc2VsZWN0ZWROb2RlICE9PSBudWxsKSB7XHJcbiAgICAgIHNlbGVjdGVkTm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGVsZXRlQnRuTm9kZSA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIgLlwiICsgQ09OU1RBTlRTLkZJRUxEX0RFTEVURV9CVVRUT05fQ0xBU1NcclxuICAgICk7XHJcblxyXG4gICAgaWYgKFxyXG4gICAgICBkZWxldGVCdG5Ob2RlICE9PSBudWxsICYmXHJcbiAgICAgIGRlbGV0ZUJ0bk5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKENPTlNUQU5UUy5TSE9XX0NMQVNTKVxyXG4gICAgKSB7XHJcbiAgICAgIGRlbGV0ZUJ0bk5vZGUuY2xhc3NMaXN0LnRvZ2dsZShDT05TVEFOVFMuU0hPV19DTEFTUyk7XHJcbiAgICB9XHJcbiAgICBpZiAoXHJcbiAgICAgIGRlbGV0ZUJ0bk5vZGUgIT09IG51bGwgJiZcclxuICAgICAgIWRlbGV0ZUJ0bk5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKENPTlNUQU5UUy5ISURFX0NMQVNTKVxyXG4gICAgKSB7XHJcbiAgICAgIGRlbGV0ZUJ0bk5vZGUuY2xhc3NMaXN0LnRvZ2dsZShDT05TVEFOVFMuSElERV9DTEFTUyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gaGlkZVRlbXBsYXRlTGF5ZXJcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjaGlkZVRlbXBsYXRlTGF5ZXJcclxuICAgKiBAZGVzY3JpcHRpb24gVGVtcGxhdGVMYXllcuulvCDsiKjquLTri6QuXHJcbiAgICpcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgaGlkZVRlbXBsYXRlTGF5ZXIoKSB7XHJcbiAgICBsZXQgdGVtcGxhdGVMYXllciA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIgI1wiICsgQ09OU1RBTlRTLlRFTVBMQVRFX0xBWUVSX05BTUVcclxuICAgICk7XHJcbiAgICB0ZW1wbGF0ZUxheWVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXHJcbiAgICAgIFwibW91c2Vtb3ZlXCIsXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC50ZW1wbGF0ZU1vdXNlTW92ZUV2ZW50LFxyXG4gICAgICB0cnVlXHJcbiAgICApO1xyXG4gICAgdGVtcGxhdGVMYXllci5yZW1vdmVFdmVudExpc3RlbmVyKFxyXG4gICAgICBcIm1vdXNldXBcIixcclxuICAgICAgX3RlbXBsYXRlTW9kLnRlbXBsYXRlTW91c2VVcEV2ZW50LFxyXG4gICAgICB0cnVlXHJcbiAgICApO1xyXG4gICAgdGVtcGxhdGVMYXllci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gaW1wb3J0RmllbGREYXRhXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2ltcG9ydEZpZWxkRGF0YVxyXG4gICAqIEBkZXNjcmlwdGlvbiAgZmllbGTrpbwgaW1wb3J07ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgIGltcG9ydO2VoCBqc29uIGRhdGFcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgaW1wb3J0RmllbGREYXRhKGRhdGEpIHtcclxuICAgIC8vIDI0MDIyMFxyXG4gICAgY29uc3QgaXRlbUJnQ29sb3JMaXN0PSBbXCIjODI4MjgyXCIsXCIjNjREQjk5XCIsXCIjNzg3OEZGXCIsXCIjRkZDODFFXCIsXCIjRTk3RkU1XCIsXCIjOEI2MzMxXCIsXCIjRkY1MDUwXCIsXCIjMDBCRkZGXCIsXCIjMDAwMDhDXCJdO1xyXG4gICAgbGV0IGNvbG9ySW5kZXggPSAwO1xyXG5cclxuICAgIGRhdGEuZm9ybWVyTGlzdC5mb3JFYWNoKChvd25lcikgPT4ge1xyXG4gICAgICBjb25zdCBiZ0NvbG9yID0gaXRlbUJnQ29sb3JMaXN0W2NvbG9ySW5kZXhdO1xyXG4gICAgICBjb2xvckluZGV4ID0gKGNvbG9ySW5kZXggKyAxKSAlIGl0ZW1CZ0NvbG9yTGlzdC5sZW5ndGg7IC8vIOuLpOydjCDsg4nsg4Eg7J24642x7IqkIOqzhOyCsCDrsI8g7Iic7ZmYKCDtmITsnqzripQg7IOJ7IOB7J20IOy0nSA56rCc7J24642wIOy2lO2bhCDrs7TsmYQg7ZWE7JqULilcclxuXHJcbiAgICAgIG93bmVyLnBhZ2VzLmZvckVhY2goKHBhZ2UpID0+IHtcclxuICAgICAgICBpZiAocGFnZS5wYWdlTm8gPj0gX3RlbXBsYXRlTW9kLnBkZlZpZXdlci5fcGFnZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHBhZ2UuZmllbGRzLmZvckVhY2goKGZpZWxkKSA9PiB7XHJcbiAgICAgICAgICBmaWVsZC5tX293bmVySWQgPSBvd25lci51c2VyVVVJRDtcclxuICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgb3duZXIuaXNGb3JtZXIgIT09IG51bGwgJiZcclxuICAgICAgICAgICAgb3duZXIuaXNGb3JtZXIgIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICBvd25lci5pc0Zvcm1lciA9PT0gXCJZXCJcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBmaWVsZC5tX293bmVySWQgPSBcIlwiO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBfdGVtcGxhdGVNb2QucmVwbGFjZUZpZWxkRGF0YShmaWVsZCwgdHJ1ZSwgYmdDb2xvcik7IC8vIDI0MDIyMCDrs4Dqsr3rkJwg7L2U65OcOiDshLgg67KI7Ke4IOyduOyekOuhnCBiZ0NvbG9yIOyghOuLrFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgLy8gX3RlbXBsYXRlTW9kLmZpZWxkUmVwb3NpdGlvbmluZygpO1xyXG4gICAgX3RlbXBsYXRlTW9kLmhpZGVBbGxSZXNpemVIYW5kbGVzKCk7XHJcbiAgICBfdGVtcGxhdGVNb2QuaGlkZUZpZWxkQXR0cmlidXRlKCk7XHJcbiAgICBfdGVtcGxhdGVNb2QuaGlkZVRlbXBsYXRlTGF5ZXIoKTtcclxuICAgIF90ZW1wbGF0ZU1vZC5idWlsZEZpZWxkZm9ybWVyTGlzdCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGtleWNoZWNrXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2tleWNoZWNrXHJcbiAgICogQGRlc2NyaXB0aW9uICBrZXljaGVjayAg64uo7LaV7YKkIOydtOuypO2KuC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBldnQgICBldnTqsJ3ssrRcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAga2V5Y2hlY2soZXZ0KSB7XHJcbiAgICB2YXIga2V5Q29kZSA9IGV2dC53aGljaCA/IGV2dC53aGljaCA6IGV2dC5rZXlDb2RlO1xyXG4gICAgaWYgKGV2dC5jdHJsS2V5KSB7XHJcbiAgICAgIHN3aXRjaCAoa2V5Q29kZSkge1xyXG4gICAgICAgIGNhc2UgODk6XHJcbiAgICAgICAgICBfdGVtcGxhdGVNb2QucmVkb0FjdGlvbigpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGNhc2UgOTA6XHJcbiAgICAgICAgICBfdGVtcGxhdGVNb2QudW5kb0FjdGlvbigpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGNhc2UgNzc6XHJcbiAgICAgICAgLy8gbGV0IGRhdDEgPSBfdGVtcGxhdGVNb2QuZXhwb3J0RmllbGREYXRhKCk7XHJcbiAgICAgICAgLy8gIGNvbnNvbGUubG9nKChkYXQxKSk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShkYXQxKSk7XHJcblxyXG4gICAgICAgIC8vIF90ZW1wbGF0ZU1vZC5pbXBvcnRGaWVsZERhdGEoXCIvdGVzdEZpZWxkcy5qc29uXCIsIHRydWUpO1xyXG4gICAgICAgIC8vIHJldHVybjtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhfdGVtcGxhdGVNb2QuaXNBbGxGaWVsZEhhc093bmVyKCkpO1xyXG5cclxuICAgICAgICAvLyBsZXQgcmV0MSA9IF90ZW1wbGF0ZU1vZC5jaGVja1RlbXBsYXRlRmllbGREYXRhKCk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2cocmV0MSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoa2V5Q29kZSA9PT0gNDYpIHtcclxuICAgICAgX3RlbXBsYXRlTW9kLnJlbW92ZVNlbGVjdGVkRmllbGQoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHBhc3RlT2JqZWN0KCkge1xyXG4gICAgY29uc29sZS5sb2coX3RlbXBsYXRlTW9kLnRlbXBsYXRlQ2xpcEJvYXJkKTtcclxuICAgIGlmIChVdGlscy5pc1N0cmluZ0VtcHR5KF90ZW1wbGF0ZU1vZC50ZW1wbGF0ZUNsaXBCb2FyZCkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZmllbGRJZExpc3QgPSBfdGVtcGxhdGVNb2QudGVtcGxhdGVDbGlwQm9hcmQuc3BsaXQoXCIsXCIpO1xyXG4gICAgZm9yIChjb25zdCBmaWVsZElkIG9mIGZpZWxkSWRMaXN0KSB7XHJcbiAgICAgIGNvbnN0IGZpZWxkID0gX3RlbXBsYXRlTW9kLmZpZWxkRGljdGlvbmFyeVtmaWVsZElkXTtcclxuICAgICAgY29uc3QgZmllbGRKc29uRGF0YSA9IEpTT04uc3RyaW5naWZ5KGZpZWxkKTtcclxuICAgICAgY29uc3QgY29weUZpZWxkMSA9IEpTT04ucGFyc2UoZmllbGRKc29uRGF0YSk7XHJcbiAgICAgIGxldCBuZXdJZCA9IF90ZW1wbGF0ZU1vZC5nZW5lcmF0ZUZpZWxkSWQoY29weUZpZWxkMS5tX3R5cGUpO1xyXG4gICAgICBjb3B5RmllbGQxLm1faWQgPSBuZXdJZDtcclxuICAgICAgY29weUZpZWxkMS5tX3BkZlggPSBjb3B5RmllbGQxLm1fcGRmWCArIDEwO1xyXG4gICAgICBjb3B5RmllbGQxLm1fcGRmWDIgPSBjb3B5RmllbGQxLm1fcGRmWDIgKyAxMDtcclxuICAgICAgY29weUZpZWxkMS5tX3BkZlkgPSBjb3B5RmllbGQxLm1fcGRmWSAtIDEwO1xyXG4gICAgICBjb3B5RmllbGQxLm1fcGRmWTIgPSBjb3B5RmllbGQxLm1fcGRmWTIgLSAxMDtcclxuICAgICAgY29weUZpZWxkMS5tX2ZpZWxkSWQgPSBuZXdJZC5yZXBsYWNlKFxyXG4gICAgICAgIGNvcHlGaWVsZDEubV90eXBlLFxyXG4gICAgICAgIGNvcHlGaWVsZDEubV9raW5kICsgXCItXCJcclxuICAgICAgKTtcclxuICAgICAgX3RlbXBsYXRlTW9kLnJlcGxhY2VGaWVsZFN0cmluZ0RhdGEoSlNPTi5zdHJpbmdpZnkoY29weUZpZWxkMSkpO1xyXG4gICAgfVxyXG4gICAgaWYgKGZpZWxkSWRMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgX3RlbXBsYXRlTW9kLmhpZGVBbGxSZXNpemVIYW5kbGVzKCk7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5oaWRlRmllbGRBdHRyaWJ1dGUoKTtcclxuICAgICAgX3RlbXBsYXRlTW9kLmhpZGVUZW1wbGF0ZUxheWVyKCk7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5idWlsZEZpZWxkZm9ybWVyTGlzdCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIHJlZG9BY3Rpb25cclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjcmVkb0FjdGlvblxyXG4gICAqIEBkZXNjcmlwdGlvbiAgIOydtOyghOyXkCDsi6Ttlonst6jshowg7ZaI642YIOqyg+ydhCDri6Tsi5wg7Iuk7ZaJ7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIHJlZG9BY3Rpb24oKSB7XHJcbiAgICB2YXIgaWR4ID0gKytfdGVtcGxhdGVNb2QudW5yZWRvQWN0aW9uSWR4O1xyXG4gICAgdmFyIGRhdGEgPSBfdGVtcGxhdGVNb2QudW5yZWRvQWN0aW9uRGljdFtpZHhdO1xyXG4gICAgaWYgKGRhdGEgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBfdGVtcGxhdGVNb2QudW5yZWRvQWN0aW9uSWR4LS07XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIF90ZW1wbGF0ZU1vZC5yZW1vdmVEcmFnT3Zlckdyb3VwKCk7XHJcbiAgICBzd2l0Y2ggKGRhdGEuYWN0aW9uKSB7XHJcbiAgICAgIGNhc2UgQ09OU1RBTlRTLkNSRUFURV9GSUVMRF9BQ1RJT046XHJcbiAgICAgIGNhc2UgQ09OU1RBTlRTLkZJRUxEX0FUVFJfQ0hBTkdFX0FDVElPTjoge1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5yZXBsYWNlRmllbGRTdHJpbmdEYXRhKGRhdGEubmV3KTtcclxuICAgICAgICBfdGVtcGxhdGVNb2QuYnVpbGRGaWVsZGZvcm1lckxpc3QoKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBDT05TVEFOVFMuUkVNT1ZFX0ZJRUxEX0FDVElPTjoge1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5yZW1vdmVGaWVsZChkYXRhLm5ldyk7XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLmhpZGVGaWVsZEF0dHJpYnV0ZSgpO1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5idWlsZEZpZWxkZm9ybWVyTGlzdCgpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIENPTlNUQU5UUy5HUk9VUF9SRU1PVkVfQUNUSU9OOiB7XHJcbiAgICAgICAgZGF0YS5uZXcuZm9yRWFjaCgobmV3RGF0YSkgPT4ge1xyXG4gICAgICAgICAgX3RlbXBsYXRlTW9kLnJlbW92ZUZpZWxkKG5ld0RhdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5oaWRlRmllbGRBdHRyaWJ1dGUoKTtcclxuICAgICAgICBfdGVtcGxhdGVNb2QuYnVpbGRGaWVsZGZvcm1lckxpc3QoKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBDT05TVEFOVFMuR1JPVVBfQVRUUl9DSEFOR0VfQUNUSU9OOiB7XHJcbiAgICAgICAgZGF0YS5uZXcuZm9yRWFjaCgobmV3RGF0YSkgPT4ge1xyXG4gICAgICAgICAgX3RlbXBsYXRlTW9kLnJlcGxhY2VGaWVsZFN0cmluZ0RhdGEobmV3RGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLmJ1aWxkRmllbGRmb3JtZXJMaXN0KCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgQ09OU1RBTlRTLkdST1VQX0FUVFJfT1dORVJfQ0hBTkdFX0FDVElPTjoge1xyXG4gICAgICAgIGRhdGEubmV3LmZvckVhY2goKG5ld0RhdGEpID0+IHtcclxuICAgICAgICAgIF90ZW1wbGF0ZU1vZC5yZXBsYWNlRmllbGRTdHJpbmdEYXRhKG5ld0RhdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5idWlsZEZpZWxkZm9ybWVyTGlzdCgpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIHJlZnJlc2hmb3JtZXJMaXN0XHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3JlZnJlc2hmb3JtZXJMaXN0XHJcbiAgICogQGRlc2NyaXB0aW9uICDtlYTrk5zsnZgg7ISc66qF7J6QIOygleuztOqwgCDsiJjsoJXrkKAg65WMIOyCrOydtOuTnOydmCDshJzrqoXsnpAg66as7Iqk7Yq466W8IOqwseyLoO2VnOuLpC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSAge09iZWpjdH0gZmllbGQg6rCx7Iug7ZWgIO2VhOuTnCDsnbjsiqTthLTsiqRcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgcmVmcmVzaGZvcm1lckxpc3QoZmllbGQpIHtcclxuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhfdGVtcGxhdGVNb2QudGVtcGxhdGVVc2VyRmllbGRJbmZvKTtcclxuICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgIGxldCB1c2VySW5mbyA9IF90ZW1wbGF0ZU1vZC50ZW1wbGF0ZVVzZXJGaWVsZEluZm9ba2V5XTtcclxuICAgICAgaWYgKHVzZXJJbmZvLmNvbnRhaW5zKGZpZWxkLmlkKSkge1xyXG4gICAgICAgIGlmIChmaWVsZC5vd25lcklkICE9PSBrZXkpIHtcclxuICAgICAgICAgIHVzZXJJbmZvLnJlbW92ZUZpZWxkKGZpZWxkLmlkKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKGZpZWxkLm93bmVySWQgPT09IGtleSkge1xyXG4gICAgICAgICAgdXNlckluZm8ucHVzaEZpZWxkKGZpZWxkLmlkLCBmaWVsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiByZW1vdmVEcmFnR3JvdXBGaWVsZFxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNyZW1vdmVEcmFnR3JvdXBGaWVsZFxyXG4gICAqIEBkZXNjcmlwdGlvbiAgRHJhZ+2VtOyEnCDshKDtg53tlZwg7ZWE65Oc7J2YIOq3uOujueydhCDsp4DsmrTri6QuXHJcbiAgICpcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgcmVtb3ZlRHJhZ0dyb3VwRmllbGQoKSB7XHJcbiAgICB2YXIgdGVtcEdPbGQgPSBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy5zZWxlY3QoXHJcbiAgICAgIFwiI1wiICsgQ09OU1RBTlRTLkRSQUdfQk9YX05BTUVcclxuICAgICk7XHJcbiAgICB2YXIgbWFpbkdyb3VwID0gX3RlbXBsYXRlTW9kLm1haW5DYW52YXMuc2VsZWN0KFxyXG4gICAgICBcIiNcIiArIENPTlNUQU5UUy5NQUlOX0dST1VQX05BTUVcclxuICAgICk7XHJcbiAgICBpZiAodGVtcEdPbGQgIT09IG51bGwgJiYgdGVtcEdPbGQuY2hpbGRyZW4oKS5sZW5ndGggPj0gMSkge1xyXG4gICAgICB0ZW1wR09sZC5mcmVlVHJhbnNmb3JtLmhpZGVIYW5kbGVzKCk7XHJcbiAgICAgIHZhciBjaGRzID0gdGVtcEdPbGQuY2hpbGRyZW4oKTtcclxuICAgICAgY29uc3QgdGVtcEdNYXRyaXggPSB0ZW1wR09sZC50cmFuc2Zvcm0oKS5nbG9iYWxNYXRyaXg7XHJcbiAgICAgIHZhciBvbGREYXRhQXJyID0gW107XHJcbiAgICAgIHZhciBuZXdEYXRhQXJyID0gW107XHJcbiAgICAgIGNoZHMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IGNoaWxkUmVjdCA9IGVsZW1lbnQuc2VsZWN0KFwicmVjdFwiKTtcclxuICAgICAgICBjb25zdCBmaWVsZCA9IF90ZW1wbGF0ZU1vZC5maWVsZERpY3Rpb25hcnlbY2hpbGRSZWN0LmF0dHIoXCJpZFwiKV07XHJcbiAgICAgICAgZmllbGQuaXNSZW1vdmVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgbGV0IHVzckZpZWxkRGF0YSA9IF90ZW1wbGF0ZU1vZC50ZW1wbGF0ZVVzZXJGaWVsZEluZm9bZmllbGQub3duZXJJZF07XHJcbiAgICAgICAgaWYgKHVzckZpZWxkRGF0YSAhPT0gbnVsbCAmJiB1c3JGaWVsZERhdGEgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgdXNyRmllbGREYXRhLnJlbW92ZUZpZWxkKGZpZWxkLmlkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGxheWVyRGl2ID0gX3RlbXBsYXRlTW9kLm93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgICAgXCIgI1wiICsgQ09OU1RBTlRTLlRFTVBMQVRFX0xBWUVSX0FTVEVSSVNLX05BTUVcclxuICAgICAgICApO1xyXG4gICAgICAgIGxldCBhc3Rlcmlza0RpdiA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgICAgIFwiICNcIiArIGZpZWxkLmlkICsgXCJfYXN0ZXJpc2tcIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbGF5ZXJEaXYucmVtb3ZlQ2hpbGQoYXN0ZXJpc2tEaXYpO1xyXG5cclxuICAgICAgICBjb25zdCBmaWVsZEpzb25EYXRhID0gSlNPTi5zdHJpbmdpZnkoZmllbGQpO1xyXG4gICAgICAgIG9sZERhdGFBcnIucHVzaChmaWVsZEpzb25EYXRhKTtcclxuICAgICAgICBuZXdEYXRhQXJyLnB1c2goZmllbGRKc29uRGF0YSk7XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLmhpZGVGaWVsZEF0dHJpYnV0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgICAgX3RlbXBsYXRlTW9kLmFkZFVuZG9SZWRvQWN0KFxyXG4gICAgICAgIENPTlNUQU5UUy5HUk9VUF9SRU1PVkVfQUNUSU9OLFxyXG4gICAgICAgIG9sZERhdGFBcnIsXHJcbiAgICAgICAgbmV3RGF0YUFyclxyXG4gICAgICApO1xyXG4gICAgICB0ZW1wR09sZC5yZW1vdmUoKTtcclxuICAgICAgX3RlbXBsYXRlTW9kLmJ1aWxkRmllbGRmb3JtZXJMaXN0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gcmVtb3ZlRHJhZ092ZXJHcm91cFxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNyZW1vdmVEcmFnT3Zlckdyb3VwXHJcbiAgICogQGRlc2NyaXB0aW9uICAg65Oc656Y6re47ZW07IScIOunjOuTpCDtlYTrk5wg6re466a97J2EIO2VtOygnO2VnOuLpC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSAge0Jvb2xlYW59IGRvbm90VW5kb1JlZG8gIHVuZG9SZWRv66W8IOyLpO2Wie2VmOyngCDslYrripTri6QuXHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIHJlbW92ZURyYWdPdmVyR3JvdXAoZG9ub3RVbmRvUmVkbyA9IHRydWUpIHtcclxuICAgIHZhciB0ZW1wR09sZCA9IF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzLnNlbGVjdChcclxuICAgICAgXCIjXCIgKyBDT05TVEFOVFMuRFJBR19CT1hfTkFNRVxyXG4gICAgKTtcclxuICAgIHZhciBtYWluR3JvdXAgPSBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy5zZWxlY3QoXHJcbiAgICAgIFwiI1wiICsgQ09OU1RBTlRTLk1BSU5fR1JPVVBfTkFNRVxyXG4gICAgKTtcclxuICAgIGlmICh0ZW1wR09sZCAhPT0gbnVsbCAmJiB0ZW1wR09sZC5jaGlsZHJlbigpLmxlbmd0aCA+PSAxKSB7XHJcbiAgICAgIHRlbXBHT2xkLmZyZWVUcmFuc2Zvcm0uaGlkZUhhbmRsZXMoKTtcclxuICAgICAgdmFyIGNoZHMgPSB0ZW1wR09sZC5jaGlsZHJlbigpO1xyXG4gICAgICBjb25zdCB0ZW1wR01hdHJpeCA9IHRlbXBHT2xkLnRyYW5zZm9ybSgpLmdsb2JhbE1hdHJpeDtcclxuICAgICAgY2hkcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgbWFpbkdyb3VwLmFwcGVuZChlbGVtZW50KTtcclxuICAgICAgICBfdGVtcGxhdGVNb2QuY2hhbmdlRmllbGRQb3NpdGlvbihlbGVtZW50LCB0ZW1wR01hdHJpeCwgZG9ub3RVbmRvUmVkbyk7XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLmNoYW5nZUZyZWVUcmFuc2Zvcm0oXHJcbiAgICAgICAgICBlbGVtZW50LFxyXG4gICAgICAgICAgZWxlbWVudC53aWR0aCxcclxuICAgICAgICAgIGVsZW1lbnQuaGVpZ2h0XHJcbiAgICAgICAgKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRlbXBHT2xkLnJlbW92ZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIHJlbW92ZUZpZWxkXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3JlbW92ZUZpZWxkXHJcbiAgICogQGRlc2NyaXB0aW9uICB1bmRvLCByZWRv7JeQ7IScIO2VhOuTnOulvCDsgq3soJztlaAg65WMIOyCrOyaqS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSAge1N0cmluZ30ganNvbkRhdGEg7ZWE65Oc7J2YIEpTT04gU3RyaW5nIOuNsOydtO2EsFxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICByZW1vdmVGaWVsZChqc29uRGF0YSkge1xyXG4gICAgY29uc3QgcmVwbGFjZURhdGEgPSBKU09OLnBhcnNlKGpzb25EYXRhKTtcclxuICAgIGNvbnN0IGZpZWxkMSA9IF90ZW1wbGF0ZU1vZC5nZXRGaWVsZEZyb21Kc29uKFxyXG4gICAgICByZXBsYWNlRGF0YS5tX3R5cGUsXHJcbiAgICAgIHJlcGxhY2VEYXRhXHJcbiAgICApO1xyXG4gICAgZmllbGQxLmlzUmVtb3ZlZCA9IHRydWU7XHJcbiAgICBpZiAoIVV0aWxzLmlzU3RyaW5nRW1wdHkoZmllbGQxLm93bmVySWQpKSB7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC50ZW1wbGF0ZVVzZXJGaWVsZEluZm9bZmllbGQxLm93bmVySWRdLnJlbW92ZUZpZWxkKGZpZWxkMS5pZCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBtYWluR3JvdXAgPSBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy5zZWxlY3QoXHJcbiAgICAgIFwiI1wiICsgQ09OU1RBTlRTLk1BSU5fR1JPVVBfTkFNRVxyXG4gICAgKTtcclxuICAgIHZhciBzZWxlY3RlZEZpZWxkR3JvdXAgPSBtYWluR3JvdXAuc2VsZWN0KFwiI1wiICsgZmllbGQxLmlkICsgXCJHcm91cFwiKTtcclxuICAgIGlmIChzZWxlY3RlZEZpZWxkR3JvdXApIHtcclxuICAgICAgc2VsZWN0ZWRGaWVsZEdyb3VwLmZyZWVUcmFuc2Zvcm0udW5wbHVnKCk7XHJcbiAgICAgIHNlbGVjdGVkRmllbGRHcm91cC5yZW1vdmUoKTtcclxuXHJcbiAgICAgIGxldCBsYXllckRpdiA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBcIiAjXCIgKyBDT05TVEFOVFMuVEVNUExBVEVfTEFZRVJfQVNURVJJU0tfTkFNRVxyXG4gICAgICApO1xyXG4gICAgICBsZXQgYXN0ZXJpc2tEaXYgPSBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgXCIgI1wiICsgZmllbGQxLmlkICsgXCJfYXN0ZXJpc2tcIlxyXG4gICAgICApO1xyXG4gICAgICBpZiAoYXN0ZXJpc2tEaXYgIT09IG51bGwgJiYgYXN0ZXJpc2tEaXYgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGxheWVyRGl2LnJlbW92ZUNoaWxkKGFzdGVyaXNrRGl2KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIHJlbW92ZVNlbGVjdGVkRmllbGRcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjcmVtb3ZlU2VsZWN0ZWRGaWVsZFxyXG4gICAqIEBkZXNjcmlwdGlvbiAg7ISg7YOd65CcIO2VhOuTnOulvCDsgq3soJztlZzri6QuXHJcbiAgICpcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgcmVtb3ZlU2VsZWN0ZWRGaWVsZCgpIHtcclxuICAgIGNvbnN0IHNlbGVjdGVkTm9kZSA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIgLlwiICsgQ09OU1RBTlRTLkVESVRPUl9BVFRSX0NMQVNTXHJcbiAgICApO1xyXG4gICAgY29uc3QgYXR0clBhbmVsTm9kZSA9IHNlbGVjdGVkTm9kZS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5cIiArIENPTlNUQU5UUy5FRElUT1JfQVRUUl9QQU5FTF9DTEFTU1xyXG4gICAgKTtcclxuICAgIGlmIChhdHRyUGFuZWxOb2RlID09PSBudWxsKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGlkTGlzdEF0dHIgPSBhdHRyUGFuZWxOb2RlLmdldEF0dHJpYnV0ZShcIkZpZWxkLWlkLWxpc3RcIik7XHJcbiAgICBpZiAoVXRpbHMuaXNTdHJpbmdFbXB0eShpZExpc3RBdHRyKSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBpZEFycmF5ID0gaWRMaXN0QXR0ci5zcGxpdChcIixcIik7XHJcbiAgICBpZiAoaWRBcnJheS5sZW5ndGggPiAxKSB7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5yZW1vdmVEcmFnR3JvdXBGaWVsZCgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB2YXIgc2VsZWN0ZWRJdGVtID0gX3RlbXBsYXRlTW9kLm1haW5DYW52YXMuc2VsZWN0KFxyXG4gICAgICBcIiNcIiArIGlkQXJyYXlbMF0gKyBcIkdyb3VwXCJcclxuICAgICk7XHJcbiAgICBpZiAoc2VsZWN0ZWRJdGVtID09PSBudWxsKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGNoaWxkUmVjdCA9IHNlbGVjdGVkSXRlbS5zZWxlY3QoXCJyZWN0XCIpO1xyXG4gICAgY29uc3QgZmllbGQgPSBfdGVtcGxhdGVNb2QuZmllbGREaWN0aW9uYXJ5W2NoaWxkUmVjdC5hdHRyKFwiaWRcIildO1xyXG4gICAgZmllbGQuaXNSZW1vdmVkID0gdHJ1ZTtcclxuICAgIGxldCB1c3JGaWVsZERhdGEgPSBfdGVtcGxhdGVNb2QudGVtcGxhdGVVc2VyRmllbGRJbmZvW2ZpZWxkLm93bmVySWRdO1xyXG4gICAgaWYgKHVzckZpZWxkRGF0YSAhPT0gbnVsbCAmJiB1c3JGaWVsZERhdGEgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB1c3JGaWVsZERhdGEucmVtb3ZlRmllbGQoZmllbGQuaWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZpZWxkSnNvbkRhdGEgPSBKU09OLnN0cmluZ2lmeShmaWVsZCk7XHJcbiAgICBfdGVtcGxhdGVNb2QuYWRkVW5kb1JlZG9BY3QoXHJcbiAgICAgIENPTlNUQU5UUy5SRU1PVkVfRklFTERfQUNUSU9OLFxyXG4gICAgICBmaWVsZEpzb25EYXRhLFxyXG4gICAgICBmaWVsZEpzb25EYXRhXHJcbiAgICApO1xyXG4gICAgX3RlbXBsYXRlTW9kLmhpZGVGaWVsZEF0dHJpYnV0ZSgpO1xyXG4gICAgc2VsZWN0ZWRJdGVtLmZyZWVUcmFuc2Zvcm0udW5wbHVnKCk7XHJcbiAgICBzZWxlY3RlZEl0ZW0ucmVtb3ZlKCk7XHJcblxyXG4gICAgbGV0IGxheWVyRGl2ID0gX3RlbXBsYXRlTW9kLm93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiAjXCIgKyBDT05TVEFOVFMuVEVNUExBVEVfTEFZRVJfQVNURVJJU0tfTkFNRVxyXG4gICAgKTtcclxuICAgIGxldCBhc3Rlcmlza0RpdiA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIgI1wiICsgZmllbGQuaWQgKyBcIl9hc3Rlcmlza1wiXHJcbiAgICApO1xyXG4gICAgaWYgKGFzdGVyaXNrRGl2ICE9PSBudWxsICYmIGFzdGVyaXNrRGl2ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgbGF5ZXJEaXYucmVtb3ZlQ2hpbGQoYXN0ZXJpc2tEaXYpO1xyXG4gICAgfVxyXG5cclxuICAgIF90ZW1wbGF0ZU1vZC5idWlsZEZpZWxkZm9ybWVyTGlzdCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIHJlbW92ZVRlbXBsYXRlUmVjdFxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNyZW1vdmVUZW1wbGF0ZVJlY3RcclxuICAgKiBAZGVzY3JpcHRpb24gICBQREbsnITsl5Ag7Jis65286rCA64qUIFRlbXBsYXRlIOugiOydtOyWtOyXkCDtlYTrk5zrpbwg66eM65Ok6riw7JyE7ZW0IOunjOuToCDsnoTsi5wgRGl266W8IOyCreygnO2VnOuLpC5cclxuICAgKlxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICByZW1vdmVUZW1wbGF0ZVJlY3QoKSB7XHJcbiAgICBsZXQgdGVtcGxhdGVMYXllciA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIgI1wiICsgQ09OU1RBTlRTLlRFTVBMQVRFX0xBWUVSX05BTUVcclxuICAgICk7XHJcbiAgICBsZXQgdGVtcGxhdGVSZWN0ID0gX3RlbXBsYXRlTW9kLm93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiAjXCIgKyBDT05TVEFOVFMuVEVNUExBVEVfTEFZRVJfUkVDVF9OQU1FXHJcbiAgICApO1xyXG4gICAgaWYgKHRlbXBsYXRlUmVjdCA9PT0gbnVsbCB8fCB0ZW1wbGF0ZVJlY3QgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0ZW1wbGF0ZUxheWVyLnJlbW92ZUNoaWxkKHRlbXBsYXRlUmVjdCk7XHJcbiAgICB0ZW1wbGF0ZUxheWVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXHJcbiAgICAgIFwibW91c2Vtb3ZlXCIsXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC50ZW1wbGF0ZU1vdXNlTW92ZUV2ZW50LFxyXG4gICAgICB0cnVlXHJcbiAgICApO1xyXG4gICAgdGVtcGxhdGVMYXllci5yZW1vdmVFdmVudExpc3RlbmVyKFxyXG4gICAgICBcIm1vdXNldXBcIixcclxuICAgICAgX3RlbXBsYXRlTW9kLnRlbXBsYXRlTW91c2VVcEV2ZW50LFxyXG4gICAgICB0cnVlXHJcbiAgICApO1xyXG4gICAgdGVtcGxhdGVMYXllci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gcmVwbGFjZUZpZWxkRGF0YVxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNyZXBsYWNlRmllbGREYXRhXHJcbiAgICogQGRlc2NyaXB0aW9uICDtlbTri7ntlZjripQgSlNPTiBTdHJpbmfsnZgg642w7J207YSw66GcIO2VhOuTnOulvCDqtZDssrTtlZzri6QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30ganNvbkRhdGEg7ZWE65Oc7J2YIEpTT04gU3RyaW5nIOuNsOydtO2EsFxyXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNJbXBvcnQgaW1wb3J07J28IOuVjCDtmLjstpzrkJjripTsp4Ag7Jes67aAXHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIHJlcGxhY2VGaWVsZERhdGEoanNvbkRhdGEsIGlzSW1wb3J0ID0gZmFsc2UsIGJnQ29sb3IgPSBcIiNmZmFjN2ZcIikge1xyXG4gICAgX3RlbXBsYXRlTW9kLmhpZGVBbGxSZXNpemVIYW5kbGVzKCk7XHJcbiAgICBjb25zdCBmaWVsZDEgPSBfdGVtcGxhdGVNb2QuZ2V0RmllbGRGcm9tSnNvbihqc29uRGF0YS5tX3R5cGUsIGpzb25EYXRhKTtcclxuICAgIGZpZWxkMS5pc1JlbW92ZWQgPSBmYWxzZTtcclxuICAgIGNvbnN0IG1haW5Hcm91cCA9IF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzLnNlbGVjdChcclxuICAgICAgXCIjXCIgKyBDT05TVEFOVFMuTUFJTl9HUk9VUF9OQU1FXHJcbiAgICApO1xyXG4gICAgdmFyIHNlbGVjdGVkRmllbGRHcm91cCA9IG1haW5Hcm91cC5zZWxlY3QoXCIjXCIgKyBmaWVsZDEuaWQgKyBcIkdyb3VwXCIpO1xyXG4gICAgaWYgKHNlbGVjdGVkRmllbGRHcm91cCkge1xyXG4gICAgICBpZiAoIVV0aWxzLmlzRW1wdHlPYmplY3Qoc2VsZWN0ZWRGaWVsZEdyb3VwLmZyZWVUcmFuc2Zvcm0pKSB7XHJcbiAgICAgICAgc2VsZWN0ZWRGaWVsZEdyb3VwLmZyZWVUcmFuc2Zvcm0udW5wbHVnKCk7XHJcbiAgICAgIH1cclxuICAgICAgc2VsZWN0ZWRGaWVsZEdyb3VwLnJlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG5ld1JlY3QgPSBfdGVtcGxhdGVNb2QuY2FsY0ZpZWxkUG9zdGlvbihmaWVsZDEsIGlzSW1wb3J0KTtcclxuICAgIGxldCBmaWVsZEdyb3VwID0gZmllbGQxLmdldFNWR0ZpZWxkT2JqZWN0KFxyXG4gICAgICBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcyxcclxuICAgICAgbWFpbkdyb3VwLFxyXG4gICAgICAxLjAsXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5vd25lck5vZGUsXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5yZW1vdmVEcmFnT3Zlckdyb3VwLFxyXG4gICAgICBfdGVtcGxhdGVNb2QuY2hhbmdlRmllbGRWYWx1ZUV2ZW50LFxyXG4gICAgICBfdGVtcGxhdGVNb2QuY2hhbmdlRnJlZVRyYW5zZm9ybSxcclxuICAgICAgYmdDb2xvclxyXG4gICAgKTtcclxuICAgIG1haW5Hcm91cC5hcHBlbmQoZmllbGRHcm91cCk7XHJcbiAgICBfdGVtcGxhdGVNb2QuZmllbGREaWN0aW9uYXJ5W2ZpZWxkMS5pZF0gPSBmaWVsZDE7XHJcblxyXG4gICAgX3RlbXBsYXRlTW9kLmNoYW5nZUZyZWVUcmFuc2Zvcm0oZmllbGRHcm91cCwgZmllbGQxLndpZHRoLCBmaWVsZDEuaGVpZ2h0KTtcclxuICAgIF90ZW1wbGF0ZU1vZC5yZWZyZXNoZm9ybWVyTGlzdChmaWVsZDEpO1xyXG5cclxuICAgIF90ZW1wbGF0ZU1vZC5zaG93QXN0ZXJpc2tEaXYoXHJcbiAgICAgIGZpZWxkMS5pZCxcclxuICAgICAgZmllbGQxLnJlcXVpcmVkID09PSBcInRydWVcIixcclxuICAgICAgZmllbGQxLngsXHJcbiAgICAgIGZpZWxkMS55LFxyXG4gICAgICBmaWVsZDEuaGVpZ2h0XHJcbiAgICApO1xyXG5cclxuICAgIF90ZW1wbGF0ZU1vZC5zaG93RmllbGRBdHRyaWJ1dGUoZmllbGQxLmlkKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiByZXBsYWNlRmllbGRTdHJpbmdEYXRhXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3JlcGxhY2VGaWVsZFN0cmluZ0RhdGFcclxuICAgKiBAZGVzY3JpcHRpb24gICDtlbTri7ntlZjripQgSlNPTiDrjbDsnbTthLDroZwg7ZWE65Oc66W8IOq1kOyytO2VnOuLpC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBqc29uRGF0YSDtlYTrk5zsnZggSlNPTiBTdHJpbmcg642w7J207YSwXHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIHJlcGxhY2VGaWVsZFN0cmluZ0RhdGEoanNvbkRhdGEpIHtcclxuICAgIF90ZW1wbGF0ZU1vZC5oaWRlQWxsUmVzaXplSGFuZGxlcygpO1xyXG4gICAgY29uc3QgcmVwbGFjZURhdGEgPSBKU09OLnBhcnNlKGpzb25EYXRhKTtcclxuICAgIF90ZW1wbGF0ZU1vZC5yZXBsYWNlRmllbGREYXRhKHJlcGxhY2VEYXRhLCB0cnVlKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiByZXNldFRvb2xcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjcmVzZXRUb29sXHJcbiAgICogQGRlc2NyaXB0aW9uICDshKDtg53rkJwg7Yi07J2EIOumrOyFi+2VnOuLpC5cclxuICAgKlxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICByZXNldFRvb2woKSB7XHJcbiAgICBfdGVtcGxhdGVNb2Quc2VsZWN0QWRkRmllbGRUeXBlID0gXCJcIjtcclxuICAgIF90ZW1wbGF0ZU1vZC5yZW1vdmVUZW1wbGF0ZVJlY3QoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBzZWxlY3RVc2VyTGlzdFxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNzZWxlY3RVc2VyTGlzdFxyXG4gICAqIEBkZXNjcmlwdGlvbiBcIlVzZXIgSURcIuyXkCDrp57ripQg7ISc66qF7J6Q66W8IOyEoO2DneuQnCDsg4Htg5zroZwg66eM65Og64ukLiAuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gdXNlcktleSBVc2VyIElkXHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIHNlbGVjdFVzZXJMaXN0KHVzZXJLZXkpIHtcclxuICAgIGNvbnN0IG93bmVyRG9tID0gX3RlbXBsYXRlTW9kLm93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiAjRWRpdG9yLVVzZXItQ29tcG9uZW50X0JveFwiXHJcbiAgICApO1xyXG4gICAgb3duZXJEb20uY2hpbGROb2Rlcy5mb3JFYWNoKChjaGlsZCkgPT4ge1xyXG4gICAgICBpZiAoY2hpbGQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiQ3VycmVudFwiKSkge1xyXG4gICAgICAgIGNoaWxkLmNsYXNzTGlzdC50b2dnbGUoXCJDdXJyZW50XCIpO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGNoaWxkVXNlcktleSA9IGNoaWxkLmdldEF0dHJpYnV0ZShcImRhdGEtdXNlci1rZXlcIik7XHJcbiAgICAgIGlmICh1c2VyS2V5ID09PSBjaGlsZFVzZXJLZXkpIHtcclxuICAgICAgICBjaGlsZC5jbGFzc0xpc3QudG9nZ2xlKFwiQ3VycmVudFwiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gc2VsZWN0VG9vbFxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNzZWxlY3RUb29sXHJcbiAgICogQGRlc2NyaXB0aW9uIO2VhOuTnOulvCDrp4zrk6TquLAg7JyE7ZWcIO2ItOydhCDshKTsoJXtlZzri6QuIC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0b29sIHRvb2wg7J2066aEXHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIHNlbGVjdFRvb2wodG9vbCkge1xyXG4gICAgaWYgKFxyXG4gICAgICBfdGVtcGxhdGVNb2Quc2VsZWN0QWRkRmllbGRUeXBlICE9PSBcIlwiIHx8XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5zZWxlY3RBZGRGaWVsZFR5cGUgIT09IHVuZGVmaW5lZFxyXG4gICAgKSB7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5yZW1vdmVUZW1wbGF0ZVJlY3QoKTtcclxuICAgIH1cclxuICAgIHN3aXRjaCAodG9vbCkge1xyXG4gICAgICBjYXNlIDA6IHtcclxuICAgICAgICBpZiAoX3RlbXBsYXRlTW9kLnNlbGVjdEFkZEZpZWxkVHlwZSA9PT0gXCJTaWduRmllbGRcIikge1xyXG4gICAgICAgICAgX3RlbXBsYXRlTW9kLnJlc2V0VG9vbCgpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfdGVtcGxhdGVNb2Quc2VsZWN0QWRkRmllbGRUeXBlID0gXCJTaWduRmllbGRcIjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlIDE6IHtcclxuICAgICAgICBpZiAoX3RlbXBsYXRlTW9kLnNlbGVjdEFkZEZpZWxkVHlwZSA9PT0gXCJUZXh0RmllbGRcIikge1xyXG4gICAgICAgICAgX3RlbXBsYXRlTW9kLnJlc2V0VG9vbCgpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfdGVtcGxhdGVNb2Quc2VsZWN0QWRkRmllbGRUeXBlID0gXCJUZXh0RmllbGRcIjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlIDI6IHtcclxuICAgICAgICBpZiAoX3RlbXBsYXRlTW9kLnNlbGVjdEFkZEZpZWxkVHlwZSA9PT0gXCJNdWx0aUxpbmVUZXh0RmllbGRcIikge1xyXG4gICAgICAgICAgX3RlbXBsYXRlTW9kLnJlc2V0VG9vbCgpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfdGVtcGxhdGVNb2Quc2VsZWN0QWRkRmllbGRUeXBlID0gXCJNdWx0aUxpbmVUZXh0RmllbGRcIjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlIDM6IHtcclxuICAgICAgICBpZiAoX3RlbXBsYXRlTW9kLnNlbGVjdEFkZEZpZWxkVHlwZSA9PT0gXCJMYWJlbEZpZWxkXCIpIHtcclxuICAgICAgICAgIF90ZW1wbGF0ZU1vZC5yZXNldFRvb2woKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLnNlbGVjdEFkZEZpZWxkVHlwZSA9IFwiTGFiZWxGaWVsZFwiO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgNDoge1xyXG4gICAgICAgIGlmIChfdGVtcGxhdGVNb2Quc2VsZWN0QWRkRmllbGRUeXBlID09PSBcIkNoZWNrYm94RmllbGRcIikge1xyXG4gICAgICAgICAgX3RlbXBsYXRlTW9kLnJlc2V0VG9vbCgpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfdGVtcGxhdGVNb2Quc2VsZWN0QWRkRmllbGRUeXBlID0gXCJDaGVja2JveEZpZWxkXCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSA1OiB7XHJcbiAgICAgICAgaWYgKF90ZW1wbGF0ZU1vZC5zZWxlY3RBZGRGaWVsZFR5cGUgPT09IFwiUmFkaW9GaWVsZFwiKSB7XHJcbiAgICAgICAgICBfdGVtcGxhdGVNb2QucmVzZXRUb29sKCk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5zZWxlY3RBZGRGaWVsZFR5cGUgPSBcIlJhZGlvRmllbGRcIjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlIDY6IHtcclxuICAgICAgICBpZiAoX3RlbXBsYXRlTW9kLnNlbGVjdEFkZEZpZWxkVHlwZSA9PT0gXCJDb21ib2JveEZpZWxkXCIpIHtcclxuICAgICAgICAgIF90ZW1wbGF0ZU1vZC5yZXNldFRvb2woKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLnNlbGVjdEFkZEZpZWxkVHlwZSA9IFwiQ29tYm9ib3hGaWVsZFwiO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgNzoge1xyXG4gICAgICAgIGlmIChfdGVtcGxhdGVNb2Quc2VsZWN0QWRkRmllbGRUeXBlID09PSBcIkRhdGVGaWVsZFwiKSB7XHJcbiAgICAgICAgICBfdGVtcGxhdGVNb2QucmVzZXRUb29sKCk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5zZWxlY3RBZGRGaWVsZFR5cGUgPSBcIkRhdGVGaWVsZFwiO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgODoge1xyXG4gICAgICAgIGlmIChfdGVtcGxhdGVNb2Quc2VsZWN0QWRkRmllbGRUeXBlID09PSBcIk51bWJlckZpZWxkXCIpIHtcclxuICAgICAgICAgIF90ZW1wbGF0ZU1vZC5yZXNldFRvb2woKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLnNlbGVjdEFkZEZpZWxkVHlwZSA9IFwiTnVtYmVyRmllbGRcIjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlIDk6IHtcclxuICAgICAgICBpZiAoX3RlbXBsYXRlTW9kLnNlbGVjdEFkZEZpZWxkVHlwZSA9PT0gXCJJbWFnZUZpZWxkXCIpIHtcclxuICAgICAgICAgIF90ZW1wbGF0ZU1vZC5yZXNldFRvb2woKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLnNlbGVjdEFkZEZpZWxkVHlwZSA9IFwiSW1hZ2VGaWVsZFwiO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX3RlbXBsYXRlTW9kLmNyZWF0ZVRlbXBsYXRlUmVjdCgpO1xyXG4gICAgX3RlbXBsYXRlTW9kLmhpZGVGaWVsZEF0dHJpYnV0ZSgpO1xyXG4gICAgX3RlbXBsYXRlTW9kLmhpZGVBbGxSZXNpemVIYW5kbGVzKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gc2hvd0FzdGVyaXNrRGl2XHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3Nob3dBc3Rlcmlza0RpdlxyXG4gICAqIEBkZXNjcmlwdGlvbiDtlbTri7kg7ZWE65OcIElE7J2YIO2VhOyImCDsl6zrtoDrpbwg67O07Jes7KSE7KeAIOyXrOu2gOulvCDshKTsoJXtlZzri6QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRJZCAgRmllbGQgaWRcclxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlzU2hvdyAgICAg67O07Jes7KSE7KeAIOyXrOu2gFxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBmaWVsZFggICAgIO2VhOuTnOydmCBY7KKM7ZGcXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGZpZWxkWSAgICAg7ZWE65Oc7J2YIFnsooztkZxcclxuICAgKiBAcGFyYW0ge051bWJlcn0gZmllbGRIZWlnaHQgICDtlYTrk5zsnZgg64aS7J20XHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIHNob3dBc3Rlcmlza0RpdihmaWVsZElkLCBpc1Nob3csIGZpZWxkWCwgZmllbGRZLCBmaWVsZEhlaWdodCkge1xyXG4gICAgbGV0IGFzdGVyaXNrRGl2ID0gX3RlbXBsYXRlTW9kLm93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiAjXCIgKyBmaWVsZElkICsgXCJfYXN0ZXJpc2tcIlxyXG4gICAgKTtcclxuICAgIGlmIChhc3Rlcmlza0RpdiA9PT0gbnVsbCkge1xyXG4gICAgICBjb25zdCBhc3Rlcmlza0RpdiA9IFV0aWxzLmNyZWF0ZUFzdGVyaXNrRGl2KFxyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5vd25lck5vZGUsXHJcbiAgICAgICAgZmllbGRJZFxyXG4gICAgICApO1xyXG4gICAgICBhc3Rlcmlza0Rpdi5pZCA9IGZpZWxkSWQgKyBcIl9hc3Rlcmlza1wiO1xyXG4gICAgfVxyXG4gICAgVXRpbHMuc2hvd0FzdGVyaXNrRGl2KFxyXG4gICAgICBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLFxyXG4gICAgICBmaWVsZElkLFxyXG4gICAgICBpc1Nob3csXHJcbiAgICAgIGZpZWxkWCxcclxuICAgICAgZmllbGRZLFxyXG4gICAgICBmaWVsZEhlaWdodFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBzaG93RmllbGRBdHRyaWJ1dGVcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2Qjc2hvd0ZpZWxkQXR0cmlidXRlXHJcbiAgICogQGRlc2NyaXB0aW9uICDtlbTri7kg7ZWE65OcIElE7J2YIOyGjeyEseywveydhCDrs7Tsl6zspIDri6QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRJZCAgRmllbGQgaWRcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgc2hvd0ZpZWxkQXR0cmlidXRlKGZpZWxkSWQpIHtcclxuICAgIGNvbnN0IGZpZWxkID0gX3RlbXBsYXRlTW9kLmZpZWxkRGljdGlvbmFyeVtmaWVsZElkXTtcclxuICAgIGxldCBhdHRyTm9kZSA9IFV0aWxzLmNyZWF0ZUF0dHJidXRlUG9wdXAoXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5vd25lck5vZGUsXHJcbiAgICAgIGZpZWxkLmdldEJCb3goKVxyXG4gICAgKTtcclxuICAgIHZhciBtYWluR3JvdXAgPSBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy5zZWxlY3QoXHJcbiAgICAgIFwiI1wiICsgQ09OU1RBTlRTLk1BSU5fR1JPVVBfTkFNRVxyXG4gICAgKTtcclxuICAgIHZhciBmaWVsZEFuY2VzdG9ycyA9IFV0aWxzLmZpZWxkQW5jZXN0b3JzKGZpZWxkKTtcclxuICAgIGZpZWxkQW5jZXN0b3JzWzBdLmNvbnN0cnVjdG9yLnNob3dGaWVsZHNBdHRyaWJ1dGUoXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5vd25lck5vZGUsXHJcbiAgICAgIFtmaWVsZF0sXHJcbiAgICAgIGF0dHJOb2RlLFxyXG4gICAgICBtYWluR3JvdXAsXHJcbiAgICAgIFV0aWxzLmdldFVzZXJJbmZvT3B0c0xpc3QoKSxcclxuICAgICAgVXRpbHMuZ2V0RFZGaWVsZE9wdHNMaXN0KCksXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5jaGFuZ2VGaWVsZFZhbHVlRXZlbnQsXHJcbiAgICAgIFV0aWxzLmdldFNpZ25UYWJTaG93T3B0KCksXHJcbiAgICApO1xyXG5cclxuICAgIGxldCBkZWxldGVCdG5Ob2RlID0gVXRpbHMuY3JlYXRlRmllbGREZWxldGVCdG4oXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5vd25lck5vZGUsXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5maWVsZERlbGV0ZUJ0bkNsaWNrZWRcclxuICAgICk7XHJcbiAgICBkZWxldGVCdG5Ob2RlLnN0eWxlLmxlZnQgPSBmaWVsZC54ICsgZmllbGQud2lkdGggKyAxMCArIFwicHhcIjtcclxuICAgIGNvbnN0IGZpZWxkQ2VudGVyWSA9IGZpZWxkLnkgKyBmaWVsZC5oZWlnaHQgLyAyIC0gMTA7XHJcbiAgICBkZWxldGVCdG5Ob2RlLnN0eWxlLnRvcCA9IGZpZWxkQ2VudGVyWSArIFwicHhcIjtcclxuICAgIF90ZW1wbGF0ZU1vZC5zZWxlY3RVc2VyTGlzdChmaWVsZC5vd25lcklkKTtcclxuICB9XHJcblxyXG4gIHNob3dDb21tb25GaWVsZExpc3RBdHRyaWJ1dGUoXHJcbiAgICB0eXBlLFxyXG4gICAgb3duZXJOb2RlLFxyXG4gICAgZmllbGRMaXN0LFxyXG4gICAgYXR0ck5vZGUsXHJcbiAgICBtYWluR3JvdXAsXHJcbiAgICB1c2VyTGlzdCxcclxuICAgIGR2T3B0aW9uTGlzdCxcclxuICAgIGNoYW5nZUV2ZW50RnVuY1xyXG4gICkge1xyXG4gICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgIGNhc2UgXCJURlwiOiB7XHJcbiAgICAgICAgcmV0dXJuIFRleHRGaWVsZC5zaG93RmllbGRzQXR0cmlidXRlKFxyXG4gICAgICAgICAgb3duZXJOb2RlLFxyXG4gICAgICAgICAgZmllbGRMaXN0LFxyXG4gICAgICAgICAgYXR0ck5vZGUsXHJcbiAgICAgICAgICBtYWluR3JvdXAsXHJcbiAgICAgICAgICB1c2VyTGlzdCxcclxuICAgICAgICAgIGR2T3B0aW9uTGlzdCxcclxuICAgICAgICAgIGNoYW5nZUV2ZW50RnVuY1xyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIkxGXCI6IHtcclxuICAgICAgICByZXR1cm4gTGFiZWxGaWVsZC5zaG93RmllbGRzQXR0cmlidXRlKFxyXG4gICAgICAgICAgb3duZXJOb2RlLFxyXG4gICAgICAgICAgZmllbGRMaXN0LFxyXG4gICAgICAgICAgYXR0ck5vZGUsXHJcbiAgICAgICAgICBtYWluR3JvdXAsXHJcbiAgICAgICAgICB1c2VyTGlzdCxcclxuICAgICAgICAgIGR2T3B0aW9uTGlzdCxcclxuICAgICAgICAgIGNoYW5nZUV2ZW50RnVuY1xyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIlNGXCI6IHtcclxuICAgICAgICByZXR1cm4gU2lnbkZpZWxkLnNob3dGaWVsZHNBdHRyaWJ1dGUoXHJcbiAgICAgICAgICBvd25lck5vZGUsXHJcbiAgICAgICAgICBmaWVsZExpc3QsXHJcbiAgICAgICAgICBhdHRyTm9kZSxcclxuICAgICAgICAgIG1haW5Hcm91cCxcclxuICAgICAgICAgIHVzZXJMaXN0LFxyXG4gICAgICAgICAgZHZPcHRpb25MaXN0LFxyXG4gICAgICAgICAgY2hhbmdlRXZlbnRGdW5jLFxyXG4gICAgICAgICAgVXRpbHMuZ2V0U2lnblRhYlNob3dPcHQoKSxcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgXCJORlwiOiB7XHJcbiAgICAgICAgcmV0dXJuIE51bWJlckZpZWxkLnNob3dGaWVsZHNBdHRyaWJ1dGUoXHJcbiAgICAgICAgICBvd25lck5vZGUsXHJcbiAgICAgICAgICBmaWVsZExpc3QsXHJcbiAgICAgICAgICBhdHRyTm9kZSxcclxuICAgICAgICAgIG1haW5Hcm91cCxcclxuICAgICAgICAgIHVzZXJMaXN0LFxyXG4gICAgICAgICAgZHZPcHRpb25MaXN0LFxyXG4gICAgICAgICAgY2hhbmdlRXZlbnRGdW5jXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwiREZcIjoge1xyXG4gICAgICAgIHJldHVybiBEYXRlRmllbGQuc2hvd0ZpZWxkc0F0dHJpYnV0ZShcclxuICAgICAgICAgIG93bmVyTm9kZSxcclxuICAgICAgICAgIGZpZWxkTGlzdCxcclxuICAgICAgICAgIGF0dHJOb2RlLFxyXG4gICAgICAgICAgbWFpbkdyb3VwLFxyXG4gICAgICAgICAgdXNlckxpc3QsXHJcbiAgICAgICAgICBkdk9wdGlvbkxpc3QsXHJcbiAgICAgICAgICBjaGFuZ2VFdmVudEZ1bmNcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgXCJJTUdGXCI6IHtcclxuICAgICAgICByZXR1cm4gSW1hZ2VGaWVsZC5zaG93RmllbGRzQXR0cmlidXRlKFxyXG4gICAgICAgICAgb3duZXJOb2RlLFxyXG4gICAgICAgICAgZmllbGRMaXN0LFxyXG4gICAgICAgICAgYXR0ck5vZGUsXHJcbiAgICAgICAgICBtYWluR3JvdXAsXHJcbiAgICAgICAgICB1c2VyTGlzdCxcclxuICAgICAgICAgIGR2T3B0aW9uTGlzdCxcclxuICAgICAgICAgIGNoYW5nZUV2ZW50RnVuY1xyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIk1MVEZcIjoge1xyXG4gICAgICAgIHJldHVybiBNdWx0aUxpbmVUZXh0RmllbGQuc2hvd0ZpZWxkc0F0dHJpYnV0ZShcclxuICAgICAgICAgIG93bmVyTm9kZSxcclxuICAgICAgICAgIGZpZWxkTGlzdCxcclxuICAgICAgICAgIGF0dHJOb2RlLFxyXG4gICAgICAgICAgbWFpbkdyb3VwLFxyXG4gICAgICAgICAgdXNlckxpc3QsXHJcbiAgICAgICAgICBkdk9wdGlvbkxpc3QsXHJcbiAgICAgICAgICBjaGFuZ2VFdmVudEZ1bmNcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgXCJDQkZcIjoge1xyXG4gICAgICAgIHJldHVybiBDaGVja2JveEZpZWxkLnNob3dGaWVsZHNBdHRyaWJ1dGUoXHJcbiAgICAgICAgICBvd25lck5vZGUsXHJcbiAgICAgICAgICBmaWVsZExpc3QsXHJcbiAgICAgICAgICBhdHRyTm9kZSxcclxuICAgICAgICAgIG1haW5Hcm91cCxcclxuICAgICAgICAgIHVzZXJMaXN0LFxyXG4gICAgICAgICAgZHZPcHRpb25MaXN0LFxyXG4gICAgICAgICAgY2hhbmdlRXZlbnRGdW5jXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwiUkZcIjoge1xyXG4gICAgICAgIHJldHVybiBSYWRpb0ZpZWxkLnNob3dGaWVsZHNBdHRyaWJ1dGUoXHJcbiAgICAgICAgICBvd25lck5vZGUsXHJcbiAgICAgICAgICBmaWVsZExpc3QsXHJcbiAgICAgICAgICBhdHRyTm9kZSxcclxuICAgICAgICAgIG1haW5Hcm91cCxcclxuICAgICAgICAgIHVzZXJMaXN0LFxyXG4gICAgICAgICAgZHZPcHRpb25MaXN0LFxyXG4gICAgICAgICAgY2hhbmdlRXZlbnRGdW5jXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwiQ01CRlwiOiB7XHJcbiAgICAgICAgcmV0dXJuIENvbWJvYm94RmllbGQuc2hvd0ZpZWxkc0F0dHJpYnV0ZShcclxuICAgICAgICAgIG93bmVyTm9kZSxcclxuICAgICAgICAgIGZpZWxkTGlzdCxcclxuICAgICAgICAgIGF0dHJOb2RlLFxyXG4gICAgICAgICAgbWFpbkdyb3VwLFxyXG4gICAgICAgICAgdXNlckxpc3QsXHJcbiAgICAgICAgICBkdk9wdGlvbkxpc3QsXHJcbiAgICAgICAgICBjaGFuZ2VFdmVudEZ1bmNcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICByZXR1cm4gQmFzZUZpZWxkLnNob3dGaWVsZHNBdHRyaWJ1dGUoXHJcbiAgICAgICAgICBvd25lck5vZGUsXHJcbiAgICAgICAgICBmaWVsZExpc3QsXHJcbiAgICAgICAgICBhdHRyTm9kZSxcclxuICAgICAgICAgIG1haW5Hcm91cCxcclxuICAgICAgICAgIHVzZXJMaXN0LFxyXG4gICAgICAgICAgZHZPcHRpb25MaXN0LFxyXG4gICAgICAgICAgY2hhbmdlRXZlbnRGdW5jXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIHNob3dGaWVsZExpc3RBdHRyaWJ1dGVcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2Qjc2hvd0ZpZWxkTGlzdEF0dHJpYnV0ZVxyXG4gICAqIEBkZXNjcmlwdGlvbiDtlbTri7kg7ZWE65Oc65Ok7J2YIOyGjeyEseywveydhCDrs7Tsl6zspIDri6QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0FycmF5fSBmaWVsZExpc3QgIEZpZWxkIE9iamVjdCBMaXN0XHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIHNob3dGaWVsZExpc3RBdHRyaWJ1dGUoZmllbGRMaXN0KSB7XHJcbiAgICB2YXIgZHJhZ092ZXJCb3ggPSBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy5zZWxlY3QoXHJcbiAgICAgIFwiI1wiICsgQ09OU1RBTlRTLkRSQUdfQk9YX05BTUVcclxuICAgICk7XHJcbiAgICB2YXIgZHJhZ092ZXJCQm94ID0gZHJhZ092ZXJCb3guZ2V0QkJveCgpO1xyXG4gICAgbGV0IGF0dHJOb2RlID0gVXRpbHMuY3JlYXRlQXR0cmJ1dGVQb3B1cChcclxuICAgICAgX3RlbXBsYXRlTW9kLm93bmVyTm9kZSxcclxuICAgICAgZHJhZ092ZXJCQm94XHJcbiAgICApO1xyXG4gICAgdmFyIG1haW5Hcm91cCA9IF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzLnNlbGVjdChcclxuICAgICAgXCIjXCIgKyBDT05TVEFOVFMuTUFJTl9HUk9VUF9OQU1FXHJcbiAgICApO1xyXG4gICAgLy8gY29uc29sZS5sb2coVXRpbHMuZmluZFNhbWVBbmNlc3RvcjIoZmllbGRMaXN0KSk7XHJcbiAgICBjb25zdCBjb21tb25GaWVsZFR5cGUgPSBVdGlscy5maW5kU2FtZUFuY2VzdG9yMihmaWVsZExpc3QpO1xyXG4gICAgX3RlbXBsYXRlTW9kLnNob3dDb21tb25GaWVsZExpc3RBdHRyaWJ1dGUoXHJcbiAgICAgIGNvbW1vbkZpZWxkVHlwZSxcclxuICAgICAgX3RlbXBsYXRlTW9kLm93bmVyTm9kZSxcclxuICAgICAgZmllbGRMaXN0LFxyXG4gICAgICBhdHRyTm9kZSxcclxuICAgICAgbWFpbkdyb3VwLFxyXG4gICAgICBVdGlscy5nZXRVc2VySW5mb09wdHNMaXN0KCksXHJcbiAgICAgIFV0aWxzLmdldERWRmllbGRPcHRzTGlzdCgpLFxyXG4gICAgICBfdGVtcGxhdGVNb2QuY2hhbmdlRmllbGRWYWx1ZUV2ZW50XHJcbiAgICApO1xyXG5cclxuICAgIGxldCBkZWxldGVCdG5Ob2RlID0gVXRpbHMuY3JlYXRlRmllbGREZWxldGVCdG4oXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5vd25lck5vZGUsXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5maWVsZERlbGV0ZUJ0bkNsaWNrZWRcclxuICAgICk7XHJcbiAgICBkZWxldGVCdG5Ob2RlLnN0eWxlLmxlZnQgPSBkcmFnT3ZlckJCb3gueCArIGRyYWdPdmVyQkJveC53aWR0aCArIDEwICsgXCJweFwiO1xyXG4gICAgZGVsZXRlQnRuTm9kZS5zdHlsZS50b3AgPSBkcmFnT3ZlckJCb3gueSArIDEwICsgXCJweFwiO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIHNvcnRGaWVsZHNBbGlnblxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNzb3J0RmllbGRzQWxpZ25cclxuICAgKiBAZGVzY3JpcHRpb24g7ISg7YOd65CcIO2VhOuTnOuTpOydmCDsnITsuZjrpbwg7KCV66CsIOyLnO2CqOuLpC4uXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAg7KCV66CsIOydtOumhC4gbGVmdCwgaENlbnRlciwgcmlnaHQsIHRvcCwgdkNlbnRlciwgYm90dG9tLCBWUmVndWxhckludGVydmFsLCBIUmVndWxhckludGVydmFsXHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIHNvcnRGaWVsZHNBbGlnbih0eXBlKSB7XHJcbiAgICB2YXIgdGVtcEdCb3ggPSBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy5zZWxlY3QoXHJcbiAgICAgIFwiI1wiICsgQ09OU1RBTlRTLkRSQUdfQk9YX05BTUVcclxuICAgICk7XHJcbiAgICBpZiAodGVtcEdCb3ggPT09IG51bGwpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBzZWxlY3RlZEl0ZW1zID0gX3RlbXBsYXRlTW9kLm1haW5DYW52YXMuc2VsZWN0QWxsKFxyXG4gICAgICBcIiNcIiArIENPTlNUQU5UUy5EUkFHX0JPWF9OQU1FICsgXCIgPiBnXCJcclxuICAgICk7XHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgY2FzZSBcImxlZnRcIjoge1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5zb3J0RmllbGRzTGVmdEFsaWduKHNlbGVjdGVkSXRlbXMpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgXCJoQ2VudGVyXCI6IHtcclxuICAgICAgICBfdGVtcGxhdGVNb2Quc29ydEZpZWxkc0hDZW50ZXJBbGlnbih0ZW1wR0JveCwgc2VsZWN0ZWRJdGVtcyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcInJpZ2h0XCI6IHtcclxuICAgICAgICBfdGVtcGxhdGVNb2Quc29ydEZpZWxkc1JpZ2h0QWxpZ24oc2VsZWN0ZWRJdGVtcyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcInRvcFwiOiB7XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLnNvcnRGaWVsZHNUb3BBbGlnbihzZWxlY3RlZEl0ZW1zKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwidkNlbnRlclwiOiB7XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLnNvcnRGaWVsZHNWQ2VudGVyQWxpZ24odGVtcEdCb3gsIHNlbGVjdGVkSXRlbXMpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgXCJib3R0b21cIjoge1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5zb3J0RmllbGRzQm90dG9tQWxpZ24oc2VsZWN0ZWRJdGVtcyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIlZSZWd1bGFySW50ZXJ2YWxcIjoge1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5zb3J0RmllbGRzVlJlZ3VsYXJJbnRlcnZhbEFsaWduKHNlbGVjdGVkSXRlbXMpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgXCJIUmVndWxhckludGVydmFsXCI6IHtcclxuICAgICAgICBfdGVtcGxhdGVNb2Quc29ydEZpZWxkc0hSZWd1bGFySW50ZXJ2YWxBbGlnbihzZWxlY3RlZEl0ZW1zKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgX3RlbXBsYXRlTW9kLnRtcEdyb3VwRnRFdmVudChcImRyYWcgZW5kXCIpO1xyXG4gICAgX3RlbXBsYXRlTW9kLmNoYW5nZUdyb3VwQm94RnJlZVRyYW5zZm9ybSh0ZW1wR0JveCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gc29ydEZpZWxkc0JvdHRvbUFsaWduXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3NvcnRGaWVsZHNCb3R0b21BbGlnblxyXG4gICAqIEBkZXNjcmlwdGlvbiDshKDtg53rkJwg7ZWE65Oc65Ok7J2EIOqwgOyepSDrgq7snYAgWeyijO2RnOuhnCDsoJXroKzsi5ztgqjri6QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0FycmF5fSBzZWxlY3RlZEl0ZW1zICBGaWVsZCBMaXN0XHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIHNvcnRGaWVsZHNCb3R0b21BbGlnbihzZWxlY3RlZEl0ZW1zKSB7XHJcbiAgICBpZiAoc2VsZWN0ZWRJdGVtcy5sZW5ndGggPCAyKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciBtaW5ZID0gMDtcclxuICAgIHNlbGVjdGVkSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB2YXIgY2hpbGRSZWN0ID0gaXRlbS5zZWxlY3QoXCJyZWN0XCIpO1xyXG4gICAgICB2YXIgYmJveCA9IGNoaWxkUmVjdC5nZXRCQm94KCk7XHJcbiAgICAgIGlmIChiYm94LnkyID4gbWluWSkge1xyXG4gICAgICAgIG1pblkgPSBiYm94LnkyO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHNlbGVjdGVkSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB2YXIgY2hpbGRSZWN0ID0gaXRlbS5zZWxlY3QoXCJyZWN0XCIpO1xyXG4gICAgICB2YXIgYmJveCA9IGNoaWxkUmVjdC5nZXRCQm94KCk7XHJcbiAgICAgIGNoaWxkUmVjdC5hdHRyKHsgeTogbWluWSAtIGJib3guaGVpZ2h0IH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gc29ydEZpZWxkc0hDZW50ZXJBbGlnblxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNzb3J0RmllbGRzSENlbnRlckFsaWduXHJcbiAgICogQGRlc2NyaXB0aW9uICDshKDtg53rkJwg7ZWE65Oc65Ok7J2YIFnsooztkZwg7KSR7JWZ7Jy866GcIOygleugrOyLnO2CqOuLpC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7QXJyYXl9IHNlbGVjdGVkSXRlbXMgIEZpZWxkIExpc3RcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgc29ydEZpZWxkc0hDZW50ZXJBbGlnbih0ZW1wR0JveCwgc2VsZWN0ZWRJdGVtcykge1xyXG4gICAgaWYgKHNlbGVjdGVkSXRlbXMubGVuZ3RoIDwgMikge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB2YXIgZ3JvdXBCYm94ID0gdGVtcEdCb3guZ2V0QkJveCgpO1xyXG4gICAgdmFyIGN4ID0gZ3JvdXBCYm94LmN4O1xyXG4gICAgc2VsZWN0ZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHZhciBjaGlsZFJlY3QgPSBpdGVtLnNlbGVjdChcInJlY3RcIik7XHJcbiAgICAgIHZhciBiYm94ID0gY2hpbGRSZWN0LmdldEJCb3goKTtcclxuICAgICAgY2hpbGRSZWN0LmF0dHIoeyB4OiBjeCAtIGJib3gud2lkdGggLyAyIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gc29ydEZpZWxkc0hSZWd1bGFySW50ZXJ2YWxBbGlnblxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNzb3J0RmllbGRzSFJlZ3VsYXJJbnRlcnZhbEFsaWduXHJcbiAgICogQGRlc2NyaXB0aW9uICDshKDtg53rkJwg7ZWE65Oc65Ok7J2EIOqwgOuhnCDqsITqsqnsnbQg7J287KCV7ZWY6rKMIOygleugrO2VnOuLpC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7QXJyYXl9IHNlbGVjdGVkSXRlbXMgIEZpZWxkIExpc3RcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgc29ydEZpZWxkc0hSZWd1bGFySW50ZXJ2YWxBbGlnbihzZWxlY3RlZEl0ZW1zKSB7XHJcbiAgICBpZiAoc2VsZWN0ZWRJdGVtcy5sZW5ndGggPCAzKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciBpdGVtcyA9IEFycmF5LmZyb20oc2VsZWN0ZWRJdGVtcyk7XHJcbiAgICBpdGVtcyA9IGl0ZW1zLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgdmFyIGNoaWxkUmVjdEEgPSBhLnNlbGVjdChcInJlY3RcIikuZ2V0QkJveCgpO1xyXG4gICAgICB2YXIgY2hpbGRSZWN0QiA9IGIuc2VsZWN0KFwicmVjdFwiKS5nZXRCQm94KCk7XHJcbiAgICAgIHJldHVybiBjaGlsZFJlY3RBLnggLSBjaGlsZFJlY3RCLng7XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgZmlyc3RJdGVtID0gaXRlbXNbMF07XHJcbiAgICB2YXIgbGFzdEl0ZW0gPSBpdGVtc1tpdGVtcy5sZW5ndGggLSAxXTtcclxuICAgIHZhciBmaXJzdEl0ZW1CQm94ID0gZmlyc3RJdGVtLmdldEJCb3goKTtcclxuICAgIHZhciBsYXN0SXRlbUJCb3ggPSBsYXN0SXRlbS5nZXRCQm94KCk7XHJcbiAgICB2YXIgdG90YWxJbnRlcnZhbCA9IE1hdGguYWJzKGxhc3RJdGVtQkJveC54IC0gZmlyc3RJdGVtQkJveC54Mik7XHJcbiAgICBmb3IgKHZhciBpZHggPSAxOyBpZHggPCBpdGVtcy5sZW5ndGggLSAxOyArK2lkeCkge1xyXG4gICAgICB2YXIgaXRlbSA9IGl0ZW1zW2lkeF07XHJcbiAgICAgIHZhciBjaGlsZFJlY3QgPSBpdGVtLnNlbGVjdChcInJlY3RcIik7XHJcbiAgICAgIHZhciBiYm94ID0gY2hpbGRSZWN0LmdldEJCb3goKTtcclxuICAgICAgdG90YWxJbnRlcnZhbCA9IHRvdGFsSW50ZXJ2YWwgLSBiYm94LndpZHRoO1xyXG4gICAgfVxyXG4gICAgdmFyIGJldHdlZW5JdGVtQ250ID0gaXRlbXMubGVuZ3RoIC0gMTtcclxuICAgIHZhciBpbnRlcnZhbCA9IHRvdGFsSW50ZXJ2YWwgLyBiZXR3ZWVuSXRlbUNudDtcclxuICAgIHZhciBiZWZvcmVYMiA9IGZpcnN0SXRlbUJCb3gueDI7XHJcbiAgICBmb3IgKHZhciBpZHgyID0gMTsgaWR4MiA8IGl0ZW1zLmxlbmd0aCAtIDE7ICsraWR4Mikge1xyXG4gICAgICB2YXIgaXRlbTIgPSBpdGVtc1tpZHgyXTtcclxuICAgICAgdmFyIGNoaWxkUmVjdDIgPSBpdGVtMi5zZWxlY3QoXCJyZWN0XCIpO1xyXG4gICAgICBjaGlsZFJlY3QyLmF0dHIoeyB4OiBiZWZvcmVYMiArIGludGVydmFsIH0pO1xyXG4gICAgICB2YXIgYmJveDIgPSBjaGlsZFJlY3QyLmdldEJCb3goKTtcclxuICAgICAgYmVmb3JlWDIgPSBiYm94Mi54MjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBzb3J0RmllbGRzTGVmdEFsaWduXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3NvcnRGaWVsZHNMZWZ0QWxpZ25cclxuICAgKiBAZGVzY3JpcHRpb24g7ISg7YOd65CcIO2VhOuTnOuTpOydhCDqsIDsnqUg64Ku7J2AIFjsooztkZzroZwg7KCV66Cs7Iuc7YKo64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtBcnJheX0gc2VsZWN0ZWRJdGVtcyBGaWVsZCBMaXN0XHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIHNvcnRGaWVsZHNMZWZ0QWxpZ24oc2VsZWN0ZWRJdGVtcykge1xyXG4gICAgaWYgKHNlbGVjdGVkSXRlbXMubGVuZ3RoIDwgMikge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB2YXIgbWluWCA9IE51bWJlci5NQVhfVkFMVUU7XHJcbiAgICBzZWxlY3RlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdmFyIGNoaWxkUmVjdCA9IGl0ZW0uc2VsZWN0KFwicmVjdFwiKTtcclxuICAgICAgdmFyIGJib3ggPSBjaGlsZFJlY3QuZ2V0QkJveCgpO1xyXG4gICAgICBpZiAoYmJveC54IDwgbWluWCkge1xyXG4gICAgICAgIG1pblggPSBiYm94Lng7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHNlbGVjdGVkSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB2YXIgY2hpbGRSZWN0ID0gaXRlbS5zZWxlY3QoXCJyZWN0XCIpO1xyXG4gICAgICBjaGlsZFJlY3QuYXR0cih7IHg6IG1pblggfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBzb3J0RmllbGRzUmlnaHRBbGlnblxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNzb3J0RmllbGRzUmlnaHRBbGlnblxyXG4gICAqIEBkZXNjcmlwdGlvbiAg7ISg7YOd65CcIO2VhOuTnOuTpOydhCDqsIDsnqUg7YGwIFjsooztkZzroZwg7KCV66Cs7Iuc7YKo64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtBcnJheX0gc2VsZWN0ZWRJdGVtcyAgRmllbGQgTGlzdFxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBzb3J0RmllbGRzUmlnaHRBbGlnbihzZWxlY3RlZEl0ZW1zKSB7XHJcbiAgICBpZiAoc2VsZWN0ZWRJdGVtcy5sZW5ndGggPCAyKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciBtaW5YID0gMDtcclxuICAgIHNlbGVjdGVkSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB2YXIgY2hpbGRSZWN0ID0gaXRlbS5zZWxlY3QoXCJyZWN0XCIpO1xyXG4gICAgICB2YXIgYmJveCA9IGNoaWxkUmVjdC5nZXRCQm94KCk7XHJcbiAgICAgIGlmIChiYm94LngyID4gbWluWCkge1xyXG4gICAgICAgIG1pblggPSBiYm94LngyO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBzZWxlY3RlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdmFyIGNoaWxkUmVjdCA9IGl0ZW0uc2VsZWN0KFwicmVjdFwiKTtcclxuICAgICAgdmFyIGJib3ggPSBjaGlsZFJlY3QuZ2V0QkJveCgpO1xyXG4gICAgICBjaGlsZFJlY3QuYXR0cih7IHg6IG1pblggLSBiYm94LndpZHRoIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gc29ydEZpZWxkc1RvcEFsaWduXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3NvcnRGaWVsZHNUb3BBbGlnblxyXG4gICAqIEBkZXNjcmlwdGlvbiDshKDtg53rkJwg7ZWE65Oc65Ok7J2EIOqwgOyepSDrhpLsnYAgWeyijO2RnOuhnCDsoJXroKzsi5ztgqjri6QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0FycmF5fSBzZWxlY3RlZEl0ZW1zICBGaWVsZCBMaXN0XHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIHNvcnRGaWVsZHNUb3BBbGlnbihzZWxlY3RlZEl0ZW1zKSB7XHJcbiAgICBpZiAoc2VsZWN0ZWRJdGVtcy5sZW5ndGggPCAyKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciBtaW5ZID0gTnVtYmVyLk1BWF9WQUxVRTtcclxuICAgIHNlbGVjdGVkSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB2YXIgY2hpbGRSZWN0ID0gaXRlbS5zZWxlY3QoXCJyZWN0XCIpO1xyXG4gICAgICB2YXIgYmJveCA9IGNoaWxkUmVjdC5nZXRCQm94KCk7XHJcbiAgICAgIGlmIChiYm94LnkgPCBtaW5ZKSB7XHJcbiAgICAgICAgbWluWSA9IGJib3gueTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgc2VsZWN0ZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHZhciBjaGlsZFJlY3QgPSBpdGVtLnNlbGVjdChcInJlY3RcIik7XHJcbiAgICAgIGNoaWxkUmVjdC5hdHRyKHsgeTogbWluWSB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIHNvcnRGaWVsZHNWQ2VudGVyQWxpZ25cclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2Qjc29ydEZpZWxkc1ZDZW50ZXJBbGlnblxyXG4gICAqIEBkZXNjcmlwdGlvbiDshKDtg53rkJwg7ZWE65Oc65Ok7J2EIFnsooztkZzsnZgg6rCA7Jq0642w66GcIOygleugrOyLnO2CqOuLpC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7QXJyYXl9IHNlbGVjdGVkSXRlbXMgIEZpZWxkIExpc3RcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgc29ydEZpZWxkc1ZDZW50ZXJBbGlnbih0ZW1wR0JveCwgc2VsZWN0ZWRJdGVtcykge1xyXG4gICAgaWYgKHNlbGVjdGVkSXRlbXMubGVuZ3RoIDwgMikge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB2YXIgZ3JvdXBCYm94ID0gdGVtcEdCb3guZ2V0QkJveCgpO1xyXG4gICAgdmFyIGN5ID0gZ3JvdXBCYm94LmN5O1xyXG4gICAgc2VsZWN0ZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHZhciBjaGlsZFJlY3QgPSBpdGVtLnNlbGVjdChcInJlY3RcIik7XHJcbiAgICAgIHZhciBiYm94ID0gY2hpbGRSZWN0LmdldEJCb3goKTtcclxuICAgICAgY2hpbGRSZWN0LmF0dHIoeyB5OiBjeSAtIGJib3guaGVpZ2h0IC8gMiB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIHNvcnRGaWVsZHNWUmVndWxhckludGVydmFsQWxpZ25cclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2Qjc29ydEZpZWxkc1ZSZWd1bGFySW50ZXJ2YWxBbGlnblxyXG4gICAqIEBkZXNjcmlwdGlvbiDshKDtg53rkJwg7ZWE65Oc65Ok7J2EIOyEuOuhnOqwhOqyqeydtCDsnbzsoJXtlZjqsowg7KCV66Cs7Iuc7YKo64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtBcnJheX0gc2VsZWN0ZWRJdGVtcyBGaWVsZCBMaXN0XHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIHNvcnRGaWVsZHNWUmVndWxhckludGVydmFsQWxpZ24oc2VsZWN0ZWRJdGVtcykge1xyXG4gICAgaWYgKHNlbGVjdGVkSXRlbXMubGVuZ3RoIDwgMykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB2YXIgaXRlbXMgPSBBcnJheS5mcm9tKHNlbGVjdGVkSXRlbXMpO1xyXG4gICAgaXRlbXMgPSBpdGVtcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgIHZhciBjaGlsZFJlY3RBID0gYS5zZWxlY3QoXCJyZWN0XCIpLmdldEJCb3goKTtcclxuICAgICAgdmFyIGNoaWxkUmVjdEIgPSBiLnNlbGVjdChcInJlY3RcIikuZ2V0QkJveCgpO1xyXG4gICAgICByZXR1cm4gY2hpbGRSZWN0QS55IC0gY2hpbGRSZWN0Qi55O1xyXG4gICAgfSk7XHJcblxyXG4gICAgdmFyIGZpcnN0SXRlbSA9IGl0ZW1zWzBdO1xyXG4gICAgdmFyIGxhc3RJdGVtID0gaXRlbXNbaXRlbXMubGVuZ3RoIC0gMV07XHJcbiAgICB2YXIgZmlyc3RJdGVtQkJveCA9IGZpcnN0SXRlbS5nZXRCQm94KCk7XHJcbiAgICB2YXIgbGFzdEl0ZW1CQm94ID0gbGFzdEl0ZW0uZ2V0QkJveCgpO1xyXG4gICAgdmFyIHRvdGFsSW50ZXJ2YWwgPSBNYXRoLmFicyhsYXN0SXRlbUJCb3gueSAtIGZpcnN0SXRlbUJCb3gueTIpO1xyXG4gICAgZm9yICh2YXIgaWR4ID0gMTsgaWR4IDwgaXRlbXMubGVuZ3RoIC0gMTsgKytpZHgpIHtcclxuICAgICAgdmFyIGl0ZW0gPSBpdGVtc1tpZHhdO1xyXG4gICAgICB2YXIgY2hpbGRSZWN0ID0gaXRlbS5zZWxlY3QoXCJyZWN0XCIpO1xyXG4gICAgICB2YXIgYmJveCA9IGNoaWxkUmVjdC5nZXRCQm94KCk7XHJcbiAgICAgIHRvdGFsSW50ZXJ2YWwgPSB0b3RhbEludGVydmFsIC0gYmJveC5oZWlnaHQ7XHJcbiAgICB9XHJcbiAgICB2YXIgYmV0d2Vlbkl0ZW1DbnQgPSBpdGVtcy5sZW5ndGggLSAxO1xyXG4gICAgdmFyIGludGVydmFsID0gdG90YWxJbnRlcnZhbCAvIGJldHdlZW5JdGVtQ250O1xyXG4gICAgdmFyIGJlZm9yZVkyID0gZmlyc3RJdGVtQkJveC55MjtcclxuICAgIGZvciAodmFyIGlkeDIgPSAxOyBpZHgyIDwgaXRlbXMubGVuZ3RoIC0gMTsgKytpZHgyKSB7XHJcbiAgICAgIHZhciBpdGVtMiA9IGl0ZW1zW2lkeDJdO1xyXG4gICAgICB2YXIgY2hpbGRSZWN0MiA9IGl0ZW0yLnNlbGVjdChcInJlY3RcIik7XHJcbiAgICAgIGNoaWxkUmVjdDIuYXR0cih7IHk6IGJlZm9yZVkyICsgaW50ZXJ2YWwgfSk7XHJcbiAgICAgIHZhciBiYm94MiA9IGNoaWxkUmVjdDIuZ2V0QkJveCgpO1xyXG4gICAgICBiZWZvcmVZMiA9IGJib3gyLnkyO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIHRlbXBsYXRlSW5pdFxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCN0ZW1wbGF0ZUluaXRcclxuICAgKiBAZGVzY3JpcHRpb24g7LSI6riw7ZmUIOyEpOygle2VnOuLpC5cclxuICAgKlxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICB0ZW1wbGF0ZUluaXQoKSB7XHJcbiAgICB2YXIgbGF5ZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgbGF5ZXJEaXYuaWQgPSBDT05TVEFOVFMuVEVNUExBVEVfTEFZRVJfTkFNRTtcclxuICAgIGxheWVyRGl2LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xyXG4gICAgbGF5ZXJEaXYuc3R5bGUudG9wID0gXCIwcHhcIjtcclxuICAgIGxheWVyRGl2LnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcbiAgICBsYXllckRpdi5zdHlsZS56SW5kZXggPSBcIjk5XCI7XHJcbiAgICB2YXIgcGRmQ29udGFpbmVyID0gX3RlbXBsYXRlTW9kLm93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiAjXCIgKyBDT05TVEFOVFMuVEVNUExBVEVfUERGX1ZJRVdFUl9DT05UQUlORVJcclxuICAgICk7XHJcbiAgICBwZGZDb250YWluZXIuYXBwZW5kQ2hpbGQobGF5ZXJEaXYpO1xyXG5cclxuICAgIF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzID0gU25hcChcIjEwMCVcIiwgXCIxMDAlXCIpO1xyXG4gICAgbGV0IHZpZXdlciA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIgI1wiICsgQ09OU1RBTlRTLlRFTVBMQVRFX1BERl9WSUVXRVJcclxuICAgICk7XHJcbiAgICB2aWV3ZXIuYXBwZW5kQ2hpbGQoX3RlbXBsYXRlTW9kLm1haW5DYW52YXMubm9kZSk7XHJcbiAgICBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy5hdHRyKHtcclxuICAgICAgc3R5bGU6IFwicG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IHotaW5kZXg6IDk5XCIsXHJcbiAgICB9KTtcclxuICAgIGxldCBtYWluR3JvdXAgPSBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy5ncm91cCgpO1xyXG4gICAgbWFpbkdyb3VwLmF0dHIoeyBpZDogQ09OU1RBTlRTLk1BSU5fR1JPVVBfTkFNRSB9KTtcclxuICAgIF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzLmRyYWcoXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5kcmFnbW92ZUZ1bmMsXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5kcmFnc3RhcnRGdW5jLFxyXG4gICAgICBfdGVtcGxhdGVNb2QuZHJhZ2VuZEZ1bmNcclxuICAgICk7XHJcbiAgICB2aWV3ZXIuc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgMCk7XHJcbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBfdGVtcGxhdGVNb2Qua2V5Y2hlY2ssIHRydWUpO1xyXG5cclxuICAgIGxldCBhc3Rlcmlza0xheWVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIGFzdGVyaXNrTGF5ZXIuaWQgPSBDT05TVEFOVFMuVEVNUExBVEVfTEFZRVJfQVNURVJJU0tfTkFNRTtcclxuICAgIGFzdGVyaXNrTGF5ZXIuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XHJcbiAgICBhc3Rlcmlza0xheWVyLnN0eWxlLnRvcCA9IFwiMFwiO1xyXG4gICAgYXN0ZXJpc2tMYXllci5zdHlsZS56SW5kZXggPSBcIjk4XCI7XHJcbiAgICBhc3Rlcmlza0xheWVyLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcbiAgICB2aWV3ZXIuYXBwZW5kQ2hpbGQoYXN0ZXJpc2tMYXllcik7XHJcblxyXG4gICAgX3RlbXBsYXRlTW9kLmJ1aWxkRmllbGRmb3JtZXJMaXN0KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gdGVtcGxhdGVNb3VzZU1vdmVFdmVudFxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCN0ZW1wbGF0ZU1vdXNlTW92ZUV2ZW50XHJcbiAgICogQGRlc2NyaXB0aW9uIFBERuychOyXkCDsmKzrnbzqsIDripQgVGVtcGxhdGUg66CI7J207Ja07JeQIO2VhOuTnOulvCDsm4Dsp4Hsnbwg65WMIOuwnOyDne2VmOuKlCBNT1ZFIEV2ZW5066W8IOyymOumrO2VnOuLpC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudCAgIGV2ZW50IE9iamVjdFxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICB0ZW1wbGF0ZU1vdXNlTW92ZUV2ZW50KGV2ZW50KSB7XHJcbiAgICBsZXQgdGVtcGxhdGVSZWN0ID0gX3RlbXBsYXRlTW9kLm93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiAjXCIgKyBDT05TVEFOVFMuVEVNUExBVEVfTEFZRVJfUkVDVF9OQU1FXHJcbiAgICApO1xyXG4gICAgbGV0IHRhcmdldDEgPSBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiICNcIiArIENPTlNUQU5UUy5URU1QTEFURV9MQVlFUl9OQU1FXHJcbiAgICApO1xyXG4gICAgbGV0IHRhcmdldDIgPSBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiICNcIiArIENPTlNUQU5UUy5URU1QTEFURV9MQVlFUl9SRUNUX05BTUVcclxuICAgICk7XHJcblxyXG4gICAgaWYgKCEodGFyZ2V0MSA9PT0gZXZlbnQudGFyZ2V0IHx8IHRhcmdldDIgPT09IGV2ZW50LnRhcmdldCkpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgbGV0IG9mZnNldFggPSBldmVudC5vZmZzZXRYO1xyXG4gICAgbGV0IG9mZnNldFkgPSBldmVudC5vZmZzZXRZO1xyXG4gICAgaWYgKFxyXG4gICAgICBldmVudC50YXJnZXQgPT09IHRhcmdldDIgJiZcclxuICAgICAgIVV0aWxzLmlzRW1wdHlPYmplY3QoX3RlbXBsYXRlTW9kLnRlbXBsYXRlUmVjdE1vdXNlUG9zaXRpb24pXHJcbiAgICApIHtcclxuICAgICAgb2Zmc2V0WCA9XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLnRlbXBsYXRlUmVjdE1vdXNlUG9zaXRpb24ueCArXHJcbiAgICAgICAgKGV2ZW50LnBhZ2VYIC0gX3RlbXBsYXRlTW9kLnRlbXBsYXRlUmVjdE1vdXNlUG9zaXRpb24ub3gpO1xyXG4gICAgICBvZmZzZXRZID1cclxuICAgICAgICBfdGVtcGxhdGVNb2QudGVtcGxhdGVSZWN0TW91c2VQb3NpdGlvbi55ICtcclxuICAgICAgICAoZXZlbnQucGFnZVkgLSBfdGVtcGxhdGVNb2QudGVtcGxhdGVSZWN0TW91c2VQb3NpdGlvbi5veSk7XHJcbiAgICB9XHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIF90ZW1wbGF0ZU1vZC50ZW1wbGF0ZVJlY3RNb3VzZVBvc2l0aW9uID0ge1xyXG4gICAgICB4OiBvZmZzZXRYLFxyXG4gICAgICB5OiBvZmZzZXRZLFxyXG4gICAgICBveDogZXZlbnQucGFnZVgsXHJcbiAgICAgIG95OiBldmVudC5wYWdlWSxcclxuICAgIH07XHJcblxyXG4gICAgYW5pbWUoe1xyXG4gICAgICB0YXJnZXRzOiB0ZW1wbGF0ZVJlY3QsXHJcbiAgICAgIHRyYW5zbGF0ZVg6IG9mZnNldFgsXHJcbiAgICAgIHRyYW5zbGF0ZVk6IG9mZnNldFksXHJcbiAgICAgIGRpcmVjdGlvbjogXCJub3JtYWxcIixcclxuICAgICAgbG9vcDogZmFsc2UsXHJcbiAgICAgIGRlbGF5OiBhbmltZS5zdGFnZ2VyKDMwMCwgeyBlYXNpbmc6IFwiZWFzZU91dEVsYXN0aWMoMSwgLjYpXCIgfSksXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiB0ZW1wbGF0ZU1vdXNlVXBFdmVudFxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCN0ZW1wbGF0ZU1vdXNlVXBFdmVudFxyXG4gICAqIEBkZXNjcmlwdGlvbiBQREbsnITsl5Ag7Jis65286rCA64qUIFRlbXBsYXRlIOugiOydtOyWtOyXkCDtlYTrk5zrpbwg7JuA7KeB7J28IOuVjCDrsJzsg53tlZjripQgbW91bnQgdXAgRXZlbnTrpbwg7LKY66as7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50ICBldmVudCBPYmplY3RcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgdGVtcGxhdGVNb3VzZVVwRXZlbnQoZXZlbnQpIHtcclxuICAgIF90ZW1wbGF0ZU1vZC5yZW1vdmVUZW1wbGF0ZVJlY3QoKTtcclxuICAgIF90ZW1wbGF0ZU1vZC5jbGVhclNlbGVjdGVkVG9vbCgpO1xyXG5cclxuICAgIHZhciBtYWluR3JvdXAgPSBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy5zZWxlY3QoXHJcbiAgICAgIFwiI1wiICsgQ09OU1RBTlRTLk1BSU5fR1JPVVBfTkFNRVxyXG4gICAgKTtcclxuICAgIHZhciBwYWdlWCA9IGV2ZW50LnBhZ2VYO1xyXG4gICAgdmFyIHBhZ2VSZWN0ID0gX3RlbXBsYXRlTW9kLmdldFBhZ2VCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGlmIChwYWdlWCA8IHBhZ2VSZWN0LngpIHtcclxuICAgICAgcGFnZVggPSBwYWdlUmVjdC54O1xyXG4gICAgfSBlbHNlIGlmIChwYWdlWCA+IHBhZ2VSZWN0LnggKyBwYWdlUmVjdC53aWR0aCkge1xyXG4gICAgICBwYWdlWCA9XHJcbiAgICAgICAgcGFnZVJlY3QueCArXHJcbiAgICAgICAgcGFnZVJlY3Qud2lkdGggLVxyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5nZXRDcmVhdGVGaWVsZERlZmF1bHRXaWR0aChcclxuICAgICAgICAgIF90ZW1wbGF0ZU1vZC5zZWxlY3RBZGRGaWVsZFR5cGVcclxuICAgICAgICApO1xyXG4gICAgfVxyXG4gICAgdmFyIGZpZWxkR3JvdXAgPSBfdGVtcGxhdGVNb2QuY3JlYXRlRmllbGQoXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5zZWxlY3RBZGRGaWVsZFR5cGUsXHJcbiAgICAgIHBhZ2VYLFxyXG4gICAgICBldmVudC5wYWdlWVxyXG4gICAgKTtcclxuICAgIG1haW5Hcm91cC5hcHBlbmQoZmllbGRHcm91cCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gdGVtcGxhdGVSZXNpemVcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjdGVtcGxhdGVSZXNpemVcclxuICAgKiBAZGVzY3JpcHRpb24gdGVtcGxhdGXsl5DshJwg7IKs7Jqp65CY64qUIOuFuOuTnOuTpOydmCDsgqzsnbTspojrpbwg7J6s7KGw7KCV7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50ICBldmVudCBPYmplY3RcclxuICAgKiBAcGFyYW0ge051bWJlcn0gaGVpZ2h0ICAg66as7IKs7J207KaI65CcIOuGkuydtC5cclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgdGVtcGxhdGVSZXNpemUoZXZlbnQsIGhlaWdodCkge1xyXG4gICAgdmFyIHRlbXBsYXRlTGF5ZXIgPSBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiICNcIiArIENPTlNUQU5UUy5URU1QTEFURV9MQVlFUl9OQU1FXHJcbiAgICApO1xyXG4gICAgdGVtcGxhdGVMYXllci5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyBcInB4XCI7XHJcbiAgICBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy5hdHRyKHsgaGVpZ2h0OiBoZWlnaHQgfSk7XHJcbiAgICBfdGVtcGxhdGVNb2QucGFnZUJvdW5kaW5nQm94LmhlaWdodCA9IGhlaWdodDtcclxuICAgIF90ZW1wbGF0ZU1vZC5maWVsZFJlcG9zaXRpb25pbmcoZXZlbnQsIHRydWUpO1xyXG5cclxuICAgIGxldCBhc3Rlcmlza0xheWVyID0gX3RlbXBsYXRlTW9kLm93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiAjXCIgKyBDT05TVEFOVFMuVEVNUExBVEVfTEFZRVJfQVNURVJJU0tfTkFNRVxyXG4gICAgKTtcclxuICAgIGFzdGVyaXNrTGF5ZXIuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgXCJweFwiO1xyXG5cclxuICAgIHZhciB0ZW1wR0JveCA9IF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzLnNlbGVjdChcclxuICAgICAgXCIjXCIgKyBDT05TVEFOVFMuRFJBR19CT1hfTkFNRVxyXG4gICAgKTtcclxuICAgIGlmICh0ZW1wR0JveCA9PT0gbnVsbCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB2YXIgYmJveCA9IHRlbXBHQm94LmdldEJCb3goKTtcclxuICAgIF90ZW1wbGF0ZU1vZC5yZW1vdmVEcmFnT3Zlckdyb3VwKCk7XHJcbiAgICBfdGVtcGxhdGVNb2QuY3JlYXRlRHJhZ092ZXJHcm91cChiYm94KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiB0bXBHcm91cEZ0RXZlbnRcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjdG1wR3JvdXBGdEV2ZW50XHJcbiAgICogQGRlc2NyaXB0aW9uIOuTnOuemOq3uO2VtOyEnCDshKDtg53rkJwg7ZWE65OcIOq3uOujuSBGcmVlVHJhbnNmb3Jt7J2YIOydtOuypO2KuOulvCDsspjrpqztlZzri6QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lICBGcmVlVHJhbnNmb3Jt7JeQ7IScIOuwnOyDne2VmOuKlCDsnbTrsqTtirgg7J2066aELlxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICB0bXBHcm91cEZ0RXZlbnQoZXZlbnROYW1lKSB7XHJcbiAgICBpZiAoZXZlbnROYW1lID09PSBcImRyYWcgc3RhcnRcIiB8fCBldmVudE5hbWUgPT09IFwiYXBwbHlcIikge1xyXG4gICAgICAvL2hpZGUgYXR0clxyXG4gICAgICBpZiAoX3RlbXBsYXRlTW9kLmlzRmllbGREcmFnU3RhcnQgPT09IHRydWUpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgX3RlbXBsYXRlTW9kLmlzRmllbGREcmFnU3RhcnQgPSB0cnVlO1xyXG4gICAgICBfdGVtcGxhdGVNb2QuaGlkZUZpZWxkQXR0cmlidXRlKCk7XHJcblxyXG4gICAgICB2YXIgZ3JvdXBzID0gX3RlbXBsYXRlTW9kLm1haW5DYW52YXMuc2VsZWN0QWxsKFxyXG4gICAgICAgIFwiI1wiICsgQ09OU1RBTlRTLkRSQUdfQk9YX05BTUUgKyBcIiA+IGdcIlxyXG4gICAgICApO1xyXG4gICAgICB2YXIgb2xkRGF0YUFyciA9IFtdO1xyXG4gICAgICB2YXIgbmV3RGF0YUFyciA9IFtdO1xyXG4gICAgICB2YXIgdGVtcEdPbGQgPSBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy5zZWxlY3QoXHJcbiAgICAgICAgXCIjXCIgKyBDT05TVEFOVFMuRFJBR19CT1hfTkFNRVxyXG4gICAgICApO1xyXG4gICAgICBncm91cHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGxldCBjaGlsZFJlY3QgPSBlbGVtZW50LnNlbGVjdChcInJlY3RcIik7XHJcbiAgICAgICAgVXRpbHMuc2hvd0FzdGVyaXNrRGl2KFxyXG4gICAgICAgICAgX3RlbXBsYXRlTW9kLm93bmVyTm9kZSxcclxuICAgICAgICAgIGNoaWxkUmVjdC5hdHRyKFwiaWRcIiksXHJcbiAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGV2ZW50TmFtZSA9PT0gXCJkcmFnIGVuZFwiKSB7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5pc0ZpZWxkRHJhZ1N0YXJ0ID0gZmFsc2U7XHJcbiAgICAgIHZhciBncm91cHMgPSBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy5zZWxlY3RBbGwoXHJcbiAgICAgICAgXCIjXCIgKyBDT05TVEFOVFMuRFJBR19CT1hfTkFNRSArIFwiID4gZ1wiXHJcbiAgICAgICk7XHJcbiAgICAgIHZhciBvbGREYXRhQXJyID0gW107XHJcbiAgICAgIHZhciBuZXdEYXRhQXJyID0gW107XHJcbiAgICAgIHZhciB0ZW1wR09sZCA9IF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzLnNlbGVjdChcclxuICAgICAgICBcIiNcIiArIENPTlNUQU5UUy5EUkFHX0JPWF9OQU1FXHJcbiAgICAgICk7XHJcbiAgICAgIHZhciBmaWVsZExpc3QgPSBbXTtcclxuICAgICAgZ3JvdXBzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgICAgICBsZXQgY2hpbGRSZWN0ID0gZWxlbWVudC5zZWxlY3QoXCJyZWN0XCIpO1xyXG4gICAgICAgIGxldCBmaWVsZElkID0gY2hpbGRSZWN0LmF0dHIoXCJpZFwiKTtcclxuICAgICAgICB2YXIgb2xkRGF0YSA9IF90ZW1wbGF0ZU1vZC5nZXRGaWVsZEpzb25EYXRhKGZpZWxkSWQpO1xyXG4gICAgICAgIG9sZERhdGFBcnIucHVzaChvbGREYXRhKTtcclxuICAgICAgICBjb25zdCB0ZW1wR01hdHJpeCA9IHRlbXBHT2xkLnRyYW5zZm9ybSgpLmdsb2JhbE1hdHJpeDtcclxuICAgICAgICBfdGVtcGxhdGVNb2QuY2hhbmdlRmllbGRQb3NpdGlvbihlbGVtZW50LCB0ZW1wR01hdHJpeCwgdHJ1ZSk7XHJcbiAgICAgICAgdmFyIG5ld0RhdGEgPSBfdGVtcGxhdGVNb2QuZ2V0RmllbGRKc29uRGF0YShmaWVsZElkKTtcclxuICAgICAgICBuZXdEYXRhQXJyLnB1c2gobmV3RGF0YSk7XHJcbiAgICAgICAgZmllbGRMaXN0LnB1c2goX3RlbXBsYXRlTW9kLmZpZWxkRGljdGlvbmFyeVtmaWVsZElkXSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICB0ZW1wR09sZC50cmFuc2Zvcm0oU25hcC5tYXRyaXgoKS50b1RyYW5zZm9ybVN0cmluZygpKTtcclxuICAgICAgX3RlbXBsYXRlTW9kLnNob3dGaWVsZExpc3RBdHRyaWJ1dGUoZmllbGRMaXN0KTtcclxuICAgICAgX3RlbXBsYXRlTW9kLmFkZFVuZG9SZWRvQWN0KFxyXG4gICAgICAgIENPTlNUQU5UUy5HUk9VUF9BVFRSX0NIQU5HRV9BQ1RJT04sXHJcbiAgICAgICAgb2xkRGF0YUFycixcclxuICAgICAgICBuZXdEYXRhQXJyXHJcbiAgICAgICk7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5jaGFuZ2VHcm91cEJveEZyZWVUcmFuc2Zvcm0odGVtcEdPbGQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIHVuZG9BY3Rpb25cclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjdW5kb0FjdGlvblxyXG4gICAqIEBkZXNjcmlwdGlvbiAgVW5kb+ulvCDsspjrpqztlZzri6QuXHJcbiAgICpcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgdW5kb0FjdGlvbigpIHtcclxuICAgIHZhciBpZHggPSBfdGVtcGxhdGVNb2QudW5yZWRvQWN0aW9uSWR4LS07XHJcbiAgICBpZiAoaWR4IDwgMCkge1xyXG4gICAgICBfdGVtcGxhdGVNb2QudW5yZWRvQWN0aW9uSWR4ID0gLTE7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIF90ZW1wbGF0ZU1vZC5yZW1vdmVEcmFnT3Zlckdyb3VwKCk7XHJcbiAgICB2YXIgZGF0YSA9IF90ZW1wbGF0ZU1vZC51bnJlZG9BY3Rpb25EaWN0W2lkeF07XHJcbiAgICBzd2l0Y2ggKGRhdGEuYWN0aW9uKSB7XHJcbiAgICAgIGNhc2UgQ09OU1RBTlRTLkNSRUFURV9GSUVMRF9BQ1RJT046IHtcclxuICAgICAgICBfdGVtcGxhdGVNb2QucmVtb3ZlRmllbGQoZGF0YS5vbGQpO1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5oaWRlRmllbGRBdHRyaWJ1dGUoKTtcclxuICAgICAgICBfdGVtcGxhdGVNb2QuYnVpbGRGaWVsZGZvcm1lckxpc3QoKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBDT05TVEFOVFMuUkVNT1ZFX0ZJRUxEX0FDVElPTjpcclxuICAgICAgY2FzZSBDT05TVEFOVFMuRklFTERfQVRUUl9DSEFOR0VfQUNUSU9OOiB7XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLnJlcGxhY2VGaWVsZFN0cmluZ0RhdGEoZGF0YS5vbGQpO1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5idWlsZEZpZWxkZm9ybWVyTGlzdCgpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIENPTlNUQU5UUy5HUk9VUF9SRU1PVkVfQUNUSU9OOlxyXG4gICAgICBjYXNlIENPTlNUQU5UUy5HUk9VUF9BVFRSX0NIQU5HRV9BQ1RJT046IHtcclxuICAgICAgICBkYXRhLm9sZC5mb3JFYWNoKChvbGREYXRhKSA9PiB7XHJcbiAgICAgICAgICBfdGVtcGxhdGVNb2QucmVwbGFjZUZpZWxkU3RyaW5nRGF0YShvbGREYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBfdGVtcGxhdGVNb2QuYnVpbGRGaWVsZGZvcm1lckxpc3QoKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBDT05TVEFOVFMuR1JPVVBfQVRUUl9PV05FUl9DSEFOR0VfQUNUSU9OOiB7XHJcbiAgICAgICAgZGF0YS5vbGQuZm9yRWFjaCgob2xkRGF0YSkgPT4ge1xyXG4gICAgICAgICAgX3RlbXBsYXRlTW9kLnJlcGxhY2VGaWVsZFN0cmluZ0RhdGEob2xkRGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLmJ1aWxkRmllbGRmb3JtZXJMaXN0KCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gdXBkYXRlRmllbGRQb2ludFxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCN1cGRhdGVGaWVsZFBvaW50XHJcbiAgICogQGRlc2NyaXB0aW9uICDtlYTrk5zsnZggUERG7KKM7ZGc66W8IOyXheuNsOydtO2KuCDtlZzri6QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdH0gZmllbGRHcm91cCAgU1ZH7J2YIGdyb3VwIOyYpOu4jOygne2KuFxyXG4gICAqXHJcbiAgICogQHJldHVybiB7Qm9vbGVhbn0g67OA6rK97J20IOuQmOyngCDslYrsnLzrqbQgZmFsc2Ug67OA6rK97J2065CY66m0IHRydWVcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgdXBkYXRlRmllbGRQb2ludChmaWVsZEdyb3VwKSB7XHJcbiAgICBsZXQgY2hpbGRSZWN0ID0gZmllbGRHcm91cC5zZWxlY3QoXCJyZWN0XCIpO1xyXG4gICAgdmFyIGZpZWxkID0gX3RlbXBsYXRlTW9kLmZpZWxkRGljdGlvbmFyeVtjaGlsZFJlY3QuYXR0cihcImlkXCIpXTtcclxuICAgIGxldCBvc3QgPSBfdGVtcGxhdGVNb2QuY29tcHV0ZVBhZ2VPZmZzZXQoZmllbGQucGFnZU5vKTtcclxuICAgIGNvbnN0IHZpZXdlcjEgPSBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiICNcIiArIENPTlNUQU5UUy5URU1QTEFURV9QREZfVklFV0VSXHJcbiAgICApO1xyXG4gICAgY29uc3Qgdmlld2VyQm91bmRpbmdSZWN0ID0gdmlld2VyMS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIHZhciBkaWZmTWF0cml4ID0gX3RlbXBsYXRlTW9kLm1haW5DYW52YXMudHJhbnNmb3JtKCkuZGlmZk1hdHJpeDtcclxuICAgIHZhciBjaGlsZFJlY3RCQm94ID0gY2hpbGRSZWN0LmdldEJCb3goKTtcclxuICAgIGZpZWxkLnggPSBjaGlsZFJlY3RCQm94Lng7XHJcbiAgICBmaWVsZC55ID0gY2hpbGRSZWN0QkJveC55O1xyXG4gICAgZmllbGQud2lkdGggPSBjaGlsZFJlY3RCQm94LndpZHRoO1xyXG4gICAgZmllbGQuaGVpZ2h0ID0gY2hpbGRSZWN0QkJveC5oZWlnaHQ7XHJcbiAgICBmaWVsZC5wYWdlTm8gPSBfdGVtcGxhdGVNb2QuZ2V0UGRmUGFnZUZyb21TdmdQb3MoZmllbGQueCwgZmllbGQueSk7XHJcblxyXG4gICAgbGV0IHBhZ2VCb3JkZXJXaWR0aCA9IF90ZW1wbGF0ZU1vZC5nZXRQYWdlQm9yZGVyV2lkdGgoZmllbGQucGFnZU5vKTtcclxuXHJcbiAgICBsZXQgeCA9XHJcbiAgICAgIGRpZmZNYXRyaXgueChjaGlsZFJlY3RCQm94LngsIGNoaWxkUmVjdEJCb3gueSkgK1xyXG4gICAgICB2aWV3ZXJCb3VuZGluZ1JlY3QubGVmdCAtXHJcbiAgICAgIG9zdC5sZWZ0IC1cclxuICAgICAgcGFnZUJvcmRlcldpZHRoLmxlZnQ7XHJcbiAgICBsZXQgeSA9XHJcbiAgICAgIGRpZmZNYXRyaXgueShjaGlsZFJlY3RCQm94LngsIGNoaWxkUmVjdEJCb3gueSkgK1xyXG4gICAgICB2aWV3ZXJCb3VuZGluZ1JlY3QudG9wIC1cclxuICAgICAgb3N0LnRvcCAtXHJcbiAgICAgIHBhZ2VCb3JkZXJXaWR0aC50b3A7XHJcbiAgICBjb25zdCB2aWV3cG9ydCA9IF90ZW1wbGF0ZU1vZC5wZGZWaWV3ZXIuX3BhZ2VzW2ZpZWxkLnBhZ2VObyAtIDFdLnZpZXdwb3J0O1xyXG4gICAgbGV0IHBkZlBvaXNpb24gPSB2aWV3cG9ydC5jb252ZXJ0VG9QZGZQb2ludCh4LCB5KTtcclxuICAgIGxldCBwZGZQb2lzaW9uMiA9IHZpZXdwb3J0LmNvbnZlcnRUb1BkZlBvaW50KFxyXG4gICAgICB4ICsgY2hpbGRSZWN0QkJveC53aWR0aCxcclxuICAgICAgeSArIGNoaWxkUmVjdEJCb3guaGVpZ2h0XHJcbiAgICApO1xyXG4gICAgbGV0IGlzU2hvdyA9IGZhbHNlO1xyXG4gICAgaWYgKGZpZWxkLnJlcXVpcmVkID09PSBcInRydWVcIikge1xyXG4gICAgICBpc1Nob3cgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIFV0aWxzLnNob3dBc3Rlcmlza0RpdihcclxuICAgICAgX3RlbXBsYXRlTW9kLm93bmVyTm9kZSxcclxuICAgICAgY2hpbGRSZWN0LmF0dHIoXCJpZFwiKSxcclxuICAgICAgaXNTaG93LFxyXG4gICAgICBjaGlsZFJlY3RCQm94LngsXHJcbiAgICAgIGNoaWxkUmVjdEJCb3gueSxcclxuICAgICAgY2hpbGRSZWN0QkJveC5oZWlnaHRcclxuICAgICk7XHJcbiAgICBsZXQgb2xkUGRmWCA9IE51bWJlcihmaWVsZC5wZGZYKTtcclxuICAgIGxldCBvbGRQZGZYMiA9IE51bWJlcihmaWVsZC5wZGZYMik7XHJcbiAgICBsZXQgb2xkUGRmWSA9IE51bWJlcihmaWVsZC5wZGZZKTtcclxuICAgIGxldCBvbGRQZGZZMiA9IE51bWJlcihmaWVsZC5wZGZZMik7XHJcbiAgICBpZiAoXHJcbiAgICAgIHBkZlBvaXNpb25bMF0udG9GaXhlZCgyKSA9PT0gb2xkUGRmWC50b0ZpeGVkKDIpICYmXHJcbiAgICAgIHBkZlBvaXNpb25bMV0udG9GaXhlZCgyKSA9PT0gb2xkUGRmWS50b0ZpeGVkKDIpICYmXHJcbiAgICAgIHBkZlBvaXNpb24yWzBdLnRvRml4ZWQoMikgPT09IG9sZFBkZlgyLnRvRml4ZWQoMikgJiZcclxuICAgICAgcGRmUG9pc2lvbjJbMV0udG9GaXhlZCgyKSA9PT0gb2xkUGRmWTIudG9GaXhlZCgyKVxyXG4gICAgKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGZpZWxkLnBkZlggPSBwZGZQb2lzaW9uWzBdO1xyXG4gICAgZmllbGQucGRmWSA9IHBkZlBvaXNpb25bMV07XHJcbiAgICBmaWVsZC5wZGZYMiA9IHBkZlBvaXNpb24yWzBdO1xyXG4gICAgZmllbGQucGRmWTIgPSBwZGZQb2lzaW9uMlsxXTtcclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIGFwcGVuZEZvbnRGYW1pbHkoZm9udEZhbWlseUFycikge1xyXG4gICAgVXRpbHMuYXBwZW5kRm9udEZhbWlseShmb250RmFtaWx5QXJyKTtcclxuICB9XHJcblxyXG4gIGFwcGVuZFNpZ25UYWJTaG93T3B0KHNpZ25UYWJTaG93RGVmT3B0VmFsKSB7XHJcbiAgICBpZiAoc2lnblRhYlNob3dEZWZPcHRWYWwpIHtcclxuICAgICAgaWYgKHR5cGVvZiBzaWduVGFiU2hvd0RlZk9wdFZhbC51c2VEcmF3U2lnbiAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC51c2VEcmF3U2lnbiA9IHNpZ25UYWJTaG93RGVmT3B0VmFsLnVzZURyYXdTaWduO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0eXBlb2Ygc2lnblRhYlNob3dEZWZPcHRWYWwudXNlSW1hZ2VTaWduICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLnVzZUltYWdlU2lnbiA9IHNpZ25UYWJTaG93RGVmT3B0VmFsLnVzZUltYWdlU2lnbjtcclxuICAgICAgfVxyXG4gICAgICBpZiAodHlwZW9mIHNpZ25UYWJTaG93RGVmT3B0VmFsLnVzZVJlZ1NpZ24gIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICBfdGVtcGxhdGVNb2QudXNlUmVnU2lnbiA9IHNpZ25UYWJTaG93RGVmT3B0VmFsLnVzZVJlZ1NpZ247XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiLyohXHJcbiAqXHJcbiAqIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxyXG4gKlxyXG4gKiBDb3B5cmlnaHQgwqkgMjAyMSBUYXVmaWsgTnVycm9obWFuXHJcbiAqXHJcbiAqIDxodHRwczovL2dpdGh1Yi5jb20vdGF1ZmlrLW51cnJvaG1hbi9jb2xvci1waWNrZXI+XHJcbiAqXHJcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcclxuICogb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUg4oCcU29mdHdhcmXigJ0pLCB0byBkZWFsXHJcbiAqIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcclxuICogdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxyXG4gKiBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcclxuICogZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcclxuICpcclxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsXHJcbiAqIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXHJcbiAqXHJcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCDigJxBUyBJU+KAnSwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxyXG4gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcclxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXHJcbiAqIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcclxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcclxuICogT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEVcclxuICogU09GVFdBUkUuXHJcbiAqXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcclxuICAgIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDogdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDogKGdsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiBnbG9iYWwgfHwgc2VsZiwgZ2xvYmFsLkNQID0gZmFjdG9yeSgpKTtcclxufSkodGhpcywgZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgdmFyIGlzQXJyYXkgPSBmdW5jdGlvbiBpc0FycmF5KHgpIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheSh4KTtcclxuICAgIH07XHJcbiAgICB2YXIgaXNEZWZpbmVkID0gZnVuY3Rpb24gaXNEZWZpbmVkKHgpIHtcclxuICAgICAgICByZXR1cm4gJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiB4O1xyXG4gICAgfTtcclxuICAgIHZhciBpc0Z1bmN0aW9uID0gZnVuY3Rpb24gaXNGdW5jdGlvbih4KSB7XHJcbiAgICAgICAgcmV0dXJuICdmdW5jdGlvbicgPT09IHR5cGVvZiB4O1xyXG4gICAgfTtcclxuICAgIHZhciBpc0luc3RhbmNlID0gZnVuY3Rpb24gaXNJbnN0YW5jZSh4LCBvZikge1xyXG4gICAgICAgIHJldHVybiB4ICYmIGlzU2V0KG9mKSAmJiB4IGluc3RhbmNlb2Ygb2Y7XHJcbiAgICB9O1xyXG4gICAgdmFyIGlzTnVsbCA9IGZ1bmN0aW9uIGlzTnVsbCh4KSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGwgPT09IHg7XHJcbiAgICB9O1xyXG4gICAgdmFyIGlzTnVtYmVyID0gZnVuY3Rpb24gaXNOdW1iZXIoeCkge1xyXG4gICAgICAgIHJldHVybiAnbnVtYmVyJyA9PT0gdHlwZW9mIHg7XHJcbiAgICB9O1xyXG4gICAgdmFyIGlzTnVtZXJpYyA9IGZ1bmN0aW9uIGlzTnVtZXJpYyh4KSB7XHJcbiAgICAgICAgcmV0dXJuIC9eLT8oPzpcXGQqLik/XFxkKyQvLnRlc3QoeCArIFwiXCIpO1xyXG4gICAgfTtcclxuICAgIHZhciBpc09iamVjdCA9IGZ1bmN0aW9uIGlzT2JqZWN0KHgsIGlzUGxhaW4pIHtcclxuICAgICAgICBpZiAoaXNQbGFpbiA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgIGlzUGxhaW4gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoJ29iamVjdCcgIT09IHR5cGVvZiB4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGlzUGxhaW4gPyBpc0luc3RhbmNlKHgsIE9iamVjdCkgOiB0cnVlO1xyXG4gICAgfTtcclxuICAgIHZhciBpc1NldCA9IGZ1bmN0aW9uIGlzU2V0KHgpIHtcclxuICAgICAgICByZXR1cm4gaXNEZWZpbmVkKHgpICYmICFpc051bGwoeCk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGlzU3RyaW5nID0gZnVuY3Rpb24gaXNTdHJpbmcoeCkge1xyXG4gICAgICAgIHJldHVybiAnc3RyaW5nJyA9PT0gdHlwZW9mIHg7XHJcbiAgICB9O1xyXG4gICAgdmFyIGZyb21KU09OID0gZnVuY3Rpb24gZnJvbUpTT04oeCkge1xyXG4gICAgICAgIHZhciB2YWx1ZSA9IG51bGw7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFsdWUgPSBKU09OLnBhcnNlKHgpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgfVxyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH07XHJcbiAgICB2YXIgZnJvbVN0YXRlcyA9IGZ1bmN0aW9uIGZyb21TdGF0ZXMoKSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGxvdCA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcclxuICAgICAgICAgICAgbG90W19rZXldID0gYXJndW1lbnRzW19rZXldO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbi5hcHBseShPYmplY3QsIFt7fV0uY29uY2F0KGxvdCkpO1xyXG4gICAgfTtcclxuICAgIHZhciBmcm9tVmFsdWUgPSBmdW5jdGlvbiBmcm9tVmFsdWUoeCkge1xyXG4gICAgICAgIGlmIChpc0FycmF5KHgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB4Lm1hcChmdW5jdGlvbiAodikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZyb21WYWx1ZSh4KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc09iamVjdCh4KSkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBrIGluIHgpIHtcclxuICAgICAgICAgICAgICAgIHhba10gPSBmcm9tVmFsdWUoeFtrXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChmYWxzZSA9PT0geCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2ZhbHNlJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG51bGwgPT09IHgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdudWxsJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRydWUgPT09IHgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICd0cnVlJztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFwiXCIgKyB4O1xyXG4gICAgfTtcclxuICAgIHZhciB0b0Nhc2VDYW1lbCA9IGZ1bmN0aW9uIHRvQ2FzZUNhbWVsKHgpIHtcclxuICAgICAgICByZXR1cm4geC5yZXBsYWNlKC9bLV8uXShcXHcpL2csIGZ1bmN0aW9uIChtMCwgbTEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRvQ2FzZVVwcGVyKG0xKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgdG9DYXNlVXBwZXIgPSBmdW5jdGlvbiB0b0Nhc2VVcHBlcih4KSB7XHJcbiAgICAgICAgcmV0dXJuIHgudG9VcHBlckNhc2UoKTtcclxuICAgIH07XHJcbiAgICB2YXIgdG9Db3VudCA9IGZ1bmN0aW9uIHRvQ291bnQoeCkge1xyXG4gICAgICAgIHJldHVybiB4Lmxlbmd0aDtcclxuICAgIH07XHJcbiAgICB2YXIgdG9FZGdlID0gZnVuY3Rpb24gdG9FZGdlKHgsIGVkZ2VzKSB7XHJcbiAgICAgICAgaWYgKGlzU2V0KGVkZ2VzWzBdKSAmJiB4IDwgZWRnZXNbMF0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVkZ2VzWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNTZXQoZWRnZXNbMV0pICYmIHggPiBlZGdlc1sxXSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZWRnZXNbMV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB4O1xyXG4gICAgfTtcclxuICAgIHZhciB0b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oeCkge1xyXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh4KTtcclxuICAgIH07XHJcbiAgICB2YXIgdG9OdW1iZXIgPSBmdW5jdGlvbiB0b051bWJlcih4LCBiYXNlKSB7XHJcbiAgICAgICAgaWYgKGJhc2UgPT09IHZvaWQgMCkge1xyXG4gICAgICAgICAgICBiYXNlID0gMTA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBiYXNlID8gcGFyc2VJbnQoeCwgYmFzZSkgOiBwYXJzZUZsb2F0KHgpO1xyXG4gICAgfTtcclxuICAgIHZhciB0b09iamVjdENvdW50ID0gZnVuY3Rpb24gdG9PYmplY3RDb3VudCh4KSB7XHJcbiAgICAgICAgcmV0dXJuIHRvQ291bnQodG9PYmplY3RLZXlzKHgpKTtcclxuICAgIH07XHJcbiAgICB2YXIgdG9PYmplY3RLZXlzID0gZnVuY3Rpb24gdG9PYmplY3RLZXlzKHgpIHtcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoeCk7XHJcbiAgICB9O1xyXG4gICAgdmFyIHRvUm91bmQgPSBmdW5jdGlvbiB0b1JvdW5kKHgpIHtcclxuICAgICAgICByZXR1cm4gaXNOdW1iZXIoeCkgPyBNYXRoLnJvdW5kKHgpIDogbnVsbDtcclxuICAgIH07XHJcbiAgICB2YXIgdG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyh4LCBiYXNlKSB7XHJcbiAgICAgICAgaWYgKGJhc2UgPT09IHZvaWQgMCkge1xyXG4gICAgICAgICAgICBiYXNlID0gMTA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpc051bWJlcih4KSA/IHgudG9TdHJpbmcoYmFzZSkgOiBcIlwiICsgeDtcclxuICAgIH07XHJcbiAgICB2YXIgdG9WYWx1ZSA9IGZ1bmN0aW9uIHRvVmFsdWUoeCkge1xyXG4gICAgICAgIGlmIChpc0FycmF5KHgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB4Lm1hcChmdW5jdGlvbiAodikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvVmFsdWUodik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNOdW1lcmljKHgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0b051bWJlcih4KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzT2JqZWN0KHgpKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGsgaW4geCkge1xyXG4gICAgICAgICAgICAgICAgeFtrXSA9IHRvVmFsdWUoeFtrXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgnZmFsc2UnID09PSB4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCdudWxsJyA9PT0geCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCd0cnVlJyA9PT0geCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHg7XHJcbiAgICB9O1xyXG4gICAgdmFyIEQgPSBkb2N1bWVudDtcclxuICAgIHZhciBXID0gd2luZG93O1xyXG4gICAgdmFyIEIgPSBELmJvZHk7XHJcbiAgICB2YXIgUiA9IEQuZG9jdW1lbnRFbGVtZW50O1xyXG4gICAgdmFyIGdldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uIGdldEF0dHJpYnV0ZShub2RlLCBhdHRyaWJ1dGUsIHBhcnNlVmFsdWUpIHtcclxuICAgICAgICBpZiAocGFyc2VWYWx1ZSA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgIHBhcnNlVmFsdWUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWhhc0F0dHJpYnV0ZShub2RlLCBhdHRyaWJ1dGUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdmFsdWUgPSBub2RlLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGUpO1xyXG4gICAgICAgIHJldHVybiBwYXJzZVZhbHVlID8gdG9WYWx1ZSh2YWx1ZSkgOiB2YWx1ZTtcclxuICAgIH07XHJcbiAgICB2YXIgZ2V0RGF0dW0gPSBmdW5jdGlvbiBnZXREYXR1bShub2RlLCBkYXR1bSwgcGFyc2VWYWx1ZSkge1xyXG4gICAgICAgIGlmIChwYXJzZVZhbHVlID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgcGFyc2VWYWx1ZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB2YWx1ZSA9IGdldEF0dHJpYnV0ZShub2RlLCAnZGF0YS0nICsgZGF0dW0sIHBhcnNlVmFsdWUpLFxyXG4gICAgICAgICAgICB2ID0gKHZhbHVlICsgXCJcIikudHJpbSgpO1xyXG4gICAgICAgIGlmIChwYXJzZVZhbHVlICYmIHYgJiYgKCdbJyA9PT0gdlswXSAmJiAnXScgPT09IHYuc2xpY2UoLTEpIHx8ICd7JyA9PT0gdlswXSAmJiAnfScgPT09IHYuc2xpY2UoLTEpKSAmJiBudWxsICE9PSAodiA9IGZyb21KU09OKHZhbHVlKSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH07XHJcbiAgICB2YXIgZ2V0UGFyZW50ID0gZnVuY3Rpb24gZ2V0UGFyZW50KG5vZGUpIHtcclxuICAgICAgICByZXR1cm4gbm9kZS5wYXJlbnROb2RlIHx8IG51bGw7XHJcbiAgICB9O1xyXG4gICAgdmFyIGdldFN0YXRlID0gZnVuY3Rpb24gZ2V0U3RhdGUobm9kZSwgc3RhdGUpIHtcclxuICAgICAgICByZXR1cm4gaGFzU3RhdGUobm9kZSwgc3RhdGUpICYmIG5vZGVbc3RhdGVdIHx8IG51bGw7XHJcbiAgICB9O1xyXG4gICAgdmFyIGdldFRleHQgPSBmdW5jdGlvbiBnZXRUZXh0KG5vZGUsIHRyaW0pIHtcclxuICAgICAgICBpZiAodHJpbSA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgIHRyaW0gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgc3RhdGUgPSAndGV4dENvbnRlbnQnO1xyXG4gICAgICAgIGlmICghaGFzU3RhdGUobm9kZSwgc3RhdGUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGNvbnRlbnQgPSBub2RlW3N0YXRlXTtcclxuICAgICAgICBjb250ZW50ID0gdHJpbSA/IGNvbnRlbnQudHJpbSgpIDogY29udGVudDtcclxuICAgICAgICByZXR1cm4gXCJcIiAhPT0gY29udGVudCA/IGNvbnRlbnQgOiBudWxsO1xyXG4gICAgfTtcclxuICAgIHZhciBoYXNBdHRyaWJ1dGUgPSBmdW5jdGlvbiBoYXNBdHRyaWJ1dGUobm9kZSwgYXR0cmlidXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5vZGUuaGFzQXR0cmlidXRlKGF0dHJpYnV0ZSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGhhc1N0YXRlID0gZnVuY3Rpb24gaGFzU3RhdGUobm9kZSwgc3RhdGUpIHtcclxuICAgICAgICByZXR1cm4gc3RhdGUgaW4gbm9kZTtcclxuICAgIH07XHJcbiAgICB2YXIgaXNXaW5kb3cgPSBmdW5jdGlvbiBpc1dpbmRvdyhub2RlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5vZGUgPT09IFc7XHJcbiAgICB9O1xyXG4gICAgdmFyIGxldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uIGxldEF0dHJpYnV0ZShub2RlLCBhdHRyaWJ1dGUpIHtcclxuICAgICAgICByZXR1cm4gbm9kZS5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlKSwgbm9kZTtcclxuICAgIH07XHJcbiAgICB2YXIgbGV0RWxlbWVudCA9IGZ1bmN0aW9uIGxldEVsZW1lbnQobm9kZSkge1xyXG4gICAgICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnQobm9kZSk7XHJcbiAgICAgICAgcmV0dXJuIG5vZGUucmVtb3ZlKCksIHBhcmVudDtcclxuICAgIH07XHJcbiAgICB2YXIgc2V0QXR0cmlidXRlID0gZnVuY3Rpb24gc2V0QXR0cmlidXRlKG5vZGUsIGF0dHJpYnV0ZSwgdmFsdWUpIHtcclxuICAgICAgICBpZiAodHJ1ZSA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgdmFsdWUgPSBhdHRyaWJ1dGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBub2RlLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGUsIGZyb21WYWx1ZSh2YWx1ZSkpLCBub2RlO1xyXG4gICAgfTtcclxuICAgIHZhciBzZXRBdHRyaWJ1dGVzID0gZnVuY3Rpb24gc2V0QXR0cmlidXRlcyhub2RlLCBhdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgdmFyIHZhbHVlO1xyXG4gICAgICAgIGZvciAodmFyIGF0dHJpYnV0ZSBpbiBhdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgIHZhbHVlID0gYXR0cmlidXRlc1thdHRyaWJ1dGVdO1xyXG4gICAgICAgICAgICBpZiAodmFsdWUgfHwgXCJcIiA9PT0gdmFsdWUgfHwgMCA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHNldEF0dHJpYnV0ZShub2RlLCBhdHRyaWJ1dGUsIHZhbHVlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxldEF0dHJpYnV0ZShub2RlLCBhdHRyaWJ1dGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBub2RlO1xyXG4gICAgfTtcclxuICAgIHZhciBzZXRDaGlsZExhc3QgPSBmdW5jdGlvbiBzZXRDaGlsZExhc3QocGFyZW50LCBub2RlKSB7XHJcbiAgICAgICAgcmV0dXJuIHBhcmVudC5hcHBlbmRDaGlsZChub2RlKSwgbm9kZTtcclxuICAgIH07XHJcbiAgICB2YXIgc2V0RGF0dW0gPSBmdW5jdGlvbiBzZXREYXR1bShub2RlLCBkYXR1bSwgdmFsdWUpIHtcclxuICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkgfHwgaXNPYmplY3QodmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHZhbHVlID0gdG9KU09OKHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNldEF0dHJpYnV0ZShub2RlLCAnZGF0YS0nICsgZGF0dW0sIHZhbHVlKTtcclxuICAgIH07XHJcbiAgICB2YXIgc2V0RWxlbWVudCA9IGZ1bmN0aW9uIHNldEVsZW1lbnQobm9kZSwgY29udGVudCwgYXR0cmlidXRlcykge1xyXG4gICAgICAgIG5vZGUgPSBpc1N0cmluZyhub2RlKSA/IEQuY3JlYXRlRWxlbWVudChub2RlKSA6IG5vZGU7XHJcbiAgICAgICAgaWYgKGlzT2JqZWN0KGNvbnRlbnQpKSB7XHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZXMgPSBjb250ZW50O1xyXG4gICAgICAgICAgICBjb250ZW50ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc1N0cmluZyhjb250ZW50KSkge1xyXG4gICAgICAgICAgICBzZXRIVE1MKG5vZGUsIGNvbnRlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNPYmplY3QoYXR0cmlidXRlcykpIHtcclxuICAgICAgICAgICAgc2V0QXR0cmlidXRlcyhub2RlLCBhdHRyaWJ1dGVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5vZGU7XHJcbiAgICB9O1xyXG4gICAgdmFyIHNldEhUTUwgPSBmdW5jdGlvbiBzZXRIVE1MKG5vZGUsIGNvbnRlbnQsIHRyaW0pIHtcclxuICAgICAgICBpZiAodHJpbSA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgIHRyaW0gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobnVsbCA9PT0gY29udGVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHN0YXRlID0gJ2lubmVySFRNTCc7XHJcbiAgICAgICAgcmV0dXJuIGhhc1N0YXRlKG5vZGUsIHN0YXRlKSAmJiAobm9kZVtzdGF0ZV0gPSB0cmltID8gY29udGVudC50cmltKCkgOiBjb250ZW50KSwgbm9kZTtcclxuICAgIH07XHJcbiAgICB2YXIgc2V0U3RhdGUgPSBmdW5jdGlvbiBzZXRTdGF0ZShub2RlLCBrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5vZGVba2V5XSA9IHZhbHVlLCBub2RlO1xyXG4gICAgfTtcclxuICAgIHZhciBzZXRTdHlsZSA9IGZ1bmN0aW9uIHNldFN0eWxlKG5vZGUsIHN0eWxlLCB2YWx1ZSkge1xyXG4gICAgICAgIGlmIChpc051bWJlcih2YWx1ZSkpIHtcclxuICAgICAgICAgICAgdmFsdWUgKz0gJ3B4JztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5vZGUuc3R5bGVbdG9DYXNlQ2FtZWwoc3R5bGUpXSA9IGZyb21WYWx1ZSh2YWx1ZSksIG5vZGU7XHJcbiAgICB9O1xyXG4gICAgdmFyIHNldFRleHQgPSBmdW5jdGlvbiBzZXRUZXh0KG5vZGUsIGNvbnRlbnQsIHRyaW0pIHtcclxuICAgICAgICBpZiAodHJpbSA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgIHRyaW0gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobnVsbCA9PT0gY29udGVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHN0YXRlID0gJ3RleHRDb250ZW50JztcclxuICAgICAgICByZXR1cm4gaGFzU3RhdGUobm9kZSwgc3RhdGUpICYmIChub2RlW3N0YXRlXSA9IHRyaW0gPyBjb250ZW50LnRyaW0oKSA6IGNvbnRlbnQpLCBub2RlO1xyXG4gICAgfTtcclxuICAgIHZhciBvZmZFdmVudCA9IGZ1bmN0aW9uIG9mZkV2ZW50KG5hbWUsIG5vZGUsIHRoZW4pIHtcclxuICAgICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIobmFtZSwgdGhlbik7XHJcbiAgICB9O1xyXG4gICAgdmFyIG9mZkV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uIG9mZkV2ZW50RGVmYXVsdChlKSB7XHJcbiAgICAgICAgcmV0dXJuIGU7Ly8gJiYgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfTtcclxuICAgIHZhciBvZmZFdmVudHMgPSBmdW5jdGlvbiBvZmZFdmVudHMobmFtZXMsIG5vZGUsIHRoZW4pIHtcclxuICAgICAgICBuYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBvZmZFdmVudChuYW1lLCBub2RlLCB0aGVuKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgb25FdmVudCA9IGZ1bmN0aW9uIG9uRXZlbnQobmFtZSwgbm9kZSwgdGhlbiwgb3B0aW9ucykge1xyXG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDAgfHwgb3B0aW9ucyA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgdmFyIHN1cHBvcnRzUGFzc2l2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9wdHMgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdwYXNzaXZlJywge1xyXG4gICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdXBwb3J0c1Bhc3NpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ0ZXN0UGFzc2l2ZVwiLCBudWxsLCBvcHRzKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwidGVzdFBhc3NpdmVcIiwgbnVsbCwgb3B0cyk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgfVxyXG4gICAgICAgICAgICBvcHRpb25zID0gc3VwcG9ydHNQYXNzaXZlID8geyBwYXNzaXZlOiB0cnVlIH0gOiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKG5hbWUsIHRoZW4sIG9wdGlvbnMpO1xyXG4gICAgfTtcclxuICAgIHZhciBvbkV2ZW50cyA9IGZ1bmN0aW9uIG9uRXZlbnRzKG5hbWVzLCBub2RlLCB0aGVuLCBvcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xyXG4gICAgICAgICAgICBvcHRpb25zID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5hbWVzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9uRXZlbnQobmFtZSwgbm9kZSwgdGhlbiwgb3B0aW9ucyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGhvb2soJCkge1xyXG4gICAgICAgIHZhciBob29rcyA9IHt9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBmaXJlKG5hbWUsIGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKCFpc1NldChob29rc1tuYW1lXSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGhvb2tzW25hbWVdLmZvckVhY2goZnVuY3Rpb24gKHRoZW4pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGVuLmFwcGx5KCQsIGRhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuICQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBvZmYobmFtZSwgdGhlbikge1xyXG4gICAgICAgICAgICBpZiAoIWlzU2V0KG5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaG9va3MgPSB7fSwgJDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaXNTZXQoaG9va3NbbmFtZV0pKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNTZXQodGhlbikpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgX2ogPSBob29rc1tuYW1lXS5sZW5ndGg7IGkgPCBfajsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGVuID09PSBob29rc1tuYW1lXVtpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9va3NbbmFtZV0uc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IC8vIENsZWFuLXVwIGVtcHR5IGhvb2socylcclxuICAgICAgICAgICAgICAgICAgICBpZiAoMCA9PT0gaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgaG9va3NbbmFtZV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgaG9va3NbbmFtZV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuICQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBvbihuYW1lLCB0aGVuKSB7XHJcbiAgICAgICAgICAgIGlmICghaXNTZXQoaG9va3NbbmFtZV0pKSB7XHJcbiAgICAgICAgICAgICAgICBob29rc1tuYW1lXSA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpc1NldCh0aGVuKSkge1xyXG4gICAgICAgICAgICAgICAgaG9va3NbbmFtZV0ucHVzaCh0aGVuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gJDtcclxuICAgICAgICB9XHJcbiAgICAgICAgJC5ob29rcyA9IGhvb2tzO1xyXG4gICAgICAgICQuZmlyZSA9IGZpcmU7XHJcbiAgICAgICAgJC5vZmYgPSBvZmY7XHJcbiAgICAgICAgJC5vbiA9IG9uO1xyXG4gICAgICAgIHJldHVybiAkO1xyXG4gICAgfVxyXG4gICAgdmFyIGdldEF4aXMgPSBmdW5jdGlvbiBnZXRBeGlzKGV2ZW50LCBub2RlKSB7XHJcbiAgICAgICAgdmFyIHRvdWNoZXMgPSBldmVudC50b3VjaGVzLFxyXG4gICAgICAgICAgICB4ID0gdG91Y2hlcyA/IHRvdWNoZXNbMF0uY2xpZW50WCA6IGV2ZW50LmNsaWVudFgsXHJcbiAgICAgICAgICAgIHkgPSB0b3VjaGVzID8gdG91Y2hlc1swXS5jbGllbnRZIDogZXZlbnQuY2xpZW50WTtcclxuICAgICAgICBpZiAobm9kZSkge1xyXG4gICAgICAgICAgICB2YXIgcmVjdCA9IGdldFJlY3Qobm9kZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBbeCAtIHJlY3RbMF0sIHkgLSByZWN0WzFdLCByZWN0WzBdLCByZWN0WzFdXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFt4LCB5XTtcclxuICAgIH07XHJcbiAgICB2YXIgZ2V0UmVjdCA9IGZ1bmN0aW9uIGdldFJlY3Qobm9kZSkge1xyXG4gICAgICAgIHZhciBoLCByZWN0LCB3LCB4LCB5LCBYLCBZO1xyXG4gICAgICAgIGlmIChpc1dpbmRvdyhub2RlKSkge1xyXG4gICAgICAgICAgICB4ID0gbm9kZS5wYWdlWE9mZnNldCB8fCBSLnNjcm9sbExlZnQgfHwgQi5zY3JvbGxMZWZ0O1xyXG4gICAgICAgICAgICB5ID0gbm9kZS5wYWdlWU9mZnNldCB8fCBSLnNjcm9sbFRvcCB8fCBCLnNjcm9sbFRvcDtcclxuICAgICAgICAgICAgdyA9IG5vZGUuaW5uZXJXaWR0aDtcclxuICAgICAgICAgICAgaCA9IG5vZGUuaW5uZXJIZWlnaHQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVjdCA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgIHggPSByZWN0LmxlZnQ7XHJcbiAgICAgICAgICAgIHkgPSByZWN0LnRvcDtcclxuICAgICAgICAgICAgdyA9IHJlY3Qud2lkdGg7XHJcbiAgICAgICAgICAgIGggPSByZWN0LmhlaWdodDtcclxuICAgICAgICAgICAgWCA9IHJlY3QucmlnaHQ7XHJcbiAgICAgICAgICAgIFkgPSByZWN0LmJvdHRvbTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFt4LCB5LCB3LCBoLCBYLCBZXTtcclxuICAgIH07XHJcbiAgICBsZXQgbmFtZSA9ICdDUCcsXHJcbiAgICAgICAgZGVsYXkgPSBXLnNldFRpbWVvdXQsXHJcbiAgICAgICAgaGV4ID0gJ0hFWCc7XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0Q2xvc2VzdChhLCBiKSB7XHJcbiAgICAgICAgaWYgKGEgPT09IGIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdoaWxlICgoYSA9IGEucGFyZW50RWxlbWVudCkgJiYgYSAhPT0gYik7XHJcbiAgICAgICAgcmV0dXJuIGE7XHJcbiAgICB9IC8vIENvbnZlcnQgY3Vyc29yIHBvc2l0aW9uIHRvIFJHQkFcclxuICAgIGZ1bmN0aW9uIFAyUkdCKGEpIHtcclxuICAgICAgICBsZXQgaCA9ICthWzBdLFxyXG4gICAgICAgICAgICBzID0gK2FbMV0sXHJcbiAgICAgICAgICAgIHYgPSArYVsyXSxcclxuICAgICAgICAgICAgcixcclxuICAgICAgICAgICAgZyxcclxuICAgICAgICAgICAgYixcclxuICAgICAgICAgICAgaSxcclxuICAgICAgICAgICAgZixcclxuICAgICAgICAgICAgcCxcclxuICAgICAgICAgICAgcSxcclxuICAgICAgICAgICAgdDtcclxuICAgICAgICBpID0gTWF0aC5mbG9vcihoICogNik7XHJcbiAgICAgICAgZiA9IGggKiA2IC0gaTtcclxuICAgICAgICBwID0gdiAqICgxIC0gcyk7XHJcbiAgICAgICAgcSA9IHYgKiAoMSAtIGYgKiBzKTtcclxuICAgICAgICB0ID0gdiAqICgxIC0gKDEgLSBmKSAqIHMpO1xyXG4gICAgICAgIGkgPSBpIHx8IDA7XHJcbiAgICAgICAgcSA9IHEgfHwgMDtcclxuICAgICAgICB0ID0gdCB8fCAwO1xyXG4gICAgICAgIHN3aXRjaCAoaSAlIDYpIHtcclxuICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgciA9IHYsIGcgPSB0LCBiID0gcDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICByID0gcSwgZyA9IHYsIGIgPSBwO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgIHIgPSBwLCBnID0gdiwgYiA9IHQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgciA9IHAsIGcgPSBxLCBiID0gdjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICByID0gdCwgZyA9IHAsIGIgPSB2O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgIHIgPSB2LCBnID0gcCwgYiA9IHE7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFt0b1JvdW5kKHIgKiAyNTUpLCB0b1JvdW5kKGcgKiAyNTUpLCB0b1JvdW5kKGIgKiAyNTUpLCBpc1NldChhWzNdKSA/ICthWzNdIDogMV07XHJcbiAgICB9IC8vIENvbnZlcnQgUkdCQSB0byBIU1ZBXHJcbiAgICBmdW5jdGlvbiBSR0IySFNWKGEpIHtcclxuICAgICAgICBsZXQgciA9ICthWzBdIC8gMjU1LFxyXG4gICAgICAgICAgICBnID0gK2FbMV0gLyAyNTUsXHJcbiAgICAgICAgICAgIGIgPSArYVsyXSAvIDI1NSxcclxuICAgICAgICAgICAgbWF4ID0gTWF0aC5tYXgociwgZywgYiksXHJcbiAgICAgICAgICAgIG1pbiA9IE1hdGgubWluKHIsIGcsIGIpLFxyXG4gICAgICAgICAgICBoLFxyXG4gICAgICAgICAgICBzLFxyXG4gICAgICAgICAgICB2ID0gbWF4LFxyXG4gICAgICAgICAgICBkID0gbWF4IC0gbWluO1xyXG4gICAgICAgIHMgPSBtYXggPT09IDAgPyAwIDogZCAvIG1heDtcclxuICAgICAgICBpZiAobWF4ID09PSBtaW4pIHtcclxuICAgICAgICAgICAgaCA9IDA7IC8vIEFjaHJvbWF0aWNcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG1heCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSByOlxyXG4gICAgICAgICAgICAgICAgICAgIGggPSAoZyAtIGIpIC8gZCArIChnIDwgYiA/IDYgOiAwKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgZzpcclxuICAgICAgICAgICAgICAgICAgICBoID0gKGIgLSByKSAvIGQgKyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBiOlxyXG4gICAgICAgICAgICAgICAgICAgIGggPSAociAtIGcpIC8gZCArIDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaCAvPSA2O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW2gsIHMsIHYsIGlzU2V0KGFbM10pID8gK2FbM10gOiAxXTtcclxuICAgIH1cclxuICAgIGNvbnN0IEVWRU5UU19ET1dOID0gWyd0b3VjaHN0YXJ0JywgJ21vdXNlZG93biddO1xyXG4gICAgY29uc3QgRVZFTlRTX01PVkUgPSBbJ3RvdWNobW92ZScsICdtb3VzZW1vdmUnXTtcclxuICAgIGNvbnN0IEVWRU5UU19SRVNJWkUgPSBbJ29yaWVudGF0aW9uY2hhbmdlJywgJ3Jlc2l6ZSddO1xyXG4gICAgY29uc3QgRVZFTlRTX1VQID0gWyd0b3VjaGVuZCcsICdtb3VzZXVwJ107XHJcblxyXG4gICAgZnVuY3Rpb24gQ1Aoc291cmNlLCBzdGF0ZSA9IHt9KSB7XHJcbiAgICAgICAgaWYgKCFEKSB7XHJcbiAgICAgICAgICAgIEQgPSBkb2N1bWVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFXKSB7XHJcbiAgICAgICAgICAgIFcgPSB3aW5kb3c7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghQikge1xyXG4gICAgICAgICAgICBCID0gRC5ib2R5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIVIpIHtcclxuICAgICAgICAgICAgUiA9IEQuZG9jdW1lbnRFbGVtZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXNvdXJjZSkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0ICQgPSB0aGlzOyAvLyBSZXR1cm4gbmV3IGluc3RhbmNlIGlmIGBDUGAgd2FzIGNhbGxlZCB3aXRob3V0IHRoZSBgbmV3YCBvcGVyYXRvclxyXG4gICAgICAgIGlmICghaXNJbnN0YW5jZSgkLCBDUCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDUChzb3VyY2UsIHN0YXRlKTtcclxuICAgICAgICB9IC8vIEFscmVhZHkgaW5zdGFudGlhdGVkLCBza2lwIVxyXG4gICAgICAgIGlmIChzb3VyY2VbbmFtZV0pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQge1xyXG4gICAgICAgICAgICBmaXJlLFxyXG4gICAgICAgICAgICBob29rc1xyXG4gICAgICAgIH0gPSBob29rKCQpO1xyXG4gICAgICAgICQuc3RhdGUgPSBzdGF0ZSA9IGZyb21TdGF0ZXMoQ1Auc3RhdGUsIGlzU3RyaW5nKHN0YXRlKSA/IHtcclxuICAgICAgICAgICAgY29sb3I6IHN0YXRlXHJcbiAgICAgICAgfSA6IHN0YXRlIHx8IHt9KTtcclxuICAgICAgICAkLnNvdXJjZSA9IHNvdXJjZTtcclxuICAgICAgICAkLnZpc2libGUgPSBmYWxzZTsgLy8gU3RvcmUgY3VycmVudCBpbnN0YW5jZSB0byBgQ1AuaW5zdGFuY2VzYFxyXG4gICAgICAgIENQLmluc3RhbmNlc1tzb3VyY2UuaWQgfHwgc291cmNlLm5hbWUgfHwgdG9PYmplY3RDb3VudChDUC5pbnN0YW5jZXMpXSA9ICQ7IC8vIE1hcmsgY3VycmVudCBET00gYXMgYWN0aXZlIGNvbG9yIHBpY2tlciB0byBwcmV2ZW50IGR1cGxpY2F0ZSBpbnN0YW5jZVxyXG4gICAgICAgIHNvdXJjZVtuYW1lXSA9IDE7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHRoZVZhbHVlKGZyb20pIHtcclxuICAgICAgICAgICAgbGV0IHRvID0gQ1BbaXNGdW5jdGlvbihDUFtzdGF0ZS5jb2xvcl0pID8gc3RhdGUuY29sb3IgOiBoZXhdLFxyXG4gICAgICAgICAgICAgICAgdGhlQ29sb3I7IC8vIEdldCB2YWx1ZSBmcm9tIGBkYXRhLWNvbG9yYCBhdHRyaWJ1dGVcclxuICAgICAgICAgICAgaWYgKHRoZUNvbG9yID0gZ2V0RGF0dW0oc291cmNlLCAnY29sb3InKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzU2V0KGZyb20pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldERhdHVtKHNvdXJjZSwgJ2NvbG9yJywgdG8oZnJvbSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvKHRoZUNvbG9yKTtcclxuICAgICAgICAgICAgfSAvLyBHZXQgdmFsdWUgZnJvbSBgdmFsdWVgIGF0dHJpYnV0ZVxyXG4gICAgICAgICAgICBpZiAodGhlQ29sb3IgPSBnZXRTdGF0ZShzb3VyY2UsICd2YWx1ZScpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNTZXQoZnJvbSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0U3RhdGUoc291cmNlLCAndmFsdWUnLCB0byhmcm9tKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdG8odGhlQ29sb3IpO1xyXG4gICAgICAgICAgICB9IC8vIEdldCB2YWx1ZSBmcm9tIGNvbnRlbnRcclxuICAgICAgICAgICAgaWYgKHRoZUNvbG9yID0gZ2V0VGV4dChzb3VyY2UpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNTZXQoZnJvbSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0VGV4dChzb3VyY2UsIHRvKGZyb20pKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB0byh0aGVDb2xvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlzU2V0KGZyb20pKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIERvIG5vdGhpbmdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gWzAsIDAsIDAsIDFdOyAvLyBEZWZhdWx0IHRvIGJsYWNrXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBjbGFzc05hbWUgPSBzdGF0ZVsnY2xhc3MnXSxcclxuICAgICAgICAgICAgZG9FbnRlcixcclxuICAgICAgICAgICAgZG9FeGl0LFxyXG4gICAgICAgICAgICBkb0ZpdCxcclxuICAgICAgICAgICAgZG9SZXNpemUsXHJcbiAgICAgICAgICAgIHRoZUNvbG9yID0gdGhlVmFsdWUoKSxcclxuICAgICAgICAgICAgdGhlRGF0YSA9IFJHQjJIU1YodGhlQ29sb3IpLFxyXG4gICAgICAgICAgICBzZWxmID0gc2V0RWxlbWVudCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgICAgJ2NsYXNzJzogY2xhc3NOYW1lXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBDID0gc2V0RWxlbWVudCgnZGl2JyksXHJcbiAgICAgICAgICAgIFNWID0gc2V0RWxlbWVudCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgICAgJ2NsYXNzJzogY2xhc3NOYW1lICsgJzpzdidcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIEggPSBzZXRFbGVtZW50KCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgICAnY2xhc3MnOiBjbGFzc05hbWUgKyAnOmgnXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBBID0gc2V0RWxlbWVudCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgICAgJ2NsYXNzJzogY2xhc3NOYW1lICsgJzphJ1xyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgU1ZDb2xvciA9IHNldEVsZW1lbnQoJ2RpdicpLFxyXG4gICAgICAgICAgICBTVlNhdHVyYXRpb24gPSBzZXRFbGVtZW50KCdkaXYnKSxcclxuICAgICAgICAgICAgU1ZWYWx1ZSA9IHNldEVsZW1lbnQoJ2RpdicpLFxyXG4gICAgICAgICAgICBTVkN1cnNvciA9IHNldEVsZW1lbnQoJ2knKSxcclxuICAgICAgICAgICAgSENvbG9yID0gc2V0RWxlbWVudCgnZGl2JyksXHJcbiAgICAgICAgICAgIEhDdXJzb3IgPSBzZXRFbGVtZW50KCdpJyksXHJcbiAgICAgICAgICAgIEFDb2xvciA9IHNldEVsZW1lbnQoJ2RpdicpLFxyXG4gICAgICAgICAgICBBUGF0dGVybiA9IHNldEVsZW1lbnQoJ2RpdicpLFxyXG4gICAgICAgICAgICBBQ3Vyc29yID0gc2V0RWxlbWVudCgnaScpLFxyXG4gICAgICAgICAgICBTVlN0YXJ0aW5nID0gMCxcclxuICAgICAgICAgICAgSFN0YXJ0aW5nID0gMCxcclxuICAgICAgICAgICAgQVN0YXJ0aW5nID0gMCxcclxuICAgICAgICAgICAgU1ZEcmFnZ2luZyA9IDAsXHJcbiAgICAgICAgICAgIEhEcmFnZ2luZyA9IDAsXHJcbiAgICAgICAgICAgIEFEcmFnZ2luZyA9IDA7XHJcbiAgICAgICAgc2V0Q2hpbGRMYXN0KHNlbGYsIEMpO1xyXG4gICAgICAgIHNldENoaWxkTGFzdChDLCBTVik7XHJcbiAgICAgICAgc2V0Q2hpbGRMYXN0KEMsIEgpO1xyXG4gICAgICAgIHNldENoaWxkTGFzdChDLCBBKTtcclxuICAgICAgICBzZXRDaGlsZExhc3QoU1YsIFNWQ29sb3IpO1xyXG4gICAgICAgIHNldENoaWxkTGFzdChTViwgU1ZTYXR1cmF0aW9uKTtcclxuICAgICAgICBzZXRDaGlsZExhc3QoU1YsIFNWVmFsdWUpO1xyXG4gICAgICAgIHNldENoaWxkTGFzdChTViwgU1ZDdXJzb3IpO1xyXG4gICAgICAgIHNldENoaWxkTGFzdChILCBIQ29sb3IpO1xyXG4gICAgICAgIHNldENoaWxkTGFzdChILCBIQ3Vyc29yKTtcclxuICAgICAgICBzZXRDaGlsZExhc3QoQSwgQUNvbG9yKTtcclxuICAgICAgICBzZXRDaGlsZExhc3QoQSwgQVBhdHRlcm4pO1xyXG4gICAgICAgIHNldENoaWxkTGFzdChBLCBBQ3Vyc29yKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZG9BcHBseShpc0ZpcnN0LCB0b1BhcmVudCkge1xyXG4gICAgICAgICAgICAvLyBSZWZyZXNoIGRhdGFcclxuICAgICAgICAgICAgdGhlRGF0YSA9IFJHQjJIU1YodGhlQ29sb3IgPSB0aGVWYWx1ZSgpKTtcclxuICAgICAgICAgICAgaWYgKCFpc0ZpcnN0KSB7XHJcbiAgICAgICAgICAgICAgICBzZXRDaGlsZExhc3QodG9QYXJlbnQgfHwgc3RhdGUucGFyZW50IHx8IEIsIHNlbGYpO1xyXG4gICAgICAgICAgICAgICAgJC52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkb0VudGVyID0gdG9QYXJlbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRvQXBwbHkoMCwgdG9QYXJlbnQpLCBmaXJlKCdlbnRlcicsIHRoZUNvbG9yKSwgJDtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgZG9FeGl0ID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGdldFBhcmVudChzZWxmKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldEVsZW1lbnQoc2VsZik7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5jdXJyZW50ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAkLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG9mZkV2ZW50cyhFVkVOVFNfRE9XTiwgU1YsIGRvRG93blNWKTtcclxuICAgICAgICAgICAgICAgIG9mZkV2ZW50cyhFVkVOVFNfRE9XTiwgSCwgZG9Eb3duSCk7XHJcbiAgICAgICAgICAgICAgICBvZmZFdmVudHMoRVZFTlRTX0RPV04sIEEsIGRvRG93bkEpO1xyXG4gICAgICAgICAgICAgICAgb2ZmRXZlbnRzKEVWRU5UU19NT1ZFLCBELCBkb01vdmUpO1xyXG4gICAgICAgICAgICAgICAgb2ZmRXZlbnRzKEVWRU5UU19VUCwgRCwgZG9TdG9wKTtcclxuICAgICAgICAgICAgICAgIG9mZkV2ZW50cyhFVkVOVFNfUkVTSVpFLCBXLCBkb1Jlc2l6ZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlyZSgnZXhpdCcsIHRoZUNvbG9yKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgZG9GaXQgPSB0byA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcm9vdFJlY3QgPSBnZXRSZWN0KFIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZVJlY3QgPSBnZXRSZWN0KHNvdXJjZSksXHJcbiAgICAgICAgICAgICAgICAgICAgd2luUmVjdCA9IGdldFJlY3QoVyksXHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsQmFySGVpZ2h0ID0gd2luUmVjdFszXSAtIFIuY2xpZW50SGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEhvcml6b250YWwgc2Nyb2xsIGJhclxyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbEJhcldpZHRoID0gd2luUmVjdFsyXSAtIHJvb3RSZWN0WzJdLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFZlcnRpY2FsIHNjcm9sbCBiYXJcclxuICAgICAgICAgICAgICAgICAgICBzZWxmUmVjdCA9IGdldFJlY3Qoc2VsZiksXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZkhlaWdodCA9IHNlbGZSZWN0WzNdLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGZXaWR0aCA9IHNlbGZSZWN0WzJdLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGZMZWZ0ID0gc291cmNlUmVjdFswXSArIHdpblJlY3RbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZlRvcCA9IHNvdXJjZVJlY3RbMV0gKyB3aW5SZWN0WzFdICsgc291cmNlUmVjdFszXTsgLy8gRHJvcCFcclxuICAgICAgICAgICAgICAgIGlmIChpc09iamVjdCh0bykpIHtcclxuICAgICAgICAgICAgICAgICAgICBpc1NldCh0b1swXSkgJiYgKHNlbGZMZWZ0ID0gdG9bMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlzU2V0KHRvWzFdKSAmJiAoc2VsZlRvcCA9IHRvWzFdKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1pblggPSB3aW5SZWN0WzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5ZID0gd2luUmVjdFsxXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4WCA9IHdpblJlY3RbMF0gKyB3aW5SZWN0WzJdIC0gc2VsZldpZHRoIC0gc2Nyb2xsQmFyV2lkdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heFkgPSB3aW5SZWN0WzFdICsgd2luUmVjdFszXSAtIHNlbGZIZWlnaHQgLSBzY3JvbGxCYXJIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZkxlZnQgPSB0b0VkZ2Uoc2VsZkxlZnQsIFttaW5YLCBtYXhYXSkgPj4gMDtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmVG9wID0gdG9FZGdlKHNlbGZUb3AsIFttaW5ZLCBtYXhZXSkgPj4gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNldFN0eWxlKHNlbGYsICdsZWZ0Jywgc2VsZkxlZnQpO1xyXG4gICAgICAgICAgICAgICAgc2V0U3R5bGUoc2VsZiwgJ3RvcCcsIHNlbGZUb3ApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpcmUoJ2ZpdCcsIHRoZUNvbG9yKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgZG9SZXNpemUgPSAoKSA9PiBkb0ZpdCgpO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZG9Eb3duQShlKSB7XHJcbiAgICAgICAgICAgICAgICAkLmN1cnJlbnQgPSBBO1xyXG4gICAgICAgICAgICAgICAgQVN0YXJ0aW5nID0gQURyYWdnaW5nID0gMTtcclxuICAgICAgICAgICAgICAgIGRvTW92ZShlKTtcclxuICAgICAgICAgICAgICAgIG9mZkV2ZW50RGVmYXVsdChlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZG9Eb3duSChlKSB7XHJcbiAgICAgICAgICAgICAgICAkLmN1cnJlbnQgPSBIO1xyXG4gICAgICAgICAgICAgICAgSFN0YXJ0aW5nID0gSERyYWdnaW5nID0gMTtcclxuICAgICAgICAgICAgICAgIGRvTW92ZShlKTtcclxuICAgICAgICAgICAgICAgIG9mZkV2ZW50RGVmYXVsdChlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZG9Eb3duU1YoZSkge1xyXG4gICAgICAgICAgICAgICAgJC5jdXJyZW50ID0gU1Y7XHJcbiAgICAgICAgICAgICAgICBTVlN0YXJ0aW5nID0gU1ZEcmFnZ2luZyA9IDE7XHJcbiAgICAgICAgICAgICAgICBkb01vdmUoZSk7XHJcbiAgICAgICAgICAgICAgICBvZmZFdmVudERlZmF1bHQoZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGRvTW92ZShlKSB7XHJcbiAgICAgICAgICAgICAgICBTVkRyYWdnaW5nICYmIGRvU2V0U1ZDdXJzb3IoZSk7XHJcbiAgICAgICAgICAgICAgICBIRHJhZ2dpbmcgJiYgZG9TZXRIQ3Vyc29yKGUpO1xyXG4gICAgICAgICAgICAgICAgQURyYWdnaW5nICYmIGRvU2V0QUN1cnNvcihlKTtcclxuICAgICAgICAgICAgICAgIHRoZUNvbG9yID0gUDJSR0IodGhlRGF0YSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoU1ZEcmFnZ2luZyB8fCBIRHJhZ2dpbmcgfHwgQURyYWdnaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyZShTVlN0YXJ0aW5nIHx8IEhTdGFydGluZyB8fCBBU3RhcnRpbmcgPyAnc3RhcnQnIDogJ2RyYWcnLCB0aGVDb2xvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyZSgnY2hhbmdlJywgdGhlQ29sb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgU1ZTdGFydGluZyA9IEhTdGFydGluZyA9IEFTdGFydGluZyA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGRvU2V0Q29sb3IoKSB7XHJcbiAgICAgICAgICAgICAgICBkb1NldEN1cnNvcih0aGVEYXRhKTtcclxuICAgICAgICAgICAgICAgIGxldCBhID0gUDJSR0IodGhlRGF0YSksXHJcbiAgICAgICAgICAgICAgICAgICAgYiA9IFAyUkdCKFt0aGVEYXRhWzBdLCAxLCAxXSk7XHJcbiAgICAgICAgICAgICAgICBzZXRTdHlsZShTVkNvbG9yLCAnYmFja2dyb3VuZC1jb2xvcicsICdyZ2IoJyArIGJbMF0gKyAnLCcgKyBiWzFdICsgJywnICsgYlsyXSArICcpJyk7XHJcbiAgICAgICAgICAgICAgICBzZXRTdHlsZShBQ29sb3IsICdiYWNrZ3JvdW5kLWltYWdlJywgJ2xpbmVhci1ncmFkaWVudChyZ2IoJyArIGFbMF0gKyAnLCcgKyBhWzFdICsgJywnICsgYVsyXSArICcpLHRyYW5zcGFyZW50KScpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBkb1NldEN1cnNvcih4KSB7XHJcbiAgICAgICAgICAgICAgICBpc1NldCh4WzFdKSAmJiBzZXRTdHlsZShTVkN1cnNvciwgJ3JpZ2h0JywgU1ZXaWR0aCAtIFNWV2lkdGhDdXJzb3IgLyAyIC0gU1ZXaWR0aCAqICt4WzFdKTtcclxuICAgICAgICAgICAgICAgIGlzU2V0KHhbMl0pICYmIHNldFN0eWxlKFNWQ3Vyc29yLCAndG9wJywgU1ZIZWlnaHQgLSBTVkhlaWdodEN1cnNvciAvIDIgLSBTVkhlaWdodCAqICt4WzJdKTtcclxuICAgICAgICAgICAgICAgIGlzU2V0KHhbMF0pICYmIHNldFN0eWxlKEhDdXJzb3IsICd0b3AnLCBISGVpZ2h0IC0gSEhlaWdodEN1cnNvciAvIDIgLSBISGVpZ2h0ICogK3hbMF0pO1xyXG4gICAgICAgICAgICAgICAgaXNTZXQoeFszXSkgJiYgc2V0U3R5bGUoQUN1cnNvciwgJ3RvcCcsIEFIZWlnaHQgLSBBSGVpZ2h0Q3Vyc29yIC8gMiAtIEFIZWlnaHQgKiAreFszXSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGRvU2V0QUN1cnNvcihlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGVEYXRhWzNdID0gKEFIZWlnaHQgLSB0b0VkZ2UoZ2V0QXhpcyhlLCBBKVsxXSwgWzAsIEFIZWlnaHRdKSkgLyBBSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgZG9TZXRDb2xvcigpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBkb1NldEhDdXJzb3IoZSkge1xyXG4gICAgICAgICAgICAgICAgdGhlRGF0YVswXSA9IChISGVpZ2h0IC0gdG9FZGdlKGdldEF4aXMoZSwgSClbMV0sIFswLCBISGVpZ2h0XSkpIC8gSEhlaWdodDtcclxuICAgICAgICAgICAgICAgIGRvU2V0Q29sb3IoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZG9TZXRTVkN1cnNvcihlKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgU1ZQb2ludCA9IGdldEF4aXMoZSwgU1YpLFxyXG4gICAgICAgICAgICAgICAgICAgIHggPSB0b0VkZ2UoU1ZQb2ludFswXSwgWzAsIFNWV2lkdGhdKSxcclxuICAgICAgICAgICAgICAgICAgICB5ID0gdG9FZGdlKFNWUG9pbnRbMV0sIFswLCBTVkhlaWdodF0pO1xyXG4gICAgICAgICAgICAgICAgdGhlRGF0YVsxXSA9IDEgLSAoU1ZXaWR0aCAtIHgpIC8gU1ZXaWR0aDtcclxuICAgICAgICAgICAgICAgIHRoZURhdGFbMl0gPSAoU1ZIZWlnaHQgLSB5KSAvIFNWSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgZG9TZXRDb2xvcigpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBkb1N0b3AoZSkge1xyXG4gICAgICAgICAgICAgICAgdGhlQ29sb3IgPSBQMlJHQih0aGVEYXRhKTtcclxuICAgICAgICAgICAgICAgIGxldCB0ID0gZS50YXJnZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNTb3VyY2UgPSBzb3VyY2UgPT09IGdldENsb3Nlc3QodCwgc291cmNlKSxcclxuICAgICAgICAgICAgICAgICAgICBpc1NlbGYgPSBzZWxmID09PSBnZXRDbG9zZXN0KHQsIHNlbGYpO1xyXG4gICAgICAgICAgICAgICAgJC5jdXJyZW50ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGlmICghaXNTb3VyY2UgJiYgIWlzU2VsZikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChob29rcy5ibHVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmUoJ2JsdXInLCB0aGVDb2xvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xpY2sgb3V0c2lkZSB0aGUgc291cmNlIG9yIHBpY2tlciBlbGVtZW50IHRvIGV4aXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFNWRHJhZ2dpbmcgfHwgSERyYWdnaW5nIHx8IEFEcmFnZ2luZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0UGFyZW50KHNlbGYpICYmIGRvRXhpdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNTZWxmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTVkRyYWdnaW5nIHx8IEhEcmFnZ2luZyB8fCBBRHJhZ2dpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmUoJ3N0b3AnLCB0aGVDb2xvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBTVkRyYWdnaW5nID0gSERyYWdnaW5nID0gQURyYWdnaW5nID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgU1ZSZWN0ID0gZ2V0UmVjdChTViksXHJcbiAgICAgICAgICAgICAgICBTVlJlY3RDdXJzb3IgPSBnZXRSZWN0KFNWQ3Vyc29yKSxcclxuICAgICAgICAgICAgICAgIEhSZWN0ID0gZ2V0UmVjdChIKSxcclxuICAgICAgICAgICAgICAgIEhSZWN0Q3Vyc29yID0gZ2V0UmVjdChIQ3Vyc29yKSxcclxuICAgICAgICAgICAgICAgIEFSZWN0ID0gZ2V0UmVjdChBKSxcclxuICAgICAgICAgICAgICAgIEFSZWN0Q3Vyc29yID0gZ2V0UmVjdChBQ3Vyc29yKSxcclxuICAgICAgICAgICAgICAgIFNWSGVpZ2h0ID0gU1ZSZWN0WzNdLFxyXG4gICAgICAgICAgICAgICAgU1ZIZWlnaHRDdXJzb3IgPSBTVlJlY3RDdXJzb3JbM10sXHJcbiAgICAgICAgICAgICAgICBTVldpZHRoID0gU1ZSZWN0WzJdLFxyXG4gICAgICAgICAgICAgICAgU1ZXaWR0aEN1cnNvciA9IFNWUmVjdEN1cnNvclsyXSxcclxuICAgICAgICAgICAgICAgIEhIZWlnaHQgPSBIUmVjdFszXSxcclxuICAgICAgICAgICAgICAgIEhIZWlnaHRDdXJzb3IgPSBIUmVjdEN1cnNvclszXSxcclxuICAgICAgICAgICAgICAgIEFIZWlnaHQgPSBBUmVjdFszXSxcclxuICAgICAgICAgICAgICAgIEFIZWlnaHRDdXJzb3IgPSBBUmVjdEN1cnNvclszXTtcclxuICAgICAgICAgICAgaWYgKGlzRmlyc3QpIHtcclxuICAgICAgICAgICAgICAgIG9uRXZlbnRzKEVWRU5UU19ET1dOLCBzb3VyY2UsIGRvQ2xpY2spO1xyXG4gICAgICAgICAgICAgICAgZGVsYXkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpcmUoJ2NoYW5nZScsIHRoZUNvbG9yKTtcclxuICAgICAgICAgICAgICAgIH0sIDEpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgb25FdmVudHMoRVZFTlRTX0RPV04sIFNWLCBkb0Rvd25TVik7XHJcbiAgICAgICAgICAgICAgICBvbkV2ZW50cyhFVkVOVFNfRE9XTiwgSCwgZG9Eb3duSCk7XHJcbiAgICAgICAgICAgICAgICBvbkV2ZW50cyhFVkVOVFNfRE9XTiwgQSwgZG9Eb3duQSk7XHJcbiAgICAgICAgICAgICAgICBvbkV2ZW50cyhFVkVOVFNfTU9WRSwgRCwgZG9Nb3ZlKTtcclxuICAgICAgICAgICAgICAgIG9uRXZlbnRzKEVWRU5UU19VUCwgRCwgZG9TdG9wKTtcclxuICAgICAgICAgICAgICAgIG9uRXZlbnRzKEVWRU5UU19SRVNJWkUsIFcsIGRvUmVzaXplKTtcclxuICAgICAgICAgICAgICAgIGRvRml0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZG9TZXRDb2xvcigpO1xyXG4gICAgICAgICAgICAkLmNvbG9yID0gKHIsIGcsIGIsIGEpID0+IENQW2lzRnVuY3Rpb24oQ1Bbc3RhdGUuY29sb3JdKSA/IHN0YXRlLmNvbG9yIDogaGV4XShbciwgZywgYiwgYV0pO1xyXG4gICAgICAgICAgICAkLmN1cnJlbnQgPSBudWxsO1xyXG4gICAgICAgICAgICAkLmVudGVyID0gZG9FbnRlcjtcclxuICAgICAgICAgICAgJC5leGl0ID0gZG9FeGl0O1xyXG4gICAgICAgICAgICAkLmZpdCA9IGRvRml0O1xyXG4gICAgICAgICAgICAkLmdldCA9ICgpID0+IHRoZVZhbHVlKCk7XHJcbiAgICAgICAgICAgICQucG9wID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzb3VyY2VbbmFtZV0pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJDsgLy8gQWxyZWFkeSBlamVjdGVkXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgc291cmNlW25hbWVdO1xyXG4gICAgICAgICAgICAgICAgb2ZmRXZlbnRzKEVWRU5UU19ET1dOLCBzb3VyY2UsIGRvQ2xpY2spO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRvRXhpdCgpLCBmaXJlKCdwb3AnLCB0aGVDb2xvcik7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICQuc2V0ID0gKHIsIGcsIGIsIGEpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoZURhdGEgPSBSR0IySFNWKFtyLCBnLCBiLCBhXSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZG9TZXRDb2xvcigpLCAkO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAkLnNlbGYgPSBzZWxmO1xyXG4gICAgICAgICAgICAkLnZhbHVlID0gKHIsIGcsIGIsIGEpID0+ICgkLnNldChyLCBnLCBiLCBhKSwgZmlyZSgnY2hhbmdlJywgW3IsIGcsIGIsIGFdKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRvQXBwbHkoMSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGRvQ2xpY2soZSkge1xyXG4gICAgICAgICAgICBpZiAoaG9va3MuZm9jdXMpIHtcclxuICAgICAgICAgICAgICAgIGZpcmUoJ2ZvY3VzJywgdGhlQ29sb3IpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IHQgPSBlLnRhcmdldCxcclxuICAgICAgICAgICAgICAgICAgICBpc1NvdXJjZSA9IHNvdXJjZSA9PT0gZ2V0Q2xvc2VzdCh0LCBzb3VyY2UpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzU291cmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIWdldFBhcmVudChzZWxmKSAmJiBkb0VudGVyKHN0YXRlLnBhcmVudCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvRXhpdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAkO1xyXG4gICAgfVxyXG4gICAgQ1BbaGV4XSA9IHggPT4ge1xyXG4gICAgICAgIGlmIChpc1N0cmluZyh4KSkge1xyXG4gICAgICAgICAgICBsZXQgY291bnQgPSAoeCA9IHgudHJpbSgpKS5sZW5ndGg7XHJcbiAgICAgICAgICAgIGlmICgoNCA9PT0gY291bnQgfHwgNyA9PT0gY291bnQpICYmICcjJyA9PT0geFswXSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKC9eIyhbYS1mXFxkXXszfSl7MSwyfSQvaS50ZXN0KHgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKDQgPT09IGNvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbdG9OdW1iZXIoeFsxXSArIHhbMV0sIDE2KSwgdG9OdW1iZXIoeFsyXSArIHhbMl0sIDE2KSwgdG9OdW1iZXIoeFszXSArIHhbM10sIDE2KSwgMV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbdG9OdW1iZXIoeFsxXSArIHhbMl0sIDE2KSwgdG9OdW1iZXIoeFszXSArIHhbNF0sIDE2KSwgdG9OdW1iZXIoeFs1XSArIHhbNl0sIDE2KSwgMV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKDUgPT09IGNvdW50IHx8IDkgPT09IGNvdW50KSAmJiAnIycgPT09IHhbMF0pIHtcclxuICAgICAgICAgICAgICAgIGlmICgvXiMoW2EtZlxcZF17Myw0fSl7MSwyfSQvaS50ZXN0KHgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKDUgPT09IGNvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbdG9OdW1iZXIoeFsxXSArIHhbMV0sIDE2KSwgdG9OdW1iZXIoeFsyXSArIHhbMl0sIDE2KSwgdG9OdW1iZXIoeFszXSArIHhbM10sIDE2KSwgdG9OdW1iZXIoeFs0XSArIHhbNF0sIDE2KSAvIDI1NV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbdG9OdW1iZXIoeFsxXSArIHhbMl0sIDE2KSwgdG9OdW1iZXIoeFszXSArIHhbNF0sIDE2KSwgdG9OdW1iZXIoeFs1XSArIHhbNl0sIDE2KSwgdG9OdW1iZXIoeFs3XSArIHhbOF0sIDE2KSAvIDI1NV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFswLCAwLCAwLCAxXTsgLy8gRGVmYXVsdCB0byBibGFja1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gJyMnICsgKCcwMDAwMDAnICsgdG9TdHJpbmcoK3hbMl0gfCAreFsxXSA8PCA4IHwgK3hbMF0gPDwgMTYsIDE2KSkuc2xpY2UoLTYpICsgKGlzU2V0KHhbM10pICYmIHhbM10gPCAxID8gdG9TdHJpbmcodG9Sb3VuZCh4WzNdICogMjU1KSArIDB4MTAwMDAsIDE2KS5zdWJzdHIoLTIpIDogXCJcIik7XHJcbiAgICB9O1xyXG4gICAgQ1AuaW5zdGFuY2VzID0ge307XHJcbiAgICBDUC5zdGF0ZSA9IHtcclxuICAgICAgICAnY2xhc3MnOiAnY29sb3ItcGlja2VyJyxcclxuICAgICAgICAnY29sb3InOiBoZXgsXHJcbiAgICAgICAgJ3BhcmVudCc6IG51bGxcclxuICAgIH07XHJcbiAgICBDUC52ZXJzaW9uID0gJzIuMi4wJztcclxuICAgIHJldHVybiBDUDtcclxufSk7IiwiLyoqXHJcbiAqIEBtb2R1bGUgVGVtcGxhdGUvVXRpbHNcclxuICovXHJcblxyXG5pbXBvcnQgeyBDT05TVEFOVFMgfSBmcm9tICcuLy4uL0NvbnN0YW50cy5qcyc7XHJcblxyXG5pbXBvcnQgVHJhbnNsYXRvciBmcm9tICcuLy4uL1RyYW5zbGF0b3IvdHJhbnNsYXRvci5qcyc7XHJcblxyXG4vKipcclxuICogQGRlc2NyaXB0aW9uICBVdGlsIOuqqOydjCBDbGFzc1xyXG4gKlxyXG4gKiBAcHJvcGVydHkge0FycmF5fSBmb250RmFtaWx5Q29tYm9Cb3gge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNmb250RmFtaWx5Q29tYm9Cb3h9XHJcbiAqIEBwcm9wZXJ0eSB7QXJyYXl9IGRhdGVGb3JtYXRDb21ib0JveCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2RhdGVGb3JtYXRDb21ib0JveH1cclxuICogQHByb3BlcnR5IHtBcnJheX0gZm9udFNpemVDb21ib0JveCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2ZvbnRTaXplQ29tYm9Cb3h9XHJcbiAqIEBwcm9wZXJ0eSB7QXJyYXl9IHNpZ25QZW5XaWR0aENvbWJvQm94IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjc2lnblBlbldpZHRoQ29tYm9Cb3h9XHJcbiAqIEBwcm9wZXJ0eSB7QXJyYXl9IHVzZXJJbmZvT3B0aW9uTGlzdCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI3VzZXJJbmZvT3B0aW9uTGlzdH1cclxuICogQHByb3BlcnR5IHtOdW1iZXJ9IHVzZXJJbmZvT3B0aW9uTGlzdENvdW50IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjdXNlckluZm9PcHRpb25MaXN0Q291bnR9XHJcbiAqIEBwcm9wZXJ0eSB7QXJyYXl9IGR2RmllbGRPcHRpb25MaXN0IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjZHZGaWVsZE9wdGlvbkxpc3R9XHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGFkZE9iamVjdHNUb0NhbnZhcyB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2FkZE9iamVjdHNUb0NhbnZhc31cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gYWRkU2lnblN2Z1RvQ2FudmFzIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjYWRkU2lnblN2Z1RvQ2FudmFzfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBib3VuZGluZ1JlY3RUb1JlY3Qge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNib3VuZGluZ1JlY3RUb1JlY3R9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNsb25lRmFicmljQ2FudmFzIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjY2xvbmVGYWJyaWNDYW52YXN9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNsb25lT2JqZWN0IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjY2xvbmVPYmplY3R9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNsb25lT2JqZWN0VG9PYmplY3Qge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjbG9uZU9iamVjdFRvT2JqZWN0fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBjbG9zZVNlbGVjdDJUYWcge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjbG9zZVNlbGVjdDJUYWd9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNyZWF0ZUFzdGVyaXNrRGl2IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjY3JlYXRlQXN0ZXJpc2tEaXZ9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNyZWF0ZUF0dHJidXRlUG9wdXAge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjcmVhdGVBdHRyYnV0ZVBvcHVwfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBjcmVhdGVBdHRyaWJ1dGVDaGVja0JveE5vZGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjcmVhdGVBdHRyaWJ1dGVDaGVja0JveE5vZGV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNyZWF0ZUF0dHJpYnV0ZUNvbG9ySW5wdXROb2RlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjY3JlYXRlQXR0cmlidXRlQ29sb3JJbnB1dE5vZGV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNyZWF0ZUF0dHJpYnV0ZURhdGVJbnB1dE5vZGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjcmVhdGVBdHRyaWJ1dGVEYXRlSW5wdXROb2RlfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBjcmVhdGVBdHRyaWJ1dGVJbnB1dE5vZGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjcmVhdGVBdHRyaWJ1dGVJbnB1dE5vZGV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNyZWF0ZUF0dHJpYnV0ZUlucHV0Tm9kZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZUF0dHJpYnV0ZUlucHV0Tm9kZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gY3JlYXRlQXR0cmlidXRlUGFuZWxOb2RlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjY3JlYXRlQXR0cmlidXRlUGFuZWxOb2RlfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBjcmVhdGVBdHRyaWJ1dGVTZWxlY3RJbm5lck5vZGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjcmVhdGVBdHRyaWJ1dGVTZWxlY3RJbm5lck5vZGV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNyZWF0ZUF0dHJpYnV0ZVNlbGVjdE5vZGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjcmVhdGVBdHRyaWJ1dGVTZWxlY3ROb2RlfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBjcmVhdGVBdHRyaWJ1dGVUb2dnbGVCdXR0b25Ob2RlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjY3JlYXRlQXR0cmlidXRlVG9nZ2xlQnV0dG9uTm9kZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gY3JlYXRlRGl2aWRlck5vZGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjcmVhdGVEaXZpZGVyTm9kZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gY3JlYXRlRmllbGREZWxldGVCdG4ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjcmVhdGVGaWVsZERlbGV0ZUJ0bn1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gY3JlYXRlVGV4dEFsaWduQnV0dG9uTm9kZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZVRleHRBbGlnbkJ1dHRvbk5vZGV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNyZWF0ZVRleHRBdHRyYnV0ZU5vZGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjcmVhdGVUZXh0QXR0cmJ1dGVOb2RlfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBjcmVhdGVUZXh0Qm9sZEJ1dHRvbk5vZGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjcmVhdGVUZXh0Qm9sZEJ1dHRvbk5vZGV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNyZWF0ZVRleHRDb2xvckJ1dHRvbk5vZGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjcmVhdGVUZXh0Q29sb3JCdXR0b25Ob2RlfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBmaWVsZEFuY2VzdG9ycyB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2ZpZWxkQW5jZXN0b3JzfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBmaW5kU2FtZUFuY2VzdG9yIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjZmluZFNhbWVBbmNlc3Rvcn1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZ2V0Rm9uU2l6ZUNvbWJvQm94IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjZ2V0Rm9uU2l6ZUNvbWJvQm94fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBnZXRVc2VySW5mb09wdHNMaXN0IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjZ2V0VXNlckluZm9PcHRzTGlzdH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gaW1hZ2VGaWxlVG9CYXNlNjQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNpbWFnZUZpbGVUb0Jhc2U2NH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gaXNFbXB0eU9iamVjdCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2lzRW1wdHlPYmplY3R9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGlzU2hvd0FzdGVyaXNrRGl2IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjaXNTaG93QXN0ZXJpc2tEaXZ9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGlzU3RyaW5nRW1wdHkge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNpc1N0cmluZ0VtcHR5fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBtZXJnZUZpZWxkc0JCb3gge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5tZXJnZUZpZWxkc0JCb3gjYWRkT2JqZWN0c1RvQ2FudmFzfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBtZXJnZU9iamVjdHNSZWN0IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjbWVyZ2VPYmplY3RzUmVjdH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gbWVyZ2VSZWN0IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjbWVyZ2VSZWN0fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSByZXBvc2l0aW9uRmllbGREZWxldGVCdG4ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNyZXBvc2l0aW9uRmllbGREZWxldGVCdG59XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNldERWRmllbGRPcHRzTGlzdCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI3NldERWRmllbGRPcHRzTGlzdH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gc2V0VXNlckluZm9PcHRzTGlzdCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI3NldFVzZXJJbmZvT3B0c0xpc3R9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNldFVzZXJJbmZvT3B0c0xpc3RDb3VudCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI3NldFVzZXJJbmZvT3B0c0xpc3RDb3VudH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gc2hvd0FzdGVyaXNrRGl2IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjc2hvd0FzdGVyaXNrRGl2fVxyXG4gKiBcclxuICogQEZpbGVOYW1lIHV0aWxzLmpzXHJcbiAqIEBzaW5jZSAyMDIxLjA1LjMxXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVXRpbHMge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge0FycmF5fVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2ZvbnRGYW1pbHlDb21ib0JveFxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2PsO2KuCDsooXrpZhcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZvbnRGYW1pbHlDb21ib0JveCA9IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRleHQ6IFwi66eR7J2AIOqzoOuUlVwiLFxyXG4gICAgICAgICAgICB2YWx1ZTogXCJNYWxndW5Hb3RoaWNcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0ZXh0OiBcIuuwlO2DleyytFwiLFxyXG4gICAgICAgICAgICB2YWx1ZTogXCJCYXRhbmdcIlxyXG4gICAgICAgIH1cclxuICAgIF07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7QXJyYXl9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjZGF0ZUZvcm1hdENvbWJvQm94XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg64Kg7KecIO2PrOuppyDrpqzsiqTtirhcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGRhdGVGb3JtYXRDb21ib0JveCA9IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRleHQ6IFwiWVlZWS1NTS1ERFwiLFxyXG4gICAgICAgICAgICB2YWx1ZTogXCJZLW0tZFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRleHQ6IFwiWVlZWS9NTS9ERFwiLFxyXG4gICAgICAgICAgICB2YWx1ZTogXCJZL20vZFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRleHQ6IFwiWVlZWS5NTS5ERFwiLFxyXG4gICAgICAgICAgICB2YWx1ZTogXCJZLm0uZFwiXHJcbiAgICAgICAgfVxyXG4gICAgXVxyXG5cclxuICAgIHN0YXRpYyByYWRpb1R5cGVMaXN0ID0gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGV4dDogXCJUeXBlIDFcIixcclxuICAgICAgICAgICAgdmFsdWU6IENPTlNUQU5UUy5SQURJT19UWVBFXzFcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGV4dDogXCJUeXBlIDJcIixcclxuICAgICAgICAgICAgdmFsdWU6IENPTlNUQU5UUy5SQURJT19UWVBFXzJcclxuICAgICAgICB9XHJcbiAgICBdXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtBcnJheX1cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNmb250U2l6ZUNvbWJvQm94XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7Y+w7Yq4IOyCrOydtOymiCDsvaTrs7TrsJXsiqQg66as7Iqk7Yq4XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBmb250U2l6ZUNvbWJvQm94ID0gW107XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7QXJyYXl9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjc2lnblBlbldpZHRoQ29tYm9Cb3hcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDshJzrqoXtjpwg65GQ6ruYIOy9pOuztOuwleyKpCDrpqzsiqTtirhcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHNpZ25QZW5XaWR0aENvbWJvQm94ID0gW107XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7QXJyYXl9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjdXNlckluZm9PcHRpb25MaXN0XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ISc66qF7J6QIOumrOyKpO2KuFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgdXNlckluZm9PcHRpb25MaXN0ID0gW107XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7TnVtYmVyfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI3VzZXJJbmZvT3B0aW9uTGlzdENvdW50XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ISc66qF7J6QIOumrOyKpO2KuCDqsK/siJhcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHVzZXJJbmZvT3B0aW9uTGlzdENvdW50ID0gMDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtBcnJheX1cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNkdkZpZWxkT3B0aW9uTGlzdFxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIOq4sOuzuOqwkiDsmLXshZgg66as7Iqk7Yq4XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBkdkZpZWxkT3B0aW9uTGlzdCA9IFtdO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge09iamVjdH1cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNzaWduVGFiU2hvd09wdFxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIOyEnOuqhe2DrSDrs7TsnoQv7JWI67O07J6EIOq4sOuzuOqwkiDsmLXshZhcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHNpZ25UYWJTaG93T3B0ID0ge307XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2xvY2FsZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2YhOyerCDslrjslrRcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGxvY2FsZSA9IFwia29cIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtPYmplY3R9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjdHJhbnNsYXRvclxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIOuLpOq1reyWtCDsgqzsmqnsnYQg7JyE7ZWcIE9iamVjdFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgdHJhbnNsYXRvciA9IG5ldyBUcmFuc2xhdG9yKHtcclxuICAgICAgICBmaWxlc0xvY2F0aW9uOiAnL2pzL3BkZl9mb3JtL2kxOG4nXHJcbiAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAqIFxyXG4gICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBpc0VtcHR5T2JqZWN0XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjaXNFbXB0eU9iamVjdFxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpICBPYmplY3TqsIAg67mE7Ja07J6I64qU7KeAIOyytO2BrFxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1cclxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHBhcmFtXHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBpc0VtcHR5T2JqZWN0KHBhcmFtKSB7XHJcbiAgICAgICAgaWYgKHBhcmFtID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgICAgICAgcGFyYW0gPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhwYXJhbSkubGVuZ3RoID09PSAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGNsb3NlU2VsZWN0MlRhZ1xyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2Nsb3NlU2VsZWN0MlRhZ1xyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFNlbGVjdDLqsIAg7Je066Ck7J6I64qUIO2DnOq3uOulvCDssrTtgaztlZjsl6wg64ur64qU64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZVxyXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNsb3NlU2VsZWN0MlRhZyhub2RlKSB7XHJcbiAgICAgICAgbm9kZS5xdWVyeVNlbGVjdG9yQWxsKFwibGkgLlwiICsgQ09OU1RBTlRTLkVESVRPUl9BVFRSX1NFTEVDVF9DTEFTUykuZm9yRWFjaCgoZWwpID0+IHtcclxuICAgICAgICAgICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucyhcInNlbGVjdDItaGlkZGVuLWFjY2Vzc2libGVcIikpIHtcclxuICAgICAgICAgICAgICAgICQoZWwpLnNlbGVjdDIoJ2Nsb3NlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiByZW1vdmVBbGxDaGlsZE5vZGVcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNyZW1vdmVBbGxDaGlsZE5vZGVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtlbTri7ntlZjripQgTm9kZeydmCDrqqjrk6AgQ2hpbGTrpbwg7KCc6rGw7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZVxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgcmVtb3ZlQWxsQ2hpbGROb2RlKG5vZGUpIHtcclxuICAgICAgICBpZiAobm9kZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdoaWxlIChub2RlLmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICAgICAgaWYgKG5vZGUubGFzdENoaWxkLmlkID09PSBDT05TVEFOVFMuRURJVE9SX0FUVFJfUEFORUxfSUQpIHtcclxuICAgICAgICAgICAgICAgIFV0aWxzLmNsb3NlU2VsZWN0MlRhZyhub2RlLmxhc3RDaGlsZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbm9kZS5yZW1vdmVDaGlsZChub2RlLmxhc3RDaGlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGNyZWF0ZUF0dHJpYnV0ZVBhbmVsTm9kZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZUF0dHJpYnV0ZVBhbmVsTm9kZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOuTnOydmCDsho3shLHsnYQg67O07Jes7KSEIFBhbmVs66W8IOyDneyEse2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIHtFbGVtZW50fVxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlYXRlQXR0cmlidXRlUGFuZWxOb2RlKCkge1xyXG4gICAgICAgIHZhciBwYW5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiKTtcclxuICAgICAgICBwYW5lbC5jbGFzc05hbWUgPSBDT05TVEFOVFMuRURJVE9SX0FUVFJfUEFORUxfQ0xBU1M7XHJcbiAgICAgICAgcGFuZWwuaWQgPSBDT05TVEFOVFMuRURJVE9SX0FUVFJfUEFORUxfSUQ7XHJcblxyXG4gICAgICAgIHJldHVybiBwYW5lbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBjcmVhdGVBdHRyaWJ1dGVJbnB1dE5vZGVcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjcmVhdGVBdHRyaWJ1dGVJbnB1dE5vZGVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtlYTrk5zsnZgg7IaN7ISx7KSRIGlucHV07J2EIOyCrOyaqe2VmOuKlCBFbGVtZW5066W8IOunjOuToOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRJRCDsgqzsmqntlaAgRmllbGTsnZggSURcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZFByb3BldHlOYW1lIOyCrOyaqe2VoCBGaWVsZOydmCDsho3shLEg7J2066aEXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGl0bGUgIEVsZW1lbnTsl5Ag7IKs7Jqp7ZWgIOydtOumhFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlICBpbnB1dOyXkCDrk6TslrTqsIgg6rCSXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbm9kZVRvb2x0aXAgIFRvb2xUaXDsl5Ag65Ok7Ja06rCIIOuCtOyaqVxyXG4gICAgICogQHBhcmFtIHtjYWxsYmFja30gY2hhbmdlRXZlbnRGdW5jICDqsJLsnbQg67OA7ZWgIOuVjCDtmLjstpzrkJjslrTsp4ggY2FsbGJhY2tcclxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVhdGVBdHRyaWJ1dGVJbnB1dE5vZGUoZmllbGRJZCwgZmllbGRQcm9wZXR5TmFtZSwgdGl0bGUsIHZhbHVlLCB0eXBlLCBub2RlVG9vbHRpcCwgY2hhbmdlRXZlbnRGdW5jKSB7XHJcbiAgICAgICAgdmFyIHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuICAgICAgICByb3cuY2xhc3NOYW1lID0gQ09OU1RBTlRTLkVESVRPUl9BVFRSX0NPTlRFTlRTX1JPV19DTEFTUztcclxuICAgICAgICB2YXIgdGl0bGVXcmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aXRsZVdyYXAuY2xhc3NOYW1lID0gQ09OU1RBTlRTLlRJVExFX1dSQVBfQ0xBU1M7XHJcbiAgICAgICAgdmFyIHRpdGxlU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgIHRpdGxlU3Bhbi5jbGFzc05hbWUgPSBDT05TVEFOVFMuVElUTEVfQ0xBU1M7XHJcbiAgICAgICAgdGl0bGVTcGFuLnRleHRDb250ZW50ID0gVXRpbHMudHJhbnNsYXRlRm9yS2V5KHRpdGxlKTtcclxuICAgICAgICB0aXRsZVNwYW4uc2V0QXR0cmlidXRlKFwiZGF0YS1pMThuXCIsIHRpdGxlKTtcclxuICAgICAgICB0aXRsZVdyYXAuYXBwZW5kQ2hpbGQodGl0bGVTcGFuKTtcclxuICAgICAgICB2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICAgICAgaW5wdXQuY2xhc3NOYW1lID0gQ09OU1RBTlRTLkVESVRPUl9BVFRSX0lOUFVUX0NMQVNTO1xyXG4gICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShcImRhdGEtZmllbGQtaWRcIiwgZmllbGRJZCk7XHJcbiAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKFwiZGF0YS1maWVsZC1wcm9wZXJ0eS1uYW1lXCIsIGZpZWxkUHJvcGV0eU5hbWUpO1xyXG4gICAgICAgIGlmICh2YWx1ZSAhPT0gXCJcIikge1xyXG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZSAhPT0gXCJcIiApIHtcclxuICAgICAgICAgICAgaW5wdXQudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgY2hhbmdlRXZlbnRGdW5jLCB0cnVlKTtcclxuICAgICAgICBcclxuICAgICAgICByb3cuYXBwZW5kQ2hpbGQodGl0bGVXcmFwKTtcclxuICAgICAgICByb3cuYXBwZW5kQ2hpbGQoaW5wdXQpO1xyXG4gICAgICAgIHJldHVybiByb3c7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gY3JlYXRlQXR0cmlidXRlSW5wdXROb2RlXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjY3JlYXRlQXR0cmlidXRlSW5wdXROb2RlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE65Oc7J2YIOyGjeyEseykkSB0ZXh0YXJl66W8IOyCrOyaqe2VmOuKlCBFbGVtZW5066W8IOunjOuToOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRJRCDsgqzsmqntlaAgRmllbGTsnZggSURcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZFByb3BldHlOYW1lIOyCrOyaqe2VoCBGaWVsZOydmCDsho3shLEg7J2066aEXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGl0bGUgIEVsZW1lbnTsl5Ag7IKs7Jqp7ZWgIOydtOumhFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlICB0ZXh0YXJl7JeQIOuTpOyWtOqwiCDqsJJcclxuICAgICAqIEBwYXJhbSB7Y2FsbGJhY2t9IGNoYW5nZUV2ZW50RnVuYyDqsJLsnbQg67OA7ZWgIOuVjCDtmLjstpzrkJjslrTsp4ggY2FsbGJhY2tcclxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVhdGVBdHRyaWJ1dGVUZXh0QXJlYU5vZGUoZmllbGRJZCwgZmllbGRQcm9wZXR5TmFtZSwgdGl0bGUsIHZhbHVlLCB0eXBlLCBjaGFuZ2VFdmVudEZ1bmMpIHtcclxuICAgICAgICB2YXIgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xyXG4gICAgICAgIHJvdy5jbGFzc05hbWUgPSBDT05TVEFOVFMuRURJVE9SX0FUVFJfQ09OVEVOVFNfUk9XX0NMQVNTO1xyXG4gICAgICAgIHZhciB0aXRsZVdyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRpdGxlV3JhcC5jbGFzc05hbWUgPSBDT05TVEFOVFMuVElUTEVfV1JBUF9DTEFTUztcclxuICAgICAgICB2YXIgdGl0bGVTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgdGl0bGVTcGFuLmNsYXNzTmFtZSA9IENPTlNUQU5UUy5USVRMRV9DTEFTUztcclxuICAgICAgICB0aXRsZVNwYW4udGV4dENvbnRlbnQgPSBVdGlscy50cmFuc2xhdGVGb3JLZXkodGl0bGUpO1xyXG4gICAgICAgIHRpdGxlV3JhcC5hcHBlbmRDaGlsZCh0aXRsZVNwYW4pO1xyXG4gICAgICAgIHZhciB0ZXh0YXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKTtcclxuICAgICAgICB0ZXh0YXJlYS5jbGFzc05hbWUgPSBDT05TVEFOVFMuRURJVE9SX0FUVFJfVEVYVEFSRUFfQ0xBU1M7XHJcbiAgICAgICAgdGV4dGFyZWEuc2V0QXR0cmlidXRlKFwiZGF0YS1maWVsZC1pZFwiLCBmaWVsZElkKTtcclxuICAgICAgICB0ZXh0YXJlYS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWZpZWxkLXByb3BlcnR5LW5hbWVcIiwgZmllbGRQcm9wZXR5TmFtZSk7XHJcbiAgICAgICAgaWYgKHZhbHVlICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgIHRleHRhcmVhLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgIHRleHRhcmVhLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYywgdHJ1ZSk7XHJcblxyXG4gICAgICAgIHJvdy5hcHBlbmRDaGlsZCh0aXRsZVdyYXApO1xyXG4gICAgICAgIHJvdy5hcHBlbmRDaGlsZCh0ZXh0YXJlYSk7XHJcbiAgICAgICAgcmV0dXJuIHJvdztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBjcmVhdGVBdHRyaWJ1dGVDaGVja0JveE5vZGVcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjcmVhdGVBdHRyaWJ1dGVDaGVja0JveE5vZGVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSAg7ZWE65Oc7J2YIOyGjeyEseykkSBjaGVja2JveOulvCDsgqzsmqntlZjripQgRWxlbWVudOulvCDrp4zrk6Dri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkSUQg7IKs7Jqp7ZWgIEZpZWxk7J2YIElEXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRQcm9wZXR5TmFtZSDsgqzsmqntlaAgRmllbGTsnZgg7IaN7ISxIOydtOumhFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRpdGxlICBFbGVtZW507JeQIOyCrOyaqe2VoCDsnbTrpoRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZSAgaW5wdXTsl5Ag65Ok7Ja06rCIIOqwklxyXG4gICAgICogQHBhcmFtIHtjYWxsYmFja30gY2hhbmdlRXZlbnRGdW5jIOqwkuydtCDrs4DtlaAg65WMIO2YuOy2nOuQmOyWtOyniCBjYWxsYmFja1xyXG4gICAgICogQHJldHVybiB7RWxlbWVudH1cclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWF0ZUF0dHJpYnV0ZUNoZWNrQm94Tm9kZShmaWVsZElkLCBmaWVsZFByb3BldHlOYW1lLCB0aXRsZSwgdmFsdWUsIGNoYW5nZUV2ZW50RnVuYykge1xyXG4gICAgICAgIHZhciByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XHJcbiAgICAgICAgcm93LmNsYXNzTmFtZSA9IENPTlNUQU5UUy5FRElUT1JfQVRUUl9DT05URU5UU19ST1dfQ0xBU1M7XHJcblxyXG4gICAgICAgIHZhciBpbnB1dFRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICAgICAgaW5wdXRUZXh0LnR5cGUgPSBcInRleHRcIjtcclxuICAgICAgICBpbnB1dFRleHQuY2xhc3NOYW1lID0gQ09OU1RBTlRTLkVESVRPUl9BVFRSX0lOUFVUX0NMQVNTO1xyXG4gICAgICAgIGlucHV0VGV4dC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWZpZWxkLWlkXCIsIGZpZWxkSWQpO1xyXG4gICAgICAgIGlucHV0VGV4dC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWZpZWxkLXByb3BlcnR5LW5hbWVcIiwgZmllbGRQcm9wZXR5TmFtZSk7XHJcbiAgICAgICAgaW5wdXRUZXh0LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICBpbnB1dFRleHQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBjaGFuZ2VFdmVudEZ1bmMsIHRydWUpO1xyXG5cclxuICAgICAgICB2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICAgICAgaW5wdXQudHlwZSA9IFwiY2hlY2tib3hcIjtcclxuICAgICAgICBpbnB1dC5pZCA9IGZpZWxkUHJvcGV0eU5hbWUgKyBcIl9jaGtib3hcIjtcclxuICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgaWYgKGlucHV0LmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgIGlucHV0VGV4dC52YWx1ZSA9IFwidHJ1ZVwiO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaW5wdXRUZXh0LnZhbHVlID0gXCJmYWxzZVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlucHV0VGV4dC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImNoYW5nZVwiKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gJ3RydWUnKSB7XHJcbiAgICAgICAgICAgIGlucHV0LmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBpbnB1dFRleHQudmFsdWUgPSBcInRydWVcIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbnB1dC5jaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlucHV0VGV4dC52YWx1ZSA9IFwiZmFsc2VcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBjaGVja0JveENvbnRhaW5lck5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICAgICAgICBjaGVja0JveENvbnRhaW5lck5vZGUuY2xhc3NOYW1lID0gXCJBdHRyaWJ1dGUtQ29udGVudHMtUm93LUNoZWNrQm94LUNvbnRhaW5lclwiXHJcbiAgICAgICAgY2hlY2tCb3hDb250YWluZXJOb2RlLmFwcGVuZENoaWxkKGlucHV0KTtcclxuICAgICAgICB2YXIgY2hlY2tCb3hMYWJlbE5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XHJcbiAgICAgICAgY2hlY2tCb3hMYWJlbE5vZGUuaHRtbEZvciA9IGZpZWxkUHJvcGV0eU5hbWUgKyBcIl9jaGtib3hcIjtcclxuICAgICAgICBjaGVja0JveExhYmVsTm9kZS50ZXh0Q29udGVudCA9IHRpdGxlO1xyXG4gICAgICAgIGNoZWNrQm94Q29udGFpbmVyTm9kZS5hcHBlbmRDaGlsZChjaGVja0JveExhYmVsTm9kZSk7XHJcblxyXG4gICAgICAgIHJvdy5hcHBlbmRDaGlsZChjaGVja0JveENvbnRhaW5lck5vZGUpO1xyXG4gICAgICAgIHJvdy5hcHBlbmRDaGlsZChpbnB1dFRleHQpO1xyXG4gICAgICAgIHJldHVybiByb3c7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gY3JlYXRlQXR0cmlidXRlRGF0ZUlucHV0Tm9kZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZUF0dHJpYnV0ZURhdGVJbnB1dE5vZGVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSAg7ZWE65Oc7J2YIOyGjeyEseykkSBEYXRl66W8IOyCrOyaqe2VmOuKlCBFbGVtZW5066W8IOunjOuToOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRJRCAg7IKs7Jqp7ZWgIEZpZWxk7J2YIElEXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRQcm9wZXR5TmFtZSAg7IKs7Jqp7ZWgIEZpZWxk7J2YIOyGjeyEsSDsnbTrpoRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZSAgRWxlbWVudOyXkCDsgqzsmqntlaAg7J2066aEXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWUgIGlucHV07JeQIOuTpOyWtOqwiCDqsJJcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBub2RlVG9vbHRpcCAgVG9vbFRpcOyXkCDrk6TslrTqsIgg64K07JqpXHJcbiAgICAgKiBAcGFyYW0ge2NhbGxiYWNrfSBjaGFuZ2VFdmVudEZ1bmMgIOqwkuydtCDrs4DtlaAg65WMIO2YuOy2nOuQmOyWtOyniCBjYWxsYmFja1xyXG4gICAgICogQHJldHVybiB7RWxlbWVudH1cclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWF0ZUF0dHJpYnV0ZURhdGVJbnB1dE5vZGUoZmllbGRJZCwgZmllbGRQcm9wZXR5TmFtZSwgdGl0bGUsIHZhbHVlLCBub2RlVG9vbHRpcCwgY2hhbmdlRXZlbnRGdW5jKSB7XHJcbiAgICAgICAgdmFyIHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuICAgICAgICByb3cuY2xhc3NOYW1lID0gQ09OU1RBTlRTLkVESVRPUl9BVFRSX0NPTlRFTlRTX1JPV19DTEFTUztcclxuICAgICAgICB2YXIgdGl0bGVXcmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aXRsZVdyYXAuY2xhc3NOYW1lID0gQ09OU1RBTlRTLlRJVExFX1dSQVBfQ0xBU1M7XHJcbiAgICAgICAgdmFyIHRpdGxlU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgIHRpdGxlU3Bhbi5jbGFzc05hbWUgPSBDT05TVEFOVFMuVElUTEVfQ0xBU1M7XHJcbiAgICAgICAgdGl0bGVTcGFuLnRleHRDb250ZW50ID0gdGl0bGU7XHJcbiAgICAgICAgdGl0bGVXcmFwLmFwcGVuZENoaWxkKHRpdGxlU3Bhbik7XHJcbiAgICAgICAgdmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgICAgIGlucHV0LmNsYXNzTmFtZSA9IENPTlNUQU5UUy5FRElUT1JfQVRUUl9JTlBVVF9DTEFTUztcclxuICAgICAgICBpbnB1dC5pZCA9IGZpZWxkUHJvcGV0eU5hbWUgKyBcIl9kYXRlLXBpY2tlclwiO1xyXG4gICAgICAgIGlucHV0LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWZpZWxkLWlkXCIsIGZpZWxkSWQpO1xyXG4gICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShcImRhdGEtZmllbGQtcHJvcGVydHktbmFtZVwiLCBmaWVsZFByb3BldHlOYW1lKTtcclxuICAgICAgICBpZiAodmFsdWUgIT09IFwiXCIpIHtcclxuICAgICAgICAgICAgaW5wdXQudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGlucHV0UGlja2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgICAgIGlucHV0UGlja2VyLmNsYXNzTmFtZSA9IENPTlNUQU5UUy5FRElUT1JfQVRUUl9EQVRFX0lOUFVUX0NMQVNTO1xyXG4gICAgICAgIGlmICh2YWx1ZSAhPT0gXCJcIikge1xyXG4gICAgICAgICAgICBpbnB1dFBpY2tlci52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYywgdHJ1ZSk7XHJcbiAgICAgICAgcm93LmFwcGVuZENoaWxkKHRpdGxlV3JhcCk7XHJcbiAgICAgICAgcm93LmFwcGVuZENoaWxkKGlucHV0KTtcclxuICAgICAgICByb3cuYXBwZW5kQ2hpbGQoaW5wdXRQaWNrZXIpO1xyXG4gICAgICAgIHJldHVybiByb3c7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gY3JlYXRlQXR0cmlidXRlQ29sb3JJbnB1dE5vZGVcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjcmVhdGVBdHRyaWJ1dGVDb2xvcklucHV0Tm9kZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOuTnOydmCDsho3shLHspJEgQ29sb3IgUGlja2Vy66W8IOyCrOyaqe2VmOuKlCBFbGVtZW5066W8IOunjOuToOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRJRCAg7IKs7Jqp7ZWgIEZpZWxk7J2YIElEXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRQcm9wZXR5TmFtZSAg7IKs7Jqp7ZWgIEZpZWxk7J2YIOyGjeyEsSDsnbTrpoRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZSAgRWxlbWVudOyXkCDsgqzsmqntlaAg7J2066aEXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWUgIGlucHV07JeQIOuTpOyWtOqwiCDqsJJcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlICBpbnB1dOydmCB0eXBl7JeQIOuTpOyWtOqwiCDqsJIgLSDsgqzsmqntlZjsp4Ag7JWK7J2MLlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG5vZGVUb29sdGlwICBUb29sVGlw7JeQIOuTpOyWtOqwiCDrgrTsmqlcclxuICAgICAqIEBwYXJhbSB7Y2FsbGJhY2t9IGNoYW5nZUV2ZW50RnVuYyAg6rCS7J20IOuzgO2VoCDrlYwg7Zi47Lac65CY7Ja07KeIIGNhbGxiYWNrXHJcbiAgICAgKiBAcmV0dXJuIHtFbGVtZW50fVxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlYXRlQXR0cmlidXRlQ29sb3JJbnB1dE5vZGUoZmllbGRJZCwgZmllbGRQcm9wZXR5TmFtZSwgdGl0bGUsIHZhbHVlLCB0eXBlLCBub2RlVG9vbHRpcCwgY2hhbmdlRXZlbnRGdW5jKSB7XHJcbiAgICAgICAgdmFyIHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuICAgICAgICByb3cuY2xhc3NOYW1lID0gQ09OU1RBTlRTLkVESVRPUl9BVFRSX0NPTlRFTlRTX1JPV19DTEFTUztcclxuICAgICAgICB2YXIgdGl0bGVXcmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aXRsZVdyYXAuY2xhc3NOYW1lID0gQ09OU1RBTlRTLlRJVExFX1dSQVBfQ0xBU1M7XHJcbiAgICAgICAgdmFyIHRpdGxlU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgIHRpdGxlU3Bhbi5jbGFzc05hbWUgPSBDT05TVEFOVFMuVElUTEVfQ0xBU1M7XHJcbiAgICAgICAgdGl0bGVTcGFuLnRleHRDb250ZW50ID0gdGl0bGU7XHJcbiAgICAgICAgdGl0bGVXcmFwLmFwcGVuZENoaWxkKHRpdGxlU3Bhbik7XHJcbiAgICAgICAgdmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgICAgIGlucHV0LmNsYXNzTmFtZSA9IENPTlNUQU5UUy5FRElUT1JfQVRUUl9JTlBVVF9DTEFTUztcclxuICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWZpZWxkLWlkXCIsIGZpZWxkSWQpO1xyXG4gICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShcImRhdGEtZmllbGQtcHJvcGVydHktbmFtZVwiLCBmaWVsZFByb3BldHlOYW1lKTtcclxuICAgICAgICBpZiAodmFsdWUgIT09IFwiXCIpIHtcclxuICAgICAgICAgICAgaW5wdXQudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW5wdXQudHlwZSA9IFwidGV4dFwiO1xyXG4gICAgICAgIGlucHV0LmlkID0gZmllbGRJZCArIFwiX2NvbG9yXCI7XHJcbiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBjaGFuZ2VFdmVudEZ1bmMsIHRydWUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBpbnB1dEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgICAgICBpbnB1dEJ0bi50eXBlID0gXCJidXR0b25cIjtcclxuICAgICAgICB2YXIgaW5wdXRXcmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBpbnB1dFdyYXAuY2xhc3NOYW1lID0gQ09OU1RBTlRTLkVESVRPUl9BVFRSX0lOUFVUX1dSQVBfQ0xBU1M7XHJcbiAgICAgICAgaW5wdXRXcmFwLmFwcGVuZENoaWxkKGlucHV0KTtcclxuICAgICAgICBpbnB1dFdyYXAuYXBwZW5kQ2hpbGQoaW5wdXRCdG4pO1xyXG5cclxuICAgICAgICByb3cuYXBwZW5kQ2hpbGQodGl0bGVXcmFwKTtcclxuICAgICAgICByb3cuYXBwZW5kQ2hpbGQoaW5wdXRXcmFwKTtcclxuICAgICAgICByZXR1cm4gcm93O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGNyZWF0ZUF0dHJpYnV0ZVRvZ2dsZUJ1dHRvbk5vZGVcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjcmVhdGVBdHRyaWJ1dGVUb2dnbGVCdXR0b25Ob2RlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgIO2VhOuTnOydmCDsho3shLHspJEgVG9nZ2xlIGJ1dHRvbuydhCDsgqzsmqntlZjripQgRWxlbWVudOulvCDrp4zrk6Dri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkSUQgIOyCrOyaqe2VoCBGaWVsZOydmCBJRFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkUHJvcGV0eU5hbWUgIOyCrOyaqe2VoCBGaWVsZOydmCDsho3shLEg7J2066aEXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGl0bGUgIEVsZW1lbnTsl5Ag7IKs7Jqp7ZWgIOydtOumhFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlICBpbnB1dOyXkCDrk6TslrTqsIgg6rCSXHJcbiAgICAgKiBAcGFyYW0ge2NhbGxiYWNrfSBjaGFuZ2VFdmVudEZ1bmMgIOqwkuydtCDrs4DtlaAg65WMIO2YuOy2nOuQmOyWtOyniCBjYWxsYmFja1xyXG4gICAgICogQHJldHVybiB7RWxlbWVudH1cclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWF0ZUF0dHJpYnV0ZVRvZ2dsZUJ1dHRvbk5vZGUoZmllbGRJZCwgZmllbGRQcm9wZXR5TmFtZSwgdGl0bGUsIHZhbHVlLCBjaGFuZ2VFdmVudEZ1bmMpIHtcclxuICAgICAgICB2YXIgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xyXG4gICAgICAgIHJvdy5jbGFzc05hbWUgPSBDT05TVEFOVFMuRURJVE9SX0FUVFJfQ09OVEVOVFNfUk9XX0NMQVNTO1xyXG4gICAgICAgIHZhciByb3dXcmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICByb3dXcmFwLmNsYXNzTmFtZSA9IENPTlNUQU5UUy5FRElUT1JfQVRUUl9ST1dfV1JBUF9DTEFTUztcclxuICAgICAgICB2YXIgdGl0bGVTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgdGl0bGVTcGFuLmNsYXNzTmFtZSA9IENPTlNUQU5UUy5USVRMRV9DTEFTUztcclxuICAgICAgICB0aXRsZVNwYW4udGV4dENvbnRlbnQgPSBVdGlscy50cmFuc2xhdGVGb3JLZXkodGl0bGUpO1xyXG4gICAgICAgIHRpdGxlU3Bhbi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWkxOG5cIiwgdGl0bGUpO1xyXG4gICAgICAgIHJvd1dyYXAuYXBwZW5kQ2hpbGQodGl0bGVTcGFuKTtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgc3dpdGNoTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XHJcbiAgICAgICAgc3dpdGNoTGFiZWwuY2xhc3NOYW1lID0gQ09OU1RBTlRTLlNXSVRDSF9MQUJFTF9DTEFTUztcclxuXHJcbiAgICAgICAgdmFyIGlucHV0VGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgICAgICBpbnB1dFRleHQudHlwZSA9IFwidGV4dFwiO1xyXG4gICAgICAgIGlucHV0VGV4dC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWZpZWxkLWlkXCIsIGZpZWxkSWQpO1xyXG4gICAgICAgIGlucHV0VGV4dC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWZpZWxkLXByb3BlcnR5LW5hbWVcIiwgZmllbGRQcm9wZXR5TmFtZSk7XHJcbiAgICAgICAgaW5wdXRUZXh0LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICBpbnB1dFRleHQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBjaGFuZ2VFdmVudEZ1bmMsIHRydWUpO1xyXG5cclxuICAgICAgICB2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICAgICAgaW5wdXQudHlwZSA9IFwiY2hlY2tib3hcIjtcclxuICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgaWYgKGlucHV0LmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgIGlucHV0VGV4dC52YWx1ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dFRleHQudmFsdWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpbnB1dFRleHQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJjaGFuZ2VcIikpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gJ3RydWUnKSB7XHJcbiAgICAgICAgICAgIGlucHV0LmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBpbnB1dFRleHQudmFsdWUgPSBcInRydWVcIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbnB1dC5jaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlucHV0VGV4dC52YWx1ZSA9IFwiZmFsc2VcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBzbGlkZXJTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgc2xpZGVyU3Bhbi5jbGFzc0xpc3QuYWRkKENPTlNUQU5UUy5TV0lUQ0hfTEFCRUxfU0xJREVSX0NMQVNTKTtcclxuICAgICAgICBzbGlkZXJTcGFuLmNsYXNzTGlzdC5hZGQoQ09OU1RBTlRTLlNXSVRDSF9MQUJFTF9TTElERVJfUk9VTkRfQ0xBU1MpO1xyXG5cclxuICAgICAgICBzd2l0Y2hMYWJlbC5hcHBlbmRDaGlsZChpbnB1dCk7XHJcbiAgICAgICAgc3dpdGNoTGFiZWwuYXBwZW5kQ2hpbGQoc2xpZGVyU3Bhbik7XHJcblxyXG4gICAgICAgIHJvd1dyYXAuYXBwZW5kQ2hpbGQoc3dpdGNoTGFiZWwpO1xyXG4gICAgICAgIHJvd1dyYXAuYXBwZW5kQ2hpbGQoaW5wdXRUZXh0KTtcclxuICAgICAgICByb3cuYXBwZW5kQ2hpbGQocm93V3JhcCk7XHJcbiAgICAgICAgcmV0dXJuIHJvdztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBjcmVhdGVBdHRyaWJ1dGVTZWxlY3RJbm5lck5vZGVcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjcmVhdGVBdHRyaWJ1dGVTZWxlY3RJbm5lck5vZGVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSAg7ZWE65Oc7J2YIOyGjeyEseykkSBTZWxlY3Trpbwg7IKs7Jqp7ZWY64qUIEVsZW1lbnTrpbwg66eM65Og64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZElEIOyCrOyaqe2VoCBGaWVsZOydmCBJRFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkUHJvcGV0eU5hbWUgIOyCrOyaqe2VoCBGaWVsZOydmCDsho3shLEg7J2066aEXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBvcHRpb25zIFt7dmFsdWU6IFwidmFsdWVcIiwgdGV4dDogXCJ0ZXh0XCJ9XSBzZWxlY3Tsl5Ag7IKs7Jqp65CY64qUIE1hcCBBcnJheVxyXG4gICAgICogQHBhcmFtIHsgU3RyaW5nfSB0aXRsZSBFbGVtZW507JeQIOyCrOyaqe2VoCDsnbTrpoRcclxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gdXNlRGVmYXVsT3B0aW9uTm9kZSDrjIDsg4HshKDtg53snYQg7IKs7Jqp7ZWg7KeAIOyXrOu2gFxyXG4gICAgICogQHJldHVybiB7RWxlbWVudH1cclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWF0ZUF0dHJpYnV0ZVNlbGVjdElubmVyTm9kZShmaWVsZElkLCBmaWVsZFByb3BldHlOYW1lLCBvcHRpb25zLCB0aXRsZSwgdXNlRGVmYXVsT3B0aW9uTm9kZSA9IHRydWUpIHtcclxuICAgICAgICB2YXIgcm93V3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgcm93V3JhcC5jbGFzc05hbWUgPSBDT05TVEFOVFMuRURJVE9SX0FUVFJfUk9XX1dSQVBfQ0xBU1M7XHJcblxyXG4gICAgICAgIGlmICh0aXRsZSAhPT0gXCJcIikge1xyXG4gICAgICAgICAgICB2YXIgdGl0bGVXcmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgdGl0bGVXcmFwLmNsYXNzTmFtZSA9IENPTlNUQU5UUy5USVRMRV9XUkFQX0NMQVNTO1xyXG4gICAgICAgICAgICB2YXIgdGl0bGVTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgICAgIHRpdGxlU3Bhbi5jbGFzc05hbWUgPSBDT05TVEFOVFMuVElUTEVfQ0xBU1M7XHJcbiAgICAgICAgICAgIHRpdGxlU3Bhbi50ZXh0Q29udGVudCA9IFV0aWxzLnRyYW5zbGF0ZUZvcktleSh0aXRsZSk7XHJcbiAgICAgICAgICAgIHRpdGxlU3Bhbi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWkxOG5cIiwgdGl0bGUpO1xyXG4gICAgICAgICAgICB0aXRsZVdyYXAuYXBwZW5kQ2hpbGQodGl0bGVTcGFuKTtcclxuICAgICAgICAgICAgcm93V3JhcC5hcHBlbmRDaGlsZCh0aXRsZVdyYXApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHNlbGVjdE5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO1xyXG4gICAgICAgIHNlbGVjdE5vZGUuY2xhc3NOYW1lID0gQ09OU1RBTlRTLkVESVRPUl9BVFRSX1NFTEVDVF9DTEFTUztcclxuICAgICAgICBpZiAodXNlRGVmYXVsT3B0aW9uTm9kZSkge1xyXG4gICAgICAgICAgICB2YXIgZGVmYXVsdE9wdGlvbk5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgICAgICAgICBkZWZhdWx0T3B0aW9uTm9kZS52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgICAgIGRlZmF1bHRPcHRpb25Ob2RlLnRleHQgPSBVdGlscy50cmFuc2xhdGVGb3JLZXkoXCJUZW1wbGF0ZS5zZWxlY3REZWZhdWx0VGV4dFwiKTtcclxuICAgICAgICAgICAgZGVmYXVsdE9wdGlvbk5vZGUuc2V0QXR0cmlidXRlKFwiZGF0YS1pMThuXCIsIFwiVGVtcGxhdGUuc2VsZWN0RGVmYXVsdFRleHRcIik7XHJcbiAgICAgICAgICAgIHNlbGVjdE5vZGUuYXBwZW5kQ2hpbGQoZGVmYXVsdE9wdGlvbk5vZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBvcHRpb25zLmxlbmd0aDsgaWR4KyspIHtcclxuICAgICAgICAgICAgdmFyIG9wdGlvbk5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgICAgICAgICBvcHRpb25Ob2RlLnZhbHVlID0gb3B0aW9uc1tpZHhdLnZhbHVlO1xyXG4gICAgICAgICAgICBvcHRpb25Ob2RlLnRleHQgPSBvcHRpb25zW2lkeF0udGV4dDtcclxuICAgICAgICAgICAgc2VsZWN0Tm9kZS5hcHBlbmRDaGlsZChvcHRpb25Ob2RlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNlbGVjdE5vZGUuc2V0QXR0cmlidXRlKFwiZGF0YS1maWVsZC1pZFwiLCBmaWVsZElkKTtcclxuICAgICAgICBzZWxlY3ROb2RlLnNldEF0dHJpYnV0ZShcImRhdGEtZmllbGQtcHJvcGVydHktbmFtZVwiLCBmaWVsZFByb3BldHlOYW1lKTtcclxuICAgICAgICBcclxuICAgICAgICByb3dXcmFwLmFwcGVuZENoaWxkKHNlbGVjdE5vZGUpO1xyXG4gICAgICAgIHJldHVybiByb3dXcmFwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGNyZWF0ZUF0dHJpYnV0ZVNlbGVjdE5vZGVcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjcmVhdGVBdHRyaWJ1dGVTZWxlY3ROb2RlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgICDtlYTrk5zsnZgg7IaN7ISx7KSRIFNlbGVjdOulvCDsgqzsmqntlZjripQgRWxlbWVudOulvCBsaeuhnCDqsJDsi7jshJwg66eM65Og64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZElEIOyCrOyaqe2VoCBGaWVsZOydmCBJRFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkUHJvcGV0eU5hbWUg7IKs7Jqp7ZWgIEZpZWxk7J2YIOyGjeyEsSDsnbTrpoRcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IG9wdGlvbnMgW3t2YWx1ZTogXCJ2YWx1ZVwiLCB0ZXh0OiBcInRleHRcIn1dIDogc2VsZWN07JeQIOyCrOyaqeuQmOuKlCBNYXAgQXJyYXlcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZSAgRWxlbWVudOyXkCDsgqzsmqntlaAg7J2066aEXHJcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHVzZURlZmF1bE9wdGlvbk5vZGUg64yA7IOB7ISg7YOd7J2EIOyCrOyaqe2VoOyngCDsl6zrtoBcclxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVhdGVBdHRyaWJ1dGVTZWxlY3ROb2RlKGZpZWxkSWQsIGZpZWxkUHJvcGV0eU5hbWUsIG9wdGlvbnMsIHRpdGxlLCB1c2VEZWZhdWxPcHRpb25Ob2RlID0gdHJ1ZSkge1xyXG4gICAgICAgIHZhciByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XHJcbiAgICAgICAgcm93LmNsYXNzTmFtZSA9IENPTlNUQU5UUy5FRElUT1JfQVRUUl9DT05URU5UU19ST1dfQ0xBU1M7XHJcbiAgICAgICAgdmFyIHJvd1dyYXAgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVTZWxlY3RJbm5lck5vZGUoZmllbGRJZCwgZmllbGRQcm9wZXR5TmFtZSwgb3B0aW9ucywgdGl0bGUsIHVzZURlZmF1bE9wdGlvbk5vZGUpO1xyXG4gICAgICAgIHJvdy5hcHBlbmRDaGlsZChyb3dXcmFwKTtcclxuICAgICAgICByZXR1cm4gcm93O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGNyZWF0ZURpdmlkZXJOb2RlXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjY3JlYXRlRGl2aWRlck5vZGVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSAgIGxp7J2YIOq1rOu2hOyekOulvCDrp4zrk6Dri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7RWxlbWVudH1cclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWF0ZURpdmlkZXJOb2RlKCkge1xyXG4gICAgICAgIHZhciBkaXZpZGVyUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xyXG4gICAgICAgIGRpdmlkZXJSb3cuY2xhc3NOYW1lID0gQ09OU1RBTlRTLkRJVklERVJfQ0xBU1M7XHJcbiAgICAgICAgcmV0dXJuIGRpdmlkZXJSb3c7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gY3JlYXRlVGV4dEFsaWduQnV0dG9uTm9kZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZVRleHRBbGlnbkJ1dHRvbk5vZGVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSAgIO2VhOuTnOydmCDsho3shLHspJEgVGV4dCBBbGlnbiBCdXR0b24gRWxlbWVudOydhCDrp4zrk6Dri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkSUQgIOyCrOyaqe2VoCBGaWVsZOydmCBJRFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlICDtmITsnqzsnZggdGV4dCBhbGlnbiDqsJJcclxuICAgICAqIEBwYXJhbSB7Y2FsbGJhY2t9IGNoYW5nZUV2ZW50RnVuYyDqsJLsnbQg67OA7ZWgIOuVjCDtmLjstpzrkJjslrTsp4ggY2FsbGJhY2tcclxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVhdGVUZXh0QWxpZ25CdXR0b25Ob2RlKGZpZWxkSWQsIHZhbHVlLCBjaGFuZ2VFdmVudEZ1bmMpIHtcclxuICAgICAgICB2YXIgcm93V3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgcm93V3JhcC5jbGFzc05hbWUgPSBDT05TVEFOVFMuRURJVE9SX0FUVFJfUk9XX1dSQVBfQ0xBU1M7XHJcblxyXG4gICAgICAgIHZhciB0aXRsZVdyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRpdGxlV3JhcC5jbGFzc05hbWUgPSBDT05TVEFOVFMuVElUTEVfV1JBUF9DTEFTUztcclxuICAgICAgICB2YXIgdGl0bGVTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgdGl0bGVTcGFuLmNsYXNzTmFtZSA9IENPTlNUQU5UUy5USVRMRV9DTEFTUztcclxuICAgICAgICB0aXRsZVNwYW4udGV4dENvbnRlbnQgPSBVdGlscy50cmFuc2xhdGVGb3JLZXkoXCJUZW1wbGF0ZS50ZXh0QWxpZ25UZXh0XCIpO1xyXG4gICAgICAgIHRpdGxlU3Bhbi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWkxOG5cIiwgXCJUZW1wbGF0ZS50ZXh0QWxpZ25UZXh0XCIpO1xyXG4gICAgICAgIHRpdGxlV3JhcC5hcHBlbmRDaGlsZCh0aXRsZVNwYW4pO1xyXG4gICAgICAgIHJvd1dyYXAuYXBwZW5kQ2hpbGQodGl0bGVXcmFwKTtcclxuXHJcbiAgICAgICAgdmFyIGJ0bnNXcmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB2YXIgbGVmdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgbGVmdEJ0bi5jbGFzc0xpc3QuYWRkKFwiVGVtcGxhdGUtQnV0dG9uXCIpO1xyXG4gICAgICAgIGxlZnRCdG4uY2xhc3NMaXN0LmFkZChcIlRleHQtQWxpZ24tTGVmdFwiKTtcclxuICAgICAgICBsZWZ0QnRuLmNsYXNzTGlzdC5hZGQoXCJUb2dnbGUtQnV0dG9uXCIpO1xyXG5cclxuICAgICAgICB2YXIgbGVmdEljb25CdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaVwiKTtcclxuICAgICAgICBsZWZ0QnRuLmFwcGVuZENoaWxkKGxlZnRJY29uQnRuKTtcclxuXHJcbiAgICAgICAgdmFyIGNlbnRlckJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgY2VudGVyQnRuLmNsYXNzTGlzdC5hZGQoXCJUZW1wbGF0ZS1CdXR0b25cIik7XHJcbiAgICAgICAgY2VudGVyQnRuLmNsYXNzTGlzdC5hZGQoXCJUZXh0LUFsaWduLUNlbnRlclwiKTtcclxuICAgICAgICBjZW50ZXJCdG4uY2xhc3NMaXN0LmFkZChcIlRvZ2dsZS1CdXR0b25cIik7XHJcblxyXG4gICAgICAgIHZhciBjZW50ZXJJY29uQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlcIik7XHJcbiAgICAgICAgY2VudGVyQnRuLmFwcGVuZENoaWxkKGNlbnRlckljb25CdG4pO1xyXG5cclxuICAgICAgICB2YXIgcmlnaHRCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgIHJpZ2h0QnRuLmNsYXNzTGlzdC5hZGQoXCJUZW1wbGF0ZS1CdXR0b25cIik7XHJcbiAgICAgICAgcmlnaHRCdG4uY2xhc3NMaXN0LmFkZChcIlRleHQtQWxpZ24tUmlnaHRcIik7XHJcbiAgICAgICAgcmlnaHRCdG4uY2xhc3NMaXN0LmFkZChcIlRvZ2dsZS1CdXR0b25cIik7XHJcblxyXG4gICAgICAgIHZhciByaWdodEljb25CdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaVwiKTtcclxuICAgICAgICByaWdodEJ0bi5hcHBlbmRDaGlsZChyaWdodEljb25CdG4pO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJsZWZ0XCI6XHJcbiAgICAgICAgICAgICAgICBsZWZ0QnRuLmNsYXNzTGlzdC5hZGQoXCJTZWxlY3RlZFwiKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiY2VudGVyXCI6XHJcbiAgICAgICAgICAgICAgICBjZW50ZXJCdG4uY2xhc3NMaXN0LmFkZChcIlNlbGVjdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJyaWdodFwiOlxyXG4gICAgICAgICAgICAgICAgcmlnaHRCdG4uY2xhc3NMaXN0LmFkZChcIlNlbGVjdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgaW5wdXROb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgICAgIGlucHV0Tm9kZS50eXBlID0gXCJ0ZXh0XCI7XHJcbiAgICAgICAgaW5wdXROb2RlLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICBpbnB1dE5vZGUudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICBpbnB1dE5vZGUuc2V0QXR0cmlidXRlKFwiZGF0YS1maWVsZC1pZFwiLCBmaWVsZElkKTtcclxuICAgICAgICBpbnB1dE5vZGUuc2V0QXR0cmlidXRlKFwiZGF0YS1maWVsZC1wcm9wZXJ0eS1uYW1lXCIsIFwidGV4dEFsaWduXCIpO1xyXG4gICAgICAgIGlucHV0Tm9kZS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcblxyXG4gICAgICAgIGxlZnRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgaW5wdXROb2RlLnZhbHVlID0gXCJsZWZ0XCI7XHJcbiAgICAgICAgICAgIGlucHV0Tm9kZS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImNoYW5nZVwiKSk7XHJcbiAgICAgICAgICAgIGlmICghbGVmdEJ0bi5jbGFzc0xpc3QuY29udGFpbnMoXCJTZWxlY3RlZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgbGVmdEJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiU2VsZWN0ZWRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHJpZ2h0QnRuLmNsYXNzTGlzdC5jb250YWlucyhcIlNlbGVjdGVkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICByaWdodEJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiU2VsZWN0ZWRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNlbnRlckJ0bi5jbGFzc0xpc3QuY29udGFpbnMoXCJTZWxlY3RlZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgY2VudGVyQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJTZWxlY3RlZFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9KTtcclxuICAgICAgICBjZW50ZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgaW5wdXROb2RlLnZhbHVlID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgaW5wdXROb2RlLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiY2hhbmdlXCIpKTtcclxuICAgICAgICAgICAgaWYgKCFjZW50ZXJCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKFwiU2VsZWN0ZWRcIikpIHtcclxuICAgICAgICAgICAgICAgIGNlbnRlckJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiU2VsZWN0ZWRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHJpZ2h0QnRuLmNsYXNzTGlzdC5jb250YWlucyhcIlNlbGVjdGVkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICByaWdodEJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiU2VsZWN0ZWRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGxlZnRCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKFwiU2VsZWN0ZWRcIikpIHtcclxuICAgICAgICAgICAgICAgIGxlZnRCdG4uY2xhc3NMaXN0LnRvZ2dsZShcIlNlbGVjdGVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJpZ2h0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgIGlucHV0Tm9kZS52YWx1ZSA9IFwicmlnaHRcIjtcclxuICAgICAgICAgICAgaW5wdXROb2RlLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiY2hhbmdlXCIpKTtcclxuICAgICAgICAgICAgaWYgKCFyaWdodEJ0bi5jbGFzc0xpc3QuY29udGFpbnMoXCJTZWxlY3RlZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgcmlnaHRCdG4uY2xhc3NMaXN0LnRvZ2dsZShcIlNlbGVjdGVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChsZWZ0QnRuLmNsYXNzTGlzdC5jb250YWlucyhcIlNlbGVjdGVkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBsZWZ0QnRuLmNsYXNzTGlzdC50b2dnbGUoXCJTZWxlY3RlZFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2VudGVyQnRuLmNsYXNzTGlzdC5jb250YWlucyhcIlNlbGVjdGVkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBjZW50ZXJCdG4uY2xhc3NMaXN0LnRvZ2dsZShcIlNlbGVjdGVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBidG5zV3JhcC5hcHBlbmRDaGlsZChsZWZ0QnRuKTtcclxuICAgICAgICBidG5zV3JhcC5hcHBlbmRDaGlsZChjZW50ZXJCdG4pO1xyXG4gICAgICAgIGJ0bnNXcmFwLmFwcGVuZENoaWxkKHJpZ2h0QnRuKTtcclxuICAgICAgICBidG5zV3JhcC5hcHBlbmRDaGlsZChpbnB1dE5vZGUpO1xyXG5cclxuICAgICAgICByb3dXcmFwLmFwcGVuZENoaWxkKGJ0bnNXcmFwKTtcclxuICAgICAgICByZXR1cm4gcm93V3JhcDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBjcmVhdGVUZXh0Qm9sZEJ1dHRvbk5vZGVcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjcmVhdGVUZXh0Qm9sZEJ1dHRvbk5vZGVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSAg7ZWE65Oc7J2YIOyGjeyEseykkSBUZXh0IEJvbGQgdG9nZ2xlIEJ1dHRvbiBFbGVtZW507J2EIOunjOuToOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRJRCAg7IKs7Jqp7ZWgIEZpZWxk7J2YIElEXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWUgIO2YhOyerOydmCB0ZXh0IGJvbGQg6rCSXHJcbiAgICAgKiBAcGFyYW0ge2NhbGxiYWNrfSBjaGFuZ2VFdmVudEZ1bmMg6rCS7J20IOuzgO2VoCDrlYwg7Zi47Lac65CY7Ja07KeIIGNhbGxiYWNrXHJcbiAgICAgKiBAcmV0dXJuIHtFbGVtZW50fVxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlYXRlVGV4dEJvbGRCdXR0b25Ob2RlKGZpZWxkSWQsIHZhbHVlLCBjaGFuZ2VFdmVudEZ1bmMpIHtcclxuICAgICAgICB2YXIgcm93V3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgcm93V3JhcC5jbGFzc05hbWUgPSBDT05TVEFOVFMuRURJVE9SX0FUVFJfUk9XX1dSQVBfQ0xBU1M7XHJcblxyXG4gICAgICAgIHZhciB0aXRsZVdyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRpdGxlV3JhcC5jbGFzc05hbWUgPSBDT05TVEFOVFMuVElUTEVfV1JBUF9DTEFTUztcclxuICAgICAgICB2YXIgdGl0bGVTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgdGl0bGVTcGFuLmNsYXNzTmFtZSA9IENPTlNUQU5UUy5USVRMRV9DTEFTUztcclxuICAgICAgICB0aXRsZVNwYW4udGV4dENvbnRlbnQgPSBVdGlscy50cmFuc2xhdGVGb3JLZXkoXCJUZW1wbGF0ZS5ib2xkVGV4dFwiKTtcclxuICAgICAgICB0aXRsZVNwYW4uc2V0QXR0cmlidXRlKFwiZGF0YS1pMThuXCIsIFwiVGVtcGxhdGUuYm9sZFRleHRcIik7XHJcbiAgICAgICAgdGl0bGVXcmFwLmFwcGVuZENoaWxkKHRpdGxlU3Bhbik7XHJcbiAgICAgICAgcm93V3JhcC5hcHBlbmRDaGlsZCh0aXRsZVdyYXApO1xyXG5cclxuICAgICAgICB2YXIgYnRuc1dyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHZhciBib2xkQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICBib2xkQnRuLmNsYXNzTGlzdC5hZGQoXCJUZW1wbGF0ZS1CdXR0b25cIik7XHJcbiAgICAgICAgYm9sZEJ0bi5jbGFzc0xpc3QuYWRkKFwiVGV4dC1Cb2xkLUJ1dHRvblwiKTtcclxuICAgICAgICBib2xkQnRuLmNsYXNzTGlzdC5hZGQoXCJUb2dnbGUtQnV0dG9uXCIpO1xyXG5cclxuICAgICAgICB2YXIgYm9sZEJ0bkljb25CdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaVwiKTtcclxuICAgICAgICBib2xkQnRuLmFwcGVuZENoaWxkKGJvbGRCdG5JY29uQnRuKTtcclxuXHJcbiAgICAgICAgaWYgKHZhbHVlID09PSBcInRydWVcIikge1xyXG4gICAgICAgICAgICBib2xkQnRuLmNsYXNzTGlzdC5hZGQoXCJTZWxlY3RlZFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBpbnB1dE5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICAgICAgaW5wdXROb2RlLnR5cGUgPSBcInRleHRcIjtcclxuICAgICAgICBpbnB1dE5vZGUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIGlucHV0Tm9kZS52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIGlucHV0Tm9kZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWZpZWxkLWlkXCIsIGZpZWxkSWQpO1xyXG4gICAgICAgIGlucHV0Tm9kZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWZpZWxkLXByb3BlcnR5LW5hbWVcIiwgXCJib2xkXCIpO1xyXG4gICAgICAgIGlucHV0Tm9kZS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcblxyXG4gICAgICAgIGJvbGRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgaWYgKCFib2xkQnRuLmNsYXNzTGlzdC5jb250YWlucyhcIlNlbGVjdGVkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dE5vZGUudmFsdWUgPSBcInRydWVcIjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlucHV0Tm9kZS52YWx1ZSA9IFwiZmFsc2VcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpbnB1dE5vZGUuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJjaGFuZ2VcIikpO1xyXG4gICAgICAgICAgICBib2xkQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJTZWxlY3RlZFwiKTtcclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGJ0bnNXcmFwLmFwcGVuZENoaWxkKGJvbGRCdG4pO1xyXG4gICAgICAgIGJ0bnNXcmFwLmFwcGVuZENoaWxkKGlucHV0Tm9kZSk7XHJcblxyXG4gICAgICAgIHJvd1dyYXAuYXBwZW5kQ2hpbGQoYnRuc1dyYXApO1xyXG4gICAgICAgIHJldHVybiByb3dXcmFwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGNyZWF0ZVRleHRDb2xvckJ1dHRvbk5vZGVcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjcmVhdGVUZXh0Q29sb3JCdXR0b25Ob2RlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgIO2VhOuTnOydmCDsho3shLHspJEgVGV4dCBDb2xvciBwaWNrZXIgRWxlbWVudOydhCDrp4zrk6Dri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkSUQgIOyCrOyaqe2VoCBGaWVsZOydmCBJRFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlICDtmITsnqzsnZggdGV4dCBjb2xvciDqsJJcclxuICAgICAqIEBwYXJhbSB7Y2FsbGJhY2t9IGNoYW5nZUV2ZW50RnVuYyDqsJLsnbQg67OA7ZWgIOuVjCDtmLjstpzrkJjslrTsp4ggY2FsbGJhY2tcclxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVhdGVUZXh0Q29sb3JCdXR0b25Ob2RlKGZpZWxkSWQsIHRpdGxlLCB2YWx1ZSwgY2hhbmdlRXZlbnRGdW5jKSB7XHJcbiAgICAgICAgdmFyIHJvd1dyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHJvd1dyYXAuY2xhc3NOYW1lID0gQ09OU1RBTlRTLkVESVRPUl9BVFRSX1JPV19XUkFQX0NMQVNTO1xyXG5cclxuICAgICAgICB2YXIgdGl0bGVXcmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aXRsZVdyYXAuY2xhc3NOYW1lID0gQ09OU1RBTlRTLlRJVExFX1dSQVBfQ0xBU1M7XHJcbiAgICAgICAgdmFyIHRpdGxlU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgIHRpdGxlU3Bhbi5jbGFzc05hbWUgPSBDT05TVEFOVFMuVElUTEVfQ0xBU1M7XHJcbiAgICAgICAgdGl0bGVTcGFuLnRleHRDb250ZW50ID0gVXRpbHMudHJhbnNsYXRlRm9yS2V5KHRpdGxlKTtcclxuICAgICAgICB0aXRsZVNwYW4uc2V0QXR0cmlidXRlKFwiZGF0YS1pMThuXCIsIHRpdGxlKTtcclxuICAgICAgICB0aXRsZVdyYXAuYXBwZW5kQ2hpbGQodGl0bGVTcGFuKTtcclxuICAgICAgICByb3dXcmFwLmFwcGVuZENoaWxkKHRpdGxlV3JhcCk7XHJcblxyXG4gICAgICAgIHZhciBidG5zV3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgYnRuc1dyYXAuY2xhc3NOYW1lID0gXCJDb2xvci1CdXR0b24tV3JhcFwiO1xyXG5cclxuICAgICAgICB2YXIgYm9sZEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgYm9sZEJ0bi5jbGFzc0xpc3QuYWRkKFwiVGVtcGxhdGUtQnV0dG9uXCIpO1xyXG4gICAgICAgIGJvbGRCdG4uY2xhc3NMaXN0LmFkZChcIkNvbG9yLUJ1dHRvblwiKTtcclxuXHJcbiAgICAgICAgdmFyIGlucHV0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgICAgICBpbnB1dE5vZGUudHlwZSA9IFwidGV4dFwiO1xyXG4gICAgICAgIGlucHV0Tm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgaW5wdXROb2RlLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgaW5wdXROb2RlLnNldEF0dHJpYnV0ZShcImRhdGEtZmllbGQtaWRcIiwgZmllbGRJZCk7XHJcbiAgICAgICAgaW5wdXROb2RlLnNldEF0dHJpYnV0ZShcImRhdGEtZmllbGQtcHJvcGVydHktbmFtZVwiLCBcImZvbnRDb2xvclwiKTtcclxuICAgICAgICBpbnB1dE5vZGUuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG5cclxuICAgICAgICBidG5zV3JhcC5hcHBlbmRDaGlsZChib2xkQnRuKTtcclxuICAgICAgICBidG5zV3JhcC5hcHBlbmRDaGlsZChpbnB1dE5vZGUpO1xyXG5cclxuICAgICAgICByb3dXcmFwLmFwcGVuZENoaWxkKGJ0bnNXcmFwKTtcclxuICAgICAgICByZXR1cm4gcm93V3JhcDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBjcmVhdGVUZXh0QXR0cmJ1dGVOb2RlXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjY3JlYXRlVGV4dEF0dHJidXRlTm9kZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpICDtlYTrk5zsnZgg7IaN7ISx7KSRIFRleHQg7IaN7ISx7J2YIEVsZW1lbnTrk6TsnYQg66eM65Og64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZElEICDsgqzsmqntlaAgRmllbGTsnZggSURcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmb250Q29sb3IgIO2YhOyerOydmCBGb250IENvbG9yIOqwklxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZvbnRBbGlnbiAg7ZiE7J6s7J2YIHRleHQgYWxpZ24g6rCSXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gaXNCb2xkICDtmITsnqzsnZggdGV4dCBib2xkIOqwklxyXG4gICAgICogQHBhcmFtIHtjYWxsYmFja30gY2hhbmdlRXZlbnRGdW5jICDqsJLsnbQg67OA7ZWgIOuVjCDtmLjstpzrkJjslrTsp4ggY2FsbGJhY2tcclxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVhdGVUZXh0QXR0cmJ1dGVOb2RlKGZpZWxkSWQsIGZvbnRDb2xvciwgZm9udEFsaWduLCBpc0JvbGQsIGNoYW5nZUV2ZW50RnVuYykge1xyXG4gICAgICAgIHZhciByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XHJcbiAgICAgICAgcm93LmNsYXNzTmFtZSA9IENPTlNUQU5UUy5FRElUT1JfQVRUUl9DT05URU5UU19ST1dfQ0xBU1M7XHJcbiAgICAgICAgdmFyIHJvd1dyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHJvd1dyYXAuY2xhc3NOYW1lID0gQ09OU1RBTlRTLkVESVRPUl9BVFRSX1JPV19XUkFQX0NMQVNTO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBmb250QXR0clRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRhYmxlXCIpO1xyXG4gICAgICAgIGZvbnRBdHRyVGFibGUuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcclxuICAgICAgICB2YXIgcm93MSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKTtcclxuICAgICAgICB2YXIgY29sMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcclxuICAgICAgICBjb2wxLnN0eWxlLnBhZGRpbmdSaWdodCA9IFwiMTBweFwiO1xyXG4gICAgICAgIGNvbDEuY29sU3BhbiA9IDQ7XHJcbiAgICAgICAgdmFyIGZvbnRGYW1pbHlDb21ibyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVNlbGVjdElubmVyTm9kZShmaWVsZElkLCBcImZvbnROYW1lXCIsIFV0aWxzLmZvbnRGYW1pbHlDb21ib0JveCwgXCJUZW1wbGF0ZS5mb250TmFtZVRleHRcIiwgZmFsc2UpO1xyXG4gICAgICAgIGNvbDEuYXBwZW5kQ2hpbGQoZm9udEZhbWlseUNvbWJvKTtcclxuICAgICAgICByb3cxLmFwcGVuZENoaWxkKGNvbDEpO1xyXG5cclxuICAgICAgICB2YXIgY29sMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcclxuICAgICAgICBjb2wyLmNvbFNwYW4gPSA0O1xyXG4gICAgICAgIHZhciBmb250U2l6ZUNvbWJvID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlU2VsZWN0SW5uZXJOb2RlKGZpZWxkSWQsIFwiZm9udFNpemVcIiwgVXRpbHMuZ2V0Rm9uU2l6ZUNvbWJvQm94KCksIFwiVGVtcGxhdGUuZm9udFNpemVUZXh0XCIsIGZhbHNlKTtcclxuICAgICAgICBjb2wyLmFwcGVuZENoaWxkKGZvbnRTaXplQ29tYm8pO1xyXG4gICAgICAgIHJvdzEuYXBwZW5kQ2hpbGQoY29sMik7XHJcblxyXG4gICAgICAgIGZvbnRBdHRyVGFibGUuYXBwZW5kQ2hpbGQocm93MSk7XHJcblxyXG4gICAgICAgIHZhciByb3cyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpO1xyXG4gICAgICAgIHZhciBjb2wzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xyXG4gICAgICAgIGNvbDMuc3R5bGUucGFkZGluZ1JpZ2h0ID0gXCIxMHB4XCI7XHJcbiAgICAgICAgY29sMy5zdHlsZS5wYWRkaW5nVG9wID0gXCIyMHB4XCI7XHJcbiAgICAgICAgY29sMy5jb2xTcGFuID0gNDtcclxuICAgICAgICByb3cyLmFwcGVuZENoaWxkKGNvbDMpO1xyXG5cclxuICAgICAgICB2YXIgYWxpZ25CdG5zTm9kZSA9IFV0aWxzLmNyZWF0ZVRleHRBbGlnbkJ1dHRvbk5vZGUoZmllbGRJZCwgZm9udEFsaWduLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG4gICAgICAgIGNvbDMuYXBwZW5kQ2hpbGQoYWxpZ25CdG5zTm9kZSk7XHJcblxyXG4gICAgICAgIHZhciBjb2w0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xyXG4gICAgICAgIGNvbDQuc3R5bGUucGFkZGluZ1JpZ2h0ID0gXCIxMHB4XCI7XHJcbiAgICAgICAgY29sNC5zdHlsZS5wYWRkaW5nVG9wID0gXCIyMHB4XCI7XHJcbiAgICAgICAgY29sNC5jb2xTcGFuID0gMjtcclxuICAgICAgICB2YXIgYm9sZEJ0bk5vZGUgPSBVdGlscy5jcmVhdGVUZXh0Qm9sZEJ1dHRvbk5vZGUoZmllbGRJZCwgaXNCb2xkLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG4gICAgICAgIGNvbDQuYXBwZW5kQ2hpbGQoYm9sZEJ0bk5vZGUpO1xyXG4gICAgICAgIHJvdzIuYXBwZW5kQ2hpbGQoY29sNCk7XHJcblxyXG4gICAgICAgIHZhciBjb2w1ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xyXG4gICAgICAgIGNvbDUuc3R5bGUucGFkZGluZ1JpZ2h0ID0gXCIxMHB4XCI7XHJcbiAgICAgICAgY29sNS5zdHlsZS5wYWRkaW5nVG9wID0gXCIyMHB4XCI7XHJcbiAgICAgICAgY29sNS5jb2xTcGFuID0gMjtcclxuICAgICAgICB2YXIgY29sb3JCdG5Ob2RlID0gVXRpbHMuY3JlYXRlVGV4dENvbG9yQnV0dG9uTm9kZShmaWVsZElkLCBcIlRlbXBsYXRlLmNvbG9yVGV4dFwiLCBmb250Q29sb3IsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgY29sNS5hcHBlbmRDaGlsZChjb2xvckJ0bk5vZGUpO1xyXG4gICAgICAgIHJvdzIuYXBwZW5kQ2hpbGQoY29sNSk7XHJcblxyXG4gICAgICAgIGZvbnRBdHRyVGFibGUuYXBwZW5kQ2hpbGQocm93Mik7XHJcbiAgICAgICAgcm93V3JhcC5hcHBlbmRDaGlsZChmb250QXR0clRhYmxlKTtcclxuICAgICAgICByb3cuYXBwZW5kQ2hpbGQocm93V3JhcCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcm93OiByb3csXHJcbiAgICAgICAgICAgIGZvbnRGYW1pbHlDb21ibzogZm9udEZhbWlseUNvbWJvLFxyXG4gICAgICAgICAgICBmb250U2l6ZUNvbWJvOiBmb250U2l6ZUNvbWJvLFxyXG4gICAgICAgICAgICBjb2xvckJ0bjogY29sb3JCdG5Ob2RlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gY3JlYXRlVGV4dEF0dHJidXRlTm9kZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZVRleHRNZW1vQXR0cmJ1dGVOb2RlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgIOuplOuqqCDsho3shLHsnZggRWxlbWVudOuTpOydhCDrp4zrk6Dri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkSUQgIOyCrOyaqe2VoCBGaWVsZOydmCBJRFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZvbnRDb2xvciAg7ZiE7J6s7J2YIEZvbnQgQ29sb3Ig6rCSXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZm9udEFsaWduICDtmITsnqzsnZggdGV4dCBhbGlnbiDqsJJcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBpc0JvbGQgIO2YhOyerOydmCB0ZXh0IGJvbGQg6rCSXHJcbiAgICAgKiBAcGFyYW0ge2NhbGxiYWNrfSBjaGFuZ2VFdmVudEZ1bmMgIOqwkuydtCDrs4DtlaAg65WMIO2YuOy2nOuQmOyWtOyniCBjYWxsYmFja1xyXG4gICAgICogQHJldHVybiB7RWxlbWVudH1cclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgIHN0YXRpYyBjcmVhdGVUZXh0TWVtb0F0dHJidXRlTm9kZShmaWVsZElkLCBmb250Q29sb3IsIGlzQm9sZCwgYmFja2dyb3VuZENvbG9yLCBjaGFuZ2VFdmVudEZ1bmMpIHtcclxuICAgICAgICBsZXQgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xyXG4gICAgICAgIHJvdy5jbGFzc05hbWUgPSBDT05TVEFOVFMuRURJVE9SX0FUVFJfQ09OVEVOVFNfUk9XX0NMQVNTO1xyXG4gICAgICAgIGxldCByb3dXcmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICByb3dXcmFwLmNsYXNzTmFtZSA9IENPTlNUQU5UUy5FRElUT1JfQVRUUl9ST1dfV1JBUF9DTEFTUztcclxuICAgICAgICBcclxuICAgICAgICBsZXQgZm9udEF0dHJUYWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0YWJsZVwiKTtcclxuICAgICAgICBmb250QXR0clRhYmxlLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcbiAgICAgICAgbGV0IHJvdzEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidHJcIik7XHJcbiAgICAgICAgbGV0IGNvbDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgICAgICAgY29sMS5zdHlsZS5wYWRkaW5nUmlnaHQgPSBcIjEwcHhcIjtcclxuICAgICAgICBjb2wxLmNvbFNwYW4gPSA0O1xyXG4gICAgICAgIGxldCBmb250RmFtaWx5Q29tYm8gPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVTZWxlY3RJbm5lck5vZGUoZmllbGRJZCwgXCJmb250TmFtZVwiLCBVdGlscy5mb250RmFtaWx5Q29tYm9Cb3gsIFwiVGVtcGxhdGUuZm9udE5hbWVUZXh0XCIsIGZhbHNlKTtcclxuICAgICAgICBjb2wxLmFwcGVuZENoaWxkKGZvbnRGYW1pbHlDb21ibyk7XHJcbiAgICAgICAgcm93MS5hcHBlbmRDaGlsZChjb2wxKTtcclxuXHJcbiAgICAgICAgbGV0IGNvbDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgICAgICAgY29sMi5jb2xTcGFuID0gNDtcclxuICAgICAgICBsZXQgZm9udFNpemVDb21ibyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVNlbGVjdElubmVyTm9kZShmaWVsZElkLCBcImZvbnRTaXplXCIsIFV0aWxzLmdldEZvblNpemVDb21ib0JveCgpLCBcIlRlbXBsYXRlLmZvbnRTaXplVGV4dFwiLCBmYWxzZSk7XHJcbiAgICAgICAgY29sMi5hcHBlbmRDaGlsZChmb250U2l6ZUNvbWJvKTtcclxuICAgICAgICByb3cxLmFwcGVuZENoaWxkKGNvbDIpO1xyXG5cclxuICAgICAgICBmb250QXR0clRhYmxlLmFwcGVuZENoaWxkKHJvdzEpO1xyXG5cclxuICAgICAgICBsZXQgcm93MiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKTtcclxuXHJcbiAgICAgICAgbGV0IGNvbDQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgICAgICAgY29sNC5zdHlsZS5wYWRkaW5nUmlnaHQgPSBcIjEwcHhcIjtcclxuICAgICAgICBjb2w0LnN0eWxlLnBhZGRpbmdUb3AgPSBcIjIwcHhcIjtcclxuICAgICAgICBjb2w0LmNvbFNwYW4gPSAyO1xyXG4gICAgICAgIGxldCBib2xkQnRuTm9kZSA9IFV0aWxzLmNyZWF0ZVRleHRCb2xkQnV0dG9uTm9kZShmaWVsZElkLCBpc0JvbGQsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgY29sNC5hcHBlbmRDaGlsZChib2xkQnRuTm9kZSk7XHJcbiAgICAgICAgcm93Mi5hcHBlbmRDaGlsZChjb2w0KTtcclxuXHJcbiAgICAgICAgbGV0IGNvbDUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgICAgICAgY29sNS5zdHlsZS5wYWRkaW5nUmlnaHQgPSBcIjEwcHhcIjtcclxuICAgICAgICBjb2w1LnN0eWxlLnBhZGRpbmdUb3AgPSBcIjIwcHhcIjtcclxuICAgICAgICBjb2w1LmNvbFNwYW4gPSAyO1xyXG4gICAgICAgIGxldCBjb2xvckJ0bk5vZGUgPSBVdGlscy5jcmVhdGVUZXh0Q29sb3JCdXR0b25Ob2RlKGZpZWxkSWQsIFwiVGVtcGxhdGUuY29sb3JUZXh0XCIsIGZvbnRDb2xvciwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgICAgICBjb2w1LmFwcGVuZENoaWxkKGNvbG9yQnRuTm9kZSk7XHJcbiAgICAgICAgcm93Mi5hcHBlbmRDaGlsZChjb2w1KTtcclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGNvbDYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgICAgICAgY29sNi5zdHlsZS5wYWRkaW5nUmlnaHQgPSBcIjEwcHhcIjtcclxuICAgICAgICBjb2w2LnN0eWxlLnBhZGRpbmdUb3AgPSBcIjIwcHhcIjtcclxuICAgICAgICBjb2w2LmNvbFNwYW4gPSAyO1xyXG4gICAgICAgIGxldCBiYWNrZ3JvdW5kQ29sb3JCdG5Ob2RlID0gVXRpbHMuY3JlYXRlVGV4dENvbG9yQnV0dG9uTm9kZShmaWVsZElkLCBcIlRlbXBsYXRlLmJnQ29sb3JUZXh0XCIsIGJhY2tncm91bmRDb2xvciwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgICAgICBjb2w2LmFwcGVuZENoaWxkKGJhY2tncm91bmRDb2xvckJ0bk5vZGUpO1xyXG4gICAgICAgIHJvdzIuYXBwZW5kQ2hpbGQoY29sNik7XHJcblxyXG4gICAgICAgIGZvbnRBdHRyVGFibGUuYXBwZW5kQ2hpbGQocm93Mik7XHJcbiAgICAgICAgcm93V3JhcC5hcHBlbmRDaGlsZChmb250QXR0clRhYmxlKTtcclxuICAgICAgICByb3cuYXBwZW5kQ2hpbGQocm93V3JhcCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcm93OiByb3csXHJcbiAgICAgICAgICAgIGZvbnRGYW1pbHlDb21ibzogZm9udEZhbWlseUNvbWJvLFxyXG4gICAgICAgICAgICBmb250U2l6ZUNvbWJvOiBmb250U2l6ZUNvbWJvLFxyXG4gICAgICAgICAgICBib2xkQnRuOiBib2xkQnRuTm9kZSxcclxuICAgICAgICAgICAgY29sb3JCdG46IGNvbG9yQnRuTm9kZSxcclxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yQnRuOiBiYWNrZ3JvdW5kQ29sb3JCdG5Ob2RlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBhc3NpZ25cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNhc3NpZ25cclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSAgb2JqZWN07JeQIO2VtOuLuSDsho3shLHsnbQg7J6I7Jy866m0IOqwkuydhCDshKTsoJXtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiAg7IKs7Jqp7ZWgIE9iamVjdFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3AgIOyCrOyaqe2VoCDsho3shLFcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZSAg7IaN7ISx7JeQIOyCrOyaqe2VoCDqsJJcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFzc2lnbihvYmosIHByb3AsIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBwcm9wID09PSBcInN0cmluZ1wiKVxyXG4gICAgICAgICAgICBwcm9wID0gcHJvcC5zcGxpdChcIi5cIik7XHJcblxyXG4gICAgICAgIGlmIChwcm9wLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgdmFyIGUgPSBwcm9wLnNoaWZ0KCk7XHJcbiAgICAgICAgICAgIGFzc2lnbihvYmpbZV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmpbZV0pID09PSBcIltvYmplY3QgT2JqZWN0XVwiXHJcbiAgICAgICAgICAgICAgICAgICAgPyBvYmpbZV1cclxuICAgICAgICAgICAgICAgICAgICA6IHt9LFxyXG4gICAgICAgICAgICAgICAgcHJvcCxcclxuICAgICAgICAgICAgICAgIHZhbHVlKTtcclxuICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgb2JqW3Byb3BbMF1dID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gZmllbGRBbmNlc3RvcnNcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNmaWVsZEFuY2VzdG9yc1xyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIEZpZWxk7JeQIOyDgeyGjeuQnCDrtoDrqqjrk6TsnYQg7LC+64qU64ukLi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gYW55Y2xhc3MgOiDssL7snYQgZmllbGRcclxuICAgICAqIEByZXR1cm4ge0FycmF5fTog7IOB7IaN65CcIOu2gOuqqOuTpFxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZmllbGRBbmNlc3RvcnMgKGFueWNsYXNzKVxyXG4gICAge1xyXG4gICAgICAgIHN3aXRjaCAodHJ1ZSkge1xyXG4gICAgICAgIGNhc2UgKGFueWNsYXNzID09PSB1bmRlZmluZWQpOiByZXR1cm47XHJcbiAgICAgICAgY2FzZSAoYW55Y2xhc3MgPT09IG51bGwpOiByZXR1cm4gW107XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIFthbnljbGFzcywgLi4uKFV0aWxzLmZpZWxkQW5jZXN0b3JzIChPYmplY3QuZ2V0UHJvdG90eXBlT2YgKGFueWNsYXNzKSkpXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gZmluZFNhbWVBbmNlc3RvclxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2ZpbmRTYW1lQW5jZXN0b3JcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSAgRmllbGTrk6TsnZgg6rO17Ya17Jy866GcIOyDgeyGjeuQnCDrtoDrqqjrpbwg7LC+64qU64ukLi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSAgZmllbGRMaXN0IOywvuydhCBmaWVsZCDrpqzsiqTtirhcclxuICAgICAqIEByZXR1cm4ge09iamVjdH0gIOqzte2GteycvOuhnCDsg4Hsho3rkJwg67aA66qoXHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBmaW5kU2FtZUFuY2VzdG9yKGZpZWxkTGlzdCkge1xyXG4gICAgICAgIC8vIOyyq+uyiOynuCDtlYTrk5zsnZgg7KGw7IOB65Ok7J2EIOyhsOyCrO2VnOuLpC5cclxuICAgICAgICB2YXIgZmlyc3RBbmNlc3RvcnMgPSBVdGlscy5maWVsZEFuY2VzdG9ycyhmaWVsZExpc3RbMF0pO1xyXG4gICAgICAgIHZhciBzYW1lQW5jZXN0b3IgPSBmaXJzdEFuY2VzdG9yc1swXTtcclxuICAgICAgICAvLyDtlYTrk5zsnZgg6rCv7IiY6rCAIDHqsJzsnbTrqbQg6re464OlIOumrO2EtO2VnOuLpC5cclxuICAgICAgICBpZiAoZmllbGRMaXN0Lmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gc2FtZUFuY2VzdG9yO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY250ID0gMDtcclxuICAgICAgICAvLyAy67KI7Ke4IO2VhOuTnOu2gO2EsCDro6jtlITrpbwg7ZWc64ukLlxyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDE7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7IGlkeCsrKSB7XHJcbiAgICAgICAgICAgIHZhciBhbmNlc3RvcnMgPSBVdGlscy5maWVsZEFuY2VzdG9ycyhmaWVsZExpc3RbaWR4XSk7XHJcbiAgICAgICAgICAgIC8vIOu2gOuqqOqwgCAx6rCc7J2066m0IEJhc2VGaWVsZOydtOuvgOuhnCDqt7jrjIDroZwg66as7YS07ZWc64ukLlxyXG4gICAgICAgICAgICBpZiAoYW5jZXN0b3JzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFuY2VzdG9yc1swXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgc3RhcnRJZHggPSAwO1xyXG4gICAgICAgICAgICAvLyDssqvrsojsp7gg7ZWE65Oc7J2YIOyhsOyDgeydhCDro6jtlITtlZjripQgaW5kZXjsnbTrr4DroZwgMeu2gO2EsCDsi5zsnpHtlZzri6QuXHJcbiAgICAgICAgICAgIHZhciBzdGFydElkeDIgPSAxO1xyXG5cclxuICAgICAgICAgICAgLy8g7ZiE7J6sIOqzte2GteycvOuhnCDshKDtg53rkJwg7ZWE65Oc7J2YIOyhsOyDgeuztOuLpCDsp4DquIgg7KGw7IKs7ZWY64qUIO2VhOuTnOydmCDsobDsg4HsnbQg6rCv7IiY6rCAIOyggeycvOuptCBcclxuICAgICAgICAgICAgLy8g7KCE67aAIOyhsOyCrO2VoCDtlYTsmpTqsIAg7JeG7J20IOuRmOydmCDssKjsnbTrgpjripQg66eM7YG8IOu2gO2EsCDsobDsgqztlZzri6QuXHJcbiAgICAgICAgICAgIC8vIGV4KSBUZXh0RmllbGTsmYAgSW1hZ2VGaWVsZOulvCDruYTqtZDtlbTrs7TrqbRcclxuICAgICAgICAgICAgLy8gVGV4dCBUZXh0QmFzZSBCYXNlLCBJbWFnZSBCYXNlIOydtOugh+qyjCDsobDsg4Hrk6TsnbQg7KG07J6s7ZWc64ukLlxyXG4gICAgICAgICAgICAvLyDsnbTroIfqsowgMeuyiOynuOuKlCDrrLTsobDqsbQg64uk66W064uIIDHrsojsp7jripQg7Yyo7Iqk7ZWY6rOgIOuLpOydjOu2gO2EsCDsobDsgqzrpbwg7ZWc64ukLlxyXG4gICAgICAgICAgICBjb25zdCBzYW1lQW5jZXN0b3JQYXJlbnRzID0gVXRpbHMuZmllbGRBbmNlc3RvcnMoc2FtZUFuY2VzdG9yKTtcclxuICAgICAgICAgICAgaWYgKHNhbWVBbmNlc3RvclBhcmVudHMubGVuZ3RoID49IGFuY2VzdG9ycy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0SWR4ID0gc2FtZUFuY2VzdG9yUGFyZW50cy5sZW5ndGggLSBhbmNlc3RvcnMubGVuZ3RoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAodmFyIHNlY0lkeCA9IHN0YXJ0SWR4OyBzZWNJZHggPCBhbmNlc3RvcnMubGVuZ3RoOyBzZWNJZHgrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFuY2VzdG9yID0gYW5jZXN0b3JzW3NlY0lkeF07XHJcbiAgICAgICAgICAgICAgICB2YXIgZmluZFNhbWVBbmNlc3RvciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBmaXJzdElkeCA9IHN0YXJ0SWR4MjsgZmlyc3RJZHggPCBmaXJzdEFuY2VzdG9ycy5sZW5ndGg7IGZpcnN0SWR4KyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjbnQrKztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKGFuY2VzdG9yKSA9PSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZmlyc3RBbmNlc3RvcnNbZmlyc3RJZHhdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDqsJnsnYQg6rK97JqwICsx7J2EIO2VmOuKlCDsnbTsnKDripQgcHJvdG90eXBl7J2YIGNvbnN0cnVjdG9y6rCAIO2VmOuCmCDsnITrpbwg67CU652867O06riwIOuVjOusuOydtOuLpC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2FtZUFuY2VzdG9yID0gZmlyc3RBbmNlc3RvcnNbZmlyc3RJZHggKyAxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2FtZUFuY2VzdG9yUGFyZW50cyA9IFV0aWxzLmZpZWxkQW5jZXN0b3JzKHNhbWVBbmNlc3Rvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOq4uOydtOqwgCAy66m0IEJhc2VGaWVsZOydtOuvgOuhnCDqt7jrjIDroZwg66as7YS07ZWc64ukLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2FtZUFuY2VzdG9yUGFyZW50cy5sZW5ndGggPT09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzYW1lQW5jZXN0b3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZmluZFNhbWVBbmNlc3RvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0SWR4MiA9IGZpcnN0SWR4ICsgMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGZpbmRTYW1lQW5jZXN0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc2FtZUFuY2VzdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBmaW5kU2FtZUFuY2VzdG9yMihmaWVsZExpc3QpIHtcclxuICAgICAgICBpZiAoZmllbGRMaXN0Lmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmllbGRMaXN0WzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBmaXJzdEZpZWxkQW5jZXN0b3JzID0gZmllbGRMaXN0WzBdLmFuY2VzdG9ycygpO1xyXG4gICAgICAgIGxldCBjb21tb25BbmNlc3RvciA9IGZpcnN0RmllbGRBbmNlc3RvcnNbMF07XHJcbiAgICAgICAgZm9yIChsZXQgaWR4ID0gMTsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGNvbW1vbkFuY2VzdG9yID09PSBcIkJGXCIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25BbmNlc3RvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBmaWVsZEFuY2VzdG9ycyA9IGZpZWxkTGlzdFtpZHhdLmFuY2VzdG9ycygpO1xyXG4gICAgICAgICAgICBpZiAoZmllbGRBbmNlc3RvcnMuaW5jbHVkZXMoY29tbW9uQW5jZXN0b3IpKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaWR4MiA9IDE7IGlkeDIgPCBmaXJzdEZpZWxkQW5jZXN0b3JzLmxlbmd0aDsgKytpZHgyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmllbGRBbmNlc3RvcnMuaW5jbHVkZXMoZmlyc3RGaWVsZEFuY2VzdG9yc1tpZHgyXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb21tb25BbmNlc3RvciA9IGZpcnN0RmllbGRBbmNlc3RvcnNbaWR4Ml07XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNvbW1vbkFuY2VzdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGdldFVzZXJJbmZvT3B0c0xpc3RcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNnZXRVc2VySW5mb09wdHNMaXN0XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgIOyEnOuqheyekOuTpOydmCDsoJXrs7Qg66as7Iqk7Yq466W8IOuwmO2ZmO2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0g7ISc66qF7J6Q65Ok7J2YIOygleuztCDrpqzsiqTtirhcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldFVzZXJJbmZvT3B0c0xpc3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIFV0aWxzLnVzZXJJbmZvT3B0aW9uTGlzdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBzZXRVc2VySW5mb09wdHNMaXN0XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjc2V0VXNlckluZm9PcHRzTGlzdFxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpICDshJzrqoXsnpDrk6TsnZgg7KCV67O0IOumrOyKpO2KuOulvCDshKTsoJXtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gZmllbGRMaXN0ICDshJzrqoXsnpDrk6TsnZgg7KCV67O0IOumrOyKpO2KuFxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgc2V0VXNlckluZm9PcHRzTGlzdChvcHRzKSB7XHJcbiAgICAgICAgVXRpbHMudXNlckluZm9PcHRpb25MaXN0ID0gb3B0cztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBnZXRVc2VySW5mb09wdHNMaXN0Q291bnRcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNnZXRVc2VySW5mb09wdHNMaXN0Q291bnRcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDshJzrqoXsnpDrk6TsnZgg7KCV67O0IOumrOyKpO2KuCDquLjsnbTrpbwg67CY7ZmY7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge051bWJlcn06IOyEnOuqheyekOuTpOydmCDsoJXrs7Qg66as7Iqk7Yq46ri47J20XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBnZXRVc2VySW5mb09wdHNMaXN0Q291bnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIFV0aWxzLnVzZXJJbmZvT3B0aW9uTGlzdENvdW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIHNldFVzZXJJbmZvT3B0c0xpc3RDb3VudFxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI3NldFVzZXJJbmZvT3B0c0xpc3RDb3VudFxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpICDshJzrqoXsnpDrk6TsnZgg7KCV67O0IOumrOyKpO2KuCDquLjsnbTrpbwg7ISk7KCV7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBmaWVsZExpc3Qg7ISc66qF7J6Q65Ok7J2YIOygleuztCDrpqzsiqTtirgg6ri47J20XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBzZXRVc2VySW5mb09wdHNMaXN0Q291bnQoY291bnQpIHtcclxuICAgICAgICBVdGlscy51c2VySW5mb09wdGlvbkxpc3RDb3VudCA9IGNvdW50O1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBnZXREVkZpZWxkT3B0c0xpc3RcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNnZXREVkZpZWxkT3B0c0xpc3RcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSAgIOq4sOuzuOqwkuycvOuhnCDsgqzsmqntlaAg6rCS65Ok7J2YIOumrOyKpO2KuOulvCDrsJjtmZjtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7QXJyYXl9IOq4sOuzuOqwkuycvOuhnCDsgqzsmqntlaAg6rCS65Ok7J2YIOumrOyKpO2KuFxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0RFZGaWVsZE9wdHNMaXN0KCkge1xyXG4gICAgICAgIHJldHVybiBVdGlscy5kdkZpZWxkT3B0aW9uTGlzdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBzZXREVkZpZWxkT3B0c0xpc3RcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNzZXREVkZpZWxkT3B0c0xpc3RcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSAg6riw67O46rCS7Jy866GcIOyCrOyaqe2VoCDqsJLrk6TsnZgg66as7Iqk7Yq466W8IOyEpOygle2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZmllbGRMaXN0IHtBcnJheX0gIOq4sOuzuOqwkuycvOuhnCDsgqzsmqntlaAg6rCS65Ok7J2YIOumrOyKpO2KuFxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgc2V0RFZGaWVsZE9wdHNMaXN0KG9wdHMpIHtcclxuICAgICAgICBVdGlscy5kdkZpZWxkT3B0aW9uTGlzdCA9IG9wdHM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gZ2V0U2lnblRhYlNob3dPcHRcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNnZXRTaWduVGFiU2hvd09wdFxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpICAg7ISc66qF7YOtIOuztOyehC/slYjrs7TsnoQg6riw67O46rCS7Jy866GcIOyCrOyaqe2VoCDqsJLrk6TsnYQg67CY7ZmY7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge0FycmF5fSDshJzrqoXtg60g67O07J6EL+yViOuztOyehCDquLDrs7jqsJLsnLzroZwg7IKs7Jqp7ZWgIOqwkuuTpCBcclxuICAgICAqIEBEYXRlIDogMjAyMy4gMTIuIDI3XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBnZXRTaWduVGFiU2hvd09wdCgpIHtcclxuICAgICAgICByZXR1cm4gVXRpbHMuc2lnblRhYlNob3dPcHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gc2V0U2lnblRhYlNob3dPcHRcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNzZXRTaWduVGFiU2hvd09wdFxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpICDshJzrqoXtg60g67O07J6EL+yViOuztOyehCDquLDrs7jqsJLsnLzroZwg7IKs7Jqp7ZWgIOqwkuuTpOydhCDshKTsoJXtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHNpZ25UYWJTaG93T3B0IHtPYmplY3R9ICDshJzrqoXtg60g67O07J6EL+yViOuztOyehCDquLDrs7jqsJLsnLzroZwg7IKs7Jqp7ZWgIOqwkuuTpFxyXG4gICAgICogQERhdGUgOiAyMDIzLiAxMi4gMjdcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHNldFNpZ25UYWJTaG93T3B0KG9wdHMpIHtcclxuICAgICAgICBVdGlscy5zaWduVGFiU2hvd09wdCA9IG9wdHM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gZ2V0Rm9uU2l6ZUNvbWJvQm94XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjZ2V0Rm9uU2l6ZUNvbWJvQm94XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgIOyGjeyEseyXkOyEnCDsgqzsmqntlaAg7Y+w7Yq4IOyCrOydtOymiCDrpqzsiqTtirjrpbwg67CY7ZmY7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge0FycmF5fSDsho3shLHsl5DshJwg7IKs7Jqp7ZWgIO2PsO2KuCDsgqzsnbTspogg66as7Iqk7Yq4XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBnZXRGb25TaXplQ29tYm9Cb3goKSB7XHJcbiAgICAgICAgaWYgKFV0aWxzLmZvbnRTaXplQ29tYm9Cb3gubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gVXRpbHMuZm9udFNpemVDb21ib0JveDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMTsgaWR4IDw9IDUwOyBpZHgrKykge1xyXG4gICAgICAgICAgICBVdGlscy5mb250U2l6ZUNvbWJvQm94LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgdGV4dDogaWR4ICsgXCJweFwiLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IGlkeFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFV0aWxzLmZvbnRTaXplQ29tYm9Cb3g7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gZ2V0U2lnblBlbldpZHRoQ29tYm9Cb3hcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNnZXRTaWduUGVuV2lkdGhDb21ib0JveFxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIOyGjeyEseyXkOyEnCDsgqzsmqntlaAg7Y6cIOuRkOq7mCDrpqzsiqTtirjrpbwg67CY7ZmY7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge0FycmF5fSDsho3shLHsl5DshJwg7IKs7Jqp7ZWgIO2OnCDrkZDqu5gg66as7Iqk7Yq4XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBnZXRTaWduUGVuV2lkdGhDb21ib0JveCgpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKFV0aWxzLnNpZ25QZW5XaWR0aENvbWJvQm94Lmxlbmd0aCk7XHJcbiAgICAgICAgaWYgKFV0aWxzLnNpZ25QZW5XaWR0aENvbWJvQm94Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFV0aWxzLnNpZ25QZW5XaWR0aENvbWJvQm94O1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBpZHggPSAxOyBpZHggPD0gMjA7IGlkeCArPSAxKSB7XHJcbiAgICAgICAgICAgIFV0aWxzLnNpZ25QZW5XaWR0aENvbWJvQm94LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgdGV4dDogaWR4LFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IGlkeFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFV0aWxzLnNpZ25QZW5XaWR0aENvbWJvQm94O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGNyZWF0ZUF0dHJidXRlUG9wdXBcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjcmVhdGVBdHRyYnV0ZVBvcHVwXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7IaN7ISxIO2MneyXheydmCBFbGVtZW5066W8IOunjOuToOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG93bmVyTm9kZSDtlbTri7kg7ZSE66Gc7KCd7Yq47J2YIOy1nOyDgeuLqCBFbGVtZW5066W8IOqwkOyLuOqzoCDsnojripQgRWxlbWVudFxyXG4gICAgICogQHJldHVybiB7RWxlbWVudH0g7IaN7ISxIO2MneyXheydmCBlbGVtZW50XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVhdGVBdHRyYnV0ZVBvcHVwKG93bmVyTm9kZSwgb3duZXJGaWVsZEJCb3gpIHtcclxuICAgICAgICBsZXQgYXR0ckRpdiA9IG93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFwiIC5cIiArIENPTlNUQU5UUy5FRElUT1JfQVRUUl9DTEFTUyk7XHJcbiAgICAgICAgaWYgKGF0dHJEaXYgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgYXR0ckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIGF0dHJEaXYuY2xhc3NMaXN0LmFkZChDT05TVEFOVFMuRURJVE9SX0FUVFJfQ0xBU1MpO1xyXG4gICAgICAgICAgICBhdHRyRGl2LmNsYXNzTGlzdC5hZGQoQ09OU1RBTlRTLlNIT1dfQ0xBU1MpO1xyXG4gICAgICAgICAgICBsZXQgdmlld2VyID0gb3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXCIgI1wiICsgQ09OU1RBTlRTLlRFTVBMQVRFX1BERl9WSUVXRVIpO1xyXG4gICAgICAgICAgICB2aWV3ZXIuYXBwZW5kQ2hpbGQoYXR0ckRpdik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgVXRpbHMucmVtb3ZlQWxsQ2hpbGROb2RlKGF0dHJEaXYpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWF0dHJEaXYuY2xhc3NMaXN0LmNvbnRhaW5zKENPTlNUQU5UUy5TSE9XX0NMQVNTKSkge1xyXG4gICAgICAgICAgICBhdHRyRGl2LmNsYXNzTGlzdC5hZGQoQ09OU1RBTlRTLlNIT1dfQ0xBU1MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhdHRyRGl2LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgaWYgKG93bmVyRmllbGRCQm94ICE9PSBudWxsICYmIG93bmVyRmllbGRCQm94ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgYXR0ckRpdi5zdHlsZS5sZWZ0ID0gb3duZXJGaWVsZEJCb3gueCArIFwicHhcIjtcclxuICAgICAgICAgICAgYXR0ckRpdi5zdHlsZS50b3AgPSBvd25lckZpZWxkQkJveC55ICsgb3duZXJGaWVsZEJCb3guaGVpZ2h0ICsgMTAgKyBcInB4XCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhdHRyRGl2O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIHNob3dBc3Rlcmlza0RpdlxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI3Nob3dBc3Rlcmlza0RpdlxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOyImCDtkZzsi5wg66eI7YGs66W8IOuztOydtOqxsOuCmCDsiKjquLTri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBvd25lck5vZGUgIO2VtOuLuSDtlITroZzsoJ3tirjsnZgg7LWc7IOB64uoIEVsZW1lbnTrpbwg6rCQ7Iu46rOgIOyeiOuKlCBFbGVtZW50XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRJZCAg7ZWE7IiYIOuniO2BrOqwgCDsgqzsmqnrkJjripQg7ZWE65Oc7J2YIGlkXHJcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlzU2hvdyAgdHJ1ZeuptCDrs7TsnbTqs6AgZmFsc2XrqbQg7Iio6ri064ukLlxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGZpZWxkWCAg7ZWE7IiYIOuniO2BrOqwgCDsgqzsmqnrkJjripQg7ZWE65Oc7J2YIHjsooztkZxcclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBmaWVsZFkgIO2VhOyImCDrp4jtgazqsIAg7IKs7Jqp65CY64qUIO2VhOuTnOydmCB57KKM7ZGcXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZmllbGRIZWlnaHQgIO2VhOyImCDrp4jtgazqsIAg7IKs7Jqp65CY64qUIO2VhOuTnOydmCDrhpLsnbRcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHNob3dBc3Rlcmlza0Rpdihvd25lck5vZGUsIGZpZWxkSWQsIGlzU2hvdywgZmllbGRYLCBmaWVsZFksIGZpZWxkSGVpZ2h0KSB7XHJcbiAgICAgICAgbGV0IGFzdGVyaXNrRGl2ID0gb3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXCIgI1wiICsgZmllbGRJZCArIFwiX2FzdGVyaXNrXCIpO1xyXG4gICAgICAgIGlmIChhc3Rlcmlza0RpdiA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgLy8gICAgY29uc29sZS5sb2coXCJzaG93QXN0ZXJpc2tEaXYgICBcIiArIGlzU2hvdyk7XHJcbiAgICAgICAgaWYgKGlzU2hvdykge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRYID09PSBudWxsIHx8IGZpZWxkWSA9PT0gbnVsbCB8fCBmaWVsZEhlaWdodCA9PT0gbnVsbCB8fFxyXG4gICAgICAgICAgICAgICAgZmllbGRYID09PSB1bmRlZmluZWQgfHwgZmllbGRZID09PSB1bmRlZmluZWQgfHwgZmllbGRIZWlnaHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBhc3Rlcmlza0hlaWdodCA9IENPTlNUQU5UUy5BU1RSRUlTS19ESVZfSEVJR0hUO1xyXG4gICAgICAgICAgICBhc3Rlcmlza0Rpdi5zdHlsZS5sZWZ0ID0gKGZpZWxkWCAtIDYgLSBhc3Rlcmlza0hlaWdodCkgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIGxldCBhc3Rlcmlza1kgPSBmaWVsZFkgKyAoZmllbGRIZWlnaHQgLyAyKSAtIChhc3Rlcmlza0hlaWdodCAvIDIpO1xyXG4gICAgICAgICAgICBhc3Rlcmlza0Rpdi5zdHlsZS50b3AgPSBhc3Rlcmlza1kgKyBcInB4XCI7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWFzdGVyaXNrRGl2LmNsYXNzTGlzdC5jb250YWlucyhDT05TVEFOVFMuU0hPV19DTEFTUykpIHtcclxuICAgICAgICAgICAgICAgIGFzdGVyaXNrRGl2LmNsYXNzTGlzdC50b2dnbGUoQ09OU1RBTlRTLlNIT1dfQ0xBU1MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhc3Rlcmlza0Rpdi5jbGFzc0xpc3QuY29udGFpbnMoQ09OU1RBTlRTLkhJREVfQ0xBU1MpKSB7XHJcbiAgICAgICAgICAgICAgICBhc3Rlcmlza0Rpdi5jbGFzc0xpc3QudG9nZ2xlKENPTlNUQU5UUy5ISURFX0NMQVNTKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoYXN0ZXJpc2tEaXYuY2xhc3NMaXN0LmNvbnRhaW5zKENPTlNUQU5UUy5TSE9XX0NMQVNTKSkge1xyXG4gICAgICAgICAgICBhc3Rlcmlza0Rpdi5jbGFzc0xpc3QudG9nZ2xlKENPTlNUQU5UUy5TSE9XX0NMQVNTKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFhc3Rlcmlza0Rpdi5jbGFzc0xpc3QuY29udGFpbnMoQ09OU1RBTlRTLkhJREVfQ0xBU1MpKSB7XHJcbiAgICAgICAgICAgIGFzdGVyaXNrRGl2LmNsYXNzTGlzdC50b2dnbGUoQ09OU1RBTlRTLkhJREVfQ0xBU1MpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBjcmVhdGVBc3Rlcmlza0RpdlxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZUFzdGVyaXNrRGl2XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE7IiYIO2RnOyLnCDrp4jtgazsnZggRWxlbWVudOulvCDrp4zrk6Dri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBvd25lck5vZGUg7ZW064u5IO2UhOuhnOygne2KuOydmCDstZzsg4Hri6ggRWxlbWVudOulvCDqsJDsi7jqs6Ag7J6I64qUIEVsZW1lbnRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZElkICDtlYTsiJgg66eI7YGs6rCAIOyCrOyaqeuQmOuKlCDtlYTrk5zsnZggaWRcclxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9IO2VhOyImCDtkZzsi5wg66eI7YGs7J2YIGVsZW1lbnRcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWF0ZUFzdGVyaXNrRGl2KG93bmVyTm9kZSwgZmllbGRJZCkge1xyXG4gICAgICAgIGxldCBhc3Rlcmlza0RpdiA9IG93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFwiICNcIiArIGZpZWxkSWQgKyBcIl9hc3Rlcmlza1wiKTtcclxuICAgICAgICBpZiAoYXN0ZXJpc2tEaXYgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgYXN0ZXJpc2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICBhc3Rlcmlza0Rpdi5jbGFzc0xpc3QuYWRkKENPTlNUQU5UUy5BU1RFUklTS19JQ09OX0NMQVNTKTtcclxuICAgICAgICAgICAgYXN0ZXJpc2tEaXYuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCJcclxuICAgICAgICAgICAgYXN0ZXJpc2tEaXYuc3R5bGUud2lkdGggPSBcIjExcHhcIjtcclxuICAgICAgICAgICAgYXN0ZXJpc2tEaXYuc3R5bGUuaGVpZ2h0ID0gXCIxMnB4XCI7XHJcbiAgICAgICAgICAgIGxldCBsYXllckRpdiA9IG93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFwiICNcIiArIENPTlNUQU5UUy5URU1QTEFURV9MQVlFUl9BU1RFUklTS19OQU1FKTtcclxuICAgICAgICAgICAgbGF5ZXJEaXYuYXBwZW5kQ2hpbGQoYXN0ZXJpc2tEaXYpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXN0ZXJpc2tEaXY7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBpc1Nob3dBc3Rlcmlza0RpdlxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2lzU2hvd0FzdGVyaXNrRGl2XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE7IiYIO2RnOyLnCDrp4jtgazqsIAg67O07J2064qU7KeAIOyXrOu2gOulvCDrsJjtmZjtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBvd25lck5vZGUgIO2VtOuLuSDtlITroZzsoJ3tirjsnZgg7LWc7IOB64uoIEVsZW1lbnTrpbwg6rCQ7Iu46rOgIOyeiOuKlCBFbGVtZW50XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRJZCAg7ZWE7IiYIOuniO2BrOqwgCDsgqzsmqnrkJjripQg7ZWE65Oc7J2YIGlkXHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBpc1Nob3dBc3Rlcmlza0Rpdihvd25lck5vZGUsIGZpZWxkSWQpIHtcclxuICAgICAgICBsZXQgYXN0ZXJpc2tEaXYgPSBvd25lck5vZGUucXVlcnlTZWxlY3RvcihcIiAjXCIgKyBmaWVsZElkICsgXCJfYXN0ZXJpc2tcIik7XHJcbiAgICAgICAgaWYgKGFzdGVyaXNrRGl2ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChhc3Rlcmlza0Rpdi5jbGFzc0xpc3QuY29udGFpbnMoQ09OU1RBTlRTLlNIT1dfQ0xBU1MpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYXN0ZXJpc2tEaXYuY2xhc3NMaXN0LmNvbnRhaW5zKENPTlNUQU5UUy5ISURFX0NMQVNTKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBjcmVhdGVGaWVsZERlbGV0ZUJ0blxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZUZpZWxkRGVsZXRlQnRuXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE65Oc7J2YIERlbGV0ZeuyhO2KvOydmCBFbGVtZW5066W8IOunjOuToOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG93bmVyTm9kZSAg7ZW064u5IO2UhOuhnOygne2KuOydmCDstZzsg4Hri6ggRWxlbWVudOulvCDqsJDsi7jqs6Ag7J6I64qUIEVsZW1lbnRcclxuICAgICAqIEBwYXJhbSB7Q2FsbEJhY2t9IGJ0bkNsaWNrRXZ0SGFuZGxlciAg67KE7Yq87J2EIOuIjOuggOydhCDrlYwg64+Z7J6R7ZWgIEhhbmRsZXJcclxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9IO2VhOuTnOydmCBEZWxldGXrsoTtirzsnZggZWxlbWVudFxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlYXRlRmllbGREZWxldGVCdG4ob3duZXJOb2RlLCBidG5DbGlja0V2dEhhbmRsZXIpIHtcclxuICAgICAgICBsZXQgZGVsZXRlQnRuRGl2ID0gb3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXCIgLlwiICsgQ09OU1RBTlRTLkZJRUxEX0RFTEVURV9CVVRUT05fQ0xBU1MpO1xyXG4gICAgICAgIGlmIChkZWxldGVCdG5EaXYgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgZGVsZXRlQnRuRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgZGVsZXRlQnRuRGl2LmNsYXNzTGlzdC5hZGQoQ09OU1RBTlRTLkZJRUxEX0RFTEVURV9CVVRUT05fQ0xBU1MpO1xyXG4gICAgICAgICAgICBkZWxldGVCdG5EaXYuY2xhc3NMaXN0LmFkZChDT05TVEFOVFMuU0hPV19DTEFTUyk7XHJcbiAgICAgICAgICAgIGxldCB2aWV3ZXIgPSBvd25lck5vZGUucXVlcnlTZWxlY3RvcihcIiAjXCIgKyBDT05TVEFOVFMuVEVNUExBVEVfUERGX1ZJRVdFUik7XHJcbiAgICAgICAgICAgIHZpZXdlci5hcHBlbmRDaGlsZChkZWxldGVCdG5EaXYpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWRlbGV0ZUJ0bkRpdi5jbGFzc0xpc3QuY29udGFpbnMoQ09OU1RBTlRTLlNIT1dfQ0xBU1MpKSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZUJ0bkRpdi5jbGFzc0xpc3QuYWRkKENPTlNUQU5UUy5TSE9XX0NMQVNTKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRlbGV0ZUJ0bkRpdi5jbGFzc0xpc3QuY29udGFpbnMoQ09OU1RBTlRTLkhJREVfQ0xBU1MpKSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZUJ0bkRpdi5jbGFzc0xpc3QudG9nZ2xlKENPTlNUQU5UUy5ISURFX0NMQVNTKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgZGVsZXRlQnRuRGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBidG5DbGlja0V2dEhhbmRsZXIpO1xyXG4gICAgICAgIHJldHVybiBkZWxldGVCdG5EaXY7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gcmVwb3NpdGlvbkZpZWxkRGVsZXRlQnRuXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjcmVwb3NpdGlvbkZpZWxkRGVsZXRlQnRuXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE65Oc7J2YIERlbGV0ZeuyhO2KvOydmCDsnITsuZjrpbwg7KGw7KCV7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gb3duZXJOb2RlICDtlbTri7kg7ZSE66Gc7KCd7Yq47J2YIOy1nOyDgeuLqCBFbGVtZW5066W8IOqwkOyLuOqzoCDsnojripQgRWxlbWVudFxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHggIEZpZWxk7J2YIFjsooztkZxcclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB5ICBGaWVsZOydmCB57KKM7ZGcXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gd2lkdGggIEZpZWxk7J2YIHdpZHRoXHJcbiAgICAgKiBAcmV0dXJuIHtFbGVtZW50fSDtlYTrk5zsnZggRGVsZXRl67KE7Yq87J2YIGVsZW1lbnRcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHJlcG9zaXRpb25GaWVsZERlbGV0ZUJ0bihvd25lck5vZGUsIHgsIHksIHdpZHRoKSB7XHJcblxyXG4gICAgICAgIGxldCBkZWxldGVCdG5EaXYgPSBvd25lck5vZGUucXVlcnlTZWxlY3RvcihcIiAuXCIgKyBDT05TVEFOVFMuRklFTERfREVMRVRFX0JVVFRPTl9DTEFTUyk7XHJcbiAgICAgICAgaWYgKGRlbGV0ZUJ0bkRpdiA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImRlbGV0ZUJ0bkRpdiBlbXB0eVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGVsZXRlQnRuRGl2LmNsYXNzTGlzdC5jb250YWlucyhDT05TVEFOVFMuSElERV9DTEFTUykpIHtcclxuICAgICAgICAgICAgZGVsZXRlQnRuRGl2LmNsYXNzTGlzdC50b2dnbGUoQ09OU1RBTlRTLkhJREVfQ0xBU1MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxldGVCdG5EaXYuc3R5bGUubGVmdCA9IHggKyB3aWR0aCArIDEwICsgXCJweFwiO1xyXG4gICAgICAgIGRlbGV0ZUJ0bkRpdi5zdHlsZS50b3AgPSB5ICsgMTAgKyBcInB4XCI7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gYWRkU2lnblN2Z1RvQ2FudmFzXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjYWRkU2lnblN2Z1RvQ2FudmFzXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgY2FudmFz7JeQIFNWR+ulvCDstpTqsIDtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGZpZWxkICDstpTqsIDtlaAgY2FudmFz7J2YIFNpZ24gRmllbGQgT2JqZWN0XHJcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGNhbnZhc0RpdiAgY2FudmFz7J2YIEVsZW1lbnRcclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzaWduV2lkdGggIOyEnOuqhe2VhOuTnOydmCBXaWR0aFxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHNpZ25IZWlnaHQgIOyEnOuqhe2VhOuTnOydmCBoZWlnaHRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdmcgIFNWRyBTdHJpbmdcclxuICAgICAqIEByZXR1cm4ge09iamVjdH0gRmFicmljIGNhbnZhcyBPYmplY3Q6IFNWR+uNsOydtO2EsOqwgCDstpTqsIDrkJwgQ2FudmFzXHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhZGRTaWduU3ZnVG9DYW52YXMoZmllbGQsIGNhbnZhc0Rpdiwgc2lnbldpZHRoLCBzaWduSGVpZ2h0LCBzdmcpIHtcclxuICAgICAgICBsZXQgY2FudmFzT2JqID0gY2FudmFzRGl2O1xyXG4gICAgICAgIGlmIChjYW52YXNEaXYgPT09IG51bGwgfHwgY2FudmFzRGl2ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgY2FudmFzT2JqID0gZmllbGQubV9pZCArIFwiX2NhbnZhc1wiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgc3RhdGljQ2FudnMxID0gbmV3IGZhYnJpYy5TdGF0aWNDYW52YXMoY2FudmFzT2JqLCB7IGlzRHJhd2luZ01vZGU6IGZhbHNlIH0pO1xyXG4gICAgICAgIHN0YXRpY0NhbnZzMS5zZXRIZWlnaHQoc2lnbkhlaWdodCk7XHJcbiAgICAgICAgc3RhdGljQ2FudnMxLnNldFdpZHRoKHNpZ25XaWR0aCk7XHJcblxyXG4gICAgICAgIGZhYnJpYy5sb2FkU1ZHRnJvbVN0cmluZyhzdmcsIGZ1bmN0aW9uIChvYmplY3RzLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHZhciBvYmogPSBmYWJyaWMudXRpbC5ncm91cFNWR0VsZW1lbnRzKG9iamVjdHMsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBsZXQgeFNjYWxlID0gc3RhdGljQ2FudnMxLndpZHRoIC8gb2JqLndpZHRoO1xyXG4gICAgICAgICAgICBsZXQgeVNjYWxlID0gc3RhdGljQ2FudnMxLmhlaWdodCAvIG9iai5oZWlnaHQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlMSA9IHhTY2FsZSA+IHlTY2FsZSA/IHlTY2FsZSA6IHhTY2FsZTtcclxuICAgICAgICAgICAgb2JqLnNjYWxlKHNjYWxlMSk7XHJcblxyXG4gICAgICAgICAgICBvYmouc3Ryb2tlV2lkdGggPSBvYmouc3Ryb2tlV2lkdGggLyBzY2FsZTE7XHJcbiAgICAgICAgICAgIGlmIChvYmouX29iamVjdHMgIT09IG51bGwgJiYgb2JqLl9vYmplY3RzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGxldCBvYmplY3RzID0gb2JqLl9vYmplY3RzO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgb2JqZWN0cy5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0c1tpZHhdLnN0cm9rZVdpZHRoID0gb2JqZWN0c1tpZHhdLnN0cm9rZVdpZHRoIC8gc2NhbGUxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN0YXRpY0NhbnZzMS5hZGQob2JqKS5jZW50ZXJPYmplY3Qob2JqKS5yZW5kZXJBbGwoKTtcclxuICAgICAgICAgICAgb2JqLnNldENvb3JkcygpO1xyXG4gICAgICAgIH0sIFxyXG4gICAgICAgICBudWxsLFxyXG4gICAgICAgICB7Y3Jvc3NPcmlnaW46ICdhbm9ueW1vdXMnIC8vIENPUlMg7ISk7KCVXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHN0YXRpY0NhbnZzMTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBhZGRPYmplY3RzVG9DYW52YXNcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNhZGRPYmplY3RzVG9DYW52YXNcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBjYW52YXPsl5AgT2JqZWN0c+ulvCDstpTqsIDtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBvd25lck5vZGUgIO2VtOuLuSDtlITroZzsoJ3tirjsnZgg7LWc7IOB64uoIEVsZW1lbnTrpbwg6rCQ7Iu46rOgIOyeiOuKlCBFbGVtZW50XHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZmllbGQgIOy2lOqwgO2VoCBjYW52YXPsnZggU2lnbiBGaWVsZCBPYmplY3RcclxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gY2FudmFzRGl2ICBjYW52YXPsnZggRWxlbWVudFxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHNpZ25XaWR0aCAg7ISc66qF7ZWE65Oc7J2YIFdpZHRoXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gc2lnbkhlaWdodCAg7ISc66qF7ZWE65Oc7J2YIGhlaWdodFxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gb2JqZWN0cyAgOiBQYXRo7J2YIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG9yZ1dpZHRoICDstpTqsIDrkKAgT2JqZWN0c+ydmCBXaWR0aFxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG9yZ0hlaWdodCAgOiDstpTqsIDrkKAgT2JqZWN0c+ydmCBoZWlnaHRcclxuICAgICAqIEByZXR1cm4ge09iamVjdH0gRmFicmljIGNhbnZhcyBPYmplY3Q6IE9iamVjdHPqsIAg7LaU6rCA65CcIENhbnZhc1xyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYWRkT2JqZWN0c1RvQ2FudmFzKF9vd25lck5vZGUsIGZpZWxkLCBjYW52YXNEaXYsIHNpZ25XaWR0aCwgc2lnbkhlaWdodCwgb2JqZWN0cywgb3JnV2lkdGgsIG9yZ0hlaWdodCkge1xyXG4gICAgICAgIGxldCBjYW52YXNPYmogPSBjYW52YXNEaXY7XHJcbiAgICAgICAgaWYgKGNhbnZhc0RpdiA9PT0gbnVsbCB8fCBjYW52YXNEaXYgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBsZXQgY2FudmFzSWQgPSBmaWVsZC5tX2lkICsgXCJfY2FudmFzXCI7XHJcbiAgICAgICAgICAgIGNhbnZhc09iaiA9IF9vd25lck5vZGUucXVlcnlTZWxlY3RvcihcIiNcIiArIGNhbnZhc0lkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHN0YXRpY0NhbnZzMSA9IG5ldyBmYWJyaWMuU3RhdGljQ2FudmFzKGNhbnZhc09iaiwgeyBpc0RyYXdpbmdNb2RlOiBmYWxzZSB9KTtcclxuICAgICAgICBzdGF0aWNDYW52czEuc2V0SGVpZ2h0KHNpZ25IZWlnaHQpO1xyXG4gICAgICAgIHN0YXRpY0NhbnZzMS5zZXRXaWR0aChzaWduV2lkdGgpO1xyXG4gICAgICAgIGxldCB4U2NhbGUgPSBzdGF0aWNDYW52czEud2lkdGggLyBvcmdXaWR0aDtcclxuICAgICAgICBsZXQgeVNjYWxlID0gc3RhdGljQ2FudnMxLmhlaWdodCAvIG9yZ0hlaWdodDtcclxuICAgICAgICBjb25zdCBzY2FsZTEgPSB4U2NhbGUgPiB5U2NhbGUgPyB5U2NhbGUgOiB4U2NhbGU7XHJcbiAgICAgICAvLyBjb25zb2xlLmxvZyhzY2FsZTEpO1xyXG4gICAgICAgIGZhYnJpYy51dGlsLmVubGl2ZW5PYmplY3RzKG9iamVjdHMsIGZ1bmN0aW9uIChvYmpzKSB7XHJcbiAgICAgICAgICAgIHZhciBvcmlnUmVuZGVyT25BZGRSZW1vdmUgPSBzdGF0aWNDYW52czEucmVuZGVyT25BZGRSZW1vdmU7XHJcbiAgICAgICAgICAgIHN0YXRpY0NhbnZzMS5yZW5kZXJPbkFkZFJlbW92ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBsZXQgZ290b0NlbnRlciA9IHRydWU7XHJcbiAgICAgICAgICAgIGlmIChvYmpzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgIGdvdG9DZW50ZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgb2Jqcy5mb3JFYWNoKGZ1bmN0aW9uIChvKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbGVmdCA9IG8ubGVmdCAqIHNjYWxlMTtcclxuICAgICAgICAgICAgICAgIGxldCB0b3AgPSBvLnRvcCAqIHNjYWxlMTtcclxuICAgICAgICAgICAgICAgIGlmIChnb3RvQ2VudGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICBsZWZ0ID0gKChzdGF0aWNDYW52czEud2lkdGggLSBvLndpZHRoICogc2NhbGUxKSAvIDIpO1xyXG4gICAgICAgICAgICAgICAgICAgdG9wID0gKChzdGF0aWNDYW52czEuaGVpZ2h0IC0gby5oZWlnaHQgKiBzY2FsZTEpIC8gMik7ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG8uc2V0KHtcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBsZWZ0LFxyXG4gICAgICAgICAgICAgICAgICAgIHRvcDogdG9wLFxyXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlWTogc2NhbGUxLFxyXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlWDogc2NhbGUxLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiBvLnN0cm9rZVdpZHRoIC8gc2NhbGUxXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHN0YXRpY0NhbnZzMS5hZGQobyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgc3RhdGljQ2FudnMxLnJlbmRlck9uQWRkUmVtb3ZlID0gb3JpZ1JlbmRlck9uQWRkUmVtb3ZlO1xyXG4gICAgICAgICAgICBzdGF0aWNDYW52czEucmVuZGVyQWxsKCk7XHJcbiAgICAgICAgICAgIHN0YXRpY0NhbnZzMS5jYWxjT2Zmc2V0KCk7XHJcbiAgICAgICAgICAgIGlmIChvYmpzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvYmpzID0gc3RhdGljQ2FudnMxLmdldE9iamVjdHMoKTtcclxuICAgICAgICAgICAgICAgIHZhciBncm91cCA9IG5ldyBmYWJyaWMuR3JvdXAob2Jqcywge1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBncm91cC5zZXQoe1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6ICgoc3RhdGljQ2FudnMxLndpZHRoIC0gZ3JvdXAud2lkdGggKSAvIDIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvcDogKChzdGF0aWNDYW52czEuaGVpZ2h0IC0gZ3JvdXAuaGVpZ2h0ICkgLyAyKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIGdyb3VwLnNldENvb3JkcygpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGljQ2FudnMxLnJlbmRlckFsbCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBzdGF0aWNDYW52czE7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gY2xvbmVPYmplY3RcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjbG9uZU9iamVjdFxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpICBPYmplY3QgZGVlcCBjb3B5XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHRvT2JqICDrs7XsgqztlaAgb2JqZWN0XHJcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICDrs7XsgqzrkJwgb2JqZWN0XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjbG9uZU9iamVjdChvYmopIHtcclxuICAgICAgICB2YXIgY2xvbmUgPSB7fTtcclxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqW2tleV0gPT0gXCJvYmplY3RcIiAmJiBvYmpba2V5XSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmpba2V5XSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbG9uZVtrZXldID0gWy4uLm9ialtrZXldXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xvbmVba2V5XSA9IFV0aWxzLmNsb25lT2JqZWN0KG9ialtrZXldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNsb25lW2tleV0gPSBvYmpba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGNsb25lO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGNsb25lT2JqZWN0VG9PYmplY3RcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjbG9uZU9iamVjdFRvT2JqZWN0XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgZnJvbU9iauydmCDrjbDsnbTthLDrpbwgdG9PYmrroZwgZGVlcCBjb3B5XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGZyb21PYmog67O17IKs7ZWgIG9iamVjdFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHRvT2JqICDrs7XsgqzrkKAgb2JqZWN0XHJcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IOuzteyCrOuQnCBvYmplY3RcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNsb25lT2JqZWN0VG9PYmplY3QoZnJvbU9iaiwgdG9PYmopIHtcclxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gZnJvbU9iaikge1xyXG4gICAgICAgICAgICBpZiAoa2V5ID09PSBcInBhZ2VzXCIgfHwga2V5ID09PSBcImZpZWxkc1wiKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGZyb21PYmpba2V5XSA9PSBcIm9iamVjdFwiICYmIGZyb21PYmpba2V5XSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0b09ialtrZXldID0gVXRpbHMuY2xvbmVPYmplY3QoZnJvbU9ialtrZXldKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRvT2JqW2tleV0gPSBmcm9tT2JqW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0b09iajtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBjbG9uZUZhYnJpY0NhbnZhc1xyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2Nsb25lRmFicmljQ2FudmFzXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgIGNhbnZhc+yXkCBPYmplY3Rz66W8IOy2lOqwgO2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gY2FudmFzT2JqICBPYmplY3TqsIAg7LaU6rCA65CgIENhbnZhc1xyXG4gICAgICogQHBhcmFtIHtBcnJheX0gIG9iamVjdHMg67O17IKs65CgIE9iamVjdOydmCDrpqzsiqTtirhcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNsb25lRmFicmljQ2FudmFzKGNhbnZhc09iaiwgb2JqZWN0cykge1xyXG4gICAgICAgIGZhYnJpYy51dGlsLmVubGl2ZW5PYmplY3RzKG9iamVjdHMsIGZ1bmN0aW9uIChvYmpzKSB7XHJcbiAgICAgICAgICAgIHZhciBvcmlnUmVuZGVyT25BZGRSZW1vdmUgPSBjYW52YXNPYmoucmVuZGVyT25BZGRSZW1vdmU7XHJcbiAgICAgICAgICAgIGNhbnZhc09iai5yZW5kZXJPbkFkZFJlbW92ZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgb2Jqcy5mb3JFYWNoKGZ1bmN0aW9uIChvKSB7XHJcbiAgICAgICAgICAgICAgICBjYW52YXNPYmouYWRkKG8pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY2FudmFzT2JqLnJlbmRlck9uQWRkUmVtb3ZlID0gb3JpZ1JlbmRlck9uQWRkUmVtb3ZlO1xyXG4gICAgICAgICAgICBjYW52YXNPYmoucmVuZGVyQWxsKCk7XHJcbiAgICAgICAgICAgIGNhbnZhc09iai5jYWxjT2Zmc2V0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gaXNTdHJpbmdFbXB0eVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2lzU3RyaW5nRW1wdHlcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDrrLjsnpDsl7TsnbQg67mE7Ja07J6I64qU7KeAIO2ZleyduO2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyIO2ZleyduO2VoCDrrLjsnpDsl7RcclxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IOu5hOyWtOyeiOycvOuptCB0cnVlIOu5hOyWtOyeiOyngCDslYrsnLzrqbQgZmFsc2VcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGlzU3RyaW5nRW1wdHkoc3RyKSB7XHJcbiAgICAgICAgaWYgKHN0ciA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN0ciA9PT0gXCJcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN0ciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gbWVyZ2VSZWN0XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjbWVyZ2VSZWN0XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgIOuRkCBSZWN066W8IO2Vqey5nOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcjEge2xlZnQ6IDAsIHJpZ2h0OiAwLCB0b3A6IDAsIHJpZ2h0OiAwfSDtlanss5DslbzrkJjripQgUmVjdCBPYmplY3RcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByMiB7bGVmdDogMCwgcmlnaHQ6IDAsIHRvcDogMCwgcmlnaHQ6IDB9IO2VqeyzkOyVvOuQmOuKlCBSZWN0IE9iamVjdFxyXG4gICAgICogQHJldHVybiB7T2JqZWN0fSB7bGVmdDogMCwgcmlnaHQ6IDAsIHRvcDogMCwgcmlnaHQ6IDAsIHg6IDAsIHk6IDAsIHdpZHRoOiAwLCBoZWlnaHQ6IDB9OiDtlanss5Dsp4QgUmVjdFxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgbWVyZ2VSZWN0KHIxLCByMikge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGxlZnQ6IE1hdGgubWluKHIxLmxlZnQsIHIyLmxlZnQpLFxyXG4gICAgICAgICAgICB0b3A6IE1hdGgubWluKHIxLnRvcCwgcjIudG9wKSxcclxuICAgICAgICAgICAgcmlnaHQ6IE1hdGgubWF4KHIxLnJpZ2h0LCByMi5yaWdodCksXHJcbiAgICAgICAgICAgIGJvdHRvbTogTWF0aC5tYXgocjEuYm90dG9tLCByMi5ib3R0b20pLFxyXG4gICAgICAgICAgICB4OiBNYXRoLm1pbihyMS5sZWZ0LCByMi5sZWZ0KSxcclxuICAgICAgICAgICAgeTogTWF0aC5taW4ocjEudG9wLCByMi50b3ApLFxyXG4gICAgICAgICAgICB3aWR0aDogTWF0aC5hYnMoTWF0aC5tYXgocjEucmlnaHQsIHIyLnJpZ2h0KSAtIE1hdGgubWluKHIxLmxlZnQsIHIyLmxlZnQpKSxcclxuICAgICAgICAgICAgaGVpZ2h0OiBNYXRoLmFicyhNYXRoLm1heChyMS5ib3R0b20sIHIyLmJvdHRvbSkgLSBNYXRoLm1pbihyMS50b3AsIHIyLnRvcCkpLFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBib3VuZGluZ1JlY3RUb1JlY3RcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNib3VuZGluZ1JlY3RUb1JlY3RcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBCb3VuZGluZ1JlY3Trpbwg7Jes6riw7IScIOyCrOyaqe2VoCBSZWN0IE9iamVjdOuhnCDrs4Dqsr1cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcmVjdCB7bGVmdDogMCwgd2l0aDogMCwgd2lkdGg6IDAsIGhlaWdodDogMH0gQm91bmRpbmcgUmVjdCBPYmplY3RcclxuICAgICAqIEByZXR1cm4ge09iamVjdH0ge2xlZnQ6IDAsIHJpZ2h0OiAwLCB0b3A6IDAsIHJpZ2h0OiAwfTog7Jes6riw7IScIOyCrOyaqe2VoCBSZWN0IE9iamVjdFxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYm91bmRpbmdSZWN0VG9SZWN0KHJlY3QpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBsZWZ0OiByZWN0LmxlZnQsXHJcbiAgICAgICAgICAgIHRvcDogcmVjdC50b3AsXHJcbiAgICAgICAgICAgIHJpZ2h0OiByZWN0LmxlZnQgKyByZWN0LndpZHRoLFxyXG4gICAgICAgICAgICBib3R0b206IHJlY3QudG9wICsgcmVjdC5oZWlnaHRcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gbWVyZ2VPYmplY3RzUmVjdFxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI21lcmdlT2JqZWN0c1JlY3RcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBDYW52YXPsnZggUGF0aCBPYmplY3Rz7J2YIFJlY3Trk6TsnYQg7ZWY64KY66GcIO2Vqey5nOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gY2FudmFzIEZhYnJpYyBjYW52YXM6IFBhdGggT2JqZWN0c+qwgCDsnojripQgY2FudmFzXHJcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHtsZWZ0OiAwLCByaWdodDogMCwgdG9wOiAwLCByaWdodDogMH06IOyXrOq4sOyEnCDsgqzsmqntlaAgUmVjdCBPYmplY3RcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIG1lcmdlT2JqZWN0c1JlY3QoY2FudmFzKSB7XHJcbiAgICAgICAgbGV0IHJlY3QgPSBudWxsO1xyXG4gICAgICAgIGNhbnZhcy5mb3JFYWNoT2JqZWN0KGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICAgICAgdmFyIGJvdW5kID0gb2JqLmdldEJvdW5kaW5nUmVjdCgpO1xyXG4gICAgICAgICAgICBpZiAocmVjdCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmVjdCA9IFV0aWxzLm1lcmdlUmVjdChVdGlscy5ib3VuZGluZ1JlY3RUb1JlY3QoYm91bmQpLCBVdGlscy5ib3VuZGluZ1JlY3RUb1JlY3QoYm91bmQpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlY3QgPSBVdGlscy5tZXJnZVJlY3QocmVjdCwgVXRpbHMuYm91bmRpbmdSZWN0VG9SZWN0KGJvdW5kKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIHJldHVybiByZWN0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIG1lcmdlRmllbGRzQkJveFxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI21lcmdlRmllbGRzQkJveFxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIEZpZWxkIExpc3TsnZggQkJveOuTpOydhCDtlZjrgpjroZwg7ZWp7Lmc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGZpZWxkcyBGaWVsZOydmCDrsLDsl7RcclxuICAgICAqIEByZXR1cm4ge09iamVjdH0ge2xlZnQ6IDAsIHJpZ2h0OiAwLCB0b3A6IDAsIHJpZ2h0OiAwfTog7Jes6riw7IScIOyCrOyaqe2VoCBSZWN0IE9iamVjdFxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgbWVyZ2VGaWVsZHNCQm94KGZpZWxkcykge1xyXG4gICAgICAgIGxldCByZWN0ID0gbnVsbDtcclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZHMubGVuZ3RoOyBpZHggKz0gMSkge1xyXG4gICAgICAgICAgICBsZXQgYm91bmQgPSBmaWVsZHNbaWR4XS5nZXRCQm94KCk7XHJcbiAgICAgICAgICAgIGlmIChyZWN0ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZWN0ID0gVXRpbHMubWVyZ2VSZWN0KFV0aWxzLmJvdW5kaW5nUmVjdFRvUmVjdChib3VuZCksIFV0aWxzLmJvdW5kaW5nUmVjdFRvUmVjdChib3VuZCkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVjdCA9IFV0aWxzLm1lcmdlUmVjdChyZWN0LCBVdGlscy5ib3VuZGluZ1JlY3RUb1JlY3QoYm91bmQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVjdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBpbWFnZUZpbGVUb0Jhc2U2NFxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2ltYWdlRmlsZVRvQmFzZTY0XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgSW1hZ2XtjIzsnbzsnYQg7J297Ja0IEJhc2U2NCBTdHJpbmfsnLzroZwg67CY7ZmY7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBmaWxlIEZpbGU6IOydtOuvuOyngCDtjIzsnbzsnZggRmlsZSBPYmplY3RcclxuICAgICAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNhbGxCYWNrRnVuYyAgQmFzZTY0IOusuOyekOyXtOydhCDrsJvsnYQgY2FsbGJhY2sgZnVuY3Rpb25cclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGltYWdlRmlsZVRvQmFzZTY0KGZpbGUsIGNhbGxCYWNrRnVuYykge1xyXG4gICAgICAgIGlmIChmaWxlID09PSB1bmRlZmluZWQgfHwgZmlsZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFmaWxlLnR5cGUuc3RhcnRzV2l0aCgnaW1hZ2UvJykpIHsgcmV0dXJuIG51bGw7IH1cclxuXHJcbiAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XHJcbiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY2FsbEJhY2tGdW5jKHJlYWRlci5yZXN1bHQpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yOiAnLCBlcnJvcik7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBjaGFuZ2VMb2NhbGVcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjaGFuZ2VMb2NhbGVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtmITsnqwg7Ja47Ja066W8IO2MjOudvOuvuO2EsOyXkCDrp57qsowg67OA7ZmY7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBsb2NhbGUg67CU6r+AIOyWuOyWtFxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY2hhbmdlTG9jYWxlKGxvY2FsZSkge1xyXG4gICAgICAgIFV0aWxzLmxvY2FsZSA9IGxvY2FsZTtcclxuICAgICAgICBVdGlscy50cmFuc2xhdG9yLnRyYW5zbGF0ZVBhZ2VUbyhsb2NhbGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIHRyYW5zbGF0ZUZvcktleVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI3RyYW5zbGF0ZUZvcktleVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2CpOyXkCDtlbTri7ntlZjripQg66y47J6Q7Je07J2EIO2YhOyerCDslrjslrTroZwg67CU6r6864ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXkg67CU6r+AIOusuOyekOyXtOyXkCDtlbTri7ntlZjripQg7YKkXHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyB0cmFuc2xhdGVGb3JLZXkoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIFV0aWxzLnRyYW5zbGF0b3IudHJhbnNsYXRlRm9yS2V5KGtleSwgVXRpbHMubG9jYWxlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiB0cmFuc2xhdG9yRmlsZUxvY2F0aW9uXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjdHJhbnNsYXRvckZpbGVMb2NhdGlvblxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIOuLpOq1reyWtCDslrjslrQg7YyM7J287J2YIOychOy5mOulvCDsp4DsoJXtlZzri6QuXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogbG9jYWxob3N0OjU1MDAvanMvcGRmX2Zvcm0vaTE4buydmCDqsr3smrAgIFwiL2pzL3BkZl9mb3JtL2kxOG5cIlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmlsZXNMb2NhdGlvbiDslrjslrTtjIzsnbzsnZgg7JyE7LmYKOygiOuMgCDqsr3roZwpXHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyB0cmFuc2xhdG9yRmlsZUxvY2F0aW9uKGZpbGVzTG9jYXRpb24pIHtcclxuICAgICAgICBVdGlscy50cmFuc2xhdG9yLmNvbmZpZy5maWxlc0xvY2F0aW9uID0gZmlsZXNMb2NhdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBhZGRUcmFuc2xhdG9yXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjYWRkVHJhbnNsYXRvclxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIOuLpOq1reyWtCDslrjslrTrpbwg7LaU6rCA7ZWc64ukLlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGFkZFRyYW5zbGF0b3IoXCJqcFwiLCBqc29uRGF0YSlcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGxvY2FsZSDslrjslrQg7J2066aEXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbGFuZ0RhdGEgaTE4bi9rby5qc29u6rO8IOqwmeydgCDslpHsi53snLzroZwg65CcIEpTT07snYQg7YyM7Iux7ZWcIOuNsOydtO2EsFxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYWRkVHJhbnNsYXRvcihsb2NhbGUsIGxhbmdEYXRhKSB7XHJcbiAgICAgICAgVXRpbHMudHJhbnNsYXRvci5hZGQobG9jYWxlLCBsYW5nRGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGFwcGVuZEZvbnRGYW1pbHkoZm9udEZhbWlseUFycikge1xyXG4gICAgICAgIFV0aWxzLmZvbnRGYW1pbHlDb21ib0JveCA9IFV0aWxzLmZvbnRGYW1pbHlDb21ib0JveC5jb25jYXQoZm9udEZhbWlseUFycik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdlbmVyYXRlX3V1aWR2NCgpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDE1KSArXHJcbiAgICAgICAgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDE1KTtcclxuICAgICB9XHJcbn1cclxuIiwiLypcbiAqIGFuaW1lLmpzIHYzLjIuMVxuICogKGMpIDIwMjAgSnVsaWFuIEdhcm5pZXJcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogYW5pbWVqcy5jb21cbiAqL1xuXG4vLyBEZWZhdWx0c1xuXG52YXIgZGVmYXVsdEluc3RhbmNlU2V0dGluZ3MgPSB7XG4gIHVwZGF0ZTogbnVsbCxcbiAgYmVnaW46IG51bGwsXG4gIGxvb3BCZWdpbjogbnVsbCxcbiAgY2hhbmdlQmVnaW46IG51bGwsXG4gIGNoYW5nZTogbnVsbCxcbiAgY2hhbmdlQ29tcGxldGU6IG51bGwsXG4gIGxvb3BDb21wbGV0ZTogbnVsbCxcbiAgY29tcGxldGU6IG51bGwsXG4gIGxvb3A6IDEsXG4gIGRpcmVjdGlvbjogJ25vcm1hbCcsXG4gIGF1dG9wbGF5OiB0cnVlLFxuICB0aW1lbGluZU9mZnNldDogMFxufTtcblxudmFyIGRlZmF1bHRUd2VlblNldHRpbmdzID0ge1xuICBkdXJhdGlvbjogMTAwMCxcbiAgZGVsYXk6IDAsXG4gIGVuZERlbGF5OiAwLFxuICBlYXNpbmc6ICdlYXNlT3V0RWxhc3RpYygxLCAuNSknLFxuICByb3VuZDogMFxufTtcblxudmFyIHZhbGlkVHJhbnNmb3JtcyA9IFsndHJhbnNsYXRlWCcsICd0cmFuc2xhdGVZJywgJ3RyYW5zbGF0ZVonLCAncm90YXRlJywgJ3JvdGF0ZVgnLCAncm90YXRlWScsICdyb3RhdGVaJywgJ3NjYWxlJywgJ3NjYWxlWCcsICdzY2FsZVknLCAnc2NhbGVaJywgJ3NrZXcnLCAnc2tld1gnLCAnc2tld1knLCAncGVyc3BlY3RpdmUnLCAnbWF0cml4JywgJ21hdHJpeDNkJ107XG5cbi8vIENhY2hpbmdcblxudmFyIGNhY2hlID0ge1xuICBDU1M6IHt9LFxuICBzcHJpbmdzOiB7fVxufTtcblxuLy8gVXRpbHNcblxuZnVuY3Rpb24gbWluTWF4KHZhbCwgbWluLCBtYXgpIHtcbiAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHZhbCwgbWluKSwgbWF4KTtcbn1cblxuZnVuY3Rpb24gc3RyaW5nQ29udGFpbnMoc3RyLCB0ZXh0KSB7XG4gIHJldHVybiBzdHIuaW5kZXhPZih0ZXh0KSA+IC0xO1xufVxuXG5mdW5jdGlvbiBhcHBseUFyZ3VtZW50cyhmdW5jLCBhcmdzKSB7XG4gIHJldHVybiBmdW5jLmFwcGx5KG51bGwsIGFyZ3MpO1xufVxuXG52YXIgaXMgPSB7XG4gIGFycjogZnVuY3Rpb24gKGEpIHsgcmV0dXJuIEFycmF5LmlzQXJyYXkoYSk7IH0sXG4gIG9iajogZnVuY3Rpb24gKGEpIHsgcmV0dXJuIHN0cmluZ0NvbnRhaW5zKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKSwgJ09iamVjdCcpOyB9LFxuICBwdGg6IGZ1bmN0aW9uIChhKSB7IHJldHVybiBpcy5vYmooYSkgJiYgYS5oYXNPd25Qcm9wZXJ0eSgndG90YWxMZW5ndGgnKTsgfSxcbiAgc3ZnOiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gYSBpbnN0YW5jZW9mIFNWR0VsZW1lbnQ7IH0sXG4gIGlucDogZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGEgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50OyB9LFxuICBkb206IGZ1bmN0aW9uIChhKSB7IHJldHVybiBhLm5vZGVUeXBlIHx8IGlzLnN2ZyhhKTsgfSxcbiAgc3RyOiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gdHlwZW9mIGEgPT09ICdzdHJpbmcnOyB9LFxuICBmbmM6IGZ1bmN0aW9uIChhKSB7IHJldHVybiB0eXBlb2YgYSA9PT0gJ2Z1bmN0aW9uJzsgfSxcbiAgdW5kOiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gdHlwZW9mIGEgPT09ICd1bmRlZmluZWQnOyB9LFxuICBuaWw6IGZ1bmN0aW9uIChhKSB7IHJldHVybiBpcy51bmQoYSkgfHwgYSA9PT0gbnVsbDsgfSxcbiAgaGV4OiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gLyheI1swLTlBLUZdezZ9JCl8KF4jWzAtOUEtRl17M30kKS9pLnRlc3QoYSk7IH0sXG4gIHJnYjogZnVuY3Rpb24gKGEpIHsgcmV0dXJuIC9ecmdiLy50ZXN0KGEpOyB9LFxuICBoc2w6IGZ1bmN0aW9uIChhKSB7IHJldHVybiAvXmhzbC8udGVzdChhKTsgfSxcbiAgY29sOiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gKGlzLmhleChhKSB8fCBpcy5yZ2IoYSkgfHwgaXMuaHNsKGEpKTsgfSxcbiAga2V5OiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gIWRlZmF1bHRJbnN0YW5jZVNldHRpbmdzLmhhc093blByb3BlcnR5KGEpICYmICFkZWZhdWx0VHdlZW5TZXR0aW5ncy5oYXNPd25Qcm9wZXJ0eShhKSAmJiBhICE9PSAndGFyZ2V0cycgJiYgYSAhPT0gJ2tleWZyYW1lcyc7IH0sXG59O1xuXG4vLyBFYXNpbmdzXG5cbmZ1bmN0aW9uIHBhcnNlRWFzaW5nUGFyYW1ldGVycyhzdHJpbmcpIHtcbiAgdmFyIG1hdGNoID0gL1xcKChbXildKylcXCkvLmV4ZWMoc3RyaW5nKTtcbiAgcmV0dXJuIG1hdGNoID8gbWF0Y2hbMV0uc3BsaXQoJywnKS5tYXAoZnVuY3Rpb24gKHApIHsgcmV0dXJuIHBhcnNlRmxvYXQocCk7IH0pIDogW107XG59XG5cbi8vIFNwcmluZyBzb2x2ZXIgaW5zcGlyZWQgYnkgV2Via2l0IENvcHlyaWdodCDCqSAyMDE2IEFwcGxlIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4gaHR0cHM6Ly93ZWJraXQub3JnL2RlbW9zL3NwcmluZy9zcHJpbmcuanNcblxuZnVuY3Rpb24gc3ByaW5nKHN0cmluZywgZHVyYXRpb24pIHtcblxuICB2YXIgcGFyYW1zID0gcGFyc2VFYXNpbmdQYXJhbWV0ZXJzKHN0cmluZyk7XG4gIHZhciBtYXNzID0gbWluTWF4KGlzLnVuZChwYXJhbXNbMF0pID8gMSA6IHBhcmFtc1swXSwgLjEsIDEwMCk7XG4gIHZhciBzdGlmZm5lc3MgPSBtaW5NYXgoaXMudW5kKHBhcmFtc1sxXSkgPyAxMDAgOiBwYXJhbXNbMV0sIC4xLCAxMDApO1xuICB2YXIgZGFtcGluZyA9IG1pbk1heChpcy51bmQocGFyYW1zWzJdKSA/IDEwIDogcGFyYW1zWzJdLCAuMSwgMTAwKTtcbiAgdmFyIHZlbG9jaXR5ID0gIG1pbk1heChpcy51bmQocGFyYW1zWzNdKSA/IDAgOiBwYXJhbXNbM10sIC4xLCAxMDApO1xuICB2YXIgdzAgPSBNYXRoLnNxcnQoc3RpZmZuZXNzIC8gbWFzcyk7XG4gIHZhciB6ZXRhID0gZGFtcGluZyAvICgyICogTWF0aC5zcXJ0KHN0aWZmbmVzcyAqIG1hc3MpKTtcbiAgdmFyIHdkID0gemV0YSA8IDEgPyB3MCAqIE1hdGguc3FydCgxIC0gemV0YSAqIHpldGEpIDogMDtcbiAgdmFyIGEgPSAxO1xuICB2YXIgYiA9IHpldGEgPCAxID8gKHpldGEgKiB3MCArIC12ZWxvY2l0eSkgLyB3ZCA6IC12ZWxvY2l0eSArIHcwO1xuXG4gIGZ1bmN0aW9uIHNvbHZlcih0KSB7XG4gICAgdmFyIHByb2dyZXNzID0gZHVyYXRpb24gPyAoZHVyYXRpb24gKiB0KSAvIDEwMDAgOiB0O1xuICAgIGlmICh6ZXRhIDwgMSkge1xuICAgICAgcHJvZ3Jlc3MgPSBNYXRoLmV4cCgtcHJvZ3Jlc3MgKiB6ZXRhICogdzApICogKGEgKiBNYXRoLmNvcyh3ZCAqIHByb2dyZXNzKSArIGIgKiBNYXRoLnNpbih3ZCAqIHByb2dyZXNzKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb2dyZXNzID0gKGEgKyBiICogcHJvZ3Jlc3MpICogTWF0aC5leHAoLXByb2dyZXNzICogdzApO1xuICAgIH1cbiAgICBpZiAodCA9PT0gMCB8fCB0ID09PSAxKSB7IHJldHVybiB0OyB9XG4gICAgcmV0dXJuIDEgLSBwcm9ncmVzcztcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldER1cmF0aW9uKCkge1xuICAgIHZhciBjYWNoZWQgPSBjYWNoZS5zcHJpbmdzW3N0cmluZ107XG4gICAgaWYgKGNhY2hlZCkgeyByZXR1cm4gY2FjaGVkOyB9XG4gICAgdmFyIGZyYW1lID0gMS82O1xuICAgIHZhciBlbGFwc2VkID0gMDtcbiAgICB2YXIgcmVzdCA9IDA7XG4gICAgd2hpbGUodHJ1ZSkge1xuICAgICAgZWxhcHNlZCArPSBmcmFtZTtcbiAgICAgIGlmIChzb2x2ZXIoZWxhcHNlZCkgPT09IDEpIHtcbiAgICAgICAgcmVzdCsrO1xuICAgICAgICBpZiAocmVzdCA+PSAxNikgeyBicmVhazsgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdCA9IDA7XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBkdXJhdGlvbiA9IGVsYXBzZWQgKiBmcmFtZSAqIDEwMDA7XG4gICAgY2FjaGUuc3ByaW5nc1tzdHJpbmddID0gZHVyYXRpb247XG4gICAgcmV0dXJuIGR1cmF0aW9uO1xuICB9XG5cbiAgcmV0dXJuIGR1cmF0aW9uID8gc29sdmVyIDogZ2V0RHVyYXRpb247XG5cbn1cblxuLy8gQmFzaWMgc3RlcHMgZWFzaW5nIGltcGxlbWVudGF0aW9uIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2ZyL2RvY3MvV2ViL0NTUy90cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvblxuXG5mdW5jdGlvbiBzdGVwcyhzdGVwcykge1xuICBpZiAoIHN0ZXBzID09PSB2b2lkIDAgKSBzdGVwcyA9IDEwO1xuXG4gIHJldHVybiBmdW5jdGlvbiAodCkgeyByZXR1cm4gTWF0aC5jZWlsKChtaW5NYXgodCwgMC4wMDAwMDEsIDEpKSAqIHN0ZXBzKSAqICgxIC8gc3RlcHMpOyB9O1xufVxuXG4vLyBCZXppZXJFYXNpbmcgaHR0cHM6Ly9naXRodWIuY29tL2dyZS9iZXppZXItZWFzaW5nXG5cbnZhciBiZXppZXIgPSAoZnVuY3Rpb24gKCkge1xuXG4gIHZhciBrU3BsaW5lVGFibGVTaXplID0gMTE7XG4gIHZhciBrU2FtcGxlU3RlcFNpemUgPSAxLjAgLyAoa1NwbGluZVRhYmxlU2l6ZSAtIDEuMCk7XG5cbiAgZnVuY3Rpb24gQShhQTEsIGFBMikgeyByZXR1cm4gMS4wIC0gMy4wICogYUEyICsgMy4wICogYUExIH1cbiAgZnVuY3Rpb24gQihhQTEsIGFBMikgeyByZXR1cm4gMy4wICogYUEyIC0gNi4wICogYUExIH1cbiAgZnVuY3Rpb24gQyhhQTEpICAgICAgeyByZXR1cm4gMy4wICogYUExIH1cblxuICBmdW5jdGlvbiBjYWxjQmV6aWVyKGFULCBhQTEsIGFBMikgeyByZXR1cm4gKChBKGFBMSwgYUEyKSAqIGFUICsgQihhQTEsIGFBMikpICogYVQgKyBDKGFBMSkpICogYVQgfVxuICBmdW5jdGlvbiBnZXRTbG9wZShhVCwgYUExLCBhQTIpIHsgcmV0dXJuIDMuMCAqIEEoYUExLCBhQTIpICogYVQgKiBhVCArIDIuMCAqIEIoYUExLCBhQTIpICogYVQgKyBDKGFBMSkgfVxuXG4gIGZ1bmN0aW9uIGJpbmFyeVN1YmRpdmlkZShhWCwgYUEsIGFCLCBtWDEsIG1YMikge1xuICAgIHZhciBjdXJyZW50WCwgY3VycmVudFQsIGkgPSAwO1xuICAgIGRvIHtcbiAgICAgIGN1cnJlbnRUID0gYUEgKyAoYUIgLSBhQSkgLyAyLjA7XG4gICAgICBjdXJyZW50WCA9IGNhbGNCZXppZXIoY3VycmVudFQsIG1YMSwgbVgyKSAtIGFYO1xuICAgICAgaWYgKGN1cnJlbnRYID4gMC4wKSB7IGFCID0gY3VycmVudFQ7IH0gZWxzZSB7IGFBID0gY3VycmVudFQ7IH1cbiAgICB9IHdoaWxlIChNYXRoLmFicyhjdXJyZW50WCkgPiAwLjAwMDAwMDEgJiYgKytpIDwgMTApO1xuICAgIHJldHVybiBjdXJyZW50VDtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5ld3RvblJhcGhzb25JdGVyYXRlKGFYLCBhR3Vlc3NULCBtWDEsIG1YMikge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNDsgKytpKSB7XG4gICAgICB2YXIgY3VycmVudFNsb3BlID0gZ2V0U2xvcGUoYUd1ZXNzVCwgbVgxLCBtWDIpO1xuICAgICAgaWYgKGN1cnJlbnRTbG9wZSA9PT0gMC4wKSB7IHJldHVybiBhR3Vlc3NUOyB9XG4gICAgICB2YXIgY3VycmVudFggPSBjYWxjQmV6aWVyKGFHdWVzc1QsIG1YMSwgbVgyKSAtIGFYO1xuICAgICAgYUd1ZXNzVCAtPSBjdXJyZW50WCAvIGN1cnJlbnRTbG9wZTtcbiAgICB9XG4gICAgcmV0dXJuIGFHdWVzc1Q7XG4gIH1cblxuICBmdW5jdGlvbiBiZXppZXIobVgxLCBtWTEsIG1YMiwgbVkyKSB7XG5cbiAgICBpZiAoISgwIDw9IG1YMSAmJiBtWDEgPD0gMSAmJiAwIDw9IG1YMiAmJiBtWDIgPD0gMSkpIHsgcmV0dXJuOyB9XG4gICAgdmFyIHNhbXBsZVZhbHVlcyA9IG5ldyBGbG9hdDMyQXJyYXkoa1NwbGluZVRhYmxlU2l6ZSk7XG5cbiAgICBpZiAobVgxICE9PSBtWTEgfHwgbVgyICE9PSBtWTIpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga1NwbGluZVRhYmxlU2l6ZTsgKytpKSB7XG4gICAgICAgIHNhbXBsZVZhbHVlc1tpXSA9IGNhbGNCZXppZXIoaSAqIGtTYW1wbGVTdGVwU2l6ZSwgbVgxLCBtWDIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFRGb3JYKGFYKSB7XG5cbiAgICAgIHZhciBpbnRlcnZhbFN0YXJ0ID0gMDtcbiAgICAgIHZhciBjdXJyZW50U2FtcGxlID0gMTtcbiAgICAgIHZhciBsYXN0U2FtcGxlID0ga1NwbGluZVRhYmxlU2l6ZSAtIDE7XG5cbiAgICAgIGZvciAoOyBjdXJyZW50U2FtcGxlICE9PSBsYXN0U2FtcGxlICYmIHNhbXBsZVZhbHVlc1tjdXJyZW50U2FtcGxlXSA8PSBhWDsgKytjdXJyZW50U2FtcGxlKSB7XG4gICAgICAgIGludGVydmFsU3RhcnQgKz0ga1NhbXBsZVN0ZXBTaXplO1xuICAgICAgfVxuXG4gICAgICAtLWN1cnJlbnRTYW1wbGU7XG5cbiAgICAgIHZhciBkaXN0ID0gKGFYIC0gc2FtcGxlVmFsdWVzW2N1cnJlbnRTYW1wbGVdKSAvIChzYW1wbGVWYWx1ZXNbY3VycmVudFNhbXBsZSArIDFdIC0gc2FtcGxlVmFsdWVzW2N1cnJlbnRTYW1wbGVdKTtcbiAgICAgIHZhciBndWVzc0ZvclQgPSBpbnRlcnZhbFN0YXJ0ICsgZGlzdCAqIGtTYW1wbGVTdGVwU2l6ZTtcbiAgICAgIHZhciBpbml0aWFsU2xvcGUgPSBnZXRTbG9wZShndWVzc0ZvclQsIG1YMSwgbVgyKTtcblxuICAgICAgaWYgKGluaXRpYWxTbG9wZSA+PSAwLjAwMSkge1xuICAgICAgICByZXR1cm4gbmV3dG9uUmFwaHNvbkl0ZXJhdGUoYVgsIGd1ZXNzRm9yVCwgbVgxLCBtWDIpO1xuICAgICAgfSBlbHNlIGlmIChpbml0aWFsU2xvcGUgPT09IDAuMCkge1xuICAgICAgICByZXR1cm4gZ3Vlc3NGb3JUO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGJpbmFyeVN1YmRpdmlkZShhWCwgaW50ZXJ2YWxTdGFydCwgaW50ZXJ2YWxTdGFydCArIGtTYW1wbGVTdGVwU2l6ZSwgbVgxLCBtWDIpO1xuICAgICAgfVxuXG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh4KSB7XG4gICAgICBpZiAobVgxID09PSBtWTEgJiYgbVgyID09PSBtWTIpIHsgcmV0dXJuIHg7IH1cbiAgICAgIGlmICh4ID09PSAwIHx8IHggPT09IDEpIHsgcmV0dXJuIHg7IH1cbiAgICAgIHJldHVybiBjYWxjQmV6aWVyKGdldFRGb3JYKHgpLCBtWTEsIG1ZMik7XG4gICAgfVxuXG4gIH1cblxuICByZXR1cm4gYmV6aWVyO1xuXG59KSgpO1xuXG52YXIgcGVubmVyID0gKGZ1bmN0aW9uICgpIHtcblxuICAvLyBCYXNlZCBvbiBqUXVlcnkgVUkncyBpbXBsZW1lbmF0aW9uIG9mIGVhc2luZyBlcXVhdGlvbnMgZnJvbSBSb2JlcnQgUGVubmVyIChodHRwOi8vd3d3LnJvYmVydHBlbm5lci5jb20vZWFzaW5nKVxuXG4gIHZhciBlYXNlcyA9IHsgbGluZWFyOiBmdW5jdGlvbiAoKSB7IHJldHVybiBmdW5jdGlvbiAodCkgeyByZXR1cm4gdDsgfTsgfSB9O1xuXG4gIHZhciBmdW5jdGlvbkVhc2luZ3MgPSB7XG4gICAgU2luZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gZnVuY3Rpb24gKHQpIHsgcmV0dXJuIDEgLSBNYXRoLmNvcyh0ICogTWF0aC5QSSAvIDIpOyB9OyB9LFxuICAgIENpcmM6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZ1bmN0aW9uICh0KSB7IHJldHVybiAxIC0gTWF0aC5zcXJ0KDEgLSB0ICogdCk7IH07IH0sXG4gICAgQmFjazogZnVuY3Rpb24gKCkgeyByZXR1cm4gZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHQgKiB0ICogKDMgKiB0IC0gMik7IH07IH0sXG4gICAgQm91bmNlOiBmdW5jdGlvbiAoKSB7IHJldHVybiBmdW5jdGlvbiAodCkge1xuICAgICAgdmFyIHBvdzIsIGIgPSA0O1xuICAgICAgd2hpbGUgKHQgPCAoKCBwb3cyID0gTWF0aC5wb3coMiwgLS1iKSkgLSAxKSAvIDExKSB7fVxuICAgICAgcmV0dXJuIDEgLyBNYXRoLnBvdyg0LCAzIC0gYikgLSA3LjU2MjUgKiBNYXRoLnBvdygoIHBvdzIgKiAzIC0gMiApIC8gMjIgLSB0LCAyKVxuICAgIH07IH0sXG4gICAgRWxhc3RpYzogZnVuY3Rpb24gKGFtcGxpdHVkZSwgcGVyaW9kKSB7XG4gICAgICBpZiAoIGFtcGxpdHVkZSA9PT0gdm9pZCAwICkgYW1wbGl0dWRlID0gMTtcbiAgICAgIGlmICggcGVyaW9kID09PSB2b2lkIDAgKSBwZXJpb2QgPSAuNTtcblxuICAgICAgdmFyIGEgPSBtaW5NYXgoYW1wbGl0dWRlLCAxLCAxMCk7XG4gICAgICB2YXIgcCA9IG1pbk1heChwZXJpb2QsIC4xLCAyKTtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAodCkge1xuICAgICAgICByZXR1cm4gKHQgPT09IDAgfHwgdCA9PT0gMSkgPyB0IDogXG4gICAgICAgICAgLWEgKiBNYXRoLnBvdygyLCAxMCAqICh0IC0gMSkpICogTWF0aC5zaW4oKCgodCAtIDEpIC0gKHAgLyAoTWF0aC5QSSAqIDIpICogTWF0aC5hc2luKDEgLyBhKSkpICogKE1hdGguUEkgKiAyKSkgLyBwKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgdmFyIGJhc2VFYXNpbmdzID0gWydRdWFkJywgJ0N1YmljJywgJ1F1YXJ0JywgJ1F1aW50JywgJ0V4cG8nXTtcblxuICBiYXNlRWFzaW5ncy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lLCBpKSB7XG4gICAgZnVuY3Rpb25FYXNpbmdzW25hbWVdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZnVuY3Rpb24gKHQpIHsgcmV0dXJuIE1hdGgucG93KHQsIGkgKyAyKTsgfTsgfTtcbiAgfSk7XG5cbiAgT2JqZWN0LmtleXMoZnVuY3Rpb25FYXNpbmdzKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdmFyIGVhc2VJbiA9IGZ1bmN0aW9uRWFzaW5nc1tuYW1lXTtcbiAgICBlYXNlc1snZWFzZUluJyArIG5hbWVdID0gZWFzZUluO1xuICAgIGVhc2VzWydlYXNlT3V0JyArIG5hbWVdID0gZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGZ1bmN0aW9uICh0KSB7IHJldHVybiAxIC0gZWFzZUluKGEsIGIpKDEgLSB0KTsgfTsgfTtcbiAgICBlYXNlc1snZWFzZUluT3V0JyArIG5hbWVdID0gZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGZ1bmN0aW9uICh0KSB7IHJldHVybiB0IDwgMC41ID8gZWFzZUluKGEsIGIpKHQgKiAyKSAvIDIgOiBcbiAgICAgIDEgLSBlYXNlSW4oYSwgYikodCAqIC0yICsgMikgLyAyOyB9OyB9O1xuICAgIGVhc2VzWydlYXNlT3V0SW4nICsgbmFtZV0gPSBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHQgPCAwLjUgPyAoMSAtIGVhc2VJbihhLCBiKSgxIC0gdCAqIDIpKSAvIDIgOiBcbiAgICAgIChlYXNlSW4oYSwgYikodCAqIDIgLSAxKSArIDEpIC8gMjsgfTsgfTtcbiAgfSk7XG5cbiAgcmV0dXJuIGVhc2VzO1xuXG59KSgpO1xuXG5mdW5jdGlvbiBwYXJzZUVhc2luZ3MoZWFzaW5nLCBkdXJhdGlvbikge1xuICBpZiAoaXMuZm5jKGVhc2luZykpIHsgcmV0dXJuIGVhc2luZzsgfVxuICB2YXIgbmFtZSA9IGVhc2luZy5zcGxpdCgnKCcpWzBdO1xuICB2YXIgZWFzZSA9IHBlbm5lcltuYW1lXTtcbiAgdmFyIGFyZ3MgPSBwYXJzZUVhc2luZ1BhcmFtZXRlcnMoZWFzaW5nKTtcbiAgc3dpdGNoIChuYW1lKSB7XG4gICAgY2FzZSAnc3ByaW5nJyA6IHJldHVybiBzcHJpbmcoZWFzaW5nLCBkdXJhdGlvbik7XG4gICAgY2FzZSAnY3ViaWNCZXppZXInIDogcmV0dXJuIGFwcGx5QXJndW1lbnRzKGJlemllciwgYXJncyk7XG4gICAgY2FzZSAnc3RlcHMnIDogcmV0dXJuIGFwcGx5QXJndW1lbnRzKHN0ZXBzLCBhcmdzKTtcbiAgICBkZWZhdWx0IDogcmV0dXJuIGFwcGx5QXJndW1lbnRzKGVhc2UsIGFyZ3MpO1xuICB9XG59XG5cbi8vIFN0cmluZ3NcblxuZnVuY3Rpb24gc2VsZWN0U3RyaW5nKHN0cikge1xuICB0cnkge1xuICAgIHZhciBub2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc3RyKTtcbiAgICByZXR1cm4gbm9kZXM7XG4gIH0gY2F0Y2goZSkge1xuICAgIHJldHVybjtcbiAgfVxufVxuXG4vLyBBcnJheXNcblxuZnVuY3Rpb24gZmlsdGVyQXJyYXkoYXJyLCBjYWxsYmFjaykge1xuICB2YXIgbGVuID0gYXJyLmxlbmd0aDtcbiAgdmFyIHRoaXNBcmcgPSBhcmd1bWVudHMubGVuZ3RoID49IDIgPyBhcmd1bWVudHNbMV0gOiB2b2lkIDA7XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGlmIChpIGluIGFycikge1xuICAgICAgdmFyIHZhbCA9IGFycltpXTtcbiAgICAgIGlmIChjYWxsYmFjay5jYWxsKHRoaXNBcmcsIHZhbCwgaSwgYXJyKSkge1xuICAgICAgICByZXN1bHQucHVzaCh2YWwpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBmbGF0dGVuQXJyYXkoYXJyKSB7XG4gIHJldHVybiBhcnIucmVkdWNlKGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhLmNvbmNhdChpcy5hcnIoYikgPyBmbGF0dGVuQXJyYXkoYikgOiBiKTsgfSwgW10pO1xufVxuXG5mdW5jdGlvbiB0b0FycmF5KG8pIHtcbiAgaWYgKGlzLmFycihvKSkgeyByZXR1cm4gbzsgfVxuICBpZiAoaXMuc3RyKG8pKSB7IG8gPSBzZWxlY3RTdHJpbmcobykgfHwgbzsgfVxuICBpZiAobyBpbnN0YW5jZW9mIE5vZGVMaXN0IHx8IG8gaW5zdGFuY2VvZiBIVE1MQ29sbGVjdGlvbikgeyByZXR1cm4gW10uc2xpY2UuY2FsbChvKTsgfVxuICByZXR1cm4gW29dO1xufVxuXG5mdW5jdGlvbiBhcnJheUNvbnRhaW5zKGFyciwgdmFsKSB7XG4gIHJldHVybiBhcnIuc29tZShmdW5jdGlvbiAoYSkgeyByZXR1cm4gYSA9PT0gdmFsOyB9KTtcbn1cblxuLy8gT2JqZWN0c1xuXG5mdW5jdGlvbiBjbG9uZU9iamVjdChvKSB7XG4gIHZhciBjbG9uZSA9IHt9O1xuICBmb3IgKHZhciBwIGluIG8pIHsgY2xvbmVbcF0gPSBvW3BdOyB9XG4gIHJldHVybiBjbG9uZTtcbn1cblxuZnVuY3Rpb24gcmVwbGFjZU9iamVjdFByb3BzKG8xLCBvMikge1xuICB2YXIgbyA9IGNsb25lT2JqZWN0KG8xKTtcbiAgZm9yICh2YXIgcCBpbiBvMSkgeyBvW3BdID0gbzIuaGFzT3duUHJvcGVydHkocCkgPyBvMltwXSA6IG8xW3BdOyB9XG4gIHJldHVybiBvO1xufVxuXG5mdW5jdGlvbiBtZXJnZU9iamVjdHMobzEsIG8yKSB7XG4gIHZhciBvID0gY2xvbmVPYmplY3QobzEpO1xuICBmb3IgKHZhciBwIGluIG8yKSB7IG9bcF0gPSBpcy51bmQobzFbcF0pID8gbzJbcF0gOiBvMVtwXTsgfVxuICByZXR1cm4gbztcbn1cblxuLy8gQ29sb3JzXG5cbmZ1bmN0aW9uIHJnYlRvUmdiYShyZ2JWYWx1ZSkge1xuICB2YXIgcmdiID0gL3JnYlxcKChcXGQrLFxccypbXFxkXSssXFxzKltcXGRdKylcXCkvZy5leGVjKHJnYlZhbHVlKTtcbiAgcmV0dXJuIHJnYiA/IChcInJnYmEoXCIgKyAocmdiWzFdKSArIFwiLDEpXCIpIDogcmdiVmFsdWU7XG59XG5cbmZ1bmN0aW9uIGhleFRvUmdiYShoZXhWYWx1ZSkge1xuICB2YXIgcmd4ID0gL14jPyhbYS1mXFxkXSkoW2EtZlxcZF0pKFthLWZcXGRdKSQvaTtcbiAgdmFyIGhleCA9IGhleFZhbHVlLnJlcGxhY2Uocmd4LCBmdW5jdGlvbiAobSwgciwgZywgYikgeyByZXR1cm4gciArIHIgKyBnICsgZyArIGIgKyBiOyB9ICk7XG4gIHZhciByZ2IgPSAvXiM/KFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pJC9pLmV4ZWMoaGV4KTtcbiAgdmFyIHIgPSBwYXJzZUludChyZ2JbMV0sIDE2KTtcbiAgdmFyIGcgPSBwYXJzZUludChyZ2JbMl0sIDE2KTtcbiAgdmFyIGIgPSBwYXJzZUludChyZ2JbM10sIDE2KTtcbiAgcmV0dXJuIChcInJnYmEoXCIgKyByICsgXCIsXCIgKyBnICsgXCIsXCIgKyBiICsgXCIsMSlcIik7XG59XG5cbmZ1bmN0aW9uIGhzbFRvUmdiYShoc2xWYWx1ZSkge1xuICB2YXIgaHNsID0gL2hzbFxcKChcXGQrKSxcXHMqKFtcXGQuXSspJSxcXHMqKFtcXGQuXSspJVxcKS9nLmV4ZWMoaHNsVmFsdWUpIHx8IC9oc2xhXFwoKFxcZCspLFxccyooW1xcZC5dKyklLFxccyooW1xcZC5dKyklLFxccyooW1xcZC5dKylcXCkvZy5leGVjKGhzbFZhbHVlKTtcbiAgdmFyIGggPSBwYXJzZUludChoc2xbMV0sIDEwKSAvIDM2MDtcbiAgdmFyIHMgPSBwYXJzZUludChoc2xbMl0sIDEwKSAvIDEwMDtcbiAgdmFyIGwgPSBwYXJzZUludChoc2xbM10sIDEwKSAvIDEwMDtcbiAgdmFyIGEgPSBoc2xbNF0gfHwgMTtcbiAgZnVuY3Rpb24gaHVlMnJnYihwLCBxLCB0KSB7XG4gICAgaWYgKHQgPCAwKSB7IHQgKz0gMTsgfVxuICAgIGlmICh0ID4gMSkgeyB0IC09IDE7IH1cbiAgICBpZiAodCA8IDEvNikgeyByZXR1cm4gcCArIChxIC0gcCkgKiA2ICogdDsgfVxuICAgIGlmICh0IDwgMS8yKSB7IHJldHVybiBxOyB9XG4gICAgaWYgKHQgPCAyLzMpIHsgcmV0dXJuIHAgKyAocSAtIHApICogKDIvMyAtIHQpICogNjsgfVxuICAgIHJldHVybiBwO1xuICB9XG4gIHZhciByLCBnLCBiO1xuICBpZiAocyA9PSAwKSB7XG4gICAgciA9IGcgPSBiID0gbDtcbiAgfSBlbHNlIHtcbiAgICB2YXIgcSA9IGwgPCAwLjUgPyBsICogKDEgKyBzKSA6IGwgKyBzIC0gbCAqIHM7XG4gICAgdmFyIHAgPSAyICogbCAtIHE7XG4gICAgciA9IGh1ZTJyZ2IocCwgcSwgaCArIDEvMyk7XG4gICAgZyA9IGh1ZTJyZ2IocCwgcSwgaCk7XG4gICAgYiA9IGh1ZTJyZ2IocCwgcSwgaCAtIDEvMyk7XG4gIH1cbiAgcmV0dXJuIChcInJnYmEoXCIgKyAociAqIDI1NSkgKyBcIixcIiArIChnICogMjU1KSArIFwiLFwiICsgKGIgKiAyNTUpICsgXCIsXCIgKyBhICsgXCIpXCIpO1xufVxuXG5mdW5jdGlvbiBjb2xvclRvUmdiKHZhbCkge1xuICBpZiAoaXMucmdiKHZhbCkpIHsgcmV0dXJuIHJnYlRvUmdiYSh2YWwpOyB9XG4gIGlmIChpcy5oZXgodmFsKSkgeyByZXR1cm4gaGV4VG9SZ2JhKHZhbCk7IH1cbiAgaWYgKGlzLmhzbCh2YWwpKSB7IHJldHVybiBoc2xUb1JnYmEodmFsKTsgfVxufVxuXG4vLyBVbml0c1xuXG5mdW5jdGlvbiBnZXRVbml0KHZhbCkge1xuICB2YXIgc3BsaXQgPSAvWystXT9cXGQqXFwuP1xcZCsoPzpcXC5cXGQrKT8oPzpbZUVdWystXT9cXGQrKT8oJXxweHxwdHxlbXxyZW18aW58Y218bW18ZXh8Y2h8cGN8dnd8dmh8dm1pbnx2bWF4fGRlZ3xyYWR8dHVybik/JC8uZXhlYyh2YWwpO1xuICBpZiAoc3BsaXQpIHsgcmV0dXJuIHNwbGl0WzFdOyB9XG59XG5cbmZ1bmN0aW9uIGdldFRyYW5zZm9ybVVuaXQocHJvcE5hbWUpIHtcbiAgaWYgKHN0cmluZ0NvbnRhaW5zKHByb3BOYW1lLCAndHJhbnNsYXRlJykgfHwgcHJvcE5hbWUgPT09ICdwZXJzcGVjdGl2ZScpIHsgcmV0dXJuICdweCc7IH1cbiAgaWYgKHN0cmluZ0NvbnRhaW5zKHByb3BOYW1lLCAncm90YXRlJykgfHwgc3RyaW5nQ29udGFpbnMocHJvcE5hbWUsICdza2V3JykpIHsgcmV0dXJuICdkZWcnOyB9XG59XG5cbi8vIFZhbHVlc1xuXG5mdW5jdGlvbiBnZXRGdW5jdGlvblZhbHVlKHZhbCwgYW5pbWF0YWJsZSkge1xuICBpZiAoIWlzLmZuYyh2YWwpKSB7IHJldHVybiB2YWw7IH1cbiAgcmV0dXJuIHZhbChhbmltYXRhYmxlLnRhcmdldCwgYW5pbWF0YWJsZS5pZCwgYW5pbWF0YWJsZS50b3RhbCk7XG59XG5cbmZ1bmN0aW9uIGdldEF0dHJpYnV0ZShlbCwgcHJvcCkge1xuICByZXR1cm4gZWwuZ2V0QXR0cmlidXRlKHByb3ApO1xufVxuXG5mdW5jdGlvbiBjb252ZXJ0UHhUb1VuaXQoZWwsIHZhbHVlLCB1bml0KSB7XG4gIHZhciB2YWx1ZVVuaXQgPSBnZXRVbml0KHZhbHVlKTtcbiAgaWYgKGFycmF5Q29udGFpbnMoW3VuaXQsICdkZWcnLCAncmFkJywgJ3R1cm4nXSwgdmFsdWVVbml0KSkgeyByZXR1cm4gdmFsdWU7IH1cbiAgdmFyIGNhY2hlZCA9IGNhY2hlLkNTU1t2YWx1ZSArIHVuaXRdO1xuICBpZiAoIWlzLnVuZChjYWNoZWQpKSB7IHJldHVybiBjYWNoZWQ7IH1cbiAgdmFyIGJhc2VsaW5lID0gMTAwO1xuICB2YXIgdGVtcEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlbC50YWdOYW1lKTtcbiAgdmFyIHBhcmVudEVsID0gKGVsLnBhcmVudE5vZGUgJiYgKGVsLnBhcmVudE5vZGUgIT09IGRvY3VtZW50KSkgPyBlbC5wYXJlbnROb2RlIDogZG9jdW1lbnQuYm9keTtcbiAgcGFyZW50RWwuYXBwZW5kQ2hpbGQodGVtcEVsKTtcbiAgdGVtcEVsLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgdGVtcEVsLnN0eWxlLndpZHRoID0gYmFzZWxpbmUgKyB1bml0O1xuICB2YXIgZmFjdG9yID0gYmFzZWxpbmUgLyB0ZW1wRWwub2Zmc2V0V2lkdGg7XG4gIHBhcmVudEVsLnJlbW92ZUNoaWxkKHRlbXBFbCk7XG4gIHZhciBjb252ZXJ0ZWRVbml0ID0gZmFjdG9yICogcGFyc2VGbG9hdCh2YWx1ZSk7XG4gIGNhY2hlLkNTU1t2YWx1ZSArIHVuaXRdID0gY29udmVydGVkVW5pdDtcbiAgcmV0dXJuIGNvbnZlcnRlZFVuaXQ7XG59XG5cbmZ1bmN0aW9uIGdldENTU1ZhbHVlKGVsLCBwcm9wLCB1bml0KSB7XG4gIGlmIChwcm9wIGluIGVsLnN0eWxlKSB7XG4gICAgdmFyIHVwcGVyY2FzZVByb3BOYW1lID0gcHJvcC5yZXBsYWNlKC8oW2Etel0pKFtBLVpdKS9nLCAnJDEtJDInKS50b0xvd2VyQ2FzZSgpO1xuICAgIHZhciB2YWx1ZSA9IGVsLnN0eWxlW3Byb3BdIHx8IGdldENvbXB1dGVkU3R5bGUoZWwpLmdldFByb3BlcnR5VmFsdWUodXBwZXJjYXNlUHJvcE5hbWUpIHx8ICcwJztcbiAgICByZXR1cm4gdW5pdCA/IGNvbnZlcnRQeFRvVW5pdChlbCwgdmFsdWUsIHVuaXQpIDogdmFsdWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0QW5pbWF0aW9uVHlwZShlbCwgcHJvcCkge1xuICBpZiAoaXMuZG9tKGVsKSAmJiAhaXMuaW5wKGVsKSAmJiAoIWlzLm5pbChnZXRBdHRyaWJ1dGUoZWwsIHByb3ApKSB8fCAoaXMuc3ZnKGVsKSAmJiBlbFtwcm9wXSkpKSB7IHJldHVybiAnYXR0cmlidXRlJzsgfVxuICBpZiAoaXMuZG9tKGVsKSAmJiBhcnJheUNvbnRhaW5zKHZhbGlkVHJhbnNmb3JtcywgcHJvcCkpIHsgcmV0dXJuICd0cmFuc2Zvcm0nOyB9XG4gIGlmIChpcy5kb20oZWwpICYmIChwcm9wICE9PSAndHJhbnNmb3JtJyAmJiBnZXRDU1NWYWx1ZShlbCwgcHJvcCkpKSB7IHJldHVybiAnY3NzJzsgfVxuICBpZiAoZWxbcHJvcF0gIT0gbnVsbCkgeyByZXR1cm4gJ29iamVjdCc7IH1cbn1cblxuZnVuY3Rpb24gZ2V0RWxlbWVudFRyYW5zZm9ybXMoZWwpIHtcbiAgaWYgKCFpcy5kb20oZWwpKSB7IHJldHVybjsgfVxuICB2YXIgc3RyID0gZWwuc3R5bGUudHJhbnNmb3JtIHx8ICcnO1xuICB2YXIgcmVnICA9IC8oXFx3KylcXCgoW14pXSopXFwpL2c7XG4gIHZhciB0cmFuc2Zvcm1zID0gbmV3IE1hcCgpO1xuICB2YXIgbTsgd2hpbGUgKG0gPSByZWcuZXhlYyhzdHIpKSB7IHRyYW5zZm9ybXMuc2V0KG1bMV0sIG1bMl0pOyB9XG4gIHJldHVybiB0cmFuc2Zvcm1zO1xufVxuXG5mdW5jdGlvbiBnZXRUcmFuc2Zvcm1WYWx1ZShlbCwgcHJvcE5hbWUsIGFuaW1hdGFibGUsIHVuaXQpIHtcbiAgdmFyIGRlZmF1bHRWYWwgPSBzdHJpbmdDb250YWlucyhwcm9wTmFtZSwgJ3NjYWxlJykgPyAxIDogMCArIGdldFRyYW5zZm9ybVVuaXQocHJvcE5hbWUpO1xuICB2YXIgdmFsdWUgPSBnZXRFbGVtZW50VHJhbnNmb3JtcyhlbCkuZ2V0KHByb3BOYW1lKSB8fCBkZWZhdWx0VmFsO1xuICBpZiAoYW5pbWF0YWJsZSkge1xuICAgIGFuaW1hdGFibGUudHJhbnNmb3Jtcy5saXN0LnNldChwcm9wTmFtZSwgdmFsdWUpO1xuICAgIGFuaW1hdGFibGUudHJhbnNmb3Jtc1snbGFzdCddID0gcHJvcE5hbWU7XG4gIH1cbiAgcmV0dXJuIHVuaXQgPyBjb252ZXJ0UHhUb1VuaXQoZWwsIHZhbHVlLCB1bml0KSA6IHZhbHVlO1xufVxuXG5mdW5jdGlvbiBnZXRPcmlnaW5hbFRhcmdldFZhbHVlKHRhcmdldCwgcHJvcE5hbWUsIHVuaXQsIGFuaW1hdGFibGUpIHtcbiAgc3dpdGNoIChnZXRBbmltYXRpb25UeXBlKHRhcmdldCwgcHJvcE5hbWUpKSB7XG4gICAgY2FzZSAndHJhbnNmb3JtJzogcmV0dXJuIGdldFRyYW5zZm9ybVZhbHVlKHRhcmdldCwgcHJvcE5hbWUsIGFuaW1hdGFibGUsIHVuaXQpO1xuICAgIGNhc2UgJ2Nzcyc6IHJldHVybiBnZXRDU1NWYWx1ZSh0YXJnZXQsIHByb3BOYW1lLCB1bml0KTtcbiAgICBjYXNlICdhdHRyaWJ1dGUnOiByZXR1cm4gZ2V0QXR0cmlidXRlKHRhcmdldCwgcHJvcE5hbWUpO1xuICAgIGRlZmF1bHQ6IHJldHVybiB0YXJnZXRbcHJvcE5hbWVdIHx8IDA7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0UmVsYXRpdmVWYWx1ZSh0bywgZnJvbSkge1xuICB2YXIgb3BlcmF0b3IgPSAvXihcXCo9fFxcKz18LT0pLy5leGVjKHRvKTtcbiAgaWYgKCFvcGVyYXRvcikgeyByZXR1cm4gdG87IH1cbiAgdmFyIHUgPSBnZXRVbml0KHRvKSB8fCAwO1xuICB2YXIgeCA9IHBhcnNlRmxvYXQoZnJvbSk7XG4gIHZhciB5ID0gcGFyc2VGbG9hdCh0by5yZXBsYWNlKG9wZXJhdG9yWzBdLCAnJykpO1xuICBzd2l0Y2ggKG9wZXJhdG9yWzBdWzBdKSB7XG4gICAgY2FzZSAnKyc6IHJldHVybiB4ICsgeSArIHU7XG4gICAgY2FzZSAnLSc6IHJldHVybiB4IC0geSArIHU7XG4gICAgY2FzZSAnKic6IHJldHVybiB4ICogeSArIHU7XG4gIH1cbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVWYWx1ZSh2YWwsIHVuaXQpIHtcbiAgaWYgKGlzLmNvbCh2YWwpKSB7IHJldHVybiBjb2xvclRvUmdiKHZhbCk7IH1cbiAgaWYgKC9cXHMvZy50ZXN0KHZhbCkpIHsgcmV0dXJuIHZhbDsgfVxuICB2YXIgb3JpZ2luYWxVbml0ID0gZ2V0VW5pdCh2YWwpO1xuICB2YXIgdW5pdExlc3MgPSBvcmlnaW5hbFVuaXQgPyB2YWwuc3Vic3RyKDAsIHZhbC5sZW5ndGggLSBvcmlnaW5hbFVuaXQubGVuZ3RoKSA6IHZhbDtcbiAgaWYgKHVuaXQpIHsgcmV0dXJuIHVuaXRMZXNzICsgdW5pdDsgfVxuICByZXR1cm4gdW5pdExlc3M7XG59XG5cbi8vIGdldFRvdGFsTGVuZ3RoKCkgZXF1aXZhbGVudCBmb3IgY2lyY2xlLCByZWN0LCBwb2x5bGluZSwgcG9seWdvbiBhbmQgbGluZSBzaGFwZXNcbi8vIGFkYXB0ZWQgZnJvbSBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9TZWJMYW1ibGEvM2UwNTUwYzQ5NmMyMzY3MDk3NDRcblxuZnVuY3Rpb24gZ2V0RGlzdGFuY2UocDEsIHAyKSB7XG4gIHJldHVybiBNYXRoLnNxcnQoTWF0aC5wb3cocDIueCAtIHAxLngsIDIpICsgTWF0aC5wb3cocDIueSAtIHAxLnksIDIpKTtcbn1cblxuZnVuY3Rpb24gZ2V0Q2lyY2xlTGVuZ3RoKGVsKSB7XG4gIHJldHVybiBNYXRoLlBJICogMiAqIGdldEF0dHJpYnV0ZShlbCwgJ3InKTtcbn1cblxuZnVuY3Rpb24gZ2V0UmVjdExlbmd0aChlbCkge1xuICByZXR1cm4gKGdldEF0dHJpYnV0ZShlbCwgJ3dpZHRoJykgKiAyKSArIChnZXRBdHRyaWJ1dGUoZWwsICdoZWlnaHQnKSAqIDIpO1xufVxuXG5mdW5jdGlvbiBnZXRMaW5lTGVuZ3RoKGVsKSB7XG4gIHJldHVybiBnZXREaXN0YW5jZShcbiAgICB7eDogZ2V0QXR0cmlidXRlKGVsLCAneDEnKSwgeTogZ2V0QXR0cmlidXRlKGVsLCAneTEnKX0sIFxuICAgIHt4OiBnZXRBdHRyaWJ1dGUoZWwsICd4MicpLCB5OiBnZXRBdHRyaWJ1dGUoZWwsICd5MicpfVxuICApO1xufVxuXG5mdW5jdGlvbiBnZXRQb2x5bGluZUxlbmd0aChlbCkge1xuICB2YXIgcG9pbnRzID0gZWwucG9pbnRzO1xuICB2YXIgdG90YWxMZW5ndGggPSAwO1xuICB2YXIgcHJldmlvdXNQb3M7XG4gIGZvciAodmFyIGkgPSAwIDsgaSA8IHBvaW50cy5udW1iZXJPZkl0ZW1zOyBpKyspIHtcbiAgICB2YXIgY3VycmVudFBvcyA9IHBvaW50cy5nZXRJdGVtKGkpO1xuICAgIGlmIChpID4gMCkgeyB0b3RhbExlbmd0aCArPSBnZXREaXN0YW5jZShwcmV2aW91c1BvcywgY3VycmVudFBvcyk7IH1cbiAgICBwcmV2aW91c1BvcyA9IGN1cnJlbnRQb3M7XG4gIH1cbiAgcmV0dXJuIHRvdGFsTGVuZ3RoO1xufVxuXG5mdW5jdGlvbiBnZXRQb2x5Z29uTGVuZ3RoKGVsKSB7XG4gIHZhciBwb2ludHMgPSBlbC5wb2ludHM7XG4gIHJldHVybiBnZXRQb2x5bGluZUxlbmd0aChlbCkgKyBnZXREaXN0YW5jZShwb2ludHMuZ2V0SXRlbShwb2ludHMubnVtYmVyT2ZJdGVtcyAtIDEpLCBwb2ludHMuZ2V0SXRlbSgwKSk7XG59XG5cbi8vIFBhdGggYW5pbWF0aW9uXG5cbmZ1bmN0aW9uIGdldFRvdGFsTGVuZ3RoKGVsKSB7XG4gIGlmIChlbC5nZXRUb3RhbExlbmd0aCkgeyByZXR1cm4gZWwuZ2V0VG90YWxMZW5ndGgoKTsgfVxuICBzd2l0Y2goZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgY2FzZSAnY2lyY2xlJzogcmV0dXJuIGdldENpcmNsZUxlbmd0aChlbCk7XG4gICAgY2FzZSAncmVjdCc6IHJldHVybiBnZXRSZWN0TGVuZ3RoKGVsKTtcbiAgICBjYXNlICdsaW5lJzogcmV0dXJuIGdldExpbmVMZW5ndGgoZWwpO1xuICAgIGNhc2UgJ3BvbHlsaW5lJzogcmV0dXJuIGdldFBvbHlsaW5lTGVuZ3RoKGVsKTtcbiAgICBjYXNlICdwb2x5Z29uJzogcmV0dXJuIGdldFBvbHlnb25MZW5ndGgoZWwpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNldERhc2hvZmZzZXQoZWwpIHtcbiAgdmFyIHBhdGhMZW5ndGggPSBnZXRUb3RhbExlbmd0aChlbCk7XG4gIGVsLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLWRhc2hhcnJheScsIHBhdGhMZW5ndGgpO1xuICByZXR1cm4gcGF0aExlbmd0aDtcbn1cblxuLy8gTW90aW9uIHBhdGhcblxuZnVuY3Rpb24gZ2V0UGFyZW50U3ZnRWwoZWwpIHtcbiAgdmFyIHBhcmVudEVsID0gZWwucGFyZW50Tm9kZTtcbiAgd2hpbGUgKGlzLnN2ZyhwYXJlbnRFbCkpIHtcbiAgICBpZiAoIWlzLnN2ZyhwYXJlbnRFbC5wYXJlbnROb2RlKSkgeyBicmVhazsgfVxuICAgIHBhcmVudEVsID0gcGFyZW50RWwucGFyZW50Tm9kZTtcbiAgfVxuICByZXR1cm4gcGFyZW50RWw7XG59XG5cbmZ1bmN0aW9uIGdldFBhcmVudFN2ZyhwYXRoRWwsIHN2Z0RhdGEpIHtcbiAgdmFyIHN2ZyA9IHN2Z0RhdGEgfHwge307XG4gIHZhciBwYXJlbnRTdmdFbCA9IHN2Zy5lbCB8fCBnZXRQYXJlbnRTdmdFbChwYXRoRWwpO1xuICB2YXIgcmVjdCA9IHBhcmVudFN2Z0VsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICB2YXIgdmlld0JveEF0dHIgPSBnZXRBdHRyaWJ1dGUocGFyZW50U3ZnRWwsICd2aWV3Qm94Jyk7XG4gIHZhciB3aWR0aCA9IHJlY3Qud2lkdGg7XG4gIHZhciBoZWlnaHQgPSByZWN0LmhlaWdodDtcbiAgdmFyIHZpZXdCb3ggPSBzdmcudmlld0JveCB8fCAodmlld0JveEF0dHIgPyB2aWV3Qm94QXR0ci5zcGxpdCgnICcpIDogWzAsIDAsIHdpZHRoLCBoZWlnaHRdKTtcbiAgcmV0dXJuIHtcbiAgICBlbDogcGFyZW50U3ZnRWwsXG4gICAgdmlld0JveDogdmlld0JveCxcbiAgICB4OiB2aWV3Qm94WzBdIC8gMSxcbiAgICB5OiB2aWV3Qm94WzFdIC8gMSxcbiAgICB3OiB3aWR0aCxcbiAgICBoOiBoZWlnaHQsXG4gICAgdlc6IHZpZXdCb3hbMl0sXG4gICAgdkg6IHZpZXdCb3hbM11cbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRQYXRoKHBhdGgsIHBlcmNlbnQpIHtcbiAgdmFyIHBhdGhFbCA9IGlzLnN0cihwYXRoKSA/IHNlbGVjdFN0cmluZyhwYXRoKVswXSA6IHBhdGg7XG4gIHZhciBwID0gcGVyY2VudCB8fCAxMDA7XG4gIHJldHVybiBmdW5jdGlvbihwcm9wZXJ0eSkge1xuICAgIHJldHVybiB7XG4gICAgICBwcm9wZXJ0eTogcHJvcGVydHksXG4gICAgICBlbDogcGF0aEVsLFxuICAgICAgc3ZnOiBnZXRQYXJlbnRTdmcocGF0aEVsKSxcbiAgICAgIHRvdGFsTGVuZ3RoOiBnZXRUb3RhbExlbmd0aChwYXRoRWwpICogKHAgLyAxMDApXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGdldFBhdGhQcm9ncmVzcyhwYXRoLCBwcm9ncmVzcywgaXNQYXRoVGFyZ2V0SW5zaWRlU1ZHKSB7XG4gIGZ1bmN0aW9uIHBvaW50KG9mZnNldCkge1xuICAgIGlmICggb2Zmc2V0ID09PSB2b2lkIDAgKSBvZmZzZXQgPSAwO1xuXG4gICAgdmFyIGwgPSBwcm9ncmVzcyArIG9mZnNldCA+PSAxID8gcHJvZ3Jlc3MgKyBvZmZzZXQgOiAwO1xuICAgIHJldHVybiBwYXRoLmVsLmdldFBvaW50QXRMZW5ndGgobCk7XG4gIH1cbiAgdmFyIHN2ZyA9IGdldFBhcmVudFN2ZyhwYXRoLmVsLCBwYXRoLnN2Zyk7XG4gIHZhciBwID0gcG9pbnQoKTtcbiAgdmFyIHAwID0gcG9pbnQoLTEpO1xuICB2YXIgcDEgPSBwb2ludCgrMSk7XG4gIHZhciBzY2FsZVggPSBpc1BhdGhUYXJnZXRJbnNpZGVTVkcgPyAxIDogc3ZnLncgLyBzdmcudlc7XG4gIHZhciBzY2FsZVkgPSBpc1BhdGhUYXJnZXRJbnNpZGVTVkcgPyAxIDogc3ZnLmggLyBzdmcudkg7XG4gIHN3aXRjaCAocGF0aC5wcm9wZXJ0eSkge1xuICAgIGNhc2UgJ3gnOiByZXR1cm4gKHAueCAtIHN2Zy54KSAqIHNjYWxlWDtcbiAgICBjYXNlICd5JzogcmV0dXJuIChwLnkgLSBzdmcueSkgKiBzY2FsZVk7XG4gICAgY2FzZSAnYW5nbGUnOiByZXR1cm4gTWF0aC5hdGFuMihwMS55IC0gcDAueSwgcDEueCAtIHAwLngpICogMTgwIC8gTWF0aC5QSTtcbiAgfVxufVxuXG4vLyBEZWNvbXBvc2UgdmFsdWVcblxuZnVuY3Rpb24gZGVjb21wb3NlVmFsdWUodmFsLCB1bml0KSB7XG4gIC8vIGNvbnN0IHJneCA9IC8tP1xcZCpcXC4/XFxkKy9nOyAvLyBoYW5kbGVzIGJhc2ljIG51bWJlcnNcbiAgLy8gY29uc3Qgcmd4ID0gL1srLV0/XFxkKyg/OlxcLlxcZCspPyg/OltlRV1bKy1dP1xcZCspPy9nOyAvLyBoYW5kbGVzIGV4cG9uZW50cyBub3RhdGlvblxuICB2YXIgcmd4ID0gL1srLV0/XFxkKlxcLj9cXGQrKD86XFwuXFxkKyk/KD86W2VFXVsrLV0/XFxkKyk/L2c7IC8vIGhhbmRsZXMgZXhwb25lbnRzIG5vdGF0aW9uXG4gIHZhciB2YWx1ZSA9IHZhbGlkYXRlVmFsdWUoKGlzLnB0aCh2YWwpID8gdmFsLnRvdGFsTGVuZ3RoIDogdmFsKSwgdW5pdCkgKyAnJztcbiAgcmV0dXJuIHtcbiAgICBvcmlnaW5hbDogdmFsdWUsXG4gICAgbnVtYmVyczogdmFsdWUubWF0Y2gocmd4KSA/IHZhbHVlLm1hdGNoKHJneCkubWFwKE51bWJlcikgOiBbMF0sXG4gICAgc3RyaW5nczogKGlzLnN0cih2YWwpIHx8IHVuaXQpID8gdmFsdWUuc3BsaXQocmd4KSA6IFtdXG4gIH1cbn1cblxuLy8gQW5pbWF0YWJsZXNcblxuZnVuY3Rpb24gcGFyc2VUYXJnZXRzKHRhcmdldHMpIHtcbiAgdmFyIHRhcmdldHNBcnJheSA9IHRhcmdldHMgPyAoZmxhdHRlbkFycmF5KGlzLmFycih0YXJnZXRzKSA/IHRhcmdldHMubWFwKHRvQXJyYXkpIDogdG9BcnJheSh0YXJnZXRzKSkpIDogW107XG4gIHJldHVybiBmaWx0ZXJBcnJheSh0YXJnZXRzQXJyYXksIGZ1bmN0aW9uIChpdGVtLCBwb3MsIHNlbGYpIHsgcmV0dXJuIHNlbGYuaW5kZXhPZihpdGVtKSA9PT0gcG9zOyB9KTtcbn1cblxuZnVuY3Rpb24gZ2V0QW5pbWF0YWJsZXModGFyZ2V0cykge1xuICB2YXIgcGFyc2VkID0gcGFyc2VUYXJnZXRzKHRhcmdldHMpO1xuICByZXR1cm4gcGFyc2VkLm1hcChmdW5jdGlvbiAodCwgaSkge1xuICAgIHJldHVybiB7dGFyZ2V0OiB0LCBpZDogaSwgdG90YWw6IHBhcnNlZC5sZW5ndGgsIHRyYW5zZm9ybXM6IHsgbGlzdDogZ2V0RWxlbWVudFRyYW5zZm9ybXModCkgfSB9O1xuICB9KTtcbn1cblxuLy8gUHJvcGVydGllc1xuXG5mdW5jdGlvbiBub3JtYWxpemVQcm9wZXJ0eVR3ZWVucyhwcm9wLCB0d2VlblNldHRpbmdzKSB7XG4gIHZhciBzZXR0aW5ncyA9IGNsb25lT2JqZWN0KHR3ZWVuU2V0dGluZ3MpO1xuICAvLyBPdmVycmlkZSBkdXJhdGlvbiBpZiBlYXNpbmcgaXMgYSBzcHJpbmdcbiAgaWYgKC9ec3ByaW5nLy50ZXN0KHNldHRpbmdzLmVhc2luZykpIHsgc2V0dGluZ3MuZHVyYXRpb24gPSBzcHJpbmcoc2V0dGluZ3MuZWFzaW5nKTsgfVxuICBpZiAoaXMuYXJyKHByb3ApKSB7XG4gICAgdmFyIGwgPSBwcm9wLmxlbmd0aDtcbiAgICB2YXIgaXNGcm9tVG8gPSAobCA9PT0gMiAmJiAhaXMub2JqKHByb3BbMF0pKTtcbiAgICBpZiAoIWlzRnJvbVRvKSB7XG4gICAgICAvLyBEdXJhdGlvbiBkaXZpZGVkIGJ5IHRoZSBudW1iZXIgb2YgdHdlZW5zXG4gICAgICBpZiAoIWlzLmZuYyh0d2VlblNldHRpbmdzLmR1cmF0aW9uKSkgeyBzZXR0aW5ncy5kdXJhdGlvbiA9IHR3ZWVuU2V0dGluZ3MuZHVyYXRpb24gLyBsOyB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRyYW5zZm9ybSBbZnJvbSwgdG9dIHZhbHVlcyBzaG9ydGhhbmQgdG8gYSB2YWxpZCB0d2VlbiB2YWx1ZVxuICAgICAgcHJvcCA9IHt2YWx1ZTogcHJvcH07XG4gICAgfVxuICB9XG4gIHZhciBwcm9wQXJyYXkgPSBpcy5hcnIocHJvcCkgPyBwcm9wIDogW3Byb3BdO1xuICByZXR1cm4gcHJvcEFycmF5Lm1hcChmdW5jdGlvbiAodiwgaSkge1xuICAgIHZhciBvYmogPSAoaXMub2JqKHYpICYmICFpcy5wdGgodikpID8gdiA6IHt2YWx1ZTogdn07XG4gICAgLy8gRGVmYXVsdCBkZWxheSB2YWx1ZSBzaG91bGQgb25seSBiZSBhcHBsaWVkIHRvIHRoZSBmaXJzdCB0d2VlblxuICAgIGlmIChpcy51bmQob2JqLmRlbGF5KSkgeyBvYmouZGVsYXkgPSAhaSA/IHR3ZWVuU2V0dGluZ3MuZGVsYXkgOiAwOyB9XG4gICAgLy8gRGVmYXVsdCBlbmREZWxheSB2YWx1ZSBzaG91bGQgb25seSBiZSBhcHBsaWVkIHRvIHRoZSBsYXN0IHR3ZWVuXG4gICAgaWYgKGlzLnVuZChvYmouZW5kRGVsYXkpKSB7IG9iai5lbmREZWxheSA9IGkgPT09IHByb3BBcnJheS5sZW5ndGggLSAxID8gdHdlZW5TZXR0aW5ncy5lbmREZWxheSA6IDA7IH1cbiAgICByZXR1cm4gb2JqO1xuICB9KS5tYXAoZnVuY3Rpb24gKGspIHsgcmV0dXJuIG1lcmdlT2JqZWN0cyhrLCBzZXR0aW5ncyk7IH0pO1xufVxuXG5cbmZ1bmN0aW9uIGZsYXR0ZW5LZXlmcmFtZXMoa2V5ZnJhbWVzKSB7XG4gIHZhciBwcm9wZXJ0eU5hbWVzID0gZmlsdGVyQXJyYXkoZmxhdHRlbkFycmF5KGtleWZyYW1lcy5tYXAoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gT2JqZWN0LmtleXMoa2V5KTsgfSkpLCBmdW5jdGlvbiAocCkgeyByZXR1cm4gaXMua2V5KHApOyB9KVxuICAucmVkdWNlKGZ1bmN0aW9uIChhLGIpIHsgaWYgKGEuaW5kZXhPZihiKSA8IDApIHsgYS5wdXNoKGIpOyB9IHJldHVybiBhOyB9LCBbXSk7XG4gIHZhciBwcm9wZXJ0aWVzID0ge307XG4gIHZhciBsb29wID0gZnVuY3Rpb24gKCBpICkge1xuICAgIHZhciBwcm9wTmFtZSA9IHByb3BlcnR5TmFtZXNbaV07XG4gICAgcHJvcGVydGllc1twcm9wTmFtZV0gPSBrZXlmcmFtZXMubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHZhciBuZXdLZXkgPSB7fTtcbiAgICAgIGZvciAodmFyIHAgaW4ga2V5KSB7XG4gICAgICAgIGlmIChpcy5rZXkocCkpIHtcbiAgICAgICAgICBpZiAocCA9PSBwcm9wTmFtZSkgeyBuZXdLZXkudmFsdWUgPSBrZXlbcF07IH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXdLZXlbcF0gPSBrZXlbcF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXdLZXk7XG4gICAgfSk7XG4gIH07XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wZXJ0eU5hbWVzLmxlbmd0aDsgaSsrKSBsb29wKCBpICk7XG4gIHJldHVybiBwcm9wZXJ0aWVzO1xufVxuXG5mdW5jdGlvbiBnZXRQcm9wZXJ0aWVzKHR3ZWVuU2V0dGluZ3MsIHBhcmFtcykge1xuICB2YXIgcHJvcGVydGllcyA9IFtdO1xuICB2YXIga2V5ZnJhbWVzID0gcGFyYW1zLmtleWZyYW1lcztcbiAgaWYgKGtleWZyYW1lcykgeyBwYXJhbXMgPSBtZXJnZU9iamVjdHMoZmxhdHRlbktleWZyYW1lcyhrZXlmcmFtZXMpLCBwYXJhbXMpOyB9XG4gIGZvciAodmFyIHAgaW4gcGFyYW1zKSB7XG4gICAgaWYgKGlzLmtleShwKSkge1xuICAgICAgcHJvcGVydGllcy5wdXNoKHtcbiAgICAgICAgbmFtZTogcCxcbiAgICAgICAgdHdlZW5zOiBub3JtYWxpemVQcm9wZXJ0eVR3ZWVucyhwYXJhbXNbcF0sIHR3ZWVuU2V0dGluZ3MpXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHByb3BlcnRpZXM7XG59XG5cbi8vIFR3ZWVuc1xuXG5mdW5jdGlvbiBub3JtYWxpemVUd2VlblZhbHVlcyh0d2VlbiwgYW5pbWF0YWJsZSkge1xuICB2YXIgdCA9IHt9O1xuICBmb3IgKHZhciBwIGluIHR3ZWVuKSB7XG4gICAgdmFyIHZhbHVlID0gZ2V0RnVuY3Rpb25WYWx1ZSh0d2VlbltwXSwgYW5pbWF0YWJsZSk7XG4gICAgaWYgKGlzLmFycih2YWx1ZSkpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUubWFwKGZ1bmN0aW9uICh2KSB7IHJldHVybiBnZXRGdW5jdGlvblZhbHVlKHYsIGFuaW1hdGFibGUpOyB9KTtcbiAgICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDEpIHsgdmFsdWUgPSB2YWx1ZVswXTsgfVxuICAgIH1cbiAgICB0W3BdID0gdmFsdWU7XG4gIH1cbiAgdC5kdXJhdGlvbiA9IHBhcnNlRmxvYXQodC5kdXJhdGlvbik7XG4gIHQuZGVsYXkgPSBwYXJzZUZsb2F0KHQuZGVsYXkpO1xuICByZXR1cm4gdDtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplVHdlZW5zKHByb3AsIGFuaW1hdGFibGUpIHtcbiAgdmFyIHByZXZpb3VzVHdlZW47XG4gIHJldHVybiBwcm9wLnR3ZWVucy5tYXAoZnVuY3Rpb24gKHQpIHtcbiAgICB2YXIgdHdlZW4gPSBub3JtYWxpemVUd2VlblZhbHVlcyh0LCBhbmltYXRhYmxlKTtcbiAgICB2YXIgdHdlZW5WYWx1ZSA9IHR3ZWVuLnZhbHVlO1xuICAgIHZhciB0byA9IGlzLmFycih0d2VlblZhbHVlKSA/IHR3ZWVuVmFsdWVbMV0gOiB0d2VlblZhbHVlO1xuICAgIHZhciB0b1VuaXQgPSBnZXRVbml0KHRvKTtcbiAgICB2YXIgb3JpZ2luYWxWYWx1ZSA9IGdldE9yaWdpbmFsVGFyZ2V0VmFsdWUoYW5pbWF0YWJsZS50YXJnZXQsIHByb3AubmFtZSwgdG9Vbml0LCBhbmltYXRhYmxlKTtcbiAgICB2YXIgcHJldmlvdXNWYWx1ZSA9IHByZXZpb3VzVHdlZW4gPyBwcmV2aW91c1R3ZWVuLnRvLm9yaWdpbmFsIDogb3JpZ2luYWxWYWx1ZTtcbiAgICB2YXIgZnJvbSA9IGlzLmFycih0d2VlblZhbHVlKSA/IHR3ZWVuVmFsdWVbMF0gOiBwcmV2aW91c1ZhbHVlO1xuICAgIHZhciBmcm9tVW5pdCA9IGdldFVuaXQoZnJvbSkgfHwgZ2V0VW5pdChvcmlnaW5hbFZhbHVlKTtcbiAgICB2YXIgdW5pdCA9IHRvVW5pdCB8fCBmcm9tVW5pdDtcbiAgICBpZiAoaXMudW5kKHRvKSkgeyB0byA9IHByZXZpb3VzVmFsdWU7IH1cbiAgICB0d2Vlbi5mcm9tID0gZGVjb21wb3NlVmFsdWUoZnJvbSwgdW5pdCk7XG4gICAgdHdlZW4udG8gPSBkZWNvbXBvc2VWYWx1ZShnZXRSZWxhdGl2ZVZhbHVlKHRvLCBmcm9tKSwgdW5pdCk7XG4gICAgdHdlZW4uc3RhcnQgPSBwcmV2aW91c1R3ZWVuID8gcHJldmlvdXNUd2Vlbi5lbmQgOiAwO1xuICAgIHR3ZWVuLmVuZCA9IHR3ZWVuLnN0YXJ0ICsgdHdlZW4uZGVsYXkgKyB0d2Vlbi5kdXJhdGlvbiArIHR3ZWVuLmVuZERlbGF5O1xuICAgIHR3ZWVuLmVhc2luZyA9IHBhcnNlRWFzaW5ncyh0d2Vlbi5lYXNpbmcsIHR3ZWVuLmR1cmF0aW9uKTtcbiAgICB0d2Vlbi5pc1BhdGggPSBpcy5wdGgodHdlZW5WYWx1ZSk7XG4gICAgdHdlZW4uaXNQYXRoVGFyZ2V0SW5zaWRlU1ZHID0gdHdlZW4uaXNQYXRoICYmIGlzLnN2ZyhhbmltYXRhYmxlLnRhcmdldCk7XG4gICAgdHdlZW4uaXNDb2xvciA9IGlzLmNvbCh0d2Vlbi5mcm9tLm9yaWdpbmFsKTtcbiAgICBpZiAodHdlZW4uaXNDb2xvcikgeyB0d2Vlbi5yb3VuZCA9IDE7IH1cbiAgICBwcmV2aW91c1R3ZWVuID0gdHdlZW47XG4gICAgcmV0dXJuIHR3ZWVuO1xuICB9KTtcbn1cblxuLy8gVHdlZW4gcHJvZ3Jlc3NcblxudmFyIHNldFByb2dyZXNzVmFsdWUgPSB7XG4gIGNzczogZnVuY3Rpb24gKHQsIHAsIHYpIHsgcmV0dXJuIHQuc3R5bGVbcF0gPSB2OyB9LFxuICBhdHRyaWJ1dGU6IGZ1bmN0aW9uICh0LCBwLCB2KSB7IHJldHVybiB0LnNldEF0dHJpYnV0ZShwLCB2KTsgfSxcbiAgb2JqZWN0OiBmdW5jdGlvbiAodCwgcCwgdikgeyByZXR1cm4gdFtwXSA9IHY7IH0sXG4gIHRyYW5zZm9ybTogZnVuY3Rpb24gKHQsIHAsIHYsIHRyYW5zZm9ybXMsIG1hbnVhbCkge1xuICAgIHRyYW5zZm9ybXMubGlzdC5zZXQocCwgdik7XG4gICAgaWYgKHAgPT09IHRyYW5zZm9ybXMubGFzdCB8fCBtYW51YWwpIHtcbiAgICAgIHZhciBzdHIgPSAnJztcbiAgICAgIHRyYW5zZm9ybXMubGlzdC5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSwgcHJvcCkgeyBzdHIgKz0gcHJvcCArIFwiKFwiICsgdmFsdWUgKyBcIikgXCI7IH0pO1xuICAgICAgdC5zdHlsZS50cmFuc2Zvcm0gPSBzdHI7XG4gICAgfVxuICB9XG59O1xuXG4vLyBTZXQgVmFsdWUgaGVscGVyXG5cbmZ1bmN0aW9uIHNldFRhcmdldHNWYWx1ZSh0YXJnZXRzLCBwcm9wZXJ0aWVzKSB7XG4gIHZhciBhbmltYXRhYmxlcyA9IGdldEFuaW1hdGFibGVzKHRhcmdldHMpO1xuICBhbmltYXRhYmxlcy5mb3JFYWNoKGZ1bmN0aW9uIChhbmltYXRhYmxlKSB7XG4gICAgZm9yICh2YXIgcHJvcGVydHkgaW4gcHJvcGVydGllcykge1xuICAgICAgdmFyIHZhbHVlID0gZ2V0RnVuY3Rpb25WYWx1ZShwcm9wZXJ0aWVzW3Byb3BlcnR5XSwgYW5pbWF0YWJsZSk7XG4gICAgICB2YXIgdGFyZ2V0ID0gYW5pbWF0YWJsZS50YXJnZXQ7XG4gICAgICB2YXIgdmFsdWVVbml0ID0gZ2V0VW5pdCh2YWx1ZSk7XG4gICAgICB2YXIgb3JpZ2luYWxWYWx1ZSA9IGdldE9yaWdpbmFsVGFyZ2V0VmFsdWUodGFyZ2V0LCBwcm9wZXJ0eSwgdmFsdWVVbml0LCBhbmltYXRhYmxlKTtcbiAgICAgIHZhciB1bml0ID0gdmFsdWVVbml0IHx8IGdldFVuaXQob3JpZ2luYWxWYWx1ZSk7XG4gICAgICB2YXIgdG8gPSBnZXRSZWxhdGl2ZVZhbHVlKHZhbGlkYXRlVmFsdWUodmFsdWUsIHVuaXQpLCBvcmlnaW5hbFZhbHVlKTtcbiAgICAgIHZhciBhbmltVHlwZSA9IGdldEFuaW1hdGlvblR5cGUodGFyZ2V0LCBwcm9wZXJ0eSk7XG4gICAgICBzZXRQcm9ncmVzc1ZhbHVlW2FuaW1UeXBlXSh0YXJnZXQsIHByb3BlcnR5LCB0bywgYW5pbWF0YWJsZS50cmFuc2Zvcm1zLCB0cnVlKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vLyBBbmltYXRpb25zXG5cbmZ1bmN0aW9uIGNyZWF0ZUFuaW1hdGlvbihhbmltYXRhYmxlLCBwcm9wKSB7XG4gIHZhciBhbmltVHlwZSA9IGdldEFuaW1hdGlvblR5cGUoYW5pbWF0YWJsZS50YXJnZXQsIHByb3AubmFtZSk7XG4gIGlmIChhbmltVHlwZSkge1xuICAgIHZhciB0d2VlbnMgPSBub3JtYWxpemVUd2VlbnMocHJvcCwgYW5pbWF0YWJsZSk7XG4gICAgdmFyIGxhc3RUd2VlbiA9IHR3ZWVuc1t0d2VlbnMubGVuZ3RoIC0gMV07XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IGFuaW1UeXBlLFxuICAgICAgcHJvcGVydHk6IHByb3AubmFtZSxcbiAgICAgIGFuaW1hdGFibGU6IGFuaW1hdGFibGUsXG4gICAgICB0d2VlbnM6IHR3ZWVucyxcbiAgICAgIGR1cmF0aW9uOiBsYXN0VHdlZW4uZW5kLFxuICAgICAgZGVsYXk6IHR3ZWVuc1swXS5kZWxheSxcbiAgICAgIGVuZERlbGF5OiBsYXN0VHdlZW4uZW5kRGVsYXlcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0QW5pbWF0aW9ucyhhbmltYXRhYmxlcywgcHJvcGVydGllcykge1xuICByZXR1cm4gZmlsdGVyQXJyYXkoZmxhdHRlbkFycmF5KGFuaW1hdGFibGVzLm1hcChmdW5jdGlvbiAoYW5pbWF0YWJsZSkge1xuICAgIHJldHVybiBwcm9wZXJ0aWVzLm1hcChmdW5jdGlvbiAocHJvcCkge1xuICAgICAgcmV0dXJuIGNyZWF0ZUFuaW1hdGlvbihhbmltYXRhYmxlLCBwcm9wKTtcbiAgICB9KTtcbiAgfSkpLCBmdW5jdGlvbiAoYSkgeyByZXR1cm4gIWlzLnVuZChhKTsgfSk7XG59XG5cbi8vIENyZWF0ZSBJbnN0YW5jZVxuXG5mdW5jdGlvbiBnZXRJbnN0YW5jZVRpbWluZ3MoYW5pbWF0aW9ucywgdHdlZW5TZXR0aW5ncykge1xuICB2YXIgYW5pbUxlbmd0aCA9IGFuaW1hdGlvbnMubGVuZ3RoO1xuICB2YXIgZ2V0VGxPZmZzZXQgPSBmdW5jdGlvbiAoYW5pbSkgeyByZXR1cm4gYW5pbS50aW1lbGluZU9mZnNldCA/IGFuaW0udGltZWxpbmVPZmZzZXQgOiAwOyB9O1xuICB2YXIgdGltaW5ncyA9IHt9O1xuICB0aW1pbmdzLmR1cmF0aW9uID0gYW5pbUxlbmd0aCA/IE1hdGgubWF4LmFwcGx5KE1hdGgsIGFuaW1hdGlvbnMubWFwKGZ1bmN0aW9uIChhbmltKSB7IHJldHVybiBnZXRUbE9mZnNldChhbmltKSArIGFuaW0uZHVyYXRpb247IH0pKSA6IHR3ZWVuU2V0dGluZ3MuZHVyYXRpb247XG4gIHRpbWluZ3MuZGVsYXkgPSBhbmltTGVuZ3RoID8gTWF0aC5taW4uYXBwbHkoTWF0aCwgYW5pbWF0aW9ucy5tYXAoZnVuY3Rpb24gKGFuaW0pIHsgcmV0dXJuIGdldFRsT2Zmc2V0KGFuaW0pICsgYW5pbS5kZWxheTsgfSkpIDogdHdlZW5TZXR0aW5ncy5kZWxheTtcbiAgdGltaW5ncy5lbmREZWxheSA9IGFuaW1MZW5ndGggPyB0aW1pbmdzLmR1cmF0aW9uIC0gTWF0aC5tYXguYXBwbHkoTWF0aCwgYW5pbWF0aW9ucy5tYXAoZnVuY3Rpb24gKGFuaW0pIHsgcmV0dXJuIGdldFRsT2Zmc2V0KGFuaW0pICsgYW5pbS5kdXJhdGlvbiAtIGFuaW0uZW5kRGVsYXk7IH0pKSA6IHR3ZWVuU2V0dGluZ3MuZW5kRGVsYXk7XG4gIHJldHVybiB0aW1pbmdzO1xufVxuXG52YXIgaW5zdGFuY2VJRCA9IDA7XG5cbmZ1bmN0aW9uIGNyZWF0ZU5ld0luc3RhbmNlKHBhcmFtcykge1xuICB2YXIgaW5zdGFuY2VTZXR0aW5ncyA9IHJlcGxhY2VPYmplY3RQcm9wcyhkZWZhdWx0SW5zdGFuY2VTZXR0aW5ncywgcGFyYW1zKTtcbiAgdmFyIHR3ZWVuU2V0dGluZ3MgPSByZXBsYWNlT2JqZWN0UHJvcHMoZGVmYXVsdFR3ZWVuU2V0dGluZ3MsIHBhcmFtcyk7XG4gIHZhciBwcm9wZXJ0aWVzID0gZ2V0UHJvcGVydGllcyh0d2VlblNldHRpbmdzLCBwYXJhbXMpO1xuICB2YXIgYW5pbWF0YWJsZXMgPSBnZXRBbmltYXRhYmxlcyhwYXJhbXMudGFyZ2V0cyk7XG4gIHZhciBhbmltYXRpb25zID0gZ2V0QW5pbWF0aW9ucyhhbmltYXRhYmxlcywgcHJvcGVydGllcyk7XG4gIHZhciB0aW1pbmdzID0gZ2V0SW5zdGFuY2VUaW1pbmdzKGFuaW1hdGlvbnMsIHR3ZWVuU2V0dGluZ3MpO1xuICB2YXIgaWQgPSBpbnN0YW5jZUlEO1xuICBpbnN0YW5jZUlEKys7XG4gIHJldHVybiBtZXJnZU9iamVjdHMoaW5zdGFuY2VTZXR0aW5ncywge1xuICAgIGlkOiBpZCxcbiAgICBjaGlsZHJlbjogW10sXG4gICAgYW5pbWF0YWJsZXM6IGFuaW1hdGFibGVzLFxuICAgIGFuaW1hdGlvbnM6IGFuaW1hdGlvbnMsXG4gICAgZHVyYXRpb246IHRpbWluZ3MuZHVyYXRpb24sXG4gICAgZGVsYXk6IHRpbWluZ3MuZGVsYXksXG4gICAgZW5kRGVsYXk6IHRpbWluZ3MuZW5kRGVsYXlcbiAgfSk7XG59XG5cbi8vIENvcmVcblxudmFyIGFjdGl2ZUluc3RhbmNlcyA9IFtdO1xuXG52YXIgZW5naW5lID0gKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHJhZjtcblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgIGlmICghcmFmICYmICghaXNEb2N1bWVudEhpZGRlbigpIHx8ICFhbmltZS5zdXNwZW5kV2hlbkRvY3VtZW50SGlkZGVuKSAmJiBhY3RpdmVJbnN0YW5jZXMubGVuZ3RoID4gMCkge1xuICAgICAgcmFmID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBzdGVwKHQpIHtcbiAgICAvLyBtZW1vIG9uIGFsZ29yaXRobSBpc3N1ZTpcbiAgICAvLyBkYW5nZXJvdXMgaXRlcmF0aW9uIG92ZXIgbXV0YWJsZSBgYWN0aXZlSW5zdGFuY2VzYFxuICAgIC8vICh0aGF0IGNvbGxlY3Rpb24gbWF5IGJlIHVwZGF0ZWQgZnJvbSB3aXRoaW4gY2FsbGJhY2tzIG9mIGB0aWNrYC1lZCBhbmltYXRpb24gaW5zdGFuY2VzKVxuICAgIHZhciBhY3RpdmVJbnN0YW5jZXNMZW5ndGggPSBhY3RpdmVJbnN0YW5jZXMubGVuZ3RoO1xuICAgIHZhciBpID0gMDtcbiAgICB3aGlsZSAoaSA8IGFjdGl2ZUluc3RhbmNlc0xlbmd0aCkge1xuICAgICAgdmFyIGFjdGl2ZUluc3RhbmNlID0gYWN0aXZlSW5zdGFuY2VzW2ldO1xuICAgICAgaWYgKCFhY3RpdmVJbnN0YW5jZS5wYXVzZWQpIHtcbiAgICAgICAgYWN0aXZlSW5zdGFuY2UudGljayh0KTtcbiAgICAgICAgaSsrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWN0aXZlSW5zdGFuY2VzLnNwbGljZShpLCAxKTtcbiAgICAgICAgYWN0aXZlSW5zdGFuY2VzTGVuZ3RoLS07XG4gICAgICB9XG4gICAgfVxuICAgIHJhZiA9IGkgPiAwID8gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApIDogdW5kZWZpbmVkO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSgpIHtcbiAgICBpZiAoIWFuaW1lLnN1c3BlbmRXaGVuRG9jdW1lbnRIaWRkZW4pIHsgcmV0dXJuOyB9XG5cbiAgICBpZiAoaXNEb2N1bWVudEhpZGRlbigpKSB7XG4gICAgICAvLyBzdXNwZW5kIHRpY2tzXG4gICAgICByYWYgPSBjYW5jZWxBbmltYXRpb25GcmFtZShyYWYpO1xuICAgIH0gZWxzZSB7IC8vIGlzIGJhY2sgdG8gYWN0aXZlIHRhYlxuICAgICAgLy8gZmlyc3QgYWRqdXN0IGFuaW1hdGlvbnMgdG8gY29uc2lkZXIgdGhlIHRpbWUgdGhhdCB0aWNrcyB3ZXJlIHN1c3BlbmRlZFxuICAgICAgYWN0aXZlSW5zdGFuY2VzLmZvckVhY2goXG4gICAgICAgIGZ1bmN0aW9uIChpbnN0YW5jZSkgeyByZXR1cm4gaW5zdGFuY2UgLl9vbkRvY3VtZW50VmlzaWJpbGl0eSgpOyB9XG4gICAgICApO1xuICAgICAgZW5naW5lKCk7XG4gICAgfVxuICB9XG4gIGlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIGhhbmRsZVZpc2liaWxpdHlDaGFuZ2UpO1xuICB9XG5cbiAgcmV0dXJuIHBsYXk7XG59KSgpO1xuXG5mdW5jdGlvbiBpc0RvY3VtZW50SGlkZGVuKCkge1xuICByZXR1cm4gISFkb2N1bWVudCAmJiBkb2N1bWVudC5oaWRkZW47XG59XG5cbi8vIFB1YmxpYyBJbnN0YW5jZVxuXG5mdW5jdGlvbiBhbmltZShwYXJhbXMpIHtcbiAgaWYgKCBwYXJhbXMgPT09IHZvaWQgMCApIHBhcmFtcyA9IHt9O1xuXG5cbiAgdmFyIHN0YXJ0VGltZSA9IDAsIGxhc3RUaW1lID0gMCwgbm93ID0gMDtcbiAgdmFyIGNoaWxkcmVuLCBjaGlsZHJlbkxlbmd0aCA9IDA7XG4gIHZhciByZXNvbHZlID0gbnVsbDtcblxuICBmdW5jdGlvbiBtYWtlUHJvbWlzZShpbnN0YW5jZSkge1xuICAgIHZhciBwcm9taXNlID0gd2luZG93LlByb21pc2UgJiYgbmV3IFByb21pc2UoZnVuY3Rpb24gKF9yZXNvbHZlKSB7IHJldHVybiByZXNvbHZlID0gX3Jlc29sdmU7IH0pO1xuICAgIGluc3RhbmNlLmZpbmlzaGVkID0gcHJvbWlzZTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfVxuXG4gIHZhciBpbnN0YW5jZSA9IGNyZWF0ZU5ld0luc3RhbmNlKHBhcmFtcyk7XG4gIHZhciBwcm9taXNlID0gbWFrZVByb21pc2UoaW5zdGFuY2UpO1xuXG4gIGZ1bmN0aW9uIHRvZ2dsZUluc3RhbmNlRGlyZWN0aW9uKCkge1xuICAgIHZhciBkaXJlY3Rpb24gPSBpbnN0YW5jZS5kaXJlY3Rpb247XG4gICAgaWYgKGRpcmVjdGlvbiAhPT0gJ2FsdGVybmF0ZScpIHtcbiAgICAgIGluc3RhbmNlLmRpcmVjdGlvbiA9IGRpcmVjdGlvbiAhPT0gJ25vcm1hbCcgPyAnbm9ybWFsJyA6ICdyZXZlcnNlJztcbiAgICB9XG4gICAgaW5zdGFuY2UucmV2ZXJzZWQgPSAhaW5zdGFuY2UucmV2ZXJzZWQ7XG4gICAgY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQpIHsgcmV0dXJuIGNoaWxkLnJldmVyc2VkID0gaW5zdGFuY2UucmV2ZXJzZWQ7IH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRqdXN0VGltZSh0aW1lKSB7XG4gICAgcmV0dXJuIGluc3RhbmNlLnJldmVyc2VkID8gaW5zdGFuY2UuZHVyYXRpb24gLSB0aW1lIDogdGltZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc2V0VGltZSgpIHtcbiAgICBzdGFydFRpbWUgPSAwO1xuICAgIGxhc3RUaW1lID0gYWRqdXN0VGltZShpbnN0YW5jZS5jdXJyZW50VGltZSkgKiAoMSAvIGFuaW1lLnNwZWVkKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNlZWtDaGlsZCh0aW1lLCBjaGlsZCkge1xuICAgIGlmIChjaGlsZCkgeyBjaGlsZC5zZWVrKHRpbWUgLSBjaGlsZC50aW1lbGluZU9mZnNldCk7IH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN5bmNJbnN0YW5jZUNoaWxkcmVuKHRpbWUpIHtcbiAgICBpZiAoIWluc3RhbmNlLnJldmVyc2VQbGF5YmFjaykge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbkxlbmd0aDsgaSsrKSB7IHNlZWtDaGlsZCh0aW1lLCBjaGlsZHJlbltpXSk7IH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgaSQxID0gY2hpbGRyZW5MZW5ndGg7IGkkMS0tOykgeyBzZWVrQ2hpbGQodGltZSwgY2hpbGRyZW5baSQxXSk7IH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzZXRBbmltYXRpb25zUHJvZ3Jlc3MoaW5zVGltZSkge1xuICAgIHZhciBpID0gMDtcbiAgICB2YXIgYW5pbWF0aW9ucyA9IGluc3RhbmNlLmFuaW1hdGlvbnM7XG4gICAgdmFyIGFuaW1hdGlvbnNMZW5ndGggPSBhbmltYXRpb25zLmxlbmd0aDtcbiAgICB3aGlsZSAoaSA8IGFuaW1hdGlvbnNMZW5ndGgpIHtcbiAgICAgIHZhciBhbmltID0gYW5pbWF0aW9uc1tpXTtcbiAgICAgIHZhciBhbmltYXRhYmxlID0gYW5pbS5hbmltYXRhYmxlO1xuICAgICAgdmFyIHR3ZWVucyA9IGFuaW0udHdlZW5zO1xuICAgICAgdmFyIHR3ZWVuTGVuZ3RoID0gdHdlZW5zLmxlbmd0aCAtIDE7XG4gICAgICB2YXIgdHdlZW4gPSB0d2VlbnNbdHdlZW5MZW5ndGhdO1xuICAgICAgLy8gT25seSBjaGVjayBmb3Iga2V5ZnJhbWVzIGlmIHRoZXJlIGlzIG1vcmUgdGhhbiBvbmUgdHdlZW5cbiAgICAgIGlmICh0d2Vlbkxlbmd0aCkgeyB0d2VlbiA9IGZpbHRlckFycmF5KHR3ZWVucywgZnVuY3Rpb24gKHQpIHsgcmV0dXJuIChpbnNUaW1lIDwgdC5lbmQpOyB9KVswXSB8fCB0d2VlbjsgfVxuICAgICAgdmFyIGVsYXBzZWQgPSBtaW5NYXgoaW5zVGltZSAtIHR3ZWVuLnN0YXJ0IC0gdHdlZW4uZGVsYXksIDAsIHR3ZWVuLmR1cmF0aW9uKSAvIHR3ZWVuLmR1cmF0aW9uO1xuICAgICAgdmFyIGVhc2VkID0gaXNOYU4oZWxhcHNlZCkgPyAxIDogdHdlZW4uZWFzaW5nKGVsYXBzZWQpO1xuICAgICAgdmFyIHN0cmluZ3MgPSB0d2Vlbi50by5zdHJpbmdzO1xuICAgICAgdmFyIHJvdW5kID0gdHdlZW4ucm91bmQ7XG4gICAgICB2YXIgbnVtYmVycyA9IFtdO1xuICAgICAgdmFyIHRvTnVtYmVyc0xlbmd0aCA9IHR3ZWVuLnRvLm51bWJlcnMubGVuZ3RoO1xuICAgICAgdmFyIHByb2dyZXNzID0gKHZvaWQgMCk7XG4gICAgICBmb3IgKHZhciBuID0gMDsgbiA8IHRvTnVtYmVyc0xlbmd0aDsgbisrKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9ICh2b2lkIDApO1xuICAgICAgICB2YXIgdG9OdW1iZXIgPSB0d2Vlbi50by5udW1iZXJzW25dO1xuICAgICAgICB2YXIgZnJvbU51bWJlciA9IHR3ZWVuLmZyb20ubnVtYmVyc1tuXSB8fCAwO1xuICAgICAgICBpZiAoIXR3ZWVuLmlzUGF0aCkge1xuICAgICAgICAgIHZhbHVlID0gZnJvbU51bWJlciArIChlYXNlZCAqICh0b051bWJlciAtIGZyb21OdW1iZXIpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YWx1ZSA9IGdldFBhdGhQcm9ncmVzcyh0d2Vlbi52YWx1ZSwgZWFzZWQgKiB0b051bWJlciwgdHdlZW4uaXNQYXRoVGFyZ2V0SW5zaWRlU1ZHKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocm91bmQpIHtcbiAgICAgICAgICBpZiAoISh0d2Vlbi5pc0NvbG9yICYmIG4gPiAyKSkge1xuICAgICAgICAgICAgdmFsdWUgPSBNYXRoLnJvdW5kKHZhbHVlICogcm91bmQpIC8gcm91bmQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG51bWJlcnMucHVzaCh2YWx1ZSk7XG4gICAgICB9XG4gICAgICAvLyBNYW51YWwgQXJyYXkucmVkdWNlIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VzXG4gICAgICB2YXIgc3RyaW5nc0xlbmd0aCA9IHN0cmluZ3MubGVuZ3RoO1xuICAgICAgaWYgKCFzdHJpbmdzTGVuZ3RoKSB7XG4gICAgICAgIHByb2dyZXNzID0gbnVtYmVyc1swXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb2dyZXNzID0gc3RyaW5nc1swXTtcbiAgICAgICAgZm9yICh2YXIgcyA9IDA7IHMgPCBzdHJpbmdzTGVuZ3RoOyBzKyspIHtcbiAgICAgICAgICB2YXIgYSA9IHN0cmluZ3Nbc107XG4gICAgICAgICAgdmFyIGIgPSBzdHJpbmdzW3MgKyAxXTtcbiAgICAgICAgICB2YXIgbiQxID0gbnVtYmVyc1tzXTtcbiAgICAgICAgICBpZiAoIWlzTmFOKG4kMSkpIHtcbiAgICAgICAgICAgIGlmICghYikge1xuICAgICAgICAgICAgICBwcm9ncmVzcyArPSBuJDEgKyAnICc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBwcm9ncmVzcyArPSBuJDEgKyBiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc2V0UHJvZ3Jlc3NWYWx1ZVthbmltLnR5cGVdKGFuaW1hdGFibGUudGFyZ2V0LCBhbmltLnByb3BlcnR5LCBwcm9ncmVzcywgYW5pbWF0YWJsZS50cmFuc2Zvcm1zKTtcbiAgICAgIGFuaW0uY3VycmVudFZhbHVlID0gcHJvZ3Jlc3M7XG4gICAgICBpKys7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2V0Q2FsbGJhY2soY2IpIHtcbiAgICBpZiAoaW5zdGFuY2VbY2JdICYmICFpbnN0YW5jZS5wYXNzVGhyb3VnaCkgeyBpbnN0YW5jZVtjYl0oaW5zdGFuY2UpOyB9XG4gIH1cblxuICBmdW5jdGlvbiBjb3VudEl0ZXJhdGlvbigpIHtcbiAgICBpZiAoaW5zdGFuY2UucmVtYWluaW5nICYmIGluc3RhbmNlLnJlbWFpbmluZyAhPT0gdHJ1ZSkge1xuICAgICAgaW5zdGFuY2UucmVtYWluaW5nLS07XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2V0SW5zdGFuY2VQcm9ncmVzcyhlbmdpbmVUaW1lKSB7XG4gICAgdmFyIGluc0R1cmF0aW9uID0gaW5zdGFuY2UuZHVyYXRpb247XG4gICAgdmFyIGluc0RlbGF5ID0gaW5zdGFuY2UuZGVsYXk7XG4gICAgdmFyIGluc0VuZERlbGF5ID0gaW5zRHVyYXRpb24gLSBpbnN0YW5jZS5lbmREZWxheTtcbiAgICB2YXIgaW5zVGltZSA9IGFkanVzdFRpbWUoZW5naW5lVGltZSk7XG4gICAgaW5zdGFuY2UucHJvZ3Jlc3MgPSBtaW5NYXgoKGluc1RpbWUgLyBpbnNEdXJhdGlvbikgKiAxMDAsIDAsIDEwMCk7XG4gICAgaW5zdGFuY2UucmV2ZXJzZVBsYXliYWNrID0gaW5zVGltZSA8IGluc3RhbmNlLmN1cnJlbnRUaW1lO1xuICAgIGlmIChjaGlsZHJlbikgeyBzeW5jSW5zdGFuY2VDaGlsZHJlbihpbnNUaW1lKTsgfVxuICAgIGlmICghaW5zdGFuY2UuYmVnYW4gJiYgaW5zdGFuY2UuY3VycmVudFRpbWUgPiAwKSB7XG4gICAgICBpbnN0YW5jZS5iZWdhbiA9IHRydWU7XG4gICAgICBzZXRDYWxsYmFjaygnYmVnaW4nKTtcbiAgICB9XG4gICAgaWYgKCFpbnN0YW5jZS5sb29wQmVnYW4gJiYgaW5zdGFuY2UuY3VycmVudFRpbWUgPiAwKSB7XG4gICAgICBpbnN0YW5jZS5sb29wQmVnYW4gPSB0cnVlO1xuICAgICAgc2V0Q2FsbGJhY2soJ2xvb3BCZWdpbicpO1xuICAgIH1cbiAgICBpZiAoaW5zVGltZSA8PSBpbnNEZWxheSAmJiBpbnN0YW5jZS5jdXJyZW50VGltZSAhPT0gMCkge1xuICAgICAgc2V0QW5pbWF0aW9uc1Byb2dyZXNzKDApO1xuICAgIH1cbiAgICBpZiAoKGluc1RpbWUgPj0gaW5zRW5kRGVsYXkgJiYgaW5zdGFuY2UuY3VycmVudFRpbWUgIT09IGluc0R1cmF0aW9uKSB8fCAhaW5zRHVyYXRpb24pIHtcbiAgICAgIHNldEFuaW1hdGlvbnNQcm9ncmVzcyhpbnNEdXJhdGlvbik7XG4gICAgfVxuICAgIGlmIChpbnNUaW1lID4gaW5zRGVsYXkgJiYgaW5zVGltZSA8IGluc0VuZERlbGF5KSB7XG4gICAgICBpZiAoIWluc3RhbmNlLmNoYW5nZUJlZ2FuKSB7XG4gICAgICAgIGluc3RhbmNlLmNoYW5nZUJlZ2FuID0gdHJ1ZTtcbiAgICAgICAgaW5zdGFuY2UuY2hhbmdlQ29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgIHNldENhbGxiYWNrKCdjaGFuZ2VCZWdpbicpO1xuICAgICAgfVxuICAgICAgc2V0Q2FsbGJhY2soJ2NoYW5nZScpO1xuICAgICAgc2V0QW5pbWF0aW9uc1Byb2dyZXNzKGluc1RpbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoaW5zdGFuY2UuY2hhbmdlQmVnYW4pIHtcbiAgICAgICAgaW5zdGFuY2UuY2hhbmdlQ29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgaW5zdGFuY2UuY2hhbmdlQmVnYW4gPSBmYWxzZTtcbiAgICAgICAgc2V0Q2FsbGJhY2soJ2NoYW5nZUNvbXBsZXRlJyk7XG4gICAgICB9XG4gICAgfVxuICAgIGluc3RhbmNlLmN1cnJlbnRUaW1lID0gbWluTWF4KGluc1RpbWUsIDAsIGluc0R1cmF0aW9uKTtcbiAgICBpZiAoaW5zdGFuY2UuYmVnYW4pIHsgc2V0Q2FsbGJhY2soJ3VwZGF0ZScpOyB9XG4gICAgaWYgKGVuZ2luZVRpbWUgPj0gaW5zRHVyYXRpb24pIHtcbiAgICAgIGxhc3RUaW1lID0gMDtcbiAgICAgIGNvdW50SXRlcmF0aW9uKCk7XG4gICAgICBpZiAoIWluc3RhbmNlLnJlbWFpbmluZykge1xuICAgICAgICBpbnN0YW5jZS5wYXVzZWQgPSB0cnVlO1xuICAgICAgICBpZiAoIWluc3RhbmNlLmNvbXBsZXRlZCkge1xuICAgICAgICAgIGluc3RhbmNlLmNvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgICAgc2V0Q2FsbGJhY2soJ2xvb3BDb21wbGV0ZScpO1xuICAgICAgICAgIHNldENhbGxiYWNrKCdjb21wbGV0ZScpO1xuICAgICAgICAgIGlmICghaW5zdGFuY2UucGFzc1Rocm91Z2ggJiYgJ1Byb21pc2UnIGluIHdpbmRvdykge1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgcHJvbWlzZSA9IG1ha2VQcm9taXNlKGluc3RhbmNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXJ0VGltZSA9IG5vdztcbiAgICAgICAgc2V0Q2FsbGJhY2soJ2xvb3BDb21wbGV0ZScpO1xuICAgICAgICBpbnN0YW5jZS5sb29wQmVnYW4gPSBmYWxzZTtcbiAgICAgICAgaWYgKGluc3RhbmNlLmRpcmVjdGlvbiA9PT0gJ2FsdGVybmF0ZScpIHtcbiAgICAgICAgICB0b2dnbGVJbnN0YW5jZURpcmVjdGlvbigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaW5zdGFuY2UucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZGlyZWN0aW9uID0gaW5zdGFuY2UuZGlyZWN0aW9uO1xuICAgIGluc3RhbmNlLnBhc3NUaHJvdWdoID0gZmFsc2U7XG4gICAgaW5zdGFuY2UuY3VycmVudFRpbWUgPSAwO1xuICAgIGluc3RhbmNlLnByb2dyZXNzID0gMDtcbiAgICBpbnN0YW5jZS5wYXVzZWQgPSB0cnVlO1xuICAgIGluc3RhbmNlLmJlZ2FuID0gZmFsc2U7XG4gICAgaW5zdGFuY2UubG9vcEJlZ2FuID0gZmFsc2U7XG4gICAgaW5zdGFuY2UuY2hhbmdlQmVnYW4gPSBmYWxzZTtcbiAgICBpbnN0YW5jZS5jb21wbGV0ZWQgPSBmYWxzZTtcbiAgICBpbnN0YW5jZS5jaGFuZ2VDb21wbGV0ZWQgPSBmYWxzZTtcbiAgICBpbnN0YW5jZS5yZXZlcnNlUGxheWJhY2sgPSBmYWxzZTtcbiAgICBpbnN0YW5jZS5yZXZlcnNlZCA9IGRpcmVjdGlvbiA9PT0gJ3JldmVyc2UnO1xuICAgIGluc3RhbmNlLnJlbWFpbmluZyA9IGluc3RhbmNlLmxvb3A7XG4gICAgY2hpbGRyZW4gPSBpbnN0YW5jZS5jaGlsZHJlbjtcbiAgICBjaGlsZHJlbkxlbmd0aCA9IGNoaWxkcmVuLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gY2hpbGRyZW5MZW5ndGg7IGktLTspIHsgaW5zdGFuY2UuY2hpbGRyZW5baV0ucmVzZXQoKTsgfVxuICAgIGlmIChpbnN0YW5jZS5yZXZlcnNlZCAmJiBpbnN0YW5jZS5sb29wICE9PSB0cnVlIHx8IChkaXJlY3Rpb24gPT09ICdhbHRlcm5hdGUnICYmIGluc3RhbmNlLmxvb3AgPT09IDEpKSB7IGluc3RhbmNlLnJlbWFpbmluZysrOyB9XG4gICAgc2V0QW5pbWF0aW9uc1Byb2dyZXNzKGluc3RhbmNlLnJldmVyc2VkID8gaW5zdGFuY2UuZHVyYXRpb24gOiAwKTtcbiAgfTtcblxuICAvLyBpbnRlcm5hbCBtZXRob2QgKGZvciBlbmdpbmUpIHRvIGFkanVzdCBhbmltYXRpb24gdGltaW5ncyBiZWZvcmUgcmVzdG9yaW5nIGVuZ2luZSB0aWNrcyAockFGKVxuICBpbnN0YW5jZS5fb25Eb2N1bWVudFZpc2liaWxpdHkgPSByZXNldFRpbWU7XG5cbiAgLy8gU2V0IFZhbHVlIGhlbHBlclxuXG4gIGluc3RhbmNlLnNldCA9IGZ1bmN0aW9uKHRhcmdldHMsIHByb3BlcnRpZXMpIHtcbiAgICBzZXRUYXJnZXRzVmFsdWUodGFyZ2V0cywgcHJvcGVydGllcyk7XG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9O1xuXG4gIGluc3RhbmNlLnRpY2sgPSBmdW5jdGlvbih0KSB7XG4gICAgbm93ID0gdDtcbiAgICBpZiAoIXN0YXJ0VGltZSkgeyBzdGFydFRpbWUgPSBub3c7IH1cbiAgICBzZXRJbnN0YW5jZVByb2dyZXNzKChub3cgKyAobGFzdFRpbWUgLSBzdGFydFRpbWUpKSAqIGFuaW1lLnNwZWVkKTtcbiAgfTtcblxuICBpbnN0YW5jZS5zZWVrID0gZnVuY3Rpb24odGltZSkge1xuICAgIHNldEluc3RhbmNlUHJvZ3Jlc3MoYWRqdXN0VGltZSh0aW1lKSk7XG4gIH07XG5cbiAgaW5zdGFuY2UucGF1c2UgPSBmdW5jdGlvbigpIHtcbiAgICBpbnN0YW5jZS5wYXVzZWQgPSB0cnVlO1xuICAgIHJlc2V0VGltZSgpO1xuICB9O1xuXG4gIGluc3RhbmNlLnBsYXkgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIWluc3RhbmNlLnBhdXNlZCkgeyByZXR1cm47IH1cbiAgICBpZiAoaW5zdGFuY2UuY29tcGxldGVkKSB7IGluc3RhbmNlLnJlc2V0KCk7IH1cbiAgICBpbnN0YW5jZS5wYXVzZWQgPSBmYWxzZTtcbiAgICBhY3RpdmVJbnN0YW5jZXMucHVzaChpbnN0YW5jZSk7XG4gICAgcmVzZXRUaW1lKCk7XG4gICAgZW5naW5lKCk7XG4gIH07XG5cbiAgaW5zdGFuY2UucmV2ZXJzZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRvZ2dsZUluc3RhbmNlRGlyZWN0aW9uKCk7XG4gICAgaW5zdGFuY2UuY29tcGxldGVkID0gaW5zdGFuY2UucmV2ZXJzZWQgPyBmYWxzZSA6IHRydWU7XG4gICAgcmVzZXRUaW1lKCk7XG4gIH07XG5cbiAgaW5zdGFuY2UucmVzdGFydCA9IGZ1bmN0aW9uKCkge1xuICAgIGluc3RhbmNlLnJlc2V0KCk7XG4gICAgaW5zdGFuY2UucGxheSgpO1xuICB9O1xuXG4gIGluc3RhbmNlLnJlbW92ZSA9IGZ1bmN0aW9uKHRhcmdldHMpIHtcbiAgICB2YXIgdGFyZ2V0c0FycmF5ID0gcGFyc2VUYXJnZXRzKHRhcmdldHMpO1xuICAgIHJlbW92ZVRhcmdldHNGcm9tSW5zdGFuY2UodGFyZ2V0c0FycmF5LCBpbnN0YW5jZSk7XG4gIH07XG5cbiAgaW5zdGFuY2UucmVzZXQoKTtcblxuICBpZiAoaW5zdGFuY2UuYXV0b3BsYXkpIHsgaW5zdGFuY2UucGxheSgpOyB9XG5cbiAgcmV0dXJuIGluc3RhbmNlO1xuXG59XG5cbi8vIFJlbW92ZSB0YXJnZXRzIGZyb20gYW5pbWF0aW9uXG5cbmZ1bmN0aW9uIHJlbW92ZVRhcmdldHNGcm9tQW5pbWF0aW9ucyh0YXJnZXRzQXJyYXksIGFuaW1hdGlvbnMpIHtcbiAgZm9yICh2YXIgYSA9IGFuaW1hdGlvbnMubGVuZ3RoOyBhLS07KSB7XG4gICAgaWYgKGFycmF5Q29udGFpbnModGFyZ2V0c0FycmF5LCBhbmltYXRpb25zW2FdLmFuaW1hdGFibGUudGFyZ2V0KSkge1xuICAgICAgYW5pbWF0aW9ucy5zcGxpY2UoYSwgMSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVRhcmdldHNGcm9tSW5zdGFuY2UodGFyZ2V0c0FycmF5LCBpbnN0YW5jZSkge1xuICB2YXIgYW5pbWF0aW9ucyA9IGluc3RhbmNlLmFuaW1hdGlvbnM7XG4gIHZhciBjaGlsZHJlbiA9IGluc3RhbmNlLmNoaWxkcmVuO1xuICByZW1vdmVUYXJnZXRzRnJvbUFuaW1hdGlvbnModGFyZ2V0c0FycmF5LCBhbmltYXRpb25zKTtcbiAgZm9yICh2YXIgYyA9IGNoaWxkcmVuLmxlbmd0aDsgYy0tOykge1xuICAgIHZhciBjaGlsZCA9IGNoaWxkcmVuW2NdO1xuICAgIHZhciBjaGlsZEFuaW1hdGlvbnMgPSBjaGlsZC5hbmltYXRpb25zO1xuICAgIHJlbW92ZVRhcmdldHNGcm9tQW5pbWF0aW9ucyh0YXJnZXRzQXJyYXksIGNoaWxkQW5pbWF0aW9ucyk7XG4gICAgaWYgKCFjaGlsZEFuaW1hdGlvbnMubGVuZ3RoICYmICFjaGlsZC5jaGlsZHJlbi5sZW5ndGgpIHsgY2hpbGRyZW4uc3BsaWNlKGMsIDEpOyB9XG4gIH1cbiAgaWYgKCFhbmltYXRpb25zLmxlbmd0aCAmJiAhY2hpbGRyZW4ubGVuZ3RoKSB7IGluc3RhbmNlLnBhdXNlKCk7IH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlVGFyZ2V0c0Zyb21BY3RpdmVJbnN0YW5jZXModGFyZ2V0cykge1xuICB2YXIgdGFyZ2V0c0FycmF5ID0gcGFyc2VUYXJnZXRzKHRhcmdldHMpO1xuICBmb3IgKHZhciBpID0gYWN0aXZlSW5zdGFuY2VzLmxlbmd0aDsgaS0tOykge1xuICAgIHZhciBpbnN0YW5jZSA9IGFjdGl2ZUluc3RhbmNlc1tpXTtcbiAgICByZW1vdmVUYXJnZXRzRnJvbUluc3RhbmNlKHRhcmdldHNBcnJheSwgaW5zdGFuY2UpO1xuICB9XG59XG5cbi8vIFN0YWdnZXIgaGVscGVyc1xuXG5mdW5jdGlvbiBzdGFnZ2VyKHZhbCwgcGFyYW1zKSB7XG4gIGlmICggcGFyYW1zID09PSB2b2lkIDAgKSBwYXJhbXMgPSB7fTtcblxuICB2YXIgZGlyZWN0aW9uID0gcGFyYW1zLmRpcmVjdGlvbiB8fCAnbm9ybWFsJztcbiAgdmFyIGVhc2luZyA9IHBhcmFtcy5lYXNpbmcgPyBwYXJzZUVhc2luZ3MocGFyYW1zLmVhc2luZykgOiBudWxsO1xuICB2YXIgZ3JpZCA9IHBhcmFtcy5ncmlkO1xuICB2YXIgYXhpcyA9IHBhcmFtcy5heGlzO1xuICB2YXIgZnJvbUluZGV4ID0gcGFyYW1zLmZyb20gfHwgMDtcbiAgdmFyIGZyb21GaXJzdCA9IGZyb21JbmRleCA9PT0gJ2ZpcnN0JztcbiAgdmFyIGZyb21DZW50ZXIgPSBmcm9tSW5kZXggPT09ICdjZW50ZXInO1xuICB2YXIgZnJvbUxhc3QgPSBmcm9tSW5kZXggPT09ICdsYXN0JztcbiAgdmFyIGlzUmFuZ2UgPSBpcy5hcnIodmFsKTtcbiAgdmFyIHZhbDEgPSBpc1JhbmdlID8gcGFyc2VGbG9hdCh2YWxbMF0pIDogcGFyc2VGbG9hdCh2YWwpO1xuICB2YXIgdmFsMiA9IGlzUmFuZ2UgPyBwYXJzZUZsb2F0KHZhbFsxXSkgOiAwO1xuICB2YXIgdW5pdCA9IGdldFVuaXQoaXNSYW5nZSA/IHZhbFsxXSA6IHZhbCkgfHwgMDtcbiAgdmFyIHN0YXJ0ID0gcGFyYW1zLnN0YXJ0IHx8IDAgKyAoaXNSYW5nZSA/IHZhbDEgOiAwKTtcbiAgdmFyIHZhbHVlcyA9IFtdO1xuICB2YXIgbWF4VmFsdWUgPSAwO1xuICByZXR1cm4gZnVuY3Rpb24gKGVsLCBpLCB0KSB7XG4gICAgaWYgKGZyb21GaXJzdCkgeyBmcm9tSW5kZXggPSAwOyB9XG4gICAgaWYgKGZyb21DZW50ZXIpIHsgZnJvbUluZGV4ID0gKHQgLSAxKSAvIDI7IH1cbiAgICBpZiAoZnJvbUxhc3QpIHsgZnJvbUluZGV4ID0gdCAtIDE7IH1cbiAgICBpZiAoIXZhbHVlcy5sZW5ndGgpIHtcbiAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCB0OyBpbmRleCsrKSB7XG4gICAgICAgIGlmICghZ3JpZCkge1xuICAgICAgICAgIHZhbHVlcy5wdXNoKE1hdGguYWJzKGZyb21JbmRleCAtIGluZGV4KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGZyb21YID0gIWZyb21DZW50ZXIgPyBmcm9tSW5kZXglZ3JpZFswXSA6IChncmlkWzBdLTEpLzI7XG4gICAgICAgICAgdmFyIGZyb21ZID0gIWZyb21DZW50ZXIgPyBNYXRoLmZsb29yKGZyb21JbmRleC9ncmlkWzBdKSA6IChncmlkWzFdLTEpLzI7XG4gICAgICAgICAgdmFyIHRvWCA9IGluZGV4JWdyaWRbMF07XG4gICAgICAgICAgdmFyIHRvWSA9IE1hdGguZmxvb3IoaW5kZXgvZ3JpZFswXSk7XG4gICAgICAgICAgdmFyIGRpc3RhbmNlWCA9IGZyb21YIC0gdG9YO1xuICAgICAgICAgIHZhciBkaXN0YW5jZVkgPSBmcm9tWSAtIHRvWTtcbiAgICAgICAgICB2YXIgdmFsdWUgPSBNYXRoLnNxcnQoZGlzdGFuY2VYICogZGlzdGFuY2VYICsgZGlzdGFuY2VZICogZGlzdGFuY2VZKTtcbiAgICAgICAgICBpZiAoYXhpcyA9PT0gJ3gnKSB7IHZhbHVlID0gLWRpc3RhbmNlWDsgfVxuICAgICAgICAgIGlmIChheGlzID09PSAneScpIHsgdmFsdWUgPSAtZGlzdGFuY2VZOyB9XG4gICAgICAgICAgdmFsdWVzLnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIG1heFZhbHVlID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgdmFsdWVzKTtcbiAgICAgIH1cbiAgICAgIGlmIChlYXNpbmcpIHsgdmFsdWVzID0gdmFsdWVzLm1hcChmdW5jdGlvbiAodmFsKSB7IHJldHVybiBlYXNpbmcodmFsIC8gbWF4VmFsdWUpICogbWF4VmFsdWU7IH0pOyB9XG4gICAgICBpZiAoZGlyZWN0aW9uID09PSAncmV2ZXJzZScpIHsgdmFsdWVzID0gdmFsdWVzLm1hcChmdW5jdGlvbiAodmFsKSB7IHJldHVybiBheGlzID8gKHZhbCA8IDApID8gdmFsICogLTEgOiAtdmFsIDogTWF0aC5hYnMobWF4VmFsdWUgLSB2YWwpOyB9KTsgfVxuICAgIH1cbiAgICB2YXIgc3BhY2luZyA9IGlzUmFuZ2UgPyAodmFsMiAtIHZhbDEpIC8gbWF4VmFsdWUgOiB2YWwxO1xuICAgIHJldHVybiBzdGFydCArIChzcGFjaW5nICogKE1hdGgucm91bmQodmFsdWVzW2ldICogMTAwKSAvIDEwMCkpICsgdW5pdDtcbiAgfVxufVxuXG4vLyBUaW1lbGluZVxuXG5mdW5jdGlvbiB0aW1lbGluZShwYXJhbXMpIHtcbiAgaWYgKCBwYXJhbXMgPT09IHZvaWQgMCApIHBhcmFtcyA9IHt9O1xuXG4gIHZhciB0bCA9IGFuaW1lKHBhcmFtcyk7XG4gIHRsLmR1cmF0aW9uID0gMDtcbiAgdGwuYWRkID0gZnVuY3Rpb24oaW5zdGFuY2VQYXJhbXMsIHRpbWVsaW5lT2Zmc2V0KSB7XG4gICAgdmFyIHRsSW5kZXggPSBhY3RpdmVJbnN0YW5jZXMuaW5kZXhPZih0bCk7XG4gICAgdmFyIGNoaWxkcmVuID0gdGwuY2hpbGRyZW47XG4gICAgaWYgKHRsSW5kZXggPiAtMSkgeyBhY3RpdmVJbnN0YW5jZXMuc3BsaWNlKHRsSW5kZXgsIDEpOyB9XG4gICAgZnVuY3Rpb24gcGFzc1Rocm91Z2goaW5zKSB7IGlucy5wYXNzVGhyb3VnaCA9IHRydWU7IH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7IHBhc3NUaHJvdWdoKGNoaWxkcmVuW2ldKTsgfVxuICAgIHZhciBpbnNQYXJhbXMgPSBtZXJnZU9iamVjdHMoaW5zdGFuY2VQYXJhbXMsIHJlcGxhY2VPYmplY3RQcm9wcyhkZWZhdWx0VHdlZW5TZXR0aW5ncywgcGFyYW1zKSk7XG4gICAgaW5zUGFyYW1zLnRhcmdldHMgPSBpbnNQYXJhbXMudGFyZ2V0cyB8fCBwYXJhbXMudGFyZ2V0cztcbiAgICB2YXIgdGxEdXJhdGlvbiA9IHRsLmR1cmF0aW9uO1xuICAgIGluc1BhcmFtcy5hdXRvcGxheSA9IGZhbHNlO1xuICAgIGluc1BhcmFtcy5kaXJlY3Rpb24gPSB0bC5kaXJlY3Rpb247XG4gICAgaW5zUGFyYW1zLnRpbWVsaW5lT2Zmc2V0ID0gaXMudW5kKHRpbWVsaW5lT2Zmc2V0KSA/IHRsRHVyYXRpb24gOiBnZXRSZWxhdGl2ZVZhbHVlKHRpbWVsaW5lT2Zmc2V0LCB0bER1cmF0aW9uKTtcbiAgICBwYXNzVGhyb3VnaCh0bCk7XG4gICAgdGwuc2VlayhpbnNQYXJhbXMudGltZWxpbmVPZmZzZXQpO1xuICAgIHZhciBpbnMgPSBhbmltZShpbnNQYXJhbXMpO1xuICAgIHBhc3NUaHJvdWdoKGlucyk7XG4gICAgY2hpbGRyZW4ucHVzaChpbnMpO1xuICAgIHZhciB0aW1pbmdzID0gZ2V0SW5zdGFuY2VUaW1pbmdzKGNoaWxkcmVuLCBwYXJhbXMpO1xuICAgIHRsLmRlbGF5ID0gdGltaW5ncy5kZWxheTtcbiAgICB0bC5lbmREZWxheSA9IHRpbWluZ3MuZW5kRGVsYXk7XG4gICAgdGwuZHVyYXRpb24gPSB0aW1pbmdzLmR1cmF0aW9uO1xuICAgIHRsLnNlZWsoMCk7XG4gICAgdGwucmVzZXQoKTtcbiAgICBpZiAodGwuYXV0b3BsYXkpIHsgdGwucGxheSgpOyB9XG4gICAgcmV0dXJuIHRsO1xuICB9O1xuICByZXR1cm4gdGw7XG59XG5cbmFuaW1lLnZlcnNpb24gPSAnMy4yLjEnO1xuYW5pbWUuc3BlZWQgPSAxO1xuLy8gVE9ETzojcmV2aWV3OiBuYW1pbmcsIGRvY3VtZW50YXRpb25cbmFuaW1lLnN1c3BlbmRXaGVuRG9jdW1lbnRIaWRkZW4gPSB0cnVlO1xuYW5pbWUucnVubmluZyA9IGFjdGl2ZUluc3RhbmNlcztcbmFuaW1lLnJlbW92ZSA9IHJlbW92ZVRhcmdldHNGcm9tQWN0aXZlSW5zdGFuY2VzO1xuYW5pbWUuZ2V0ID0gZ2V0T3JpZ2luYWxUYXJnZXRWYWx1ZTtcbmFuaW1lLnNldCA9IHNldFRhcmdldHNWYWx1ZTtcbmFuaW1lLmNvbnZlcnRQeCA9IGNvbnZlcnRQeFRvVW5pdDtcbmFuaW1lLnBhdGggPSBnZXRQYXRoO1xuYW5pbWUuc2V0RGFzaG9mZnNldCA9IHNldERhc2hvZmZzZXQ7XG5hbmltZS5zdGFnZ2VyID0gc3RhZ2dlcjtcbmFuaW1lLnRpbWVsaW5lID0gdGltZWxpbmU7XG5hbmltZS5lYXNpbmcgPSBwYXJzZUVhc2luZ3M7XG5hbmltZS5wZW5uZXIgPSBwZW5uZXI7XG5hbmltZS5yYW5kb20gPSBmdW5jdGlvbiAobWluLCBtYXgpIHsgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47IH07XG5cbmV4cG9ydCBkZWZhdWx0IGFuaW1lO1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHRpZDogbW9kdWxlSWQsXG5cdFx0bG9hZGVkOiBmYWxzZSxcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG5cdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18uaG1kID0gKG1vZHVsZSkgPT4ge1xuXHRtb2R1bGUgPSBPYmplY3QuY3JlYXRlKG1vZHVsZSk7XG5cdGlmICghbW9kdWxlLmNoaWxkcmVuKSBtb2R1bGUuY2hpbGRyZW4gPSBbXTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgJ2V4cG9ydHMnLCB7XG5cdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRzZXQ6ICgpID0+IHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignRVMgTW9kdWxlcyBtYXkgbm90IGFzc2lnbiBtb2R1bGUuZXhwb3J0cyBvciBleHBvcnRzLiosIFVzZSBFU00gZXhwb3J0IHN5bnRheCwgaW5zdGVhZDogJyArIG1vZHVsZS5pZCk7XG5cdFx0fVxuXHR9KTtcblx0cmV0dXJuIG1vZHVsZTtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIi8qKlxyXG4gKiBAbW9kdWxlIFRlbXBsYXRlL1RlbXBsYXRlTWFpblxyXG4gKi9cclxuXHJcbmNvbnNvbGUubG9nKCdUZW1wbGF0ZSBWRVJTSU9OOicsIFZFUlNJT04pO1xyXG5cclxuaW1wb3J0IHtDT05TVEFOVFN9IGZyb20gJy4uL0NvbnN0YW50cyc7XHJcbmltcG9ydCB7IFBERkN1cnNvclRvb2xzIH0gZnJvbSAnLi8uLi9wZGYuY3Vyc29yLnRvb2wnO1xyXG5pbXBvcnQge1RlbXBsYXRlTW9kfSBmcm9tICcuL3RlbXBsYXRlbW9kJztcclxuaW1wb3J0IHtVdGlsc30gZnJvbSAnLi8uLi91dGlscy91dGlscy5qcyc7XHJcblxyXG5cclxudmFyIHBkZkN1cnNvclRvb2xzLCBwZGZWaWV3ZXIsIHRlbXBsYXRlbW9kLCBfX3RlbXBsYXRlT3duZXJOb2RlO1xyXG5cclxuY29uc3QgVVNFX09OTFlfQ1NTX1pPT00gPSBmYWxzZTtcclxuY29uc3QgVEVYVF9MQVlFUl9NT0RFID0gMDsgLy8gRElTQUJMRVxyXG5jb25zdCBNQVhfSU1BR0VfU0laRSA9IDEwMjQgKiAxMDI0O1xyXG5jb25zdCBERUZBVUxUX1NDQUxFX0RFTFRBID0gMS4wO1xyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiBQREbrrLjshJzrpbwg66Gc65Oc7ZWY6rOgIOy0iOq4sCDshYvtjIXsnYQg7ZWc64ukLlxyXG4gKiBcclxuICogQHBhcmFtIHtFbGVtZW50fSBvd25lck5vZGUgIO2VtOuLuSDtlITroZzsoJ3tirjsnZgg7LWc7IOB64uoIEVsZW1lbnTrpbwg6rCQ7Iu46rOgIOyeiOuKlCBFbGVtZW50XHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBwZGZGaWxlVXJsICAgUERGIEZJTEUgVVJMXHJcbiAqIEBwYXJhbSB7QXJyYXl9ICB1c2VyTGlzdCAg7ISc66qF7J6QIOygleuztCDrpqzsiqTtirhcclxuICogQHBhcmFtIHtBcnJheX0gZHZPcHRpb25MaXN0ICDquLDrs7jqsJIg7KCV67O0IOumrOyKpO2KuFxyXG4gKiBAcGFyYW0ge09iamVjdH0gaW1wb3J0RGF0YSAg6riw7KG0IFRlbXBsYXRl7JeQ7IScIOyggOyepe2VnCBKc29uIE9iamVjdFxyXG4gKiBAcGFyYW0ge0FycmF5fSBsYW5ncyAg7IKs7Jqp7ZWgIOuLpOq1reyWtCDrpqzsiqTtirgg6riw67O46rCS7Jy866GcIFtcImtvXCIsIFwiZW5cIl3qsIAg65Ok7Ja07J6I64ukLlxyXG4gKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAqIEBNZXRob2QgTmFtZSA6IGluaXREb2N1bWVudFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGluaXREb2N1bWVudChvd25lck5vZGUsIHBkZkZpbGVVcmwsIHVzZXJMaXN0LCBkdk9wdGlvbkxpc3QsIHNpZ25UYWJTaG93RGVmT3B0VmFsLCBpbXBvcnREYXRhLCBsYW5ncyA9IFtcImtvXCIsIFwiZW5cIl0pIHtcclxuICAgIF9fdGVtcGxhdGVPd25lck5vZGUgPSBvd25lck5vZGU7XHJcbiAgICBcclxuICAgIFV0aWxzLnRyYW5zbGF0b3IuZmV0Y2gobGFuZ3MpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIC8vIC0+IFRyYW5zbGF0aW9ucyBhcmUgcmVhZHkuLi5cclxuICAgICAgICBVdGlscy5jaGFuZ2VMb2NhbGUobGFuZ3NbMF0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgbGV0IHBkZkNvbnRhaW5lciA9IF9fdGVtcGxhdGVPd25lck5vZGUucXVlcnlTZWxlY3RvcignICMnICsgQ09OU1RBTlRTLlRFTVBMQVRFX1BERl9WSUVXRVJfQ09OVEFJTkVSKTtcclxuICAgIGxldCBldmVudEJ1cyA9IG5ldyBwZGZqc1ZpZXdlci5FdmVudEJ1cygpO1xyXG4gICAgcGRmQ3Vyc29yVG9vbHMgPSBuZXcgUERGQ3Vyc29yVG9vbHMoe1xyXG4gICAgICAgIGNvbnRhaW5lcjogcGRmQ29udGFpbmVyLFxyXG4gICAgICAgIGV2ZW50QnVzOiBldmVudEJ1cyxcclxuICAgICAgICBjdXJzb3JUb29sT25Mb2FkOiAwXHJcbiAgICB9KTtcclxuXHJcbiAgICBwZGZWaWV3ZXIgPSBuZXcgcGRmanNWaWV3ZXIuUERGVmlld2VyKHtcclxuICAgICAgICBjb250YWluZXI6IHBkZkNvbnRhaW5lcixcclxuICAgICAgICBldmVudEJ1czogZXZlbnRCdXMsXHJcbiAgICAgICAgdXNlT25seUNzc1pvb206IFVTRV9PTkxZX0NTU19aT09NLFxyXG4gICAgICAgIHRleHRMYXllck1vZGU6IFRFWFRfTEFZRVJfTU9ERSxcclxuICAgIH0pO1xyXG5cclxuICAgIHRlbXBsYXRlbW9kID0gbmV3IFRlbXBsYXRlTW9kKHBkZlZpZXdlciwgb3duZXJOb2RlKTtcclxuICAgIHRlbXBsYXRlbW9kLmFwcGVuZFNpZ25UYWJTaG93T3B0KHNpZ25UYWJTaG93RGVmT3B0VmFsKTtcclxuICAgIHRlbXBsYXRlbW9kLmJ1aWxkU2lnblRhYlNob3dPcHQoc2lnblRhYlNob3dEZWZPcHRWYWwpO1xyXG4gICAgdGVtcGxhdGVtb2QuYnVpbGRGaWVsZFVzZXJJbmZvKHVzZXJMaXN0KTtcclxuICAgIHRlbXBsYXRlbW9kLmJ1aWxkRFZPcHRzSW5mbyhkdk9wdGlvbkxpc3QpO1xyXG4gICAgIFxyXG4gICAgZXZlbnRCdXMub24oXCJwYWdlcmVuZGVyZWRcIiwgZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwicGFnZVJlbmRlcmVkOiBcIik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBldmVudEJ1cy5vbihcInBhZ2VjaGFuZ2luZ1wiLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJwYWdlY2hhbmdpbmdcIik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBldmVudEJ1cy5vbihcInNjYWxlY2hhbmdpbmdcIiwgZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwic2NhbGVjaGFuZ2luZ1wiKTtcclxuICAgICAgICBjaGFuZ2VMYXllclNpemUoZXZ0KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGV2ZW50QnVzLm9uKFwicGFnZXNpbml0XCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInBhZ2VzaW5pdFwiKTtcclxuICAgICAgICBwZGZWaWV3ZXIuY3VycmVudFNjYWxlID0gREVGQVVMVF9TQ0FMRV9ERUxUQTtcclxuICAgICAgICAvLyBXZSBjYW4gdXNlIHBkZlZpZXdlciBub3csIGUuZy4gbGV0J3MgY2hhbmdlIGRlZmF1bHQgc2NhbGUuXHJcbiAgICB9KTtcclxuXHJcbiAgICBsZXQgbG9hZGluZ1Rhc2sgPSBwZGZqc0xpYi5nZXREb2N1bWVudCh7XHJcbiAgICAgICAgdXJsOiBwZGZGaWxlVXJsLFxyXG4gICAgICAgIGNNYXBVcmw6ICcvanMvcGRmX2Zvcm0vcGRmanMvY21hcHMvJyxcclxuICAgICAgICBjTWFwUGFja2VkOiB0cnVlLFxyXG4gICAgfSlcclxuICAgIGxvYWRpbmdUYXNrLnByb21pc2UudGhlbihmdW5jdGlvbiAocGRmRG9jdW1lbnQpIHtcclxuICAgICAgICBwZGZEb2N1bWVudC5nZXREYXRhKCkudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgcGRmVmlld2VyLmN1cnJlbnRTY2FsZSA9IERFRkFVTFRfU0NBTEVfREVMVEE7XHJcbiAgICAgICAgcGRmVmlld2VyLnNldERvY3VtZW50KHBkZkRvY3VtZW50KVxyXG4gICAgICAgIC8vcGRmQ3Vyc29yVG9vbHMuc3dpdGNoVG9vbCgxKTtcclxuICAgICAgICB0ZW1wbGF0ZW1vZC50ZW1wbGF0ZUluaXQoKTtcclxuXHJcbiAgICAgICAgaWYgKGltcG9ydERhdGEgPT09IG51bGwgfHwgaW1wb3J0RGF0YSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2hlY2tQYWdlVmlld3NSZWFkeShwZGZWaWV3ZXIucGFnZVZpZXdzUmVhZHksIGltcG9ydERhdGEpO1xyXG4gICAgfSlcclxuXHJcbiAgICBfX3RlbXBsYXRlT3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXCIjXCIgKyBcIlpvb20tT3V0LUJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZG9jdW1lbnRab29tT3V0KTtcclxuICAgIF9fdGVtcGxhdGVPd25lck5vZGUucXVlcnlTZWxlY3RvcihcIiNcIiArIFwiWm9vbS1Jbi1CdXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGRvY3VtZW50Wm9vbUluKTtcclxuICAgIF9fdGVtcGxhdGVPd25lck5vZGUucXVlcnlTZWxlY3RvcihcIiAuQnV0dG9uLUljb24tQ29tcG9uZW50XCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoaWRlU2hvd1NpZGVQYW5lbCk7XHJcblxyXG4gICAgX190ZW1wbGF0ZU93bmVyTm9kZS5xdWVyeVNlbGVjdG9yQWxsKFwiIC5FZGl0b3ItQ29tcG9uZW50X0JveCA+IGRpdiA+IHVsID4gbGlcIikuZm9yRWFjaCgoZWwpID0+IHtcclxuICAgICAgICBpZiAoIVV0aWxzLmlzRW1wdHlPYmplY3QoZWwub25jbGljaykpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZmllbGRTZWxlY3RUb29sLCB0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIF9fdGVtcGxhdGVPd25lck5vZGUucXVlcnlTZWxlY3RvcihcIiAuRWRpdG9yLVRvb2xiYXItR3JvdXAuTGVmdCA+IGJ1dHRvbi5VbmRvLUJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdW5kb0FjdGlvbik7XHJcbiAgICBcclxuICAgIF9fdGVtcGxhdGVPd25lck5vZGUucXVlcnlTZWxlY3RvcihcIiAuRWRpdG9yLVRvb2xiYXItR3JvdXAuTGVmdCA+IGJ1dHRvbi5SZWRvLUJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcmVkb0FjdGlvbik7XHJcblxyXG4gICAgX190ZW1wbGF0ZU93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFwiIC5FZGl0b3ItVG9vbGJhci1Hcm91cC5SaWdodCAgYnV0dG9uLkFsaWduLUxlZnQtQnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzb3J0RmllbGRBbGlnTGVmdCk7XHJcbiAgICBfX3RlbXBsYXRlT3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXCIgLkVkaXRvci1Ub29sYmFyLUdyb3VwLlJpZ2h0ICBidXR0b24uQWxpZ24tQ2VudGVyLUJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc29ydEZpZWxkQWxpZ0hDZW50ZXIpO1xyXG4gICAgX190ZW1wbGF0ZU93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFwiIC5FZGl0b3ItVG9vbGJhci1Hcm91cC5SaWdodCAgYnV0dG9uLkFsaWduLVJpZ2h0LUJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc29ydEZpZWxkQWxpZ1JpZ2h0KTtcclxuICAgIF9fdGVtcGxhdGVPd25lck5vZGUucXVlcnlTZWxlY3RvcihcIiAuRWRpdG9yLVRvb2xiYXItR3JvdXAuUmlnaHQgIGJ1dHRvbi5BbGlnbi1Ub3AtQnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzb3J0RmllbGRBbGlnVG9wKTtcclxuICAgIF9fdGVtcGxhdGVPd25lck5vZGUucXVlcnlTZWxlY3RvcihcIiAuRWRpdG9yLVRvb2xiYXItR3JvdXAuUmlnaHQgIGJ1dHRvbi5BbGlnbi1NaWRkbGUtQnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzb3J0RmllbGRBbGlnVkNlbnRlcik7XHJcbiAgICBfX3RlbXBsYXRlT3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXCIgLkVkaXRvci1Ub29sYmFyLUdyb3VwLlJpZ2h0ICBidXR0b24uQWxpZ24tQm90dG9tLUJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc29ydEZpZWxkQWxpZ0JvdHRvbSk7XHJcblxyXG4gICAgX190ZW1wbGF0ZU93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFwiI3NjYWxlU2VsZWN0Q29udGFpbmVyXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzaG93U2NhbGVTZWxlY3Rvcik7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICBjaGFuZ2VMYXllclNpemUoZXZlbnQpO1xyXG4gICAgfSwgdHJ1ZSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24g7LSI6riwIHRhcmdldEVsZW1lbnQg7ZWY7JyE7JeQIGVkaXRvciBodG1s7JqU7IaM66W8IOy2lOqwgChhcHBlbmQp7ZWc64ukLlxyXG4gKlxyXG4gKiBAcGFyYW0ge0VsZW1lbnR9IG93bmVyTm9kZSAg7ZW064u5IO2UhOuhnOygne2KuOydmCDstZzsg4Hri6ggRWxlbWVudOuhnCDsp4DsoJXtlaAgdGFyZ2V0RWxlbWVudFxyXG4gKiBARGF0ZSA6IDIwMjQuIDIuIDEzXHJcbiAqIEBNZXRob2QgTmFtZSA6IGFwcGVuZEVkaXRvckhUTUxUb1RhcmdldFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGFwcGVuZEVkaXRvckhUTUxUb1RhcmdldCh0YXJnZXRFbGVtZW50KSB7XHJcbiAgICB0YXJnZXRFbGVtZW50LmlubmVySFRNTCArPSBgXHJcbiAgICA8ZGl2IGlkPVwidWRtX2VkaXRvcl9vdXRlckNvbnRhaW5lcl9kaXZcIiBjbGFzcz1cIm1pbi13MTIwMFwiXHJcblx0XHRcdHN0eWxlPVwiZGlzcGxheTogZmxleDsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgb3ZlcmZsb3c6IHZpc2libGU7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XCI+XHJcblx0XHRcdDxkaXYgaWQ9XCJvdXRlckNvbnRhaW5lclwiIGNsYXNzPVwiT3V0ZXItQ29udGFpbmVyXCI+XHJcblx0XHRcdFx0PGRpdiBpZD1cIk1haW5Db250YWluZXJcIiBjbGFzcz1cIk1haW4tQ29udGFpbmVyXCI+XHJcblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiVG9wLVRvb2xiYXJcIj5cclxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cIkVkaXRvci1Ub29sYmFyLUdyb3VwIExlZnQgQnV0dG9uLUxpc3RcIj5cclxuXHRcdFx0XHRcdFx0XHQ8YnV0dG9uIGNsYXNzPVwiVGVtcGxhdGUtQnV0dG9uIFRyYW5zcGFyZW50IFRvb2xiYXItQm9yZGVyIFVwbG9hZC1CdXR0b25cIj48aVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRjbGFzcz1cIlVwbG9hZC1CdXR0b25cIj48L2k+7YyM7J28IOu2iOufrOyYpOq4sDwvYnV0dG9uPlxyXG5cdFx0XHRcdFx0XHQ8L2Rpdj5cclxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cIkVkaXRvci1Ub29sYmFyLUdyb3VwIENlbnRlciBNQUlOLVRJVExFXCI+XHJcblx0XHRcdFx0XHRcdFx0PHNwYW4+PC9zcGFuPlxyXG5cdFx0XHRcdFx0XHQ8L2Rpdj5cclxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cIkVkaXRvci1Ub29sYmFyLUdyb3VwIFJpZ2h0IEJ1dHRvbi1MaXN0XCI+XHJcblx0XHRcdFx0XHRcdFx0PGJ1dHRvbiBjbGFzcz1cIlRlbXBsYXRlLUJ1dHRvbiBUcmFuc3BhcmVudCBUb29sYmFyLUJvcmRlciBQcmV2aWV3LUJ1dHRvblwiPjxpXHJcblx0XHRcdFx0XHRcdFx0XHRcdGNsYXNzPVwiUHJldmlldy1CdXR0b25cIj48L2k+7JaR7IudIOuvuOumrOuztOq4sDwvYnV0dG9uPlxyXG5cdFx0XHRcdFx0XHQ8L2Rpdj5cclxuXHJcblx0XHRcdFx0XHQ8L2Rpdj5cclxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJFZGl0b3ItVG9vbGJhclwiPlxyXG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiRWRpdG9yLVRvb2xiYXItR3JvdXAgTGVmdCBCdXR0b24tTGlzdFwiPlxyXG5cdFx0XHRcdFx0XHRcdDxidXR0b24gY2xhc3M9XCJUZW1wbGF0ZS1CdXR0b24gVHJhbnNwYXJlbnQgVG9vbGJhci1Cb3JkZXIgVW5kby1CdXR0b25cIj48aVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRjbGFzcz1cIlVuZG8tQnV0dG9uXCI+PC9pPuyLpO2Wiey3qOyGjDwvYnV0dG9uPlxyXG5cdFx0XHRcdFx0XHRcdDxidXR0b24gY2xhc3M9XCJUZW1wbGF0ZS1CdXR0b24gVHJhbnNwYXJlbnQgVG9vbGJhci1Cb3JkZXIgUmVkby1CdXR0b25cIj48aVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRjbGFzcz1cIlJlZG8tQnV0dG9uXCI+PC9pPuuLpOyLnOyLpO2WiTwvYnV0dG9uPlxyXG5cdFx0XHRcdFx0XHQ8L2Rpdj5cclxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cIkVkaXRvci1Ub29sYmFyLUdyb3VwIENlbnRlciBNQUlOLVRJVExFXCI+XHJcblx0XHRcdFx0XHRcdFx0PHNwYW4+PC9zcGFuPlxyXG5cdFx0XHRcdFx0XHQ8L2Rpdj5cclxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cIkVkaXRvci1Ub29sYmFyLUdyb3VwIFJpZ2h0IEJ1dHRvbi1MaXN0XCI+XHJcblx0XHRcdFx0XHRcdFx0PHVsPlxyXG5cdFx0XHRcdFx0XHRcdFx0PGxpPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHQ8ZGl2PlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDxidXR0b24gY2xhc3M9XCJUZW1wbGF0ZS1CdXR0b24gVHJhbnNwYXJlbnQgQWxpZ24tTGVmdC1CdXR0b25cIj48aVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjbGFzcz1cIlwiPjwvaT48L2J1dHRvbj5cclxuXHRcdFx0XHRcdFx0XHRcdFx0PC9kaXY+XHJcblx0XHRcdFx0XHRcdFx0XHQ8L2xpPlxyXG5cdFx0XHRcdFx0XHRcdFx0PGxpPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHQ8ZGl2PlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDxidXR0b24gY2xhc3M9XCJUZW1wbGF0ZS1CdXR0b24gVHJhbnNwYXJlbnQgQWxpZ24tQ2VudGVyLUJ1dHRvblwiPjxpXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNsYXNzPVwiXCI+PC9pPjwvYnV0dG9uPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHQ8L2Rpdj5cclxuXHJcblx0XHRcdFx0XHRcdFx0XHQ8L2xpPlxyXG5cdFx0XHRcdFx0XHRcdFx0PGxpPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHQ8ZGl2PjxidXR0b24gY2xhc3M9XCJUZW1wbGF0ZS1CdXR0b24gVHJhbnNwYXJlbnQgQWxpZ24tUmlnaHQtQnV0dG9uXCI+PGlcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xhc3M9XCJcIj48L2k+PC9idXR0b24+PC9kaXY+XHJcblx0XHRcdFx0XHRcdFx0XHQ8L2xpPlxyXG5cdFx0XHRcdFx0XHRcdFx0PGxpPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHQ8ZGl2PlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJUb29sYmFyLUJ1dHRvbi1EaXZpZGVyXCI+PC9kaXY+XHJcblx0XHRcdFx0XHRcdFx0XHRcdDwvZGl2PlxyXG5cdFx0XHRcdFx0XHRcdFx0PC9saT5cclxuXHRcdFx0XHRcdFx0XHRcdDxsaT5cclxuXHRcdFx0XHRcdFx0XHRcdFx0PGRpdj48YnV0dG9uIGNsYXNzPVwiVGVtcGxhdGUtQnV0dG9uIFRyYW5zcGFyZW50IEFsaWduLVRvcC1CdXR0b24gXCI+PGlcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xhc3M9XCJcIj48L2k+PC9idXR0b24+PC9kaXY+XHJcblx0XHRcdFx0XHRcdFx0XHQ8L2xpPlxyXG5cdFx0XHRcdFx0XHRcdFx0PGxpPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHQ8ZGl2PjxidXR0b24gY2xhc3M9XCJUZW1wbGF0ZS1CdXR0b24gVHJhbnNwYXJlbnQgQWxpZ24tTWlkZGxlLUJ1dHRvbiBcIj48aVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjbGFzcz1cIlwiPjwvaT48L2J1dHRvbj48L2Rpdj5cclxuXHRcdFx0XHRcdFx0XHRcdDwvbGk+XHJcblx0XHRcdFx0XHRcdFx0XHQ8bGk+XHJcblx0XHRcdFx0XHRcdFx0XHRcdDxkaXY+PGJ1dHRvbiBjbGFzcz1cIlRlbXBsYXRlLUJ1dHRvbiBUcmFuc3BhcmVudCBBbGlnbi1Cb3R0b20tQnV0dG9uXCI+PGlcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xhc3M9XCJcIj48L2k+PC9idXR0b24+PC9kaXY+XHJcblx0XHRcdFx0XHRcdFx0XHQ8L2xpPlxyXG5cdFx0XHRcdFx0XHRcdFx0PGxpPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHQ8c3BhbiBpZD1cInNjYWxlU2VsZWN0Q29udGFpbmVyXCIgY2xhc3M9XCJUb29sYmFyLUxhYmVsXCI+PGE+MTAwJTwvYT48L3NwYW4+XHJcblx0XHRcdFx0XHRcdFx0XHQ8L2xpPlxyXG5cdFx0XHRcdFx0XHRcdFx0PGxpPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHQ8ZGl2PjxidXR0b24gY2xhc3M9XCJUZW1wbGF0ZS1CdXR0b24gVHJhbnNwYXJlbnQgWm9vbS1PdXQtQnV0dG9uXCJcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlkPVwiWm9vbS1PdXQtQnV0dG9uXCI+PGkgY2xhc3M9XCJcIj48L2k+PC9idXR0b24+PC9kaXY+XHJcblx0XHRcdFx0XHRcdFx0XHQ8L2xpPlxyXG5cdFx0XHRcdFx0XHRcdFx0PGxpPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHQ8ZGl2PjxidXR0b24gY2xhc3M9XCJUZW1wbGF0ZS1CdXR0b24gVHJhbnNwYXJlbnQgWm9vbS1Jbi1CdXR0b25cIlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWQ9XCJab29tLUluLUJ1dHRvblwiPjxpIGNsYXNzPVwiXCI+PC9pPjwvYnV0dG9uPjwvZGl2PlxyXG5cdFx0XHRcdFx0XHRcdFx0PC9saT5cclxuXHRcdFx0XHRcdFx0XHQ8L3VsPlxyXG5cdFx0XHRcdFx0XHQ8L2Rpdj5cclxuXHRcdFx0XHRcdDwvZGl2PlxyXG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cIkVkaXRvci1Db21wb25lbnRcIiBpZD1cIkVkaXRvci1Db21wb25lbnRcIj5cclxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cIkVkaXRvci1Db21wb25lbnRfQm94XCI+XHJcblx0XHRcdFx0XHRcdFx0PGRpdj5cclxuXHRcdFx0XHRcdFx0XHRcdDx1bCBzdHlsZT1cInRvdWNoLWFjdGlvbjogbm9uZTtcIj5cclxuXHRcdFx0XHRcdFx0XHRcdFx0PGxpIGRhdGEtaW5kZXg9MD48c3BhbiBkYXRhLWkxOG49XCJUZW1wbGF0ZS5zaWduRmllbGRUb29sXCJcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNsYXNzPVwidGl0IHNpZ24tZmllbGQtaWNvXCI+7ISc66qFPC9zcGFuPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHQ8L2xpPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHQ8bGkgZGF0YS1pbmRleD0xPjxzcGFuIGRhdGEtaTE4bj1cIlRlbXBsYXRlLnRleHRGaWVsZFRvb2xcIlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xhc3M9XCJ0aXQgdGV4dC1maWVsZC1pY29cIj7thY3siqTtirg8L3NwYW4+XHJcblx0XHRcdFx0XHRcdFx0XHRcdDwvbGk+XHJcblx0XHRcdFx0XHRcdFx0XHRcdDxsaSBkYXRhLWluZGV4PTIgY2xhc3M9XCJcIj48c3BhbiBkYXRhLWkxOG49XCJUZW1wbGF0ZS5tdWx0aWxpbmVGaWVsZFRvb2xcIlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xhc3M9XCJ0aXQgbXVsdGlsaW5lLWZpZWxkLWljb1wiPuupgO2LsOudvOyduDwvc3Bhbj5cclxuXHRcdFx0XHRcdFx0XHRcdFx0PC9saT5cclxuXHRcdFx0XHRcdFx0XHRcdFx0PGxpIGRhdGEtaW5kZXg9MyBjbGFzcz1cIlwiPjxzcGFuIGRhdGEtaTE4bj1cIlRlbXBsYXRlLmxhYmVsRmllbGRUb29sXCJcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNsYXNzPVwidGl0IGxhYmVsLWZpZWxkLWljb1wiPuugiOydtOu4lDwvc3Bhbj5cclxuXHRcdFx0XHRcdFx0XHRcdFx0PC9saT5cclxuXHRcdFx0XHRcdFx0XHRcdFx0PGxpIGRhdGEtaW5kZXg9NCBjbGFzcz1cIlwiPjxzcGFuIGRhdGEtaTE4bj1cIlRlbXBsYXRlLmNoZWNrRmllbGRUb29sXCJcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNsYXNzPVwidGl0IGNoZWNrLWZpZWxkLWljb1wiPuyytO2BrDwvc3Bhbj5cclxuXHRcdFx0XHRcdFx0XHRcdFx0PC9saT5cclxuXHRcdFx0XHRcdFx0XHRcdFx0PGxpIGRhdGEtaW5kZXg9NSBjbGFzcz1cIlwiPjxzcGFuIGRhdGEtaTE4bj1cIlRlbXBsYXRlLnJhZGlvRmllbGRUb29sXCJcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNsYXNzPVwidGl0IHJhZGlvLWZpZWxkLWljb1wiPuudvOuUlOyYpDwvc3Bhbj5cclxuXHRcdFx0XHRcdFx0XHRcdFx0PC9saT5cclxuXHRcdFx0XHRcdFx0XHRcdFx0PGxpIGRhdGEtaW5kZXg9NiBjbGFzcz1cIlwiPjxzcGFuIGRhdGEtaTE4bj1cIlRlbXBsYXRlLmNvbWJvRmllbGRUb29sXCJcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNsYXNzPVwidGl0IGNvbWJvLWZpZWxkLWljb1wiPuy9pOuztDwvc3Bhbj5cclxuXHRcdFx0XHRcdFx0XHRcdFx0PC9saT5cclxuXHRcdFx0XHRcdFx0XHRcdFx0PGxpIGRhdGEtaW5kZXg9Nz48c3BhbiBkYXRhLWkxOG49XCJUZW1wbGF0ZS5kYXRlRmllbGRUb29sXCJcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNsYXNzPVwidGl0IGRhdGUtZmllbGQtaWNvXCI+64Kg7KecPC9zcGFuPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHQ8L2xpPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHQ8bGkgZGF0YS1pbmRleD04PjxzcGFuIGRhdGEtaTE4bj1cIlRlbXBsYXRlLm51bWJlckZpZWxkVG9vbFwiXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjbGFzcz1cInRpdCBudW1iZXItZmllbGQtaWNvXCI+7Iir7J6QPC9zcGFuPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHQ8L2xpPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHQ8bGkgZGF0YS1pbmRleD05IGNsYXNzPVwiXCI+PHNwYW4gZGF0YS1pMThuPVwiVGVtcGxhdGUuaW1hZ2VGaWVsZFRvb2xcIlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xhc3M9XCJ0aXQgaW1hZ2UtZmllbGQtaWNvXCI+7J2066+47KeAPC9zcGFuPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHQ8L2xpPlxyXG5cdFx0XHRcdFx0XHRcdFx0PC91bD5cclxuXHRcdFx0XHRcdFx0XHQ8L2Rpdj5cclxuXHRcdFx0XHRcdFx0PC9kaXY+XHJcblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJFZGl0b3ItVXNlci1Db21wb25lbnRfQm94XCIgaWQ9XCJFZGl0b3ItVXNlci1Db21wb25lbnRfQm94XCI+XHJcblxyXG5cdFx0XHRcdFx0XHQ8L2Rpdj5cclxuXHRcdFx0XHRcdDwvZGl2PlxyXG5cclxuXHRcdFx0XHRcdDwhLS0g67Cc7IahIOq0gOugqCDsmIHsl60gLS0+XHJcblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiRWRpdG9yLVJpZ2h0LUNvbXBvbmVudFwiIGlkPVwiRWRpdG9yLVJpZ2h0LUNvbXBvbmVudFwiPlxyXG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiRWRpdG9yLVNlbmQtQ29tcG9uZW50X0JveFwiPlxyXG5cdFx0XHRcdFx0XHRcdDxkaXY+XHJcblx0XHRcdFx0XHRcdFx0XHQ8dWwgc3R5bGU9XCJ0b3VjaC1hY3Rpb246IG5vbmU7XCI+XHJcblx0XHRcdFx0XHRcdFx0XHRcdDxwPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwidGl0IHRpdC1zZW5kIHNpZ24tZmllbGQtaWNvXCI+7JaR7IudIOygleuztDwvc3Bhbj5cclxuXHRcdFx0XHRcdFx0XHRcdFx0PC9wPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHQ8bGkgZGF0YS1pbmRleD0wPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwidGl0XCI+66y47ISc7KCc66qpIDwvc3Bhbj5cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwidWRtX3RlbXBsYXRlX3RpdGxlXCIgaWQ9XCJ1ZG1fdGVtcGxhdGVfdGl0bGVcIj5cclxuXHRcdFx0XHRcdFx0XHRcdFx0PC9saT5cclxuXHRcdFx0XHRcdFx0XHRcdFx0PGxpIGRhdGEtaW5kZXg9MD5cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cInRpdFwiPuyVjOumvOuCtOyaqSA8L3NwYW4+XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0PGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInVkbV9tZXNzYWdlXCIgaWQ9XCJ1ZG1fbWVzc2FnZVwiPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHQ8L2xpPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHQ8bGkgZGF0YS1pbmRleD0wPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwidGl0XCI+66eM66OM7J287J6QIDwvc3Bhbj5cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwidWRtX2V4cGlyZWRfZGF0ZVwiIGlkPVwidWRtX2V4cGlyZWRfZGF0ZVwiPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHQ8L2xpPlxyXG5cclxuXHRcdFx0XHRcdFx0XHRcdFx0PHA+XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0PHNwYW4gY2xhc3M9XCJ0aXQgdGl0LXNlbmQgc2lnbi1maWVsZC1pY29cIj7rs7TrgrTripQg67aEPC9zcGFuPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHQ8L3A+XHJcblx0XHRcdFx0XHRcdFx0XHRcdDxsaSBkYXRhLWluZGV4PTA+XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0PHNwYW4gY2xhc3M9XCJ0aXRcIj7snbQg66aEIDwvc3Bhbj5cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwidWRtX3NlbmRlcl9ubVwiIGlkPVwidWRtX3NlbmRlcl9ubVwiPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHQ8L2xpPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHQ8bGkgZGF0YS1pbmRleD0wPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwidGl0XCI+7J2066mU7J28PC9zcGFuPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJ1ZG1fc2VuZGVyX2VtYWlsXCIgaWQ9XCJ1ZG1fc2VuZGVyX2VtYWlsXCI+XHJcblx0XHRcdFx0XHRcdFx0XHRcdDwvbGk+XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0XHQ8cD5cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cInRpdCB0aXQtc2VuZCBzaWduLWZpZWxkLWljb1wiPuuwm+uKlCDrtoQ8L3NwYW4+XHJcblx0XHRcdFx0XHRcdFx0XHRcdDwvcD5cclxuXHRcdFx0XHRcdFx0XHRcdFx0PGxpIGRhdGEtaW5kZXg9MD5cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cInRpdFwiPuydtCDrpoQgPC9zcGFuPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJ1ZG1fcmVjaWV2ZXJfbm1cIiBpZD1cInVkbV9yZWNpZXZlcl9ubVwiPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHQ8L2xpPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHQ8bGkgZGF0YS1pbmRleD0wPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwidGl0XCI+7J20IOuplCDsnbw8L3NwYW4+XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0PGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInVkbV9yZWNpZXZlcl9lbWFpbFwiIGlkPVwidWRtX3JlY2lldmVyX2VtYWlsXCI+XHJcblx0XHRcdFx0XHRcdFx0XHRcdDwvbGk+XHJcblx0XHRcdFx0XHRcdFx0XHRcdDxsaSBkYXRhLWluZGV4PTA+XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0PHNwYW4gY2xhc3M9XCJ0aXRcIj7sl7Ag6529IOyymDwvc3Bhbj5cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwidWRtX3JlY2lldmVyX3Bob25lXCIgaWQ9XCJ1ZG1fcmVjaWV2ZXJfcGhvbmVcIj5cclxuXHRcdFx0XHRcdFx0XHRcdFx0PC9saT5cclxuXHRcdFx0XHRcdFx0XHRcdDwvdWw+XHJcblx0XHRcdFx0XHRcdFx0PC9kaXY+XHJcblxyXG5cdFx0XHRcdFx0XHQ8L2Rpdj5cclxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cIkVkaXRvci1Vc2VyLVNlbmQtQ29tcG9uZW50X0JveFwiIGlkPVwiRWRpdG9yLVVzZXItU2VuZC1Db21wb25lbnRfQm94XCI+XHJcblx0XHRcdFx0XHRcdDwvZGl2PlxyXG5cclxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cIkJ1dHRvbi1MaXN0XCI+XHJcblx0XHRcdFx0XHRcdFx0PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJUZW1wbGF0ZS1CdXR0b24gVGVtcGxhdGUtRWRpdG9ydC1CdXR0b24wMSBNYXJnaW4tUmlnaHQtNVwiXHJcblx0XHRcdFx0XHRcdFx0XHRvbmNsaWNrPVwianNvblNhdmUoKTsgY29uc29sZS5sb2codGVtcGxhdGVtb2QuZ2V0SnNvbkRhdGEoKSk7XCI+7Y647KeRIOuCtOyaqSDsoIDsnqU8L2J1dHRvbj5cclxuXHRcdFx0XHRcdFx0XHQ8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cIlRlbXBsYXRlLUJ1dHRvbiBUZW1wbGF0ZS1FZGl0b3J0LUJ1dHRvbjAyXCIgb25jbGljaz1cIm1haWxTZW5kKClcIj4g66mU7J28IOuwnOyGoVxyXG5cdFx0XHRcdFx0XHRcdDwvYnV0dG9uPlxyXG5cdFx0XHRcdFx0XHQ8L2Rpdj5cclxuXHJcblx0XHRcdFx0XHQ8L2Rpdj5cclxuXHJcblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiRWRpdG9yLUNvbXBvbmVudC1BY3RpdmUtQnV0dG9uXCIgaWQ9XCJFZGl0b3ItQ29tcG9uZW50LUFjdGl2ZS1CdXR0b25cIj5cclxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cIkJ1dHRvbi1JY29uLUNvbXBvbmVudFwiPlxyXG5cdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwiQXJyb3ctQnRuIFJldmVyc2UtQnRuXCI+PC9zcGFuPlxyXG5cdFx0XHRcdFx0XHQ8L2Rpdj5cclxuXHRcdFx0XHRcdDwvZGl2PlxyXG5cclxuXHRcdFx0XHRcdDxkaXYgaWQ9XCJUZW1wbGF0ZVZpZXdlckNvbnRhaW5lclwiIGNsYXNzPVwiVmlld2VyLUNvbnRhaW5lclwiPlxyXG5cdFx0XHRcdFx0XHQ8ZGl2IGlkPVwiVGVtcGxhdGVQREZWaWV3ZXJcIiBjbGFzcz1cInBkZlZpZXdlclwiPjwvZGl2PlxyXG5cdFx0XHRcdFx0XHQ8IS0tICAgICDtjIzsnbzsl4XroZzrk5wgICAgICAgLS0+XHJcblx0XHRcdFx0XHRcdDxkaXYgaWQ9XCJmaWxlVXBsb2FkXCIgY2xhc3M9XCJkcmFnQW5kRHJvcERpdlwiPlxyXG5cdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJkcmFnQW5kRHJvcERpdl9jb250ZW50XCI+UERGIO2MjOydvOydhCBEcmFnICYgRHJvcCA8QlI+PEJSPu2YueydgDxCUj48QlI+7YG066at7ZWY7JesIO2MjOydvOyXheuhnOuTnCDtlbTso7zshLjsmpQuPC9kaXY+XHJcblx0XHRcdFx0XHRcdDwvZGl2PlxyXG5cdFx0XHRcdFx0XHQ8aW5wdXQgdHlwZT1cImZpbGVcIiBuYW1lPVwiZmlsZVVwbG9hZFwiIGlkPVwiZmlsZVVwbG9hZFwiIHN0eWxlPVwiZGlzcGxheTpub25lO1wiIG11bHRpcGxlLz5cclxuXHRcdFx0XHRcdDwvZGl2PlxyXG5cclxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJTY2FsZS1TZWxldG9yLUNvbnRhaW5lciBUZW1wbGF0ZS1IaWRlXCIgaWQ9XCJTY2FsZS1TZWxldG9yXCI+XHJcblx0XHRcdFx0XHRcdDxzZWxlY3Q+XHJcblx0XHRcdFx0XHRcdFx0PG9wdGlvbiB2YWx1ZT1cIjAuM1wiPjMwJTwvb3B0aW9uPlxyXG5cdFx0XHRcdFx0XHRcdDxvcHRpb24gdmFsdWU9XCIwLjVcIj41MCU8L29wdGlvbj5cclxuXHRcdFx0XHRcdFx0XHQ8b3B0aW9uIHZhbHVlPVwiMC44XCI+ODAlPC9vcHRpb24+XHJcblx0XHRcdFx0XHRcdFx0PG9wdGlvbiB2YWx1ZT1cIjFcIj4xMDAlPC9vcHRpb24+XHJcblx0XHRcdFx0XHRcdFx0PG9wdGlvbiB2YWx1ZT1cIjEuMlwiPjEyMCU8L29wdGlvbj5cclxuXHRcdFx0XHRcdFx0XHQ8b3B0aW9uIHZhbHVlPVwiMS41XCI+MTUwJTwvb3B0aW9uPlxyXG5cdFx0XHRcdFx0XHRcdDxvcHRpb24gdmFsdWU9XCIyXCI+MjAwJTwvb3B0aW9uPlxyXG5cdFx0XHRcdFx0XHRcdDxvcHRpb24gdmFsdWU9XCIzXCI+MzAwJTwvb3B0aW9uPlxyXG5cdFx0XHRcdFx0XHRcdDxvcHRpb24gdmFsdWU9XCI0XCI+NDAwJTwvb3B0aW9uPlxyXG5cdFx0XHRcdFx0XHQ8L3NlbGVjdD5cclxuXHRcdFx0XHRcdDwvZGl2PlxyXG5cdFx0XHRcdDwvZGl2PlxyXG5cdFx0XHQ8L2Rpdj5cclxuXHRcdDwvZGl2PlxyXG4gICAgYDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiDsg53shLHrkJwgZWRpdG9yIEhUTUwg7JqU7IaM66W8IOyCreygnO2VnOuLpC5cclxuICpcclxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRFbGVtZW50IOyCreygnO2VoCBIVE1MIOyalOyGjOydmCDsg4HsnIQg64W465OcXHJcbiAqIEBEYXRlIDogMjAyNC4gMi4gMjNcclxuICogQE1ldGhvZCBOYW1lIDogcmVtb3ZlRWRpdG9ySFRNTEZyb21UYXJnZXRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVFZGl0b3JIVE1MRnJvbVRhcmdldCh0YXJnZXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlZGl0b3JDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVkbV9lZGl0b3Jfb3V0ZXJDb250YWluZXJfZGl2XCIpO1xyXG4gICAgaWYgKGVkaXRvckNvbnRhaW5lcikge1xyXG4gICAgICAgIC8vIGVkaXRvckNvbnRhaW5lcuqwgCDsobTsnqztlZjrqbQg7IKt7KCc7ZWp64uI64ukLlxyXG4gICAgICAgIHRhcmdldEVsZW1lbnQucmVtb3ZlQ2hpbGQoZWRpdG9yQ29udGFpbmVyKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcIkVkaXRvciBIVE1MIOyalOyGjOqwgCDsobTsnqztlZjsp4Ag7JWK7Iq164uI64ukLlwiKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24gVGVtcGxhdGUgRmllbGTsoJXrs7Trpbwg67CY7ZmY7ZWc64ukLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHtPYmplY3R9IFRlbXBsYXRlIEZpZWxkIOygleuztFxyXG4gKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAqIEBNZXRob2QgTmFtZSA6IGdldEpzb25EYXRhXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0SnNvbkRhdGEoKSB7XHJcbiAgICByZXR1cm4gdGVtcGxhdGVtb2QuZXhwb3J0RmllbGREYXRhKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24gVGVtcGxhdGXsl5DshJwg7IKs7Jqp7ZaI642YIOuNsOydtO2EsOuTpOydhCDstIjquLDtmZTtlZzri6QuXHJcbiAqXHJcbiAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICogQE1ldGhvZCBOYW1lIDogcmVsZWFzZVRlbXBsYXRlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVsZWFzZVRlbXBsYXRlKCkge1xyXG5cclxuICAgIGxldCB0YXJnZXRFbEJ0biA9IF9fdGVtcGxhdGVPd25lck5vZGUucXVlcnlTZWxlY3RvcihcIiNFZGl0b3ItQ29tcG9uZW50LUFjdGl2ZS1CdXR0b25cIik7XHJcbiAgICBsZXQgdGFyZ2V0RWxQYW5lbCA9IF9fdGVtcGxhdGVPd25lck5vZGUucXVlcnlTZWxlY3RvcihcIiNFZGl0b3ItQ29tcG9uZW50XCIpO1xyXG4gICAgaWYgKHRhcmdldEVsQnRuLmNsYXNzTGlzdC5jb250YWlucyhcIkxlZnQtUGFuZWwtQnRuLUhpZGUtQW5pbWF0aW9uXCIpKSB7XHJcbiAgICAgICAgdGFyZ2V0RWxCdG4uY2xhc3NMaXN0LnRvZ2dsZShcIkxlZnQtUGFuZWwtQnRuLUhpZGUtQW5pbWF0aW9uXCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRhcmdldEVsUGFuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwiTGVmdC1QYW5lbC1IaWRlLUFuaW1hdGlvblwiKSkge1xyXG4gICAgICAgIHRhcmdldEVsUGFuZWwuY2xhc3NMaXN0LnRvZ2dsZShcIkxlZnQtUGFuZWwtSGlkZS1BbmltYXRpb25cIik7XHJcbiAgICB9XHJcbiAgICBpZiAodGFyZ2V0RWxCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKFwiTGVmdC1QYW5lbC1CdG4tU2hvdy1BbmltYXRpb25cIikpIHtcclxuICAgICAgICB0YXJnZXRFbEJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiTGVmdC1QYW5lbC1CdG4tU2hvdy1BbmltYXRpb25cIik7XHJcbiAgICB9XHJcbiAgICBpZiAodGFyZ2V0RWxQYW5lbC5jbGFzc0xpc3QuY29udGFpbnMoXCJMZWZ0LVBhbmVsLVNob3ctQW5pbWF0aW9uXCIpKSB7XHJcbiAgICAgICAgdGFyZ2V0RWxQYW5lbC5jbGFzc0xpc3QudG9nZ2xlKFwiTGVmdC1QYW5lbC1TaG93LUFuaW1hdGlvblwiKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdGVtcGxhdGVMYXllciA9IF9fdGVtcGxhdGVPd25lck5vZGUucXVlcnlTZWxlY3RvcihcIiNcIiArIENPTlNUQU5UUy5URU1QTEFURV9MQVlFUl9OQU1FKTtcclxuICAgIGlmICh0ZW1wbGF0ZUxheWVyICE9PSBudWxsKSB7XHJcbiAgICAgICAgVXRpbHMucmVtb3ZlQWxsQ2hpbGROb2RlKHRlbXBsYXRlTGF5ZXIpO1xyXG4gICAgfVxyXG4gICAgbGV0IGFzdGVyaXNrTGF5ZXIgPSBfX3RlbXBsYXRlT3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXCIjXCIgKyBDT05TVEFOVFMuVEVNUExBVEVfTEFZRVJfQVNURVJJU0tfTkFNRSk7XHJcbiAgICBpZiAoYXN0ZXJpc2tMYXllciAhPT0gbnVsbCkge1xyXG4gICAgICAgIFV0aWxzLnJlbW92ZUFsbENoaWxkTm9kZShhc3Rlcmlza0xheWVyKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiBGaWVsZOykkeyXkCDrsJjrk5zsi5wg7ISk7KCV7ZW07JW865CgIOyGjeyEseydtCDshKTsoJUg65CY7Ja07J6I64qU7KeAIOyytO2BrO2VnOuLpC5cclxuICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gKiBATWV0aG9kIE5hbWUgOiBjaGVja1RlbXBsYXRlRmllbGREYXRhXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tUZW1wbGF0ZUZpZWxkRGF0YSgpIHtcclxuICAgIHJldHVybiB0ZW1wbGF0ZW1vZC5jaGVja1RlbXBsYXRlRmllbGREYXRhKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24g7ZiE7J6sIOyWuOyWtOulvCDtjIzrnbzrr7jthLDsl5Ag66ee6rKMIOuzgO2ZmO2VnOuLpC5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGxvY2FsZSDrsJTqv4Ag7Ja47Ja0XHJcbiAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICogQE1ldGhvZCBOYW1lIDogY2hhbmdlVGVtcGxhdGVMb2NhbGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGFuZ2VUZW1wbGF0ZUxvY2FsZShsb2NhbGUpIHtcclxuICAgIFV0aWxzLmNoYW5nZUxvY2FsZShsb2NhbGUpO1xyXG4gICAgdGVtcGxhdGVtb2QuYnVpbGRGaWVsZGZvcm1lckxpc3QoKTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24gIOuLpOq1reyWtCDslrjslrQg7YyM7J287J2YIOychOy5mOulvCDsp4DsoJXtlZzri6QuXHJcbiAqIEBleGFtcGxlXHJcbiAqIGxvY2FsaG9zdDo1NTAwL2pzL3BkZl9mb3JtL2kxOG7snZgg6rK97JqwICBcIi9qcy9wZGZfZm9ybS9pMThuXCJcclxuICogaW5pdERvY3VtZW50IOydtOyghOyXkCDtmLjstpzsnbQg65CY7Ja07JW87ZWc64ukLlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZmlsZXNMb2NhdGlvbiDslrjslrTtjIzsnbzsnZgg7JyE7LmYKOygiOuMgCDqsr3roZwpXHJcbiAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICogQE1ldGhvZCBOYW1lIDogY2hhbmdlVHJhbnNsYXRvckZpbGVMb2NhdGlvblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNoYW5nZVRyYW5zbGF0b3JGaWxlTG9jYXRpb24obGNhdGlvbikge1xyXG4gICAgVXRpbHMudHJhbnNsYXRvckZpbGVMb2NhdGlvbihsY2F0aW9uKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiAg64uk6rWt7Ja0IOyWuOyWtOulvCDstpTqsIDtlZzri6QuXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBsb2NhbGUg7Ja47Ja0IOydtOumhFxyXG4gKiBAcGFyYW0ge09iamVjdH0gbGFuZ0RhdGEgaTE4bi9rby5qc29u6rO8IOqwmeydgCDslpHsi53snLzroZwg65CcIEpTT07snYQg7YyM7Iux7ZWcIOuNsOydtO2EsFxyXG4gKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAqIEBNZXRob2QgTmFtZSA6IGFkZFRyYW5zbGF0b3JcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRUcmFuc2xhdG9yKGxvY2FsZSwgbGFuZ0RhdGEpIHtcclxuICAgIFV0aWxzLmFkZFRyYW5zbGF0b3IobG9jYWxlLCBsYW5nRGF0YSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjb3B5RmllbGQoKSB7XHJcbiAgICB0ZW1wbGF0ZW1vZC5jb3B5T2JqZWN0KCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXN0ZUZpZWxkKCkge1xyXG4gICAgdGVtcGxhdGVtb2QucGFzdGVPYmplY3QoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiBQYWdl7J2YIOuGkuydtOulvCDqs4TsgrDtlZzri6QuXHJcbiAqXHJcbiAqIEBwYXJhbSB7RWxlbWVudH0gUERGLmpz7JeQ7IScIOunjOuToCBQYWdlIEVsZW1lbnQgOiDqs4TsgrDtlaAgUGFnZSBFbGVtZW50XHJcbiAqIEByZXR1cm4ge051bWJlcn0gUGFnZSBIZWlnaHRcclxuICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gKiBATWV0aG9kIE5hbWUgOiBjYWxjUGFnZUhlaWdodFxyXG4gKi9cclxuIGZ1bmN0aW9uIGNhbGNQYWdlSGVpZ2h0KHBhZ2VFbGVtZW50KSB7XHJcbiAgICB2YXIgc3R5bGUgPSBwYWdlRWxlbWVudC5kaXYuY3VycmVudFN0eWxlIHx8IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHBhZ2VFbGVtZW50LmRpdik7XHJcbiAgICBjb25zdCBtYXJnaW5IZWlnaHQgPSBwYXJzZUZsb2F0KHN0eWxlLm1hcmdpblRvcCkgKyBwYXJzZUZsb2F0KHN0eWxlLm1hcmdpbkJvdHRvbSk7XHJcbiAgICBjb25zdCBwYWRkaW5nSGVpZ2h0ID0gcGFyc2VGbG9hdChzdHlsZS5wYWRkaW5nVG9wKSArIHBhcnNlRmxvYXQoc3R5bGUucGFkZGluZ0JvdHRvbSk7XHJcbiAgICBjb25zdCBib3JkZXJIZWlnaHQgPSBwYXJzZUZsb2F0KHN0eWxlLmJvcmRlclRvcFdpZHRoKSArIHBhcnNlRmxvYXQoc3R5bGUuYm9yZGVyQm90dG9tV2lkdGgpO1xyXG4gICAgcmV0dXJuIHBhZ2VFbGVtZW50LmhlaWdodCArIG1hcmdpbkhlaWdodCArIHBhZGRpbmdIZWlnaHQgKyBib3JkZXJIZWlnaHQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24gUGRmLmpz7JeQ7IScIHBhZ2VWaWV3c1JlYWR56rCAIHRydWXrkKDrlYwg6rmM7KeAIOyytO2BrO2VtOyEnCBUZW1wbGF0ZSBGaWVsZCBEYXRhIOy2lOqwgO2VnOuLpC5cclxuICpcclxuICogQHBhcmFtIHtCb29sZWFufSBvbGR2YWx1ZSBwYWdlVmlld3NSZWFkeeydmCDtmITsnqwg642w7J207YSw6rCSXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBpbXBvcnREYXRhICDstpTqsIDtlaAgVGVtcGxhdGUgRmllbGQgRGF0YVxyXG4gKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAqIEBNZXRob2QgTmFtZSA6IGNoZWNrUGFnZVZpZXdzUmVhZHlcclxuICovXHJcbmZ1bmN0aW9uIGNoZWNrUGFnZVZpZXdzUmVhZHkob2xkdmFsdWUsIGltcG9ydERhdGEpIHtcclxuICAgIHVuZGVmaW5lZCA9PT0gb2xkdmFsdWUgJiYgKG9sZHZhbHVlID0gcGRmVmlld2VyLnBhZ2VWaWV3c1JlYWR5KTtcclxuICAgIHZhciBjbGVhcmNoZWNrID0gc2V0SW50ZXJ2YWwocmVwZWF0Y2hlY2ssIDEwMCk7XHJcbiAgICBmdW5jdGlvbiByZXBlYXRjaGVjaygpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBkZlZpZXdlci5wYWdlVmlld3NSZWFkeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoXCJwYWdlVmlld3NSZWFkeVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGNsZWFyY2hlY2spO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICh0ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0ZXh0KTtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlbW9kLmltcG9ydEZpZWxkRGF0YShpbXBvcnREYXRhKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24gUERGIO2OmOydtOyngOydmCBMYXllcuyCrOydtOymiOqwgCDrs4DtlaAg65WM7J2YIOyymOumrOulvO2VnOuLpC5cclxuICpcclxuICogQHBhcmFtIHtFdmVudH0gZXZ0IGV2ZW50XHJcbiAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICogQE1ldGhvZCBOYW1lIDogY2hhbmdlTGF5ZXJTaXplXHJcbiAqL1xyXG4gZnVuY3Rpb24gY2hhbmdlTGF5ZXJTaXplKGV2dCkge1xyXG4gICAgbGV0IGhlaWdodCA9IDA7XHJcbiAgICBwZGZWaWV3ZXIuX3BhZ2VzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICBoZWlnaHQgKz0gY2FsY1BhZ2VIZWlnaHQoZWxlbWVudCk7XHJcbiAgICB9KTtcclxuICAgIHRlbXBsYXRlbW9kLnRlbXBsYXRlUmVzaXplKGV2dCwgaGVpZ2h0KTsvL2V2dCDrgrTrtoDsoIHsnLzroZwg7IKs7JqpIOyViCDrkJjqs6Ag7J6I7J2MLiDtmJXsi53sg4Eg64Sj7J2A65OvLiBcclxufVxyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiAg66y47ISc7J2YIOuwsOycqOydhCDstpXshoztlZzri6QuXHJcbiAqXHJcbiAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICogQE1ldGhvZCBOYW1lIDogZG9jdW1lbnRab29tT3V0XHJcbiAqL1xyXG5mdW5jdGlvbiAgZG9jdW1lbnRab29tT3V0KCkge1xyXG4gICAgY29uc3QgY3VycmVudFZhbHVlID0gcGFyc2VGbG9hdChwZGZWaWV3ZXIuY3VycmVudFNjYWxlKTtcclxuICAgIHBkZlZpZXdlci5jdXJyZW50U2NhbGUgPSBjdXJyZW50VmFsdWUgLSAwLjE7XHJcbiAgICBzZXRTY2FsZVZhbHVlVGV4dChwZGZWaWV3ZXIuY3VycmVudFNjYWxlKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiAg66y47ISc7J2YIOuwsOycqOydhCDtmZXrjIDtlZzri6QuXHJcbiAqXHJcbiAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICogQE1ldGhvZCBOYW1lIDogZG9jdW1lbnRab29tSW5cclxuICovXHJcbmZ1bmN0aW9uICBkb2N1bWVudFpvb21JbigpIHtcclxuICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IHBhcnNlRmxvYXQocGRmVmlld2VyLmN1cnJlbnRTY2FsZSk7XHJcbiAgICBwZGZWaWV3ZXIuY3VycmVudFNjYWxlID0gY3VycmVudFZhbHVlICsgMC4xO1xyXG4gICAgc2V0U2NhbGVWYWx1ZVRleHQocGRmVmlld2VyLmN1cnJlbnRTY2FsZSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24gIOusuOyEnOydmCDrsLDsnKjsnYQg7ISk7KCV7ZWc64ukLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gIHZhbHVl66y47ISc7J2YIOuwsOycqFxyXG4gKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAqIEBNZXRob2QgTmFtZSA6IHNldFNjYWxlVmFsdWVUZXh0XHJcbiAqL1xyXG4gZnVuY3Rpb24gc2V0U2NhbGVWYWx1ZVRleHQodmFsdWUpIHtcclxuICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IE1hdGguZmxvb3IocGFyc2VGbG9hdCh2YWx1ZSkgKiAxMDApO1xyXG4gICAgIHZhciBlbGVtZW50ID0gX190ZW1wbGF0ZU93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFwiICNzY2FsZVNlbGVjdENvbnRhaW5lciA+IGFcIik7XHJcbiAgICBlbGVtZW50LnRleHRDb250ZW50ID0gY3VycmVudFZhbHVlICsgXCIlXCI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24gIOyCrOydtOuTnCDtjKjrhJDsnbQg67O07J206rOgIOyeiOycvOuptCDsiKjquLDqs6Ag7Iio6rKo7J6I7Jy866m0IOuztOydtOqyjO2VnOuLpC5cclxuICpcclxuICogQHBhcmFtIHtFdmVudH0gZXZlbnQgZXZlbnRcclxuICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gKiBATWV0aG9kIE5hbWUgOiBoaWRlU2hvd1NpZGVQYW5lbFxyXG4gKi9cclxuZnVuY3Rpb24gaGlkZVNob3dTaWRlUGFuZWwoZXZlbnQpIHtcclxuICAgIGxldCB0YXJnZXRFbEJ0biA9IF9fdGVtcGxhdGVPd25lck5vZGUucXVlcnlTZWxlY3RvcihcIiNFZGl0b3ItQ29tcG9uZW50LUFjdGl2ZS1CdXR0b25cIik7XHJcbiAgICBsZXQgdGFyZ2V0RWxQYW5lbCA9IF9fdGVtcGxhdGVPd25lck5vZGUucXVlcnlTZWxlY3RvcihcIiNFZGl0b3ItQ29tcG9uZW50XCIpO1xyXG5cdGxldCB0YXJnZXRFbFZpZXdlckNvbnRhaW5lciA9IF9fdGVtcGxhdGVPd25lck5vZGUucXVlcnlTZWxlY3RvcihcIiNUZW1wbGF0ZVZpZXdlckNvbnRhaW5lclwiKTtcclxuXHRsZXQgdGFyZ2V0RWxFZGl0b3JUb29sYmFyID0gX190ZW1wbGF0ZU93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFwiLkVkaXRvci1Ub29sYmFyXCIpO1xyXG4gICAgbGV0IGFycm93QnRuID0gX190ZW1wbGF0ZU93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFwiI0VkaXRvci1Db21wb25lbnQtQWN0aXZlLUJ1dHRvbiA+IC5CdXR0b24tSWNvbi1Db21wb25lbnQgLkFycm93LUJ0biBcIik7XHJcbiAgICBhcnJvd0J0bi5jbGFzc0xpc3QudG9nZ2xlKFwiUmV2ZXJzZS1CdG5cIik7XHJcbiAgICBpZiAoIXRhcmdldEVsQnRuLmNsYXNzTGlzdC5jb250YWlucyhcIkxlZnQtUGFuZWwtQnRuLUhpZGUtQW5pbWF0aW9uXCIpKSB7XHJcblx0XHQvL+uLq+ydhOuVjFxyXG4gICAgICAgIHRhcmdldEVsQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJMZWZ0LVBhbmVsLUJ0bi1IaWRlLUFuaW1hdGlvblwiKTtcclxuICAgICAgICB0YXJnZXRFbFBhbmVsLmNsYXNzTGlzdC50b2dnbGUoXCJMZWZ0LVBhbmVsLUhpZGUtQW5pbWF0aW9uXCIpO1xyXG4gICAgICAgIHRhcmdldEVsVmlld2VyQ29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoXCJsZWZ0ZnVsbFwiKTtcclxuICAgICAgICB0YXJnZXRFbEVkaXRvclRvb2xiYXIuY2xhc3NMaXN0LnRvZ2dsZShcImxlZnRmdWxsXCIpO1xyXG5cclxuICAgIH0gZWxzZSB7XHJcblx0XHQvL+yXtOuVjFxyXG4gICAgICAgIHRhcmdldEVsQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJMZWZ0LVBhbmVsLUJ0bi1TaG93LUFuaW1hdGlvblwiKTtcclxuICAgICAgICB0YXJnZXRFbFBhbmVsLmNsYXNzTGlzdC50b2dnbGUoXCJMZWZ0LVBhbmVsLVNob3ctQW5pbWF0aW9uXCIpO1xyXG4gICAgICAgIHRhcmdldEVsVmlld2VyQ29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoXCJsZWZ0ZnVsbFwiKTtcclxuICAgICAgICB0YXJnZXRFbEVkaXRvclRvb2xiYXIuY2xhc3NMaXN0LnRvZ2dsZShcImxlZnRmdWxsXCIpO1xyXG5cclxuICAgIH1cclxuXHJcblxyXG5cdGNvbnNvbGUubG9nKFwiY2hhbmdlTGF5ZXJTaXplXCIpO1xyXG4gICAgY2hhbmdlTGF5ZXJTaXplKGV2ZW50KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiAg7IKs7J2065OcIO2MqOuEkOydtCDrs7TsnbTqs6Ag7J6I7Jy866m0IOyIqOq4sOqzoCDsiKjqsqjsnojsnLzrqbQg67O07J206rKM7ZWc64ukLlxyXG4gKlxyXG4gKiBAcGFyYW0ge0V2ZW50fSBldnQgZXZlbnRcclxuICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gKiBATWV0aG9kIE5hbWUgOiBoaWRlU2hvd1NpZGVQYW5lbFxyXG4gKi9cclxuZnVuY3Rpb24gZmllbGRTZWxlY3RUb29sKGV2dCkge1xyXG4gICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgY29uc3QgZWxlbWVudCA9IGV2dC50YXJnZXQuY2xvc2VzdChcImxpXCIpO1xyXG4gICAgY29uc3Qgc2VsZWN0VmFsdWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtaW5kZXhcIik7XHJcbiAgICB0ZW1wbGF0ZW1vZC5jbGVhclNlbGVjdGVkVG9vbCgpO1xyXG4gICAgaWYgKCFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcInNlbGVjdGVkXCIpKSB7XHJcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRcIik7XHJcbiAgICB9XHJcbiAgICB0ZW1wbGF0ZW1vZC5zZWxlY3RUb29sKHBhcnNlSW50KHNlbGVjdFZhbHVlKSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24gIHVuZG8gYnV0dG9uIGhhbmRsZXJcclxuICpcclxuICogQHBhcmFtIHtFdmVudH0gZXZ0ICBldmVudFxyXG4gKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAqIEBNZXRob2QgTmFtZSA6IHVuZG9BY3Rpb25cclxuICovXHJcbmZ1bmN0aW9uIHVuZG9BY3Rpb24oZXZ0KSB7XHJcbiAgICB0ZW1wbGF0ZW1vZC51bmRvQWN0aW9uKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24gIHJlZG8gYnV0dG9uIGhhbmRsZXJcclxuICpcclxuICogQHBhcmFtIHtFdmVudH0gZXZ0IGV2ZW50XHJcbiAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICogQE1ldGhvZCBOYW1lIDogcmVkb0FjdGlvblxyXG4gKi9cclxuZnVuY3Rpb24gcmVkb0FjdGlvbihldnQpIHtcclxuICAgIHRlbXBsYXRlbW9kLnJlZG9BY3Rpb24oKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiAgRmllbGTrk6TsnYQg7Jm87Kq965287J247JeQIOunnuy2sOyEnCDsoJXroKxcclxuICpcclxuICogQHBhcmFtIHtFdmVudH0gZXZ0IGV2ZW50XHJcbiAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICogQE1ldGhvZCBOYW1lIDogc29ydEZpZWxkQWxpZ0xlZnRcclxuICovXHJcbmZ1bmN0aW9uIHNvcnRGaWVsZEFsaWdMZWZ0KGV2dCkge1xyXG4gICAgdGVtcGxhdGVtb2Quc29ydEZpZWxkc0FsaWduKFwibGVmdFwiKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiAgRmllbGTrk6TsnYQg7Jik66W47Kq965287J247JeQIOunnuy2sOyEnCDsoJXroKxcclxuICpcclxuICogQHBhcmFtIHtFdmVudH0gZXZ0IGV2ZW50XHJcbiAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICogQE1ldGhvZCBOYW1lIDogc29ydEZpZWxkc0FsaWduXHJcbiAqL1xyXG5mdW5jdGlvbiBzb3J0RmllbGRBbGlnUmlnaHQoZXZ0KSB7XHJcbiAgICB0ZW1wbGF0ZW1vZC5zb3J0RmllbGRzQWxpZ24oXCJyaWdodFwiKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiAgRmllbGTrk6TsnYQgeOyijO2RnCDquLDspIDsnZgg7IS87YSw65287J247JeQIOunnuy2sOyEnCDsoJXroKxcclxuICpcclxuICogQHBhcmFtIHtFdmVudH0gZXZ0IGV2ZW50XHJcbiAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICogQE1ldGhvZCBOYW1lIDogc29ydEZpZWxkQWxpZ0hDZW50ZXJcclxuICovXHJcbmZ1bmN0aW9uIHNvcnRGaWVsZEFsaWdIQ2VudGVyKGV2dCkge1xyXG4gICAgdGVtcGxhdGVtb2Quc29ydEZpZWxkc0FsaWduKFwiaENlbnRlclwiKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiAgRmllbGTrk6TsnYQgVG9w65287J247JeQIOunnuy2sOyEnCDsoJXroKxcclxuICpcclxuICogQHBhcmFtIHtFdmVudH0gZXZ0IGV2ZW50XHJcbiAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICogQE1ldGhvZCBOYW1lIDogc29ydEZpZWxkQWxpZ1RvcFxyXG4gKi9cclxuZnVuY3Rpb24gc29ydEZpZWxkQWxpZ1RvcChldnQpIHtcclxuICAgIHRlbXBsYXRlbW9kLnNvcnRGaWVsZHNBbGlnbihcInRvcFwiKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiAgRmllbGTrk6TsnYQgeeyijO2RnCDquLDspIDsnZgg7IS87YSw65287J247JeQIOunnuy2sOyEnCDsoJXroKxcclxuICpcclxuICogQHBhcmFtIHtFdmVudH0gZXZ0ICBldmVudFxyXG4gKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAqIEBNZXRob2QgTmFtZSA6IHNvcnRGaWVsZEFsaWdWQ2VudGVyXHJcbiAqL1xyXG5mdW5jdGlvbiBzb3J0RmllbGRBbGlnVkNlbnRlcihldnQpIHtcclxuICAgIHRlbXBsYXRlbW9kLnNvcnRGaWVsZHNBbGlnbihcInZDZW50ZXJcIik7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24gIEZpZWxk65Ok7J2EIEJvdHRvbeudvOyduOyXkCDrp57strDshJwg7KCV66CsXHJcbiAqXHJcbiAqIEBwYXJhbSB7RXZlbnR9IGV2dCBldmVudFxyXG4gKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAqIEBNZXRob2QgTmFtZSA6IHNvcnRGaWVsZEFsaWdCb3R0b21cclxuICovXHJcbmZ1bmN0aW9uIHNvcnRGaWVsZEFsaWdCb3R0b20oZXZ0KSB7XHJcbiAgICB0ZW1wbGF0ZW1vZC5zb3J0RmllbGRzQWxpZ24oXCJib3R0b21cIik7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24gIFBERuusuOyEnOydmCDrsLDsnKggU2VsZWN066W8IOuztOyXrOykgOuLpC5cclxuICpcclxuICogQHBhcmFtIHtFdmVudH0gZXZ0IGV2ZW50XHJcbiAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICogQE1ldGhvZCBOYW1lIDogc2hvd1NjYWxlU2VsZWN0b3JcclxuICovXHJcbmZ1bmN0aW9uIHNob3dTY2FsZVNlbGVjdG9yKGV2dCkge1xyXG5cclxuICAgIGNvbnN0IHRhcmdldEJib3ggPSBldnQudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgbGV0IHNjYWxlQ29udGFpbmVyID0gX190ZW1wbGF0ZU93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFwiLlNjYWxlLVNlbGV0b3ItQ29udGFpbmVyXCIpO1xyXG4gICAgY29uc29sZS5sb2codGFyZ2V0QmJveCk7XHJcbiAgICBzY2FsZUNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gdGFyZ2V0QmJveC5sZWZ0ICsgXCJweFwiO1xyXG4gICAgc2NhbGVDb250YWluZXIuc3R5bGUudG9wID0gdGFyZ2V0QmJveC50b3AgKyBcInB4XCI7XHJcbiAgICBzY2FsZUNvbnRhaW5lci5zdHlsZS56SW5kZXggPSBcIi0xXCI7XHJcbiAgICBcclxuICAgIGlmIChzY2FsZUNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoXCJUZW1wbGF0ZS1IaWRlXCIpKSB7XHJcbiAgICAgICAgc2NhbGVDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcIlRlbXBsYXRlLUhpZGVcIik7XHJcbiAgICB9XHJcbiAgICBsZXQgc2NhbGVTZWxlY3QgPSBzY2FsZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xyXG4gICAgaWYgKCEkKHNjYWxlU2VsZWN0KS5oYXNDbGFzcyhcInNlbGVjdDItaGlkZGVuLWFjY2Vzc2libGVcIikpIHtcclxuICAgICAgICAvLyBTZWxlY3QyIGhhcyBiZWVuIGluaXRpYWxpemVkXHJcbiAgICAgICAgJChzY2FsZVNlbGVjdCkuc2VsZWN0Mih7XHJcbiAgICAgICAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcclxuICAgICAgICAgICAgd2lkdGg6IFwiODBweFwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAkKHNjYWxlU2VsZWN0KS52YWwocGRmVmlld2VyLmN1cnJlbnRTY2FsZSkudHJpZ2dlcihcImNoYW5nZVwiKTtcclxuICAgICQoc2NhbGVTZWxlY3QpLnNlbGVjdDIoJ29wZW4nKTtcclxuICAgICQoc2NhbGVTZWxlY3QpLm9uKCdzZWxlY3QyOnNlbGVjdCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgLy8gRG8gc29tZXRoaW5nXHJcbiAgICAgICAgdmFyIGRhdGEgPSBlLnBhcmFtcy5kYXRhO1xyXG4gICAgICAgIHBkZlZpZXdlci5jdXJyZW50U2NhbGUgPSBkYXRhLmlkO1xyXG4gICAgICAgIHNldFNjYWxlVmFsdWVUZXh0KGRhdGEuaWQpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhcHBlbmRGb250RmFtaWx5KGZvbnRGYW1pbHlBcnIpIHtcclxuICAgIHRlbXBsYXRlbW9kLmFwcGVuZEZvbnRGYW1pbHkoZm9udEZhbWlseUFycik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhcHBlbmRTaWduVGFiU2hvd09wdChzaWduVGFiU2hvd0RlZk9wdFZhbCkge1xyXG4gIHRlbXBsYXRlbW9kLmFwcGVuZFNpZ25UYWJTaG93T3B0KHNpZ25UYWJTaG93RGVmT3B0VmFsKTtcclxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==