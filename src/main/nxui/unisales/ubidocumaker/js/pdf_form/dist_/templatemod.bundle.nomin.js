(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define("templatemod", [], factory);
	else if(typeof exports === 'object')
		exports["templatemod"] = factory();
	else
		root["templatemod"] = factory();
})(this, () => {
return /******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./js/pdf_form/src/Constants.js":
/*!**************************************!*\
  !*** ./js/pdf_form/src/Constants.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CONSTANTS: () => (/* binding */ CONSTANTS)
/* harmony export */ });

/**
 * @module Template/CONSTANTS
 */


/**
 * @description 프로젝트에서 사용하는 상수 모음
 *
 * @property {String} ASTERISK_ICON_CLASS {@link module:Template/CONSTANTS.CONSTANTS#ASTERISK_ICON_CLASS}
 * @property {Number} ASTREISK_DIV_HEIGHT {@link module:Template/CONSTANTS.CONSTANTS#ASTREISK_DIV_HEIGHT}
 * @property {String} CREATE_FIELD_ACTION  {@link module:Template/CONSTANTS.CONSTANTS#CREATE_FIELD_ACTION }
 * @property {String} DIVIDER_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#DIVIDER_CLASS }
 * @property {String} DRAG_BOX_NAME  {@link module:Template/CONSTANTS.CONSTANTS#DRAG_BOX_NAME }
 * @property {String} EDITOR_ATTR_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_CLASS }
 * @property {String} EDITOR_ATTR_CONTENTS_ROW_CLASS {@link module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_CONTENTS_ROW_CLASS}
 * @property {String} EDITOR_ATTR_DATE_INPUT_CLASS {@link module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_DATE_INPUT_CLASS}
 * @property {String} EDITOR_ATTR_INPUT_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_INPUT_CLASS }
 * @property {String} EDITOR_ATTR_INPUT_WRAP_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_INPUT_WRAP_CLASS }
 * @property {String} EDITOR_ATTR_KIND_CLASS {@link module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_KIND_CLASS}
 * @property {String} EDITOR_ATTR_PANEL_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_PANEL_CLASS }
 * @property {String} EDITOR_ATTR_PANEL_ID  {@link module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_PANEL_ID }
 * @property {String} EDITOR_ATTR_ROW_WRAP_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_ROW_WRAP_CLASS }
 * @property {String} EDITOR_ATTR_SELECT_CLASS {@link module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_SELECT_CLASS}
 * @property {String} EDITOR_ATTR_TEXTAREA_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_TEXTAREA_CLASS }
 * @property {String} EDITOR_COMPONENT_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#EDITOR_COMPONENT_CLASS }
 * @property {String} FIELD_ATTR_CHANGE_ACTION  {@link module:Template/CONSTANTS.CONSTANTS#FIELD_ATTR_CHANGE_ACTION }
 * @property {String} FIELD_DELETE_BUTTON_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#FIELD_DELETE_BUTTON_CLASS }
 * @property {String} GROUP_ATTR_CHANGE_ACTION {@link module:Template/CONSTANTS.CONSTANTS#GROUP_ATTR_CHANGE_ACTION}
 * @property {String} GROUP_ATTR_OWNER_CHANGE_ACTION {@link module:Template/CONSTANTS.CONSTANTS#GROUP_ATTR_OWNER_CHANGE_ACTION}
 * @property {String} GROUP_REMOVE_ACTION {@link module:Template/CONSTANTS.CONSTANTS#GROUP_REMOVE_ACTION}
 * @property {String} HIDE_CLASS {@link module:Template/CONSTANTS.CONSTANTS#HIDE_CLASS}
 * @property {String} MAIN_GROUP_NAME {@link module:Template/CONSTANTS.CONSTANTS#MAIN_GROUP_NAME}
 * @property {Number} MINIMUM_DRAG_SIZE  {@link module:Template/CONSTANTS.CONSTANTS#MINIMUM_DRAG_SIZE }
 * @property {String} PREVIEW_READER_PDF_VIEWER {@link module:Template/CONSTANTS.CONSTANTS#PREVIEW_READER_PDF_VIEWER}
 * @property {String} PREVIEW_READER_PDF_VIEWER_CONTAINER  {@link module:Template/CONSTANTS.CONSTANTS#PREVIEW_READER_PDF_VIEWER_CONTAINER }
 * @property {String} READER_PAGE_FIELD_LAYER_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#READER_PAGE_FIELD_LAYER_CLASS }
 * @property {String} READER_PDF_VIEWER  {@link module:Template/CONSTANTS.CONSTANTS#READER_PDF_VIEWER }
 * @property {String} READER_PDF_VIEWER_CONTAINER  {@link module:Template/CONSTANTS.CONSTANTS#READER_PDF_VIEWER_CONTAINER }
 * @property {String} REMOVE_FIELD_ACTION {@link module:Template/CONSTANTS.CONSTANTS#REMOVE_FIELD_ACTION}
 * @property {String} SHOW_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#SHOW_CLASS }
 * @property {String} SWITCH_LABEL_CLASS {@link module:Template/CONSTANTS.CONSTANTS#SWITCH_LABEL_CLASS}
 * @property {String} SWITCH_LABEL_SLIDER_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#SWITCH_LABEL_SLIDER_CLASS }
 * @property {String} SWITCH_LABEL_SLIDER_ROUND_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#SWITCH_LABEL_SLIDER_ROUND_CLASS }
 * @property {String} TEMPLATE_LAYER_ASTERISK_NAME  {@link module:Template/CONSTANTS.CONSTANTS#TEMPLATE_LAYER_ASTERISK_NAME }
 * @property {String} TEMPLATE_LAYER_NAME {@link module:Template/CONSTANTS.CONSTANTS#TEMPLATE_LAYER_NAME}
 * @property {String} TEMPLATE_LAYER_RECT_NAME  {@link module:Template/CONSTANTS.CONSTANTS#TEMPLATE_LAYER_RECT_NAME }
 * @property {String} TEMPLATE_PDF_VIEWER  {@link module:Template/CONSTANTS.CONSTANTS#TEMPLATE_PDF_VIEWER }
 * @property {String} TEMPLATE_PDF_VIEWER_CONTAINER  {@link module:Template/CONSTANTS.CONSTANTS#TEMPLATE_PDF_VIEWER_CONTAINER }
 * @property {String} TITLE_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#TITLE_CLASS }
 * @property {String} TITLE_WRAP_CLASS  {@link module:Template/CONSTANTS.CONSTANTS#TITLE_WRAP_CLASS }
 * 
 * @class
 * @FileName CONSTANTS.js
 * @since 2021.05.31
 */
class CONSTANTS {

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#MAIN_GROUP_NAME
     * @description (Static) Canvas의 메인 노드
     */
    static MAIN_GROUP_NAME = "MainContainer";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#TEMPLATE_PDF_VIEWER_CONTAINER
     * @description (Static) Template모드에서의 PDF Viewer Container
     */
    static TEMPLATE_PDF_VIEWER_CONTAINER = "TemplateViewerContainer";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#TEMPLATE_PDF_VIEWER
     * @description (Static) Template모드에서의 PDF Viewer
     */
    static TEMPLATE_PDF_VIEWER = "TemplatePDFViewer";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#READER_PDF_VIEWER_CONTAINER
     * @description (Static) 서명모드에서의 PDF Viewer Container
     */
    static READER_PDF_VIEWER_CONTAINER = "ReaderViewerContainer";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#READER_PDF_VIEWER
     * @description (Static) 서명모드에서의 PDF Viewer
     */
    static READER_PDF_VIEWER = "ReaderPDFViewer";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#PREVIEW_READER_PDF_VIEWER_CONTAINER
     * @description (Static) 미리보기 모드에서의 PDF Viewer Container
     */
    static PREVIEW_READER_PDF_VIEWER_CONTAINER = "PreviewReaderViewerContainer";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#PREVIEW_READER_PDF_VIEWER
     * @description (Static) 미리보기 모드에서의 PDF Viewer
     */
    static PREVIEW_READER_PDF_VIEWER = "PreviewReaderPDFViewer";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#TEMPLATE_LAYER_NAME
     * @description (Static) Template 레이어 이름
     */
    static TEMPLATE_LAYER_NAME = "TemplateLayer";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#TEMPLATE_LAYER_ASTERISK_NAME
     * @description (Static) Template에서 필수 여부 마크가 있는 레이어 이름
     */
    static TEMPLATE_LAYER_ASTERISK_NAME = "TemplateAsteriskLayer";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#TEMPLATE_LAYER_RECT_NAME
     * @description (Static) Template에서 필드를 만들기 위해 생성하는 임시 div 이름
     */
    static TEMPLATE_LAYER_RECT_NAME = "TemplateRect";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#DRAG_BOX_NAME
     * @description (Static) Template에서 드래그 했을때 필드들이 있을 경우 만드는 SVG 그룹 노드 이름
     */
    static DRAG_BOX_NAME = "DragBoxGroup";


    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#SHOW_CLASS
     * @description (Static) 노드를 보이도록 하는 CSS 클래스 이름
     */
    static SHOW_CLASS = "Template-Show"

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#HIDE_CLASS
     * @description (Static) 노드를 안보이도록 하는 CSS 클래스 이름
     */
    static HIDE_CLASS = "Template-Hide"

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#EDITOR_COMPONENT_CLASS
     * @description (Static) Template모드에서 사이드 탭의 클라스 이름.
     */
    static EDITOR_COMPONENT_CLASS = "Editor-Component_Box";


    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_CLASS
     * @description (Static) Template모드에서 필드의 속성 노드 클래스 이름.
     */
    static EDITOR_ATTR_CLASS = "Editor-Attribute";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#FIELD_DELETE_BUTTON_CLASS
     * @description (Static) Template모드에서 삭제버튼 노드 클래스 이름.
     */
    static FIELD_DELETE_BUTTON_CLASS = "Field-Delete-Button";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#MEMO_PROPERTY_BUTTON_CLASS
     * @description (Static) Reader모드에서 메모 속성 버튼 노드 클래스 이름.
     */
    static MEMO_PROPERTY_BUTTON_CLASS = "MEMO-Property-Button";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_KIND_CLASS
     * @description (Static) Template모드에서 필드의 속성 종류 노드 클래스 이름.
     */
    static EDITOR_ATTR_KIND_CLASS = "Attribute-kind";


    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_PANEL_CLASS
     * @description (Static) Template모드에서 필드의 속성 판넬 노드 클래스 이름.
     */
    static EDITOR_ATTR_PANEL_CLASS = "Attribute-Contents";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_PANEL_ID
     * @description (Static) Template모드에서 필드의 속성 판넬 노드 ID.
     */
    static EDITOR_ATTR_PANEL_ID = "Attribute-Panel";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_CONTENTS_ROW_CLASS
     * @description (Static) Template모드에서 필드의 속성 컨텐츠 열의 클래스 이름
     */
    static EDITOR_ATTR_CONTENTS_ROW_CLASS = "Attribute-Contents-Row";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_ROW_WRAP_CLASS
     * @description (Static) Template모드에서 필드의 속성 컨텐츠 열을 감싸고 있는 노드의 클래스 이름
     */
    static EDITOR_ATTR_ROW_WRAP_CLASS = "Attribute-Contents-Row-Wrap";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#TITLE_WRAP_CLASS
     * @description (Static) Template모드에서 필드의 속성 컨텐츠 열의 타이틀을 감싸고 있는 노드의 클래스 이름
     */
    static TITLE_WRAP_CLASS = "Title-Wrap";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#TITLE_CLASS
     * @description (Static) Template모드에서 필드의 속성 컨텐츠 열의 타이틀 노드의 클래스 이름
     */
    static TITLE_CLASS = "Title";


    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_SELECT_CLASS
     * @description (Static) Template모드에서 필드의 속성 의 Select 노드의 클래스 이름
     */
    static EDITOR_ATTR_SELECT_CLASS = "Attribute-Select";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#SWITCH_LABEL_CLASS
     * @description (Static) Template모드에서 필드의 속성 의 Switch버튼  노드의 클래스 이름
     */
    static SWITCH_LABEL_CLASS = "Attribute-Switch-Label";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#SWITCH_LABEL_SLIDER_CLASS
     * @description (Static) Template모드에서 필드의 속성 의 Switch버튼의 슬라이더 노드의 클래스 이름
     */
    static SWITCH_LABEL_SLIDER_CLASS = "Attribute-Switch-Slider";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#SWITCH_LABEL_SLIDER_ROUND_CLASS
     * @description (Static) Template모드에서 필드의 속성 의 Switch버튼의 슬라이더의 도그란 Div 노드의 클래스 이름
     */
    static SWITCH_LABEL_SLIDER_ROUND_CLASS = "Round";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#DIVIDER_CLASS
     * @description (Static) 구분자 노드의 클래스 이름
     */
    static DIVIDER_CLASS = "Divider";


    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_INPUT_CLASS
     * @description (Static) Template모드에서 필드의 속성 의 input 노드의 클래스 이름
     */
    static EDITOR_ATTR_INPUT_CLASS = "Attribute-Input";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_TEXTAREA_CLASS
     * @description (Static) Template모드에서 필드의 속성 의 Textarea 노드의 클래스 이름
     */
    static EDITOR_ATTR_TEXTAREA_CLASS = "Attribute-Textarea";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_DATE_INPUT_CLASS
     * @description (Static) Template모드에서 필드의 속성 의 Date input 노드의 클래스 이름
     */
    static EDITOR_ATTR_DATE_INPUT_CLASS = "Attribute-Date-Input";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#EDITOR_ATTR_INPUT_WRAP_CLASS
     * @description (Static) Template모드에서 필드의 속성 의 input 노드를 감싸고 있는 노드의 클래스 이름
     */
    static EDITOR_ATTR_INPUT_WRAP_CLASS = "Attribute-Input-Wrap";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#CREATE_FIELD_ACTION
     * @description (Static) Template모드에서 UNDO REDO의 필드 생성 Action의 이름
     */
    static CREATE_FIELD_ACTION = "CreateFieldAction";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#REMOVE_FIELD_ACTION
     * @description (Static) Template모드에서 UNDO REDO의 필드 삭제 Action의 이름
     */
    static REMOVE_FIELD_ACTION = "RemoveFieldAction";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#FIELD_ATTR_CHANGE_ACTION
     * @description (Static) Template모드에서 UNDO REDO의 필드 속성 변경 Action의 이름
     */
    static FIELD_ATTR_CHANGE_ACTION = "FieldAttrChangeAction";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#GROUP_REMOVE_ACTION
     * @description (Static) Template모드에서 UNDO REDO의 필드 삭제 Action의 이름
     */
    static GROUP_REMOVE_ACTION = "GroupRemoveAction";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#GROUP_ATTR_CHANGE_ACTION
     * @description (Static) Template모드에서 UNDO REDO의 필드들의 속성 변경 Action의 이름
     */
    static GROUP_ATTR_CHANGE_ACTION = "GroupAttrChangeAction";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#GROUP_ATTR_OWNER_CHANGE_ACTION
     * @description (Static) Template모드에서 UNDO REDO의 필드들의 서명자 변경 Action의 이름
     */
    static GROUP_ATTR_OWNER_CHANGE_ACTION = "GroupAttrOwnerChangeAction";


    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#READER_PAGE_FIELD_LAYER_CLASS
     * @description (Static) 서명 모드에서 Field들이 올라갈 레이어 클래스 이름.
     */
    static READER_PAGE_FIELD_LAYER_CLASS = "Reader-Page-Field-Layer";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#READER_PAGE_MEMO_LAYER_CLASS
     * @description (Static) 서명 모드에서 MEMO들이 올라갈 레이어 클래스 이름.
     */
    static READER_PAGE_MEMO_LAYER_CLASS = "Reader-Page-Memo-Layer";

    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#ASTERISK_ICON_CLASS
     * @description (Static) Template모드에서 필수 여부 아이콘 클래스 이름
     */
    static ASTERISK_ICON_CLASS = "Asterisk-Icon";

    /**
     * @static
     * @type {Number}
     * @name module:Template/CONSTANTS.CONSTANTS#ASTREISK_DIV_HEIGHT
     * @description (Static) Template모드에서 필수 여부 아이콘 세로길이
     */
    static ASTREISK_DIV_HEIGHT = 12;

    /**
     * @static
     * @type {Number}
     * @name module:Template/CONSTANTS.CONSTANTS#MINIMUM_DRAG_SIZE
     * @description (Static) Template모드에서 드래그를 했다는 최소의 사이즈 기준
     */
    static MINIMUM_DRAG_SIZE = 10;

    static RADIO_TYPE_1 = '1';
    static RAIOD_TYPE_1_PATH = `<path d="M24,12c-6.6,0-12,5.4-12,12s5.4,12,12,12s12-5.4,12-12S30.6,
            12,24,12zM24,0C10.8,0,0,10.8,0,24s10.8,24,24,24s24-10.8,24-24S37.2,0,24,0zM24,43.2C13.4,43.2,4.8,34.6,4.8,24S13.4,
            4.8,24,4.8S43.2,13.4,43.2,24S34.6,43.2,24,43.2z"/>`;
    static RADIO_TYPE_2 = '2';
    static RAIOD_TYPE_2_PATH = `<path d="M24,0C10.8,0,0,10.8,0,24s10.8,24,24,24s24-10.8,24-24S37.2,0,24,0zM24,43.2C13.4,43.2,4.8,34.6,4.8,24S13.4,\
            4.8,24,4.8S43.2,13.4,43.2,24S34.6,43.2,24,43.2z"/>`;

            
    /**
     * @static
     * @type {String}
     * @name module:Template/CONSTANTS.CONSTANTS#NO_EVENT_LAYER
     * @description (Static) 이벤트를 받지 않는 class.
     */
    static NO_EVENT_LAYER = "No-Event-Layer";

    static READER_FIELD_INPUT_MODE      = 0;
    static READER_FIELD_MEMO_MODE       = 1;
    static READER_FIELD_MEMO_MAKE_MODE  = 2;
}



/***/ }),

/***/ "./js/pdf_form/src/Fields/BaseField.js":
/*!*********************************************!*\
  !*** ./js/pdf_form/src/Fields/BaseField.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BaseField: () => (/* binding */ BaseField)
/* harmony export */ });
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");
/* harmony import */ var _Constants_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../Constants.js */ "./js/pdf_form/src/Constants.js");

/**
 * @module Template/Field
 */




/**
 * @description 필드들의 기본이 되는 Class
 * 
 * @property {String} m_id {@link module:Template/Field.BaseField#m_id}
 * @property {Number} m_x {@link module:Template/Field.BaseField#m_x}
 * @property {Number} m_y {@link module:Template/Field.BaseField#m_y}
 * @property {Number} m_width {@link module:Template/Field.BaseField#m_width}
 * @property {Number} m_height {@link module:Template/Field.BaseField#m_height}
 * @property {Number} m_pageNo {@link module:Template/Field.BaseField#m_pageNo}
 * @property {Number} m_pdfX {@link module:Template/Field.BaseField#m_pdfX}
 * @property {Number} m_pdfX2 {@link module:Template/Field.BaseField#m_pdfX2}
 * @property {Number} m_pdfY {@link module:Template/Field.BaseField#m_pdfY}
 * @property {Number} m_pdfY2 {@link module:Template/Field.BaseField#m_pdfY2}
 * @property {String} m_type {@link module:Template/Field.BaseField#m_type}
 * @property {Number} m_fontSize {@link module:Template/Field.BaseField#m_fontSize}
 * @property {String} m_fontName {@link module:Template/Field.BaseField#m_fontName}
 * @property {String} m_fontWeight {@link module:Template/Field.BaseField#m_fontWeight}
 * @property {String} m_fontStyle {@link module:Template/Field.BaseField#m_fontStyle}
 * @property {String} m_fontColor {@link module:Template/Field.BaseField#m_fontColor}
 * @property {String} m_kind {@link module:Template/Field.BaseField#m_kind}
 * @property {Boolean} m_isRemoved {@link module:Template/Field.BaseField#m_isRemoved}
 * @property {String} m_value {@link module:Template/Field.BaseField#m_value}
 * @property {String} m_ownerId {@link module:Template/Field.BaseField#m_ownerId}
 * @property {String} m_fieldId {@link module:Template/Field.BaseField#m_fieldId}
 * @property {String} m_required {@link module:Template/Field.BaseField#m_required}
 * 
 * @property {Function} fromJson {@link module:Template/Field.BaseField#fromJson}
 * @property {Function} getBBox {@link module:Template/Field.BaseField#getBBox}
 * @property {Function} fieldName {@link module:Template/Field.BaseField#fieldName}
 * @property {Function} showFieldAttribute {@link module:Template/Field.BaseField#showFieldAttribute}
 * @property {Function} showFieldsAttribute {@link module:Template/Field.BaseField#showFieldsAttribute}
 * @FileName BaseField.js
 * @since 2021.05.31
 */
class BaseField {

    /**
     * @constructor
     * @param id 필드의 ID
     * @param pageNo 필드가 속한 페이지 번호
     * @param x 필드의 svg상의 x좌표
     * @param y 필드의 svg상의 y좌표
     * @param width 필드의 가로길이
     * @param height 필드의 세로길이
     * 
     */
    constructor(id, pageNo, x, y, width, height) {
        /**
         * @type {String}
         * @name module:Template/Field.BaseField#m_id
         * @description 필드의 고유 ID
         * @example
         * // getter id()
         * // setter id(val)
         */
        this.m_id = id;

        /**
         * @type {Number}
         * @name module:Template/Field.BaseField#m_x
         * @description 필드의 svg상의 x 좌표
         * @example
         * // getter x()
         * // setter x(val)
         */
        this.m_x = x;


        /**
         * @type {Number}
         * @name module:Template/Field.BaseField#m_y
         * @description 필드의 svg상의 y 좌표
         * @example
         * // getter y()
         * // setter y(val)
         */
        this.m_y = y;

        /**
         * @type {Number}
         * @name module:Template/Field.BaseField#m_width
         * @description 필드의 svg상의 가로 길이
         * @example
         * // getter width()
         * // setter width(val)
         */
        this.m_width = width;

        /**
         * @type {Number}
         * @name module:Template/Field.BaseField#m_height
         * @description 필드의 svg상의 세로 길이
         * @example
         * // getter height()
         * // setter height(val)
         */
        this.m_height = height;

        /**
         * @type {Number}
         * @name module:Template/Field.BaseField#m_pageNo
         * @description 필드의 PDF에서의 페이지 번호
         * @example
         * // getter pageNo()
         * // setter pageNo(val)
         */
        this.m_pageNo = pageNo;

        /**
         * @type {Number}
         * @name module:Template/Field.BaseField#m_pdfX
         * @description 필드의 PDF에서의 X좌표
         * @example
         * // getter pdfX()
         * // setter pdfX(val)
         */
        this.m_pdfX = 0;

        /**
         * @type {Number}
         * @name module:Template/Field.BaseField#m_pdfY
         * @description 필드의 PDF에서의 Y좌표
         * @example
         * // getter pdfY()
         * // setter pdfY(val)
         */
        this.m_pdfY = 0;

        /**
         * @type {Number}
         * @name module:Template/Field.BaseField#m_pdfX2
         * @description 필드의 PDF에서의 X2좌표
         * @example
         * // getter pdfX2()
         * // setter pdfX2(val)
         */
        this.m_pdfX2 = 0;

        /**
         * @type {Number}
         * @name module:Template/Field.BaseField#m_pdfY2
         * @description 필드의 PDF에서의 Y2좌표
         * @example
         * // getter pdfY2()
         * // setter pdfY2(val)
         */
        this.m_pdfY2 = 0;


        /**
         * @type {String}
         * @name module:Template/Field.BaseField#m_type
         * @description 필드의 타입이름
         * @readonly
         * @example
         * // getter type()
         */
        this.m_type = BaseField.fieldName();

        /**
         * @type {Number}
         * @name module:Template/Field.BaseField#m_fontSize
         * @description 필드에서 사용되는 폰트크기값
         * @example
         * // getter fontSize()
         * // setter fontSize(val)
         */
        this.m_fontSize = 16;

        /**
         * @type {String}
         * @name module:Template/Field.BaseField#m_fontName
         * @description 필드에서 사용되는 폰트이름.
         * @example
         * // getter fontName()
         * // setter fontName(val)
         */
        this.m_fontName = 'MalgunGothic';

        /**
         * @type {String}
         * @name module:Template/Field.BaseField#m_fontWeight
         * @description 필드에서 사용되는 폰트 두께
         * @example
         * // getter fontWeight()
         * // setter fontWeight(val)
         */
        this.m_fontWeight = "";

        /**
         * @type {String}
         * @name module:Template/Field.BaseField#m_fontStyle
         * @description 필드에서 사용되는 폰트 스타일
         * @example
         * // getter fontStyle()
         * // setter fontStyle(val)
         */
        this.m_fontStyle = "";

        /**
         * @type {String}
         * @name module:Template/Field.BaseField#m_fontColor
         * @description 필드에서 사용되는 폰트 색상
         * @example
         * // getter fontColor()
         * // setter fontColor(val)
         */
        this.m_fontColor = "#000000"

        /**
         * @type {String}
         * @name module:Template/Field.BaseField#m_kind
         * @description  필드종류의 한글이름
         * @readonly
         * @example
         * // getter kind()
         */
        this.m_kind = "";

        /**
         * @type {Boolean}
         * @name module:Template/Field.BaseField#m_isRemoved
         * @example
         * // getter isRemoved()
         * // setter isRemoved(val)
         * @description  필드삭제여부
         */
        this.m_isRemoved = false;

        /**
         * @type {String}
         * @name module:Template/Field.BaseField#m_value
         * @description  필드 값
         * @example
         * // getter value()
         * // setter value(val)
         */
        this.m_value = "";

        /**
         * @type {String}
         * @name module:Template/Field.BaseField#m_ownerId
         * @description  필드가 속한 서명자의 ID
         * @example
         * // getter ownerId()
         * // setter ownerId(val)
         */
        this.m_ownerId = ""

        /**
         * @type {String}
         * @name module:Template/Field.BaseField#m_fieldId
         * @description  필드의 별칭
         * @example
         * // getter fieldId()
         * // setter fieldId(val)
         */
        this.m_fieldId = id;

        /**
         * @type {String}
         * @name module:Template/Field.BaseField#m_required
         * @description  필드의 필수여부
         * @example
         * // getter required()
         * // setter required(val)
         */
        this.m_required = "true";

    }

    /**
     * @function fromJson
     * @name module:Template/Field.BaseField#fromJson
     * @description (Static) JSON데이터로 로드한다.
     *
     * @param target 복사할 필드 오브젝트
     * @param jsonData 필드의 JSON데이터.
     * @return {Object} JSON데이터를 로드한 필드를 리턴한다.
     * @static
     */ 
    static fromJson(target, jsonData) {
        let field = Object.assign(target, jsonData);
        return field;
    }

    /**
     * @function fieldName
     * @static
     * @name module:Template/Field.BaseField#fieldName
     * @return {String}
     * @description (Static) 필드 타입의 이름
     *
     */
    static fieldName() {
        return "BaseField";
    }

    ancestors() {
        return ["BF"];
    }

    get type() {
        return this.m_type;
    }

    get id() {
        return this.m_id;
    }
    get kind() {
        return this.m_kind;
    }

    set id(__id) {
        this.m_id = __id;
    }

    get fieldId() {
        return this.m_fieldId;
    }

    set fieldId(__fieldId) {
        this.m_id = __fieldId;
    }

    get pageNo() {
        return this.m_pageNo;
    }

    set pageNo(_pageNo) {
        this.m_pageNo = _pageNo;
    }

    get x() {
        return this.m_x;
    }

    set x(__x) {
        this.m_x = __x;
    }

    get y() {
        return this.m_y;
    }

    set y(__y) {
        this.m_y = __y;
    }

    get width() {
        return this.m_width;
    }

    set width(__width) {
        this.m_width = __width;
    }

    get height() {
        return this.m_height;
    }

    set height(__height) {
        this.m_height = __height;
    }

    get toolTip() {
        return this.m_toolTip;
    }

    set toolTip(__toolTip) {
        this.m_toolTip = __toolTip;
    }

    get pdfX() {
        return this.m_pdfX;
    }

    set pdfX(__pdfX) {
        this.m_pdfX = __pdfX;
    }

    get pdfY() {
        return this.m_pdfY;
    }

    set pdfY(__pdfY) {
        this.m_pdfY = __pdfY;
    }

    get pdfX2() {
        return this.m_pdfX2;
    }

    set pdfX2(__pdfX2) {
        this.m_pdfX2 = __pdfX2;
    }

    get pdfY2() {
        return this.m_pdfY2;
    }

    set pdfY2(__pdfY2) {
        this.m_pdfY2 = __pdfY2;
    }

    get fontSize() {
        return this.m_fontSize;
    }

    set fontSize(__fontSize) {
        this.m_fontSize = __fontSize;
    }

    get fontName() {
        return this.m_fontName;
    }

    set fontName(__fontName) {
        this.m_fontName = __fontName;
    }

    get fontWeight() {
        return this.m_fontWeight;
    }

    set fontWeight(__fontWeight) {
        this.m_fontWeight = __fontWeight;
    }

    get fontStyle() {
        return this.m_fontStyle;
    }

    set fontStyle(__fontStyle) {
        this.m_fontStyle = __fontStyle;
    }

    get fontColor() {
        return this.m_fontColor;
    }

    set fontColor(__fontColor) {
        this.m_fontColor = __fontColor;
    }

    get isRemoved() {
        return this.m_isRemoved;
    }
    set isRemoved(_isRemoved) {
        this.m_isRemoved = _isRemoved;
    }

    get value() {
        return this.m_value;
    }
    set value(_value) {
        this.m_value = _value;
    }

    get ownerId() {
        return this.m_ownerId;
    }

    set ownerId(__ownerId) {
        this.m_ownerId = __ownerId;
    }

    get required() {
        return this.m_required;
    }

    set required(__required) {
        this.m_required = __required;
    }

    /**
     *
     * @function showFieldAttribute
     * @static
     * @name module:Template/Field.BaseField#showFieldAttribute
     * @description (Static) 필드의 속성 팝업창을 설정한다.
     *
     * @param {ELEMENT} node  속성 팝업 Node
     * @param {String} idValue     필드의 id값
     * @param {String} requiredValue     필수여부 값
     * @param {String} ownerIdValue    서명자 아이디
     * @param {Array} userList   서명자 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldAttribute(node,
        idValue, fieldIdValue, requiredValue, ownerIdValue,
        userList,
        changeEventFunc) {

        var panel = _utils_utils_js__WEBPACK_IMPORTED_MODULE_0__.Utils.createAttributePanelNode();

        var requireRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_0__.Utils.createAttributeToggleButtonNode(idValue, "required", "Template.isRequired", requiredValue, changeEventFunc);
        panel.appendChild(requireRow);
        let useDefaulOptionNode = _utils_utils_js__WEBPACK_IMPORTED_MODULE_0__.Utils.getUserInfoOptsListCount() !== 1;
        var ownerSelectRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_0__.Utils.createAttributeSelectNode(idValue, "ownerId", userList, "", useDefaulOptionNode);
        panel.appendChild(ownerSelectRow);

        let ownerSelect = ownerSelectRow.querySelector("select");
        $(ownerSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(ownerSelect).val(ownerIdValue).trigger("change");
        $(ownerSelect).on("change", changeEventFunc);

        var fieldIdValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_0__.Utils.createAttributeInputNode(idValue, "fieldId", "Template.fieldIdText", fieldIdValue, "", "", changeEventFunc);
        panel.appendChild(fieldIdValueRow);


        panel.setAttribute("Field-id-list", idValue);
        node.className = "Editor-Attribute";
        node.classList.add("Base-Field");
        node.appendChild(panel);
    }

    /**
     *
     * @function showFieldsAttribute
     * @static
     * @name module:Template/Field.BaseField#showFieldsAttribute
     * @description (Static) 필드의 속성 팝업창을 설정한다.
     *
     * @param {HTML} ownerNode  속성 팝업 Node
     * @param {Array} fieldList    필드들의 리스트
     * @param {HTML} attrNode   속성 팝업의 Node
     * @param {String} mainGroup    SVG의 메인 Element
     * @param {Array} userList  서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc   속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     * @static
     */
    static showFieldsAttribute(ownerNode, fieldList, attrNode, mainGroup, userList, dvOptionList, changeEventFunc) {
        let node = attrNode;
        if (attrNode === null || _utils_utils_js__WEBPACK_IMPORTED_MODULE_0__.Utils.isEmptyObject(attrNode)) {
            const bbox = _utils_utils_js__WEBPACK_IMPORTED_MODULE_0__.Utils.mergeFieldsBBox(fieldList);
            node = _utils_utils_js__WEBPACK_IMPORTED_MODULE_0__.Utils.createAttrbutePopup(ownerNode, bbox);
            _utils_utils_js__WEBPACK_IMPORTED_MODULE_0__.Utils.repositionFieldDeleteBtn(ownerNode, bbox.x, bbox.y, bbox.width);
        }
        _utils_utils_js__WEBPACK_IMPORTED_MODULE_0__.Utils.removeAllChildNode(node);

        var idValueArr = [];
        fieldList.forEach((field) => {
            idValueArr.push(field.id);
        });
        var idValue = idValueArr.join();

        var ownerIdValue = fieldList[0].ownerId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].ownerId !== ownerIdValue) {
                ownerIdValue = '';
                break;
            }
        }

        var requiredValue = fieldList[0].required;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].required !== requiredValue) {
                requiredValue = '';
                break;
            }
        }

        var fieldIdValue = fieldList[0].fieldId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fieldId !== fieldIdValue) {
                fieldIdValue = '';
                break;
            }
        }

        BaseField.showFieldAttribute(node,
            idValue, fieldIdValue, requiredValue, ownerIdValue,
            userList,
            changeEventFunc);
    }

    validateValue(propertyName, value) {
        return true;
    }

    /**
     * 
     * @function getBBox
     * @name module:Template/Field.BaseField#getBBox
     * @description 필드의 bounding Rect를 리턴 .
     * @memberOf module:Template/Field.BaseField
     * @return {Rect} Object 
     * @Date : 2021. 5. 31
     */
    getBBox() {
        return {
            left: this.x,
            top: this.y,
            right: this.x + this.width,
            bottom: this.y + this.height,
            x: this.x,
            y: this.y,
            width: this.width,
            height: this.height
        }
    }
} 


/***/ }),

/***/ "./js/pdf_form/src/Fields/CheckboxField.js":
/*!*************************************************!*\
  !*** ./js/pdf_form/src/Fields/CheckboxField.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CheckboxField: () => (/* binding */ CheckboxField)
/* harmony export */ });
/* harmony import */ var _BaseField__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BaseField */ "./js/pdf_form/src/Fields/BaseField.js");
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");
/* harmony import */ var _Constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../Constants.js */ "./js/pdf_form/src/Constants.js");

/**
 * @module Template/Field
*/





/**
 * @description 체크박스 필드 Class
 *
 * @property {Function} fieldName {@link module:Template/Field.CheckboxField#fieldName}
 * @property {Function} widthValue {@link module:Template/Field.CheckboxField#widthValue}
 * @property {Function} heightValue {@link module:Template/Field.CheckboxField#heightValue}
 * @property {Function} getSVGFieldObject {@link module:Template/Field.CheckboxField#getSVGFieldObject}
 * 
 * @augments BaseField {@link module:Template/Field.BaseField#BaseField}
 * @FileName CheckboxField.js
 * @since 2021.05.31
 */

class CheckboxField extends _BaseField__WEBPACK_IMPORTED_MODULE_0__.BaseField {

    /**
     * @constructor
     * @param id 필드의 ID
     * @param pageNo 필드가 속한 페이지 번호
     * @param x 필드의 svg상의 x좌표
     * @param y 필드의 svg상의 y좌표
     *
     */
    constructor(id, pageNo, x, y) {
        super(id, pageNo, x, y, CheckboxField.widthValue(), CheckboxField.heightValue());
        this.m_type = CheckboxField.fieldName();

        this.m_kind = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.translateForKey("Template.checkFieldTool");

        if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(id)) {
            return;
        }
        this.m_fieldId = this.m_id.replace(this.m_type, this.m_kind + "-");
    }

    /**
     * @function fieldName
     * @name module:Template/Field.CheckboxField#fieldName
     * @return {String}
     * @description (Static) 필드 타입의 이름
     * @static
     *
     */
    static fieldName() {
        return "CheckboxField";
    }
    
    ancestors() {
        return ["CBF", "BF"];
    }

    /**
     * @function widthValue
     * @name module:Template/Field.CheckboxField#widthValue
     * @description (Static) 필드의 초기 가로 길이
     * @return {Number}
     * @static
     *
     */
    static widthValue() {
        return 60;
    }

    /**
     * @function heightValue
     * @name module:Template/Field.CheckboxField#heightValue
     * @description (Static) 필드의 초기 세로 길이
     * @return {Number}
     * @static
     *
     */
    static heightValue() {
        return 60;
    }

    /**
     * @function getSVGFieldObject
     * @name module:Template/Field.CheckboxField#getSVGFieldObject
     * @memberOf module:Template/Field.CheckboxField
     * @description 필드의 정보를 가지고 SVG Element를 생성한다.
     *
     * @param {Object} canvas  Snap SVG의 Canvas Object
     * @param {Object} mainGroup   SVG의 메인 Node
     * @param {Number} scale  현재 PDF의 Scale
     * @param {HTML} ownerNode   해당 프로젝트의 최상단 Element를 감싸고 있는 Element
     * @param {Callback} removeDragOverGroupFunc   드래그 되어 선택되어진 Field Group을 제거하는 callback function
     * @param {Callback} changeValueEventFunc     속성값이 변할때 호출되는 callback function
     * @param {Callback} changeFreeTransformFunc     FreeTransform을 다시 생성하기 위한 callback function
     * @return SVG Node Element
     * @Date : 2021. 5. 31
     */
    getSVGFieldObject(canvas, mainGroup, scale, ownerNode, removeDragOverGroupFunc, changeValueEventFunc, changeFreeTransformFunc) {
        let group = mainGroup.group();
        group.attr({
            id: this.id + "Group",
            cursor: "move"
        });
        let rect = canvas.rect(this.x, this.y, this.width * scale, this.height * scale);
        rect.attr({
            id: this.id,
            "fill-opacity": "0.6",
            "fill": "#ffac7f"
        });
        group.append(rect);
        
        const checkString = '<svg xmlns="http://www.w3.org/2000/svg" x="' + this.x + 'px" y="' + this.y + 'px" width="' + this.width * scale +
            'px" height="' + this.height * scale + 'px"  viewBox="0 0 48 48"><path d="M17.2 32.2L4.9 19.9 0 24.8 17.2 42 48 10.9 43.1 6z"/></svg >'
        const p = Snap.parse(checkString);
        group.append(p);

        group.hover(
            function () { // f_in
            },
            function () { // f_out
            }
        );

        let _chkField = this;
        let mousePos = { x: 0, y: 0 };
        group.mousedown(function (evt) {
            mousePos.x = evt.pageX;
            mousePos.y = evt.pageY;
            const items = mainGroup.selectAll('g');
            items.forEach(function (element) {
                if (element !== group) {
                    if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(element.freeTransform)) {
                        element.freeTransform.hideResizeHandler();
                    }
                }
            });
            if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(group.freeTransform)) {
                group.freeTransform.showResizeHandler();
            } else {
                changeFreeTransformFunc(group, rect.attr("width"), rect.attr("height"));
            }
        });

        group.mouseup(function (evt) {
            if (group.parent().attr("id") === _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME) {
                if (Math.abs(mousePos.x - evt.pageX) > _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MINIMUM_DRAG_SIZE
                    || Math.abs(mousePos.y - evt.pageY) > _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MINIMUM_DRAG_SIZE) {
                    return;
                }
                removeDragOverGroupFunc.call();
                const items = mainGroup.selectAll('g');
                items.forEach(function (element) {
                    if (element !== group) {
                        if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(element.freeTransform)) {
                            element.freeTransform.hideResizeHandler();
                        }
                    }
                });
                if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(group.freeTransform)) {
                    group.freeTransform.showResizeHandler();
                } else {
                    changeFreeTransformFunc(group, rect.attr("width"), rect.attr("height"));
                }
                _chkField.constructor.showFieldsAttribute(ownerNode, [_chkField], undefined, mainGroup, _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsList(), _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getDVFieldOptsList(), changeValueEventFunc);
            } else {
                _chkField.constructor.showFieldsAttribute(ownerNode, [_chkField], undefined, mainGroup, _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsList(), _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getDVFieldOptsList(), changeValueEventFunc);
            }
        });
        return group;

    }
}



/***/ }),

/***/ "./js/pdf_form/src/Fields/ComboboxField.js":
/*!*************************************************!*\
  !*** ./js/pdf_form/src/Fields/ComboboxField.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ComboboxField: () => (/* binding */ ComboboxField)
/* harmony export */ });
/* harmony import */ var _TextBaseField__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./TextBaseField */ "./js/pdf_form/src/Fields/TextBaseField.js");
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");
/* harmony import */ var _Constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../Constants.js */ "./js/pdf_form/src/Constants.js");
/* harmony import */ var _utils_color_picker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../utils/color-picker */ "./js/pdf_form/src/utils/color-picker.js");
/* harmony import */ var _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_utils_color_picker__WEBPACK_IMPORTED_MODULE_3__);

/**
 * @module Template/Field
*/






/**
 * @description 콤보박스 필드 Class
 *
 * @property {String} m_comboboxList {@link module:Template/Field.ComboboxField#m_comboboxList}
 *
 * @property {Function} fieldName {@link module:Template/Field.ComboboxField#fieldName}
 * @property {Function} showFieldAttribute {@link module:Template/Field.ComboboxField#showFieldAttribute}
 * @property {Function} showFieldsAttribute {@link module:Template/Field.ComboboxField#showFieldsAttribute}
 * 
 * @augments TextBaseField {@link module:Template/Field.TextBaseField#TextBaseField}
 * @FileName ComboboxField.js
 * @since 2021.05.31
 */
class ComboboxField extends _TextBaseField__WEBPACK_IMPORTED_MODULE_0__.TextBaseField {

    /**
     * @constructor
     * @param id 필드의 ID
     * @param pageNo 필드가 속한 페이지 번호
     * @param x 필드의 svg상의 x좌표
     * @param y 필드의 svg상의 y좌표
     *
     */
    constructor(id, pageNo, x, y) {
        super(id, pageNo, x, y, ComboboxField.widthValue(), ComboboxField.heightValue());
        this.m_type = ComboboxField.fieldName();

        /**
         * @type {String}
         * @name module:Template/Field.ComboboxField#m_comboboxList
         * @description 콤보박스에 들어갈 리스트
         * @example
         * // getter comboboxList()
         * // setter comboboxList(val)
         */
        this.m_comboboxList = "";

        this.m_kind = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.translateForKey("Template.comboFieldTool");
        if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(id)) {
            return;
        }
        this.m_fieldId = this.m_id.replace(this.m_type, this.m_kind + "-");
    }

    /**
     * @function fieldName
     * @name module:Template/Field.ComboboxField#fieldName
     * @return {String}
     * @description (Static) 필드 타입의 이름
     * @static
     *
     */
    static fieldName() {
        return "ComboboxField";
    }
    
    ancestors() {
        return ["CMBF", "TBF", "BF"];
    }

    get comboboxList() {
        return this.m_comboboxList;
    }
    set comboboxList(__comboboxList) {
        this.m_comboboxList = __comboboxList;
    }

    /**
     * @function showFieldAttribute
     * @static
     * @name module:Template/Field.ComboboxField#showFieldAttribute
     * @description (Static) 필드의 속성 팝업창을 설정한다.
     *
     * @param {HTML} node   속성 팝업 Node
     * @param {String} idValue     필드의 id값
     * @param {String} requiredValue     필수여부 값
     * @param {String} ownerIdValue    서명자 아이디
     * @param {String} dvValue     기본값
     * @param {String} fontFamilyNameValue    폰트 이름
     * @param {String} fontSizeValue     폰트 크기 값
     * @param {String} textAlignValue    텍스트 가로 정렬 값
     * @param {String} boldValue     폰트 볼드 여부
     * @param {String} fontColorValue     폰트 칼라
     * @param {String} comboboxListValue    콤보박스 리스트에 들어가는 리스트 값
     * @param {Array} userList   서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldAttribute(node,
        idValue, fieldIdValue, requiredValue, ownerIdValue, dvValue, fontFamilyNameValue, fontSizeValue, textAlignValue, boldValue, fontColorValue, comboboxListValue,
        userList, dvOptionList,
        changeEventFunc) {

        var panel = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributePanelNode();

        var requireRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeToggleButtonNode(idValue, "required", "Template.isRequired", requiredValue, changeEventFunc);
        panel.appendChild(requireRow);

        let useDefaulOptionNode = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsListCount() !== 1;
        var ownerSelectRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(idValue, "ownerId", userList, "", useDefaulOptionNode);
        panel.appendChild(ownerSelectRow);

        let ownerSelect = ownerSelectRow.querySelector("select");
        jQuery(ownerSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        jQuery(ownerSelect).val(ownerIdValue).trigger("change");
        jQuery(ownerSelect).on("change", changeEventFunc);

        //12-28
        if (dvOptionList && Array.isArray(dvOptionList) && dvOptionList.length > 0) {
            var defaultValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(idValue, "defaultValue", dvOptionList, "Template.defaultValueText", true);
            panel.appendChild(defaultValueRow);

            let defaultValueSelect = defaultValueRow.querySelector("select");
            $(defaultValueSelect).select2({
                minimumResultsForSearch: Infinity,
                width: "100%"
            });
            $(defaultValueSelect).val(dvValue).trigger("change");
            $(defaultValueSelect).on("change", changeEventFunc);
        }


        var fieldIdValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeInputNode(idValue, "fieldId", "Template.fieldIdText", fieldIdValue, "", "", changeEventFunc);
        panel.appendChild(fieldIdValueRow);

        var comboboxRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeTextAreaNode(idValue, "comboboxList", "Template.comboBoxSelctValueText", comboboxListValue, "", changeEventFunc);
        panel.appendChild(comboboxRow);

        var fontAttrRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createTextAttrbuteNode(idValue, fontColorValue, textAlignValue, boldValue, changeEventFunc);
        panel.appendChild(fontAttrRow.row);

        let fontFamilyComboSelect = fontAttrRow.fontFamilyCombo.querySelector("select");
        $(fontFamilyComboSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(fontFamilyComboSelect).val(fontFamilyNameValue).trigger("change");
        $(fontFamilyComboSelect).on("change", changeEventFunc);
        let fontSizeComboSelect = fontAttrRow.fontSizeCombo.querySelector("select");
        $(fontSizeComboSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(fontSizeComboSelect).val(fontSizeValue).trigger("change");
        $(fontSizeComboSelect).on("change", changeEventFunc);

        let colorInput = fontAttrRow.colorBtn.querySelector("button");
        colorInput.style.backgroundColor = fontColorValue;
        let picker = new (_utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default())(colorInput, { color: fontColorValue });
        colorInput.value = fontColorValue;
        picker.on('change', function (r, g, b, a) {
            if (!picker.visible) {
                return;
            }
            colorInput.style.backgroundColor = _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]);
            colorInput.value = _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]);

            let colorTextInput = fontAttrRow.colorBtn.querySelector("input[type='text']");
            colorTextInput.value = (_utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]));
        });
        picker.on('exit', function (r, g, b, a) {
            colorInput.style.backgroundColor = _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]);

            let colorTextInput = fontAttrRow.colorBtn.querySelector("input[type='text']");
            colorTextInput.value = (_utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]));
            colorTextInput.dispatchEvent(new Event("change"));
        });

        panel.setAttribute("Field-id-list", idValue);
        node.className = "Editor-Attribute";
        node.classList.add("Text-Field");
        node.appendChild(panel);
    }


    /**
     * @function showFieldsAttribute
     * @static
     * @name module:Template/Field.ComboboxField#showFieldsAttribute
     * @description (Static) 필드의 속성 팝업창을 설정한다.
     *
     * @param {HTML} ownerNode  속성 팝업 Node
     * @param {Array} fieldList     필드들의 리스트
     * @param {HTML} attrNode    속성 팝업의 Node
     * @param {String} mainGroup    SVG의 메인 Element
     * @param {Array} userList   서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldsAttribute(ownerNode, fieldList, attrNode, mainGroup, userList, dvOptionList, changeEventFunc) {
        let node = attrNode;
        if (attrNode === null || _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(attrNode)) {
            const bbox = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.mergeFieldsBBox(fieldList);
            node = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttrbutePopup(ownerNode, bbox);
            _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.repositionFieldDeleteBtn(ownerNode, bbox.x, bbox.y, bbox.width);
        }
        _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.removeAllChildNode(node);

        var idValueArr = [];
        fieldList.forEach((field) => {
            idValueArr.push(field.id);
        });

        var idValue = idValueArr.join();

        var ownerIdValue = fieldList[0].ownerId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].ownerId !== ownerIdValue) {
                ownerIdValue = '';
                break;
            }
        }

        var requiredValue = fieldList[0].required;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].required !== requiredValue) {
                requiredValue = '';
                break;
            }
        }

        var dvValue = fieldList[0].defaultValue;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].defaultValue !== dvValue) {
                dvValue = '';
                break;
            }
        }

        var fontFamilyNameValue = fieldList[0].fontName;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontName !== fontFamilyNameValue) {
                fontFamilyNameValue = '';
                break;
            }
        }
        var fontSizeValue = fieldList[0].fontSize;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontSize !== fontSizeValue) {
                fontSizeValue = '';
                break;
            }
        }

        var textAlignValue = fieldList[0].textAlign;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].textAlign !== textAlignValue) {
                textAlignValue = '';
                break;
            }
        }

        var boldValue = fieldList[0].isBold;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].isBold !== boldValue) {
                boldValue = '';
                break;
            }
        }
        var fontColorValue = fieldList[0].fontColor;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontColor !== fontColorValue) {
                fontColorValue = '';
                break;
            }
        }

        var comboboxListValue = fieldList[0].comboboxList;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].comboboxList !== comboboxListValue) {
                comboboxListValue = '';
                break;
            }
        }

        let dvOptions = [];

        if (comboboxListValue !== '') {
            const combolist = comboboxListValue.split("\n");
            for (var idx = 0; idx < combolist.length; ++idx) {
                if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(combolist[idx])) {
                    continue;
                }
                    
                dvOptions.push({
                    text: combolist[idx],
                    value: combolist[idx]
                })
            }
        }

        var fieldIdValue = fieldList[0].fieldId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fieldId !== fieldIdValue) {
                fieldIdValue = '';
                break;
            }
        }

        ComboboxField.showFieldAttribute(node,
            idValue, fieldIdValue, requiredValue, ownerIdValue, dvValue, fontFamilyNameValue, fontSizeValue, textAlignValue, boldValue, fontColorValue, comboboxListValue,
            userList, dvOptions,
            changeEventFunc);
    }

    validateValue(propertyName, value) {
        return true;
    }

}


/***/ }),

/***/ "./js/pdf_form/src/Fields/DateField.js":
/*!*********************************************!*\
  !*** ./js/pdf_form/src/Fields/DateField.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DateField: () => (/* binding */ DateField)
/* harmony export */ });
/* harmony import */ var _TextBaseField__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./TextBaseField */ "./js/pdf_form/src/Fields/TextBaseField.js");
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");
/* harmony import */ var _Constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../Constants.js */ "./js/pdf_form/src/Constants.js");
/* harmony import */ var _utils_color_picker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../utils/color-picker */ "./js/pdf_form/src/utils/color-picker.js");
/* harmony import */ var _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_utils_color_picker__WEBPACK_IMPORTED_MODULE_3__);

/**
 * @module Template/Field
*/






/**
 * @description 날짜 필드 Class
 *
 * @property {Function} fieldName {@link module:Template/Field.DateField#fieldName}
 * @property {Function} showFieldAttribute {@link module:Template/Field.DateField#showFieldAttribute}
 * @property {Function} showFieldsAttribute {@link module:Template/Field.DateField#showFieldsAttribute}
 * 
 * @augments TextBaseField {@link module:Template/Field.TextBaseField#TextBaseField}
 * @FileName DateField.js
 * @since 2021.05.31
 */
class DateField extends _TextBaseField__WEBPACK_IMPORTED_MODULE_0__.TextBaseField {
    /**
     * @constructor
     * @param id 필드의 ID
     * @param pageNo 필드가 속한 페이지 번호
     * @param x 필드의 svg상의 x좌표
     * @param y 필드의 svg상의 y좌표
     *
     */
    constructor(id, pageNo, x, y) {
        super(id, pageNo, x, y, DateField.widthValue(), DateField.heightValue());
        this.m_type = DateField.fieldName();
        
        this.m_kind = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.translateForKey("Template.dateFieldTool");

        /**
         * @type {String}
         * @name module:Template/Field.DateField#m_inputMax
         * @description 날짜의 최대값
         * @example
         * // getter inputMax()
         * // setter inputMax(val)
         */
        this.m_inputMax = "";

        /**
         * @type {String}
         * @name module:Template/Field.DateField#m_inputMin
         * @description 날짜의 최소값
         * @example
         * // getter inputMin()
         * // setter inputMin(val)
         */
        this.m_inputMin = "";

        /**
         * @type {String}
         * @name module:Template/Field.DateField#m_useCurrentDate
         * @description  현재 날짜를 기본값으로 사용할 지 여부
         * @example
         * // getter useCurrentDate()
         * // setter useCurrentDate(val)
         */
        this.m_useCurrentDate = "true";

        /**
         * @type {String}
         * @name module:Template/Field.DateField#m_inputFormat
         * @description  날짜 포멧
         * @example
         * // getter inputFormat()
         * // setter inputFormat(val)
         */
        this.m_inputFormat = "Y-m-d";
        if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(id)) {
            return;
        }
        this.m_fieldId = this.m_id.replace(this.m_type, this.m_kind + "-");
    }

    /**
     * @function fieldName
     * @name module:Template/Field.DateField#fieldName
     * @return {String}
     * @description (Static) 필드 타입의 이름
     * @static
     *
     */
    static fieldName() {
        return "DateField";
    }
    
    ancestors() {
        return ["DF", "TBF", "BF"];
    }

    get inputFormat() {
        return this.m_inputFormat;
    }

    set inputFormat(__inputFormat) {
        this.m_inputFormat = __inputFormat;
    }

    get inputMax() {
        return this.m_inputMax;
    }

    set inputMax(__inputMax) {
        this.m_inputMax = __inputMax;
    }

    get inputMin() {
        return this.m_inputMin;
    }

    set inputMin(__inputMin) {
        this.m_inputMin = __inputMin;
    }

    get useCurrentDate() {
        return this.m_useCurrentDate;
    }

    set useCurrentDate(__useCurrentDate) {
        this.m_useCurrentDate = __useCurrentDate;
    }

    /**
     * @function showFieldAttribute
     * @static
     * @name module:Template/Field.DateField#showFieldAttribute
     * @description (Static)  필드의 속성 팝업창을 설정한다.
     *
     * @param {HTML} node  속성 팝업 Node
     * @param {String} idValue     필드의 id값
     * @param {String} requiredValue     필수여부 값
     * @param {String} ownerIdValue     서명자 아이디
     * @param {String} inputFormatValue     날짜 형식
     * @param {String} useCurrentDateValue     현재 날짜를 쓰는지 여부
     * @param {String} fontFamilyNameValue     폰트 이름
     * @param {String} fontSizeValue     폰트 크기 값
     * @param {String} textAlignValue     텍스트 가로 정렬 값
     * @param {String} boldValue     폰트 볼드 여부
     * @param {String} fontColorValue     폰트 칼라
     * @param {String} comboboxListValue    콤보박스 리스트에 들어가는 리스트 값
     * @param {Array} userList   서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldAttribute(node,
        idValue, fieldIdValue, requiredValue, ownerIdValue, inputFormatValue, useCurrentDateValue,
        fontFamilyNameValue, fontSizeValue, textAlignValue, boldValue, fontColorValue,
        userList,
        changeEventFunc) {
        var panel = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributePanelNode();

        var requireRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeToggleButtonNode(idValue, "required", "Template.isRequired", requiredValue, changeEventFunc);
        panel.appendChild(requireRow);

        let useDefaulOptionNode = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsListCount() !== 1;
        var ownerSelectRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(idValue, "ownerId", userList, "", useDefaulOptionNode);
        panel.appendChild(ownerSelectRow);

        let ownerSelect = ownerSelectRow.querySelector("select");
        $(ownerSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(ownerSelect).val(ownerIdValue).trigger("change");
        $(ownerSelect).on("change", changeEventFunc);

        var fontAttrRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createTextAttrbuteNode(idValue, fontColorValue, textAlignValue, boldValue, changeEventFunc);
        panel.appendChild(fontAttrRow.row);

        let fontFamilyComboSelect = fontAttrRow.fontFamilyCombo.querySelector("select");
        $(fontFamilyComboSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(fontFamilyComboSelect).val(fontFamilyNameValue).trigger("change");
        $(fontFamilyComboSelect).on("change", changeEventFunc);
        let fontSizeComboSelect = fontAttrRow.fontSizeCombo.querySelector("select");
        $(fontSizeComboSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(fontSizeComboSelect).val(fontSizeValue).trigger("change");
        $(fontSizeComboSelect).on("change", changeEventFunc);

        let colorInput = fontAttrRow.colorBtn.querySelector("button");
        colorInput.style.backgroundColor = fontColorValue;
        let picker = new (_utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default())(colorInput, { color: fontColorValue });
        colorInput.value = fontColorValue;
        picker.on('change', function (r, g, b, a) {
            if (!picker.visible) {
                return;
            }
            colorInput.style.backgroundColor = _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]);
            colorInput.value = _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]);

            let colorTextInput = fontAttrRow.colorBtn.querySelector("input[type='text']");
            colorTextInput.value = (_utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]));
        });
        picker.on('exit', function (r, g, b, a) {
            colorInput.style.backgroundColor = _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]);

            let colorTextInput = fontAttrRow.colorBtn.querySelector("input[type='text']");
            colorTextInput.value = (_utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]));
            colorTextInput.dispatchEvent(new Event("change"));
        });


        var fieldIdValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeInputNode(idValue, "fieldId", "Template.fieldIdText", fieldIdValue, "", "", changeEventFunc);
        panel.appendChild(fieldIdValueRow);

        var inputFormatRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(idValue, "inputFormat", _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.dateFormatComboBox, "Template.dateFormatText", false);
        panel.appendChild(inputFormatRow);

        let inputFormatSelect = inputFormatRow.querySelector("select");
        $(inputFormatSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(inputFormatSelect).val(inputFormatValue).trigger("change");
        $(inputFormatSelect).on("change", changeEventFunc);

        var useCurrentRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeCheckBoxNode(idValue, "useCurrentDate", "Template.useCurrentDateText", useCurrentDateValue, changeEventFunc);
        panel.appendChild(useCurrentRow);

        panel.setAttribute("Field-id-list", idValue);
        node.className = "Editor-Attribute";
        node.classList.add("Text-Field");
        node.appendChild(panel);
       
    }

    /**
     * @function showFieldsAttribute
     * @static
     * @name module:Template/Field.DateField#showFieldsAttribute
     * @description (Static)  필드의 속성 팝업창을 설정한다.
     *
     * @param {HTML} ownerNode  속성 팝업 Node
     * @param {Array} fieldList     필드들의 리스트
     * @param {HTML} attrNode    속성 팝업의 Node
     * @param {String} mainGroup    SVG의 메인 Element
     * @param {Array} userList   서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldsAttribute(ownerNode, fieldList, attrNode, mainGroup, userList, dvOptionList, changeEventFunc) {
        let node = attrNode;
        if (attrNode === null || _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(attrNode)) {
            const bbox = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.mergeFieldsBBox(fieldList);
            node = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttrbutePopup(ownerNode, bbox);
            _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.repositionFieldDeleteBtn(ownerNode, bbox.x, bbox.y, bbox.width);
        }
        _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.removeAllChildNode(node);

        var idValueArr = [];
        fieldList.forEach((field) => {
            idValueArr.push(field.id);
        });

        var idValue = idValueArr.join();

        var ownerIdValue = fieldList[0].ownerId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].ownerId !== ownerIdValue) {
                ownerIdValue = '';
                break;
            }
        }

        var requiredValue = fieldList[0].required;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].required !== requiredValue) {
                requiredValue = '';
                break;
            }
        }

        var idValue = idValueArr.join();
        var fieldIdValue = fieldList[0].fieldId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fieldId !== fieldIdValue) {
                fieldIdValue = '';
                break;
            }
        }

        var fontFamilyNameValue = fieldList[0].fontName;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontName !== fontFamilyNameValue) {
                fontFamilyNameValue = '';
                break;
            }
        }
        var fontSizeValue = fieldList[0].fontSize;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontSize !== fontSizeValue) {
                fontSizeValue = '';
                break;
            }
        }

        var textAlignValue = fieldList[0].textAlign;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].textAlign !== textAlignValue) {
                textAlignValue = '';
                break;
            }
        }

        var boldValue = fieldList[0].isBold;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].isBold !== boldValue) {
                boldValue = '';
                break;
            }
        }
        var fontColorValue = fieldList[0].fontColor;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontColor !== fontColorValue) {
                fontColorValue = '';
                break;
            }
        }
        var inputFormatValue = fieldList[0].inputFormat;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].inputFormat !== inputFormatValue) {
                inputFormatValue = '';
                break;
            }
        }

        var useCurrentDateValue = fieldList[0].useCurrentDate;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].useCurrentDate !== useCurrentDateValue) {
                useCurrentDateValue = '';
                break;
            }
        }

        var fieldIdValue = fieldList[0].fieldId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fieldId !== fieldIdValue) {
                fieldIdValue = '';
                break;
            }
        }

        DateField.showFieldAttribute(node,
            idValue, fieldIdValue, requiredValue, ownerIdValue, inputFormatValue, useCurrentDateValue,
            fontFamilyNameValue, fontSizeValue, textAlignValue, boldValue, fontColorValue,
            userList,
            changeEventFunc);
    }
}


/***/ }),

/***/ "./js/pdf_form/src/Fields/ImageField.js":
/*!**********************************************!*\
  !*** ./js/pdf_form/src/Fields/ImageField.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ImageField: () => (/* binding */ ImageField)
/* harmony export */ });
/* harmony import */ var _BaseField__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BaseField */ "./js/pdf_form/src/Fields/BaseField.js");
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");
/* harmony import */ var _Constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../Constants.js */ "./js/pdf_form/src/Constants.js");

/**
 * @module Template/Field
*/





/**
 * @description 이미지 필드 Class
 *
 *
 * @property {Function} fieldName {@link module:Template/Field.ImageField#fieldName}
 * @property {Function} widthValue {@link module:Template/Field.ImageField#widthValue}
 * @property {Function} heightValue {@link module:Template/Field.ImageField#heightValue}
 * @property {Function} makeSVGText {@link module:Template/Field.ImageField#makeSVGText}
 * @property {Function} getSVGFieldObject {@link module:Template/Field.ImageField#getSVGFieldObject}
 *
 * @augments BaseField {@link module:Template/Field.BaseField#BaseField}
 * @FileName ImageField.js
 * @since 2021.05.31
 */
class ImageField extends _BaseField__WEBPACK_IMPORTED_MODULE_0__.BaseField {
    /**
     * @constructor
     * @param id 필드의 ID
     * @param pageNo 필드가 속한 페이지 번호
     * @param x 필드의 svg상의 x좌표
     * @param y 필드의 svg상의 y좌표
     *
     */
    constructor(id, pageNo, x, y) {
        super(id, pageNo, x, y, ImageField.widthValue(), ImageField.heightValue());
        this.m_type = ImageField.fieldName();

        this.m_kind = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.translateForKey("Template.imageFieldTool");

        if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(id)) {
            return;
        }
        this.m_fieldId = this.m_id.replace(this.m_type, this.m_kind + "-");
    }


    /**
     * @function fieldName
     * @name module:Template/Field.ImageField#fieldName
     * @return {String}
     * @description (Static) 필드 타입의 이름
     * @static
     *
     */
    static fieldName() {
        return "ImageField";
    }

    
    ancestors() {
        return ["IMGF", "BF"];
    }

    /**
     * @function widthValue
     * @name module:Template/Field.ImageField#widthValue
     * @description (Static) 필드의 초기 가로 길이
     * @return {Number}
     * @static
     *
     */
    static widthValue() {
        return 150;
    }
    
    /**
     * @function heightValue
     * @name module:Template/Field.ImageField#heightValue
     * @description (Static)  필드의 초기 세로 길이
     * @return {Number}
     * @static
     *
     */
    static heightValue() {
        return 60;
    }

    /**
     * @function getSVGFieldObject
     * @name module:Template/Field.ImageField#makeSVGText
     * @memberOf module:Template/Field.ImageField
     * @description 필드의 종류를 표현하는 SVG Text element
     *
     * @param {Number} scale 현재 PDF의 Scale
     * @return SVG Node Element
     * @Date : 2021. 5. 31
     */
    makeSVGText(scale) {
        let value = this.m_fieldId;
        var textFontColor = "fill='" + this.fontColor + "' ";

        let textPos = ' x="50%"  dy="0.35em" text-anchor="middle" '
        if (this.textAlign === "left") {
            textPos = ' x="3%"  dy="0.35em" text-anchor="start" ';
        } else if (this.textAlign === "right") {
            textPos = ' x="97%" dy="0.35em" text-anchor="end" ';
        }

        let textVerticalPos = 'y="50%"';

        let fontInfo = ' font-size="' + this.fontSize + 'px" ';
        let textObj = '<text' + textPos + textVerticalPos + fontInfo + textFontColor + '>' + value + '</text>';
        const fobjectSVG = '<svg x="' + this.x + 'px" y="' + this.y + 'px" width="' + this.width * scale +
            'px" height="' + this.height * scale + 'px"><g  >' + textObj + '</g></svg>';

        return fobjectSVG;
    }

    /**
     * @function getSVGFieldObject
     * @name module:Template/Field.ImageField#getSVGFieldObject
     * @memberOf module:Template/Field.ImageField
     * @description 필드의 정보를 가지고 SVG Element를 생성한다.
     *
     * @param {Object} canvas Snap SVG의 Canvas Object
     * @param {Object} mainGroup   SVG의 메인 Node
     * @param {Number} scale  현재 PDF의 Scale
     * @param {HTML} ownerNode    해당 프로젝트의 최상단 Element를 감싸고 있는 Element
     * @param {Callback} removeDragOverGroupFunc     드래그 되어 선택되어진 Field Group을 제거하는 callback function
     * @param {Callback} changeValueEventFunc    속성값이 변할때 호출되는 callback function
     * @param {Callback} changeFreeTransformFunc     FreeTransform을 다시 생성하기 위한 callback function
     * @return SVG Node Element
     * @Date : 2021. 5. 31
     */
    getSVGFieldObject(canvas, mainGroup, scale, ownerNode, removeDragOverGroupFunc, changeValueEventFunc, changeFreeTransformFunc) {
        let group = mainGroup.group();
        group.attr({
            id: this.id + "Group",
            cursor: "move"
        });
        let rect = canvas.rect(this.x, this.y, this.width * scale, this.height * scale);
        rect.attr({
            id: this.id,
            "fill-opacity": "0.6",
            "fill": "#ffac7f"
        });
        group.append(rect);
        const p = Snap.parse(this.makeSVGText(scale));
        group.append(p);

        group.hover(
            function () { // f_in
            },
            function () { // f_out
            }
        );

        let _imgField = this;
        let mousePos = { x: 0, y: 0 };
        group.mousedown(function (evt) {
            mousePos.x = evt.pageX;
            mousePos.y = evt.pageY;
            const items = mainGroup.selectAll('g');
            items.forEach(function (element) {
                if (element !== group) {
                    if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(element.freeTransform)) {
                        element.freeTransform.hideResizeHandler();
                    }
                }
            });
            if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(group.freeTransform)) {
                group.freeTransform.showResizeHandler();
            } else {
                changeFreeTransformFunc(group, rect.attr("width"), rect.attr("height"));
            }
        });

        group.mouseup(function (evt) {
            if (group.parent().attr("id") === _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME) {
                if (Math.abs(mousePos.x - evt.pageX) > _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MINIMUM_DRAG_SIZE
                    || Math.abs(mousePos.y - evt.pageY) > _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MINIMUM_DRAG_SIZE) {
                    return;
                }
                removeDragOverGroupFunc.call();
                const items = mainGroup.selectAll('g');
                items.forEach(function (element) {
                    if (element !== group) {
                        if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(element.freeTransform)) {
                            element.freeTransform.hideResizeHandler();
                        }
                    }
                });
                if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(group.freeTransform)) {
                    group.freeTransform.showResizeHandler();
                } else {
                    changeFreeTransformFunc(group, rect.attr("width"), rect.attr("height"));
                }
                _imgField.constructor.showFieldsAttribute(ownerNode, [_imgField], undefined, mainGroup, _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsList(), _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getDVFieldOptsList(), changeValueEventFunc);
            } else {
                _imgField.constructor.showFieldsAttribute(ownerNode, [_imgField], undefined, mainGroup, _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsList(), _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getDVFieldOptsList(), changeValueEventFunc);
            }
        });
        return group;

    }
}


/***/ }),

/***/ "./js/pdf_form/src/Fields/LabelField.js":
/*!**********************************************!*\
  !*** ./js/pdf_form/src/Fields/LabelField.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LabelField: () => (/* binding */ LabelField)
/* harmony export */ });
/* harmony import */ var _TextBaseField__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./TextBaseField */ "./js/pdf_form/src/Fields/TextBaseField.js");
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");
/* harmony import */ var _Constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../Constants.js */ "./js/pdf_form/src/Constants.js");
/* harmony import */ var _utils_color_picker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../utils/color-picker */ "./js/pdf_form/src/utils/color-picker.js");
/* harmony import */ var _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_utils_color_picker__WEBPACK_IMPORTED_MODULE_3__);

/**
 * @module Template/Field
*/






/**
 * @description 레이블 필드 Class
 *
 * @property {Function} fieldName {@link module:Template/Field.LabelField#fieldName}
 * @property {Function} showFieldAttribute {@link module:Template/Field.LabelField#showFieldAttribute}
 * @property {Function} showFieldsAttribute {@link module:Template/Field.LabelField#showFieldsAttribute}
 * @property {Function} makeSVGText {@link module:Template/Field.LabelField#makeSVGText}
 *
 * @augments TextBaseField {@link module:Template/Field.TextBaseField#TextBaseField}
 * @FileName LabelField.js
 * @since 2021.05.31
 */
class LabelField extends _TextBaseField__WEBPACK_IMPORTED_MODULE_0__.TextBaseField {
    /**
     * @constructor
     * @param id 필드의 ID
     * @param pageNo 필드가 속한 페이지 번호
     * @param x 필드의 svg상의 x좌표
     * @param y 필드의 svg상의 y좌표
     *
     */
    constructor(id, pageNo, x, y) {
        super(id, pageNo, x, y, LabelField.widthValue(), LabelField.heightValue());
        this.m_type = LabelField.fieldName();


        this.m_maxValueLength = 100;

        this.m_kind = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.translateForKey("Template.labelFieldTool");
        if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(id)) {
            return;
        }
        this.m_fieldId = this.m_id.replace(this.m_type, this.m_kind + "-");
    }


    /**
     * @function fieldName
     * @name module:Template/Field.LabelField#fieldName
     * @return {String}
     * @description (Static) 필드 타입의 이름
     * @static
     *
     */
    static fieldName() {
        return "LabelField";
    }

    ancestors() {
        return ["LF", "TBF", "BF"];
    }

    /**
     * @function showFieldAttribute
     * @static
     * @name module:Template/Field.LabelField#showFieldAttribute
     * @description (Static) 필드의 속성 팝업창을 설정한다.
     *
     * @param {HTML} node   속성 팝업 Node
     * @param {String} idValue     필드의 id값
     * @param {String} requiredValue     필수여부 값
     * @param {String} ownerIdValue     서명자 아이디
     * @param {String} dvValue     기본값
     * @param {String} fontFamilyNameValue     폰트 이름
     * @param {String} fontSizeValue     폰트 크기 값
     * @param {String} textAlignValue     텍스트 가로 정렬 값
     * @param {String} boldValue     폰트 볼드 여부
     * @param {String} fontColorValue     폰트 칼라
     * @param {String} fieldValue    레이블 텍스트
     * @param {Array} userList   서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldAttribute(node,
        idValue, fieldIdValue, requiredValue, ownerIdValue, dvValue, fontFamilyNameValue, fontSizeValue, textAlignValue, boldValue, fontColorValue, fieldValue,
        userList, dvOptionList,
        changeEventFunc) {

        var panel = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributePanelNode();

        var requireRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeToggleButtonNode(idValue, "required", "Template.isRequired", requiredValue, changeEventFunc);
        panel.appendChild(requireRow);

        let useDefaulOptionNode = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsListCount() !== 1;
        var ownerSelectRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(idValue, "ownerId", userList, "", useDefaulOptionNode);
        panel.appendChild(ownerSelectRow);

        let ownerSelect = ownerSelectRow.querySelector("select");
        jQuery(ownerSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        jQuery(ownerSelect).val(ownerIdValue).trigger("change");
        jQuery(ownerSelect).on("change", changeEventFunc);

        //12-28
        if (dvOptionList && Array.isArray(dvOptionList) && dvOptionList.length > 0) {
            var defaultValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(idValue, "defaultValue", dvOptionList, "Template.defaultValueText", true);
            panel.appendChild(defaultValueRow);

            let defaultValueSelect = defaultValueRow.querySelector("select");
            $(defaultValueSelect).select2({
                minimumResultsForSearch: Infinity,
                width: "100%"
            });
            $(defaultValueSelect).val(dvValue).trigger("change");
            $(defaultValueSelect).on("change", changeEventFunc);
        }

        var fieldIdValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeInputNode(idValue, "fieldId", "Template.fieldIdText", fieldIdValue, "", "", changeEventFunc);
        panel.appendChild(fieldIdValueRow);

        var fieldValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeInputNode(idValue, "value", "Template.labelValueText", fieldValue, "", "", changeEventFunc);
        panel.appendChild(fieldValueRow);

        var fontAttrRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createTextAttrbuteNode(idValue, fontColorValue, textAlignValue, boldValue, changeEventFunc);
        panel.appendChild(fontAttrRow.row);

        let fontFamilyComboSelect = fontAttrRow.fontFamilyCombo.querySelector("select");
        $(fontFamilyComboSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(fontFamilyComboSelect).val(fontFamilyNameValue).trigger("change");
        $(fontFamilyComboSelect).on("change", changeEventFunc);
        let fontSizeComboSelect = fontAttrRow.fontSizeCombo.querySelector("select");
        $(fontSizeComboSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(fontSizeComboSelect).val(fontSizeValue).trigger("change");
        $(fontSizeComboSelect).on("change", changeEventFunc);

        let colorInput = fontAttrRow.colorBtn.querySelector("button");
        colorInput.style.backgroundColor = fontColorValue;
        let picker = new (_utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default())(colorInput, { color: fontColorValue });
        colorInput.value = fontColorValue;
        picker.on('change', function (r, g, b, a) {
            if (!picker.visible) {
                return;
            }
            colorInput.style.backgroundColor = _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]);
            colorInput.value = _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]);

            let colorTextInput = fontAttrRow.colorBtn.querySelector("input[type='text']");
            colorTextInput.value = (_utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]));
        });
        picker.on('exit', function (r, g, b, a) {
            colorInput.style.backgroundColor = _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]);

            let colorTextInput = fontAttrRow.colorBtn.querySelector("input[type='text']");
            colorTextInput.value = (_utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]));
            colorTextInput.dispatchEvent(new Event("change"));
        });

        panel.setAttribute("Field-id-list", idValue);

        node.className = "Editor-Attribute";
        node.classList.add("Text-Field");
        node.appendChild(panel);
    }


    /**
     * @function showFieldsAttribute
     * @static
     * @name module:Template/Field.LabelField#showFieldsAttribute
     * @description 필드의 속성 팝업창을 설정한다.
     *
     * @param {HTML} ownerNode  속성 팝업 Node
     * @param {Array} fieldList     필드들의 리스트
     * @param {HTML} attrNode    속성 팝업의 Node
     * @param {String} mainGroup    SVG의 메인 Element
     * @param {Array} userList   서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldsAttribute(ownerNode, fieldList, attrNode, mainGroup, userList, dvOptionList, changeEventFunc) {
        let node = attrNode;
        if (attrNode === null || _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(attrNode)) {
            const bbox = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.mergeFieldsBBox(fieldList);
            node = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttrbutePopup(ownerNode, bbox);
            _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.repositionFieldDeleteBtn(ownerNode, bbox.x, bbox.y, bbox.width);
        }
        _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.removeAllChildNode(node);

        var idValueArr = [];
        fieldList.forEach((field) => {
            idValueArr.push(field.id);
        });

        var idValue = idValueArr.join();

        var ownerIdValue = fieldList[0].ownerId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].ownerId !== ownerIdValue) {
                ownerIdValue = '';
                break;
            }
        }


        var fieldIdValue = fieldList[0].fieldId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fieldId !== fieldIdValue) {
                fieldIdValue = '';
                break;
            }
        }

        var requiredValue = fieldList[0].required;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].required !== requiredValue) {
                requiredValue = '';
                break;
            }
        }

        var dvValue = fieldList[0].defaultValue;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].defaultValue !== dvValue) {
                dvValue = '';
                break;
            }
        }

        var fontFamilyNameValue = fieldList[0].fontName;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontName !== fontFamilyNameValue) {
                fontFamilyNameValue = '';
                break;
            }
        }
        var fontSizeValue = fieldList[0].fontSize;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontSize !== fontSizeValue) {
                fontSizeValue = '';
                break;
            }
        }

        var textAlignValue = fieldList[0].textAlign;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].textAlign !== textAlignValue) {
                textAlignValue = '';
                break;
            }
        }

        var boldValue = fieldList[0].isBold;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].isBold !== boldValue) {
                boldValue = '';
                break;
            }
        }
        var fontColorValue = fieldList[0].fontColor;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontColor !== fontColorValue) {
                fontColorValue = '';
                break;
            }
        }

        var fieldValue = fieldList[0].value;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].value !== fieldValue) {
                fieldValue = '';
                break;
            }
        }

        LabelField.showFieldAttribute(node,
            idValue, fieldIdValue, requiredValue, ownerIdValue, dvValue, fontFamilyNameValue, fontSizeValue, textAlignValue, boldValue, fontColorValue, fieldValue,
            userList, dvOptionList,
            changeEventFunc);
    }

    validateValue(propertyName, value) {
        return true;
    }


    /**
     * @function getSVGFieldObject
     * @name module:Template/Field.LabelField#makeSVGText
     * @memberOf module:Template/Field.LabelField
     * @description (Static)  필드의 종류를 표현하는 SVG Text element
     *
     * @param {Number} scale 현재 PDF의 Scale
     * @return {Object} SVG Node Element
     * @Date : 2021. 5. 31
     */
    makeSVGText(scale) {
        let value = this.value;
        if (value === '' && this.defaultValueText === '') {
            value = this.m_fieldId;
        } else if (value === '' && this.defaultValueText !== '') {
            value = this.defaultValueText;
        }
        var textFontColor = "fill='" + this.fontColor + "' ";

        let textPos = ' x="50%"  dy="0.35em" text-anchor="middle" '
        if (this.textAlign === "left") {
            textPos = ' x="3%"  dy="0.35em" text-anchor="start" ';
        } else if (this.textAlign === "right") {
            textPos = ' x="97%" dy="0.35em" text-anchor="end" ';
        }

        let textVerticalPos = 'y="50%"';
        if (this.textVeticalAlign === "top") {
            textVerticalPos = 'y="25%"';
        } else if (this.textVeticalAlign === "bottom") {
            textVerticalPos = 'y="70%"';
        }

        let fontWeigth = "";
        if (this.isBold === "true") {
            fontWeigth = " font-weight='bold' ";
        }

        let fontFmaily = " font-family='" + this.fontName + "' ";

        let fontInfo = ' font-size="' + this.fontSize * scale + 'px" ';
        let textObj = '<text' + textPos + textVerticalPos + fontFmaily + fontInfo + textFontColor + fontWeigth + '>' + value + '</text>';
        const fobjectSVG = '<svg x="' + this.x + 'px" y="' + this.y + 'px" width="' + this.width * scale +
            'px" height="' + this.height * scale + 'px"><g  >' + textObj + '</g></svg>';

        return fobjectSVG;
    }
}



/***/ }),

/***/ "./js/pdf_form/src/Fields/MultiLineTextField.js":
/*!******************************************************!*\
  !*** ./js/pdf_form/src/Fields/MultiLineTextField.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MultiLineTextField: () => (/* binding */ MultiLineTextField)
/* harmony export */ });
/* harmony import */ var _TextBaseField__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./TextBaseField */ "./js/pdf_form/src/Fields/TextBaseField.js");
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");

/**
 * @module Template/Field
*/





/**
 * @description 멀티라인 필드 Class
 *
 * @property {Function} fieldName {@link module:Template/Field.MultiLineTextField#fieldName}
 * @property {Function} showFieldAttribute {@link module:Template/Field.MultiLineTextField#showFieldAttribute}
 * @property {Function} showFieldsAttribute {@link module:Template/Field.MultiLineTextField#showFieldsAttribute}
 * @property {Function} makeSVGText {@link module:Template/Field.MultiLineTextField#makeSVGText}
 *
 * @augments TextBaseField {@link module:Template/Field.TextBaseField#TextBaseField}
 * @FileName MultiLineTextField.js
 * @since 2021.05.31
 */
class MultiLineTextField extends _TextBaseField__WEBPACK_IMPORTED_MODULE_0__.TextBaseField {
    /**
     * @constructor
     * @param id 필드의 ID
     * @param pageNo 필드가 속한 페이지 번호
     * @param x 필드의 svg상의 x좌표
     * @param y 필드의 svg상의 y좌표
     *
     */
    constructor(id, pageNo, x, y) {
        super(id, pageNo, x, y, MultiLineTextField.widthValue(), MultiLineTextField.heightValue());
        this.m_type = MultiLineTextField.fieldName();

        this.m_kind = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.translateForKey("Template.multilineFieldTool");
        if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(id)) {
            return;
        }
        this.m_fieldId = this.m_id.replace(this.m_type, this.m_kind + "-");
        this.textVeticalAlign = "top";
    }

    /**
     * @function fieldName
     * @name module:Template/Field.MultiLineTextField#fieldName
     * @return {String}
     * @description (Static) 필드 타입의 이름
     * @static
     *
     */
    static fieldName() {
        return "MultiLineTextField";
    }

    ancestors() {
        return ["MLTF", "TBF", "BF"];
    }

    /**
     * @function widthValue
     * @name module:Template/Field.MultiLineTextField#widthValue
     * @description (Static) 필드의 초기 가로 길이
     * @return {Number}
     * @static
     *
     */
    static widthValue() {
        return 150;
    }

    /**
     * @function heightValue
     * @name module:Template/Field.MultiLineTextField#heightValue
     * @description (Static) 필드의 초기 세로 길이
     * @return {Number}
     * @static
     *
     */
    static heightValue() {
        return 60;
    }

    /**
     * @function showFieldsAttribute
     * @static
     * @name module:Template/Field.MultiLineTextField#showFieldsAttribute
     * @description (Static)  필드의 속성 팝업창을 설정한다.
     *
     * @param {ELEMENT} ownerNode  속성 팝업 Node
     * @param {Array} fieldList     필드들의 리스트
     * @param {HTML} attrNode    속성 팝업의 Node
     * @param {String} mainGroup    SVG의 메인 Element
     * @param {Array} userList   서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldsAttribute(ownerNode, fieldList, attrNode, mainGroup, userList, dvOptionList, changeEventFunc) {
        _TextBaseField__WEBPACK_IMPORTED_MODULE_0__.TextBaseField.showFieldsAttribute(ownerNode, fieldList, attrNode, mainGroup, userList, dvOptionList, changeEventFunc);
    }

    validateValue(propertyName, value) {
        return true;
    }
}


/***/ }),

/***/ "./js/pdf_form/src/Fields/NumberField.js":
/*!***********************************************!*\
  !*** ./js/pdf_form/src/Fields/NumberField.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NumberField: () => (/* binding */ NumberField)
/* harmony export */ });
/* harmony import */ var _TextBaseField__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./TextBaseField */ "./js/pdf_form/src/Fields/TextBaseField.js");
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");
/* harmony import */ var _utils_color_picker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../utils/color-picker */ "./js/pdf_form/src/utils/color-picker.js");
/* harmony import */ var _utils_color_picker__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_utils_color_picker__WEBPACK_IMPORTED_MODULE_2__);

/**
 * @module Template/Field
 */





/**
 * @description 숫자 필드 Class
 *
 * @property {Number} m_inputMax {@link module:Template/Field.NumberField#m_inputMax}
 * @property {Number} m_inputMin {@link module:Template/Field.NumberField#m_inputMin}
 * 
 * @property {Function} fieldName {@link module:Template/Field.NumberField#fieldName}
 * @property {Function} showFieldsAttribute {@link module:Template/Field.NumberField#showFieldsAttribute}
 * 
 * @augments TextBaseField {@link module:Template/Field.TextBaseField#TextBaseField}
 * @FileName NumberField.js
 * @since 2021.05.31
 */
class NumberField extends _TextBaseField__WEBPACK_IMPORTED_MODULE_0__.TextBaseField {
    /**
     * @constructor
     * @param id 필드의 ID
     * @param pageNo 필드가 속한 페이지 번호
     * @param x 필드의 svg상의 x좌표
     * @param y 필드의 svg상의 y좌표
     *
     */
    constructor(id, pageNo, x, y) {
        super(id, pageNo, x, y, NumberField.widthValue(), NumberField.heightValue());
        this.m_type = NumberField.fieldName();
        
        this.m_kind = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.translateForKey("Template.numberFieldTool");

        /**
         * @type {Number}
         * @name module:Template/Field.NumberField#m_inputMax
         * @description 숫자 필드의 최대값
         * @example
         * // getter inputMax()
         * // setter inputMax(val)
         */
        this.m_inputMax = null;

        /**
         * @type {Number}
         * @name module:Template/Field.NumberField#m_inputMin
         * @description 숫자 필드의 최소값
         * @example
         * // getter inputMin()
         * // setter inputMin(val)
         */
        this.m_inputMin = null;

        this.m_useCalc = 'false';

        if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(id)) {
            return;
        }
        this.m_fieldId = this.m_id.replace(this.m_type, this.m_kind + "-");
        
    }

    /**
     * @function fieldName
     * @name module:Template/Field.NumberField#fieldName
     * @return {String}
     * @description (Static) 필드 타입의 이름
     * @static
     *
     */
    static fieldName() {
        return "NumberField";
    }
    
    ancestors() {
        return ["NF", "TBF", "BF"];
    }

    get inputMax() {
        return this.m_inputMax;
    }

    set inputMax(__inputMax) {
        this.m_inputMax = __inputMax;
    }

    get inputMin() {
        return this.m_inputMin;
    }

    set inputMin(__inputMin) {
        this.m_inputMin = __inputMin;
    }

    /**
     * @function showFieldAttribute
     * @static
     * @name module:Template/Field.TextBaseField#showFieldAttribute
     * @description  (Static) 필드의 속성 팝업창을 설정한다.
     *
     * @param {ELEMENT} node  속성 팝업 Node
     * @param {String} idValue     필드의 id값
     * @param {String} requiredValue     필수여부 값
     * @param {String} ownerIdValue     서명자 아이디
     * @param {String} dvValue     기본값
     * @param {Number} minValue     최소값
     * @param {Number} maxValue     최대값
     * @param {String} fontFamilyNameValue     폰트 이름
     * @param {String} fontSizeValue     폰트 크기 값
     * @param {String} textAlignValue     텍스트 가로 정렬 값
     * @param {String} boldValue     폰트 볼드 여부
     * @param {String} fontColorValue     폰트 칼라
     * @param {Array} userList   서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldAttribute(node,
        idValue, fieldIdValue, requiredValue, ownerIdValue, dvValue, minValue, maxValue, useCalcVal, fontFamilyNameValue, fontSizeValue, textAlignValue, boldValue, fontColorValue,
        userList, dvOptionList,
        changeEventFunc) {

        var panel = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributePanelNode();

        var requireRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeToggleButtonNode(idValue, "required", "Template.isRequired", requiredValue, changeEventFunc);
        panel.appendChild(requireRow);

        let useDefaulOptionNode = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsListCount() !== 1;
        var ownerSelectRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(idValue, "ownerId", userList, "", useDefaulOptionNode);
        panel.appendChild(ownerSelectRow);

        let ownerSelect = ownerSelectRow.querySelector("select");
        jQuery(ownerSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        jQuery(ownerSelect).val(ownerIdValue).trigger("change");
        jQuery(ownerSelect).on("change", changeEventFunc);

        //12-28
        if (dvOptionList && Array.isArray(dvOptionList) && dvOptionList.length > 0) {
            var defaultValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(idValue, "defaultValue", dvOptionList, "Template.defaultValueText", true);
            panel.appendChild(defaultValueRow);

            let defaultValueSelect = defaultValueRow.querySelector("select");
            $(defaultValueSelect).select2({
                minimumResultsForSearch: Infinity,
                width: "100%"
            });
            $(defaultValueSelect).val(dvValue).trigger("change");
            $(defaultValueSelect).on("change", changeEventFunc);
        }

        let minVal = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(minValue) ? '' : Number(minValue);
        var minValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeInputNode(idValue, "fieldMinValue", "Template.fieldMinValue", minVal, "number", "", changeEventFunc);
        panel.appendChild(minValueRow);
        let maxVal = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(maxValue) ? '' : Number(maxValue);
        var maxValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeInputNode(idValue, "fieldMaxValue", "Template.fieldMaxValue", maxVal, "number", "", changeEventFunc);
        panel.appendChild(maxValueRow);

        let calcRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeToggleButtonNode(idValue, "useCalc", "Template.useCalc", useCalcVal, changeEventFunc);
        panel.appendChild(calcRow);

        var fieldIdValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeInputNode(idValue, "fieldId", "Template.fieldIdText", fieldIdValue, "", "", changeEventFunc);
        panel.appendChild(fieldIdValueRow);

        var fontAttrRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createTextAttrbuteNode(idValue, fontColorValue, textAlignValue, boldValue, changeEventFunc);
        panel.appendChild(fontAttrRow.row);

        let fontFamilyComboSelect = fontAttrRow.fontFamilyCombo.querySelector("select");
        $(fontFamilyComboSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(fontFamilyComboSelect).val(fontFamilyNameValue).trigger("change");
        $(fontFamilyComboSelect).on("change", changeEventFunc);
        let fontSizeComboSelect = fontAttrRow.fontSizeCombo.querySelector("select");
        $(fontSizeComboSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(fontSizeComboSelect).val(fontSizeValue).trigger("change");
        $(fontSizeComboSelect).on("change", changeEventFunc);

        let colorInput = fontAttrRow.colorBtn.querySelector("button");
        colorInput.style.backgroundColor = fontColorValue;
        let picker = new (_utils_color_picker__WEBPACK_IMPORTED_MODULE_2___default())(colorInput, { color: fontColorValue });
        colorInput.value = fontColorValue;
        picker.on('change', function (r, g, b, a) {
            if (!picker.visible) {
                return;
            }
            colorInput.style.backgroundColor = _utils_color_picker__WEBPACK_IMPORTED_MODULE_2___default().HEX([r, g, b, a]);
            colorInput.value = _utils_color_picker__WEBPACK_IMPORTED_MODULE_2___default().HEX([r, g, b, a]);

            let colorTextInput = fontAttrRow.colorBtn.querySelector("input[type='text']");
            colorTextInput.value = (_utils_color_picker__WEBPACK_IMPORTED_MODULE_2___default().HEX([r, g, b, a]));
        });
        picker.on('exit', function (r, g, b, a) {
            colorInput.style.backgroundColor = _utils_color_picker__WEBPACK_IMPORTED_MODULE_2___default().HEX([r, g, b, a]);

            let colorTextInput = fontAttrRow.colorBtn.querySelector("input[type='text']");
            colorTextInput.value = (_utils_color_picker__WEBPACK_IMPORTED_MODULE_2___default().HEX([r, g, b, a]));
            colorTextInput.dispatchEvent(new Event("change"));
        });

        panel.setAttribute("Field-id-list", idValue);

        node.className = "Editor-Attribute";
        node.classList.add("Text-Field");
        node.appendChild(panel);
    }


     /**
     * @function showFieldsAttribute
     * @static
     * @name module:Template/Field.NumberField#showFieldsAttribute
     * @description (Static) 필드의 속성 팝업창을 설정한다.
     *
     * @param {HTML} ownerNode  속성 팝업 Node
     * @param {Array} fieldList     필드들의 리스트
     * @param {HTML} attrNode    속성 팝업의 Node
     * @param {String} mainGroup    SVG의 메인 Element
     * @param {Array} userList   서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldsAttribute(ownerNode, fieldList, attrNode, mainGroup, userList, dvOptionList, changeEventFunc) {
        let node = attrNode;
        if (attrNode === null || _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(attrNode)) {
            const bbox = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.mergeFieldsBBox(fieldList);
            node = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttrbutePopup(ownerNode, bbox);
            _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.repositionFieldDeleteBtn(ownerNode, bbox.x, bbox.y, bbox.width);
        }
        _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.removeAllChildNode(node);

        var idValueArr = [];
        fieldList.forEach((field) => {
            idValueArr.push(field.id);
        });

        var idValue = idValueArr.join();

        var ownerIdValue = fieldList[0].ownerId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].ownerId !== ownerIdValue) {
                ownerIdValue = '';
                break;
            }
        }

        var requiredValue = fieldList[0].required;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].required !== requiredValue) {
                requiredValue = '';
                break;
            }
        }

        var dvValue = fieldList[0].defaultValue;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].defaultValue !== dvValue) {
                dvValue = '';
                break;
            }
        }

        var fieldIdValue = fieldList[0].fieldId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fieldId !== fieldIdValue) {
                fieldIdValue = '';
                break;
            }
        }

        let minValue = fieldList[0].m_inputMin;
        for (let idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].m_inputMin !== minValue) {
                minValue = '';
                break;
            }
        }
        let maxValue = fieldList[0].m_inputMax;
        for (let idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].m_inputMax !== maxValue) {
                maxValue = '';
                break;
            }
        }

        let useCalcValue = fieldList[0].m_useCalc;
        for (let idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].m_useCalc !== useCalcValue) {
                useCalcValue = '';
                break;
            }
        }

        var fontFamilyNameValue = fieldList[0].fontName;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontName !== fontFamilyNameValue) {
                fontFamilyNameValue = '';
                break;
            }
        }
        var fontSizeValue = fieldList[0].fontSize;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontSize !== fontSizeValue) {
                fontSizeValue = '';
                break;
            }
        }

        var textAlignValue = fieldList[0].textAlign;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].textAlign !== textAlignValue) {
                textAlignValue = '';
                break;
            }
        }

        var boldValue = fieldList[0].isBold;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].isBold !== boldValue) {
                boldValue = '';
                break;
            }
        }
        var fontColorValue = fieldList[0].fontColor;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontColor !== fontColorValue) {
                fontColorValue = '';
                break;
            }
        }

        NumberField.showFieldAttribute(node,
            idValue, fieldIdValue, requiredValue, ownerIdValue, dvValue, minValue, maxValue, useCalcValue, fontFamilyNameValue, fontSizeValue, textAlignValue, boldValue, fontColorValue,
            userList, dvOptionList,
            changeEventFunc);
    }
    /**
     * @function validateValue
     * @static
     * @name module:Template/Field.NumberField#validateValue
     * @description 해당 프로퍼티의 값이 유효한지 체크한다. .
     *
     * @param {String} fieldPropetyName 필드의 속성 이름
     * @param {String} value   필드의 속성 값
     * @return {Boolean}
     * @Date : 2021. 5. 31
     */
    validateValue(fieldPropetyName, value) {
        if (fieldPropetyName === "defaultValue") {
            let isnum = /^\d+$/.test(value);
            if (!isnum) {
                return false;
            }
        }
        return true;
    }
}



/***/ }),

/***/ "./js/pdf_form/src/Fields/RadioField.js":
/*!**********************************************!*\
  !*** ./js/pdf_form/src/Fields/RadioField.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RadioField: () => (/* binding */ RadioField)
/* harmony export */ });
/* harmony import */ var _BaseField__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BaseField */ "./js/pdf_form/src/Fields/BaseField.js");
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");
/* harmony import */ var _Constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../Constants.js */ "./js/pdf_form/src/Constants.js");

/**
 * @module Template/Field
*/





/**
 * @description 라디오 필드 Class
 *
 * @property {String} m_groupName {@link module:Template/Field.RadioField#m_groupName}
 * @property {String} m_defaultValue {@link module:Template/Field.RadioField#m_defaultValue}
 * 
 * @property {Function} fieldName {@link module:Template/Field.RadioField#fieldName}
 * @property {Function} widthValue {@link module:Template/Field.RadioField#widthValue}
 * @property {Function} heightValue {@link module:Template/Field.RadioField#heightValue}
 * @property {Function} getSVGFieldObject {@link module:Template/Field.RadioField#getSVGFieldObject}
 * @property {Function} showFieldAttribute {@link module:Template/Field.RadioField#showFieldAttribute}
 * @property {Function} showFieldsAttribute {@link module:Template/Field.RadioField#showFieldsAttribute}
 *
 * @augments BaseField {@link module:Template/Field.BaseField#BaseField}
 * @FileName RadioField.js
 * @since 2021.05.31
 */
class RadioField extends _BaseField__WEBPACK_IMPORTED_MODULE_0__.BaseField {
    /**
     * @constructor
     * @param id 필드의 ID
     * @param pageNo 필드가 속한 페이지 번호
     * @param x 필드의 svg상의 x좌표
     * @param y 필드의 svg상의 y좌표
     *
     */
    constructor(id, pageNo, x, y) {
        super(id, pageNo, x, y, RadioField.widthValue(), RadioField.heightValue());
        this.m_type = RadioField.fieldName();

        this.m_kind = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.translateForKey("Template.radioFieldTool");

        
        if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(id)) {
            return;
        }

        /**
         * @type {String}
         * @name module:Template/Field.RadioField#m_groupName
         * @description 라디오 그룹 이름
         * @default id가 들어간다.
         * @example
         * // getter groupName()
         * // setter groupName(val)
         */
        this.m_groupName = id;

        /**
         * @type {String}
         * @name module:Template/Field.RadioField#m_defaultValue
         * @description 라디오를 선택했을 때의 값
         * @default id가 들어간다.
         * @example
         * // getter defaultValue()
         * // setter defaultValue(val)
         */
        this.m_defaultValue = id;
        this.m_fieldId = this.m_id.replace(this.m_type, this.m_kind + "-");
        this.m_radioType = _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.RADIO_TYPE_1;
    }

    /**
     * @function fieldName
     * @name module:Template/Field.RadioField#fieldName
     * @return {String}
     * @description (Static) 필드 타입의 이름
     * @static
     *
     */
    static fieldName() {
        return "RadioField";
    }

    ancestors() {
        return [ "RF", "BF"];
    }
    /**
     * @function widthValue
     * @name module:Template/Field.RadioField#widthValue
     * @description (Static) 필드의 초기 가로 길이
     * @return {Number}
     * @static
     *
     */
    static widthValue() {
        return 60;
    }

    /**
     * @function heightValue
     * @name module:Template/Field.RadioField#heightValue
     * @description (Static) 필드의 초기 세로 길이
     * @return {Number}
     * @static
     *
     */
    static heightValue() {
        return 60;
    }

    get groupName() {
        return this.m_groupName;
    }

    set groupName(__groupName) {
        this.m_groupName = __groupName;
    }

    get defaultValue() {
        return this.m_defaultValue;
    }
    set defaultValue(__defaultValue) {
        this.m_defaultValue = __defaultValue;
    }

    get radioType() {
        return this.m_radioType;
    }
    set radioType(__radioType) {
        this.m_radioType = __radioType;
    }

    /**
     * @function getSVGFieldObject
     * @name module:Template/Field.RadioField#getSVGFieldObject
     * @memberOf module:Template.CheckboxField
     * @description  필드의 정보를 가지고 SVG Element를 생성한다.
     *
     * @param {Object} canvas Snap SVG의 Canvas Object
     * @param {Object} mainGroup   SVG의 메인 Node
     * @param {Number} scale  현재 PDF의 Scale
     * @param {ELEMENT} ownerNode   해당 프로젝트의 최상단 Element를 감싸고 있는 Element
     * @param {Callback} removeDragOverGroupFunc     드래그 되어 선택되어진 Field Group을 제거하는 callback function
     * @param {Callback} changeValueEventFunc     속성값이 변할때 호출되는 callback function
     * @param {Callback} changeFreeTransformFunc     FreeTransform을 다시 생성하기 위한 callback function
     * @return {Object} SVG Node Element
     * @Date : 2021. 5. 31
     */
    getSVGFieldObject(canvas, mainGroup, scale, ownerNode, removeDragOverGroupFunc, changeValueEventFunc, changeFreeTransformFunc) {
        let group = mainGroup.group();
        group.attr({
            id: this.id + "Group",
            cursor: "move"
        });
        let rect = canvas.rect(this.x, this.y, this.width * scale, this.height * scale);
        rect.attr({
            id: this.id,
            "fill-opacity": "0.6",
            "fill": "#ffac7f"
        });
        group.append(rect);
        const radioPath = this.m_radioType === _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.RADIO_TYPE_1 ? _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.RAIOD_TYPE_1_PATH : _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.RAIOD_TYPE_2_PATH 
        const radioString = '<svg xmlns="http://www.w3.org/2000/svg" x="' + this.x + 'px" y="' + this.y + 'px" width="' + this.width * scale +
            'px" height="' + this.height * scale + 'px"  viewBox="0 0 48 48"> ' + radioPath + ' </svg >'
        const p = Snap.parse(radioString);
        group.append(p);


        group.hover(
            function () { // f_in
            },
            function () { // f_out
            }
        );

        let _radioField = this;
        let mousePos = { x: 0, y: 0 };
        group.mousedown(function (evt) {
            mousePos.x = evt.pageX;
            mousePos.y = evt.pageY;
            const items = mainGroup.selectAll('g');
            items.forEach(function (element) {
                if (element !== group) {
                    if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(element.freeTransform)) {
                        element.freeTransform.hideResizeHandler();
                    }
                }
            });

            if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(group.freeTransform)) {
                group.freeTransform.showResizeHandler();
            } else {
                changeFreeTransformFunc(group, rect.attr("width"), rect.attr("height"));
            }
        });

        group.mouseup(function (evt) {
            if (group.parent().attr("id") === _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME) {
                if (Math.abs(mousePos.x - evt.pageX) > _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MINIMUM_DRAG_SIZE
                    || Math.abs(mousePos.y - evt.pageY) > _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MINIMUM_DRAG_SIZE) {
                    return;
                }
                removeDragOverGroupFunc.call();
                const items = mainGroup.selectAll('g');
                items.forEach(function (element) {
                    if (element !== group) {
                        if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(element.freeTransform)) {
                            element.freeTransform.hideResizeHandler();
                        }
                    }
                });
                if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(group.freeTransform)) {
                    group.freeTransform.showResizeHandler();
                } else {
                    changeFreeTransformFunc(group, rect.attr("width"), rect.attr("height"));
                }
                _radioField.constructor.showFieldsAttribute(ownerNode, [_radioField], undefined, mainGroup, _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsList(), _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getDVFieldOptsList(), changeValueEventFunc);
            } else {
                _radioField.constructor.showFieldsAttribute(ownerNode, [_radioField], undefined, mainGroup, _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsList(), _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getDVFieldOptsList(), changeValueEventFunc);
            }
        });
        return group;

    }

    changeTextElement(fieldGroup, scale) {
        fieldGroup.select("svg").remove();
        
        const radioPath = this.m_radioType === _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.RADIO_TYPE_1 ? _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.RAIOD_TYPE_1_PATH : _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.RAIOD_TYPE_2_PATH 
        const radioString = '<svg xmlns="http://www.w3.org/2000/svg" x="' + this.x + 'px" y="' + this.y + 'px" width="' + this.width * scale +
            'px" height="' + this.height * scale + 'px"  viewBox="0 0 48 48"> ' + radioPath + ' </svg >'
        const p = Snap.parse(radioString);
        fieldGroup.append(p);
    }

    /**
     *
     * @function showFieldAttribute
     * @static
     * @name module:Template/Field.RadioField#showFieldAttribute
     * @description  (Static) 필드의 속성 팝업창을 설정한다.
     *
     * @param {ELEMENT} node  속성 팝업 Node
     * @param {String} idValue     필드의 id값
     * @param {String} requiredValue     필수여부 값
     * @param {String} ownerIdValue     서명자 아이디
     * @param {String} groupNameValue     라디오 그룹 이름.
     * @param {String} dvValue     기본값
     * @param {Array} userList   서명자 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldAttribute(node,
        idValue, fieldIdValue, requiredValue, ownerIdValue, groupNameValue, dvValue, raiodTypeValue,
        userList,
        changeEventFunc) {

        var panel = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributePanelNode();

        var requireRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeToggleButtonNode(idValue, "required", "Template.isRequired", requiredValue, changeEventFunc);
        panel.appendChild(requireRow);

        let useDefaulOptionNode = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsListCount() !== 1;
        var ownerSelectRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(idValue, "ownerId", userList, "", useDefaulOptionNode);
        panel.appendChild(ownerSelectRow);

        let ownerSelect = ownerSelectRow.querySelector("select");
        $(ownerSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(ownerSelect).val(ownerIdValue).trigger("change");
        $(ownerSelect).on("change", changeEventFunc);

        var radioTypeRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(idValue, "radioType", _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.radioTypeList, "", useDefaulOptionNode);
        panel.appendChild(radioTypeRow);

        let radioTypeSelect = radioTypeRow.querySelector("select");
        $(radioTypeSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(radioTypeSelect).val(raiodTypeValue).trigger("change");
        $(radioTypeSelect).on("change", changeEventFunc);

        var groupRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeInputNode(idValue, "groupName", "Template.radioGroupNameText", groupNameValue, "", "", changeEventFunc);
        panel.appendChild(groupRow);

        var dvValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeInputNode(idValue, "defaultValue", "Template.radioValueText", dvValue, "", "", changeEventFunc);
        panel.appendChild(dvValueRow);

        var fieldIdValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeInputNode(idValue, "fieldId", "Template.fieldIdText", fieldIdValue, "", "", changeEventFunc);
        panel.appendChild(fieldIdValueRow);

        panel.setAttribute("Field-id-list", idValue);

        node.className = "Editor-Attribute";
        node.classList.add("Base-Field");
        node.appendChild(panel);
    }


    /**
     * @function showFieldsAttribute
     * @static
     * @name module:Template/Field.RadioField#showFieldsAttribute
     * @description (Static) 필드의 속성 팝업창을 설정한다.
     *
     * @param {ELEMENT} ownerNode  속성 팝업 Node
     * @param {Array} fieldList     필드들의 리스트
     * @param {ELEMENT} attrNode   속성 팝업의 Node
     * @param {String} mainGroup    SVG의 메인 Element
     * @param {Array} userList   서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldsAttribute(ownerNode, fieldList, attrNode, mainGroup, userList, dvOptionList, changeEventFunc) {
        let node = attrNode;
        if (attrNode === null || _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(attrNode)) {
            const bbox = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.mergeFieldsBBox(fieldList);
            node = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttrbutePopup(ownerNode, bbox);
            _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.repositionFieldDeleteBtn(ownerNode, bbox.x, bbox.y, bbox.width);
        }
        _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.removeAllChildNode(node);


        var idValueArr = [];
        fieldList.forEach((field) => {
            idValueArr.push(field.id);
        });
        var idValue = idValueArr.join();

        var ownerIdValue = fieldList[0].ownerId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].ownerId !== ownerIdValue) {
                ownerIdValue = '';
                break;
            }
        }

        var fieldIdValue = fieldList[0].fieldId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fieldId !== fieldIdValue) {
                fieldIdValue = '';
                break;
            }
        }

        var requiredValue = fieldList[0].required;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].required !== requiredValue) {
                requiredValue = '';
                break;
            }
        }

        var groupNameValue = fieldList[0].groupName;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].groupName !== groupNameValue) {
                groupNameValue = '';
                break;
            }
        }

        var dvValue = fieldList[0].defaultValue;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].defaultValue !== dvValue) {
                dvValue = '';
                break;
            }
        }

        var raiodTypeValue = fieldList[0].m_radioType;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].m_radioType !== raiodTypeValue) {
                raiodTypeValue = '';
                break;
            }
        }

        RadioField.showFieldAttribute(node,
            idValue, fieldIdValue, requiredValue, ownerIdValue, groupNameValue, dvValue, raiodTypeValue,
            userList,
            changeEventFunc);
    }
}



/***/ }),

/***/ "./js/pdf_form/src/Fields/SignField.js":
/*!*********************************************!*\
  !*** ./js/pdf_form/src/Fields/SignField.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SignField: () => (/* binding */ SignField)
/* harmony export */ });
/* harmony import */ var _BaseField__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BaseField */ "./js/pdf_form/src/Fields/BaseField.js");
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");
/* harmony import */ var _Constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../Constants.js */ "./js/pdf_form/src/Constants.js");

/**
 * @module Template/Field
*/





/**
 * @description 서명 필드 Class
 *
 * @property {Number} m_signPenThickness {@link module:Template/Field.SignField#m_signPenThickness}
 * @property {String} m_signPenColor {@link module:Template/Field.SignField#m_signPenColor}
 *
 * @property {Function} fieldName {@link module:Template/Field.SignField#fieldName}
 * @property {Function} widthValue {@link module:Template/Field.SignField#widthValue}
 * @property {Function} heightValue {@link module:Template/Field.SignField#heightValue}
 * @property {Function} getSVGFieldObject {@link module:Template/Field.SignField#getSVGFieldObject}
 * @property {Function} makeSVGText {@link module:Template/Field.SignField#makeSVGText}
 * @property {Function} showFieldAttribute {@link module:Template/Field.SignField#showFieldAttribute}
 * @property {Function} showFieldsAttribute {@link module:Template/Field.SignField#showFieldsAttribute}
 *
 * @augments BaseField {@link module:Template.BaseField#BaseField}
 * @FileName SignField.js
 * @since 2021.05.31
 */
class SignField extends _BaseField__WEBPACK_IMPORTED_MODULE_0__.BaseField {
  /**
   * @constructor
   * @param id 필드의 ID
   * @param pageNo 필드가 속한 페이지 번호
   * @param x 필드의 svg상의 x좌표
   * @param y 필드의 svg상의 y좌표
   *
   */
  constructor(id, pageNo, x, y, useDrawSign, useImageSign, useRegSign) {
    super(id, pageNo, x, y, SignField.widthValue(), SignField.heightValue());
    this.m_type = SignField.fieldName();

    this.m_kind = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.translateForKey("Template.signFieldTool");

    /**
     * @type {Number}
     * @name module:Template.RadioField#m_signPenThickness
     * @description 서명펜의 두께
     * @default 1.0
     * @example
     * // getter signPenThickness()
     * // setter signPenThickness(val)
     */
    this.m_signPenThickness = 1;

    /**
     * @type {String}
     * @name module:Template.RadioField#m_signPenColor
     * @description 서명펜의 색상
     * @default #000000
     * @example
     * // getter signPenColor()
     * // setter signPenColor(val)
     */
    this.m_signPenColor = "#000000";
    if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(id)) {
      return;
    }
    this.m_fieldId = this.m_id.replace(this.m_type, this.m_kind + "-");

    SignField.useDrawSignDef = useDrawSign;
    SignField.useImageSignDef = useImageSign;
    SignField.useRegSignDef = useRegSign;


    this.m_useDrawSign = useDrawSign;
    this.m_useImageSign = useImageSign;
    this.m_useRegSign = useRegSign;
    //regSignApi
    this.m_regSignApiUrl = "";
  }

  /**
   * @function fieldName
   * @name module:Template/Field.SignField#fieldName
   * @return {String}
   * @description (Static) 필드 타입의 이름
   * @static
   *
   */
  static fieldName() {
    return "SignField";
  }

  ancestors() {
    return ["SF", "BF"];
  }

  /**
   * @function widthValue
   * @name module:Template/Field.SignField#widthValue
   * @description (Static) 필드의 초기 가로 길이
   * @return {Number}
   * @static
   *
   */
  static widthValue() {
    return 150;
  }

  /**
   * @function heightValue
   * @name module:Template/Field.SignField#heightValue
   * @description (Static) 필드의 초기 세로 길이
   * @return {Number}
   * @static
   *
   */
  static heightValue() {
    return 60;
  }

  get signPenThickness() {
    return this.m_signPenThickness;
  }
  set signPenThickness(__signPenThickness) {
    this.m_signPenThickness = __signPenThickness;
  }

  get signPenColor() {
    return this.m_signPenColor;
  }
  set signPenColor(__signPenColor) {
    this.m_signPenColor = __signPenColor;
  }


  /**
   * @function showFieldAttribute
   * @static
   * @name module:Template/Field.SignField#showFieldAttribute
   * @description (Static)  필드의 속성 팝업창을 설정한다.
   *
   * @param {ELEMENT} node  속성 팝업 Node
   * @param {String} idValue     필드의 id값
   * @param {String} requiredValue     필수여부 값
   * @param {String} ownerIdValue     서명자 아이디
   * @param {String} signPenThicknessValue     사인 팬 두깨
   * @param {Array} userList   서명자 리스트
   * @param {String} useDrawSign     필수여부 값
   * @param {String} useImageSign     필수여부 값
   * @param {String} useRegSign     필수여부 값
   * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
   * @Date : 2021. 5. 31
   */
  static showFieldAttribute(
    node,
    idValue,
    fieldIdValue,
    requiredValue,
    ownerIdValue,
    signPenThicknessValue,
    userList,
    useDrawSignValue,
    useImageSignValue,
    useRegSignValue,
    regSignApiUrlValue,
    changeEventFunc,
    signTabShowOpt
  ) {
    var panel = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributePanelNode();

    var requireRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeToggleButtonNode(
      idValue,
      "required",
      "Template.isRequired",
      requiredValue,
      changeEventFunc
    );
    panel.appendChild(requireRow);

    let useDefaulOptionNode = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsListCount() !== 1;
    var ownerSelectRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(
      idValue,
      "ownerId",
      userList,
      "",
      useDefaulOptionNode
    );
    panel.appendChild(ownerSelectRow);

    let ownerSelect = ownerSelectRow.querySelector("select");
    $(ownerSelect).select2({
      minimumResultsForSearch: Infinity,
      width: "100%",
    });
    $(ownerSelect).val(ownerIdValue).trigger("change");
    $(ownerSelect).on("change", changeEventFunc);

    var penWidthSelectRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(
      idValue,
      "signPenThickness",
      _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getSignPenWidthComboBox(),
      "Template.signPenThicknessText",
      false
    );
    panel.appendChild(penWidthSelectRow);

    let penWidthSelect = penWidthSelectRow.querySelector("select");
    $(penWidthSelect).select2({
      minimumResultsForSearch: Infinity,
      width: "100%",
    });
    $(penWidthSelect).val(signPenThicknessValue).trigger("change");
    $(penWidthSelect).on("change", changeEventFunc);

    var fieldIdValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeInputNode(
      idValue,
      "fieldId",
      "Template.fieldIdText",
      fieldIdValue,
      "",
      "",
      changeEventFunc
    );
    panel.appendChild(fieldIdValueRow);

    /*
        1214 lbw 시작
        */

    
    this.useDrawSignDef = signTabShowOpt.useDrawSign;
    this.useImageSignDef = signTabShowOpt.useImageSign;
    this.useRegSignDef = signTabShowOpt.useRegSign;

    if (this.useDrawSignDef == undefined){
      this.useDrawSignDef = "true";
    }
    if (this.useImageSignDef == undefined) {
      this.useImageSignDef = "true";
    }
    if (this.useRegSignDef == undefined) {
      this.useRegSignDef = "true";
    }
    
    
    //1.펜
    if ("true" == this.useDrawSignDef || useDrawSignValue == "true") {
      var useDrawSignRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeToggleButtonNode(
        idValue,
        "useDrawSign",
        "Template.drawSignText",
        useDrawSignValue,
        changeEventFunc
      );
      panel.appendChild(useDrawSignRow);
    }

    //2. 이미지
    if ("true" == this.useImageSignDef || useImageSignValue == "true") {
      var useImageSignRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeToggleButtonNode(
        idValue,
        "useImageSign",
        "Template.imageSignText",
        useImageSignValue,
        changeEventFunc
      );
      panel.appendChild(useImageSignRow);
    }

    //3. 등록된 이미지
    if ("true" == this.useRegSignDef || useRegSignValue == "true") {
      var useRegSignRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeToggleButtonNode(
        idValue,
        "useRegSign",
        "Template.regSignText",
        useRegSignValue,
        changeEventFunc
      );
      panel.appendChild(useRegSignRow);
    }
    

    /* 1215 제외
    var regSignApiUrlRow = Utils.createAttributeInputNode(
      idValue,
      "regSignApiUrl",
      "Template.regSignApiUrlText",
      regSignApiUrlValue,
      "등록된 이미지 서명탭에 이미지를 불러올 수 있도록 서버의 API URL을 입력합니다.",
      "",
      changeEventFunc
    );
    panel.appendChild(regSignApiUrlRow);
    */
    /*
        1214 lbw 끝
        */

    panel.setAttribute("Field-id-list", idValue);

    node.className = "Editor-Attribute";
    node.classList.add("Sign-Field");
    node.appendChild(panel);
  }

  /**
   * @function showFieldsAttribute
   * @static
   * @name module:Template/Field.SignField#showFieldsAttribute
   * @description (Static) 필드의 속성 팝업창을 설정한다.
   *
   * @param {ELEMENT} ownerNode  속성 팝업 Node
   * @param {Array} fieldList     필드들의 리스트
   * @param {ELEMENT} attrNode    속성 팝업의 Node
   * @param {String} mainGroup    SVG의 메인 Element
   * @param {Array} userList   서명자 리스트
   * @param {Array} dvOptionList   기본값 선택 리스트
   * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
   * @Date : 2021. 5. 31
   */
  static showFieldsAttribute(
    ownerNode,
    fieldList,
    attrNode,
    mainGroup,
    userList,
    dvOptionList,
    changeEventFunc,
    signTabShowOpt
  ) {
    let node = attrNode;
    if (attrNode === null || _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(attrNode)) {
      const bbox = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.mergeFieldsBBox(fieldList);
      node = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttrbutePopup(ownerNode, bbox);
      _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.repositionFieldDeleteBtn(ownerNode, bbox.x, bbox.y, bbox.width);
    }
    _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.removeAllChildNode(node);

    var idValueArr = [];
    fieldList.forEach((field) => {
      idValueArr.push(field.id);
    });
    var idValue = idValueArr.join();

    var ownerIdValue = fieldList[0].ownerId;
    for (var idx = 0; idx < fieldList.length; ++idx) {
      if (fieldList[idx].ownerId !== ownerIdValue) {
        ownerIdValue = "";
        break;
      }
    }

    var fieldIdValue = fieldList[0].fieldId;
    for (var idx = 0; idx < fieldList.length; ++idx) {
      if (fieldList[idx].fieldId !== fieldIdValue) {
        fieldIdValue = "";
        break;
      }
    }

    var requiredValue = fieldList[0].required;
    for (var idx = 0; idx < fieldList.length; ++idx) {
      if (fieldList[idx].required !== requiredValue) {
        requiredValue = "";
        break;
      }
    }

    var signPenThicknessValue = fieldList[0].signPenThickness;
    fieldList.forEach((field) => {
      if (field.signPenThickness !== signPenThicknessValue) {
        signPenThicknessValue = "";
        return;
      }
    });

    let useDrawSignValue = fieldList[0].m_useDrawSign;
    for (let idx = 0; idx < fieldList.length; ++idx) {
      if (fieldList[idx].m_useDrawSign !== useDrawSignValue) {
        useDrawSignValue = "";
        break;
      }
    }

    let useImageSignValue = fieldList[0].m_useImageSign;
    for (let idx = 0; idx < fieldList.length; ++idx) {
      if (fieldList[idx].m_useImageSign !== useImageSignValue) {
        useImageSignValue = "";
        break;
      }
    }

    let useRegSignValue = fieldList[0].m_useRegSign;
    for (let idx = 0; idx < fieldList.length; ++idx) {
      if (fieldList[idx].m_useRegSign !== useRegSignValue) {
        useRegSignValue = "";
        break;
      }
    }

    var regSignApiUrlValue = fieldList[0].m_regSignApiUrl;
    for (var idx = 0; idx < fieldList.length; ++idx) {
      if (fieldList[idx].m_regSignApiUrl !== regSignApiUrlValue) {
        regSignApiUrlValue = "";
        break;
      }
    }

    SignField.showFieldAttribute(
      node,
      idValue,
      fieldIdValue,
      requiredValue,
      ownerIdValue,
      signPenThicknessValue,
      userList,
      useDrawSignValue,
      useImageSignValue,
      useRegSignValue,
      regSignApiUrlValue,
      changeEventFunc,
      signTabShowOpt
    );
  }

  /**
   * @function getSVGFieldObject
   * @name module:Template.ImageField#makeSVGText
   * @memberOf module:Template.ImageField
   * @description 필드의 종류를 표현하는 SVG Text element
   *
   * @param {Number} scale 현재 PDF의 Scale
   * @return {Object} SVG Node Element
   * @Date : 2021. 5. 31
   */
  makeSVGText(scale) {
    let value = this.m_fieldId;
    var textFontColor = "fill='" + this.fontColor + "' ";

    let textPos = ' x="50%"  dy="0.35em" text-anchor="middle" ';
    if (this.textAlign === "left") {
      textPos = ' x="3%"  dy="0.35em" text-anchor="start" ';
    } else if (this.textAlign === "right") {
      textPos = ' x="97%" dy="0.35em" text-anchor="end" ';
    }

    let textVerticalPos = 'y="50%"';

    let fontInfo = ' font-size="' + this.fontSize + 'px" ';
    let textObj =
      "<text" +
      textPos +
      textVerticalPos +
      fontInfo +
      textFontColor +
      ">" +
      value +
      "</text>";
    const fobjectSVG =
      '<svg x="' +
      this.x +
      'px" y="' +
      this.y +
      'px" width="' +
      this.width * scale +
      'px" height="' +
      this.height * scale +
      'px"><g  >' +
      textObj +
      "</g></svg>";

    return fobjectSVG;
  }

  /**
   * @function getSVGFieldObject
   * @name module:Template.RadioField#getSVGFieldObject
   * @memberOf module:Template/Field.SignField
   * @description  필드의 정보를 가지고 SVG Element를 생성한다.
   *
   * @param {Object} canvas Snap SVG의 Canvas Object
   * @param {Object} mainGroup   SVG의 메인 Node
   * @param {Number} scale  현재 PDF의 Scale
   * @param {ELEMENT} ownerNode    해당 프로젝트의 최상단 Element를 감싸고 있는 Element
   * @param {Callback} removeDragOverGroupFunc     드래그 되어 선택되어진 Field Group을 제거하는 callback function
   * @param {Callback} changeValueEventFunc     속성값이 변할때 호출되는 callback function
   * @param {Callback} changeFreeTransformFunc    FreeTransform을 다시 생성하기 위한 callback function
   * @return SVG Node Element
   * @Date : 2021. 5. 31
   */
  getSVGFieldObject(
    canvas,
    mainGroup,
    scale,
    ownerNode,
    removeDragOverGroupFunc,
    changeValueEventFunc,
    changeFreeTransformFunc
  ) {
    let group = mainGroup.group();
    group.attr({
      id: this.id + "Group",
      cursor: "move",
    });
    let rect = canvas.rect(
      this.x,
      this.y,
      this.width * scale,
      this.height * scale
    );
    rect.attr({
      id: this.id,
      "fill-opacity": "0.6",
      fill: "#ffac7f",
    });
    group.append(rect);
    const p = Snap.parse(this.makeSVGText(scale));
    group.append(p);

    group.hover(
      function () {
        // f_in
      },
      function () {
        // f_out
      }
    );

    let _signField = this;
    let mousePos = { x: 0, y: 0 };
    group.mousedown(function (evt) {
      mousePos.x = evt.pageX;
      mousePos.y = evt.pageY;
      const items = mainGroup.selectAll("g");
      items.forEach(function (element) {
        if (element !== group) {
          if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(element.freeTransform)) {
            element.freeTransform.hideResizeHandler();
          }
        }
      });
      if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(group.freeTransform)) {
        group.freeTransform.showResizeHandler();
      } else {
        changeFreeTransformFunc(group, rect.attr("width"), rect.attr("height"));
      }
    });

    group.mouseup(function (evt) {
      if (group.parent().attr("id") === _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME) {
        if (
          Math.abs(mousePos.x - evt.pageX) > _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MINIMUM_DRAG_SIZE ||
          Math.abs(mousePos.y - evt.pageY) > _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MINIMUM_DRAG_SIZE
        ) {
          return;
        }
        removeDragOverGroupFunc.call();
        const items = mainGroup.selectAll("g");
        items.forEach(function (element) {
          if (element !== group) {
            if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(element.freeTransform)) {
              element.freeTransform.hideResizeHandler();
            }
          }
        });
        if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(group.freeTransform)) {
          group.freeTransform.showResizeHandler();
        } else {
          changeFreeTransformFunc(
            group,
            rect.attr("width"),
            rect.attr("height")
          );
        }
        _signField.constructor.showFieldsAttribute(
          ownerNode,
          [_signField],
          undefined,
          mainGroup,
          _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsList(),
          _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getDVFieldOptsList(),
          changeValueEventFunc,
          _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getSignTabShowOpt(),
        );
      } else {
        _signField.constructor.showFieldsAttribute(
          ownerNode,
          [_signField],
          undefined,
          mainGroup,
          _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsList(),
          _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getDVFieldOptsList(),
          changeValueEventFunc,
          _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getSignTabShowOpt(),
        );
      }
    });
    return group;
  }
}


/***/ }),

/***/ "./js/pdf_form/src/Fields/TextBaseField.js":
/*!*************************************************!*\
  !*** ./js/pdf_form/src/Fields/TextBaseField.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TextBaseField: () => (/* binding */ TextBaseField)
/* harmony export */ });
/* harmony import */ var _BaseField__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BaseField */ "./js/pdf_form/src/Fields/BaseField.js");
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");
/* harmony import */ var _Constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../Constants.js */ "./js/pdf_form/src/Constants.js");
/* harmony import */ var _utils_color_picker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../utils/color-picker */ "./js/pdf_form/src/utils/color-picker.js");
/* harmony import */ var _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_utils_color_picker__WEBPACK_IMPORTED_MODULE_3__);

/**
 * @module Template/Field
*/






/**
 * @텍스트 필드의 기본이 되는 Class
 *
 * @property {Function} fieldName {@link module:Template/Field.TextBaseField#fieldName}
 * @property {Function} widthValue {@link module:Template/Field.TextBaseField#widthValue}
 * @property {Function} heightValue {@link module:Template/Field.TextBaseField#heightValue}
 * @property {Function} needTextSvgRefresh {@link module:Template/Field.TextBaseField#needTextSvgRefresh}
 * @property {Function} makeSVGText {@link module:Template/Field.TextBaseField#makeSVGText}
 * @property {Function} getSVGFieldObject {@link module:Template/Field.TextBaseField#getSVGFieldObject}
 * @property {Function} changeTextElement {@link module:Template/Field.TextBaseField#changeTextElement}
 * @property {Function} showFieldAttribute {@link module:Template/Field.TextBaseField#showFieldAttribute}
 * @property {Function} showFieldsAttribute {@link module:Template/Field.TextBaseField#showFieldsAttribute}
 *
 * @augments BaseField {@link module:Template/Field.BaseField#BaseField}
 * @FileName TextBaseField.js
 * @since 2021.05.31
 */
class TextBaseField extends _BaseField__WEBPACK_IMPORTED_MODULE_0__.BaseField {

    /**
     * @constructor
     * @param id 필드의 ID
     * @param pageNo 필드가 속한 페이지 번호
     * @param x 필드의 svg상의 x좌표
     * @param y 필드의 svg상의 y좌표
     * @param width 필드의 가로길이
     * @param height 필드의 세로길이
     *
     */
    constructor(id, pageNo, x, y, width, height) {
        super(id, pageNo, x, y, width, height);
        this.m_type = TextBaseField.fieldName();

        /**
         * @type {String}
         * @name module:Template/Field.TextBaseField#m_placeHolder
         * @description placeHolder
         * @example
         * // getter placeHolder()
         * // setter placeHolder(val)
         */
        this.m_placeHolder = '';

        /**
         * @type {String}
         * @name module:Template/Field.TextBaseField#m_defaultValue
         * @description 텍스트 기본값  ID
         * @example
         * // getter defaultValue()
         * // setter defaultValue(val)
         */
        this.m_defaultValue = "";

        /**
         * @type {String}
         * @name module:Template/Field.TextBaseField#m_defaultValueText
         * @description  텍스트 기본값을 표현하는 텍스트
         * @example
         * // getter defaultValueText()
         * // setter defaultValueText(val)
         */
        this.m_defaultValueText = "";

        /**
         * @type {String}
         * @name module:Template/Field.TextBaseField#m_textAlign
         * @description 텍스트의 가로 정렬값
         * @example
         * // getter textAlign()
         * // setter textAlign(val)
         */
        this.m_textAlign = "left";

        /**
         * @type {String}
         * @name module:Template/Field.TextBaseField#m_textVeticalAlign
         * @description 텍스트의 세로 정렬값
         * @example
         * // getter textVeticalAlign()
         * // setter textVeticalAlign(val)
         */
        this.m_textVeticalAlign = "middle";

        /**
         * @type {String}
         * @name module:Template/Field.TextBaseField#m_bold
         * @description 텍스트의 볼드 여부
         * @example
         * // getter bold()
         * // setter bold(val)
         */
        this.m_bold = "false";
        this.m_kind = "";
    }

    /**
     * @function widthValue
     * @name module:Template/Field.TextBaseField#widthValue
     * @description (Static) 필드의 초기 가로 길이
     * @return {Number}
     * @static
     *
     */
    static widthValue() {
        return 150;
    }

    /**
     * @function heightValue
     * @name module:Template/Field.TextBaseField#heightValue
     * @description (Static) 필드의 초기 세로 길이
     * @return {Number}
     * @static
     *
     */
    static heightValue() {
        return 40;
    }

    /**
     * @function fieldName
     * @name module:Template/Field.TextBaseField#fieldName
     * @return {String}
     * @description (Static)  필드 타입의 이름
     * @static
     *
     */
    static fieldName() {
        return "TextBaseField";
    }

    ancestors() {
        return [ "TBF", "BF"];
    }

    get placeHolder() {
        return this.m_placeHolder;
    }

    set placeHolder(__placeHolder) {
        this.m_placeHolder = __placeHolder;
    }

    get defaultValue() {
        return this.m_defaultValue;
    }
    set defaultValue(__defaultValue) {
        this.m_defaultValue = __defaultValue;
    }

    get defaultValueText() {
        return this.m_defaultValueText;
    }
    set defaultValueText(__defaultValueText) {
        this.m_defaultValueText = __defaultValueText;
    }

    get textAlign() {
        return this.m_textAlign;
    }
    set textAlign(__textAlign) {
        this.m_textAlign = __textAlign;
    }

    get textVeticalAlign() {
        return this.m_textVeticalAlign;
    }
    set textVeticalAlign(__textVeticalAlign) {
        this.m_textVeticalAlign = __textVeticalAlign;
    }

    get isBold() {
        return this.m_bold;
    }
    set isBold(__bold) {
        this.m_bold = __bold;
    }

    /**
     * @function needTextSvgRefresh
     * @static
     * @name module:Template/Field.TextBaseField#needTextSvgRefresh
     * @description  (Static) 해당하는 필드의 속성이 SVG의 텍스트 Node를 변경해야되는지 체크한다.
     *
     * @param { String} fieldPropetyName 필드의 속성값
     * @return {Boolean} 텍스트를 새로 그려야되는 필드의 경우 TRUE를 리턴한다.
     * @Date : 2021. 5. 31
     */
    static needTextSvgRefresh(fieldPropetyName) {
        if (fieldPropetyName === "defaultValue" ||
            fieldPropetyName === "value" ||
            fieldPropetyName === "fieldId" ||
            fieldPropetyName === "placeHolder" ||
            fieldPropetyName === "textAlign" ||
            fieldPropetyName === "bold" ||
            fieldPropetyName === "fontSize" ||
            fieldPropetyName === "fontName" ||
            fieldPropetyName === "radioType" ||
            fieldPropetyName === "fontColor") {
            return true;
        }
        return false;
    }

    /**
     * @function makeSVGText
     * @name module:Template/Field.TextBaseField#makeSVGText
     * @memberOf module:Template/Field.TextBaseField
     * @description 필드의 종류를 표현하는 SVG Text element
     *
     * @param {Number} scale 현재 PDF의 Scale
     * @return {Object} SVG Node Element
     * @Date : 2021. 5. 31
     */
    makeSVGText(scale) {
        let value = this.defaultValueText;
        if (value === '') {
            value = this.m_fieldId;
        }
        var textFontColor = "fill='" + this.fontColor + "' ";
 
        let textPos = ' x="50%"  dy="0.35em" text-anchor="middle" '
        if (this.textAlign === "left") {
            textPos = ' x="3%"  dy="0.35em" text-anchor="start" ';
        } else if (this.textAlign === "right") {
            textPos = ' x="97%" dy="0.35em" text-anchor="end" ';
        }

        let textVerticalPos = 'y="50%"';
        if (this.textVeticalAlign === "top") {
            textVerticalPos = 'y="25%"';
        } else if (this.textVeticalAlign === "bottom") {
            textVerticalPos = 'y="70%"';
        }

        let fontWeigth = "";
        if (this.isBold === "true") {
            fontWeigth = " font-weight='bold' ";
        }

        let fontFmaily = " font-family='" + this.fontName + "' ";
        
        let fontInfo = ' font-size="' + this.fontSize  * scale + 'px" ';
        let textObj = '<text' + textPos + textVerticalPos + fontFmaily + fontInfo + textFontColor + fontWeigth +  '>' + value + '</text>';
        const fobjectSVG = '<svg x="' + this.x + 'px" y="' + this.y + 'px" width="' + this.width * scale +
            'px" height="' + this.height * scale + 'px"><g  >' + textObj + '</g></svg>';

        return fobjectSVG;
    }

    /**
     * @function getSVGFieldObject
     * @name module:Template/Field.TextBaseField#getSVGFieldObject
     * @memberOf module:Template/Field.TextBaseField
     * @description  필드의 정보를 가지고 SVG Element를 생성한다.
     *
     * @param {Object} canvas Snap SVG의 Canvas Object
     * @param {Object} mainGroup   SVG의 메인 Node
     * @param {Number} scale  현재 PDF의 Scale
     * @param {ELEMENT} ownerNode    해당 프로젝트의 최상단 Element를 감싸고 있는 Element
     * @param {Callback} removeDragOverGroupFunc    드래그 되어 선택되어진 Field Group을 제거하는 callback function
     * @param {Callback} changeValueEventFunc     속성값이 변할때 호출되는 callback function
     * @param {Callback} changeFreeTransformFunc     FreeTransform을 다시 생성하기 위한 callback function
     * @return SVG Node Element
     * @Date : 2021. 5. 31
     */
    getSVGFieldObject(canvas, mainGroup, scale, ownerNode, removeDragOverGroupFunc, changeValueEventFunc, changeFreeTransformFunc) {
        let group = mainGroup.group();
        group.attr({
            id: this.id + "Group",
            cursor: "move"
        });

        let rect = canvas.rect(this.x, this.y, this.width * scale, this.height * scale);
        rect.attr({
            id: this.id,
            "fill-opacity": "0.5",
            "fill": "#ffac7f"
        });
        group.append(rect);
        const p = Snap.parse(this.makeSVGText(scale));
        group.append(p);

        group.hover(
            function () { // f_in
            },
            function () { // f_out
            }
        );
    
        let _textBaseField = this;
        let mousePos = { x: 0, y: 0 };
        group.mousedown(function (evt) {
            mousePos.x = evt.pageX;
            mousePos.y = evt.pageY;
            const items = mainGroup.selectAll('g');
            items.forEach(function (element) {
                if (element !== group) {
                    if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(element.freeTransform)) {
                        element.freeTransform.hideResizeHandler();
                    }
                }
            });

            if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(group.freeTransform)) {
                group.freeTransform.showResizeHandler();
            } else {
                changeFreeTransformFunc(group, rect.attr("width"), rect.attr("height"));
            }
        });
        
        group.mouseup(function (evt) {
            if (group.parent().attr("id") === _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME) {
                if (Math.abs(mousePos.x - evt.pageX) > _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MINIMUM_DRAG_SIZE
                    || Math.abs(mousePos.y - evt.pageY) > _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MINIMUM_DRAG_SIZE) {
                    return;
                }
                removeDragOverGroupFunc.call();
                const items = mainGroup.selectAll('g');
                items.forEach(function (element) {
                    if (element !== group) {
                        if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(element.freeTransform)) {
                            element.freeTransform.hideResizeHandler();
                        }
                    }
                });
                if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(group.freeTransform)) {
                    group.freeTransform.showResizeHandler();
                } else {
                    changeFreeTransformFunc(group, rect.attr("width"), rect.attr("height"));
                }
                _textBaseField.constructor.showFieldsAttribute(ownerNode, [_textBaseField], undefined, mainGroup, _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsList(), _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getDVFieldOptsList(), changeValueEventFunc);
            } else {
                _textBaseField.constructor.showFieldsAttribute(ownerNode, [_textBaseField], undefined, mainGroup, _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsList(), _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getDVFieldOptsList(), changeValueEventFunc);
            }
        });
        return group;

    }

    /**
     * @function changeTextElement
     * @name module:Template/Field.TextBaseField#changeTextElement
     * @memberOf module:Template/Field.TextBaseField
     * @description   필드를 표현하는 Text Node의 Text를 변경한다.
     *
     * @param {Object} fieldGroup Field의 SVG 노드
     * @param {Number} scale 현재 PDF의 Scale
     * @Date : 2021. 5. 31
     */
    changeTextElement(fieldGroup, scale) {
        fieldGroup.select("svg").remove();
        var newText = this.makeSVGText(scale);
        const p = Snap.parse(newText);
        fieldGroup.append(p);
    }

    /**
     * @function showFieldAttribute
     * @static
     * @name module:Template/Field.TextBaseField#showFieldAttribute
     * @description  (Static) 필드의 속성 팝업창을 설정한다.
     *
     * @param {ELEMENT} node  속성 팝업 Node
     * @param {String} idValue     필드의 id값
     * @param {String} requiredValue     필수여부 값
     * @param {String} ownerIdValue     서명자 아이디
     * @param {String} dvValue     기본값
     * @param {String} fontFamilyNameValue     폰트 이름
     * @param {String} fontSizeValue     폰트 크기 값
     * @param {String} textAlignValue     텍스트 가로 정렬 값
     * @param {String} boldValue     폰트 볼드 여부
     * @param {String} fontColorValue     폰트 칼라
     * @param {Array} userList   서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldAttribute(node,
        idValue, fieldIdValue, requiredValue, ownerIdValue, dvValue, fontFamilyNameValue, fontSizeValue, textAlignValue, boldValue, fontColorValue,
        userList, dvOptionList,
        changeEventFunc) {

        var panel = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributePanelNode();

        var requireRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeToggleButtonNode(idValue, "required", "Template.isRequired", requiredValue, changeEventFunc);
        panel.appendChild(requireRow);

        let useDefaulOptionNode = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsListCount() !== 1;
        var ownerSelectRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(idValue, "ownerId", userList, "", useDefaulOptionNode);
        panel.appendChild(ownerSelectRow);

        let ownerSelect = ownerSelectRow.querySelector("select");
        jQuery(ownerSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        jQuery(ownerSelect).val(ownerIdValue).trigger("change");
        jQuery(ownerSelect).on("change", changeEventFunc);

        //12-28
        if (dvOptionList && Array.isArray(dvOptionList) && dvOptionList.length > 0) {
            var defaultValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeSelectNode(idValue, "defaultValue", dvOptionList, "Template.defaultValueText", true);
            panel.appendChild(defaultValueRow);
    
            let defaultValueSelect = defaultValueRow.querySelector("select");
            $(defaultValueSelect).select2({
                minimumResultsForSearch: Infinity,
                width: "100%"
            });
            $(defaultValueSelect).val(dvValue).trigger("change");
            $(defaultValueSelect).on("change", changeEventFunc);
        }

        var fieldIdValueRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttributeInputNode(idValue, "fieldId", "Template.fieldIdText", fieldIdValue, "", "", changeEventFunc);
        panel.appendChild(fieldIdValueRow);

        var fontAttrRow = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createTextAttrbuteNode(idValue, fontColorValue, textAlignValue, boldValue, changeEventFunc);
        panel.appendChild(fontAttrRow.row);

        let fontFamilyComboSelect = fontAttrRow.fontFamilyCombo.querySelector("select");
        $(fontFamilyComboSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(fontFamilyComboSelect).val(fontFamilyNameValue).trigger("change");
        $(fontFamilyComboSelect).on("change", changeEventFunc);
        let fontSizeComboSelect = fontAttrRow.fontSizeCombo.querySelector("select");
        $(fontSizeComboSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "100%"
        });
        $(fontSizeComboSelect).val(fontSizeValue).trigger("change");
        $(fontSizeComboSelect).on("change", changeEventFunc);

        let colorInput = fontAttrRow.colorBtn.querySelector("button");
        colorInput.style.backgroundColor = fontColorValue;
        let picker = new (_utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default())(colorInput, { color: fontColorValue });
        colorInput.value = fontColorValue;
        picker.on('change', function (r, g, b, a) {
            if (!picker.visible) {
                return;
            }
            colorInput.style.backgroundColor = _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]);
            colorInput.value = _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]);

            let colorTextInput = fontAttrRow.colorBtn.querySelector("input[type='text']");
            colorTextInput.value = (_utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]));
        });
        picker.on('exit', function (r, g, b, a) {
            colorInput.style.backgroundColor = _utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]);

            let colorTextInput = fontAttrRow.colorBtn.querySelector("input[type='text']");
            colorTextInput.value = (_utils_color_picker__WEBPACK_IMPORTED_MODULE_3___default().HEX([r, g, b, a]));
            colorTextInput.dispatchEvent(new Event("change"));
        });

        panel.setAttribute("Field-id-list", idValue);

        node.className = "Editor-Attribute";
        node.classList.add("Text-Field");
        node.appendChild(panel);
    }


    /**
     * @function showFieldsAttribute
     * @static
     * @name module:Template/Field.TextBaseField#showFieldsAttribute
     * @description (Static) 필드의 속성 팝업창을 설정한다.
     *
     * @param {ELEMENT} ownerNode  속성 팝업 Node
     * @param {Array} fieldList     필드들의 리스트
     * @param {ELEMENT} attrNode    속성 팝업의 Node
     * @param {String} mainGroup    SVG의 메인 Element
     * @param {Array} userList   서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldsAttribute(ownerNode, fieldList, attrNode, mainGroup, userList, dvOptionList, changeEventFunc) {
        let node = attrNode;
        if (attrNode === null || _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(attrNode)) {
            const bbox = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.mergeFieldsBBox(fieldList);
            node = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttrbutePopup(ownerNode, bbox);
            _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.repositionFieldDeleteBtn(ownerNode, bbox.x, bbox.y, bbox.width);
        }
        _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.removeAllChildNode(node);

        var idValueArr = [];
        fieldList.forEach((field) => {
            idValueArr.push(field.id);
        });

        var idValue = idValueArr.join();

        var ownerIdValue = fieldList[0].ownerId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].ownerId !== ownerIdValue) {
                ownerIdValue = '';
                break;
            }
        }

        var requiredValue = fieldList[0].required;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].required !== requiredValue) {
                requiredValue = '';
                break;
            }
        }

        var dvValue = fieldList[0].defaultValue;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].defaultValue !== dvValue) {
                dvValue = '';
                break;
            }
        }

        var fieldIdValue = fieldList[0].fieldId;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fieldId !== fieldIdValue) {
                fieldIdValue = '';
                break;
            }
        }

        var fontFamilyNameValue = fieldList[0].fontName;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontName !== fontFamilyNameValue) {
                fontFamilyNameValue = '';
                break;
            }
        }
        var fontSizeValue = fieldList[0].fontSize;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontSize !== fontSizeValue) {
                fontSizeValue = '';
                break;
            }
        }

        var textAlignValue = fieldList[0].textAlign;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].textAlign !== textAlignValue) {
                textAlignValue = '';
                break;
            }
        }

        var boldValue = fieldList[0].isBold;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].isBold !== boldValue) {
                boldValue = '';
                break;
            }
        }
        var fontColorValue = fieldList[0].fontColor;
        for (var idx = 0; idx < fieldList.length; ++idx) {
            if (fieldList[idx].fontColor !== fontColorValue) {
                fontColorValue = '';
                break;
            }
        }

        TextBaseField.showFieldAttribute(node,
            idValue, fieldIdValue, requiredValue, ownerIdValue, dvValue, fontFamilyNameValue, fontSizeValue, textAlignValue, boldValue, fontColorValue,
            userList, dvOptionList,
            changeEventFunc);
    }
    
    validateValue(propertyName, value) {
        return true;
    }
}



/***/ }),

/***/ "./js/pdf_form/src/Fields/TextField.js":
/*!*********************************************!*\
  !*** ./js/pdf_form/src/Fields/TextField.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TextField: () => (/* binding */ TextField)
/* harmony export */ });
/* harmony import */ var _TextBaseField__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./TextBaseField */ "./js/pdf_form/src/Fields/TextBaseField.js");
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");

/**
 * @module Template/Field
*/




/**
 * 텍스트 필드 Class
 *
 * @property {Number} m_maxValueLength {@link module:Template/Field.TextField#m_maxValueLength}
 * 
 * @property {Function} fieldName {@link module:Template/Field.TextField#fieldName}
 * @property {Function} showFieldsAttribute {@link module:Template/Field.TextField#showFieldsAttribute}
 * 
 * @augments TextBaseField {@link module:Template/Field.TextBaseField#TextBaseField}
 * @FileName TextField.js
 * @since 2021.05.31
 */
class TextField extends _TextBaseField__WEBPACK_IMPORTED_MODULE_0__.TextBaseField {
    /**
     * @constructor
     * @param id 필드의 ID
     * @param pageNo 필드가 속한 페이지 번호
     * @param x 필드의 svg상의 x좌표
     * @param y 필드의 svg상의 y좌표
     *
     */
    constructor(id, pageNo, x, y) {
        super(id, pageNo, x, y, TextField.widthValue(), TextField.heightValue());
        this.m_type = TextField.fieldName();

        /**
         * @type {Number}
         * @name module:Template.NumberField#m_maxValueLength
         * @description 텍스트 필드 값의 최대길이
         * @example
         * // getter maxValueLength()
         * // setter maxValueLength(val)
         */
        this.m_maxValueLength = 100;
        
        this.m_kind = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.translateForKey("Template.textFieldTool");
        if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(id)) {
            return;
        }
        this.m_fieldId = this.m_id.replace(this.m_type, this.m_kind + "-");
    }

    /**
     * @function fieldName
     * @name module:Template/Field.TextField#fieldName
     * @return {String}
     * @description (Static) 필드 타입의 이름
     * @static
     *
     */
    static fieldName() {
        return "TextField";
    }

    ancestors() {
        return ["TF", "TBF", "BF"];
    }

    get maxValueLength() {
        return this.m_maxValueLength;
    }
    set maxValueLength(__maxValueLength) {
        this.m_maxValueLength = __maxValueLength;
    }

    /**
     * @function showFieldsAttribute
     * @static
     * @name module:Template/Field.TextField#showFieldsAttribute
     * @description (Static) 필드의 속성 팝업창을 설정한다.
     *
     * @param {ELEMENT} ownerNode  속성 팝업 Node
     * @param {Array} fieldList     필드들의 리스트
     * @param {ELEMENT} attrNode    속성 팝업의 Node
     * @param {String} mainGroup    SVG의 메인 Element
     * @param {Array} userList   서명자 리스트
     * @param {Array} dvOptionList   기본값 선택 리스트
     * @param {Callback} changeEventFunc    속성값이 변할때 호출되는 callback function
     * @Date : 2021. 5. 31
     */
    static showFieldsAttribute(ownerNode, fieldList, attrNode, mainGroup, userList, dvOptionList, changeEventFunc) {
        _TextBaseField__WEBPACK_IMPORTED_MODULE_0__.TextBaseField.showFieldsAttribute(ownerNode, fieldList, attrNode, mainGroup, userList, dvOptionList, changeEventFunc);
    }
    
    validateValue(propertyName, value) {
        return true;
    }
}



/***/ }),

/***/ "./js/pdf_form/src/Translator/translator.js":
/*!**************************************************!*\
  !*** ./js/pdf_form/src/Translator/translator.js ***!
  \**************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ "./js/pdf_form/src/Translator/utils.js");
/* module decorator */ module = __webpack_require__.hmd(module);


/**
 * simple-translator
 * A small JavaScript library to translate webpages into different languages.
 * https://github.com/andreasremdt/simple-translator
 *
 * Author: Andreas Remdt <me@andreasremdt.com> (https://andreasremdt.com)
 * License: MIT (https://mit-license.org/)
 */
class Translator {
    /**
     * Initialize the Translator by providing options.
     *
     * @param {Object} options
     */
    constructor(options = {}) {
        this.debug = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.logger)(true);

        if (typeof options != 'object' || Array.isArray(options)) {
            this.debug('INVALID_OPTIONS', options);
            options = {};
        }

        this.languages = new Map();
        this.config = Object.assign(Translator.defaultConfig, options);

        const { debug, registerGlobally, detectLanguage } = this.config;

        this.debug = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.logger)(debug);

        if (registerGlobally) {
            this._globalObject[registerGlobally] = this.translateForKey.bind(this);
        }

        if (detectLanguage && this._env == 'browser') {
            this._detectLanguage();
        }
    }

    /**
     * Return the global object, depending on the environment.
     * If the script is executed in a browser, return the window object,
     * otherwise, in Node.js, return the global object.
     *
     * @return {Object}
     */
    get _globalObject() {
        if (this._env == 'browser') {
            return window;
        }

        return __webpack_require__.g;
    }

    /**
     * Check and return the environment in which the script is executed.
     *
     * @return {String} The environment
     */
    get _env() {
        if (typeof window != 'undefined') {
            return 'browser';
        } else if ( true && module.exports) {
            return 'node';
        }

        return 'browser';
    }

    /**
     * Detect the users preferred language. If the language is stored in
     * localStorage due to a previous interaction, use it.
     * If no localStorage entry has been found, use the default browser language.
     */
    _detectLanguage() {
        const inMemory = localStorage.getItem(this.config.persistKey);

        if (inMemory) {
            this.config.defaultLanguage = inMemory;
        } else {
            const lang = navigator.languages
                ? navigator.languages[0]
                : navigator.language;

            this.config.defaultLanguage = lang.substr(0, 2);
        }
    }

    /**
     * Get a translated value from a JSON by providing a key. Additionally,
     * the target language can be specified as the second parameter.
     *
     * @param {String} key
     * @param {String} toLanguage
     * @return {String}
     */
    _getValueFromJSON(key, toLanguage) {
        const json = this.languages.get(toLanguage);

        return key.split('.').reduce((obj, i) => (obj ? obj[i] : null), json);
    }

    /**
     * Replace a given DOM nodes' attribute values (by default innerHTML) with
     * the translated text.
     *
     * @param {HTMLElement} element
     * @param {String} toLanguage
     */
    _replace(element, toLanguage) {
        const keys = element.getAttribute('data-i18n')?.split(/\s/g);
        const attributes = element?.getAttribute('data-i18n-attr')?.split(/\s/g);

        if (attributes && keys.length != attributes.length) {
            this.debug('MISMATCHING_ATTRIBUTES', keys, attributes, element);
        }

        keys.forEach((key, index) => {
            const text = this._getValueFromJSON(key, toLanguage);
            const attr = attributes ? attributes[index] : 'innerHTML';

            if (text) {
                if (attr == 'innerHTML') {
                    element[attr] = text;
                } else {
                    element.setAttribute(attr, text);
                }
            } else {
                this.debug('TRANSLATION_NOT_FOUND', key, toLanguage);
            }
        });
    }

    /**
     * Translate all DOM nodes that match the given selector into the
     * specified target language.
     *
     * @param {String} toLanguage The target language
     */
    translatePageTo(toLanguage = this.config.defaultLanguage) {
        if (this._env == 'node') {
            this.debug('INVALID_ENVIRONMENT');
            return;
        }

        if (typeof toLanguage != 'string') {
            this.debug('INVALID_PARAM_LANGUAGE', toLanguage);
            return;
        }

        if (toLanguage.length == 0) {
            this.debug('EMPTY_PARAM_LANGUAGE');
            return;
        }

        if (!this.languages.has(toLanguage)) {
            this.debug('NO_LANGUAGE_REGISTERED', toLanguage);
            return;
        }

        const elements =
            typeof this.config.selector == 'string'
                ? Array.from(document.querySelectorAll(this.config.selector))
                : this.config.selector;

        if (elements.length && elements.length > 0) {
            elements.forEach((element) => this._replace(element, toLanguage));
        } else if (elements.length == undefined) {
            this._replace(elements, toLanguage);
        }

        this._currentLanguage = toLanguage;
        document.documentElement.lang = toLanguage;

        if (this.config.persist) {
            localStorage.setItem(this.config.persistKey, toLanguage);
        }
    }

    /**
     * Translate a given key into the specified language if it exists
     * in the translation file. If not or if the language hasn't been added yet,
     * the return value is `null`.
     *
     * @param {String} key The key from the language file to translate
     * @param {String} toLanguage The target language
     * @return {(String|null)}
     */
    translateForKey(key, toLanguage = this.config.defaultLanguage) {
        if (typeof key != 'string') {
            this.debug('INVALID_PARAM_KEY', key);
            return null;
        }

        if (!this.languages.has(toLanguage)) {
            this.debug('NO_LANGUAGE_REGISTERED', toLanguage);
            return null;
        }

        const text = this._getValueFromJSON(key, toLanguage);

        if (!text) {
            this.debug('TRANSLATION_NOT_FOUND', key, toLanguage);
            return null;
        }

        return text;
    }

    /**
     * Add a translation resource to the Translator object. The language
     * can then be used to translate single keys or the entire page.
     *
     * @param {String} language The target language to add
     * @param {String} json The language resource file as JSON
     * @return {Object} Translator instance
     */
    add(language, json) {
        if (typeof language != 'string') {
            this.debug('INVALID_PARAM_LANGUAGE', language);
            return this;
        }

        if (language.length == 0) {
            this.debug('EMPTY_PARAM_LANGUAGE');
            return this;
        }

        if (Array.isArray(json) || typeof json != 'object') {
            this.debug('INVALID_PARAM_JSON', json);
            return this;
        }

        if (Object.keys(json).length == 0) {
            this.debug('EMPTY_PARAM_JSON');
            return this;
        }

        this.languages.set(language, json);

        return this;
    }

    /**
     * Remove a translation resource from the Translator object. The language
     * won't be available afterwards.
     *
     * @param {String} language The target language to remove
     * @return {Object} Translator instance
     */
    remove(language) {
        if (typeof language != 'string') {
            this.debug('INVALID_PARAM_LANGUAGE', language);
            return this;
        }

        if (language.length == 0) {
            this.debug('EMPTY_PARAM_LANGUAGE');
            return this;
        }

        this.languages.delete(language);

        return this;
    }

    /**
     * Fetch a translation resource from the web server. It can either fetch
     * a single resource or an array of resources. After all resources are fetched,
     * return a Promise.
     * If the optional, second parameter is set to true, the fetched translations
     * will be added to the Translator object.
     *
     * @param {String|Array} sources The files to fetch
     * @param {Boolean} save Save the translation to the Translator object
     * @return {(Promise|null)}
     */
    fetch(sources, save = true) {
        if (!Array.isArray(sources) && typeof sources != 'string') {
            this.debug('INVALID_PARAMETER_SOURCES', sources);
            return null;
        }

        if (!Array.isArray(sources)) {
            sources = [sources];
        }

        const urls = sources.map((source) => {
            const filename = source.replace(/\.json$/, '').replace(/^\//, '');
            const path = this.config.filesLocation.replace(/\/$/, '');

            return `${path}/${filename}.json`;
        });

        if (this._env == 'browser') {
            return Promise.all(urls.map((url) => fetch(url)))
                .then((responses) =>
                    Promise.all(
                        responses.map((response) => {
                            if (response.ok) {
                                return response.json();
                            }

                            this.debug('FETCH_ERROR', response);
                        })
                    )
                )
                .then((languageFiles) => {
                    // If a file could not be fetched, it will be `undefined` and filtered out.
                    languageFiles = languageFiles.filter((file) => file);

                    if (save) {
                        languageFiles.forEach((file, index) => {
                            this.add(sources[index], file);
                        });
                    }

                    return languageFiles.length > 1 ? languageFiles : languageFiles[0];
                });
        } else if (this._env == 'node') {
            // return new Promise((resolve) => {
            //     const languageFiles = [];

            //     urls.forEach((url, index) => {
            //         try {
            //             const json = JSON.parse(
            //                 require('fs').readFileSync(process.cwd() + url, 'utf-8')
            //             );

            //             if (save) {
            //                 this.add(sources[index], json);
            //             }

            //             languageFiles.push(json);
            //         } catch (err) {
            //             this.debug('MODULE_NOT_FOUND', err.message);
            //         }
            //     });

            //     resolve(languageFiles.length > 1 ? languageFiles : languageFiles[0]);
            // });
        }
    }

    /**
     * Sets the default language of the translator instance.
     *
     * @param {String} language
     * @return {void}
     */
    setDefaultLanguage(language) {
        if (typeof language != 'string') {
            this.debug('INVALID_PARAM_LANGUAGE', language);
            return;
        }

        if (language.length == 0) {
            this.debug('EMPTY_PARAM_LANGUAGE');
            return;
        }

        if (!this.languages.has(language)) {
            this.debug('NO_LANGUAGE_REGISTERED', language);
            return null;
        }

        this.config.defaultLanguage = language;
    }

    /**
     * Return the currently selected language.
     *
     * @return {String}
     */
    get currentLanguage() {
        return this._currentLanguage || this.config.defaultLanguage;
    }

    /**
     * Returns the current default language;
     *
     * @return {String}
     */
    get defaultLanguage() {
        return this.config.defaultLanguage;
    }

    /**
     * Return the default config object whose keys can be overriden
     * by the user's config passed to the constructor.
     *
     * @return {Object}
     */
    static get defaultConfig() {
        return {
            defaultLanguage: 'en',
            detectLanguage: true,
            selector: '[data-i18n]',
            debug: false,
            registerGlobally: '__',
            persist: false,
            persistKey: 'preferred_language',
            filesLocation: '/i18n',
        };
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Translator);

/***/ }),

/***/ "./js/pdf_form/src/Translator/utils.js":
/*!*********************************************!*\
  !*** ./js/pdf_form/src/Translator/utils.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   logger: () => (/* binding */ logger)
/* harmony export */ });
const CONSOLE_MESSAGES = {
    INVALID_PARAM_LANGUAGE: (param) =>
        `Invalid parameter for \`language\` provided. Expected a string, but got ${typeof param}.`,
    INVALID_PARAM_JSON: (param) =>
        `Invalid parameter for \`json\` provided. Expected an object, but got ${typeof param}.`,
    EMPTY_PARAM_LANGUAGE: () =>
        `The parameter for \`language\` can't be an empty string.`,
    EMPTY_PARAM_JSON: () =>
        `The parameter for \`json\` must have at least one key/value pair.`,
    INVALID_PARAM_KEY: (param) =>
        `Invalid parameter for \`key\` provided. Expected a string, but got ${typeof param}.`,
    NO_LANGUAGE_REGISTERED: (language) =>
        `No translation for language "${language}" has been added, yet. Make sure to register that language using the \`.add()\` method first.`,
    TRANSLATION_NOT_FOUND: (key, language) =>
        `No translation found for key "${key}" in language "${language}". Is there a key/value in your translation file?`,
    INVALID_PARAMETER_SOURCES: (param) =>
        `Invalid parameter for \`sources\` provided. Expected either a string or an array, but got ${typeof param}.`,
    FETCH_ERROR: (response) =>
        `Could not fetch "${response.url}": ${response.status} (${response.statusText})`,
    INVALID_ENVIRONMENT: () =>
        `You are trying to execute the method \`translatePageTo()\`, which is only available in the browser. Your environment is most likely Node.js`,
    MODULE_NOT_FOUND: (message) => message,
    MISMATCHING_ATTRIBUTES: (keys, attributes, element) =>
        `The attributes "data-i18n" and "data-i18n-attr" must contain the same number of keys.

Values in \`data-i18n\`:      (${keys.length}) \`${keys.join(' ')}\`
Values in \`data-i18n-attr\`: (${attributes.length}) \`${attributes.join(' ')}\`

The HTML element is:
${element.outerHTML}`,
    INVALID_OPTIONS: (param) =>
        `Invalid config passed to the \`Translator\` constructor. Expected an object, but got ${typeof param}. Using default config instead.`,
};

/**
 *
 * @param {Boolean} isEnabled
 * @return {Function}
 */
function logger(isEnabled) {
    return function log(code, ...args) {
        if (isEnabled) {
            try {
                const message = CONSOLE_MESSAGES[code];
                throw new TypeError(message ? message(...args) : 'Unhandled Error');
            } catch (ex) {
                const line = ex.stack.split(/\n/g)[1];
                const [method, filepath] = line.split(/@/);

                console.error(`${ex.message}

This error happened in the method \`${method}\` from: \`${filepath}\`.

If you don't want to see these error messages, turn off debugging by passing \`{ debug: false }\` to the constructor.

Error code: ${code}

Check out the documentation for more details about the API:
https://github.com/andreasremdt/simple-translator#usage
        `);
            }
        }
    };
}

/***/ }),

/***/ "./js/pdf_form/src/pdf.cursor.tool.js":
/*!********************************************!*\
  !*** ./js/pdf_form/src/pdf.cursor.tool.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PDFCursorTools: () => (/* binding */ PDFCursorTools)
/* harmony export */ });
//import * as GrabToPan from './grab-to-pan.js';

const isNotIEorIsIE10plus = !document.documentMode || document.documentMode > 9;
const chrome2 = window.chrome;
const isChrome15OrOpera15plus = chrome2 && (chrome2.webstore || chrome2.app);
const isSafari6plus = /Apple/.test(navigator.vendor) && /Version\/([6-9]\d*|[1-5]\d+)/.test(navigator.userAgent);

function isLeftMouseReleased(event) {
        if ("buttons" in event && isNotIEorIsIE10plus) {
                return !(event.buttons & 1);
        }

        if (isChrome15OrOpera15plus || isSafari6plus) {
                return event.which === 0;
        }

        return false;
}
                
let matchesSelector;
["webkitM", "mozM", "msM", "oM", "m"].some(function (prefix) {
        let name = prefix + "atches";

        if (name in document.documentElement) {
                matchesSelector = name;
        }

        name += "Selector";

        if (name in document.documentElement) {
                matchesSelector = name;
        }

        return matchesSelector;
});

const CursorTool = {
        SELECT: 0,
        HAND: 1,
        ZOOM: 2
};

class PDFCursorTools {
        constructor({
                container,
                eventBus,
                cursorToolOnLoad = 1
        }) {
                this.container = container;
                this.eventBus = eventBus;
                this.active = 0;
                this.activeBeforePresentationMode = null;
                this.handTool = new GrabToPan({
                        element: this.container
                });

                this._addEventListeners();

                Promise.resolve().then(() => {
                        this.switchTool(cursorToolOnLoad);
                });
        }

        get activeTool() {
                return this.active;
        }

        switchTool(tool) {
                if (this.activeBeforePresentationMode !== null) {
                        return;
                }

                if (tool === this.active) {
                        return;
                }

                const disableActiveTool = () => {
                        switch (this.active) {
                                case CursorTool.SELECT:
                                        break;

                                case CursorTool.HAND:
                                        this.handTool.deactivate();
                                        break;

                                case CursorTool.ZOOM:
                                        break;
                        }
                };

                switch (tool) {
                        case CursorTool.SELECT:
                                disableActiveTool();
                                break;

                        case CursorTool.HAND:
                                disableActiveTool();
                                this.handTool.activate();
                                break;

                        case CursorTool.ZOOM:
                                break;
                        default:
                                console.error(`switchTool: "${tool}" is an unsupported value.`);
                                return;
                }

                this.active = tool;

                this._dispatchEvent();
        }

        _dispatchEvent() {
                this.eventBus.dispatch("cursortoolchanged", {
                        source: this,
                        tool: this.active
                });
        }

        _addEventListeners() {
                this.eventBus._on("switchcursortool", evt => {
                        this.switchTool(evt.tool);
                });

                this.eventBus._on("presentationmodechanged", evt => {
                        if (evt.switchInProgress) {
                                return;
                        }

                        let previouslyActive;

                        if (evt.active) {
                                previouslyActive = this.active;
                                this.switchTool(CursorTool.SELECT);
                                this.activeBeforePresentationMode = previouslyActive;
                        } else {
                                previouslyActive = this.activeBeforePresentationMode;
                                this.activeBeforePresentationMode = null;
                                this.switchTool(previouslyActive);
                        }
                });
        }

}

/***/ }),

/***/ "./js/pdf_form/src/template/templateData.js":
/*!**************************************************!*\
  !*** ./js/pdf_form/src/template/templateData.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TemplateData: () => (/* binding */ TemplateData)
/* harmony export */ });
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");

/**
 * @module Template/Data
 */



/**
 * @description
 * 문서의 이름과 서명자의 정보를 담고 있는 Class <br/>
 * JSON데이터를 추출하기 위해 만들어진 Data Class
 *
 * @property {String} formTemplateName {@link module:Template/Data.TemplateData#formTemplateName}
 * @property {String} formTemplateUUID {@link module:Template/Data.TemplateData#formTemplateUUID}
 * @property {Array} formerList {@link module:Template/Data.TemplateData#formerList}
 *
 * @property {Function} pushOwner {@link module:Template/Data.TemplateData#pushOwner}
 * 
 * @example
 *  아래와 같이 JSON데이터를 만들 때 사용된다.
 *  {
        "formTemplateName": "Form Template 문서 이름",
        "formTemplateUUID": "Form Template 문서 UUID",
        "formerList": [  -- TemplateDataOwner Data Class
            {
                "pages": [  -- TemplateDataPage Data Class
                    {
                        "pageNo": 0,
                        "fields": [
                        ]
                    }
                ]
            }
        ]
    }
 *
 * @FileName TemplateData.js
 * @since 2021.05.31
 */
class TemplateData {

    /**
     * @constructor
     * @param {String} name Template 문서 이름.
     *
     */
    constructor(name, uuid) {

        /**
         * @type {String}
         * @name module:Template/Data.TemplateData#formTemplateName
         * @description  Template 문서 이름.
         */
        this.formTemplateName = name;

        /**
         * @type {String}
         * @name module:Template/Data.TemplateData#formTemplateUUID
         * @description  Template 문서 UUID.
         */
        this.formTemplateUUID = uuid;
        if (uuid === undefined || uuid === null) {
            this.formTemplateUUID = _utils_utils_js__WEBPACK_IMPORTED_MODULE_0__.Utils.generate_uuidv4();
        }

        /**
         * @type {Array}
         * @name module:Template/Data.TemplateData#formerList
         * @description  TemplateDataOwner Array
         */
        this.formerList = [];
    }

    /**
     * @function pushOwner
     * @name module:Template/Data.TemplateData#pushOwner
     * @description TemplateDataOwner를 추가한다.
     *
     * @param {Object} ownerData 추가할 서명자 데이터 TemplateDataOwner
     * @Date : 2021. 5. 31
    */
    pushOwner(ownerData) {
        this.formerList.push(ownerData);
    }
}

/***/ }),

/***/ "./js/pdf_form/src/template/templateDataOwner.js":
/*!*******************************************************!*\
  !*** ./js/pdf_form/src/template/templateDataOwner.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TemplateDataOwner: () => (/* binding */ TemplateDataOwner)
/* harmony export */ });

/**
 * @module Template/Data
 */

/**
 * @description 페이지 정보를 담고 있는 서명자 정보 Class<br/>
 * JSON데이터를 추출하기 위해 만들어진 Data Class
 * 
 *
 * @property {Array} pages {@link module:Template/Data.TemplateDataOwner#pages}
 *
 * @property {Function} pushPage {@link module:Template/Data.TemplateDataOwner#pushPage}
 * @property {Function} cloneTemplateDataOwnerObject {@link module:Template/Data.TemplateDataOwner#cloneTemplateDataOwnerObject}
 * @property {Function} cloneObject {@link module:Template/Data.TemplateDataOwner#cloneObject}
 * 
 * @see module:Template/Data.TemplateData
 * @FileName TemplateDataOwner.js
 * @since 2021.05.31
 */
class TemplateDataOwner {

    /**
     * @constructor
     *
     */
    constructor() {
        /**
         * @type {Array}
         * @name module:Template/Data.TemplateDataOwner#pages
         * @description  TemplateDataPage 클래스 배열
         */
        this.pages = [];
    }

    /**
     * @function pushPage
     * @name module:Template/Data.TemplateDataOwner#pushPage
     * @description TemplateDataPage Object를 추가한다.
     *
     * @param {Object} page  TemplateDataPage Object
     * @Date : 2021. 5. 31
    */
    pushPage(page) {
        this.pages.push(page);
    }

    /**
     * @static
     * @function cloneTemplateDataOwnerObject
     * @name module:Template/Data.TemplateDataOwner#cloneTemplateDataOwnerObject
     * @description (Static) TemplateDataOwner 오브젝트를 복사한다.
     * 
     * @param {Object} obj  복사할 Object
     * @return {Object} TemplateDataOwner Object
     * @Date : 2021. 5. 31
    */
    static cloneTemplateDataOwnerObject(obj) {
        var clone = new TemplateDataOwner();
        for (var key in obj) {
            if (key === "pages" || key === "fields") {
                continue;
            }
            if (typeof obj[key] == "object" && obj[key] != null) {
                clone[key] = TemplateDataOwner.cloneObject(obj[key]);
            } else {
                clone[key] = obj[key];
            }
        }

        return clone;
    }

    /**
     * @static
     * @function cloneObject
     * @name module:Template/Data.TemplateDataOwner#cloneObject
     * @description (Static) 오브젝트를 복사한다.
     *
     * @param {Object} obj  복사할 Object
     * @return {Object}
     * @Date : 2021. 5. 31
    */
    static cloneObject(obj) {
        var clone = {};
        for (var key in obj) {
            if (key === "pages" || key === "fields") {
                continue;
            }
            if (typeof obj[key] == "object" && obj[key] != null) {
                clone[key] = TemplateDataOwner.cloneObject(obj[key]);
            } else {
                clone[key] = obj[key];
            }
        }

        return clone;
    }

}


/***/ }),

/***/ "./js/pdf_form/src/template/templateDataPage.js":
/*!******************************************************!*\
  !*** ./js/pdf_form/src/template/templateDataPage.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TemplateDataPage: () => (/* binding */ TemplateDataPage)
/* harmony export */ });

/**
 * @module Template/Data
 */

/**
 * @description  필드 리스트 정보를 담고 있는 페이지 정보 Class<br/>
 * JSON데이터를 추출하기 위해 만들어진 Data Class
 *
 * @property {Number} pageNo {@link module:Template/Data.TemplateDataPage#pageNo}
 * @property {Array} fields {@link module:Template/Data.TemplateDataPage#fields}
 *
 * @property {Function} pushField {@link module:Template/Data.TemplateDataPage#pushField}
 *
 * @see module:Template/Data.TemplateData
 * @FileName TemplateDataPage.js
 * @since 2021.05.31
 */
class TemplateDataPage {

    /**
     * @constructor
     *
     * @param {Number} pageNo 페이지 번호
     */
    constructor(pageNo) {
        /**
         * @type {Number}
         * @name module: Template/Data.TemplateDataPage#pageNo
         * @description  페이지 번호
         */
        this.pageNo = pageNo;

        /**
         * @type {Array}
         * @name module:Template/Data.TemplateDataPage#fields
         * @description  Field 리스트.
         */
        this.fields = [];
    }

    /**
     * @function pushField
     * @name module:Template/Data.TemplateDataOwner#pushField
     * @description Field Object를 추가한다.
     *
     * @param {Object} field  Field Object
     * @Date : 2021. 5. 31
    */
    pushField(field) {
        this.fields.push(field);
    }
}

/***/ }),

/***/ "./js/pdf_form/src/template/templateUserFieldInfo.js":
/*!***********************************************************!*\
  !*** ./js/pdf_form/src/template/templateUserFieldInfo.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TemplateUserFieldInfo: () => (/* binding */ TemplateUserFieldInfo)
/* harmony export */ });

/**
 * @module Template/Data
 */

/**
 * @description 서명자 정보 Class
 * 
 *
 * @property {Array} fields {@link module:Template/Data.TemplateUserFieldInfo#fields}
 *
 * @property {Function} pushField {@link module:Template/Data.TemplateUserFieldInfo#pushField}
 * @property {Function} field {@link module:Template/Data.TemplateUserFieldInfo#field}
 * @property {Function} removeField {@link module:Template/Data.TemplateUserFieldInfo#removeField}
 * @property {Function} contains {@link module:Template/Data.TemplateUserFieldInfo#contains}
 * 
 * @class
 * @FileName TemplateUserFieldInfo.js
 * @since 2021.05.31
 */
class TemplateUserFieldInfo {

    constructor() {

        /**
         * @type {Array}
         * @name module: Template/Data.TemplateUserFieldInfo#fields
         * @description  Field 리스트.
         */
        this.fields = {};
    }

    /**
     * @function pushField
     * @name module:Template/Data.TemplateUserFieldInfo#pushField
     * @description Field Object를 추가한다.
     *
     * @param {Object} field  Field Object
     * @Date : 2021. 5. 31
    */
    pushField(fieldId, field) {
        this.fields[fieldId] = field;
    }

    /**
     * @function field
     * @name module:Template/Data.TemplateUserFieldInfo#field
     * @description ID에 해당하는 Field Object를 리턴한다.
     *
     * @param {String} fieldId  Field ID
     * @return {Object} Field Object
     * @Date : 2021. 5. 31
    */
    field(fieldId) {
        return this.fields[fieldId];
    }

    /**
     * @function removeField
     * @name module:Template/Data.TemplateUserFieldInfo#removeField
     * @description ID에 해당하는 Field Object를 삭제한다.
     *
     * @param {String} fieldId  Field ID
     * @Date : 2021. 5. 31
    */
    removeField(fieldId) {
        if (this.contains(fieldId)) {
            delete this.fields[fieldId];
        }
    }

    /**
     * @function contains
     * @name module:Template/Data.TemplateUserFieldInfo#contains
     * @description ID에 해당하는 Field Object가 존재하는지 여부를 리턴한다.
     *
     * @param {String} fieldId  Field ID
     * @return {Boolean}} 존재하면 True 아니면 false
     * @Date : 2021. 5. 31
    */
    contains(fieldId) {
        return this.fields.hasOwnProperty(fieldId);
    }
}

/***/ }),

/***/ "./js/pdf_form/src/template/templatemod.js":
/*!*************************************************!*\
  !*** ./js/pdf_form/src/template/templatemod.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TemplateMod: () => (/* binding */ TemplateMod)
/* harmony export */ });
/* harmony import */ var animejs_lib_anime_es_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! animejs/lib/anime.es.js */ "./node_modules/animejs/lib/anime.es.js");
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");
/* harmony import */ var _Constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../Constants.js */ "./js/pdf_form/src/Constants.js");
/* harmony import */ var _Fields_BaseField__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../Fields/BaseField */ "./js/pdf_form/src/Fields/BaseField.js");
/* harmony import */ var _Fields_TextField__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./../Fields/TextField */ "./js/pdf_form/src/Fields/TextField.js");
/* harmony import */ var _Fields_NumberField__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./../Fields/NumberField */ "./js/pdf_form/src/Fields/NumberField.js");
/* harmony import */ var _Fields_DateField__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./../Fields/DateField */ "./js/pdf_form/src/Fields/DateField.js");
/* harmony import */ var _Fields_SignField__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./../Fields/SignField */ "./js/pdf_form/src/Fields/SignField.js");
/* harmony import */ var _Fields_TextBaseField_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./../Fields/TextBaseField.js */ "./js/pdf_form/src/Fields/TextBaseField.js");
/* harmony import */ var _Fields_ImageField_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../Fields/ImageField.js */ "./js/pdf_form/src/Fields/ImageField.js");
/* harmony import */ var _Fields_MultiLineTextField_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../Fields/MultiLineTextField.js */ "./js/pdf_form/src/Fields/MultiLineTextField.js");
/* harmony import */ var _Fields_CheckboxField_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../Fields/CheckboxField.js */ "./js/pdf_form/src/Fields/CheckboxField.js");
/* harmony import */ var _Fields_RadioField_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../Fields/RadioField.js */ "./js/pdf_form/src/Fields/RadioField.js");
/* harmony import */ var _Fields_LabelField_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../Fields/LabelField.js */ "./js/pdf_form/src/Fields/LabelField.js");
/* harmony import */ var _Fields_ComboboxField_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../Fields/ComboboxField.js */ "./js/pdf_form/src/Fields/ComboboxField.js");
/* harmony import */ var _templateData_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./templateData.js */ "./js/pdf_form/src/template/templateData.js");
/* harmony import */ var _templateDataOwner_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./templateDataOwner.js */ "./js/pdf_form/src/template/templateDataOwner.js");
/* harmony import */ var _templateDataPage_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./templateDataPage.js */ "./js/pdf_form/src/template/templateDataPage.js");
/* harmony import */ var _templateUserFieldInfo_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./templateUserFieldInfo.js */ "./js/pdf_form/src/template/templateUserFieldInfo.js");

/**
 * @module Template/TemplateMod
 */

























var _templateMod;

/**
 * @description 필드 관련 처리를 하는 Class
 * 
 * @property {Boolean} dragStart {@link module:Template/TemplateMod.TemplateMod#dragStart}
 * @property {Object} dragBox {@link module:Template/TemplateMod.TemplateMod#dragBox}
 * @property {Object} mainCanvas {@link module:Template/TemplateMod.TemplateMod#mainCanvas}
 * @property {Rect} pageBoundingBox {@link module:Template/TemplateMod.TemplateMod#pageBoundingBox}
 * @property {Object} templateRectMousePosition {@link module:Template/TemplateMod.TemplateMod#templateRectMousePosition}
 * @property {String} selectAddFieldType {@link module:Template/TemplateMod.TemplateMod#selectAddFieldType}
 * @property {Object} fieldDictionary {@link module:Template/TemplateMod.TemplateMod#fieldDictionary}
 * @property {Number} unredoActionIdx {@link module:Template/TemplateMod.TemplateMod#unredoActionIdx}
 * @property {Object} unredoActionDict {@link module:Template/TemplateMod.TemplateMod#unredoActionDict}
 * @property {Object} pdfViewer {@link module:Template/TemplateMod.TemplateMod#pdfViewer}
 * @property {Object} templateUserFieldInfo {@link module:Template/TemplateMod.TemplateMod#templateUserFieldInfo}
 * @property {Object} ownerNode {@link module:Template/TemplateMod.TemplateMod#ownerNode}
 * @property {Boolean} isFieldDragStart {@link module:Template/TemplateMod.TemplateMod#isFieldDragStart}
 * @property {String} menuCode {@link module:Template/TemplateMod.TemplateMod#menuCode}
 *
 * @property {Function} addUndoRedoAct {@link module:Template/TemplateMod.TemplateMod#addUndoRedoAct}
 * @property {Function} buildDVOptsInfo {@link module:Template/TemplateMod.TemplateMod#buildDVOptsInfo}
 * @property {Function} buildFieldformerList {@link module:Template/TemplateMod.TemplateMod#buildFieldformerList}
 * @property {Function} buildFieldUserInfo {@link module:Template/TemplateMod.TemplateMod#buildFieldUserInfo}
 * @property {Function} calcFieldPostion {@link module:Template/TemplateMod.TemplateMod#calcFieldPostion}
 * @property {Function} calcTemplateBoundary {@link module:Template/TemplateMod.TemplateMod#calcTemplateBoundary}
 * @property {Function} changeFieldPosition {@link module:Template/TemplateMod.TemplateMod#changeFieldPosition}
 * @property {Function} changeFieldValueEvent {@link module:Template/TemplateMod.TemplateMod#changeFieldValueEvent}
 * @property {Function} changeFreeTransform {@link module:Template/TemplateMod.TemplateMod#changeFreeTransform}
 * @property {Function} changeGroupBoxFreeTransform {@link module:Template/TemplateMod.TemplateMod#changeGroupBoxFreeTransform}
 * @property {Function} checkTemplateFieldData {@link module:Template/TemplateMod.TemplateMod#checkTemplateFieldData}
 * @property {Function} clearSelectedTool {@link module:Template/TemplateMod.TemplateMod#clearSelectedTool}
 * @property {Function} convertUserListToSelectOptions {@link module:Template/TemplateMod.TemplateMod#convertUserListToSelectOptions}
 * @property {Function} createDragOverGroup {@link module:Template/TemplateMod.TemplateMod#createDragOverGroup}
 * @property {Function} createField {@link module:Template/TemplateMod.TemplateMod#createField}
 * @property {Function} createFieldObject {@link module:Template/TemplateMod.TemplateMod#createFieldObject}
 * @property {Function} createTemplateRect {@link module:Template/TemplateMod.TemplateMod#createTemplateRect}
 * @property {Function} dragendFunc {@link module:Template/TemplateMod.TemplateMod#dragendFunc}
 * @property {Function} dragmoveFunc {@link module:Template/TemplateMod.TemplateMod#dragmoveFunc}
 * @property {Function} dragstartFunc {@link module:Template/TemplateMod.TemplateMod#dragstartFunc}
 * @property {Function} exportFieldData {@link module:Template/TemplateMod.TemplateMod#exportFieldData}
 * @property {Function} fieldDeleteBtnClicked {@link module:Template/TemplateMod.TemplateMod#fieldDeleteBtnClicked}
 * @property {Function} fieldFtEvent {@link module:Template/TemplateMod.TemplateMod#fieldFtEvent}
 * @property {Function} fieldRepositioning {@link module:Template/TemplateMod.TemplateMod#fieldRepositioning}
 * @property {Function} generateFieldId {@link module:Template/TemplateMod.TemplateMod#generateFieldId}
 * @property {Function} getCreateFieldDefaultWidth {@link module:Template/TemplateMod.TemplateMod#getCreateFieldDefaultWidth}
 * @property {Function} getDvTextValue {@link module:Template/TemplateMod.TemplateMod#getDvTextValue}
 * @property {Function} getFieldFromJson {@link module:Template/TemplateMod.TemplateMod#getFieldFromJson}
 * @property {Function} getFieldIdFromGroupNode {@link module:Template/TemplateMod.TemplateMod#getFieldIdFromGroupNode}
 * @property {Function} getFieldJsonData {@link module:Template/TemplateMod.TemplateMod#getFieldJsonData}
 * @property {Function} getFieldSize {@link module:Template/TemplateMod.TemplateMod#getFieldSize}
 * @property {Function} getPageBorderWidth {@link module:Template/TemplateMod.TemplateMod#getPageBorderWidth}
 * @property {Function} getPageBoundingClientRect {@link module:Template/TemplateMod.TemplateMod#getPageBoundingClientRect}
 * @property {Function} getPageElement {@link module:Template/TemplateMod.TemplateMod#getPageElement}
 * @property {Function} getPdfPageFromSvgPos {@link module:Template/TemplateMod.TemplateMod#getPdfPageFromSvgPos}
 * @property {Function} hideAllResizeHandles {@link module:Template/TemplateMod.TemplateMod#hideAllResizeHandles}
 * @property {Function} hideFieldAttribute {@link module:Template/TemplateMod.TemplateMod#hideFieldAttribute}
 * @property {Function} hideTemplateLayer {@link module:Template/TemplateMod.TemplateMod#hideTemplateLayer}
 * @property {Function} importFieldData {@link module:Template/TemplateMod.TemplateMod#importFieldData}
 * @property {Function} keycheck {@link module:Template/TemplateMod.TemplateMod#keycheck}
 * @property {Function} redoAction {@link module:Template/TemplateMod.TemplateMod#redoAction}
 * @property {Function} refreshformerList {@link module:Template/TemplateMod.TemplateMod#refreshformerList}
 * @property {Function} removeDragGroupField {@link module:Template/TemplateMod.TemplateMod#removeDragGroupField}
 * @property {Function} removeDragOverGroup {@link module:Template/TemplateMod.TemplateMod#removeDragOverGroup}
 * @property {Function} removeField {@link module:Template/TemplateMod.TemplateMod#removeField}
 * @property {Function} removeSelectedField {@link module:Template/TemplateMod.TemplateMod#removeSelectedField}
 * @property {Function} removeTemplateRect {@link module:Template/TemplateMod.TemplateMod#removeTemplateRect}
 * @property {Function} replaceFieldData {@link module:Template/TemplateMod.TemplateMod#replaceFieldData}
 * @property {Function} replaceFieldStringData {@link module:Template/TemplateMod.TemplateMod#replaceFieldStringData}
 * @property {Function} resetTool {@link module:Template/TemplateMod.TemplateMod#resetTool}
 * @property {Function} selectTool {@link module:Template/TemplateMod.TemplateMod#selectTool}
 * @property {Function} selectUserList {@link module:Template/TemplateMod.TemplateMod#selectUserList}
 * @property {Function} showAsteriskDiv {@link module:Template/TemplateMod.TemplateMod#showAsteriskDiv}
 * @property {Function} showFieldAttribute {@link module:Template/TemplateMod.TemplateMod#showFieldAttribute}
 * @property {Function} showFieldListAttribute {@link module:Template/TemplateMod.TemplateMod#showFieldListAttribute}
 * @property {Function} sortFieldsAlign {@link module:Template/TemplateMod.TemplateMod#sortFieldsAlign}
 * @property {Function} sortFieldsBottomAlign {@link module:Template/TemplateMod.TemplateMod#sortFieldsBottomAlign}
 * @property {Function} sortFieldsHCenterAlign {@link module:Template/TemplateMod.TemplateMod#sortFieldsHCenterAlign}
 * @property {Function} sortFieldsHRegularIntervalAlign {@link module:Template/TemplateMod.TemplateMod#sortFieldsHRegularIntervalAlign}
 * @property {Function} sortFieldsLeftAlign {@link module:Template/TemplateMod.TemplateMod#sortFieldsLeftAlign}
 * @property {Function} sortFieldsRightAlign {@link module:Template/TemplateMod.TemplateMod#sortFieldsRightAlign}
 * @property {Function} sortFieldsTopAlign {@link module:Template/TemplateMod.TemplateMod#sortFieldsTopAlign}
 * @property {Function} sortFieldsVCenterAlign {@link module:Template/TemplateMod.TemplateMod#sortFieldsVCenterAlign}
 * @property {Function} sortFieldsVRegularIntervalAlign {@link module:Template/TemplateMod.TemplateMod#sortFieldsVRegularIntervalAlign}
 * @property {Function} templateInit {@link module:Template/TemplateMod.TemplateMod#templateInit}
 * @property {Function} templateMouseMoveEvent {@link module:Template/TemplateMod.TemplateMod#templateMouseMoveEvent}
 * @property {Function} templateMouseUpEvent {@link module:Template/TemplateMod.TemplateMod#templateMouseUpEvent}
 * @property {Function} templateResize {@link module:Template/TemplateMod.TemplateMod#templateResize}
 * @property {Function} tmpGroupFtEvent {@link module:Template/TemplateMod.TemplateMod#tmpGroupFtEvent}
 * @property {Function} undoAction {@link module:Template/TemplateMod.TemplateMod#undoAction}
 * @property {Function} updateFieldPoint {@link module:Template/TemplateMod.TemplateMod#updateFieldPoint}
 * @property {Function} appendFontFamily {@link module:Template/TemplateMod.TemplateMod#appendFontFamily}
 * @property {Function} appendSignTabShowOpt {@link module:Template/TemplateMod.TemplateMod#appendSignTabShowOpt}
 * 
 * @FileName TemplateMod.js
 * @since 2021.05.31
 */
class TemplateMod {
  /**
   * @type {Boolean}
   * @name module:Template/TemplateMod.TemplateMod#dragStart
   * @description  SVG화면에서 드래그가 시작되었는지 여부
   */
  dragStart = false;

  /**
   * @type {Object}
   * @name module:Template/TemplateMod.TemplateMod#dragBox
   * @description  SVG에서 드래그된 것을 표현하는 Rect Node
   */
  dragBox = undefined;

  /**
   * @type {Object}
   * @name module:Template/TemplateMod.TemplateMod#mainCanvas
   * @description  Snap Instance
   */
  mainCanvas;

  /**
   * @type {Rect}
   * @name module:Template/TemplateMod.TemplateMod#pageBoundingBox
   * @description  필드들이 움직일 수 있는 경계
   */
  pageBoundingBox = { x: 0, y: 0, width: 0, height: 0 };

  /**
   * @type {Object}
   * @name module:Template/TemplateMod.TemplateMod#templateRectMousePosition
   * @description 필드를 생성하여 움직 일때 현재 마우스 위치와 기존 마우스 위치를 가지고 있는 변수
   */
  templateRectMousePosition;

  /**
   * @type {String}
   * @name module:Template/TemplateMod.TemplateMod#selectAddFieldType
   * @description 필드를 만들기 위해 선택된 필드의 종류
   */
  selectAddFieldType = "";

  /**
   * @type {Object}
   * @name module:Template/TemplateMod.TemplateMod#fieldDictionary
   * @description 필드들의 정보를 가지고 있는 Dictionary
   */
  fieldDictionary = {};

  /**
   * @type {Number}
   * @name module:Template/TemplateMod.TemplateMod#unredoActionIdx
   * @description 현재 Undo Redo Index
   */
  unredoActionIdx = -1;

  /**
   * @type {Object}
   * @name module:Template/TemplateMod.TemplateMod#unredoActionDict
   * @description Undo Redo의 Action을 가지고 있는 Dictionary
   */
  unredoActionDict = {};

  /**
   * @type {PDFViewer}
   * @name module:Template/TemplateMod.TemplateMod#pdfViewer
   * @description PDF.js 뷰어 오브젝트
   */
  pdfViewer;

  /**
   * @type {Object}
   * @name module:Template/TemplateMod.TemplateMod#templateUserFieldInfo
   * @description 서명자의 정보를 가지고 있는 Dictionary
   */
  templateUserFieldInfo = {};

  /**
   * @type {Element}
   * @name module:Template/TemplateMod.TemplateMod#ownerNode
   * @description 이 프로젝트가 포함될 Element의 부모 HTML ELEMENT
   */
  ownerNode = null;

  /**
   * @type {Boolean}
   * @name module:Template/TemplateMod.TemplateMod#isFieldDragStart
   * @description 현재 필드가 드래그 되고 있는지 여부.
   */
  isFieldDragStart = false;

  /**
   * @type {String}
   * @name module:Template/TemplateMod.TemplateMod#menuCode
   * @description smartsuit에서의 menucode
   */
  menuCode = "";

  templateClipBoard = "";

  useDrawSign = "true";
  useImageSign = "true";
  useRegSign = "true";

  /**
   * @constructor
   * @param {Object} _pdfViewer PDF Viewer Object
   * @param {Element} ownerNode 이 프로젝트가 포함될 Element의 부모 HTML ELEMENT
   *
   */
  constructor(_pdfViewer, ownerNode = null, signTabShowDefOptVal) {
    this.pdfViewer = _pdfViewer;
    _templateMod = this;
    _templateMod.appendSignTabShowOpt(signTabShowDefOptVal);
    this.ownerNode = ownerNode;
  }

  /**
   * @function addUndoRedoAct
   * @name module:Template/TemplateMod.TemplateMod#addUndoRedoAct
   * @description undo redo 처리를 위한 데이터를 추가.
   *
   * @param {String} type   action 종류
   * @param {Object} oldData     이전에 있던 데이터
   * @param {Object} newData     새로운 데이터
   * @Date : 2021. 5. 31
   */
  addUndoRedoAct(type, oldData, newData) {
    if (
      type !== _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.CREATE_FIELD_ACTION &&
      type !== _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.REMOVE_FIELD_ACTION &&
      oldData === newData
    ) {
      return;
    }
    _templateMod.unredoActionDict[++_templateMod.unredoActionIdx] = {
      action: type,
      old: oldData,
      new: newData,
    };
    _templateMod.unredoActionDict[_templateMod.unredoActionIdx + 1] = undefined;
  }

  /**
   * @function buildDVOptsInfo
   * @name module:Template/TemplateMod.TemplateMod#buildDVOptsInfo
   * @description Default Value 리스트 정보를 설정 .
   *
   * @param {Array} dvOptions   Default Value 리스트
   * @Date : 2021. 5. 31
   */
  buildDVOptsInfo(dvOptions) {
    var dvOptionList = [];
    for (var idx = 0; idx < dvOptions.length; ++idx) {
      dvOptionList.push({
        text: dvOptions[idx].displayText,
        value: dvOptions[idx].variable,
      });
    }
    _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.setDVFieldOptsList(dvOptionList);
  }

    /**
   * @function buildSignTabShowOpt
   * @name module:Template/TemplateMod.TemplateMod#buildSignTabShowOpt
   * @description Default Value 리스트 정보를 설정 .
   *
   * @param {Object} Options   Default Value 리스트
   * @Date : 2023. 12. 27
   */
    buildSignTabShowOpt(Options) {
      //var OptionList = {};
      
      _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.setSignTabShowOpt(Options);
    }

  /**
   * @function buildFieldUserInfo
   * @name module:Template/TemplateMod.TemplateMod#buildFieldUserInfo
   * @description 서명할 사람들 리스트 정보를 설정 .
   *
   * @param {Array} dvOptions   서명할 사람들 정보 리스트
   * @Date : 2021. 5. 31
   */
  buildFieldUserInfo(userList) {
    for (var idx = 0; idx < userList.length; ++idx) {
      let fieldUserInfo = Object.assign(
        new _templateUserFieldInfo_js__WEBPACK_IMPORTED_MODULE_18__.TemplateUserFieldInfo(),
        userList[idx]
      );
      _templateMod.templateUserFieldInfo[fieldUserInfo.userUUID] =
        fieldUserInfo;
    }
    _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.setUserInfoOptsList(
      _templateMod.convertUserListToSelectOptions(
        _templateMod.templateUserFieldInfo
      )
    );
    _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.setUserInfoOptsListCount(
      Object.keys(_templateMod.templateUserFieldInfo).length
    );
  }

  /**
   * @function buildFieldformerList
   * @name module:Template/TemplateMod.TemplateMod#buildFieldformerList
   * @description 사이드 패널에 있는 서명자 정보를 갱신 .
   *
   * @Date : 2021. 5. 31
   */
  buildFieldformerList() {
    const ownerDom = _templateMod.ownerNode.querySelector(
      " #Editor-User-Component_Box"
    );
    _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.removeAllChildNode(ownerDom);
    const keys = Object.keys(_templateMod.templateUserFieldInfo);
    keys.forEach(function (key) {
      const userFieldInfo = _templateMod.templateUserFieldInfo[key];
      if (userFieldInfo.isFormer === "Y") {
        return;
      }
      let fieldListDom = document.createElement("div");
      fieldListDom.setAttribute("data-user-key", key);
      fieldListDom.classList.add("User-Component-List-Conatiner");
      const fieldKeys = Object.keys(userFieldInfo.fields);
      if (fieldKeys.length === 0) {
        fieldListDom.classList.add("No-Child");
      }
      let listDom = document.createElement("ul");
      listDom.className = "User-Component-List";
      let listItemDom = document.createElement("li");
      let listItemSpanDom = document.createElement("span");
      listItemSpanDom.textContent = userFieldInfo.displayUserName;
      listItemDom.appendChild(listItemSpanDom);
      listDom.appendChild(listItemDom);
      fieldKeys.forEach(function (fieldKey) {
        const userField = userFieldInfo.field(fieldKey);
        if (userField.isRemoved) {
          return;
        }
        let listItemDom2 = document.createElement("li");
        let listItemSpanDom2 = document.createElement("span");
        let prefix =
          userField.required === "true"
            ? "[" + _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.translateForKey("Template.requireText") + "]"
            : "[" + _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.translateForKey("Template.selectText") + "]";
        if (userField.type === "SignField") {
          listItemSpanDom2.textContent =
            "[" + _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.translateForKey("Template.signText") + "]";
        }
        listItemSpanDom2.textContent = prefix + userField.fieldId;

        listItemDom2.appendChild(listItemSpanDom2);
        listDom.appendChild(listItemDom2);
      });
      fieldListDom.appendChild(listDom);
      ownerDom.appendChild(fieldListDom);
    });
  }

  /**
   * @function calcFieldPostion
   * @name module:Template/TemplateMod.TemplateMod#calcFieldPostion
   * @description Field의 위치(HTML에서)를 계산한다.
   *
   * @param {Object} field   BaseField를 상속받은 Object
   * @param {Boolean} isImport
   * Field를 Import중일 경우에 필드 위치를 계산할 때 Page Element의 보더도 함께 계산한다.
   * @return {Object} Rect  { x: , y: , width: , height:  }
   * @Date : 2021. 5. 31
   */
  calcFieldPostion(field, isImport = false) {
    var viewBBox = _templateMod.ownerNode
      .querySelector(" #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_PDF_VIEWER)
      .getBoundingClientRect();
    const fieldPageNo = field.pageNo;
    const viewport = _templateMod.pdfViewer._pages[fieldPageNo - 1].viewport;
    var viewportXY = viewport.convertToViewportPoint(field.pdfX, field.pdfY);
    var viewportXY2 = viewport.convertToViewportPoint(field.pdfX2, field.pdfY2);

    var pageOffSet = _templateMod.computePageOffset(fieldPageNo);

    var newX = viewportXY[0] + pageOffSet.left - viewBBox.left;
    var newY = viewportXY[1] + pageOffSet.top - viewBBox.top;
    var newX2 = viewportXY2[0] + pageOffSet.left - viewBBox.left;
    var newY2 = viewportXY2[1] + pageOffSet.top - viewBBox.top;

    if (isImport) {
      var pageBorderWidth = _templateMod.getPageBorderWidth(fieldPageNo);
      newX = newX + pageBorderWidth.left;
      newY = newY + pageBorderWidth.top;
      newX2 = newX2 + pageBorderWidth.left;
      newY2 = newY2 + pageBorderWidth.top;
    }

    var newW = Math.abs(newX2 - newX);
    var newH = Math.abs(newY2 - newY);

    field.x = newX;
    field.y = newY;
    field.width = newW;
    field.height = newH;
    return { x: newX, y: newY, width: newW, height: newH };
  }

  /**
   * @function calcTemplateBoundary
   * @name module:Template/TemplateMod.TemplateMod#calcTemplateBoundary
   * @description 필드들이 움직일 수 있는 경계를 계산한다.
   *
   * @param {Number} objectWidth  가로길이
   * @param {Number} objectHeight  세로 길이
   * @Date : 2021. 5. 31
   */
  calcTemplateBoundary(objectWidth, objectHeight) {
    const viewer1 = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_PDF_VIEWER
    );
    const viewerBoundingRect = viewer1.getBoundingClientRect();
    var pgRect = _templateMod.getPageBoundingClientRect();
    _templateMod.pageBoundingBox.x =
      pgRect.x + objectWidth / 2 - viewerBoundingRect.left;
    _templateMod.pageBoundingBox.y =
      pgRect.y + objectHeight / 2 - viewerBoundingRect.top;
    _templateMod.pageBoundingBox.width = pgRect.width - objectWidth;
  }

  /**
   * @function changeFieldPosition
   * @name module:Template/TemplateMod.TemplateMod#changeFieldPosition
   * @description Field의 변경된 위치를 설정한다.
   *
   * @param {Object} field   BaseField를 상속받은 Object
   * @param {Matrix} newMatrix    위치정보를 계산할때 쓰일 메트릭스 기본값 undeinfed
   * @param {Boolean} donotUndoRedo     undo redo데이터를 생성하는지 여부 기본값 false
   * @Date : 2021. 5. 31
   */
  changeFieldPosition(field, newMatrix = undefined, donotUndoRedo = false) {
    let childRect = field.select("rect");
    let fieldGlobalMatrix = newMatrix;
    if (fieldGlobalMatrix === undefined) {
      fieldGlobalMatrix = field.transform().globalMatrix;
    }
    let childRectBBox = childRect.getBBox();
    const x1 = fieldGlobalMatrix.x(childRectBBox.x, childRectBBox.y);
    const y1 = fieldGlobalMatrix.y(childRectBBox.x, childRectBBox.y);
    const x2 = fieldGlobalMatrix.x(childRectBBox.x2, childRectBBox.y2);
    const y2 = fieldGlobalMatrix.y(childRectBBox.x2, childRectBBox.y2);
    const width = Math.abs(x2 - x1);
    const height = Math.abs(y2 - y1);
    childRect.attr({ x: x1, y: y1, width: width, height: height });
    var childSvg = field.select("svg");
    childSvg.attr({ x: x1, y: y1, width: width, height: height });
    field.transform(Snap.matrix().toTransformString());
    var oldData = _templateMod.getFieldJsonData(childRect.attr("id"));
    const isUpdated = _templateMod.updateFieldPoint(field);
    if (isUpdated === false) {
      return;
    }
    _templateMod.changeFreeTransform(field, width, height);
    if (!donotUndoRedo) {
      var newData = _templateMod.getFieldJsonData(childRect.attr("id"));
      _templateMod.addUndoRedoAct(
        _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.FIELD_ATTR_CHANGE_ACTION,
        oldData,
        newData
      );
    }
  }

  /**
   * @function changeFieldValueEvent
   * @name module:Template/TemplateMod.TemplateMod#changeFieldValueEvent
   * @description 필드의 속성 값이 변경 되었을 때 속성의 종류에 따라 처리하기 위한 메소드.
   *
   * @param {Object} event  event Object
   * @Date : 2021. 5. 31
   */
  changeFieldValueEvent(event) {
    const targetNode = event.target;
    const fieldId = targetNode.getAttribute("data-field-id");
    const fieldPropetyName = targetNode.getAttribute(
      "data-field-property-name"
    );
    var oldDataArr = [];
    var newDataArr = [];
    var ownerId = "";

    fieldId.split(",").forEach((idVal) => {
      var fieldGroup = _templateMod.mainCanvas.select("#" + idVal + "Group");
      if (fieldGroup === null || fieldGroup === undefined) {
        return;
      }
      var field = _templateMod.fieldDictionary[idVal];
      if (!field.validateValue(fieldPropetyName, targetNode.value)) {
        console.log("not validate");
        return;
      }
      const oldData = _templateMod.getFieldJsonData(idVal);
      oldDataArr.push(oldData);
      _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.assign(field, "m_" + fieldPropetyName, targetNode.value);
      if (_Fields_TextBaseField_js__WEBPACK_IMPORTED_MODULE_8__.TextBaseField.needTextSvgRefresh(fieldPropetyName)) {
        if (fieldPropetyName === "defaultValue" && field.type === "TextField") {
          let dvText = _templateMod.getDvTextValue(targetNode.value);
          field.defaultValueText = dvText;
        } else if (
          fieldPropetyName === "defaultValue" &&
          field.type === "ComboboxField"
        ) {
          let dvText = targetNode.value;
          field.defaultValueText = dvText;
        }
        var curScale = _templateMod.pdfViewer.currentScale;
        field.changeTextElement(fieldGroup, curScale);
      }
      if (fieldPropetyName === "ownerId") {
        _templateMod.refreshformerList(field);
      }
      if (fieldPropetyName === "fieldMinValue") {
        field.m_inputMin = Number(targetNode.value);
      }
      if (fieldPropetyName === "fieldMaxValue") {
        field.m_inputMax = Number(targetNode.value);
      }
      if (fieldPropetyName === "useCalc") {
        field.m_useCalc = targetNode.value;
      }
      if (fieldPropetyName === "useDrawSign") {
        field.m_useDrawSign = targetNode.value;
        _templateMod.validateSignOptions(targetNode, fieldId, fieldPropetyName);
        field.m_useDrawSign = targetNode.value;
      }
      if (fieldPropetyName === "useImageSign") {
        field.m_useImageSign = targetNode.value;
        _templateMod.validateSignOptions(targetNode, fieldId, fieldPropetyName);
        field.m_useImageSign = targetNode.value;
      }
      if (fieldPropetyName === "useRegSign") {
        field.m_useRegSign = targetNode.value;
        _templateMod.validateSignOptions(targetNode, fieldId, fieldPropetyName);
        field.m_useRegSign = targetNode.value;
      }
      if (fieldPropetyName === "required") {
        _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.showAsteriskDiv(
          _templateMod.ownerNode,
          idVal,
          targetNode.value === "true" ? true : false
        );
      }
      const newData = _templateMod.getFieldJsonData(idVal);
      newDataArr.push(newData);
      ownerId = field.ownerId;
    });
    if (oldDataArr.length === 0 || newDataArr === 0) {
      return;
    }
    if (
      fieldPropetyName === "ownerId" ||
      fieldPropetyName === "fieldId" ||
      fieldPropetyName === "required"
    ) {
      _templateMod.buildFieldformerList();
      _templateMod.selectUserList(ownerId);
    }
    let actionName = _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.GROUP_ATTR_CHANGE_ACTION;
    if (fieldPropetyName === "ownerId") {
      actionName = _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.GROUP_ATTR_OWNER_CHANGE_ACTION;
    }
    _templateMod.addUndoRedoAct(actionName, oldDataArr, newDataArr);
  }

  //병욱 추가
  validateSignOptions(targetNode, fieldId, fieldPropetyName) {
    const signField = document.querySelector(".Sign-Field");
    const useDrawSignInput = signField.querySelector(
      'input[data-field-property-name="useDrawSign"]'
    );
    const useImageSignInput = signField.querySelector(
      'input[data-field-property-name="useImageSign"]'
    );
    const useRegSignInput = signField.querySelector(
      'input[data-field-property-name="useRegSign"]'
    );

    let useDrawSign = useDrawSignInput && useDrawSignInput.value === "true" ? true : false;
    let useImageSign = useImageSignInput && useImageSignInput.value === "true" ? true : false;
    let useRegSign = useRegSignInput && useRegSignInput.value === "true" ? true : false;

    if (!useDrawSign && !useImageSign && !useRegSign) {
      console.log("targetNode.checked:" + targetNode.checked + "\n");
      console.log("targetNode.value:" + targetNode.value + "\n");
      console.log("useDrawSignInput.value:" + useDrawSignInput.value + "\n");
      targetNode.checked = true;
      targetNode.value = "true";
      //alert('적어도 하나의 서명 옵션을 활성화해야 합니다.');

      // 부모 요소를 찾고,
      let parentDiv = targetNode.parentElement;
      // 부모 요소 내에서 체크박스를 찾습니다.
      let checkboxInput = parentDiv.querySelector('input[type="checkbox"]');
      checkboxInput.checked = true;

      return true;
    }
  }

  /**
   * @function changeFreeTransform
   * @name module:Template/TemplateMod.TemplateMod#changeFreeTransform
   * @description 필드의 크기 및 위치를 변경하는 FreeTransform을 새로 변경한다.
   *
   * @param {Object} fieldGroup   SVG의 group 오브젝트
   * @param {Number} width     필드의 가로 길이
   * @param {Number} height    필드의 세로 길이
   * @Date : 2021. 5. 31
   */
  changeFreeTransform(fieldGroup, width, height) {
    if (fieldGroup.parent().attr("id") === _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME) {
      return;
    }
    let hasHideClass = false;
    if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(fieldGroup.freeTransform)) {
      hasHideClass = !fieldGroup.freeTransform.isShowResizeHandler();
      fieldGroup.freeTransform.unplug();
    }
    _templateMod.calcTemplateBoundary(width, height);
    // const startTime = performance.now();
    let ft = _templateMod.mainCanvas.freeTransform(
      fieldGroup,
      {
        snap: { rotate: 1 },
        attrs: { stroke: "#9d6859" },
        subjectBBox: fieldGroup.select("rect").getBBox(true),
        size: 4,
        draw: "bbox",
        boundary: _templateMod.pageBoundingBox,
      },
      function (ft2, events) {
        _templateMod.fieldFtEvent(events[0], fieldGroup);
      }
    );
    ft.setOpts({ rotate: false });
    if (hasHideClass) {
      fieldGroup.freeTransform.hideResizeHandler();
    }
  }

  /**
   * @function changeGroupBoxFreeTransform
   * @name module:Template/TemplateMod.TemplateMod#changeGroupBoxFreeTransform
   * @description필드 그룹박스 크기 및 위치를 변경하는 FreeTransform을 새로 변경한다.
   *
   * @param {Object} tempGroupBox  SVG의 group 오브젝트
   * @Date : 2021. 5. 31
   */
  changeGroupBoxFreeTransform(tempGroupBox) {
    if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(tempGroupBox.freeTransform)) {
      tempGroupBox.freeTransform.unplug();
    }
    _templateMod.calcTemplateBoundary(
      tempGroupBox.getBBox().width,
      tempGroupBox.getBBox().height
    );
    var tempGFt = _templateMod.mainCanvas.freeTransform(
      tempGroupBox,
      {
        snap: { rotate: 1 },
        size: 4,
        draw: "bbox",
        boundary: _templateMod.pageBoundingBox,
      },
      function (ft, events) {
        //console.log(events);
        _templateMod.tmpGroupFtEvent(events[0]);
      }
    );
    tempGFt.setOpts({ rotate: false, scale: false });
  }

  /**
   * @function checkTemplateFieldData
   * @name module:Template/TemplateMod.TemplateMod#checkTemplateFieldData
   * @description
   * Label이나 Combobox의 경우 안에 값을 셋팅하지 않으면 서명모드에서
   * 필수 값 체크 여부를 통과하지 못하기 때문에 템플릿 에디트에서 해당 값들이
   * 들어 있는지 체크한다.
   *
   * @return {Boolean}
   * @Date : 2021. 6. 18
   */
  checkTemplateFieldData() {
    const keys = Object.keys(_templateMod.templateUserFieldInfo);
    for (let usrKeyIdx = 0; usrKeyIdx < keys.length; ++usrKeyIdx) {
      const userInfo = _templateMod.templateUserFieldInfo[keys[usrKeyIdx]];
      for (
        var pageNo = 0;
        pageNo < _templateMod.pdfViewer.pagesCount;
        ++pageNo
      ) {
        const fieldKeys = Object.keys(_templateMod.fieldDictionary);
        for (let keyIdx = 0; keyIdx < fieldKeys.length; ++keyIdx) {
          const field = _templateMod.fieldDictionary[fieldKeys[keyIdx]];
          if (field.isRemoved) {
            continue;
          }
          if (field.type === "LabelField") {
            if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(field.value)) {
              let svgRect = _templateMod.mainCanvas.select(
                "#" + field.id + "Group > rect"
              );
              _templateMod.showFieldAttribute(field.id);
              let viewerContainer = _templateMod.ownerNode.querySelector(
                " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_PDF_VIEWER_CONTAINER
              );
              viewerContainer.scrollTop = svgRect.attr("y");
              return false;
            }
          } else if (field.type === "ComboboxField") {
            if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(field.comboboxList)) {
              let svgRect = _templateMod.mainCanvas.select(
                "#" + field.id + "Group > rect"
              );
              _templateMod.showFieldAttribute(field.id);
              let viewerContainer = _templateMod.ownerNode.querySelector(
                " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_PDF_VIEWER_CONTAINER
              );
              viewerContainer.scrollTop = svgRect.attr("y");
              return false;
            }
          }
        }
      }
    }

    return true;
  }

  /**
   * @function clearSelectedTool
   * @name module:Template/TemplateMod.TemplateMod#clearSelectedTool
   * @description 사이드 탭에 선탠된 모드를 초기화한다.
   *
   * @Date : 2021. 5. 31
   */
  clearSelectedTool() {
    let toolElement = _templateMod.ownerNode.querySelectorAll(
      "." + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.EDITOR_COMPONENT_CLASS + " ul li"
    );
    for (let index = 0; index < toolElement.length; index++) {
      if (toolElement[index].classList.contains("selected")) {
        toolElement[index].classList.toggle("selected");
      }
    }
  }

  /**
   * @function computePageOffset
   * @name module:Template/TemplateMod.TemplateMod#computePageOffset
   * @description사이드  페이지의 Offset을 계산한다..
   *
   * @param {Number} pageNo  페이지 번호
   * @return  {Object} { left: , top:  }
   * @Date : 2021. 5. 31
   */
  computePageOffset(pageNo) {
    let pgNode = _templateMod.getPageElement(pageNo);
    var rect = pgNode.getBoundingClientRect(),
      bodyElt = document.body;
    return {
      top: rect.top + bodyElt.scrollTop,
      left: rect.left + bodyElt.scrollLeft,
    };
  }

  /**
   * @function convertUserListToSelectOptions
   * @name module:Template/TemplateMod.TemplateMod#convertUserListToSelectOptions
   * @description 사이드 서명자 리스트를 필드 속성에서 사용하기 위해 여기서 사용할 포멧으로 변환한다. .
   *
   * @return {Array} [{ text: , value:  }...]
   * @Date : 2021. 5. 31
   */
  convertUserListToSelectOptions() {
    let optionList = [];

    const keys = Object.keys(_templateMod.templateUserFieldInfo);
    keys.forEach(function (key) {
      const usrInfo = _templateMod.templateUserFieldInfo[key];
      if (
        usrInfo.isFormer !== null &&
        usrInfo.isFormer !== undefined &&
        usrInfo.isFormer === "Y"
      ) {
        return;
      }
      optionList.push({
        text: usrInfo.displayUserName,
        value: usrInfo.userUUID,
      });
    });

    return optionList;
  }

  copyObject() {
    _templateMod.templateClipBoard = "";
    const selectedNode = _templateMod.ownerNode.querySelector(
      " ." + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.EDITOR_ATTR_CLASS
    );
    if (selectedNode === null) {
      return;
    }
    const attrPanelNode = selectedNode.querySelector(
      "." + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.EDITOR_ATTR_PANEL_CLASS
    );
    if (attrPanelNode === null) {
      return;
    }
    const idListAttr = attrPanelNode.getAttribute("Field-id-list");
    _templateMod.templateClipBoard = idListAttr;
  }

  /**
   * @function createDragOverGroup
   * @name module:Template/TemplateMod.TemplateMod#createDragOverGroup
   * @description 사이드 드래그 된 곳의 Object들을 svg 그룹으로 묶는다.
   *
   * @param {Object} border Snap의 bounding box
   * @Date : 2021. 5. 31
   */
  createDragOverGroup(border) {
    _templateMod.hideFieldAttribute();
    var tempGNew = _templateMod.mainCanvas.group();
    tempGNew.attr({ id: _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME });
    var items = _templateMod.mainCanvas.selectAll(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MAIN_GROUP_NAME + " > g"
    );
    var selectItemArray = [];
    items.forEach(function (el) {
      var mybounds = el.getBBox();
      if (Snap.path.isBBoxIntersect(mybounds, border)) {
        selectItemArray.push(el);
      }
      if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(el.freeTransform)) {
        el.freeTransform.hideResizeHandler();
      }
    });
    if (selectItemArray.length == 1) {
      if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(selectItemArray[0].freeTransform)) {
        selectItemArray[0].freeTransform.unplug();
      }
      let bbox = selectItemArray[0].getBBox();
      _templateMod.changeFreeTransform(
        selectItemArray[0],
        bbox.width,
        bbox.height
      );
      const childRect = selectItemArray[0].select("rect");
      _templateMod.showFieldAttribute(childRect.attr("id"));
      tempGNew.remove();
      return;
    }
    if (selectItemArray.length < 1) {
      tempGNew.remove();
      _templateMod.hideFieldAttribute();
      return;
    }
    var fieldList = [];
    selectItemArray.forEach(function (el) {
      if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(el.freeTransform)) {
        el.freeTransform.unplug();
      }

      const childRect = el.select("rect");
      fieldList.push(_templateMod.fieldDictionary[childRect.attr("id")]);
      tempGNew.append(el);
    });
    _templateMod.showFieldListAttribute(fieldList);
    if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(tempGNew.freeTransform)) {
      tempGNew.freeTransform.unplug();
    }
    _templateMod.calcTemplateBoundary(
      tempGNew.getBBox().width,
      tempGNew.getBBox().height
    );
    var tempGFt = _templateMod.mainCanvas.freeTransform(
      tempGNew,
      {
        snap: { rotate: 1 },
        size: 4,
        draw: "bbox",
        boundary: _templateMod.pageBoundingBox,
      },
      function (ft, events) {
        _templateMod.tmpGroupFtEvent(events[0]);
      }
    );
    tempGFt.setOpts({ rotate: false, scale: false });
  }

  /**
   * @function createField
   * @name module:Template/TemplateMod.TemplateMod#createField
   * @description 사이드 필드를 생성한다.
   *
   * @param {String} type  필드의 타입
   * @param {Number} mousePageX   마우스의 x좌표
   * @param {Number } mousePageY   마우스의 y좌표
   * @return {Object} fieldGroup SVG의 Group Object
   * @Date : 2021. 5. 31
   */
  createField(type, mousePageX, mousePageY) {
    var mainGroup = _templateMod.mainCanvas.select(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MAIN_GROUP_NAME
    );

    const viewer1 = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_PDF_VIEWER
    );
    const viewerBoundingRect = viewer1.getBoundingClientRect();
    const m1 = _templateMod.mainCanvas.transform().diffMatrix.invert();
    const fieldX = m1.x(
      mousePageX - viewerBoundingRect.left,
      mousePageY - viewerBoundingRect.top
    );
    const fieldY = m1.y(
      mousePageX - viewerBoundingRect.left,
      mousePageY - viewerBoundingRect.top
    );
    let field = _templateMod.createFieldObject(
      type,
      fieldX,
      fieldY,
      _templateMod.getPdfPageFromSvgPos(fieldX, fieldY)
    );
    _templateMod.selectAddFieldType = "";
    let ost = _templateMod.computePageOffset();
    let pageBorderWidth = _templateMod.getPageBorderWidth(field.pageNo);

    let x = mousePageX - ost.left - pageBorderWidth.left;
    let y = mousePageY - ost.top - pageBorderWidth.top;
    let fieldGroup = field.getSVGFieldObject(
      _templateMod.mainCanvas,
      mainGroup,
      _templateMod.pdfViewer.currentScale,
      _templateMod.ownerNode,
      _templateMod.removeDragOverGroup,
      _templateMod.changeFieldValueEvent,
      _templateMod.changeFreeTransform
    );
    var groupBBox = fieldGroup.getBBox();
    const viewport = _templateMod.pdfViewer._pages[field.pageNo - 1].viewport;
    let pdfPoision = viewport.convertToPdfPoint(x, y);
    let pdfPoision2 = viewport.convertToPdfPoint(
      x + groupBBox.width,
      y + groupBBox.height
    );
    field.pdfX = pdfPoision[0];
    field.pdfY = pdfPoision[1];
    field.pdfX2 = pdfPoision2[0];
    field.pdfY2 = pdfPoision2[1];
    _templateMod.fieldDictionary[field.id] = field;
    if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsListCount() === 1) {
      const keys = Object.keys(_templateMod.templateUserFieldInfo);
      field.m_ownerId = _templateMod.templateUserFieldInfo[keys[0]].userUUID;
      _templateMod.refreshformerList(field);
      _templateMod.buildFieldformerList();
    }

    _templateMod.changeFreeTransform(fieldGroup, field.width, field.height);
    _templateMod.showAsteriskDiv(
      field.id,
      field.required === "true",
      field.x,
      field.y,
      field.height
    );
    var jsonData = JSON.stringify(field);
    _templateMod.addUndoRedoAct(
      _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.CREATE_FIELD_ACTION,
      jsonData,
      jsonData
    );
    return fieldGroup;
  }

  /**
   * @function createFieldObject
   * @name module:Template/TemplateMod.TemplateMod#createFieldObject
   * @description 사이드 Filed Object의 인스턴스를 생성한다.
   *
   * @param {String} type 필드의 타입
   * @param {Number} x     x좌표
   * @param {Number} y     y좌표
   * @return {Object} Field Object
   * @Date : 2021. 5. 31
   */
  createFieldObject(type, x, y, pageNum = undefined) {
    let fieldId = _templateMod.generateFieldId(type);
    let pageNo = pageNum;
    if (pageNum === undefined) {
      pageNo = _templateMod.pdfViewer.currentPageNumber;
    }
    console.log(pageNo);
    switch (type) {
      case "TextField": {
        let textField = new _Fields_TextField__WEBPACK_IMPORTED_MODULE_4__.TextField(fieldId, pageNo, x, y);
        return textField;
      }
      case "LabelField": {
        let labelField = new _Fields_LabelField_js__WEBPACK_IMPORTED_MODULE_13__.LabelField(fieldId, pageNo, x, y);
        return labelField;
      }
      case "SignField": {
        let signField = new _Fields_SignField__WEBPACK_IMPORTED_MODULE_7__.SignField(
          fieldId,
          pageNo,
          x,
          y,
          _templateMod.useDrawSign,
          _templateMod.useImageSign,
          _templateMod.useRegSign
        );
        
        return signField;
      }
      case "NumberField": {
        let numberField = new _Fields_NumberField__WEBPACK_IMPORTED_MODULE_5__.NumberField(fieldId, pageNo, x, y);
        return numberField;
      }
      case "DateField": {
        let dateField = new _Fields_DateField__WEBPACK_IMPORTED_MODULE_6__.DateField(fieldId, pageNo, x, y);
        return dateField;
      }
      case "ImageField": {
        let imageField = new _Fields_ImageField_js__WEBPACK_IMPORTED_MODULE_9__.ImageField(fieldId, pageNo, x, y);
        return imageField;
      }
      case "MultiLineTextField": {
        let multilineTextField = new _Fields_MultiLineTextField_js__WEBPACK_IMPORTED_MODULE_10__.MultiLineTextField(fieldId, pageNo, x, y);
        return multilineTextField;
      }
      case "CheckboxField": {
        let checkboxField = new _Fields_CheckboxField_js__WEBPACK_IMPORTED_MODULE_11__.CheckboxField(fieldId, pageNo, x, y);
        return checkboxField;
      }
      case "RadioField": {
        let radioField = new _Fields_RadioField_js__WEBPACK_IMPORTED_MODULE_12__.RadioField(fieldId, pageNo, x, y);
        return radioField;
      }
      case "ComboboxField": {
        let comboboxField = new _Fields_ComboboxField_js__WEBPACK_IMPORTED_MODULE_14__.ComboboxField(fieldId, pageNo, x, y);
        return comboboxField;
      }
      default: {
        return null;
      }
    }
  }

  /**
   * @function createTemplateRect
   * @name module:Template/TemplateMod.TemplateMod#createTemplateRect
   * @description PDF위에 올라가는 Template 레이어에 필드를 만들기위해 임시 Div를 만든다.
   *
   * @Date : 2021. 5. 31
   */
  createTemplateRect() {
    var templateLayer = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_NAME
    );
    templateLayer.style.display = "block";
    let templateRect = document.createElement("div");
    templateRect.id = _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_RECT_NAME;
    templateRect.style.position = "absolute";
    templateRect.style.left = "0px";
    templateRect.style.top = "0px";
    var size = _templateMod.getFieldSize(_templateMod.selectAddFieldType);
    var curScale = _templateMod.pdfViewer.currentScale;
    templateRect.style.width = size.w * curScale + "px";
    templateRect.style.height = size.h * curScale + "px";
    templateRect.style.background = "none";
    templateRect.style.border = "1px solid red";
    _templateMod.ownerNode
      .querySelector(" #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_NAME)
      .appendChild(templateRect);

    templateLayer.addEventListener(
      "mousemove",
      _templateMod.templateMouseMoveEvent,
      true
    );
    templateLayer.addEventListener(
      "mouseup",
      _templateMod.templateMouseUpEvent,
      true
    );
  }

  /**
   * @function dragendFunc
   * @name module:Template/TemplateMod.TemplateMod#dragendFunc
   * @description SVG내에서 Drag가 끝났을떄의 후처리를 한다. .
   *
   * @param {Event} event event object
   * @Date : 2021. 5. 31
   */
  dragendFunc(event) {
    event.stopPropagation();
    if (!_templateMod.dragStart) {
      return false;
    }
    var border = _templateMod.dragBox.getBBox();
    _templateMod.dragBox.remove();
    _templateMod.dragStart = false;
    _templateMod.removeDragOverGroup();
    _templateMod.createDragOverGroup(border);
  }

  /**
   * @function dragmoveFunc
   * @name module:Template/TemplateMod.TemplateMod#dragmoveFunc
   * @description SVG내에서 드래그 중일 때 처리를 한다.
   *
   * @param {Number} dx  시작좌표로 부터 x만큼 움직인 크기
   * @param {Number} dy   시작좌표로 부터 y만큼 움직인 크기
   * @param {Number} x   마우스의 x좌표 사용하지 않음
   * @param {Number} y   마우스의 y좌표 사용하지 않음
   * @param {Object} event     Event Object
   * @Date : 2021. 5. 31
   */
  dragmoveFunc(dx, dy, x, y, event) {
    event.stopPropagation();
    if (!_templateMod.dragStart) {
      return false;
    }
    var xoffset = 0,
      yoffset = 0;

    if (dx < 0) {
      xoffset = dx;
      dx = -1 * dx;
    }

    if (dy < 0) {
      yoffset = dy;
      dy = -1 * dy;
    }

    _templateMod.dragBox.transform("T" + xoffset + "," + yoffset);
    _templateMod.dragBox.attr("width", dx);
    _templateMod.dragBox.attr("height", dy);
    _templateMod.dragBox.attr("fill", "none");
  }

  /**
   * @function dragstartFunc
   * @name module:Template/TemplateMod.TemplateMod#dragstartFunc
   * @description SVG내에서 drag를 시작할때 처리하는 메소드
   *
   * @param {Number} x   마우스의 x좌표 사용하지 않음
   * @param {Number} y   마우스의 y좌표 사용하지 않음
   * @param {Object} event     Event Object
   * @Date : 2021. 5. 31
   */
  dragstartFunc(x, y, event) {
    event.stopPropagation();
    //if path or circle were clicked don't draw box
    if (
      !(event.target.nodeName === "svg" || event.target.nodeName === "rect")
    ) {
      if (_templateMod.dragBox) {
        _templateMod.dragBox.remove();
      }
      return false;
    }
    if (event.target.nodeName === "rect") {
      var dragStop = false;
      if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(event.srcElement.id)) {
        var obj1 = _templateMod.mainCanvas
          .select("#" + event.srcElement.id)
          .parent();
        if (obj1) {
          dragStop =
            !_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(obj1.freeTransform) ||
            obj1.parent().attr("id") === _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME;
        }
      }
      if (
        (event.target !== undefined &&
          event.target.classList !== null &&
          event.target.classList !== undefined &&
          event.target.classList.length > 0 &&
          event.target.classList.contains("fthandle")) ||
        dragStop
      ) {
        if (
          _templateMod.dragBox !== undefined &&
          _templateMod.dragBox !== null
        ) {
          _templateMod.dragBox.remove();
        }
        return false;
      }
    }
    _templateMod.dragStart = true;
    var viewer1 = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_PDF_VIEWER
    );
    var br = viewer1.getBoundingClientRect();
    var mainCavnasMatrix = _templateMod.mainCanvas
      .transform()
      .diffMatrix.invert();
    var gragBoxX = mainCavnasMatrix.x(
      event.pageX - br.left,
      event.pageY - br.top
    );
    var gragBoxY = mainCavnasMatrix.y(
      event.pageX - br.left,
      event.pageY - br.top
    );
    _templateMod.dragBox = _templateMod.mainCanvas
      .rect(gragBoxX, gragBoxY, 0, 0)
      .attr("stroke", "black");
  }

  /**
   * @function exportFieldData
   * @name module:Template/TemplateMod.TemplateMod#exportFieldData
   * @description Field정보를 JSON형식으로 리턴하는 메소드
   *
   * @return {String} { formTemplateName: "", pages: [ {data..., fields: []}] }
   * @Date : 2021. 5. 31
   */
  exportFieldData() {
    var templateTitle = _templateMod.ownerNode.querySelector(
      " .Editor-Toolbar-Group.Center > span "
    );
    templateTitle.textContent;
    let templateData = new _templateData_js__WEBPACK_IMPORTED_MODULE_15__.TemplateData(templateTitle.textContent);

    const keys = Object.keys(_templateMod.templateUserFieldInfo);
    keys.forEach(function (key) {
      const userInfo = _templateMod.templateUserFieldInfo[key];
      let templateDataOwner =
        _templateDataOwner_js__WEBPACK_IMPORTED_MODULE_16__.TemplateDataOwner.cloneTemplateDataOwnerObject(userInfo);
      for (
        var pageNo = 0;
        pageNo < _templateMod.pdfViewer.pagesCount;
        ++pageNo
      ) {
        let templateDataPage = new _templateDataPage_js__WEBPACK_IMPORTED_MODULE_17__.TemplateDataPage(pageNo);

        const fieldKeys = Object.keys(_templateMod.fieldDictionary);
        fieldKeys.forEach(function (fieldKey) {
          const field = _templateMod.fieldDictionary[fieldKey];
          if (field.isRemoved) {
            return;
          }
          if (pageNo !== field.pageNo - 1) {
            return;
          }
          if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(field.ownerId) && userInfo.isFormer === "Y") {
            templateDataPage.pushField(field);
            return;
          }
          if (field.ownerId !== key) {
            return;
          }
          templateDataPage.pushField(field);
        });
        templateDataOwner.pushPage(templateDataPage);
      }
      templateData.pushOwner(templateDataOwner);
    });

    return JSON.stringify(templateData);
  }

  /**
   * @function fieldDeleteBtnClicked
   * @name module:Template/TemplateMod.TemplateMod#fieldDeleteBtnClicked
   * @description 필드의 삭제 버튼을 눌렀을때 동작하는 메소드.
   *
   * @param {Object} evt    Event Object
   * @Date : 2021. 5. 31
   */
  fieldDeleteBtnClicked(evt) {
    _templateMod.removeSelectedField();
  }

  /**
   * @function fieldFtEvent
   * @name module:Template/TemplateMod.TemplateMod#fieldFtEvent
   * @description Default Value 리스트정보를 설정 .
   *
   * @param {String} eventName   이벤트 종류
   * @param {Object} field  SVG의 Field Group Object
   * @Date : 2021. 5. 31
   */
  fieldFtEvent(eventName, field) {
    if (eventName === "drag start" || eventName === "apply") {
      //hide attr
      let childRect = field.select("rect");
      let fieldId = childRect.attr("id");
      if (_templateMod.isFieldDragStart === true) {
        _templateMod.hideFieldAttribute();
        if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isShowAsteriskDiv(_templateMod.ownerNode, fieldId)) {
          _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.showAsteriskDiv(_templateMod.ownerNode, fieldId, false);
        }
        return;
      }
      _templateMod.isFieldDragStart = true;
      _templateMod.hideFieldAttribute();

      _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.showAsteriskDiv(_templateMod.ownerNode, fieldId, false);
    }
    if (eventName === "scale end" || eventName === "drag end") {
      _templateMod.isFieldDragStart = false;
      _templateMod.changeFieldPosition(field);
      _templateMod.showFieldAttribute(
        _templateMod.getFieldIdFromGroupNode(field)
      );
    }
  }

  /**
   * @function fieldRepositioning
   * @name module:Template/TemplateMod.TemplateMod#fieldRepositioning
   * @description 필드의 위치를 재조정한다.
   *
   * @param {Object} event  event object
   * @param {Boolean} isImport  field를 임포트하는지 여부
   * @Date : 2021. 5. 31
   */
  fieldRepositioning(event, isImport = false) {
    const keys = Object.keys(_templateMod.fieldDictionary);
    keys.forEach(function (key) {
      var field = _templateMod.fieldDictionary[key];
      var fieldGroup = _templateMod.mainCanvas.select("#" + field.id + "Group");

      var fieldRect = fieldGroup.select("rect");
      var fieldSvg = fieldGroup.select("svg");
      var oldW = field.width;
      const newRect = _templateMod.calcFieldPostion(field, isImport);
      var scale = newRect.width / oldW;
      fieldRect.attr(newRect);
      fieldSvg.attr(newRect);
      var fieldSvgText = fieldSvg.select("text");
      if (fieldSvgText) {
        fieldSvgText.attr("font-size", field.fontSize * scale + "px");
        fieldGroup.transform(Snap.matrix().toTransformString());
      }

      _templateMod.changeFreeTransform(
        fieldGroup,
        newRect.width,
        newRect.height
      );

      _templateMod.showAsteriskDiv(
        field.id,
        field.required === "true",
        newRect.x,
        newRect.y,
        newRect.height
      );
    });
  }

  /**
   * @function generateFieldId
   * @name module:Template/TemplateMod.TemplateMod#generateFieldId
   * @description 필드의 이름을 현재 존재하는 필드의 No중 MAX값을 찾아서 +1해서 만든다.
   *
   * @param {String} type 필드의 종류
   * @return {String} 필드의 이름.
   * @Date : 2021. 5. 31
   */
  generateFieldId(type) {
    var typeList = _templateMod.mainCanvas.selectAll(
      "rect[id^='" + type + "']"
    );
    if (typeList.length < 1) {
      return type + 1;
    }
    let firstId = typeList[0].node.id;
    let maxNoStr = firstId.replace(type, "");
    let maxNo = parseInt(maxNoStr);
    for (var typeIdx = 1; typeIdx < typeList.length; typeIdx++) {
      let obj1 = typeList[typeIdx];
      let objNoStr = obj1.attr("id").replace(type, "");
      let objNo = parseInt(objNoStr);
      if (objNo > maxNo) {
        maxNo = objNo;
      }
    }
    maxNo = maxNo + 1;
    return type + maxNo;
  }

  /**
   * @function getCreateFieldDefaultWidth
   * @name module:Template/TemplateMod.TemplateMod#getCreateFieldDefaultWidth
   * @description 필드를 만들때 필드의 설정된 기본크기를 리턴한다.
   *
   * @param {String} type  필드의 종류
   * @return {Number} 필드의 기본 가로길이
   * @Date : 2021. 5. 31
   */
  getCreateFieldDefaultWidth(type) {
    switch (type) {
      case "TextField": {
        return _Fields_TextField__WEBPACK_IMPORTED_MODULE_4__.TextField.widthValue();
      }
      case "LabelField": {
        return _Fields_LabelField_js__WEBPACK_IMPORTED_MODULE_13__.LabelField.widthValue();
      }
      case "NumberField": {
        return _Fields_NumberField__WEBPACK_IMPORTED_MODULE_5__.NumberField.widthValue();
      }
      case "DateField": {
        return _Fields_DateField__WEBPACK_IMPORTED_MODULE_6__.DateField.widthValue();
      }
      case "SignField": {
        return _Fields_SignField__WEBPACK_IMPORTED_MODULE_7__.SignField.widthValue();
      }
      case "ImageField": {
        return _Fields_ImageField_js__WEBPACK_IMPORTED_MODULE_9__.ImageField.widthValue();
      }
      case "MultiLineTextField": {
        return _Fields_MultiLineTextField_js__WEBPACK_IMPORTED_MODULE_10__.MultiLineTextField.widthValue();
      }
      case "CheckboxField": {
        return _Fields_CheckboxField_js__WEBPACK_IMPORTED_MODULE_11__.CheckboxField.widthValue();
      }
      case "RadioField": {
        return _Fields_RadioField_js__WEBPACK_IMPORTED_MODULE_12__.RadioField.widthValue();
      }
      case "ComboboxField": {
        return _Fields_ComboboxField_js__WEBPACK_IMPORTED_MODULE_14__.ComboboxField.widthValue();
      }
    }
  }

  /**
   * @function getDvTextValue
   * @name module:Template/TemplateMod.TemplateMod#getDvTextValue
   * @description Default Value 의 읽을 수 있는 Text값을 반환한다.
   *
   * @param  {String} value 기본값의 variable
   * @return {String} 기본값의 Text 값
   * @Date : 2021. 5. 31
   */
  getDvTextValue(value) {
    const dvOpts = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getDVFieldOptsList();
    for (var idx = 0; idx < dvOpts.length; ++idx) {
      if (dvOpts[idx].value === value) {
        return dvOpts[idx].text;
      }
    }
    return "";
  }

  /**
   * @function getFieldFromJson
   * @name module:Template/TemplateMod.TemplateMod#getFieldFromJson
   * @description JSON 텍스트를 이용하여 필드의 인스턴스를 생성하여 반환한다.
   *
   * @param  {String} type 필드의 종류
   * @param  {String} jsonData  필드 데이터의 JSON 텍스트
   * @return Field Object 필드의 인스턴스
   * @Date : 2021. 5. 31
   */
  getFieldFromJson(type, jsonData) {
    switch (type) {
      case "SignField": {
        return _Fields_BaseField__WEBPACK_IMPORTED_MODULE_3__.BaseField.fromJson(new _Fields_SignField__WEBPACK_IMPORTED_MODULE_7__.SignField(), jsonData);
      }
      case "TextField": {
        return _Fields_BaseField__WEBPACK_IMPORTED_MODULE_3__.BaseField.fromJson(new _Fields_TextField__WEBPACK_IMPORTED_MODULE_4__.TextField(), jsonData);
      }
      case "LabelField": {
        return _Fields_BaseField__WEBPACK_IMPORTED_MODULE_3__.BaseField.fromJson(new _Fields_LabelField_js__WEBPACK_IMPORTED_MODULE_13__.LabelField(), jsonData);
      }
      case "NumberField": {
        return _Fields_BaseField__WEBPACK_IMPORTED_MODULE_3__.BaseField.fromJson(new _Fields_NumberField__WEBPACK_IMPORTED_MODULE_5__.NumberField(), jsonData);
      }
      case "DateField": {
        return _Fields_BaseField__WEBPACK_IMPORTED_MODULE_3__.BaseField.fromJson(new _Fields_DateField__WEBPACK_IMPORTED_MODULE_6__.DateField(), jsonData);
      }
      case "ImageField": {
        return _Fields_BaseField__WEBPACK_IMPORTED_MODULE_3__.BaseField.fromJson(new _Fields_ImageField_js__WEBPACK_IMPORTED_MODULE_9__.ImageField(), jsonData);
      }
      case "MultiLineTextField": {
        return _Fields_BaseField__WEBPACK_IMPORTED_MODULE_3__.BaseField.fromJson(new _Fields_MultiLineTextField_js__WEBPACK_IMPORTED_MODULE_10__.MultiLineTextField(), jsonData);
      }
      case "CheckboxField": {
        return _Fields_BaseField__WEBPACK_IMPORTED_MODULE_3__.BaseField.fromJson(new _Fields_CheckboxField_js__WEBPACK_IMPORTED_MODULE_11__.CheckboxField(), jsonData);
      }
      case "RadioField": {
        return _Fields_BaseField__WEBPACK_IMPORTED_MODULE_3__.BaseField.fromJson(new _Fields_RadioField_js__WEBPACK_IMPORTED_MODULE_12__.RadioField(), jsonData);
      }
      case "ComboboxField": {
        return _Fields_BaseField__WEBPACK_IMPORTED_MODULE_3__.BaseField.fromJson(new _Fields_ComboboxField_js__WEBPACK_IMPORTED_MODULE_14__.ComboboxField(), jsonData);
      }
    }
  }

  /**
   * @function getFieldIdFromGroupNode
   * @name module:Template/TemplateMod.TemplateMod#getFieldIdFromGroupNode
   * @description SVG의 Group오브젝트로부터 필드의 ID를 찾아서 반환한다.
   *
   * @param  {Object} fieldGorup  SVG의 group 오브젝트
   * @return {String} 필드의 ID
   * @Date : 2021. 5. 31
   */
  getFieldIdFromGroupNode(fieldGorup) {
    let childRect = fieldGorup.select("rect");
    return childRect.attr("id");
  }

  /**
   * @function getFieldJsonData
   * @name module:Template/TemplateMod.TemplateMod#getFieldJsonData
   * @description 필드의 데이터를 JSON Text로 반환한다.
   *
   * @param  {String} fieldId Field의 ID
   * @return {String} JSON 텍스트
   * @Date : 2021. 5. 31
   */
  getFieldJsonData(fieldId) {
    var field = _templateMod.fieldDictionary[fieldId];
    var data = JSON.stringify(field);
    return data;
  }

  /**
   * @function getFieldSize
   * @name module:Template/TemplateMod.TemplateMod#getFieldSize
   * @description 필드의 가로 세로 사이즈를 리턴.
   *
   * @param  {String} type 필드의 종류
   * @return  {Object} { w: , h:  }  default - { w: 150, h: 40 };
   * @Date : 2021. 5. 31
   */
  getFieldSize(type) {
    var size = { w: 150, h: 40 };
    switch (type) {
      case "TextField":
      case "NumberField":
      case "DateField":
      case "LabelField":
      case "ComboboxField":
        size = { w: _Fields_TextField__WEBPACK_IMPORTED_MODULE_4__.TextField.widthValue(), h: _Fields_TextField__WEBPACK_IMPORTED_MODULE_4__.TextField.heightValue() };
        break;
      case "SignField":
      case "ImageField":
        size = { w: _Fields_SignField__WEBPACK_IMPORTED_MODULE_7__.SignField.widthValue(), h: _Fields_SignField__WEBPACK_IMPORTED_MODULE_7__.SignField.heightValue() };
        break;
      case "MultiLineTextField":
        size = {
          w: _Fields_MultiLineTextField_js__WEBPACK_IMPORTED_MODULE_10__.MultiLineTextField.widthValue(),
          h: _Fields_MultiLineTextField_js__WEBPACK_IMPORTED_MODULE_10__.MultiLineTextField.heightValue(),
        };
        break;
      case "CheckboxField":
        size = {
          w: _Fields_CheckboxField_js__WEBPACK_IMPORTED_MODULE_11__.CheckboxField.widthValue(),
          h: _Fields_CheckboxField_js__WEBPACK_IMPORTED_MODULE_11__.CheckboxField.heightValue(),
        };
        break;
      case "RadioField":
        size = { w: _Fields_RadioField_js__WEBPACK_IMPORTED_MODULE_12__.RadioField.widthValue(), h: _Fields_RadioField_js__WEBPACK_IMPORTED_MODULE_12__.RadioField.heightValue() };
        break;
    }
    return size;
  }

  /**
   * @function getPageElement
   * @name module:Template/TemplateMod.TemplateMod#getPageElement
   * @description PDF 페이지 Element
   *
   * @param  {Number} pageNo  PDF 페이지 번호
   * @return {Element}
   * @Date : 2021. 5. 31
   */
  getPageElement(pageNo) {
    let pageNumber = pageNo;
    if (pageNumber === undefined) {
      pageNumber = _templateMod.pdfViewer.currentPageNumber;
    }
    let pg = _templateMod.ownerNode.querySelector(
      " #TemplatePDFViewer [aria-label='Page " + pageNumber + "']"
    );
    return pg;
  }

  /**
   * @function getPageBorderWidth
   * @name module:Template/TemplateMod.TemplateMod#getPageBorderWidth
   * @description PDF 페이지의 border Width를 반한한다.
   *
   * @param { Number} pageNo  PDF 페이지 번호
   * @return {Rect} Object { left: , top: , right: , bottom:  }
   * @Date : 2021. 5. 31
   */
  getPageBorderWidth(pageNo) {
    let pageNumber = pageNo;
    if (pageNumber === undefined) {
      pageNumber = _templateMod.pdfViewer.currentPageNumber;
    }
    let pgNode = _templateMod.ownerNode.querySelector(
      " #TemplatePDFViewer [aria-label='Page " + pageNumber + "']"
    );

    let pageComputedStyle = window.getComputedStyle(pgNode);
    let borderTopStr = pageComputedStyle.getPropertyValue("border-top-width");
    let borderLeftStr = pageComputedStyle.getPropertyValue("border-left-width");
    let borderBottomStr = pageComputedStyle.getPropertyValue(
      "border-bottom-width"
    );
    let borderRightStr =
      pageComputedStyle.getPropertyValue("border-right-width");
    let borderTopWidth = 0;
    let borderLeftWidth = 0;
    let borderBottomWidth = 0;
    let borderRightWidth = 0;
    if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(borderTopStr)) {
      borderTopWidth = parseInt(borderTopStr.replace("px", ""));
    }
    if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(borderLeftStr)) {
      borderLeftWidth = parseInt(borderLeftStr.replace("px", ""));
    }
    if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(borderBottomStr)) {
      borderBottomWidth = parseInt(borderBottomStr.replace("px", ""));
    }
    if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(borderRightStr)) {
      borderRightWidth = parseInt(borderRightStr.replace("px", ""));
    }
    return {
      top: borderTopWidth,
      left: borderLeftWidth,
      bottom: borderBottomWidth,
      right: borderRightWidth,
    };
  }

  /**
   * @function getPageBoundingClientRect
   * @name module:Template/TemplateMod.TemplateMod#getPageBoundingClientRect
   * @description PDF 페이지의 Bounding Rect
   *
   * @param { Number} pageNo  PDF 페이지 번호
   * @return {Rect} Object { x: , y: , width: , height:  }
   * @Date : 2021. 5. 31
   */
  getPageBoundingClientRect(pageNo) {
    let pageNumber = pageNo;
    if (pageNumber === undefined) {
      pageNumber = _templateMod.pdfViewer.currentPageNumber;
    }
    let pg = _templateMod.ownerNode.querySelector(
      " #TemplatePDFViewer [aria-label='Page " + pageNumber + "']"
    );
    return pg.getBoundingClientRect();
  }

  /**
   * @function getPdfPageFromSvgPos
   * @name module:Template/TemplateMod.TemplateMod#getPdfPageFromSvgPos
   * @description SVG 레이어에서 PDF의 페이지 위치를 계산하여 리턴한다.
   *
   * @param {Number} x SVG의 X좌표
   * @param {Number} y SVG의 Y좌표
   * @return {Number} Pdf Page Number
   * @Date : 2021. 5. 31
   */
  getPdfPageFromSvgPos(x, y) {
    let currentHeightSum = 0;
    for (let idx = 1; idx <= _templateMod.pdfViewer.pagesCount; ++idx) {
      let pageRect = _templateMod.getPageBoundingClientRect(idx);
      let pageHeight = pageRect.height;
      currentHeightSum += pageHeight;
      if (currentHeightSum > y) {
        console.log(`${idx}, ${pageHeight}, ${currentHeightSum}, ${y}`);
        return idx;
      }
    }
    return 1;
  }

  /**
   * @function hideAllResizeHandles
   * @name module:Template/TemplateMod.TemplateMod#hideAllResizeHandles
   * @description 필드들의 리사이즈 핸들러들을 숨긴다.
   *
   * @Date : 2021. 5. 31
   */
  hideAllResizeHandles() {
    let items = _templateMod.mainCanvas.selectAll(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MAIN_GROUP_NAME + " > g"
    );
    items.forEach(function (element) {
      if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(element.freeTransform)) {
        element.freeTransform.hideResizeHandler();
      }
    });
  }

  /**
   * @function hideFieldAttribute
   * @name module:Template/TemplateMod.TemplateMod#hideFieldAttribute
   * @description 필드의 속성 팝업을 숨긴다.
   *
   * @Date : 2021. 5. 31
   */
  hideFieldAttribute() {
    const selectedNode = _templateMod.ownerNode.querySelector(
      " ." + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.EDITOR_ATTR_CLASS
    );
    _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.removeAllChildNode(selectedNode);
    if (selectedNode !== null) {
      selectedNode.style.display = "none";
    }

    const deleteBtnNode = _templateMod.ownerNode.querySelector(
      " ." + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.FIELD_DELETE_BUTTON_CLASS
    );

    if (
      deleteBtnNode !== null &&
      deleteBtnNode.classList.contains(_Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.SHOW_CLASS)
    ) {
      deleteBtnNode.classList.toggle(_Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.SHOW_CLASS);
    }
    if (
      deleteBtnNode !== null &&
      !deleteBtnNode.classList.contains(_Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.HIDE_CLASS)
    ) {
      deleteBtnNode.classList.toggle(_Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.HIDE_CLASS);
    }
  }

  /**
   * @function hideTemplateLayer
   * @name module:Template/TemplateMod.TemplateMod#hideTemplateLayer
   * @description TemplateLayer를 숨긴다.
   *
   * @Date : 2021. 5. 31
   */
  hideTemplateLayer() {
    let templateLayer = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_NAME
    );
    templateLayer.removeEventListener(
      "mousemove",
      _templateMod.templateMouseMoveEvent,
      true
    );
    templateLayer.removeEventListener(
      "mouseup",
      _templateMod.templateMouseUpEvent,
      true
    );
    templateLayer.style.display = "none";
  }

  /**
   * @function importFieldData
   * @name module:Template/TemplateMod.TemplateMod#importFieldData
   * @description  field를 import한다.
   *
   * @param {Object} data  import할 json data
   * @Date : 2021. 5. 31
   */
  importFieldData(data) {
    data.formerList.forEach((owner) => {
      owner.pages.forEach((page) => {
        if (page.pageNo >= _templateMod.pdfViewer._pages.length) {
          return;
        }
        page.fields.forEach((field) => {
          field.m_ownerId = owner.userUUID;
          if (
            owner.isFormer !== null &&
            owner.isFormer !== undefined &&
            owner.isFormer === "Y"
          ) {
            field.m_ownerId = "";
          }
          _templateMod.replaceFieldData(field, true);
        });
      });
    });
    // _templateMod.fieldRepositioning();
    _templateMod.hideAllResizeHandles();
    _templateMod.hideFieldAttribute();
    _templateMod.hideTemplateLayer();
    _templateMod.buildFieldformerList();
  }

  /**
   * @function keycheck
   * @name module:Template/TemplateMod.TemplateMod#keycheck
   * @description  keycheck  단축키 이벤트.
   *
   * @param {Object} evt   evt객체
   * @Date : 2021. 5. 31
   */
  keycheck(evt) {
    var keyCode = evt.which ? evt.which : evt.keyCode;
    if (evt.ctrlKey) {
      switch (keyCode) {
        case 89:
          _templateMod.redoAction();
          return;
        case 90:
          _templateMod.undoAction();
          return;
        case 77:
        // let dat1 = _templateMod.exportFieldData();
        //  console.log((dat1));
        //console.log(JSON.stringify(dat1));

        // _templateMod.importFieldData("/testFields.json", true);
        // return;
        // console.log(_templateMod.isAllFieldHasOwner());

        // let ret1 = _templateMod.checkTemplateFieldData();
        // console.log(ret1);
      }
    }

    if (keyCode === 46) {
      _templateMod.removeSelectedField();
    }
  }

  pasteObject() {
    console.log(_templateMod.templateClipBoard);
    if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(_templateMod.templateClipBoard)) {
      return;
    }
    const fieldIdList = _templateMod.templateClipBoard.split(",");
    for (const fieldId of fieldIdList) {
      const field = _templateMod.fieldDictionary[fieldId];
      const fieldJsonData = JSON.stringify(field);
      const copyField1 = JSON.parse(fieldJsonData);
      let newId = _templateMod.generateFieldId(copyField1.m_type);
      copyField1.m_id = newId;
      copyField1.m_pdfX = copyField1.m_pdfX + 10;
      copyField1.m_pdfX2 = copyField1.m_pdfX2 + 10;
      copyField1.m_pdfY = copyField1.m_pdfY - 10;
      copyField1.m_pdfY2 = copyField1.m_pdfY2 - 10;
      copyField1.m_fieldId = newId.replace(
        copyField1.m_type,
        copyField1.m_kind + "-"
      );
      _templateMod.replaceFieldStringData(JSON.stringify(copyField1));
    }
    if (fieldIdList.length > 0) {
      _templateMod.hideAllResizeHandles();
      _templateMod.hideFieldAttribute();
      _templateMod.hideTemplateLayer();
      _templateMod.buildFieldformerList();
    }
  }

  /**
   * @function redoAction
   * @name module:Template/TemplateMod.TemplateMod#redoAction
   * @description   이전에 실행취소 했던 것을 다시 실행한다.
   *
   * @Date : 2021. 5. 31
   */
  redoAction() {
    var idx = ++_templateMod.unredoActionIdx;
    var data = _templateMod.unredoActionDict[idx];
    if (data === undefined) {
      _templateMod.unredoActionIdx--;
      return;
    }
    _templateMod.removeDragOverGroup();
    switch (data.action) {
      case _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.CREATE_FIELD_ACTION:
      case _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.FIELD_ATTR_CHANGE_ACTION: {
        _templateMod.replaceFieldStringData(data.new);
        _templateMod.buildFieldformerList();
        return;
      }
      case _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.REMOVE_FIELD_ACTION: {
        _templateMod.removeField(data.new);
        _templateMod.hideFieldAttribute();
        _templateMod.buildFieldformerList();
        return;
      }
      case _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.GROUP_REMOVE_ACTION: {
        data.new.forEach((newData) => {
          _templateMod.removeField(newData);
        });
        _templateMod.hideFieldAttribute();
        _templateMod.buildFieldformerList();
        return;
      }
      case _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.GROUP_ATTR_CHANGE_ACTION: {
        data.new.forEach((newData) => {
          _templateMod.replaceFieldStringData(newData);
        });
        _templateMod.buildFieldformerList();
        return;
      }
      case _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.GROUP_ATTR_OWNER_CHANGE_ACTION: {
        data.new.forEach((newData) => {
          _templateMod.replaceFieldStringData(newData);
        });
        _templateMod.buildFieldformerList();
        return;
      }
    }
  }

  /**
   * @function refreshformerList
   * @name module:Template/TemplateMod.TemplateMod#refreshformerList
   * @description  필드의 서명자 정보가 수정될 때 사이드의 서명자 리스트를 갱신한다.
   *
   * @param  {Obejct} field 갱신할 필드 인스턴스
   * @Date : 2021. 5. 31
   */
  refreshformerList(field) {
    const keys = Object.keys(_templateMod.templateUserFieldInfo);
    keys.forEach(function (key) {
      let userInfo = _templateMod.templateUserFieldInfo[key];
      if (userInfo.contains(field.id)) {
        if (field.ownerId !== key) {
          userInfo.removeField(field.id);
        }
      } else {
        if (field.ownerId === key) {
          userInfo.pushField(field.id, field);
        }
      }
    });
  }

  /**
   * @function removeDragGroupField
   * @name module:Template/TemplateMod.TemplateMod#removeDragGroupField
   * @description  Drag해서 선택한 필드의 그룹을 지운다.
   *
   * @Date : 2021. 5. 31
   */
  removeDragGroupField() {
    var tempGOld = _templateMod.mainCanvas.select(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME
    );
    var mainGroup = _templateMod.mainCanvas.select(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MAIN_GROUP_NAME
    );
    if (tempGOld !== null && tempGOld.children().length >= 1) {
      tempGOld.freeTransform.hideHandles();
      var chds = tempGOld.children();
      const tempGMatrix = tempGOld.transform().globalMatrix;
      var oldDataArr = [];
      var newDataArr = [];
      chds.forEach(function (element) {
        const childRect = element.select("rect");
        const field = _templateMod.fieldDictionary[childRect.attr("id")];
        field.isRemoved = true;

        let usrFieldData = _templateMod.templateUserFieldInfo[field.ownerId];
        if (usrFieldData !== null && usrFieldData !== undefined) {
          usrFieldData.removeField(field.id);
        }
        let layerDiv = _templateMod.ownerNode.querySelector(
          " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_ASTERISK_NAME
        );
        let asteriskDiv = _templateMod.ownerNode.querySelector(
          " #" + field.id + "_asterisk"
        );
        layerDiv.removeChild(asteriskDiv);

        const fieldJsonData = JSON.stringify(field);
        oldDataArr.push(fieldJsonData);
        newDataArr.push(fieldJsonData);
        _templateMod.hideFieldAttribute();
      });
      _templateMod.addUndoRedoAct(
        _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.GROUP_REMOVE_ACTION,
        oldDataArr,
        newDataArr
      );
      tempGOld.remove();
      _templateMod.buildFieldformerList();
    }
  }

  /**
   * @function removeDragOverGroup
   * @name module:Template/TemplateMod.TemplateMod#removeDragOverGroup
   * @description   드래그해서 만들 필드 그립을 해제한다.
   *
   * @param  {Boolean} donotUndoRedo  undoRedo를 실행하지 않는다.
   * @Date : 2021. 5. 31
   */
  removeDragOverGroup(donotUndoRedo = true) {
    var tempGOld = _templateMod.mainCanvas.select(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME
    );
    var mainGroup = _templateMod.mainCanvas.select(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MAIN_GROUP_NAME
    );
    if (tempGOld !== null && tempGOld.children().length >= 1) {
      tempGOld.freeTransform.hideHandles();
      var chds = tempGOld.children();
      const tempGMatrix = tempGOld.transform().globalMatrix;
      chds.forEach(function (element) {
        mainGroup.append(element);
        _templateMod.changeFieldPosition(element, tempGMatrix, donotUndoRedo);
        _templateMod.changeFreeTransform(
          element,
          element.width,
          element.height
        );
      });
      tempGOld.remove();
    }
  }

  /**
   * @function removeField
   * @name module:Template/TemplateMod.TemplateMod#removeField
   * @description  undo, redo에서 필드를 삭제할 때 사용.
   *
   * @param  {String} jsonData 필드의 JSON String 데이터
   * @Date : 2021. 5. 31
   */
  removeField(jsonData) {
    const replaceData = JSON.parse(jsonData);
    const field1 = _templateMod.getFieldFromJson(
      replaceData.m_type,
      replaceData
    );
    field1.isRemoved = true;
    if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(field1.ownerId)) {
      _templateMod.templateUserFieldInfo[field1.ownerId].removeField(field1.id);
    }
    const mainGroup = _templateMod.mainCanvas.select(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MAIN_GROUP_NAME
    );
    var selectedFieldGroup = mainGroup.select("#" + field1.id + "Group");
    if (selectedFieldGroup) {
      selectedFieldGroup.freeTransform.unplug();
      selectedFieldGroup.remove();

      let layerDiv = _templateMod.ownerNode.querySelector(
        " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_ASTERISK_NAME
      );
      let asteriskDiv = _templateMod.ownerNode.querySelector(
        " #" + field1.id + "_asterisk"
      );
      if (asteriskDiv !== null && asteriskDiv !== undefined) {
        layerDiv.removeChild(asteriskDiv);
      }
    }
  }

  /**
   * @function removeSelectedField
   * @name module:Template/TemplateMod.TemplateMod#removeSelectedField
   * @description  선택된 필드를 삭제한다.
   *
   * @Date : 2021. 5. 31
   */
  removeSelectedField() {
    const selectedNode = _templateMod.ownerNode.querySelector(
      " ." + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.EDITOR_ATTR_CLASS
    );
    const attrPanelNode = selectedNode.querySelector(
      "." + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.EDITOR_ATTR_PANEL_CLASS
    );
    if (attrPanelNode === null) {
      return;
    }
    const idListAttr = attrPanelNode.getAttribute("Field-id-list");
    if (_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isStringEmpty(idListAttr)) {
      return;
    }
    const idArray = idListAttr.split(",");
    if (idArray.length > 1) {
      _templateMod.removeDragGroupField();
      return;
    }
    var selectedItem = _templateMod.mainCanvas.select(
      "#" + idArray[0] + "Group"
    );
    if (selectedItem === null) {
      return;
    }
    const childRect = selectedItem.select("rect");
    const field = _templateMod.fieldDictionary[childRect.attr("id")];
    field.isRemoved = true;
    let usrFieldData = _templateMod.templateUserFieldInfo[field.ownerId];
    if (usrFieldData !== null && usrFieldData !== undefined) {
      usrFieldData.removeField(field.id);
    }

    const fieldJsonData = JSON.stringify(field);
    _templateMod.addUndoRedoAct(
      _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.REMOVE_FIELD_ACTION,
      fieldJsonData,
      fieldJsonData
    );
    _templateMod.hideFieldAttribute();
    selectedItem.freeTransform.unplug();
    selectedItem.remove();

    let layerDiv = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_ASTERISK_NAME
    );
    let asteriskDiv = _templateMod.ownerNode.querySelector(
      " #" + field.id + "_asterisk"
    );
    if (asteriskDiv !== null && asteriskDiv !== undefined) {
      layerDiv.removeChild(asteriskDiv);
    }

    _templateMod.buildFieldformerList();
  }

  /**
   * @function removeTemplateRect
   * @name module:Template/TemplateMod.TemplateMod#removeTemplateRect
   * @description   PDF위에 올라가는 Template 레이어에 필드를 만들기위해 만든 임시 Div를 삭제한다.
   *
   * @Date : 2021. 5. 31
   */
  removeTemplateRect() {
    let templateLayer = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_NAME
    );
    let templateRect = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_RECT_NAME
    );
    if (templateRect === null || templateRect === undefined) {
      return;
    }
    templateLayer.removeChild(templateRect);
    templateLayer.removeEventListener(
      "mousemove",
      _templateMod.templateMouseMoveEvent,
      true
    );
    templateLayer.removeEventListener(
      "mouseup",
      _templateMod.templateMouseUpEvent,
      true
    );
    templateLayer.style.display = "none";
  }

  /**
   * @function replaceFieldData
   * @name module:Template/TemplateMod.TemplateMod#replaceFieldData
   * @description  해당하는 JSON String의 데이터로 필드를 교체한다.
   *
   * @param {String} jsonData 필드의 JSON String 데이터
   * @param {Boolean} isImport import일 때 호출되는지 여부
   * @Date : 2021. 5. 31
   */
  replaceFieldData(jsonData, isImport = false) {
    _templateMod.hideAllResizeHandles();
    const field1 = _templateMod.getFieldFromJson(jsonData.m_type, jsonData);
    field1.isRemoved = false;
    const mainGroup = _templateMod.mainCanvas.select(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MAIN_GROUP_NAME
    );
    var selectedFieldGroup = mainGroup.select("#" + field1.id + "Group");
    if (selectedFieldGroup) {
      if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(selectedFieldGroup.freeTransform)) {
        selectedFieldGroup.freeTransform.unplug();
      }
      selectedFieldGroup.remove();
    }

    const newRect = _templateMod.calcFieldPostion(field1, isImport);
    let fieldGroup = field1.getSVGFieldObject(
      _templateMod.mainCanvas,
      mainGroup,
      1.0,
      _templateMod.ownerNode,
      _templateMod.removeDragOverGroup,
      _templateMod.changeFieldValueEvent,
      _templateMod.changeFreeTransform
    );
    mainGroup.append(fieldGroup);
    _templateMod.fieldDictionary[field1.id] = field1;

    _templateMod.changeFreeTransform(fieldGroup, field1.width, field1.height);
    _templateMod.refreshformerList(field1);

    _templateMod.showAsteriskDiv(
      field1.id,
      field1.required === "true",
      field1.x,
      field1.y,
      field1.height
    );

    _templateMod.showFieldAttribute(field1.id);
  }

  /**
   * @function replaceFieldStringData
   * @name module:Template/TemplateMod.TemplateMod#replaceFieldStringData
   * @description   해당하는 JSON 데이터로 필드를 교체한다.
   *
   * @param {String} jsonData 필드의 JSON String 데이터
   * @Date : 2021. 5. 31
   */
  replaceFieldStringData(jsonData) {
    _templateMod.hideAllResizeHandles();
    const replaceData = JSON.parse(jsonData);
    _templateMod.replaceFieldData(replaceData, true);
  }

  /**
   * @function resetTool
   * @name module:Template/TemplateMod.TemplateMod#resetTool
   * @description  선택된 툴을 리셋한다.
   *
   * @Date : 2021. 5. 31
   */
  resetTool() {
    _templateMod.selectAddFieldType = "";
    _templateMod.removeTemplateRect();
  }

  /**
   * @function selectUserList
   * @name module:Template/TemplateMod.TemplateMod#selectUserList
   * @description "User ID"에 맞는 서명자를 선택된 상태로 만든다. .
   *
   * @param {String} userKey User Id
   * @Date : 2021. 5. 31
   */
  selectUserList(userKey) {
    const ownerDom = _templateMod.ownerNode.querySelector(
      " #Editor-User-Component_Box"
    );
    ownerDom.childNodes.forEach((child) => {
      if (child.classList.contains("Current")) {
        child.classList.toggle("Current");
      }
      const childUserKey = child.getAttribute("data-user-key");
      if (userKey === childUserKey) {
        child.classList.toggle("Current");
      }
    });
  }

  /**
   * @function selectTool
   * @name module:Template/TemplateMod.TemplateMod#selectTool
   * @description 필드를 만들기 위한 툴을 설정한다. .
   *
   * @param {String} tool tool 이름
   * @Date : 2021. 5. 31
   */
  selectTool(tool) {
    if (
      _templateMod.selectAddFieldType !== "" ||
      _templateMod.selectAddFieldType !== undefined
    ) {
      _templateMod.removeTemplateRect();
    }
    switch (tool) {
      case 0: {
        if (_templateMod.selectAddFieldType === "SignField") {
          _templateMod.resetTool();
          return;
        }
        _templateMod.selectAddFieldType = "SignField";
        break;
      }
      case 1: {
        if (_templateMod.selectAddFieldType === "TextField") {
          _templateMod.resetTool();
          return;
        }
        _templateMod.selectAddFieldType = "TextField";
        break;
      }
      case 2: {
        if (_templateMod.selectAddFieldType === "MultiLineTextField") {
          _templateMod.resetTool();
          return;
        }
        _templateMod.selectAddFieldType = "MultiLineTextField";
        break;
      }
      case 3: {
        if (_templateMod.selectAddFieldType === "LabelField") {
          _templateMod.resetTool();
          return;
        }
        _templateMod.selectAddFieldType = "LabelField";
        break;
      }
      case 4: {
        if (_templateMod.selectAddFieldType === "CheckboxField") {
          _templateMod.resetTool();
          return;
        }
        _templateMod.selectAddFieldType = "CheckboxField";
        break;
      }
      case 5: {
        if (_templateMod.selectAddFieldType === "RadioField") {
          _templateMod.resetTool();
          return;
        }
        _templateMod.selectAddFieldType = "RadioField";
        break;
      }
      case 6: {
        if (_templateMod.selectAddFieldType === "ComboboxField") {
          _templateMod.resetTool();
          return;
        }
        _templateMod.selectAddFieldType = "ComboboxField";
        break;
      }
      case 7: {
        if (_templateMod.selectAddFieldType === "DateField") {
          _templateMod.resetTool();
          return;
        }
        _templateMod.selectAddFieldType = "DateField";
        break;
      }
      case 8: {
        if (_templateMod.selectAddFieldType === "NumberField") {
          _templateMod.resetTool();
          return;
        }
        _templateMod.selectAddFieldType = "NumberField";
        break;
      }
      case 9: {
        if (_templateMod.selectAddFieldType === "ImageField") {
          _templateMod.resetTool();
          return;
        }
        _templateMod.selectAddFieldType = "ImageField";
        break;
      }
    }

    _templateMod.createTemplateRect();
    _templateMod.hideFieldAttribute();
    _templateMod.hideAllResizeHandles();
  }

  /**
   * @function showAsteriskDiv
   * @name module:Template/TemplateMod.TemplateMod#showAsteriskDiv
   * @description 해당 필드 ID의 필수 여부를 보여줄지 여부를 설정한다.
   *
   * @param {String} fieldId  Field id
   * @param {Boolean} isShow     보여줄지 여부
   * @param {Number} fieldX     필드의 X좌표
   * @param {Number} fieldY     필드의 Y좌표
   * @param {Number} fieldHeight   필드의 높이
   * @Date : 2021. 5. 31
   */
  showAsteriskDiv(fieldId, isShow, fieldX, fieldY, fieldHeight) {
    let asteriskDiv = _templateMod.ownerNode.querySelector(
      " #" + fieldId + "_asterisk"
    );
    if (asteriskDiv === null) {
      const asteriskDiv = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAsteriskDiv(
        _templateMod.ownerNode,
        fieldId
      );
      asteriskDiv.id = fieldId + "_asterisk";
    }
    _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.showAsteriskDiv(
      _templateMod.ownerNode,
      fieldId,
      isShow,
      fieldX,
      fieldY,
      fieldHeight
    );
  }

  /**
   * @function showFieldAttribute
   * @name module:Template/TemplateMod.TemplateMod#showFieldAttribute
   * @description  해당 필드 ID의 속성창을 보여준다.
   *
   * @param {String} fieldId  Field id
   * @Date : 2021. 5. 31
   */
  showFieldAttribute(fieldId) {
    const field = _templateMod.fieldDictionary[fieldId];
    let attrNode = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttrbutePopup(
      _templateMod.ownerNode,
      field.getBBox()
    );
    var mainGroup = _templateMod.mainCanvas.select(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MAIN_GROUP_NAME
    );
    var fieldAncestors = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.fieldAncestors(field);
    fieldAncestors[0].constructor.showFieldsAttribute(
      _templateMod.ownerNode,
      [field],
      attrNode,
      mainGroup,
      _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsList(),
      _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getDVFieldOptsList(),
      _templateMod.changeFieldValueEvent,
      _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getSignTabShowOpt(),
    );

    let deleteBtnNode = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createFieldDeleteBtn(
      _templateMod.ownerNode,
      _templateMod.fieldDeleteBtnClicked
    );
    deleteBtnNode.style.left = field.x + field.width + 10 + "px";
    const fieldCenterY = field.y + field.height / 2 - 10;
    deleteBtnNode.style.top = fieldCenterY + "px";
    _templateMod.selectUserList(field.ownerId);
  }

  showCommonFieldListAttribute(
    type,
    ownerNode,
    fieldList,
    attrNode,
    mainGroup,
    userList,
    dvOptionList,
    changeEventFunc
  ) {
    switch (type) {
      case "TF": {
        return _Fields_TextField__WEBPACK_IMPORTED_MODULE_4__.TextField.showFieldsAttribute(
          ownerNode,
          fieldList,
          attrNode,
          mainGroup,
          userList,
          dvOptionList,
          changeEventFunc
        );
      }
      case "LF": {
        return _Fields_LabelField_js__WEBPACK_IMPORTED_MODULE_13__.LabelField.showFieldsAttribute(
          ownerNode,
          fieldList,
          attrNode,
          mainGroup,
          userList,
          dvOptionList,
          changeEventFunc
        );
      }
      case "SF": {
        return _Fields_SignField__WEBPACK_IMPORTED_MODULE_7__.SignField.showFieldsAttribute(
          ownerNode,
          fieldList,
          attrNode,
          mainGroup,
          userList,
          dvOptionList,
          changeEventFunc,
          _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getSignTabShowOpt(),
        );
      }
      case "NF": {
        return _Fields_NumberField__WEBPACK_IMPORTED_MODULE_5__.NumberField.showFieldsAttribute(
          ownerNode,
          fieldList,
          attrNode,
          mainGroup,
          userList,
          dvOptionList,
          changeEventFunc
        );
      }
      case "DF": {
        return _Fields_DateField__WEBPACK_IMPORTED_MODULE_6__.DateField.showFieldsAttribute(
          ownerNode,
          fieldList,
          attrNode,
          mainGroup,
          userList,
          dvOptionList,
          changeEventFunc
        );
      }
      case "IMGF": {
        return _Fields_ImageField_js__WEBPACK_IMPORTED_MODULE_9__.ImageField.showFieldsAttribute(
          ownerNode,
          fieldList,
          attrNode,
          mainGroup,
          userList,
          dvOptionList,
          changeEventFunc
        );
      }
      case "MLTF": {
        return _Fields_MultiLineTextField_js__WEBPACK_IMPORTED_MODULE_10__.MultiLineTextField.showFieldsAttribute(
          ownerNode,
          fieldList,
          attrNode,
          mainGroup,
          userList,
          dvOptionList,
          changeEventFunc
        );
      }
      case "CBF": {
        return _Fields_CheckboxField_js__WEBPACK_IMPORTED_MODULE_11__.CheckboxField.showFieldsAttribute(
          ownerNode,
          fieldList,
          attrNode,
          mainGroup,
          userList,
          dvOptionList,
          changeEventFunc
        );
      }
      case "RF": {
        return _Fields_RadioField_js__WEBPACK_IMPORTED_MODULE_12__.RadioField.showFieldsAttribute(
          ownerNode,
          fieldList,
          attrNode,
          mainGroup,
          userList,
          dvOptionList,
          changeEventFunc
        );
      }
      case "CMBF": {
        return _Fields_ComboboxField_js__WEBPACK_IMPORTED_MODULE_14__.ComboboxField.showFieldsAttribute(
          ownerNode,
          fieldList,
          attrNode,
          mainGroup,
          userList,
          dvOptionList,
          changeEventFunc
        );
      }
      default: {
        return _Fields_BaseField__WEBPACK_IMPORTED_MODULE_3__.BaseField.showFieldsAttribute(
          ownerNode,
          fieldList,
          attrNode,
          mainGroup,
          userList,
          dvOptionList,
          changeEventFunc
        );
      }
    }
  }

  /**
   * @function showFieldListAttribute
   * @name module:Template/TemplateMod.TemplateMod#showFieldListAttribute
   * @description 해당 필드들의 속성창을 보여준다.
   *
   * @param {Array} fieldList  Field Object List
   * @Date : 2021. 5. 31
   */
  showFieldListAttribute(fieldList) {
    var dragOverBox = _templateMod.mainCanvas.select(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME
    );
    var dragOverBBox = dragOverBox.getBBox();
    let attrNode = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createAttrbutePopup(
      _templateMod.ownerNode,
      dragOverBBox
    );
    var mainGroup = _templateMod.mainCanvas.select(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MAIN_GROUP_NAME
    );
    // console.log(Utils.findSameAncestor2(fieldList));
    const commonFieldType = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.findSameAncestor2(fieldList);
    _templateMod.showCommonFieldListAttribute(
      commonFieldType,
      _templateMod.ownerNode,
      fieldList,
      attrNode,
      mainGroup,
      _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getUserInfoOptsList(),
      _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.getDVFieldOptsList(),
      _templateMod.changeFieldValueEvent
    );

    let deleteBtnNode = _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.createFieldDeleteBtn(
      _templateMod.ownerNode,
      _templateMod.fieldDeleteBtnClicked
    );
    deleteBtnNode.style.left = dragOverBBox.x + dragOverBBox.width + 10 + "px";
    deleteBtnNode.style.top = dragOverBBox.y + 10 + "px";
  }

  /**
   * @function sortFieldsAlign
   * @name module:Template/TemplateMod.TemplateMod#sortFieldsAlign
   * @description 선택된 필드들의 위치를 정렬 시킨다..
   *
   * @param {String} type  정렬 이름. left, hCenter, right, top, vCenter, bottom, VRegularInterval, HRegularInterval
   * @Date : 2021. 5. 31
   */
  sortFieldsAlign(type) {
    var tempGBox = _templateMod.mainCanvas.select(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME
    );
    if (tempGBox === null) {
      return;
    }

    var selectedItems = _templateMod.mainCanvas.selectAll(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME + " > g"
    );
    switch (type) {
      case "left": {
        _templateMod.sortFieldsLeftAlign(selectedItems);
        break;
      }
      case "hCenter": {
        _templateMod.sortFieldsHCenterAlign(tempGBox, selectedItems);
        break;
      }
      case "right": {
        _templateMod.sortFieldsRightAlign(selectedItems);
        break;
      }
      case "top": {
        _templateMod.sortFieldsTopAlign(selectedItems);
        break;
      }
      case "vCenter": {
        _templateMod.sortFieldsVCenterAlign(tempGBox, selectedItems);
        break;
      }
      case "bottom": {
        _templateMod.sortFieldsBottomAlign(selectedItems);
        break;
      }
      case "VRegularInterval": {
        _templateMod.sortFieldsVRegularIntervalAlign(selectedItems);
        break;
      }
      case "HRegularInterval": {
        _templateMod.sortFieldsHRegularIntervalAlign(selectedItems);
        break;
      }
    }
    _templateMod.tmpGroupFtEvent("drag end");
    _templateMod.changeGroupBoxFreeTransform(tempGBox);
  }

  /**
   * @function sortFieldsBottomAlign
   * @name module:Template/TemplateMod.TemplateMod#sortFieldsBottomAlign
   * @description 선택된 필드들을 가장 낮은 Y좌표로 정렬시킨다.
   *
   * @param {Array} selectedItems  Field List
   * @Date : 2021. 5. 31
   */
  sortFieldsBottomAlign(selectedItems) {
    if (selectedItems.length < 2) {
      return;
    }
    var minY = 0;
    selectedItems.forEach((item) => {
      var childRect = item.select("rect");
      var bbox = childRect.getBBox();
      if (bbox.y2 > minY) {
        minY = bbox.y2;
      }
    });
    selectedItems.forEach((item) => {
      var childRect = item.select("rect");
      var bbox = childRect.getBBox();
      childRect.attr({ y: minY - bbox.height });
    });
  }

  /**
   * @function sortFieldsHCenterAlign
   * @name module:Template/TemplateMod.TemplateMod#sortFieldsHCenterAlign
   * @description  선택된 필드들의 Y좌표 중앙으로 정렬시킨다.
   *
   * @param {Array} selectedItems  Field List
   * @Date : 2021. 5. 31
   */
  sortFieldsHCenterAlign(tempGBox, selectedItems) {
    if (selectedItems.length < 2) {
      return;
    }
    var groupBbox = tempGBox.getBBox();
    var cx = groupBbox.cx;
    selectedItems.forEach((item) => {
      var childRect = item.select("rect");
      var bbox = childRect.getBBox();
      childRect.attr({ x: cx - bbox.width / 2 });
    });
  }

  /**
   * @function sortFieldsHRegularIntervalAlign
   * @name module:Template/TemplateMod.TemplateMod#sortFieldsHRegularIntervalAlign
   * @description  선택된 필드들을 가로 간격이 일정하게 정렬한다.
   *
   * @param {Array} selectedItems  Field List
   * @Date : 2021. 5. 31
   */
  sortFieldsHRegularIntervalAlign(selectedItems) {
    if (selectedItems.length < 3) {
      return;
    }
    var items = Array.from(selectedItems);
    items = items.sort(function (a, b) {
      var childRectA = a.select("rect").getBBox();
      var childRectB = b.select("rect").getBBox();
      return childRectA.x - childRectB.x;
    });

    var firstItem = items[0];
    var lastItem = items[items.length - 1];
    var firstItemBBox = firstItem.getBBox();
    var lastItemBBox = lastItem.getBBox();
    var totalInterval = Math.abs(lastItemBBox.x - firstItemBBox.x2);
    for (var idx = 1; idx < items.length - 1; ++idx) {
      var item = items[idx];
      var childRect = item.select("rect");
      var bbox = childRect.getBBox();
      totalInterval = totalInterval - bbox.width;
    }
    var betweenItemCnt = items.length - 1;
    var interval = totalInterval / betweenItemCnt;
    var beforeX2 = firstItemBBox.x2;
    for (var idx2 = 1; idx2 < items.length - 1; ++idx2) {
      var item2 = items[idx2];
      var childRect2 = item2.select("rect");
      childRect2.attr({ x: beforeX2 + interval });
      var bbox2 = childRect2.getBBox();
      beforeX2 = bbox2.x2;
    }
  }

  /**
   * @function sortFieldsLeftAlign
   * @name module:Template/TemplateMod.TemplateMod#sortFieldsLeftAlign
   * @description 선택된 필드들을 가장 낮은 X좌표로 정렬시킨다.
   *
   * @param {Array} selectedItems Field List
   * @Date : 2021. 5. 31
   */
  sortFieldsLeftAlign(selectedItems) {
    if (selectedItems.length < 2) {
      return;
    }
    var minX = Number.MAX_VALUE;
    selectedItems.forEach((item) => {
      var childRect = item.select("rect");
      var bbox = childRect.getBBox();
      if (bbox.x < minX) {
        minX = bbox.x;
      }
    });

    selectedItems.forEach((item) => {
      var childRect = item.select("rect");
      childRect.attr({ x: minX });
    });
  }

  /**
   * @function sortFieldsRightAlign
   * @name module:Template/TemplateMod.TemplateMod#sortFieldsRightAlign
   * @description  선택된 필드들을 가장 큰 X좌표로 정렬시킨다.
   *
   * @param {Array} selectedItems  Field List
   * @Date : 2021. 5. 31
   */
  sortFieldsRightAlign(selectedItems) {
    if (selectedItems.length < 2) {
      return;
    }
    var minX = 0;
    selectedItems.forEach((item) => {
      var childRect = item.select("rect");
      var bbox = childRect.getBBox();
      if (bbox.x2 > minX) {
        minX = bbox.x2;
      }
    });

    selectedItems.forEach((item) => {
      var childRect = item.select("rect");
      var bbox = childRect.getBBox();
      childRect.attr({ x: minX - bbox.width });
    });
  }

  /**
   * @function sortFieldsTopAlign
   * @name module:Template/TemplateMod.TemplateMod#sortFieldsTopAlign
   * @description 선택된 필드들을 가장 높은 Y좌표로 정렬시킨다.
   *
   * @param {Array} selectedItems  Field List
   * @Date : 2021. 5. 31
   */
  sortFieldsTopAlign(selectedItems) {
    if (selectedItems.length < 2) {
      return;
    }
    var minY = Number.MAX_VALUE;
    selectedItems.forEach((item) => {
      var childRect = item.select("rect");
      var bbox = childRect.getBBox();
      if (bbox.y < minY) {
        minY = bbox.y;
      }
    });

    selectedItems.forEach((item) => {
      var childRect = item.select("rect");
      childRect.attr({ y: minY });
    });
  }

  /**
   * @function sortFieldsVCenterAlign
   * @name module:Template/TemplateMod.TemplateMod#sortFieldsVCenterAlign
   * @description 선택된 필드들을 Y좌표의 가운데로 정렬시킨다.
   *
   * @param {Array} selectedItems  Field List
   * @Date : 2021. 5. 31
   */
  sortFieldsVCenterAlign(tempGBox, selectedItems) {
    if (selectedItems.length < 2) {
      return;
    }
    var groupBbox = tempGBox.getBBox();
    var cy = groupBbox.cy;
    selectedItems.forEach((item) => {
      var childRect = item.select("rect");
      var bbox = childRect.getBBox();
      childRect.attr({ y: cy - bbox.height / 2 });
    });
  }

  /**
   * @function sortFieldsVRegularIntervalAlign
   * @name module:Template/TemplateMod.TemplateMod#sortFieldsVRegularIntervalAlign
   * @description 선택된 필드들을 세로간격이 일정하게 정렬시킨다.
   *
   * @param {Array} selectedItems Field List
   * @Date : 2021. 5. 31
   */
  sortFieldsVRegularIntervalAlign(selectedItems) {
    if (selectedItems.length < 3) {
      return;
    }
    var items = Array.from(selectedItems);
    items = items.sort(function (a, b) {
      var childRectA = a.select("rect").getBBox();
      var childRectB = b.select("rect").getBBox();
      return childRectA.y - childRectB.y;
    });

    var firstItem = items[0];
    var lastItem = items[items.length - 1];
    var firstItemBBox = firstItem.getBBox();
    var lastItemBBox = lastItem.getBBox();
    var totalInterval = Math.abs(lastItemBBox.y - firstItemBBox.y2);
    for (var idx = 1; idx < items.length - 1; ++idx) {
      var item = items[idx];
      var childRect = item.select("rect");
      var bbox = childRect.getBBox();
      totalInterval = totalInterval - bbox.height;
    }
    var betweenItemCnt = items.length - 1;
    var interval = totalInterval / betweenItemCnt;
    var beforeY2 = firstItemBBox.y2;
    for (var idx2 = 1; idx2 < items.length - 1; ++idx2) {
      var item2 = items[idx2];
      var childRect2 = item2.select("rect");
      childRect2.attr({ y: beforeY2 + interval });
      var bbox2 = childRect2.getBBox();
      beforeY2 = bbox2.y2;
    }
  }

  /**
   * @function templateInit
   * @name module:Template/TemplateMod.TemplateMod#templateInit
   * @description 초기화 설정한다.
   *
   * @Date : 2021. 5. 31
   */
  templateInit() {
    var layerDiv = document.createElement("div");
    layerDiv.id = _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_NAME;
    layerDiv.style.position = "absolute";
    layerDiv.style.top = "0px";
    layerDiv.style.width = "100%";
    layerDiv.style.zIndex = "99";
    var pdfContainer = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_PDF_VIEWER_CONTAINER
    );
    pdfContainer.appendChild(layerDiv);

    _templateMod.mainCanvas = Snap("100%", "100%");
    let viewer = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_PDF_VIEWER
    );
    viewer.appendChild(_templateMod.mainCanvas.node);
    _templateMod.mainCanvas.attr({
      style: "position: absolute; top: 0; z-index: 99",
    });
    let mainGroup = _templateMod.mainCanvas.group();
    mainGroup.attr({ id: _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MAIN_GROUP_NAME });
    _templateMod.mainCanvas.drag(
      _templateMod.dragmoveFunc,
      _templateMod.dragstartFunc,
      _templateMod.dragendFunc
    );
    viewer.setAttribute("tabindex", 0);
    document.body.addEventListener("keyup", _templateMod.keycheck, true);

    let asteriskLayer = document.createElement("div");
    asteriskLayer.id = _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_ASTERISK_NAME;
    asteriskLayer.style.position = "absolute";
    asteriskLayer.style.top = "0";
    asteriskLayer.style.zIndex = "98";
    asteriskLayer.style.width = "100%";
    viewer.appendChild(asteriskLayer);

    _templateMod.buildFieldformerList();
  }

  /**
   * @function templateMouseMoveEvent
   * @name module:Template/TemplateMod.TemplateMod#templateMouseMoveEvent
   * @description PDF위에 올라가는 Template 레이어에 필드를 움직일 때 발생하는 MOVE Event를 처리한다.
   *
   * @param {Object} event   event Object
   * @Date : 2021. 5. 31
   */
  templateMouseMoveEvent(event) {
    let templateRect = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_RECT_NAME
    );
    let target1 = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_NAME
    );
    let target2 = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_RECT_NAME
    );

    if (!(target1 === event.target || target2 === event.target)) {
      return false;
    }
    let offsetX = event.offsetX;
    let offsetY = event.offsetY;
    if (
      event.target === target2 &&
      !_utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.isEmptyObject(_templateMod.templateRectMousePosition)
    ) {
      offsetX =
        _templateMod.templateRectMousePosition.x +
        (event.pageX - _templateMod.templateRectMousePosition.ox);
      offsetY =
        _templateMod.templateRectMousePosition.y +
        (event.pageY - _templateMod.templateRectMousePosition.oy);
    }
    event.stopPropagation();
    _templateMod.templateRectMousePosition = {
      x: offsetX,
      y: offsetY,
      ox: event.pageX,
      oy: event.pageY,
    };

    (0,animejs_lib_anime_es_js__WEBPACK_IMPORTED_MODULE_0__["default"])({
      targets: templateRect,
      translateX: offsetX,
      translateY: offsetY,
      direction: "normal",
      loop: false,
      delay: animejs_lib_anime_es_js__WEBPACK_IMPORTED_MODULE_0__["default"].stagger(300, { easing: "easeOutElastic(1, .6)" }),
    });
  }

  /**
   * @function templateMouseUpEvent
   * @name module:Template/TemplateMod.TemplateMod#templateMouseUpEvent
   * @description PDF위에 올라가는 Template 레이어에 필드를 움직일 때 발생하는 mount up Event를 처리한다.
   *
   * @param {Object} event  event Object
   * @Date : 2021. 5. 31
   */
  templateMouseUpEvent(event) {
    _templateMod.removeTemplateRect();
    _templateMod.clearSelectedTool();

    var mainGroup = _templateMod.mainCanvas.select(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.MAIN_GROUP_NAME
    );
    var pageX = event.pageX;
    var pageRect = _templateMod.getPageBoundingClientRect();
    if (pageX < pageRect.x) {
      pageX = pageRect.x;
    } else if (pageX > pageRect.x + pageRect.width) {
      pageX =
        pageRect.x +
        pageRect.width -
        _templateMod.getCreateFieldDefaultWidth(
          _templateMod.selectAddFieldType
        );
    }
    var fieldGroup = _templateMod.createField(
      _templateMod.selectAddFieldType,
      pageX,
      event.pageY
    );
    mainGroup.append(fieldGroup);
  }

  /**
   * @function templateResize
   * @name module:Template/TemplateMod.TemplateMod#templateResize
   * @description template에서 사용되는 노드들의 사이즈를 재조정한다.
   *
   * @param {Object} event  event Object
   * @param {Number} height   리사이즈된 높이.
   * @Date : 2021. 5. 31
   */
  templateResize(event, height) {
    var templateLayer = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_NAME
    );
    templateLayer.style.height = height + "px";
    _templateMod.mainCanvas.attr({ height: height });
    _templateMod.pageBoundingBox.height = height;
    _templateMod.fieldRepositioning(event, true);

    let asteriskLayer = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_LAYER_ASTERISK_NAME
    );
    asteriskLayer.style.height = height + "px";

    var tempGBox = _templateMod.mainCanvas.select(
      "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME
    );
    if (tempGBox === null) {
      return;
    }
    var bbox = tempGBox.getBBox();
    _templateMod.removeDragOverGroup();
    _templateMod.createDragOverGroup(bbox);
  }

  /**
   * @function tmpGroupFtEvent
   * @name module:Template/TemplateMod.TemplateMod#tmpGroupFtEvent
   * @description 드래그해서 선택된 필드 그룹 FreeTransform의 이벤트를 처리한다.
   *
   * @param {String} eventName  FreeTransform에서 발생하는 이벤트 이름.
   * @Date : 2021. 5. 31
   */
  tmpGroupFtEvent(eventName) {
    if (eventName === "drag start" || eventName === "apply") {
      //hide attr
      if (_templateMod.isFieldDragStart === true) {
        return;
      }
      _templateMod.isFieldDragStart = true;
      _templateMod.hideFieldAttribute();

      var groups = _templateMod.mainCanvas.selectAll(
        "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME + " > g"
      );
      var oldDataArr = [];
      var newDataArr = [];
      var tempGOld = _templateMod.mainCanvas.select(
        "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME
      );
      groups.forEach((element) => {
        let childRect = element.select("rect");
        _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.showAsteriskDiv(
          _templateMod.ownerNode,
          childRect.attr("id"),
          false
        );
      });
    }
    if (eventName === "drag end") {
      _templateMod.isFieldDragStart = false;
      var groups = _templateMod.mainCanvas.selectAll(
        "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME + " > g"
      );
      var oldDataArr = [];
      var newDataArr = [];
      var tempGOld = _templateMod.mainCanvas.select(
        "#" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.DRAG_BOX_NAME
      );
      var fieldList = [];
      groups.forEach((element) => {
        let childRect = element.select("rect");
        let fieldId = childRect.attr("id");
        var oldData = _templateMod.getFieldJsonData(fieldId);
        oldDataArr.push(oldData);
        const tempGMatrix = tempGOld.transform().globalMatrix;
        _templateMod.changeFieldPosition(element, tempGMatrix, true);
        var newData = _templateMod.getFieldJsonData(fieldId);
        newDataArr.push(newData);
        fieldList.push(_templateMod.fieldDictionary[fieldId]);
      });
      tempGOld.transform(Snap.matrix().toTransformString());
      _templateMod.showFieldListAttribute(fieldList);
      _templateMod.addUndoRedoAct(
        _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.GROUP_ATTR_CHANGE_ACTION,
        oldDataArr,
        newDataArr
      );
      _templateMod.changeGroupBoxFreeTransform(tempGOld);
    }
  }

  /**
   * @function undoAction
   * @name module:Template/TemplateMod.TemplateMod#undoAction
   * @description  Undo를 처리한다.
   *
   * @Date : 2021. 5. 31
   */
  undoAction() {
    var idx = _templateMod.unredoActionIdx--;
    if (idx < 0) {
      _templateMod.unredoActionIdx = -1;
      return;
    }
    _templateMod.removeDragOverGroup();
    var data = _templateMod.unredoActionDict[idx];
    switch (data.action) {
      case _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.CREATE_FIELD_ACTION: {
        _templateMod.removeField(data.old);
        _templateMod.hideFieldAttribute();
        _templateMod.buildFieldformerList();
        return;
      }
      case _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.REMOVE_FIELD_ACTION:
      case _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.FIELD_ATTR_CHANGE_ACTION: {
        _templateMod.replaceFieldStringData(data.old);
        _templateMod.buildFieldformerList();
        return;
      }
      case _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.GROUP_REMOVE_ACTION:
      case _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.GROUP_ATTR_CHANGE_ACTION: {
        data.old.forEach((oldData) => {
          _templateMod.replaceFieldStringData(oldData);
        });
        _templateMod.buildFieldformerList();
        return;
      }
      case _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.GROUP_ATTR_OWNER_CHANGE_ACTION: {
        data.old.forEach((oldData) => {
          _templateMod.replaceFieldStringData(oldData);
        });
        _templateMod.buildFieldformerList();
        return;
      }
    }
  }

  /**
   * @function updateFieldPoint
   * @name module:Template/TemplateMod.TemplateMod#updateFieldPoint
   * @description  필드의 PDF좌표를 업데이트 한다.
   *
   * @param {Object} fieldGroup  SVG의 group 오브젝트
   *
   * @return {Boolean} 변경이 되지 않으면 false 변경이되면 true
   * @Date : 2021. 5. 31
   */
  updateFieldPoint(fieldGroup) {
    let childRect = fieldGroup.select("rect");
    var field = _templateMod.fieldDictionary[childRect.attr("id")];
    let ost = _templateMod.computePageOffset(field.pageNo);
    const viewer1 = _templateMod.ownerNode.querySelector(
      " #" + _Constants_js__WEBPACK_IMPORTED_MODULE_2__.CONSTANTS.TEMPLATE_PDF_VIEWER
    );
    const viewerBoundingRect = viewer1.getBoundingClientRect();
    var diffMatrix = _templateMod.mainCanvas.transform().diffMatrix;
    var childRectBBox = childRect.getBBox();
    field.x = childRectBBox.x;
    field.y = childRectBBox.y;
    field.width = childRectBBox.width;
    field.height = childRectBBox.height;
    field.pageNo = _templateMod.getPdfPageFromSvgPos(field.x, field.y);

    let pageBorderWidth = _templateMod.getPageBorderWidth(field.pageNo);

    let x =
      diffMatrix.x(childRectBBox.x, childRectBBox.y) +
      viewerBoundingRect.left -
      ost.left -
      pageBorderWidth.left;
    let y =
      diffMatrix.y(childRectBBox.x, childRectBBox.y) +
      viewerBoundingRect.top -
      ost.top -
      pageBorderWidth.top;
    const viewport = _templateMod.pdfViewer._pages[field.pageNo - 1].viewport;
    let pdfPoision = viewport.convertToPdfPoint(x, y);
    let pdfPoision2 = viewport.convertToPdfPoint(
      x + childRectBBox.width,
      y + childRectBBox.height
    );
    let isShow = false;
    if (field.required === "true") {
      isShow = true;
    }

    _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.showAsteriskDiv(
      _templateMod.ownerNode,
      childRect.attr("id"),
      isShow,
      childRectBBox.x,
      childRectBBox.y,
      childRectBBox.height
    );
    let oldPdfX = Number(field.pdfX);
    let oldPdfX2 = Number(field.pdfX2);
    let oldPdfY = Number(field.pdfY);
    let oldPdfY2 = Number(field.pdfY2);
    if (
      pdfPoision[0].toFixed(2) === oldPdfX.toFixed(2) &&
      pdfPoision[1].toFixed(2) === oldPdfY.toFixed(2) &&
      pdfPoision2[0].toFixed(2) === oldPdfX2.toFixed(2) &&
      pdfPoision2[1].toFixed(2) === oldPdfY2.toFixed(2)
    ) {
      return false;
    }
    field.pdfX = pdfPoision[0];
    field.pdfY = pdfPoision[1];
    field.pdfX2 = pdfPoision2[0];
    field.pdfY2 = pdfPoision2[1];

    return true;
  }

  appendFontFamily(fontFamilyArr) {
    _utils_utils_js__WEBPACK_IMPORTED_MODULE_1__.Utils.appendFontFamily(fontFamilyArr);
  }

  appendSignTabShowOpt(signTabShowDefOptVal) {
    if (signTabShowDefOptVal) {
      if (typeof signTabShowDefOptVal.useDrawSign !== "undefined") {
        _templateMod.useDrawSign = signTabShowDefOptVal.useDrawSign;
      }
      if (typeof signTabShowDefOptVal.useImageSign !== "undefined") {
        _templateMod.useImageSign = signTabShowDefOptVal.useImageSign;
      }
      if (typeof signTabShowDefOptVal.useRegSign !== "undefined") {
        _templateMod.useRegSign = signTabShowDefOptVal.useRegSign;
      }
    }
  }
}


/***/ }),

/***/ "./js/pdf_form/src/utils/color-picker.js":
/*!***********************************************!*\
  !*** ./js/pdf_form/src/utils/color-picker.js ***!
  \***********************************************/
/***/ (function(module) {

/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2021 Taufik Nurrohman
 *
 * <https://github.com/taufik-nurrohman/color-picker>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */

(function (global, factory) {
     true ? module.exports = factory() : 0;
})(this, function () {
    'use strict';
    var isArray = function isArray(x) {
        return Array.isArray(x);
    };
    var isDefined = function isDefined(x) {
        return 'undefined' !== typeof x;
    };
    var isFunction = function isFunction(x) {
        return 'function' === typeof x;
    };
    var isInstance = function isInstance(x, of) {
        return x && isSet(of) && x instanceof of;
    };
    var isNull = function isNull(x) {
        return null === x;
    };
    var isNumber = function isNumber(x) {
        return 'number' === typeof x;
    };
    var isNumeric = function isNumeric(x) {
        return /^-?(?:\d*.)?\d+$/.test(x + "");
    };
    var isObject = function isObject(x, isPlain) {
        if (isPlain === void 0) {
            isPlain = true;
        }
        if ('object' !== typeof x) {
            return false;
        }
        return isPlain ? isInstance(x, Object) : true;
    };
    var isSet = function isSet(x) {
        return isDefined(x) && !isNull(x);
    };
    var isString = function isString(x) {
        return 'string' === typeof x;
    };
    var fromJSON = function fromJSON(x) {
        var value = null;
        try {
            value = JSON.parse(x);
        } catch (e) { }
        return value;
    };
    var fromStates = function fromStates() {
        for (var _len = arguments.length, lot = new Array(_len), _key = 0; _key < _len; _key++) {
            lot[_key] = arguments[_key];
        }
        return Object.assign.apply(Object, [{}].concat(lot));
    };
    var fromValue = function fromValue(x) {
        if (isArray(x)) {
            return x.map(function (v) {
                return fromValue(x);
            });
        }
        if (isObject(x)) {
            for (var k in x) {
                x[k] = fromValue(x[k]);
            }
            return x;
        }
        if (false === x) {
            return 'false';
        }
        if (null === x) {
            return 'null';
        }
        if (true === x) {
            return 'true';
        }
        return "" + x;
    };
    var toCaseCamel = function toCaseCamel(x) {
        return x.replace(/[-_.](\w)/g, function (m0, m1) {
            return toCaseUpper(m1);
        });
    };
    var toCaseUpper = function toCaseUpper(x) {
        return x.toUpperCase();
    };
    var toCount = function toCount(x) {
        return x.length;
    };
    var toEdge = function toEdge(x, edges) {
        if (isSet(edges[0]) && x < edges[0]) {
            return edges[0];
        }
        if (isSet(edges[1]) && x > edges[1]) {
            return edges[1];
        }
        return x;
    };
    var toJSON = function toJSON(x) {
        return JSON.stringify(x);
    };
    var toNumber = function toNumber(x, base) {
        if (base === void 0) {
            base = 10;
        }
        return base ? parseInt(x, base) : parseFloat(x);
    };
    var toObjectCount = function toObjectCount(x) {
        return toCount(toObjectKeys(x));
    };
    var toObjectKeys = function toObjectKeys(x) {
        return Object.keys(x);
    };
    var toRound = function toRound(x) {
        return isNumber(x) ? Math.round(x) : null;
    };
    var toString = function toString(x, base) {
        if (base === void 0) {
            base = 10;
        }
        return isNumber(x) ? x.toString(base) : "" + x;
    };
    var toValue = function toValue(x) {
        if (isArray(x)) {
            return x.map(function (v) {
                return toValue(v);
            });
        }
        if (isNumeric(x)) {
            return toNumber(x);
        }
        if (isObject(x)) {
            for (var k in x) {
                x[k] = toValue(x[k]);
            }
            return x;
        }
        if ('false' === x) {
            return false;
        }
        if ('null' === x) {
            return null;
        }
        if ('true' === x) {
            return true;
        }
        return x;
    };
    var D = document;
    var W = window;
    var B = D.body;
    var R = D.documentElement;
    var getAttribute = function getAttribute(node, attribute, parseValue) {
        if (parseValue === void 0) {
            parseValue = true;
        }
        if (!hasAttribute(node, attribute)) {
            return null;
        }
        var value = node.getAttribute(attribute);
        return parseValue ? toValue(value) : value;
    };
    var getDatum = function getDatum(node, datum, parseValue) {
        if (parseValue === void 0) {
            parseValue = true;
        }
        var value = getAttribute(node, 'data-' + datum, parseValue),
            v = (value + "").trim();
        if (parseValue && v && ('[' === v[0] && ']' === v.slice(-1) || '{' === v[0] && '}' === v.slice(-1)) && null !== (v = fromJSON(value))) {
            return v;
        }
        return value;
    };
    var getParent = function getParent(node) {
        return node.parentNode || null;
    };
    var getState = function getState(node, state) {
        return hasState(node, state) && node[state] || null;
    };
    var getText = function getText(node, trim) {
        if (trim === void 0) {
            trim = true;
        }
        var state = 'textContent';
        if (!hasState(node, state)) {
            return false;
        }
        var content = node[state];
        content = trim ? content.trim() : content;
        return "" !== content ? content : null;
    };
    var hasAttribute = function hasAttribute(node, attribute) {
        return node.hasAttribute(attribute);
    };
    var hasState = function hasState(node, state) {
        return state in node;
    };
    var isWindow = function isWindow(node) {
        return node === W;
    };
    var letAttribute = function letAttribute(node, attribute) {
        return node.removeAttribute(attribute), node;
    };
    var letElement = function letElement(node) {
        var parent = getParent(node);
        return node.remove(), parent;
    };
    var setAttribute = function setAttribute(node, attribute, value) {
        if (true === value) {
            value = attribute;
        }
        return node.setAttribute(attribute, fromValue(value)), node;
    };
    var setAttributes = function setAttributes(node, attributes) {
        var value;
        for (var attribute in attributes) {
            value = attributes[attribute];
            if (value || "" === value || 0 === value) {
                setAttribute(node, attribute, value);
            } else {
                letAttribute(node, attribute);
            }
        }
        return node;
    };
    var setChildLast = function setChildLast(parent, node) {
        return parent.appendChild(node), node;
    };
    var setDatum = function setDatum(node, datum, value) {
        if (isArray(value) || isObject(value)) {
            value = toJSON(value);
        }
        return setAttribute(node, 'data-' + datum, value);
    };
    var setElement = function setElement(node, content, attributes) {
        node = isString(node) ? D.createElement(node) : node;
        if (isObject(content)) {
            attributes = content;
            content = false;
        }
        if (isString(content)) {
            setHTML(node, content);
        }
        if (isObject(attributes)) {
            setAttributes(node, attributes);
        }
        return node;
    };
    var setHTML = function setHTML(node, content, trim) {
        if (trim === void 0) {
            trim = true;
        }
        if (null === content) {
            return node;
        }
        var state = 'innerHTML';
        return hasState(node, state) && (node[state] = trim ? content.trim() : content), node;
    };
    var setState = function setState(node, key, value) {
        return node[key] = value, node;
    };
    var setStyle = function setStyle(node, style, value) {
        if (isNumber(value)) {
            value += 'px';
        }
        return node.style[toCaseCamel(style)] = fromValue(value), node;
    };
    var setText = function setText(node, content, trim) {
        if (trim === void 0) {
            trim = true;
        }
        if (null === content) {
            return node;
        }
        var state = 'textContent';
        return hasState(node, state) && (node[state] = trim ? content.trim() : content), node;
    };
    var offEvent = function offEvent(name, node, then) {
        node.removeEventListener(name, then);
    };
    var offEventDefault = function offEventDefault(e) {
        return e;// && e.preventDefault();
    };
    var offEvents = function offEvents(names, node, then) {
        names.forEach(function (name) {
            return offEvent(name, node, then);
        });
    };
    var onEvent = function onEvent(name, node, then, options) {
        if (options === void 0 || options === false) {
            var supportsPassive = false;
            try {
                var opts = Object.defineProperty({}, 'passive', {
                    get: function () {
                        supportsPassive = true;
                    }
                });
                window.addEventListener("testPassive", null, opts);
                window.removeEventListener("testPassive", null, opts);
            } catch (e) { }
            options = supportsPassive ? { passive: true } : false;
        }
        
        node.addEventListener(name, then, options);
    };
    var onEvents = function onEvents(names, node, then, options) {
        if (options === void 0) {
            options = false;
        }
        names.forEach(function (name) {
            return onEvent(name, node, then, options);
        });
    };

    function hook($) {
        var hooks = {};

        function fire(name, data) {
            if (!isSet(hooks[name])) {
                return $;
            }
            hooks[name].forEach(function (then) {
                return then.apply($, data);
            });
            return $;
        }

        function off(name, then) {
            if (!isSet(name)) {
                return hooks = {}, $;
            }
            if (isSet(hooks[name])) {
                if (isSet(then)) {
                    for (var i = 0, _j = hooks[name].length; i < _j; ++i) {
                        if (then === hooks[name][i]) {
                            hooks[name].splice(i, 1);
                            break;
                        }
                    } // Clean-up empty hook(s)
                    if (0 === j) {
                        delete hooks[name];
                    }
                } else {
                    delete hooks[name];
                }
            }
            return $;
        }

        function on(name, then) {
            if (!isSet(hooks[name])) {
                hooks[name] = [];
            }
            if (isSet(then)) {
                hooks[name].push(then);
            }
            return $;
        }
        $.hooks = hooks;
        $.fire = fire;
        $.off = off;
        $.on = on;
        return $;
    }
    var getAxis = function getAxis(event, node) {
        var touches = event.touches,
            x = touches ? touches[0].clientX : event.clientX,
            y = touches ? touches[0].clientY : event.clientY;
        if (node) {
            var rect = getRect(node);
            return [x - rect[0], y - rect[1], rect[0], rect[1]];
        }
        return [x, y];
    };
    var getRect = function getRect(node) {
        var h, rect, w, x, y, X, Y;
        if (isWindow(node)) {
            x = node.pageXOffset || R.scrollLeft || B.scrollLeft;
            y = node.pageYOffset || R.scrollTop || B.scrollTop;
            w = node.innerWidth;
            h = node.innerHeight;
        } else {
            rect = node.getBoundingClientRect();
            x = rect.left;
            y = rect.top;
            w = rect.width;
            h = rect.height;
            X = rect.right;
            Y = rect.bottom;
        }
        return [x, y, w, h, X, Y];
    };
    let name = 'CP',
        delay = W.setTimeout,
        hex = 'HEX';

    function getClosest(a, b) {
        if (a === b) {
            return a;
        }
        while ((a = a.parentElement) && a !== b);
        return a;
    } // Convert cursor position to RGBA
    function P2RGB(a) {
        let h = +a[0],
            s = +a[1],
            v = +a[2],
            r,
            g,
            b,
            i,
            f,
            p,
            q,
            t;
        i = Math.floor(h * 6);
        f = h * 6 - i;
        p = v * (1 - s);
        q = v * (1 - f * s);
        t = v * (1 - (1 - f) * s);
        i = i || 0;
        q = q || 0;
        t = t || 0;
        switch (i % 6) {
            case 0:
                r = v, g = t, b = p;
                break;
            case 1:
                r = q, g = v, b = p;
                break;
            case 2:
                r = p, g = v, b = t;
                break;
            case 3:
                r = p, g = q, b = v;
                break;
            case 4:
                r = t, g = p, b = v;
                break;
            case 5:
                r = v, g = p, b = q;
                break;
        }
        return [toRound(r * 255), toRound(g * 255), toRound(b * 255), isSet(a[3]) ? +a[3] : 1];
    } // Convert RGBA to HSVA
    function RGB2HSV(a) {
        let r = +a[0] / 255,
            g = +a[1] / 255,
            b = +a[2] / 255,
            max = Math.max(r, g, b),
            min = Math.min(r, g, b),
            h,
            s,
            v = max,
            d = max - min;
        s = max === 0 ? 0 : d / max;
        if (max === min) {
            h = 0; // Achromatic
        } else {
            switch (max) {
                case r:
                    h = (g - b) / d + (g < b ? 6 : 0);
                    break;
                case g:
                    h = (b - r) / d + 2;
                    break;
                case b:
                    h = (r - g) / d + 4;
                    break;
            }
            h /= 6;
        }
        return [h, s, v, isSet(a[3]) ? +a[3] : 1];
    }
    const EVENTS_DOWN = ['touchstart', 'mousedown'];
    const EVENTS_MOVE = ['touchmove', 'mousemove'];
    const EVENTS_RESIZE = ['orientationchange', 'resize'];
    const EVENTS_UP = ['touchend', 'mouseup'];

    function CP(source, state = {}) {
        if (!D) {
            D = document;
        }
        if (!W) {
            W = window;
        }
        if (!B) {
            B = D.body;
        }
        if (!R) {
            R = D.documentElement;
        }
        if (!source) return;
        const $ = this; // Return new instance if `CP` was called without the `new` operator
        if (!isInstance($, CP)) {
            return new CP(source, state);
        } // Already instantiated, skip!
        if (source[name]) {
            return;
        }
        let {
            fire,
            hooks
        } = hook($);
        $.state = state = fromStates(CP.state, isString(state) ? {
            color: state
        } : state || {});
        $.source = source;
        $.visible = false; // Store current instance to `CP.instances`
        CP.instances[source.id || source.name || toObjectCount(CP.instances)] = $; // Mark current DOM as active color picker to prevent duplicate instance
        source[name] = 1;

        function theValue(from) {
            let to = CP[isFunction(CP[state.color]) ? state.color : hex],
                theColor; // Get value from `data-color` attribute
            if (theColor = getDatum(source, 'color')) {
                if (isSet(from)) {
                    return setDatum(source, 'color', to(from));
                }
                return to(theColor);
            } // Get value from `value` attribute
            if (theColor = getState(source, 'value')) {
                if (isSet(from)) {
                    return setState(source, 'value', to(from));
                }
                return to(theColor);
            } // Get value from content
            if (theColor = getText(source)) {
                if (isSet(from)) {
                    return setText(source, to(from));
                }
                return to(theColor);
            }
            if (isSet(from)) {
                return; // Do nothing
            }
            return [0, 0, 0, 1]; // Default to black
        }
        let className = state['class'],
            doEnter,
            doExit,
            doFit,
            doResize,
            theColor = theValue(),
            theData = RGB2HSV(theColor),
            self = setElement('div', {
                'class': className
            }),
            C = setElement('div'),
            SV = setElement('div', {
                'class': className + ':sv'
            }),
            H = setElement('div', {
                'class': className + ':h'
            }),
            A = setElement('div', {
                'class': className + ':a'
            }),
            SVColor = setElement('div'),
            SVSaturation = setElement('div'),
            SVValue = setElement('div'),
            SVCursor = setElement('i'),
            HColor = setElement('div'),
            HCursor = setElement('i'),
            AColor = setElement('div'),
            APattern = setElement('div'),
            ACursor = setElement('i'),
            SVStarting = 0,
            HStarting = 0,
            AStarting = 0,
            SVDragging = 0,
            HDragging = 0,
            ADragging = 0;
        setChildLast(self, C);
        setChildLast(C, SV);
        setChildLast(C, H);
        setChildLast(C, A);
        setChildLast(SV, SVColor);
        setChildLast(SV, SVSaturation);
        setChildLast(SV, SVValue);
        setChildLast(SV, SVCursor);
        setChildLast(H, HColor);
        setChildLast(H, HCursor);
        setChildLast(A, AColor);
        setChildLast(A, APattern);
        setChildLast(A, ACursor);

        function doApply(isFirst, toParent) {
            // Refresh data
            theData = RGB2HSV(theColor = theValue());
            if (!isFirst) {
                setChildLast(toParent || state.parent || B, self);
                $.visible = true;
            }
            doEnter = toParent => {
                return doApply(0, toParent), fire('enter', theColor), $;
            };
            doExit = () => {
                if (getParent(self)) {
                    letElement(self);
                    $.current = null;
                    $.visible = false;
                }
                offEvents(EVENTS_DOWN, SV, doDownSV);
                offEvents(EVENTS_DOWN, H, doDownH);
                offEvents(EVENTS_DOWN, A, doDownA);
                offEvents(EVENTS_MOVE, D, doMove);
                offEvents(EVENTS_UP, D, doStop);
                offEvents(EVENTS_RESIZE, W, doResize);
                return fire('exit', theColor);
            };
            doFit = to => {
                let rootRect = getRect(R),
                    sourceRect = getRect(source),
                    winRect = getRect(W),
                    scrollBarHeight = winRect[3] - R.clientHeight,
                    // Horizontal scroll bar
                    scrollBarWidth = winRect[2] - rootRect[2],
                    // Vertical scroll bar
                    selfRect = getRect(self),
                    selfHeight = selfRect[3],
                    selfWidth = selfRect[2],
                    selfLeft = sourceRect[0] + winRect[0],
                    selfTop = sourceRect[1] + winRect[1] + sourceRect[3]; // Drop!
                if (isObject(to)) {
                    isSet(to[0]) && (selfLeft = to[0]);
                    isSet(to[1]) && (selfTop = to[1]);
                } else {
                    let minX = winRect[0],
                        minY = winRect[1],
                        maxX = winRect[0] + winRect[2] - selfWidth - scrollBarWidth,
                        maxY = winRect[1] + winRect[3] - selfHeight - scrollBarHeight;
                    selfLeft = toEdge(selfLeft, [minX, maxX]) >> 0;
                    selfTop = toEdge(selfTop, [minY, maxY]) >> 0;
                }
                setStyle(self, 'left', selfLeft);
                setStyle(self, 'top', selfTop);
                return fire('fit', theColor);
            };
            doResize = () => doFit();

            function doDownA(e) {
                $.current = A;
                AStarting = ADragging = 1;
                doMove(e);
                offEventDefault(e);
            }

            function doDownH(e) {
                $.current = H;
                HStarting = HDragging = 1;
                doMove(e);
                offEventDefault(e);
            }

            function doDownSV(e) {
                $.current = SV;
                SVStarting = SVDragging = 1;
                doMove(e);
                offEventDefault(e);
            }

            function doMove(e) {
                SVDragging && doSetSVCursor(e);
                HDragging && doSetHCursor(e);
                ADragging && doSetACursor(e);
                theColor = P2RGB(theData);
                if (SVDragging || HDragging || ADragging) {
                    fire(SVStarting || HStarting || AStarting ? 'start' : 'drag', theColor);
                    fire('change', theColor);
                }
                SVStarting = HStarting = AStarting = 0;
            }

            function doSetColor() {
                doSetCursor(theData);
                let a = P2RGB(theData),
                    b = P2RGB([theData[0], 1, 1]);
                setStyle(SVColor, 'background-color', 'rgb(' + b[0] + ',' + b[1] + ',' + b[2] + ')');
                setStyle(AColor, 'background-image', 'linear-gradient(rgb(' + a[0] + ',' + a[1] + ',' + a[2] + '),transparent)');
            }

            function doSetCursor(x) {
                isSet(x[1]) && setStyle(SVCursor, 'right', SVWidth - SVWidthCursor / 2 - SVWidth * +x[1]);
                isSet(x[2]) && setStyle(SVCursor, 'top', SVHeight - SVHeightCursor / 2 - SVHeight * +x[2]);
                isSet(x[0]) && setStyle(HCursor, 'top', HHeight - HHeightCursor / 2 - HHeight * +x[0]);
                isSet(x[3]) && setStyle(ACursor, 'top', AHeight - AHeightCursor / 2 - AHeight * +x[3]);
            }

            function doSetACursor(e) {
                theData[3] = (AHeight - toEdge(getAxis(e, A)[1], [0, AHeight])) / AHeight;
                doSetColor();
            }

            function doSetHCursor(e) {
                theData[0] = (HHeight - toEdge(getAxis(e, H)[1], [0, HHeight])) / HHeight;
                doSetColor();
            }

            function doSetSVCursor(e) {
                let SVPoint = getAxis(e, SV),
                    x = toEdge(SVPoint[0], [0, SVWidth]),
                    y = toEdge(SVPoint[1], [0, SVHeight]);
                theData[1] = 1 - (SVWidth - x) / SVWidth;
                theData[2] = (SVHeight - y) / SVHeight;
                doSetColor();
            }

            function doStop(e) {
                theColor = P2RGB(theData);
                let t = e.target,
                    isSource = source === getClosest(t, source),
                    isSelf = self === getClosest(t, self);
                $.current = null;
                if (!isSource && !isSelf) {
                    if (hooks.blur) {
                        fire('blur', theColor);
                    } else {
                        // Click outside the source or picker element to exit
                        if (SVDragging || HDragging || ADragging);
                        else {
                            getParent(self) && doExit();
                        }
                    }
                } else {
                    if (isSelf) {
                        if (SVDragging || HDragging || ADragging) {
                            fire('stop', theColor);
                        }
                    }
                }
                SVDragging = HDragging = ADragging = 0;
            }
            let SVRect = getRect(SV),
                SVRectCursor = getRect(SVCursor),
                HRect = getRect(H),
                HRectCursor = getRect(HCursor),
                ARect = getRect(A),
                ARectCursor = getRect(ACursor),
                SVHeight = SVRect[3],
                SVHeightCursor = SVRectCursor[3],
                SVWidth = SVRect[2],
                SVWidthCursor = SVRectCursor[2],
                HHeight = HRect[3],
                HHeightCursor = HRectCursor[3],
                AHeight = ARect[3],
                AHeightCursor = ARectCursor[3];
            if (isFirst) {
                onEvents(EVENTS_DOWN, source, doClick);
                delay(() => {
                    fire('change', theColor);
                }, 1);
            } else {
                onEvents(EVENTS_DOWN, SV, doDownSV);
                onEvents(EVENTS_DOWN, H, doDownH);
                onEvents(EVENTS_DOWN, A, doDownA);
                onEvents(EVENTS_MOVE, D, doMove);
                onEvents(EVENTS_UP, D, doStop);
                onEvents(EVENTS_RESIZE, W, doResize);
                doFit();
            }
            doSetColor();
            $.color = (r, g, b, a) => CP[isFunction(CP[state.color]) ? state.color : hex]([r, g, b, a]);
            $.current = null;
            $.enter = doEnter;
            $.exit = doExit;
            $.fit = doFit;
            $.get = () => theValue();
            $.pop = () => {
                if (!source[name]) {
                    return $; // Already ejected
                }
                delete source[name];
                offEvents(EVENTS_DOWN, source, doClick);
                return doExit(), fire('pop', theColor);
            };
            $.set = (r, g, b, a) => {
                theData = RGB2HSV([r, g, b, a]);
                return doSetColor(), $;
            };
            $.self = self;
            $.value = (r, g, b, a) => ($.set(r, g, b, a), fire('change', [r, g, b, a]));
        }
        doApply(1);

        function doClick(e) {
            if (hooks.focus) {
                fire('focus', theColor);
            } else {
                let t = e.target,
                    isSource = source === getClosest(t, source);
                if (isSource) {
                    !getParent(self) && doEnter(state.parent);
                } else {
                    doExit();
                }
            }
        }
        return $;
    }
    CP[hex] = x => {
        if (isString(x)) {
            let count = (x = x.trim()).length;
            if ((4 === count || 7 === count) && '#' === x[0]) {
                if (/^#([a-f\d]{3}){1,2}$/i.test(x)) {
                    if (4 === count) {
                        return [toNumber(x[1] + x[1], 16), toNumber(x[2] + x[2], 16), toNumber(x[3] + x[3], 16), 1];
                    }
                    return [toNumber(x[1] + x[2], 16), toNumber(x[3] + x[4], 16), toNumber(x[5] + x[6], 16), 1];
                }
            } else if ((5 === count || 9 === count) && '#' === x[0]) {
                if (/^#([a-f\d]{3,4}){1,2}$/i.test(x)) {
                    if (5 === count) {
                        return [toNumber(x[1] + x[1], 16), toNumber(x[2] + x[2], 16), toNumber(x[3] + x[3], 16), toNumber(x[4] + x[4], 16) / 255];
                    }
                    return [toNumber(x[1] + x[2], 16), toNumber(x[3] + x[4], 16), toNumber(x[5] + x[6], 16), toNumber(x[7] + x[8], 16) / 255];
                }
            }
            return [0, 0, 0, 1]; // Default to black
        }
        return '#' + ('000000' + toString(+x[2] | +x[1] << 8 | +x[0] << 16, 16)).slice(-6) + (isSet(x[3]) && x[3] < 1 ? toString(toRound(x[3] * 255) + 0x10000, 16).substr(-2) : "");
    };
    CP.instances = {};
    CP.state = {
        'class': 'color-picker',
        'color': hex,
        'parent': null
    };
    CP.version = '2.2.0';
    return CP;
});

/***/ }),

/***/ "./js/pdf_form/src/utils/utils.js":
/*!****************************************!*\
  !*** ./js/pdf_form/src/utils/utils.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Utils: () => (/* binding */ Utils)
/* harmony export */ });
/* harmony import */ var _Constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./../Constants.js */ "./js/pdf_form/src/Constants.js");
/* harmony import */ var _Translator_translator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../Translator/translator.js */ "./js/pdf_form/src/Translator/translator.js");
/**
 * @module Template/Utils
 */





/**
 * @description  Util 모음 Class
 *
 * @property {Array} fontFamilyComboBox {@link module:Template/Utils.Utils#fontFamilyComboBox}
 * @property {Array} dateFormatComboBox {@link module:Template/Utils.Utils#dateFormatComboBox}
 * @property {Array} fontSizeComboBox {@link module:Template/Utils.Utils#fontSizeComboBox}
 * @property {Array} signPenWidthComboBox {@link module:Template/Utils.Utils#signPenWidthComboBox}
 * @property {Array} userInfoOptionList {@link module:Template/Utils.Utils#userInfoOptionList}
 * @property {Number} userInfoOptionListCount {@link module:Template/Utils.Utils#userInfoOptionListCount}
 * @property {Array} dvFieldOptionList {@link module:Template/Utils.Utils#dvFieldOptionList}
 *
 * @property {Function} addObjectsToCanvas {@link module:Template/Utils.Utils#addObjectsToCanvas}
 * @property {Function} addSignSvgToCanvas {@link module:Template/Utils.Utils#addSignSvgToCanvas}
 * @property {Function} boundingRectToRect {@link module:Template/Utils.Utils#boundingRectToRect}
 * @property {Function} cloneFabricCanvas {@link module:Template/Utils.Utils#cloneFabricCanvas}
 * @property {Function} cloneObject {@link module:Template/Utils.Utils#cloneObject}
 * @property {Function} cloneObjectToObject {@link module:Template/Utils.Utils#cloneObjectToObject}
 * @property {Function} closeSelect2Tag {@link module:Template/Utils.Utils#closeSelect2Tag}
 * @property {Function} createAsteriskDiv {@link module:Template/Utils.Utils#createAsteriskDiv}
 * @property {Function} createAttrbutePopup {@link module:Template/Utils.Utils#createAttrbutePopup}
 * @property {Function} createAttributeCheckBoxNode {@link module:Template/Utils.Utils#createAttributeCheckBoxNode}
 * @property {Function} createAttributeColorInputNode {@link module:Template/Utils.Utils#createAttributeColorInputNode}
 * @property {Function} createAttributeDateInputNode {@link module:Template/Utils.Utils#createAttributeDateInputNode}
 * @property {Function} createAttributeInputNode {@link module:Template/Utils.Utils#createAttributeInputNode}
 * @property {Function} createAttributeInputNode {@link module:Template/Utils.Utils#createAttributeInputNode}
 * @property {Function} createAttributePanelNode {@link module:Template/Utils.Utils#createAttributePanelNode}
 * @property {Function} createAttributeSelectInnerNode {@link module:Template/Utils.Utils#createAttributeSelectInnerNode}
 * @property {Function} createAttributeSelectNode {@link module:Template/Utils.Utils#createAttributeSelectNode}
 * @property {Function} createAttributeToggleButtonNode {@link module:Template/Utils.Utils#createAttributeToggleButtonNode}
 * @property {Function} createDividerNode {@link module:Template/Utils.Utils#createDividerNode}
 * @property {Function} createFieldDeleteBtn {@link module:Template/Utils.Utils#createFieldDeleteBtn}
 * @property {Function} createTextAlignButtonNode {@link module:Template/Utils.Utils#createTextAlignButtonNode}
 * @property {Function} createTextAttrbuteNode {@link module:Template/Utils.Utils#createTextAttrbuteNode}
 * @property {Function} createTextBoldButtonNode {@link module:Template/Utils.Utils#createTextBoldButtonNode}
 * @property {Function} createTextColorButtonNode {@link module:Template/Utils.Utils#createTextColorButtonNode}
 * @property {Function} fieldAncestors {@link module:Template/Utils.Utils#fieldAncestors}
 * @property {Function} findSameAncestor {@link module:Template/Utils.Utils#findSameAncestor}
 * @property {Function} getFonSizeComboBox {@link module:Template/Utils.Utils#getFonSizeComboBox}
 * @property {Function} getUserInfoOptsList {@link module:Template/Utils.Utils#getUserInfoOptsList}
 * @property {Function} imageFileToBase64 {@link module:Template/Utils.Utils#imageFileToBase64}
 * @property {Function} isEmptyObject {@link module:Template/Utils.Utils#isEmptyObject}
 * @property {Function} isShowAsteriskDiv {@link module:Template/Utils.Utils#isShowAsteriskDiv}
 * @property {Function} isStringEmpty {@link module:Template/Utils.Utils#isStringEmpty}
 * @property {Function} mergeFieldsBBox {@link module:Template/Utils.mergeFieldsBBox#addObjectsToCanvas}
 * @property {Function} mergeObjectsRect {@link module:Template/Utils.Utils#mergeObjectsRect}
 * @property {Function} mergeRect {@link module:Template/Utils.Utils#mergeRect}
 * @property {Function} repositionFieldDeleteBtn {@link module:Template/Utils.Utils#repositionFieldDeleteBtn}
 * @property {Function} setDVFieldOptsList {@link module:Template/Utils.Utils#setDVFieldOptsList}
 * @property {Function} setUserInfoOptsList {@link module:Template/Utils.Utils#setUserInfoOptsList}
 * @property {Function} setUserInfoOptsListCount {@link module:Template/Utils.Utils#setUserInfoOptsListCount}
 * @property {Function} showAsteriskDiv {@link module:Template/Utils.Utils#showAsteriskDiv}
 * 
 * @FileName utils.js
 * @since 2021.05.31
 */
class Utils {

    /**
     * @static
     * @type {Array}
     * @name module:Template/Utils.Utils#fontFamilyComboBox
     * @description (Static) 폰트 종류
     */
    static fontFamilyComboBox = [
        {
            text: "맑은 고딕",
            value: "MalgunGothic"
        },
        {
            text: "바탕체",
            value: "Batang"
        }
    ];

    /**
     * @static
     * @type {Array}
     * @name module:Template/Utils.Utils#dateFormatComboBox
     * @description (Static) 날짜 포멧 리스트
     */
    static dateFormatComboBox = [
        {
            text: "YYYY-MM-DD",
            value: "Y-m-d"
        },
        {
            text: "YYYY/MM/DD",
            value: "Y/m/d"
        },
        {
            text: "YYYY.MM.DD",
            value: "Y.m.d"
        }
    ]

    static radioTypeList = [
        {
            text: "Type 1",
            value: _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.RADIO_TYPE_1
        },
        {
            text: "Type 2",
            value: _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.RADIO_TYPE_2
        }
    ]
    /**
     * @static
     * @type {Array}
     * @name module:Template/Utils.Utils#fontSizeComboBox
     * @description (Static) 폰트 사이즈 콤보박스 리스트
     */
    static fontSizeComboBox = [];

    /**
     * @static
     * @type {Array}
     * @name module:Template/Utils.Utils#signPenWidthComboBox
     * @description (Static) 서명펜 두께 콤보박스 리스트
     */
    static signPenWidthComboBox = [];

    /**
     * @static
     * @type {Array}
     * @name module:Template/Utils.Utils#userInfoOptionList
     * @description (Static) 서명자 리스트
     */
    static userInfoOptionList = [];

    /**
     * @static
     * @type {Number}
     * @name module:Template/Utils.Utils#userInfoOptionListCount
     * @description (Static) 서명자 리스트 갯수
     */
    static userInfoOptionListCount = 0;

    /**
     * @static
     * @type {Array}
     * @name module:Template/Utils.Utils#dvFieldOptionList
     * @description (Static) 기본값 옵션 리스트
     */
    static dvFieldOptionList = [];

    /**
     * @static
     * @type {Object}
     * @name module:Template/Utils.Utils#signTabShowOpt
     * @description (Static) 서명탭 보임/안보임 기본값 옵션
     */
    static signTabShowOpt = {};

    /**
     * @static
     * @type {String}
     * @name module:Template/Utils.Utils#locale
     * @description (Static) 현재 언어
     */
    static locale = "ko";

    /**
     * @static
     * @type {Object}
     * @name module:Template/Utils.Utils#translator
     * @description (Static) 다국어 사용을 위한 Object
     */
    static translator = new _Translator_translator_js__WEBPACK_IMPORTED_MODULE_1__["default"]({
        filesLocation: '/js/pdf_form/i18n'
    });

    /**
     *
     * @constructor
     * 
    */
    constructor() {
        
    }


    /**
     * @static
     * @function isEmptyObject
     * @name module:Template/Utils.Utils#isEmptyObject
     * @description (Static)  Object가 비어있는지 체크
     * 
     * @param {Object} param
     * @return {Boolean} param
     * @Date : 2021. 5. 31
     */
    static isEmptyObject(param) {
        if (param === undefined ||
            param === null) {
            return true;
        }
        return Object.keys(param).length === 0;
    }

    /**
     * @static
     * @function closeSelect2Tag
     * @name module:Template/Utils.Utils#closeSelect2Tag
     * @description (Static) Select2가 열려있는 태그를 체크하여 닫는다.
     *
     * @param {Element} node
     * @return {Boolean}
     * @Date : 2021. 5. 31
     */
    static closeSelect2Tag(node) {
        node.querySelectorAll("li ." + _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_SELECT_CLASS).forEach((el) => {
            if (el.classList.contains("select2-hidden-accessible")) {
                $(el).select2('close');
            }
        });
    }

    /**
     * @static
     * @function removeAllChildNode
     * @name module:Template/Utils.Utils#removeAllChildNode
     * @description (Static) 해당하는 Node의 모든 Child를 제거한다.
     *
     * @param {Element} node
     * @Date : 2021. 5. 31
     */
    static removeAllChildNode(node) {
        if (node === null) {
            return;
        }
        while (node.firstChild) {
            if (node.lastChild.id === _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_PANEL_ID) {
                Utils.closeSelect2Tag(node.lastChild);
            }
            node.removeChild(node.lastChild);
        }
    }

    /**
     * @static
     * @function createAttributePanelNode
     * @name module:Template/Utils.Utils#createAttributePanelNode
     * @description (Static) 필드의 속성을 보여줄 Panel를 생성한다.
     *
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createAttributePanelNode() {
        var panel = document.createElement("ul");
        panel.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_PANEL_CLASS;
        panel.id = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_PANEL_ID;

        return panel;
    }

    /**
     * @static
     * @function createAttributeInputNode
     * @name module:Template/Utils.Utils#createAttributeInputNode
     * @description (Static) 필드의 속성중 input을 사용하는 Element를 만든다.
     *
     * @param {String} fieldID 사용할 Field의 ID
     * @param {String} fieldPropetyName 사용할 Field의 속성 이름
     * @param {String} title  Element에 사용할 이름
     * @param {String} value  input에 들어갈 값
     * @param {String} nodeTooltip  ToolTip에 들어갈 내용
     * @param {callback} changeEventFunc  값이 변할 때 호출되어질 callback
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createAttributeInputNode(fieldId, fieldPropetyName, title, value, type, nodeTooltip, changeEventFunc) {
        var row = document.createElement("li");
        row.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_CONTENTS_ROW_CLASS;
        var titleWrap = document.createElement("div");
        titleWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_WRAP_CLASS;
        var titleSpan = document.createElement("span");
        titleSpan.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_CLASS;
        titleSpan.textContent = Utils.translateForKey(title);
        titleSpan.setAttribute("data-i18n", title);
        titleWrap.appendChild(titleSpan);
        var input = document.createElement("input");
        input.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_INPUT_CLASS;
        input.setAttribute("data-field-id", fieldId);
        input.setAttribute("data-field-property-name", fieldPropetyName);
        if (value !== "") {
            input.value = value;
        }
        if (type !== "" ) {
            input.type = type;
        }
        input.addEventListener("change", changeEventFunc, true);
        
        row.appendChild(titleWrap);
        row.appendChild(input);
        return row;
    }

    /**
     * @static
     * @function createAttributeInputNode
     * @name module:Template/Utils.Utils#createAttributeInputNode
     * @description (Static) 필드의 속성중 textare를 사용하는 Element를 만든다.
     *
     * @param {String} fieldID 사용할 Field의 ID
     * @param {String} fieldPropetyName 사용할 Field의 속성 이름
     * @param {String} title  Element에 사용할 이름
     * @param {String} value  textare에 들어갈 값
     * @param {callback} changeEventFunc 값이 변할 때 호출되어질 callback
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createAttributeTextAreaNode(fieldId, fieldPropetyName, title, value, type, changeEventFunc) {
        var row = document.createElement("li");
        row.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_CONTENTS_ROW_CLASS;
        var titleWrap = document.createElement("div");
        titleWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_WRAP_CLASS;
        var titleSpan = document.createElement("span");
        titleSpan.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_CLASS;
        titleSpan.textContent = Utils.translateForKey(title);
        titleWrap.appendChild(titleSpan);
        var textarea = document.createElement("textarea");
        textarea.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_TEXTAREA_CLASS;
        textarea.setAttribute("data-field-id", fieldId);
        textarea.setAttribute("data-field-property-name", fieldPropetyName);
        if (value !== "") {
            textarea.value = value;
        }
        if (type !== "") {
            textarea.type = type;
        }
        textarea.addEventListener("change", changeEventFunc, true);

        row.appendChild(titleWrap);
        row.appendChild(textarea);
        return row;
    }

    /**
     * @static
     * @function createAttributeCheckBoxNode
     * @name module:Template/Utils.Utils#createAttributeCheckBoxNode
     * @description (Static)  필드의 속성중 checkbox를 사용하는 Element를 만든다.
     *
     * @param {String} fieldID 사용할 Field의 ID
     * @param {String} fieldPropetyName 사용할 Field의 속성 이름
     * @param {String} title  Element에 사용할 이름
     * @param {String} value  input에 들어갈 값
     * @param {callback} changeEventFunc 값이 변할 때 호출되어질 callback
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createAttributeCheckBoxNode(fieldId, fieldPropetyName, title, value, changeEventFunc) {
        var row = document.createElement("li");
        row.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_CONTENTS_ROW_CLASS;

        var inputText = document.createElement("input");
        inputText.type = "text";
        inputText.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_INPUT_CLASS;
        inputText.setAttribute("data-field-id", fieldId);
        inputText.setAttribute("data-field-property-name", fieldPropetyName);
        inputText.style.display = "none";
        inputText.addEventListener("change", changeEventFunc, true);

        var input = document.createElement("input");
        input.type = "checkbox";
        input.id = fieldPropetyName + "_chkbox";
        input.addEventListener("change", function (evt) {
            if (input.checked) {
                inputText.value = "true";
            } else {
                inputText.value = "false";
            }
            inputText.dispatchEvent(new Event("change"));
        });

        if (value === 'true') {
            input.checked = true;
            inputText.value = "true";
        } else {
            input.checked = false;
            inputText.value = "false";
        }

        var checkBoxContainerNode = document.createElement("p");
        checkBoxContainerNode.className = "Attribute-Contents-Row-CheckBox-Container"
        checkBoxContainerNode.appendChild(input);
        var checkBoxLabelNode = document.createElement("label");
        checkBoxLabelNode.htmlFor = fieldPropetyName + "_chkbox";
        checkBoxLabelNode.textContent = title;
        checkBoxContainerNode.appendChild(checkBoxLabelNode);

        row.appendChild(checkBoxContainerNode);
        row.appendChild(inputText);
        return row;
    }

    /**
     * @static
     * @function createAttributeDateInputNode
     * @name module:Template/Utils.Utils#createAttributeDateInputNode
     * @description (Static)  필드의 속성중 Date를 사용하는 Element를 만든다.
     *
     * @param {String} fieldID  사용할 Field의 ID
     * @param {String} fieldPropetyName  사용할 Field의 속성 이름
     * @param {String} title  Element에 사용할 이름
     * @param {String} value  input에 들어갈 값
     * @param {String} nodeTooltip  ToolTip에 들어갈 내용
     * @param {callback} changeEventFunc  값이 변할 때 호출되어질 callback
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createAttributeDateInputNode(fieldId, fieldPropetyName, title, value, nodeTooltip, changeEventFunc) {
        var row = document.createElement("li");
        row.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_CONTENTS_ROW_CLASS;
        var titleWrap = document.createElement("div");
        titleWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_WRAP_CLASS;
        var titleSpan = document.createElement("span");
        titleSpan.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_CLASS;
        titleSpan.textContent = title;
        titleWrap.appendChild(titleSpan);
        var input = document.createElement("input");
        input.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_INPUT_CLASS;
        input.id = fieldPropetyName + "_date-picker";
        input.style.display = "none";
        input.setAttribute("data-field-id", fieldId);
        input.setAttribute("data-field-property-name", fieldPropetyName);
        if (value !== "") {
            input.value = value;
        }
        var inputPicker = document.createElement("input");
        inputPicker.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_DATE_INPUT_CLASS;
        if (value !== "") {
            inputPicker.value = value;
        }
        
        input.addEventListener("change", changeEventFunc, true);
        row.appendChild(titleWrap);
        row.appendChild(input);
        row.appendChild(inputPicker);
        return row;
    }

    /**
     * @static
     * @function createAttributeColorInputNode
     * @name module:Template/Utils.Utils#createAttributeColorInputNode
     * @description (Static) 필드의 속성중 Color Picker를 사용하는 Element를 만든다.
     *
     * @param {String} fieldID  사용할 Field의 ID
     * @param {String} fieldPropetyName  사용할 Field의 속성 이름
     * @param {String} title  Element에 사용할 이름
     * @param {String} value  input에 들어갈 값
     * @param {String} type  input의 type에 들어갈 값 - 사용하지 않음.
     * @param {String} nodeTooltip  ToolTip에 들어갈 내용
     * @param {callback} changeEventFunc  값이 변할 때 호출되어질 callback
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createAttributeColorInputNode(fieldId, fieldPropetyName, title, value, type, nodeTooltip, changeEventFunc) {
        var row = document.createElement("li");
        row.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_CONTENTS_ROW_CLASS;
        var titleWrap = document.createElement("div");
        titleWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_WRAP_CLASS;
        var titleSpan = document.createElement("span");
        titleSpan.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_CLASS;
        titleSpan.textContent = title;
        titleWrap.appendChild(titleSpan);
        var input = document.createElement("input");
        input.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_INPUT_CLASS;
        input.setAttribute("data-field-id", fieldId);
        input.setAttribute("data-field-property-name", fieldPropetyName);
        if (value !== "") {
            input.value = value;
        }
        input.type = "text";
        input.id = fieldId + "_color";
        input.addEventListener("change", changeEventFunc, true);
        
        var inputBtn = document.createElement("input");
        inputBtn.type = "button";
        var inputWrap = document.createElement("div");
        inputWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_INPUT_WRAP_CLASS;
        inputWrap.appendChild(input);
        inputWrap.appendChild(inputBtn);

        row.appendChild(titleWrap);
        row.appendChild(inputWrap);
        return row;
    }

    /**
     * @static
     * @function createAttributeToggleButtonNode
     * @name module:Template/Utils.Utils#createAttributeToggleButtonNode
     * @description (Static)  필드의 속성중 Toggle button을 사용하는 Element를 만든다.
     *
     * @param {String} fieldID  사용할 Field의 ID
     * @param {String} fieldPropetyName  사용할 Field의 속성 이름
     * @param {String} title  Element에 사용할 이름
     * @param {String} value  input에 들어갈 값
     * @param {callback} changeEventFunc  값이 변할 때 호출되어질 callback
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createAttributeToggleButtonNode(fieldId, fieldPropetyName, title, value, changeEventFunc) {
        var row = document.createElement("li");
        row.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_CONTENTS_ROW_CLASS;
        var rowWrap = document.createElement("div");
        rowWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_ROW_WRAP_CLASS;
        var titleSpan = document.createElement("span");
        titleSpan.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_CLASS;
        titleSpan.textContent = Utils.translateForKey(title);
        titleSpan.setAttribute("data-i18n", title);
        rowWrap.appendChild(titleSpan);
        
        var switchLabel = document.createElement("label");
        switchLabel.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SWITCH_LABEL_CLASS;

        var inputText = document.createElement("input");
        inputText.type = "text";
        inputText.setAttribute("data-field-id", fieldId);
        inputText.setAttribute("data-field-property-name", fieldPropetyName);
        inputText.style.display = "none";
        inputText.addEventListener("change", changeEventFunc, true);

        var input = document.createElement("input");
        input.type = "checkbox";
        input.addEventListener("change", function (evt) {
            if (input.checked) {
                inputText.value = true;
            } else {
                inputText.value = false;
            }
            inputText.dispatchEvent(new Event("change"));
        });
        if (value === 'true') {
            input.checked = true;
            inputText.value = "true";
        } else {
            input.checked = false;
            inputText.value = "false";
        }

        var sliderSpan = document.createElement("span");
        sliderSpan.classList.add(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SWITCH_LABEL_SLIDER_CLASS);
        sliderSpan.classList.add(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SWITCH_LABEL_SLIDER_ROUND_CLASS);

        switchLabel.appendChild(input);
        switchLabel.appendChild(sliderSpan);

        rowWrap.appendChild(switchLabel);
        rowWrap.appendChild(inputText);
        row.appendChild(rowWrap);
        return row;
    }

    /**
     * @static
     * @function createAttributeSelectInnerNode
     * @name module:Template/Utils.Utils#createAttributeSelectInnerNode
     * @description (Static)  필드의 속성중 Select를 사용하는 Element를 만든다.
     *
     * @param {String} fieldID 사용할 Field의 ID
     * @param {String} fieldPropetyName  사용할 Field의 속성 이름
     * @param {Array} options [{value: "value", text: "text"}] select에 사용되는 Map Array
     * @param { String} title Element에 사용할 이름
     * @param {Boolean} useDefaulOptionNode 대상선택을 사용할지 여부
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createAttributeSelectInnerNode(fieldId, fieldPropetyName, options, title, useDefaulOptionNode = true) {
        var rowWrap = document.createElement("div");
        rowWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_ROW_WRAP_CLASS;

        if (title !== "") {
            var titleWrap = document.createElement("div");
            titleWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_WRAP_CLASS;
            var titleSpan = document.createElement("span");
            titleSpan.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_CLASS;
            titleSpan.textContent = Utils.translateForKey(title);
            titleSpan.setAttribute("data-i18n", title);
            titleWrap.appendChild(titleSpan);
            rowWrap.appendChild(titleWrap);
        }

        var selectNode = document.createElement("select");
        selectNode.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_SELECT_CLASS;
        if (useDefaulOptionNode) {
            var defaultOptionNode = document.createElement("option");
            defaultOptionNode.value = "";
            defaultOptionNode.text = Utils.translateForKey("Template.selectDefaultText");
            defaultOptionNode.setAttribute("data-i18n", "Template.selectDefaultText");
            selectNode.appendChild(defaultOptionNode);
        }
        for (var idx = 0; idx < options.length; idx++) {
            var optionNode = document.createElement("option");
            optionNode.value = options[idx].value;
            optionNode.text = options[idx].text;
            selectNode.appendChild(optionNode);
        }

        selectNode.setAttribute("data-field-id", fieldId);
        selectNode.setAttribute("data-field-property-name", fieldPropetyName);
        
        rowWrap.appendChild(selectNode);
        return rowWrap;
    }

    /**
     * @static
     * @function createAttributeSelectNode
     * @name module:Template/Utils.Utils#createAttributeSelectNode
     * @description (Static)   필드의 속성중 Select를 사용하는 Element를 li로 감싸서 만든다.
     *
     * @param {String} fieldID 사용할 Field의 ID
     * @param {String} fieldPropetyName 사용할 Field의 속성 이름
     * @param {Array} options [{value: "value", text: "text"}] : select에 사용되는 Map Array
     * @param {String} title  Element에 사용할 이름
     * @param {Boolean} useDefaulOptionNode 대상선택을 사용할지 여부
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createAttributeSelectNode(fieldId, fieldPropetyName, options, title, useDefaulOptionNode = true) {
        var row = document.createElement("li");
        row.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_CONTENTS_ROW_CLASS;
        var rowWrap = Utils.createAttributeSelectInnerNode(fieldId, fieldPropetyName, options, title, useDefaulOptionNode);
        row.appendChild(rowWrap);
        return row;
    }

    /**
     * @static
     * @function createDividerNode
     * @name module:Template/Utils.Utils#createDividerNode
     * @description (Static)   li의 구분자를 만든다.
     *
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createDividerNode() {
        var dividerRow = document.createElement("li");
        dividerRow.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.DIVIDER_CLASS;
        return dividerRow;
    }

    /**
     * @static
     * @function createTextAlignButtonNode
     * @name module:Template/Utils.Utils#createTextAlignButtonNode
     * @description (Static)   필드의 속성중 Text Align Button Element을 만든다.
     *
     * @param {String} fieldID  사용할 Field의 ID
     * @param {String} value  현재의 text align 값
     * @param {callback} changeEventFunc 값이 변할 때 호출되어질 callback
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createTextAlignButtonNode(fieldId, value, changeEventFunc) {
        var rowWrap = document.createElement("div");
        rowWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_ROW_WRAP_CLASS;

        var titleWrap = document.createElement("div");
        titleWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_WRAP_CLASS;
        var titleSpan = document.createElement("span");
        titleSpan.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_CLASS;
        titleSpan.textContent = Utils.translateForKey("Template.textAlignText");
        titleSpan.setAttribute("data-i18n", "Template.textAlignText");
        titleWrap.appendChild(titleSpan);
        rowWrap.appendChild(titleWrap);

        var btnsWrap = document.createElement("div");
        var leftBtn = document.createElement("button");
        leftBtn.classList.add("Template-Button");
        leftBtn.classList.add("Text-Align-Left");
        leftBtn.classList.add("Toggle-Button");

        var leftIconBtn = document.createElement("i");
        leftBtn.appendChild(leftIconBtn);

        var centerBtn = document.createElement("button");
        centerBtn.classList.add("Template-Button");
        centerBtn.classList.add("Text-Align-Center");
        centerBtn.classList.add("Toggle-Button");

        var centerIconBtn = document.createElement("i");
        centerBtn.appendChild(centerIconBtn);

        var rightBtn = document.createElement("button");
        rightBtn.classList.add("Template-Button");
        rightBtn.classList.add("Text-Align-Right");
        rightBtn.classList.add("Toggle-Button");

        var rightIconBtn = document.createElement("i");
        rightBtn.appendChild(rightIconBtn);

        switch (value) {
            case "left":
                leftBtn.classList.add("Selected");
                break;
            case "center":
                centerBtn.classList.add("Selected");
                break;
            case "right":
                rightBtn.classList.add("Selected");
                break;
        }

        var inputNode = document.createElement("input");
        inputNode.type = "text";
        inputNode.style.display = "none";
        inputNode.value = value;
        inputNode.setAttribute("data-field-id", fieldId);
        inputNode.setAttribute("data-field-property-name", "textAlign");
        inputNode.addEventListener("change", changeEventFunc);

        leftBtn.addEventListener("click", function (evt) {
            inputNode.value = "left";
            inputNode.dispatchEvent(new Event("change"));
            if (!leftBtn.classList.contains("Selected")) {
                leftBtn.classList.toggle("Selected");
            }
            if (rightBtn.classList.contains("Selected")) {
                rightBtn.classList.toggle("Selected");
            }
            if (centerBtn.classList.contains("Selected")) {
                centerBtn.classList.toggle("Selected");
            }
            
        });
        centerBtn.addEventListener("click", function (evt) {
            inputNode.value = "center";
            inputNode.dispatchEvent(new Event("change"));
            if (!centerBtn.classList.contains("Selected")) {
                centerBtn.classList.toggle("Selected");
            }
            if (rightBtn.classList.contains("Selected")) {
                rightBtn.classList.toggle("Selected");
            }
            if (leftBtn.classList.contains("Selected")) {
                leftBtn.classList.toggle("Selected");
            }

        });
        rightBtn.addEventListener("click", function (evt) {
            inputNode.value = "right";
            inputNode.dispatchEvent(new Event("change"));
            if (!rightBtn.classList.contains("Selected")) {
                rightBtn.classList.toggle("Selected");
            }
            if (leftBtn.classList.contains("Selected")) {
                leftBtn.classList.toggle("Selected");
            }
            if (centerBtn.classList.contains("Selected")) {
                centerBtn.classList.toggle("Selected");
            }

        });

        btnsWrap.appendChild(leftBtn);
        btnsWrap.appendChild(centerBtn);
        btnsWrap.appendChild(rightBtn);
        btnsWrap.appendChild(inputNode);

        rowWrap.appendChild(btnsWrap);
        return rowWrap;
    }

    /**
     * @static
     * @function createTextBoldButtonNode
     * @name module:Template/Utils.Utils#createTextBoldButtonNode
     * @description (Static)  필드의 속성중 Text Bold toggle Button Element을 만든다.
     *
     * @param {String} fieldID  사용할 Field의 ID
     * @param {String} value  현재의 text bold 값
     * @param {callback} changeEventFunc 값이 변할 때 호출되어질 callback
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createTextBoldButtonNode(fieldId, value, changeEventFunc) {
        var rowWrap = document.createElement("div");
        rowWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_ROW_WRAP_CLASS;

        var titleWrap = document.createElement("div");
        titleWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_WRAP_CLASS;
        var titleSpan = document.createElement("span");
        titleSpan.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_CLASS;
        titleSpan.textContent = Utils.translateForKey("Template.boldText");
        titleSpan.setAttribute("data-i18n", "Template.boldText");
        titleWrap.appendChild(titleSpan);
        rowWrap.appendChild(titleWrap);

        var btnsWrap = document.createElement("div");
        var boldBtn = document.createElement("button");
        boldBtn.classList.add("Template-Button");
        boldBtn.classList.add("Text-Bold-Button");
        boldBtn.classList.add("Toggle-Button");

        var boldBtnIconBtn = document.createElement("i");
        boldBtn.appendChild(boldBtnIconBtn);

        if (value === "true") {
            boldBtn.classList.add("Selected");
        }

        var inputNode = document.createElement("input");
        inputNode.type = "text";
        inputNode.style.display = "none";
        inputNode.value = value;
        inputNode.setAttribute("data-field-id", fieldId);
        inputNode.setAttribute("data-field-property-name", "bold");
        inputNode.addEventListener("change", changeEventFunc);

        boldBtn.addEventListener("click", function (evt) {
            if (!boldBtn.classList.contains("Selected")) {
                inputNode.value = "true";
            } else {
                inputNode.value = "false";
            }
            inputNode.dispatchEvent(new Event("change"));
            boldBtn.classList.toggle("Selected");

        });

        btnsWrap.appendChild(boldBtn);
        btnsWrap.appendChild(inputNode);

        rowWrap.appendChild(btnsWrap);
        return rowWrap;
    }

    /**
     * @static
     * @function createTextColorButtonNode
     * @name module:Template/Utils.Utils#createTextColorButtonNode
     * @description (Static)  필드의 속성중 Text Color picker Element을 만든다.
     *
     * @param {String} fieldID  사용할 Field의 ID
     * @param {String} value  현재의 text color 값
     * @param {callback} changeEventFunc 값이 변할 때 호출되어질 callback
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createTextColorButtonNode(fieldId, title, value, changeEventFunc) {
        var rowWrap = document.createElement("div");
        rowWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_ROW_WRAP_CLASS;

        var titleWrap = document.createElement("div");
        titleWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_WRAP_CLASS;
        var titleSpan = document.createElement("span");
        titleSpan.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TITLE_CLASS;
        titleSpan.textContent = Utils.translateForKey(title);
        titleSpan.setAttribute("data-i18n", title);
        titleWrap.appendChild(titleSpan);
        rowWrap.appendChild(titleWrap);

        var btnsWrap = document.createElement("div");
        btnsWrap.className = "Color-Button-Wrap";

        var boldBtn = document.createElement("button");
        boldBtn.classList.add("Template-Button");
        boldBtn.classList.add("Color-Button");

        var inputNode = document.createElement("input");
        inputNode.type = "text";
        inputNode.style.display = "none";
        inputNode.value = value;
        inputNode.setAttribute("data-field-id", fieldId);
        inputNode.setAttribute("data-field-property-name", "fontColor");
        inputNode.addEventListener("change", changeEventFunc);

        btnsWrap.appendChild(boldBtn);
        btnsWrap.appendChild(inputNode);

        rowWrap.appendChild(btnsWrap);
        return rowWrap;
    }

    /**
     * @static
     * @function createTextAttrbuteNode
     * @name module:Template/Utils.Utils#createTextAttrbuteNode
     * @description (Static)  필드의 속성중 Text 속성의 Element들을 만든다.
     *
     * @param {String} fieldID  사용할 Field의 ID
     * @param {String} fontColor  현재의 Font Color 값
     * @param {String} fontAlign  현재의 text align 값
     * @param {String} isBold  현재의 text bold 값
     * @param {callback} changeEventFunc  값이 변할 때 호출되어질 callback
     * @return {Element}
     * @Date : 2021. 5. 31
     */
    static createTextAttrbuteNode(fieldId, fontColor, fontAlign, isBold, changeEventFunc) {
        var row = document.createElement("li");
        row.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_CONTENTS_ROW_CLASS;
        var rowWrap = document.createElement("div");
        rowWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_ROW_WRAP_CLASS;
        
        var fontAttrTable = document.createElement("table");
        fontAttrTable.style.width = "100%";
        var row1 = document.createElement("tr");
        var col1 = document.createElement("td");
        col1.style.paddingRight = "10px";
        col1.colSpan = 4;
        var fontFamilyCombo = Utils.createAttributeSelectInnerNode(fieldId, "fontName", Utils.fontFamilyComboBox, "Template.fontNameText", false);
        col1.appendChild(fontFamilyCombo);
        row1.appendChild(col1);

        var col2 = document.createElement("td");
        col2.colSpan = 4;
        var fontSizeCombo = Utils.createAttributeSelectInnerNode(fieldId, "fontSize", Utils.getFonSizeComboBox(), "Template.fontSizeText", false);
        col2.appendChild(fontSizeCombo);
        row1.appendChild(col2);

        fontAttrTable.appendChild(row1);

        var row2 = document.createElement("tr");
        var col3 = document.createElement("td");
        col3.style.paddingRight = "10px";
        col3.style.paddingTop = "20px";
        col3.colSpan = 4;
        row2.appendChild(col3);

        var alignBtnsNode = Utils.createTextAlignButtonNode(fieldId, fontAlign, changeEventFunc);
        col3.appendChild(alignBtnsNode);

        var col4 = document.createElement("td");
        col4.style.paddingRight = "10px";
        col4.style.paddingTop = "20px";
        col4.colSpan = 2;
        var boldBtnNode = Utils.createTextBoldButtonNode(fieldId, isBold, changeEventFunc);
        col4.appendChild(boldBtnNode);
        row2.appendChild(col4);

        var col5 = document.createElement("td");
        col5.style.paddingRight = "10px";
        col5.style.paddingTop = "20px";
        col5.colSpan = 2;
        var colorBtnNode = Utils.createTextColorButtonNode(fieldId, "Template.colorText", fontColor, changeEventFunc);
        col5.appendChild(colorBtnNode);
        row2.appendChild(col5);

        fontAttrTable.appendChild(row2);
        rowWrap.appendChild(fontAttrTable);
        row.appendChild(rowWrap);
        
        return {
            row: row,
            fontFamilyCombo: fontFamilyCombo,
            fontSizeCombo: fontSizeCombo,
            colorBtn: colorBtnNode
        };
    }

     /**
     * @static
     * @function createTextAttrbuteNode
     * @name module:Template/Utils.Utils#createTextMemoAttrbuteNode
     * @description (Static)  메모 속성의 Element들을 만든다.
     *
     * @param {String} fieldID  사용할 Field의 ID
     * @param {String} fontColor  현재의 Font Color 값
     * @param {String} fontAlign  현재의 text align 값
     * @param {String} isBold  현재의 text bold 값
     * @param {callback} changeEventFunc  값이 변할 때 호출되어질 callback
     * @return {Element}
     * @Date : 2021. 5. 31
     */
     static createTextMemoAttrbuteNode(fieldId, fontColor, isBold, backgroundColor, changeEventFunc) {
        let row = document.createElement("li");
        row.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_CONTENTS_ROW_CLASS;
        let rowWrap = document.createElement("div");
        rowWrap.className = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_ROW_WRAP_CLASS;
        
        let fontAttrTable = document.createElement("table");
        fontAttrTable.style.width = "100%";
        let row1 = document.createElement("tr");
        let col1 = document.createElement("td");
        col1.style.paddingRight = "10px";
        col1.colSpan = 4;
        let fontFamilyCombo = Utils.createAttributeSelectInnerNode(fieldId, "fontName", Utils.fontFamilyComboBox, "Template.fontNameText", false);
        col1.appendChild(fontFamilyCombo);
        row1.appendChild(col1);

        let col2 = document.createElement("td");
        col2.colSpan = 4;
        let fontSizeCombo = Utils.createAttributeSelectInnerNode(fieldId, "fontSize", Utils.getFonSizeComboBox(), "Template.fontSizeText", false);
        col2.appendChild(fontSizeCombo);
        row1.appendChild(col2);

        fontAttrTable.appendChild(row1);

        let row2 = document.createElement("tr");

        let col4 = document.createElement("td");
        col4.style.paddingRight = "10px";
        col4.style.paddingTop = "20px";
        col4.colSpan = 2;
        let boldBtnNode = Utils.createTextBoldButtonNode(fieldId, isBold, changeEventFunc);
        col4.appendChild(boldBtnNode);
        row2.appendChild(col4);

        let col5 = document.createElement("td");
        col5.style.paddingRight = "10px";
        col5.style.paddingTop = "20px";
        col5.colSpan = 2;
        let colorBtnNode = Utils.createTextColorButtonNode(fieldId, "Template.colorText", fontColor, changeEventFunc);
        col5.appendChild(colorBtnNode);
        row2.appendChild(col5);

        
        let col6 = document.createElement("td");
        col6.style.paddingRight = "10px";
        col6.style.paddingTop = "20px";
        col6.colSpan = 2;
        let backgroundColorBtnNode = Utils.createTextColorButtonNode(fieldId, "Template.bgColorText", backgroundColor, changeEventFunc);
        col6.appendChild(backgroundColorBtnNode);
        row2.appendChild(col6);

        fontAttrTable.appendChild(row2);
        rowWrap.appendChild(fontAttrTable);
        row.appendChild(rowWrap);
        
        return {
            row: row,
            fontFamilyCombo: fontFamilyCombo,
            fontSizeCombo: fontSizeCombo,
            boldBtn: boldBtnNode,
            colorBtn: colorBtnNode,
            backgroundColorBtn: backgroundColorBtnNode
        };
    }

    /**
     * @static
     * @function assign
     * @name module:Template/Utils.Utils#assign
     * @description (Static)  object에 해당 속성이 있으면 값을 설정한다.
     *
     * @param {Object} obj  사용할 Object
     * @param {Object} prop  사용할 속성
     * @param {Object} value  속성에 사용할 값
     * @Date : 2021. 5. 31
     */
    static assign(obj, prop, value) {
        if (typeof prop === "string")
            prop = prop.split(".");

        if (prop.length > 1) {
            var e = prop.shift();
            assign(obj[e] =
                    Object.prototype.toString.call(obj[e]) === "[object Object]"
                    ? obj[e]
                    : {},
                prop,
                value);
        } else
            obj[prop[0]] = value;
    }

    /**
     * @static
     * @function fieldAncestors
     * @name module:Template/Utils.Utils#fieldAncestors
     * @description (Static) Field에 상속된 부모들을 찾는다..
     *
     * @param {Object} anyclass : 찾을 field
     * @return {Array}: 상속된 부모들
     * @Date : 2021. 5. 31
     */
    static fieldAncestors (anyclass)
    {
        switch (true) {
        case (anyclass === undefined): return;
        case (anyclass === null): return [];
        default:
            return [anyclass, ...(Utils.fieldAncestors (Object.getPrototypeOf (anyclass)))];
        }
    }

    /**
     * @static
     * @function findSameAncestor
     * @name module:Template/Utils.Utils#findSameAncestor
     * @description (Static)  Field들의 공통으로 상속된 부모를 찾는다..
     *
     * @param {Array}  fieldList 찾을 field 리스트
     * @return {Object}  공통으로 상속된 부모
     * @Date : 2021. 5. 31
     */
    static findSameAncestor(fieldList) {
        // 첫번째 필드의 조상들을 조사한다.
        var firstAncestors = Utils.fieldAncestors(fieldList[0]);
        var sameAncestor = firstAncestors[0];
        // 필드의 갯수가 1개이면 그냥 리턴한다.
        if (fieldList.length === 1) {
            return sameAncestor;
        }
        var cnt = 0;
        // 2번째 필드부터 루프를 한다.
        for (var idx = 1; idx < fieldList.length; idx++) {
            var ancestors = Utils.fieldAncestors(fieldList[idx]);
            // 부모가 1개이면 BaseField이므로 그대로 리턴한다.
            if (ancestors.length === 1) {
                return ancestors[0];
            }
            var startIdx = 0;
            // 첫번째 필드의 조상을 루프하는 index이므로 1부터 시작한다.
            var startIdx2 = 1;

            // 현재 공통으로 선택된 필드의 조상보다 지금 조사하는 필드의 조상이 갯수가 적으면 
            // 전부 조사할 필요가 없이 둘의 차이나는 만큼 부터 조사한다.
            // ex) TextField와 ImageField를 비교해보면
            // Text TextBase Base, Image Base 이렇게 조상들이 존재한다.
            // 이렇게 1번째는 무조건 다르니 1번째는 패스하고 다음부터 조사를 한다.
            const sameAncestorParents = Utils.fieldAncestors(sameAncestor);
            if (sameAncestorParents.length >= ancestors.length) {
                startIdx = sameAncestorParents.length - ancestors.length;
            }
            for (var secIdx = startIdx; secIdx < ancestors.length; secIdx++) {
                var ancestor = ancestors[secIdx];
                var findSameAncestor = false;
                
                for (var firstIdx = startIdx2; firstIdx < firstAncestors.length; firstIdx++) {
                    cnt++;
                    if (Object.getPrototypeOf(ancestor) == Object.getPrototypeOf(firstAncestors[firstIdx])) {
                        // 같을 경우 +1을 하는 이유는 prototype의 constructor가 하나 위를 바라보기 때문이다.
                        sameAncestor = firstAncestors[firstIdx + 1];
                        const sameAncestorParents = Utils.fieldAncestors(sameAncestor);
                        // 길이가 2면 BaseField이므로 그대로 리턴한다.
                        if (sameAncestorParents.length === 2) {
                            return sameAncestor;
                        }
                        findSameAncestor = true;
                        startIdx2 = firstIdx + 1;
                        break;
                    }
                }
                if (findSameAncestor) {
                    break;
                }
            }
        }
        return sameAncestor;
    }

    static findSameAncestor2(fieldList) {
        if (fieldList.length === 1) {
            return fieldList[0];
        }
        const firstFieldAncestors = fieldList[0].ancestors();
        let commonAncestor = firstFieldAncestors[0];
        for (let idx = 1; idx < fieldList.length; ++idx) {
            if (commonAncestor === "BF") {
                return commonAncestor;
            }
            const fieldAncestors = fieldList[idx].ancestors();
            if (fieldAncestors.includes(commonAncestor)) {
                continue;
            }

            for (let idx2 = 1; idx2 < firstFieldAncestors.length; ++idx2) {
                if (fieldAncestors.includes(firstFieldAncestors[idx2])) {
                    commonAncestor = firstFieldAncestors[idx2];
                    break;
                }
            }
        }
        return commonAncestor;
    }

    /**
     * @static
     * @function getUserInfoOptsList
     * @name module:Template/Utils.Utils#getUserInfoOptsList
     * @description (Static)  서명자들의 정보 리스트를 반환한다.
     *
     * @return {Array} 서명자들의 정보 리스트
     * @Date : 2021. 5. 31
     */
    static getUserInfoOptsList() {
        return Utils.userInfoOptionList;
    }

    /**
     * @static
     * @function setUserInfoOptsList
     * @name module:Template/Utils.Utils#setUserInfoOptsList
     * @description (Static)  서명자들의 정보 리스트를 설정한다.
     *
     * @param {Array} fieldList  서명자들의 정보 리스트
     * @Date : 2021. 5. 31
     */
    static setUserInfoOptsList(opts) {
        Utils.userInfoOptionList = opts;
    }

    /**
     * @static
     * @function getUserInfoOptsListCount
     * @name module:Template/Utils.Utils#getUserInfoOptsListCount
     * @description (Static) 서명자들의 정보 리스트 길이를 반환한다.
     *
     * @return {Number}: 서명자들의 정보 리스트길이
     * @Date : 2021. 5. 31
     */
    static getUserInfoOptsListCount() {
        return Utils.userInfoOptionListCount;
    }

    /**
     * @static
     * @function setUserInfoOptsListCount
     * @name module:Template/Utils.Utils#setUserInfoOptsListCount
     * @description (Static)  서명자들의 정보 리스트 길이를 설정한다.
     *
     * @param {Number} fieldList 서명자들의 정보 리스트 길이
     * @Date : 2021. 5. 31
     */
    static setUserInfoOptsListCount(count) {
        Utils.userInfoOptionListCount = count;
    }


    /**
     * @static
     * @function getDVFieldOptsList
     * @name module:Template/Utils.Utils#getDVFieldOptsList
     * @description (Static)   기본값으로 사용할 값들의 리스트를 반환한다.
     *
     * @return {Array} 기본값으로 사용할 값들의 리스트
     * @Date : 2021. 5. 31
     */
    static getDVFieldOptsList() {
        return Utils.dvFieldOptionList;
    }

    /**
     * @static
     * @function setDVFieldOptsList
     * @name module:Template/Utils.Utils#setDVFieldOptsList
     * @description (Static)  기본값으로 사용할 값들의 리스트를 설정한다.
     *
     * @param fieldList {Array}  기본값으로 사용할 값들의 리스트
     * @Date : 2021. 5. 31
     */
    static setDVFieldOptsList(opts) {
        Utils.dvFieldOptionList = opts;
    }

    /**
     * @static
     * @function getSignTabShowOpt
     * @name module:Template/Utils.Utils#getSignTabShowOpt
     * @description (Static)   서명탭 보임/안보임 기본값으로 사용할 값들을 반환한다.
     *
     * @return {Array} 서명탭 보임/안보임 기본값으로 사용할 값들 
     * @Date : 2023. 12. 27
     */
    static getSignTabShowOpt() {
        return Utils.signTabShowOpt;
    }

    /**
     * @static
     * @function setSignTabShowOpt
     * @name module:Template/Utils.Utils#setSignTabShowOpt
     * @description (Static)  서명탭 보임/안보임 기본값으로 사용할 값들을 설정한다.
     *
     * @param signTabShowOpt {Object}  서명탭 보임/안보임 기본값으로 사용할 값들
     * @Date : 2023. 12. 27
     */
    static setSignTabShowOpt(opts) {
        Utils.signTabShowOpt = opts;
    }

    /**
     * @static
     * @function getFonSizeComboBox
     * @name module:Template/Utils.Utils#getFonSizeComboBox
     * @description (Static)  속성에서 사용할 폰트 사이즈 리스트를 반환한다.
     *
     * @return {Array} 속성에서 사용할 폰트 사이즈 리스트
     * @Date : 2021. 5. 31
     */
    static getFonSizeComboBox() {
        if (Utils.fontSizeComboBox.length > 0) {
            return Utils.fontSizeComboBox;
        }
        for (var idx = 1; idx <= 50; idx++) {
            Utils.fontSizeComboBox.push({
                text: idx + "px",
                value: idx
            });
        }
        return Utils.fontSizeComboBox;
    }

    /**
     * @static
     * @function getSignPenWidthComboBox
     * @name module:Template/Utils.Utils#getSignPenWidthComboBox
     * @description (Static) 속성에서 사용할 펜 두께 리스트를 반환한다.
     *
     * @return {Array} 속성에서 사용할 펜 두께 리스트
     * @Date : 2021. 5. 31
     */
    static getSignPenWidthComboBox() {
        //console.log(Utils.signPenWidthComboBox.length);
        if (Utils.signPenWidthComboBox.length > 0) {
            return Utils.signPenWidthComboBox;
        }
        for (var idx = 1; idx <= 20; idx += 1) {
            Utils.signPenWidthComboBox.push({
                text: idx,
                value: idx
            });
        }
        return Utils.signPenWidthComboBox;
    }

    /**
     * @static
     * @function createAttrbutePopup
     * @name module:Template/Utils.Utils#createAttrbutePopup
     * @description (Static) 속성 팝업의 Element를 만든다.
     *
     * @param {Element} ownerNode 해당 프로젝트의 최상단 Element를 감싸고 있는 Element
     * @return {Element} 속성 팝업의 element
     * @Date : 2021. 5. 31
     */
    static createAttrbutePopup(ownerNode, ownerFieldBBox) {
        let attrDiv = ownerNode.querySelector(" ." + _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_CLASS);
        if (attrDiv === null) {
            attrDiv = document.createElement("div");
            attrDiv.classList.add(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.EDITOR_ATTR_CLASS);
            attrDiv.classList.add(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SHOW_CLASS);
            let viewer = ownerNode.querySelector(" #" + _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TEMPLATE_PDF_VIEWER);
            viewer.appendChild(attrDiv);
        } else {
            Utils.removeAllChildNode(attrDiv);
        }
        if (!attrDiv.classList.contains(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SHOW_CLASS)) {
            attrDiv.classList.add(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SHOW_CLASS);
        }
        attrDiv.style.display = "block";
        if (ownerFieldBBox !== null && ownerFieldBBox !== undefined) {
            attrDiv.style.left = ownerFieldBBox.x + "px";
            attrDiv.style.top = ownerFieldBBox.y + ownerFieldBBox.height + 10 + "px";
        }
        return attrDiv;
    }

    /**
     * @static
     * @function showAsteriskDiv
     * @name module:Template/Utils.Utils#showAsteriskDiv
     * @description (Static) 필수 표시 마크를 보이거나 숨긴다.
     *
     * @param {Element} ownerNode  해당 프로젝트의 최상단 Element를 감싸고 있는 Element
     * @param {String} fieldId  필수 마크가 사용되는 필드의 id
     * @param {Boolean} isShow  true면 보이고 false면 숨긴다.
     * @param {Number} fieldX  필수 마크가 사용되는 필드의 x좌표
     * @param {Number} fieldY  필수 마크가 사용되는 필드의 y좌표
     * @param {Number} fieldHeight  필수 마크가 사용되는 필드의 높이
     * @Date : 2021. 5. 31
     */
    static showAsteriskDiv(ownerNode, fieldId, isShow, fieldX, fieldY, fieldHeight) {
        let asteriskDiv = ownerNode.querySelector(" #" + fieldId + "_asterisk");
        if (asteriskDiv === null) {
            return;
        }
    //    console.log("showAsteriskDiv   " + isShow);
        if (isShow) {
            if (fieldX === null || fieldY === null || fieldHeight === null ||
                fieldX === undefined || fieldY === undefined || fieldHeight === undefined) {
                return;
            }
            let asteriskHeight = _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.ASTREISK_DIV_HEIGHT;
            asteriskDiv.style.left = (fieldX - 6 - asteriskHeight) + "px";
            let asteriskY = fieldY + (fieldHeight / 2) - (asteriskHeight / 2);
            asteriskDiv.style.top = asteriskY + "px";

            if (!asteriskDiv.classList.contains(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SHOW_CLASS)) {
                asteriskDiv.classList.toggle(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SHOW_CLASS);
            }
            if (asteriskDiv.classList.contains(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.HIDE_CLASS)) {
                asteriskDiv.classList.toggle(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.HIDE_CLASS);
            }
            return;
        }

        if (asteriskDiv.classList.contains(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SHOW_CLASS)) {
            asteriskDiv.classList.toggle(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SHOW_CLASS);
        }
        if (!asteriskDiv.classList.contains(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.HIDE_CLASS)) {
            asteriskDiv.classList.toggle(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.HIDE_CLASS);
        }
    }

    /**
     * @static
     * @function createAsteriskDiv
     * @name module:Template/Utils.Utils#createAsteriskDiv
     * @description (Static) 필수 표시 마크의 Element를 만든다.
     *
     * @param {Element} ownerNode 해당 프로젝트의 최상단 Element를 감싸고 있는 Element
     * @param {String} fieldId  필수 마크가 사용되는 필드의 id
     * @return {Element} 필수 표시 마크의 element
     * @Date : 2021. 5. 31
     */
    static createAsteriskDiv(ownerNode, fieldId) {
        let asteriskDiv = ownerNode.querySelector(" #" + fieldId + "_asterisk");
        if (asteriskDiv === null) {
            asteriskDiv = document.createElement("div");
            asteriskDiv.classList.add(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.ASTERISK_ICON_CLASS);
            asteriskDiv.style.position = "absolute"
            asteriskDiv.style.width = "11px";
            asteriskDiv.style.height = "12px";
            let layerDiv = ownerNode.querySelector(" #" + _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TEMPLATE_LAYER_ASTERISK_NAME);
            layerDiv.appendChild(asteriskDiv);
        }
        return asteriskDiv;
    }
    /**
     * @static
     * @function isShowAsteriskDiv
     * @name module:Template/Utils.Utils#isShowAsteriskDiv
     * @description (Static) 필수 표시 마크가 보이는지 여부를 반환한다.
     *
     * @param {Element} ownerNode  해당 프로젝트의 최상단 Element를 감싸고 있는 Element
     * @param {String} fieldId  필수 마크가 사용되는 필드의 id
     * @Date : 2021. 5. 31
     */
    static isShowAsteriskDiv(ownerNode, fieldId) {
        let asteriskDiv = ownerNode.querySelector(" #" + fieldId + "_asterisk");
        if (asteriskDiv === null) {
            return false;
        }

        if (asteriskDiv.classList.contains(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SHOW_CLASS)) {
            return true;
        }
        if (asteriskDiv.classList.contains(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.HIDE_CLASS)) {
            return false;
        }
        return false;
    }

    /**
     * @static
     * @function createFieldDeleteBtn
     * @name module:Template/Utils.Utils#createFieldDeleteBtn
     * @description (Static) 필드의 Delete버튼의 Element를 만든다.
     *
     * @param {Element} ownerNode  해당 프로젝트의 최상단 Element를 감싸고 있는 Element
     * @param {CallBack} btnClickEvtHandler  버튼을 눌렀을 때 동작할 Handler
     * @return {Element} 필드의 Delete버튼의 element
     * @Date : 2021. 5. 31
     */
    static createFieldDeleteBtn(ownerNode, btnClickEvtHandler) {
        let deleteBtnDiv = ownerNode.querySelector(" ." + _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.FIELD_DELETE_BUTTON_CLASS);
        if (deleteBtnDiv === null) {
            deleteBtnDiv = document.createElement("div");
            deleteBtnDiv.classList.add(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.FIELD_DELETE_BUTTON_CLASS);
            deleteBtnDiv.classList.add(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SHOW_CLASS);
            let viewer = ownerNode.querySelector(" #" + _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TEMPLATE_PDF_VIEWER);
            viewer.appendChild(deleteBtnDiv);
        }
        if (!deleteBtnDiv.classList.contains(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SHOW_CLASS)) {
            deleteBtnDiv.classList.add(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.SHOW_CLASS);
        }
        if (deleteBtnDiv.classList.contains(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.HIDE_CLASS)) {
            deleteBtnDiv.classList.toggle(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.HIDE_CLASS);
        }
        
        deleteBtnDiv.addEventListener("click", btnClickEvtHandler);
        return deleteBtnDiv;
    }

    /**
     * @static
     * @function repositionFieldDeleteBtn
     * @name module:Template/Utils.Utils#repositionFieldDeleteBtn
     * @description (Static) 필드의 Delete버튼의 위치를 조정한다.
     *
     * @param {Element} ownerNode  해당 프로젝트의 최상단 Element를 감싸고 있는 Element
     * @param {Number} x  Field의 X좌표
     * @param {Number} y  Field의 y좌표
     * @param {Number} width  Field의 width
     * @return {Element} 필드의 Delete버튼의 element
     * @Date : 2021. 5. 31
     */
    static repositionFieldDeleteBtn(ownerNode, x, y, width) {

        let deleteBtnDiv = ownerNode.querySelector(" ." + _Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.FIELD_DELETE_BUTTON_CLASS);
        if (deleteBtnDiv === null) {
            console.log("deleteBtnDiv empty");
            return;
        }
        if (deleteBtnDiv.classList.contains(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.HIDE_CLASS)) {
            deleteBtnDiv.classList.toggle(_Constants_js__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.HIDE_CLASS);
        }
        deleteBtnDiv.style.left = x + width + 10 + "px";
        deleteBtnDiv.style.top = y + 10 + "px";
    }

    /**
     * @static
     * @function addSignSvgToCanvas
     * @name module:Template/Utils.Utils#addSignSvgToCanvas
     * @description (Static) canvas에 SVG를 추가한다.
     *
     * @param {Object} field  추가할 canvas의 Sign Field Object
     * @param {Element} canvasDiv  canvas의 Element
     * @param {Number} signWidth  서명필드의 Width
     * @param {Number} signHeight  서명필드의 height
     * @param {String} svg  SVG String
     * @return {Object} Fabric canvas Object: SVG데이터가 추가된 Canvas
     * @Date : 2021. 5. 31
     */
    static addSignSvgToCanvas(field, canvasDiv, signWidth, signHeight, svg) {
        let canvasObj = canvasDiv;
        if (canvasDiv === null || canvasDiv === undefined) {
            canvasObj = field.m_id + "_canvas";
        }
        let staticCanvs1 = new fabric.StaticCanvas(canvasObj, { isDrawingMode: false });
        staticCanvs1.setHeight(signHeight);
        staticCanvs1.setWidth(signWidth);

        fabric.loadSVGFromString(svg, function (objects, options) {
            var obj = fabric.util.groupSVGElements(objects, options);
            let xScale = staticCanvs1.width / obj.width;
            let yScale = staticCanvs1.height / obj.height;
            const scale1 = xScale > yScale ? yScale : xScale;
            obj.scale(scale1);

            obj.strokeWidth = obj.strokeWidth / scale1;
            if (obj._objects !== null && obj._objects !== undefined) {
                let objects = obj._objects;
                for (var idx = 0; idx < objects.length; ++idx) {
                    objects[idx].strokeWidth = objects[idx].strokeWidth / scale1;
                }
            }
            staticCanvs1.add(obj).centerObject(obj).renderAll();
            obj.setCoords();
        }, 
         null,
         {crossOrigin: 'anonymous' // CORS 설정
        });
        return staticCanvs1;
    }

    /**
     * @static
     * @function addObjectsToCanvas
     * @name module:Template/Utils.Utils#addObjectsToCanvas
     * @description (Static) canvas에 Objects를 추가한다.
     *
     * @param {Element} ownerNode  해당 프로젝트의 최상단 Element를 감싸고 있는 Element
     * @param {Object} field  추가할 canvas의 Sign Field Object
     * @param {Element} canvasDiv  canvas의 Element
     * @param {Number} signWidth  서명필드의 Width
     * @param {Number} signHeight  서명필드의 height
     * @param {Array} objects  : Path의 리스트
     * @param {Number} orgWidth  추가될 Objects의 Width
     * @param {Number} orgHeight  : 추가될 Objects의 height
     * @return {Object} Fabric canvas Object: Objects가 추가된 Canvas
     * @Date : 2021. 5. 31
     */
    static addObjectsToCanvas(_ownerNode, field, canvasDiv, signWidth, signHeight, objects, orgWidth, orgHeight) {
        let canvasObj = canvasDiv;
        if (canvasDiv === null || canvasDiv === undefined) {
            let canvasId = field.m_id + "_canvas";
            canvasObj = _ownerNode.querySelector("#" + canvasId);
        }
        let staticCanvs1 = new fabric.StaticCanvas(canvasObj, { isDrawingMode: false });
        staticCanvs1.setHeight(signHeight);
        staticCanvs1.setWidth(signWidth);
        let xScale = staticCanvs1.width / orgWidth;
        let yScale = staticCanvs1.height / orgHeight;
        const scale1 = xScale > yScale ? yScale : xScale;
       // console.log(scale1);
        fabric.util.enlivenObjects(objects, function (objs) {
            var origRenderOnAddRemove = staticCanvs1.renderOnAddRemove;
            staticCanvs1.renderOnAddRemove = false;
            let gotoCenter = true;
            if (objs.length > 1) {
                gotoCenter = false;
            }

            objs.forEach(function (o) {
                let left = o.left * scale1;
                let top = o.top * scale1;
                if (gotoCenter) {
                   left = ((staticCanvs1.width - o.width * scale1) / 2);
                   top = ((staticCanvs1.height - o.height * scale1) / 2);                    
                }
                o.set({
                    left: left,
                    top: top,
                    scaleY: scale1,
                    scaleX: scale1,
                    strokeWidth: o.strokeWidth / scale1
                });
                staticCanvs1.add(o);
            });

            staticCanvs1.renderOnAddRemove = origRenderOnAddRemove;
            staticCanvs1.renderAll();
            staticCanvs1.calcOffset();
            if (objs.length > 1) {
                var objs = staticCanvs1.getObjects();
                var group = new fabric.Group(objs, {
                });
                group.set({
                    left: ((staticCanvs1.width - group.width ) / 2),
                    top: ((staticCanvs1.height - group.height ) / 2)
                })
                group.setCoords();
                staticCanvs1.renderAll();
            }
        });

        return staticCanvs1;
    }

    /**
     * @static
     * @function cloneObject
     * @name module:Template/Utils.Utils#cloneObject
     * @description (Static)  Object deep copy
     *
     * @param {Object} toObj  복사할 object
     * @return {Object}  복사된 object
     * @Date : 2021. 5. 31
     */
    static cloneObject(obj) {
        var clone = {};
        for (var key in obj) {
            if (typeof obj[key] == "object" && obj[key] != null) {
                if (Array.isArray(obj[key])) {
                    clone[key] = [...obj[key]];
                } else {
                    clone[key] = Utils.cloneObject(obj[key]);
                }
            } else {
                clone[key] = obj[key];
            }
        }

        return clone;
    }

    /**
     * @static
     * @function cloneObjectToObject
     * @name module:Template/Utils.Utils#cloneObjectToObject
     * @description (Static) fromObj의 데이터를 toObj로 deep copy
     *
     * @param {Object} fromObj 복사할 object
     * @param {Object} toObj  복사될 object
     * @return {Object} 복사된 object
     * @Date : 2021. 5. 31
     */
    static cloneObjectToObject(fromObj, toObj) {
        for (var key in fromObj) {
            if (key === "pages" || key === "fields") {
                continue;
            }
            if (typeof fromObj[key] == "object" && fromObj[key] != null) {
                toObj[key] = Utils.cloneObject(fromObj[key]);
            } else {
                toObj[key] = fromObj[key];
            }
        }

        return toObj;
    }

    /**
     * @static
     * @function cloneFabricCanvas
     * @name module:Template/Utils.Utils#cloneFabricCanvas
     * @description (Static)  canvas에 Objects를 추가한다.
     *
     * @param {Object} canvasObj  Object가 추가될 Canvas
     * @param {Array}  objects 복사될 Object의 리스트
     * @Date : 2021. 5. 31
     */
    static cloneFabricCanvas(canvasObj, objects) {
        fabric.util.enlivenObjects(objects, function (objs) {
            var origRenderOnAddRemove = canvasObj.renderOnAddRemove;
            canvasObj.renderOnAddRemove = false;

            objs.forEach(function (o) {
                canvasObj.add(o);
            });
            canvasObj.renderOnAddRemove = origRenderOnAddRemove;
            canvasObj.renderAll();
            canvasObj.calcOffset();
        });
    }

    /**
     * @static
     * @function isStringEmpty
     * @name module:Template/Utils.Utils#isStringEmpty
     * @description (Static) 문자열이 비어있는지 확인한다.
     *
     * @param {String} str 확인할 문자열
     * @return {Boolean} 비어있으면 true 비어있지 않으면 false
     * @Date : 2021. 5. 31
     */
    static isStringEmpty(str) {
        if (str === null) {
            return true;
        }
        if (str === "") {
            return true;
        }
        if (str === undefined) {
            return true;
        }
        return false;
    }

    /**
     * @static
     * @function mergeRect
     * @name module:Template/Utils.Utils#mergeRect
     * @description (Static)  두 Rect를 합친다.
     *
     * @param {Object} r1 {left: 0, right: 0, top: 0, right: 0} 합쳐야되는 Rect Object
     * @param {Object} r2 {left: 0, right: 0, top: 0, right: 0} 합쳐야되는 Rect Object
     * @return {Object} {left: 0, right: 0, top: 0, right: 0, x: 0, y: 0, width: 0, height: 0}: 합쳐진 Rect
     * @Date : 2021. 5. 31
     */
    static mergeRect(r1, r2) {
        return {
            left: Math.min(r1.left, r2.left),
            top: Math.min(r1.top, r2.top),
            right: Math.max(r1.right, r2.right),
            bottom: Math.max(r1.bottom, r2.bottom),
            x: Math.min(r1.left, r2.left),
            y: Math.min(r1.top, r2.top),
            width: Math.abs(Math.max(r1.right, r2.right) - Math.min(r1.left, r2.left)),
            height: Math.abs(Math.max(r1.bottom, r2.bottom) - Math.min(r1.top, r2.top)),
        }
    }

    /**
     * @static
     * @function boundingRectToRect
     * @name module:Template/Utils.Utils#boundingRectToRect
     * @description (Static) BoundingRect를 여기서 사용할 Rect Object로 변경
     *
     * @param {Object} rect {left: 0, with: 0, width: 0, height: 0} Bounding Rect Object
     * @return {Object} {left: 0, right: 0, top: 0, right: 0}: 여기서 사용할 Rect Object
     * @Date : 2021. 5. 31
     */
    static boundingRectToRect(rect) {
        return {
            left: rect.left,
            top: rect.top,
            right: rect.left + rect.width,
            bottom: rect.top + rect.height
        }
    }

    /**
     * @static
     * @function mergeObjectsRect
     * @name module:Template/Utils.Utils#mergeObjectsRect
     * @description (Static) Canvas의 Path Objects의 Rect들을 하나로 합친다.
     *
     * @param {Object} canvas Fabric canvas: Path Objects가 있는 canvas
     * @return {Object} {left: 0, right: 0, top: 0, right: 0}: 여기서 사용할 Rect Object
     * @Date : 2021. 5. 31
     */
    static mergeObjectsRect(canvas) {
        let rect = null;
        canvas.forEachObject(function (obj) {
            var bound = obj.getBoundingRect();
            if (rect === null) {
                rect = Utils.mergeRect(Utils.boundingRectToRect(bound), Utils.boundingRectToRect(bound));
            } else {
                rect = Utils.mergeRect(rect, Utils.boundingRectToRect(bound));
            }
        })
        return rect;
    }

    /**
     * @static
     * @function mergeFieldsBBox
     * @name module:Template/Utils.Utils#mergeFieldsBBox
     * @description (Static) Field List의 BBox들을 하나로 합친다.
     *
     * @param {Array} fields Field의 배열
     * @return {Object} {left: 0, right: 0, top: 0, right: 0}: 여기서 사용할 Rect Object
     * @Date : 2021. 5. 31
     */
    static mergeFieldsBBox(fields) {
        let rect = null;
        for (var idx = 0; idx < fields.length; idx += 1) {
            let bound = fields[idx].getBBox();
            if (rect === null) {
                rect = Utils.mergeRect(Utils.boundingRectToRect(bound), Utils.boundingRectToRect(bound));
            } else {
                rect = Utils.mergeRect(rect, Utils.boundingRectToRect(bound));
            }
        }
        return rect;
    }

    /**
     * @static
     * @function imageFileToBase64
     * @name module:Template/Utils.Utils#imageFileToBase64
     * @description (Static) Image파일을 읽어 Base64 String으로 반환한다.
     *
     * @param {Object} file File: 이미지 파일의 File Object
     * @param {Callback} callBackFunc  Base64 문자열을 받을 callback function
     * @Date : 2021. 5. 31
     */
    static imageFileToBase64(file, callBackFunc) {
        if (file === undefined || file === null) {
            return null;
        }
        if (!file.type.startsWith('image/')) { return null; }

        var reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = function () {
            callBackFunc(reader.result);
        };
        reader.onerror = function (error) {
            console.log('Error: ', error);
        };
    }

    /**
     * @static
     * @function changeLocale
     * @name module:Template/Utils.Utils#changeLocale
     * @description (Static) 현재 언어를 파라미터에 맞게 변환한다.
     *
     * @param {String} locale 바꿀 언어
     * @Date : 2021. 5. 31
     */
    static changeLocale(locale) {
        Utils.locale = locale;
        Utils.translator.translatePageTo(locale);
    }

    /**
     * @static
     * @function translateForKey
     * @name module:Template/Utils.Utils#translateForKey
     * @description (Static) 키에 해당하는 문자열을 현재 언어로 바꾼다.
     *
     * @param {String} key 바꿀 문자열에 해당하는 키
     * @Date : 2021. 5. 31
     */
    static translateForKey(key) {
        return Utils.translator.translateForKey(key, Utils.locale);
    }

    /**
     * @static
     * @function translatorFileLocation
     * @name module:Template/Utils.Utils#translatorFileLocation
     * @description (Static) 다국어 언어 파일의 위치를 지정한다.
     * @example
     * localhost:5500/js/pdf_form/i18n의 경우  "/js/pdf_form/i18n"
     * 
     * @param {String} filesLocation 언어파일의 위치(절대 경로)
     * @Date : 2021. 5. 31
     */
    static translatorFileLocation(filesLocation) {
        Utils.translator.config.filesLocation = filesLocation;
    }

    /**
     * @static
     * @function addTranslator
     * @name module:Template/Utils.Utils#addTranslator
     * @description (Static) 다국어 언어를 추가한다.
     * @example
     * addTranslator("jp", jsonData)
     * 
     * @param {String} locale 언어 이름
     * @param {Object} langData i18n/ko.json과 같은 양식으로 된 JSON을 파싱한 데이터
     * @Date : 2021. 5. 31
     */
    static addTranslator(locale, langData) {
        Utils.translator.add(locale, langData);
    }

    static appendFontFamily(fontFamilyArr) {
        Utils.fontFamilyComboBox = Utils.fontFamilyComboBox.concat(fontFamilyArr);
    }

    static generate_uuidv4() {
        return Math.random().toString(36).substring(2, 15) +
        Math.random().toString(36).substring(2, 15);
     }
}


/***/ }),

/***/ "./node_modules/animejs/lib/anime.es.js":
/*!**********************************************!*\
  !*** ./node_modules/animejs/lib/anime.es.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/*
 * anime.js v3.2.1
 * (c) 2020 Julian Garnier
 * Released under the MIT license
 * animejs.com
 */

// Defaults

var defaultInstanceSettings = {
  update: null,
  begin: null,
  loopBegin: null,
  changeBegin: null,
  change: null,
  changeComplete: null,
  loopComplete: null,
  complete: null,
  loop: 1,
  direction: 'normal',
  autoplay: true,
  timelineOffset: 0
};

var defaultTweenSettings = {
  duration: 1000,
  delay: 0,
  endDelay: 0,
  easing: 'easeOutElastic(1, .5)',
  round: 0
};

var validTransforms = ['translateX', 'translateY', 'translateZ', 'rotate', 'rotateX', 'rotateY', 'rotateZ', 'scale', 'scaleX', 'scaleY', 'scaleZ', 'skew', 'skewX', 'skewY', 'perspective', 'matrix', 'matrix3d'];

// Caching

var cache = {
  CSS: {},
  springs: {}
};

// Utils

function minMax(val, min, max) {
  return Math.min(Math.max(val, min), max);
}

function stringContains(str, text) {
  return str.indexOf(text) > -1;
}

function applyArguments(func, args) {
  return func.apply(null, args);
}

var is = {
  arr: function (a) { return Array.isArray(a); },
  obj: function (a) { return stringContains(Object.prototype.toString.call(a), 'Object'); },
  pth: function (a) { return is.obj(a) && a.hasOwnProperty('totalLength'); },
  svg: function (a) { return a instanceof SVGElement; },
  inp: function (a) { return a instanceof HTMLInputElement; },
  dom: function (a) { return a.nodeType || is.svg(a); },
  str: function (a) { return typeof a === 'string'; },
  fnc: function (a) { return typeof a === 'function'; },
  und: function (a) { return typeof a === 'undefined'; },
  nil: function (a) { return is.und(a) || a === null; },
  hex: function (a) { return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a); },
  rgb: function (a) { return /^rgb/.test(a); },
  hsl: function (a) { return /^hsl/.test(a); },
  col: function (a) { return (is.hex(a) || is.rgb(a) || is.hsl(a)); },
  key: function (a) { return !defaultInstanceSettings.hasOwnProperty(a) && !defaultTweenSettings.hasOwnProperty(a) && a !== 'targets' && a !== 'keyframes'; },
};

// Easings

function parseEasingParameters(string) {
  var match = /\(([^)]+)\)/.exec(string);
  return match ? match[1].split(',').map(function (p) { return parseFloat(p); }) : [];
}

// Spring solver inspired by Webkit Copyright © 2016 Apple Inc. All rights reserved. https://webkit.org/demos/spring/spring.js

function spring(string, duration) {

  var params = parseEasingParameters(string);
  var mass = minMax(is.und(params[0]) ? 1 : params[0], .1, 100);
  var stiffness = minMax(is.und(params[1]) ? 100 : params[1], .1, 100);
  var damping = minMax(is.und(params[2]) ? 10 : params[2], .1, 100);
  var velocity =  minMax(is.und(params[3]) ? 0 : params[3], .1, 100);
  var w0 = Math.sqrt(stiffness / mass);
  var zeta = damping / (2 * Math.sqrt(stiffness * mass));
  var wd = zeta < 1 ? w0 * Math.sqrt(1 - zeta * zeta) : 0;
  var a = 1;
  var b = zeta < 1 ? (zeta * w0 + -velocity) / wd : -velocity + w0;

  function solver(t) {
    var progress = duration ? (duration * t) / 1000 : t;
    if (zeta < 1) {
      progress = Math.exp(-progress * zeta * w0) * (a * Math.cos(wd * progress) + b * Math.sin(wd * progress));
    } else {
      progress = (a + b * progress) * Math.exp(-progress * w0);
    }
    if (t === 0 || t === 1) { return t; }
    return 1 - progress;
  }

  function getDuration() {
    var cached = cache.springs[string];
    if (cached) { return cached; }
    var frame = 1/6;
    var elapsed = 0;
    var rest = 0;
    while(true) {
      elapsed += frame;
      if (solver(elapsed) === 1) {
        rest++;
        if (rest >= 16) { break; }
      } else {
        rest = 0;
      }
    }
    var duration = elapsed * frame * 1000;
    cache.springs[string] = duration;
    return duration;
  }

  return duration ? solver : getDuration;

}

// Basic steps easing implementation https://developer.mozilla.org/fr/docs/Web/CSS/transition-timing-function

function steps(steps) {
  if ( steps === void 0 ) steps = 10;

  return function (t) { return Math.ceil((minMax(t, 0.000001, 1)) * steps) * (1 / steps); };
}

// BezierEasing https://github.com/gre/bezier-easing

var bezier = (function () {

  var kSplineTableSize = 11;
  var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);

  function A(aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1 }
  function B(aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1 }
  function C(aA1)      { return 3.0 * aA1 }

  function calcBezier(aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT }
  function getSlope(aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1) }

  function binarySubdivide(aX, aA, aB, mX1, mX2) {
    var currentX, currentT, i = 0;
    do {
      currentT = aA + (aB - aA) / 2.0;
      currentX = calcBezier(currentT, mX1, mX2) - aX;
      if (currentX > 0.0) { aB = currentT; } else { aA = currentT; }
    } while (Math.abs(currentX) > 0.0000001 && ++i < 10);
    return currentT;
  }

  function newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {
    for (var i = 0; i < 4; ++i) {
      var currentSlope = getSlope(aGuessT, mX1, mX2);
      if (currentSlope === 0.0) { return aGuessT; }
      var currentX = calcBezier(aGuessT, mX1, mX2) - aX;
      aGuessT -= currentX / currentSlope;
    }
    return aGuessT;
  }

  function bezier(mX1, mY1, mX2, mY2) {

    if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) { return; }
    var sampleValues = new Float32Array(kSplineTableSize);

    if (mX1 !== mY1 || mX2 !== mY2) {
      for (var i = 0; i < kSplineTableSize; ++i) {
        sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);
      }
    }

    function getTForX(aX) {

      var intervalStart = 0;
      var currentSample = 1;
      var lastSample = kSplineTableSize - 1;

      for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {
        intervalStart += kSampleStepSize;
      }

      --currentSample;

      var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);
      var guessForT = intervalStart + dist * kSampleStepSize;
      var initialSlope = getSlope(guessForT, mX1, mX2);

      if (initialSlope >= 0.001) {
        return newtonRaphsonIterate(aX, guessForT, mX1, mX2);
      } else if (initialSlope === 0.0) {
        return guessForT;
      } else {
        return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);
      }

    }

    return function (x) {
      if (mX1 === mY1 && mX2 === mY2) { return x; }
      if (x === 0 || x === 1) { return x; }
      return calcBezier(getTForX(x), mY1, mY2);
    }

  }

  return bezier;

})();

var penner = (function () {

  // Based on jQuery UI's implemenation of easing equations from Robert Penner (http://www.robertpenner.com/easing)

  var eases = { linear: function () { return function (t) { return t; }; } };

  var functionEasings = {
    Sine: function () { return function (t) { return 1 - Math.cos(t * Math.PI / 2); }; },
    Circ: function () { return function (t) { return 1 - Math.sqrt(1 - t * t); }; },
    Back: function () { return function (t) { return t * t * (3 * t - 2); }; },
    Bounce: function () { return function (t) {
      var pow2, b = 4;
      while (t < (( pow2 = Math.pow(2, --b)) - 1) / 11) {}
      return 1 / Math.pow(4, 3 - b) - 7.5625 * Math.pow(( pow2 * 3 - 2 ) / 22 - t, 2)
    }; },
    Elastic: function (amplitude, period) {
      if ( amplitude === void 0 ) amplitude = 1;
      if ( period === void 0 ) period = .5;

      var a = minMax(amplitude, 1, 10);
      var p = minMax(period, .1, 2);
      return function (t) {
        return (t === 0 || t === 1) ? t : 
          -a * Math.pow(2, 10 * (t - 1)) * Math.sin((((t - 1) - (p / (Math.PI * 2) * Math.asin(1 / a))) * (Math.PI * 2)) / p);
      }
    }
  };

  var baseEasings = ['Quad', 'Cubic', 'Quart', 'Quint', 'Expo'];

  baseEasings.forEach(function (name, i) {
    functionEasings[name] = function () { return function (t) { return Math.pow(t, i + 2); }; };
  });

  Object.keys(functionEasings).forEach(function (name) {
    var easeIn = functionEasings[name];
    eases['easeIn' + name] = easeIn;
    eases['easeOut' + name] = function (a, b) { return function (t) { return 1 - easeIn(a, b)(1 - t); }; };
    eases['easeInOut' + name] = function (a, b) { return function (t) { return t < 0.5 ? easeIn(a, b)(t * 2) / 2 : 
      1 - easeIn(a, b)(t * -2 + 2) / 2; }; };
    eases['easeOutIn' + name] = function (a, b) { return function (t) { return t < 0.5 ? (1 - easeIn(a, b)(1 - t * 2)) / 2 : 
      (easeIn(a, b)(t * 2 - 1) + 1) / 2; }; };
  });

  return eases;

})();

function parseEasings(easing, duration) {
  if (is.fnc(easing)) { return easing; }
  var name = easing.split('(')[0];
  var ease = penner[name];
  var args = parseEasingParameters(easing);
  switch (name) {
    case 'spring' : return spring(easing, duration);
    case 'cubicBezier' : return applyArguments(bezier, args);
    case 'steps' : return applyArguments(steps, args);
    default : return applyArguments(ease, args);
  }
}

// Strings

function selectString(str) {
  try {
    var nodes = document.querySelectorAll(str);
    return nodes;
  } catch(e) {
    return;
  }
}

// Arrays

function filterArray(arr, callback) {
  var len = arr.length;
  var thisArg = arguments.length >= 2 ? arguments[1] : void 0;
  var result = [];
  for (var i = 0; i < len; i++) {
    if (i in arr) {
      var val = arr[i];
      if (callback.call(thisArg, val, i, arr)) {
        result.push(val);
      }
    }
  }
  return result;
}

function flattenArray(arr) {
  return arr.reduce(function (a, b) { return a.concat(is.arr(b) ? flattenArray(b) : b); }, []);
}

function toArray(o) {
  if (is.arr(o)) { return o; }
  if (is.str(o)) { o = selectString(o) || o; }
  if (o instanceof NodeList || o instanceof HTMLCollection) { return [].slice.call(o); }
  return [o];
}

function arrayContains(arr, val) {
  return arr.some(function (a) { return a === val; });
}

// Objects

function cloneObject(o) {
  var clone = {};
  for (var p in o) { clone[p] = o[p]; }
  return clone;
}

function replaceObjectProps(o1, o2) {
  var o = cloneObject(o1);
  for (var p in o1) { o[p] = o2.hasOwnProperty(p) ? o2[p] : o1[p]; }
  return o;
}

function mergeObjects(o1, o2) {
  var o = cloneObject(o1);
  for (var p in o2) { o[p] = is.und(o1[p]) ? o2[p] : o1[p]; }
  return o;
}

// Colors

function rgbToRgba(rgbValue) {
  var rgb = /rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(rgbValue);
  return rgb ? ("rgba(" + (rgb[1]) + ",1)") : rgbValue;
}

function hexToRgba(hexValue) {
  var rgx = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
  var hex = hexValue.replace(rgx, function (m, r, g, b) { return r + r + g + g + b + b; } );
  var rgb = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
  var r = parseInt(rgb[1], 16);
  var g = parseInt(rgb[2], 16);
  var b = parseInt(rgb[3], 16);
  return ("rgba(" + r + "," + g + "," + b + ",1)");
}

function hslToRgba(hslValue) {
  var hsl = /hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(hslValue) || /hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(hslValue);
  var h = parseInt(hsl[1], 10) / 360;
  var s = parseInt(hsl[2], 10) / 100;
  var l = parseInt(hsl[3], 10) / 100;
  var a = hsl[4] || 1;
  function hue2rgb(p, q, t) {
    if (t < 0) { t += 1; }
    if (t > 1) { t -= 1; }
    if (t < 1/6) { return p + (q - p) * 6 * t; }
    if (t < 1/2) { return q; }
    if (t < 2/3) { return p + (q - p) * (2/3 - t) * 6; }
    return p;
  }
  var r, g, b;
  if (s == 0) {
    r = g = b = l;
  } else {
    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;
    var p = 2 * l - q;
    r = hue2rgb(p, q, h + 1/3);
    g = hue2rgb(p, q, h);
    b = hue2rgb(p, q, h - 1/3);
  }
  return ("rgba(" + (r * 255) + "," + (g * 255) + "," + (b * 255) + "," + a + ")");
}

function colorToRgb(val) {
  if (is.rgb(val)) { return rgbToRgba(val); }
  if (is.hex(val)) { return hexToRgba(val); }
  if (is.hsl(val)) { return hslToRgba(val); }
}

// Units

function getUnit(val) {
  var split = /[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(val);
  if (split) { return split[1]; }
}

function getTransformUnit(propName) {
  if (stringContains(propName, 'translate') || propName === 'perspective') { return 'px'; }
  if (stringContains(propName, 'rotate') || stringContains(propName, 'skew')) { return 'deg'; }
}

// Values

function getFunctionValue(val, animatable) {
  if (!is.fnc(val)) { return val; }
  return val(animatable.target, animatable.id, animatable.total);
}

function getAttribute(el, prop) {
  return el.getAttribute(prop);
}

function convertPxToUnit(el, value, unit) {
  var valueUnit = getUnit(value);
  if (arrayContains([unit, 'deg', 'rad', 'turn'], valueUnit)) { return value; }
  var cached = cache.CSS[value + unit];
  if (!is.und(cached)) { return cached; }
  var baseline = 100;
  var tempEl = document.createElement(el.tagName);
  var parentEl = (el.parentNode && (el.parentNode !== document)) ? el.parentNode : document.body;
  parentEl.appendChild(tempEl);
  tempEl.style.position = 'absolute';
  tempEl.style.width = baseline + unit;
  var factor = baseline / tempEl.offsetWidth;
  parentEl.removeChild(tempEl);
  var convertedUnit = factor * parseFloat(value);
  cache.CSS[value + unit] = convertedUnit;
  return convertedUnit;
}

function getCSSValue(el, prop, unit) {
  if (prop in el.style) {
    var uppercasePropName = prop.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();
    var value = el.style[prop] || getComputedStyle(el).getPropertyValue(uppercasePropName) || '0';
    return unit ? convertPxToUnit(el, value, unit) : value;
  }
}

function getAnimationType(el, prop) {
  if (is.dom(el) && !is.inp(el) && (!is.nil(getAttribute(el, prop)) || (is.svg(el) && el[prop]))) { return 'attribute'; }
  if (is.dom(el) && arrayContains(validTransforms, prop)) { return 'transform'; }
  if (is.dom(el) && (prop !== 'transform' && getCSSValue(el, prop))) { return 'css'; }
  if (el[prop] != null) { return 'object'; }
}

function getElementTransforms(el) {
  if (!is.dom(el)) { return; }
  var str = el.style.transform || '';
  var reg  = /(\w+)\(([^)]*)\)/g;
  var transforms = new Map();
  var m; while (m = reg.exec(str)) { transforms.set(m[1], m[2]); }
  return transforms;
}

function getTransformValue(el, propName, animatable, unit) {
  var defaultVal = stringContains(propName, 'scale') ? 1 : 0 + getTransformUnit(propName);
  var value = getElementTransforms(el).get(propName) || defaultVal;
  if (animatable) {
    animatable.transforms.list.set(propName, value);
    animatable.transforms['last'] = propName;
  }
  return unit ? convertPxToUnit(el, value, unit) : value;
}

function getOriginalTargetValue(target, propName, unit, animatable) {
  switch (getAnimationType(target, propName)) {
    case 'transform': return getTransformValue(target, propName, animatable, unit);
    case 'css': return getCSSValue(target, propName, unit);
    case 'attribute': return getAttribute(target, propName);
    default: return target[propName] || 0;
  }
}

function getRelativeValue(to, from) {
  var operator = /^(\*=|\+=|-=)/.exec(to);
  if (!operator) { return to; }
  var u = getUnit(to) || 0;
  var x = parseFloat(from);
  var y = parseFloat(to.replace(operator[0], ''));
  switch (operator[0][0]) {
    case '+': return x + y + u;
    case '-': return x - y + u;
    case '*': return x * y + u;
  }
}

function validateValue(val, unit) {
  if (is.col(val)) { return colorToRgb(val); }
  if (/\s/g.test(val)) { return val; }
  var originalUnit = getUnit(val);
  var unitLess = originalUnit ? val.substr(0, val.length - originalUnit.length) : val;
  if (unit) { return unitLess + unit; }
  return unitLess;
}

// getTotalLength() equivalent for circle, rect, polyline, polygon and line shapes
// adapted from https://gist.github.com/SebLambla/3e0550c496c236709744

function getDistance(p1, p2) {
  return Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2));
}

function getCircleLength(el) {
  return Math.PI * 2 * getAttribute(el, 'r');
}

function getRectLength(el) {
  return (getAttribute(el, 'width') * 2) + (getAttribute(el, 'height') * 2);
}

function getLineLength(el) {
  return getDistance(
    {x: getAttribute(el, 'x1'), y: getAttribute(el, 'y1')}, 
    {x: getAttribute(el, 'x2'), y: getAttribute(el, 'y2')}
  );
}

function getPolylineLength(el) {
  var points = el.points;
  var totalLength = 0;
  var previousPos;
  for (var i = 0 ; i < points.numberOfItems; i++) {
    var currentPos = points.getItem(i);
    if (i > 0) { totalLength += getDistance(previousPos, currentPos); }
    previousPos = currentPos;
  }
  return totalLength;
}

function getPolygonLength(el) {
  var points = el.points;
  return getPolylineLength(el) + getDistance(points.getItem(points.numberOfItems - 1), points.getItem(0));
}

// Path animation

function getTotalLength(el) {
  if (el.getTotalLength) { return el.getTotalLength(); }
  switch(el.tagName.toLowerCase()) {
    case 'circle': return getCircleLength(el);
    case 'rect': return getRectLength(el);
    case 'line': return getLineLength(el);
    case 'polyline': return getPolylineLength(el);
    case 'polygon': return getPolygonLength(el);
  }
}

function setDashoffset(el) {
  var pathLength = getTotalLength(el);
  el.setAttribute('stroke-dasharray', pathLength);
  return pathLength;
}

// Motion path

function getParentSvgEl(el) {
  var parentEl = el.parentNode;
  while (is.svg(parentEl)) {
    if (!is.svg(parentEl.parentNode)) { break; }
    parentEl = parentEl.parentNode;
  }
  return parentEl;
}

function getParentSvg(pathEl, svgData) {
  var svg = svgData || {};
  var parentSvgEl = svg.el || getParentSvgEl(pathEl);
  var rect = parentSvgEl.getBoundingClientRect();
  var viewBoxAttr = getAttribute(parentSvgEl, 'viewBox');
  var width = rect.width;
  var height = rect.height;
  var viewBox = svg.viewBox || (viewBoxAttr ? viewBoxAttr.split(' ') : [0, 0, width, height]);
  return {
    el: parentSvgEl,
    viewBox: viewBox,
    x: viewBox[0] / 1,
    y: viewBox[1] / 1,
    w: width,
    h: height,
    vW: viewBox[2],
    vH: viewBox[3]
  }
}

function getPath(path, percent) {
  var pathEl = is.str(path) ? selectString(path)[0] : path;
  var p = percent || 100;
  return function(property) {
    return {
      property: property,
      el: pathEl,
      svg: getParentSvg(pathEl),
      totalLength: getTotalLength(pathEl) * (p / 100)
    }
  }
}

function getPathProgress(path, progress, isPathTargetInsideSVG) {
  function point(offset) {
    if ( offset === void 0 ) offset = 0;

    var l = progress + offset >= 1 ? progress + offset : 0;
    return path.el.getPointAtLength(l);
  }
  var svg = getParentSvg(path.el, path.svg);
  var p = point();
  var p0 = point(-1);
  var p1 = point(+1);
  var scaleX = isPathTargetInsideSVG ? 1 : svg.w / svg.vW;
  var scaleY = isPathTargetInsideSVG ? 1 : svg.h / svg.vH;
  switch (path.property) {
    case 'x': return (p.x - svg.x) * scaleX;
    case 'y': return (p.y - svg.y) * scaleY;
    case 'angle': return Math.atan2(p1.y - p0.y, p1.x - p0.x) * 180 / Math.PI;
  }
}

// Decompose value

function decomposeValue(val, unit) {
  // const rgx = /-?\d*\.?\d+/g; // handles basic numbers
  // const rgx = /[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g; // handles exponents notation
  var rgx = /[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g; // handles exponents notation
  var value = validateValue((is.pth(val) ? val.totalLength : val), unit) + '';
  return {
    original: value,
    numbers: value.match(rgx) ? value.match(rgx).map(Number) : [0],
    strings: (is.str(val) || unit) ? value.split(rgx) : []
  }
}

// Animatables

function parseTargets(targets) {
  var targetsArray = targets ? (flattenArray(is.arr(targets) ? targets.map(toArray) : toArray(targets))) : [];
  return filterArray(targetsArray, function (item, pos, self) { return self.indexOf(item) === pos; });
}

function getAnimatables(targets) {
  var parsed = parseTargets(targets);
  return parsed.map(function (t, i) {
    return {target: t, id: i, total: parsed.length, transforms: { list: getElementTransforms(t) } };
  });
}

// Properties

function normalizePropertyTweens(prop, tweenSettings) {
  var settings = cloneObject(tweenSettings);
  // Override duration if easing is a spring
  if (/^spring/.test(settings.easing)) { settings.duration = spring(settings.easing); }
  if (is.arr(prop)) {
    var l = prop.length;
    var isFromTo = (l === 2 && !is.obj(prop[0]));
    if (!isFromTo) {
      // Duration divided by the number of tweens
      if (!is.fnc(tweenSettings.duration)) { settings.duration = tweenSettings.duration / l; }
    } else {
      // Transform [from, to] values shorthand to a valid tween value
      prop = {value: prop};
    }
  }
  var propArray = is.arr(prop) ? prop : [prop];
  return propArray.map(function (v, i) {
    var obj = (is.obj(v) && !is.pth(v)) ? v : {value: v};
    // Default delay value should only be applied to the first tween
    if (is.und(obj.delay)) { obj.delay = !i ? tweenSettings.delay : 0; }
    // Default endDelay value should only be applied to the last tween
    if (is.und(obj.endDelay)) { obj.endDelay = i === propArray.length - 1 ? tweenSettings.endDelay : 0; }
    return obj;
  }).map(function (k) { return mergeObjects(k, settings); });
}


function flattenKeyframes(keyframes) {
  var propertyNames = filterArray(flattenArray(keyframes.map(function (key) { return Object.keys(key); })), function (p) { return is.key(p); })
  .reduce(function (a,b) { if (a.indexOf(b) < 0) { a.push(b); } return a; }, []);
  var properties = {};
  var loop = function ( i ) {
    var propName = propertyNames[i];
    properties[propName] = keyframes.map(function (key) {
      var newKey = {};
      for (var p in key) {
        if (is.key(p)) {
          if (p == propName) { newKey.value = key[p]; }
        } else {
          newKey[p] = key[p];
        }
      }
      return newKey;
    });
  };

  for (var i = 0; i < propertyNames.length; i++) loop( i );
  return properties;
}

function getProperties(tweenSettings, params) {
  var properties = [];
  var keyframes = params.keyframes;
  if (keyframes) { params = mergeObjects(flattenKeyframes(keyframes), params); }
  for (var p in params) {
    if (is.key(p)) {
      properties.push({
        name: p,
        tweens: normalizePropertyTweens(params[p], tweenSettings)
      });
    }
  }
  return properties;
}

// Tweens

function normalizeTweenValues(tween, animatable) {
  var t = {};
  for (var p in tween) {
    var value = getFunctionValue(tween[p], animatable);
    if (is.arr(value)) {
      value = value.map(function (v) { return getFunctionValue(v, animatable); });
      if (value.length === 1) { value = value[0]; }
    }
    t[p] = value;
  }
  t.duration = parseFloat(t.duration);
  t.delay = parseFloat(t.delay);
  return t;
}

function normalizeTweens(prop, animatable) {
  var previousTween;
  return prop.tweens.map(function (t) {
    var tween = normalizeTweenValues(t, animatable);
    var tweenValue = tween.value;
    var to = is.arr(tweenValue) ? tweenValue[1] : tweenValue;
    var toUnit = getUnit(to);
    var originalValue = getOriginalTargetValue(animatable.target, prop.name, toUnit, animatable);
    var previousValue = previousTween ? previousTween.to.original : originalValue;
    var from = is.arr(tweenValue) ? tweenValue[0] : previousValue;
    var fromUnit = getUnit(from) || getUnit(originalValue);
    var unit = toUnit || fromUnit;
    if (is.und(to)) { to = previousValue; }
    tween.from = decomposeValue(from, unit);
    tween.to = decomposeValue(getRelativeValue(to, from), unit);
    tween.start = previousTween ? previousTween.end : 0;
    tween.end = tween.start + tween.delay + tween.duration + tween.endDelay;
    tween.easing = parseEasings(tween.easing, tween.duration);
    tween.isPath = is.pth(tweenValue);
    tween.isPathTargetInsideSVG = tween.isPath && is.svg(animatable.target);
    tween.isColor = is.col(tween.from.original);
    if (tween.isColor) { tween.round = 1; }
    previousTween = tween;
    return tween;
  });
}

// Tween progress

var setProgressValue = {
  css: function (t, p, v) { return t.style[p] = v; },
  attribute: function (t, p, v) { return t.setAttribute(p, v); },
  object: function (t, p, v) { return t[p] = v; },
  transform: function (t, p, v, transforms, manual) {
    transforms.list.set(p, v);
    if (p === transforms.last || manual) {
      var str = '';
      transforms.list.forEach(function (value, prop) { str += prop + "(" + value + ") "; });
      t.style.transform = str;
    }
  }
};

// Set Value helper

function setTargetsValue(targets, properties) {
  var animatables = getAnimatables(targets);
  animatables.forEach(function (animatable) {
    for (var property in properties) {
      var value = getFunctionValue(properties[property], animatable);
      var target = animatable.target;
      var valueUnit = getUnit(value);
      var originalValue = getOriginalTargetValue(target, property, valueUnit, animatable);
      var unit = valueUnit || getUnit(originalValue);
      var to = getRelativeValue(validateValue(value, unit), originalValue);
      var animType = getAnimationType(target, property);
      setProgressValue[animType](target, property, to, animatable.transforms, true);
    }
  });
}

// Animations

function createAnimation(animatable, prop) {
  var animType = getAnimationType(animatable.target, prop.name);
  if (animType) {
    var tweens = normalizeTweens(prop, animatable);
    var lastTween = tweens[tweens.length - 1];
    return {
      type: animType,
      property: prop.name,
      animatable: animatable,
      tweens: tweens,
      duration: lastTween.end,
      delay: tweens[0].delay,
      endDelay: lastTween.endDelay
    }
  }
}

function getAnimations(animatables, properties) {
  return filterArray(flattenArray(animatables.map(function (animatable) {
    return properties.map(function (prop) {
      return createAnimation(animatable, prop);
    });
  })), function (a) { return !is.und(a); });
}

// Create Instance

function getInstanceTimings(animations, tweenSettings) {
  var animLength = animations.length;
  var getTlOffset = function (anim) { return anim.timelineOffset ? anim.timelineOffset : 0; };
  var timings = {};
  timings.duration = animLength ? Math.max.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.duration; })) : tweenSettings.duration;
  timings.delay = animLength ? Math.min.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.delay; })) : tweenSettings.delay;
  timings.endDelay = animLength ? timings.duration - Math.max.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.duration - anim.endDelay; })) : tweenSettings.endDelay;
  return timings;
}

var instanceID = 0;

function createNewInstance(params) {
  var instanceSettings = replaceObjectProps(defaultInstanceSettings, params);
  var tweenSettings = replaceObjectProps(defaultTweenSettings, params);
  var properties = getProperties(tweenSettings, params);
  var animatables = getAnimatables(params.targets);
  var animations = getAnimations(animatables, properties);
  var timings = getInstanceTimings(animations, tweenSettings);
  var id = instanceID;
  instanceID++;
  return mergeObjects(instanceSettings, {
    id: id,
    children: [],
    animatables: animatables,
    animations: animations,
    duration: timings.duration,
    delay: timings.delay,
    endDelay: timings.endDelay
  });
}

// Core

var activeInstances = [];

var engine = (function () {
  var raf;

  function play() {
    if (!raf && (!isDocumentHidden() || !anime.suspendWhenDocumentHidden) && activeInstances.length > 0) {
      raf = requestAnimationFrame(step);
    }
  }
  function step(t) {
    // memo on algorithm issue:
    // dangerous iteration over mutable `activeInstances`
    // (that collection may be updated from within callbacks of `tick`-ed animation instances)
    var activeInstancesLength = activeInstances.length;
    var i = 0;
    while (i < activeInstancesLength) {
      var activeInstance = activeInstances[i];
      if (!activeInstance.paused) {
        activeInstance.tick(t);
        i++;
      } else {
        activeInstances.splice(i, 1);
        activeInstancesLength--;
      }
    }
    raf = i > 0 ? requestAnimationFrame(step) : undefined;
  }

  function handleVisibilityChange() {
    if (!anime.suspendWhenDocumentHidden) { return; }

    if (isDocumentHidden()) {
      // suspend ticks
      raf = cancelAnimationFrame(raf);
    } else { // is back to active tab
      // first adjust animations to consider the time that ticks were suspended
      activeInstances.forEach(
        function (instance) { return instance ._onDocumentVisibility(); }
      );
      engine();
    }
  }
  if (typeof document !== 'undefined') {
    document.addEventListener('visibilitychange', handleVisibilityChange);
  }

  return play;
})();

function isDocumentHidden() {
  return !!document && document.hidden;
}

// Public Instance

function anime(params) {
  if ( params === void 0 ) params = {};


  var startTime = 0, lastTime = 0, now = 0;
  var children, childrenLength = 0;
  var resolve = null;

  function makePromise(instance) {
    var promise = window.Promise && new Promise(function (_resolve) { return resolve = _resolve; });
    instance.finished = promise;
    return promise;
  }

  var instance = createNewInstance(params);
  var promise = makePromise(instance);

  function toggleInstanceDirection() {
    var direction = instance.direction;
    if (direction !== 'alternate') {
      instance.direction = direction !== 'normal' ? 'normal' : 'reverse';
    }
    instance.reversed = !instance.reversed;
    children.forEach(function (child) { return child.reversed = instance.reversed; });
  }

  function adjustTime(time) {
    return instance.reversed ? instance.duration - time : time;
  }

  function resetTime() {
    startTime = 0;
    lastTime = adjustTime(instance.currentTime) * (1 / anime.speed);
  }

  function seekChild(time, child) {
    if (child) { child.seek(time - child.timelineOffset); }
  }

  function syncInstanceChildren(time) {
    if (!instance.reversePlayback) {
      for (var i = 0; i < childrenLength; i++) { seekChild(time, children[i]); }
    } else {
      for (var i$1 = childrenLength; i$1--;) { seekChild(time, children[i$1]); }
    }
  }

  function setAnimationsProgress(insTime) {
    var i = 0;
    var animations = instance.animations;
    var animationsLength = animations.length;
    while (i < animationsLength) {
      var anim = animations[i];
      var animatable = anim.animatable;
      var tweens = anim.tweens;
      var tweenLength = tweens.length - 1;
      var tween = tweens[tweenLength];
      // Only check for keyframes if there is more than one tween
      if (tweenLength) { tween = filterArray(tweens, function (t) { return (insTime < t.end); })[0] || tween; }
      var elapsed = minMax(insTime - tween.start - tween.delay, 0, tween.duration) / tween.duration;
      var eased = isNaN(elapsed) ? 1 : tween.easing(elapsed);
      var strings = tween.to.strings;
      var round = tween.round;
      var numbers = [];
      var toNumbersLength = tween.to.numbers.length;
      var progress = (void 0);
      for (var n = 0; n < toNumbersLength; n++) {
        var value = (void 0);
        var toNumber = tween.to.numbers[n];
        var fromNumber = tween.from.numbers[n] || 0;
        if (!tween.isPath) {
          value = fromNumber + (eased * (toNumber - fromNumber));
        } else {
          value = getPathProgress(tween.value, eased * toNumber, tween.isPathTargetInsideSVG);
        }
        if (round) {
          if (!(tween.isColor && n > 2)) {
            value = Math.round(value * round) / round;
          }
        }
        numbers.push(value);
      }
      // Manual Array.reduce for better performances
      var stringsLength = strings.length;
      if (!stringsLength) {
        progress = numbers[0];
      } else {
        progress = strings[0];
        for (var s = 0; s < stringsLength; s++) {
          var a = strings[s];
          var b = strings[s + 1];
          var n$1 = numbers[s];
          if (!isNaN(n$1)) {
            if (!b) {
              progress += n$1 + ' ';
            } else {
              progress += n$1 + b;
            }
          }
        }
      }
      setProgressValue[anim.type](animatable.target, anim.property, progress, animatable.transforms);
      anim.currentValue = progress;
      i++;
    }
  }

  function setCallback(cb) {
    if (instance[cb] && !instance.passThrough) { instance[cb](instance); }
  }

  function countIteration() {
    if (instance.remaining && instance.remaining !== true) {
      instance.remaining--;
    }
  }

  function setInstanceProgress(engineTime) {
    var insDuration = instance.duration;
    var insDelay = instance.delay;
    var insEndDelay = insDuration - instance.endDelay;
    var insTime = adjustTime(engineTime);
    instance.progress = minMax((insTime / insDuration) * 100, 0, 100);
    instance.reversePlayback = insTime < instance.currentTime;
    if (children) { syncInstanceChildren(insTime); }
    if (!instance.began && instance.currentTime > 0) {
      instance.began = true;
      setCallback('begin');
    }
    if (!instance.loopBegan && instance.currentTime > 0) {
      instance.loopBegan = true;
      setCallback('loopBegin');
    }
    if (insTime <= insDelay && instance.currentTime !== 0) {
      setAnimationsProgress(0);
    }
    if ((insTime >= insEndDelay && instance.currentTime !== insDuration) || !insDuration) {
      setAnimationsProgress(insDuration);
    }
    if (insTime > insDelay && insTime < insEndDelay) {
      if (!instance.changeBegan) {
        instance.changeBegan = true;
        instance.changeCompleted = false;
        setCallback('changeBegin');
      }
      setCallback('change');
      setAnimationsProgress(insTime);
    } else {
      if (instance.changeBegan) {
        instance.changeCompleted = true;
        instance.changeBegan = false;
        setCallback('changeComplete');
      }
    }
    instance.currentTime = minMax(insTime, 0, insDuration);
    if (instance.began) { setCallback('update'); }
    if (engineTime >= insDuration) {
      lastTime = 0;
      countIteration();
      if (!instance.remaining) {
        instance.paused = true;
        if (!instance.completed) {
          instance.completed = true;
          setCallback('loopComplete');
          setCallback('complete');
          if (!instance.passThrough && 'Promise' in window) {
            resolve();
            promise = makePromise(instance);
          }
        }
      } else {
        startTime = now;
        setCallback('loopComplete');
        instance.loopBegan = false;
        if (instance.direction === 'alternate') {
          toggleInstanceDirection();
        }
      }
    }
  }

  instance.reset = function() {
    var direction = instance.direction;
    instance.passThrough = false;
    instance.currentTime = 0;
    instance.progress = 0;
    instance.paused = true;
    instance.began = false;
    instance.loopBegan = false;
    instance.changeBegan = false;
    instance.completed = false;
    instance.changeCompleted = false;
    instance.reversePlayback = false;
    instance.reversed = direction === 'reverse';
    instance.remaining = instance.loop;
    children = instance.children;
    childrenLength = children.length;
    for (var i = childrenLength; i--;) { instance.children[i].reset(); }
    if (instance.reversed && instance.loop !== true || (direction === 'alternate' && instance.loop === 1)) { instance.remaining++; }
    setAnimationsProgress(instance.reversed ? instance.duration : 0);
  };

  // internal method (for engine) to adjust animation timings before restoring engine ticks (rAF)
  instance._onDocumentVisibility = resetTime;

  // Set Value helper

  instance.set = function(targets, properties) {
    setTargetsValue(targets, properties);
    return instance;
  };

  instance.tick = function(t) {
    now = t;
    if (!startTime) { startTime = now; }
    setInstanceProgress((now + (lastTime - startTime)) * anime.speed);
  };

  instance.seek = function(time) {
    setInstanceProgress(adjustTime(time));
  };

  instance.pause = function() {
    instance.paused = true;
    resetTime();
  };

  instance.play = function() {
    if (!instance.paused) { return; }
    if (instance.completed) { instance.reset(); }
    instance.paused = false;
    activeInstances.push(instance);
    resetTime();
    engine();
  };

  instance.reverse = function() {
    toggleInstanceDirection();
    instance.completed = instance.reversed ? false : true;
    resetTime();
  };

  instance.restart = function() {
    instance.reset();
    instance.play();
  };

  instance.remove = function(targets) {
    var targetsArray = parseTargets(targets);
    removeTargetsFromInstance(targetsArray, instance);
  };

  instance.reset();

  if (instance.autoplay) { instance.play(); }

  return instance;

}

// Remove targets from animation

function removeTargetsFromAnimations(targetsArray, animations) {
  for (var a = animations.length; a--;) {
    if (arrayContains(targetsArray, animations[a].animatable.target)) {
      animations.splice(a, 1);
    }
  }
}

function removeTargetsFromInstance(targetsArray, instance) {
  var animations = instance.animations;
  var children = instance.children;
  removeTargetsFromAnimations(targetsArray, animations);
  for (var c = children.length; c--;) {
    var child = children[c];
    var childAnimations = child.animations;
    removeTargetsFromAnimations(targetsArray, childAnimations);
    if (!childAnimations.length && !child.children.length) { children.splice(c, 1); }
  }
  if (!animations.length && !children.length) { instance.pause(); }
}

function removeTargetsFromActiveInstances(targets) {
  var targetsArray = parseTargets(targets);
  for (var i = activeInstances.length; i--;) {
    var instance = activeInstances[i];
    removeTargetsFromInstance(targetsArray, instance);
  }
}

// Stagger helpers

function stagger(val, params) {
  if ( params === void 0 ) params = {};

  var direction = params.direction || 'normal';
  var easing = params.easing ? parseEasings(params.easing) : null;
  var grid = params.grid;
  var axis = params.axis;
  var fromIndex = params.from || 0;
  var fromFirst = fromIndex === 'first';
  var fromCenter = fromIndex === 'center';
  var fromLast = fromIndex === 'last';
  var isRange = is.arr(val);
  var val1 = isRange ? parseFloat(val[0]) : parseFloat(val);
  var val2 = isRange ? parseFloat(val[1]) : 0;
  var unit = getUnit(isRange ? val[1] : val) || 0;
  var start = params.start || 0 + (isRange ? val1 : 0);
  var values = [];
  var maxValue = 0;
  return function (el, i, t) {
    if (fromFirst) { fromIndex = 0; }
    if (fromCenter) { fromIndex = (t - 1) / 2; }
    if (fromLast) { fromIndex = t - 1; }
    if (!values.length) {
      for (var index = 0; index < t; index++) {
        if (!grid) {
          values.push(Math.abs(fromIndex - index));
        } else {
          var fromX = !fromCenter ? fromIndex%grid[0] : (grid[0]-1)/2;
          var fromY = !fromCenter ? Math.floor(fromIndex/grid[0]) : (grid[1]-1)/2;
          var toX = index%grid[0];
          var toY = Math.floor(index/grid[0]);
          var distanceX = fromX - toX;
          var distanceY = fromY - toY;
          var value = Math.sqrt(distanceX * distanceX + distanceY * distanceY);
          if (axis === 'x') { value = -distanceX; }
          if (axis === 'y') { value = -distanceY; }
          values.push(value);
        }
        maxValue = Math.max.apply(Math, values);
      }
      if (easing) { values = values.map(function (val) { return easing(val / maxValue) * maxValue; }); }
      if (direction === 'reverse') { values = values.map(function (val) { return axis ? (val < 0) ? val * -1 : -val : Math.abs(maxValue - val); }); }
    }
    var spacing = isRange ? (val2 - val1) / maxValue : val1;
    return start + (spacing * (Math.round(values[i] * 100) / 100)) + unit;
  }
}

// Timeline

function timeline(params) {
  if ( params === void 0 ) params = {};

  var tl = anime(params);
  tl.duration = 0;
  tl.add = function(instanceParams, timelineOffset) {
    var tlIndex = activeInstances.indexOf(tl);
    var children = tl.children;
    if (tlIndex > -1) { activeInstances.splice(tlIndex, 1); }
    function passThrough(ins) { ins.passThrough = true; }
    for (var i = 0; i < children.length; i++) { passThrough(children[i]); }
    var insParams = mergeObjects(instanceParams, replaceObjectProps(defaultTweenSettings, params));
    insParams.targets = insParams.targets || params.targets;
    var tlDuration = tl.duration;
    insParams.autoplay = false;
    insParams.direction = tl.direction;
    insParams.timelineOffset = is.und(timelineOffset) ? tlDuration : getRelativeValue(timelineOffset, tlDuration);
    passThrough(tl);
    tl.seek(insParams.timelineOffset);
    var ins = anime(insParams);
    passThrough(ins);
    children.push(ins);
    var timings = getInstanceTimings(children, params);
    tl.delay = timings.delay;
    tl.endDelay = timings.endDelay;
    tl.duration = timings.duration;
    tl.seek(0);
    tl.reset();
    if (tl.autoplay) { tl.play(); }
    return tl;
  };
  return tl;
}

anime.version = '3.2.1';
anime.speed = 1;
// TODO:#review: naming, documentation
anime.suspendWhenDocumentHidden = true;
anime.running = activeInstances;
anime.remove = removeTargetsFromActiveInstances;
anime.get = getOriginalTargetValue;
anime.set = setTargetsValue;
anime.convertPx = convertPxToUnit;
anime.path = getPath;
anime.setDashoffset = setDashoffset;
anime.stagger = stagger;
anime.timeline = timeline;
anime.easing = parseEasings;
anime.penner = penner;
anime.random = function (min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; };

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (anime);


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			loaded: false,
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/harmony module decorator */
/******/ 	(() => {
/******/ 		__webpack_require__.hmd = (module) => {
/******/ 			module = Object.create(module);
/******/ 			if (!module.children) module.children = [];
/******/ 			Object.defineProperty(module, 'exports', {
/******/ 				enumerable: true,
/******/ 				set: () => {
/******/ 					throw new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);
/******/ 				}
/******/ 			});
/******/ 			return module;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!**************************************************!*\
  !*** ./js/pdf_form/src/template/templateMain.js ***!
  \**************************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addTranslator: () => (/* binding */ addTranslator),
/* harmony export */   appendFontFamily: () => (/* binding */ appendFontFamily),
/* harmony export */   appendSignTabShowOpt: () => (/* binding */ appendSignTabShowOpt),
/* harmony export */   changeTemplateLocale: () => (/* binding */ changeTemplateLocale),
/* harmony export */   changeTranslatorFileLocation: () => (/* binding */ changeTranslatorFileLocation),
/* harmony export */   checkTemplateFieldData: () => (/* binding */ checkTemplateFieldData),
/* harmony export */   copyField: () => (/* binding */ copyField),
/* harmony export */   getJsonData: () => (/* binding */ getJsonData),
/* harmony export */   initDocument: () => (/* binding */ initDocument),
/* harmony export */   pasteField: () => (/* binding */ pasteField),
/* harmony export */   releaseTemplate: () => (/* binding */ releaseTemplate)
/* harmony export */ });
/* harmony import */ var _Constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Constants */ "./js/pdf_form/src/Constants.js");
/* harmony import */ var _pdf_cursor_tool__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../pdf.cursor.tool */ "./js/pdf_form/src/pdf.cursor.tool.js");
/* harmony import */ var _templatemod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./templatemod */ "./js/pdf_form/src/template/templatemod.js");
/* harmony import */ var _utils_utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../utils/utils.js */ "./js/pdf_form/src/utils/utils.js");
/**
 * @module Template/TemplateMain
 */

console.log('Template VERSION:', "1.0.0000");







var pdfCursorTools, pdfViewer, templatemod, __templateOwnerNode;

const USE_ONLY_CSS_ZOOM = false;
const TEXT_LAYER_MODE = 0; // DISABLE
const MAX_IMAGE_SIZE = 1024 * 1024;
const DEFAULT_SCALE_DELTA = 1.0;

/**
 * @description PDF문서를 로드하고 초기 셋팅을 한다.
 * 
 * @param {Element} ownerNode  해당 프로젝트의 최상단 Element를 감싸고 있는 Element
 * @param {String} pdfFileUrl   PDF FILE URL
 * @param {Array}  userList  서명자 정보 리스트
 * @param {Array} dvOptionList  기본값 정보 리스트
 * @param {Object} importData  기존 Template에서 저장한 Json Object
 * @param {Array} langs  사용할 다국어 리스트 기본값으로 ["ko", "en"]가 들어있다.
 * @Date : 2021. 5. 31
 * @Method Name : initDocument
 */
function initDocument(ownerNode, pdfFileUrl, userList, dvOptionList, signTabShowDefOptVal, importData, langs = ["ko", "en"]) {
    __templateOwnerNode = ownerNode;
    
    _utils_utils_js__WEBPACK_IMPORTED_MODULE_3__.Utils.translator.fetch(langs).then(() => {
        // -> Translations are ready...
        _utils_utils_js__WEBPACK_IMPORTED_MODULE_3__.Utils.changeLocale(langs[0]);
    });

    let pdfContainer = __templateOwnerNode.querySelector(' #' + _Constants__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TEMPLATE_PDF_VIEWER_CONTAINER);
    let eventBus = new pdfjsViewer.EventBus();
    pdfCursorTools = new _pdf_cursor_tool__WEBPACK_IMPORTED_MODULE_1__.PDFCursorTools({
        container: pdfContainer,
        eventBus: eventBus,
        cursorToolOnLoad: 0
    });

    pdfViewer = new pdfjsViewer.PDFViewer({
        container: pdfContainer,
        eventBus: eventBus,
        useOnlyCssZoom: USE_ONLY_CSS_ZOOM,
        textLayerMode: TEXT_LAYER_MODE,
    });

    templatemod = new _templatemod__WEBPACK_IMPORTED_MODULE_2__.TemplateMod(pdfViewer, ownerNode);
    templatemod.appendSignTabShowOpt(signTabShowDefOptVal);
    templatemod.buildSignTabShowOpt(signTabShowDefOptVal);
    templatemod.buildFieldUserInfo(userList);
    templatemod.buildDVOptsInfo(dvOptionList);
     
    eventBus.on("pagerendered", function (evt) {
        console.log("pageRendered: ");
    });

    eventBus.on("pagechanging", function (evt) {
        console.log("pagechanging");
    });

    eventBus.on("scalechanging", function (evt) {
        console.log("scalechanging");
        changeLayerSize(evt);
    });

    eventBus.on("pagesinit", function () {
        console.log("pagesinit");
        pdfViewer.currentScale = DEFAULT_SCALE_DELTA;
        // We can use pdfViewer now, e.g. let's change default scale.
    });

    let loadingTask = pdfjsLib.getDocument({
        url: pdfFileUrl,
        cMapUrl: '/js/pdf_form/pdfjs/cmaps/',
        cMapPacked: true,
    })
    loadingTask.promise.then(function (pdfDocument) {
        pdfDocument.getData().then((data) => {
        })
        pdfViewer.currentScale = DEFAULT_SCALE_DELTA;
        pdfViewer.setDocument(pdfDocument)
        //pdfCursorTools.switchTool(1);
        templatemod.templateInit();

        if (importData === null || importData === undefined) {
            return;
        }
        checkPageViewsReady(pdfViewer.pageViewsReady, importData);
    })

    __templateOwnerNode.querySelector("#" + "Zoom-Out-Button").addEventListener("click", documentZoomOut);
    __templateOwnerNode.querySelector("#" + "Zoom-In-Button").addEventListener("click", documentZoomIn);
    __templateOwnerNode.querySelector(" .Button-Icon-Component").addEventListener("click", hideShowSidePanel);

    __templateOwnerNode.querySelectorAll(" .Editor-Component_Box > div > ul > li").forEach((el) => {
        if (!_utils_utils_js__WEBPACK_IMPORTED_MODULE_3__.Utils.isEmptyObject(el.onclick)) {
            return;
        }
        el.addEventListener("click", fieldSelectTool, true);
    });

    __templateOwnerNode.querySelector(" .Editor-Toolbar-Group.Left > button.Undo-Button").addEventListener("click", undoAction);
    
    __templateOwnerNode.querySelector(" .Editor-Toolbar-Group.Left > button.Redo-Button").addEventListener("click", redoAction);

    __templateOwnerNode.querySelector(" .Editor-Toolbar-Group.Right  button.Align-Left-Button").addEventListener("click", sortFieldAligLeft);
    __templateOwnerNode.querySelector(" .Editor-Toolbar-Group.Right  button.Align-Center-Button").addEventListener("click", sortFieldAligHCenter);
    __templateOwnerNode.querySelector(" .Editor-Toolbar-Group.Right  button.Align-Right-Button").addEventListener("click", sortFieldAligRight);
    __templateOwnerNode.querySelector(" .Editor-Toolbar-Group.Right  button.Align-Top-Button").addEventListener("click", sortFieldAligTop);
    __templateOwnerNode.querySelector(" .Editor-Toolbar-Group.Right  button.Align-Middle-Button").addEventListener("click", sortFieldAligVCenter);
    __templateOwnerNode.querySelector(" .Editor-Toolbar-Group.Right  button.Align-Bottom-Button").addEventListener("click", sortFieldAligBottom);

    __templateOwnerNode.querySelector("#scaleSelectContainer").addEventListener("click", showScaleSelector);
    window.addEventListener('resize', function(event) {
        changeLayerSize(event);
    }, true);
}


/**
 * @description Template Field정보를 반환한다.
 *
 * @return {Object} Template Field 정보
 * @Date : 2021. 5. 31
 * @Method Name : getJsonData
 */
function getJsonData() {
    return templatemod.exportFieldData();
}

/**
 * @description Template에서 사용했던 데이터들을 초기화한다.
 *
 * @Date : 2021. 5. 31
 * @Method Name : releaseTemplate
 */
function releaseTemplate() {

    let targetElBtn = __templateOwnerNode.querySelector("#Editor-Component-Active-Button");
    let targetElPanel = __templateOwnerNode.querySelector("#Editor-Component");
    if (targetElBtn.classList.contains("Left-Panel-Btn-Hide-Animation")) {
        targetElBtn.classList.toggle("Left-Panel-Btn-Hide-Animation");
    }
    if (targetElPanel.classList.contains("Left-Panel-Hide-Animation")) {
        targetElPanel.classList.toggle("Left-Panel-Hide-Animation");
    }
    if (targetElBtn.classList.contains("Left-Panel-Btn-Show-Animation")) {
        targetElBtn.classList.toggle("Left-Panel-Btn-Show-Animation");
    }
    if (targetElPanel.classList.contains("Left-Panel-Show-Animation")) {
        targetElPanel.classList.toggle("Left-Panel-Show-Animation");
    }

    let templateLayer = __templateOwnerNode.querySelector("#" + _Constants__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TEMPLATE_LAYER_NAME);
    if (templateLayer !== null) {
        _utils_utils_js__WEBPACK_IMPORTED_MODULE_3__.Utils.removeAllChildNode(templateLayer);
    }
    let asteriskLayer = __templateOwnerNode.querySelector("#" + _Constants__WEBPACK_IMPORTED_MODULE_0__.CONSTANTS.TEMPLATE_LAYER_ASTERISK_NAME);
    if (asteriskLayer !== null) {
        _utils_utils_js__WEBPACK_IMPORTED_MODULE_3__.Utils.removeAllChildNode(asteriskLayer);
    }
}

/**
 * @description Field중에 반드시 설정해야될 속성이 설정 되어있는지 체크한다.
 * @Date : 2021. 5. 31
 * @Method Name : checkTemplateFieldData
 */
function checkTemplateFieldData() {
    return templatemod.checkTemplateFieldData();
}

/**
 * @description 현재 언어를 파라미터에 맞게 변환한다.
 *
 * @param {String} locale 바꿀 언어
 * @Date : 2021. 5. 31
 * @Method Name : changeTemplateLocale
 */
function changeTemplateLocale(locale) {
    _utils_utils_js__WEBPACK_IMPORTED_MODULE_3__.Utils.changeLocale(locale);
    templatemod.buildFieldformerList();
}


/**
 * @description  다국어 언어 파일의 위치를 지정한다.
 * @example
 * localhost:5500/js/pdf_form/i18n의 경우  "/js/pdf_form/i18n"
 * initDocument 이전에 호출이 되어야한다.
 * @param {String} filesLocation 언어파일의 위치(절대 경로)
 * @Date : 2021. 5. 31
 * @Method Name : changeTranslatorFileLocation
 */
function changeTranslatorFileLocation(lcation) {
    _utils_utils_js__WEBPACK_IMPORTED_MODULE_3__.Utils.translatorFileLocation(lcation);
}

/**
 * @description  다국어 언어를 추가한다.
 * @param {String} locale 언어 이름
 * @param {Object} langData i18n/ko.json과 같은 양식으로 된 JSON을 파싱한 데이터
 * @Date : 2021. 5. 31
 * @Method Name : addTranslator
 */
function addTranslator(locale, langData) {
    _utils_utils_js__WEBPACK_IMPORTED_MODULE_3__.Utils.addTranslator(locale, langData);
}

function copyField() {
    templatemod.copyObject();
}

function pasteField() {
    templatemod.pasteObject();
}

/**
 * @description Page의 높이를 계산한다.
 *
 * @param {Element} PDF.js에서 만든 Page Element : 계산할 Page Element
 * @return {Number} Page Height
 * @Date : 2021. 5. 31
 * @Method Name : calcPageHeight
 */
 function calcPageHeight(pageElement) {
    var style = pageElement.div.currentStyle || window.getComputedStyle(pageElement.div);
    const marginHeight = parseFloat(style.marginTop) + parseFloat(style.marginBottom);
    const paddingHeight = parseFloat(style.paddingTop) + parseFloat(style.paddingBottom);
    const borderHeight = parseFloat(style.borderTopWidth) + parseFloat(style.borderBottomWidth);
    return pageElement.height + marginHeight + paddingHeight + borderHeight;
}

/**
 * @description Pdf.js에서 pageViewsReady가 true될때 까지 체크해서 Template Field Data 추가한다.
 *
 * @param {Boolean} oldvalue pageViewsReady의 현재 데이터값
 * @param {Object} importData  추가할 Template Field Data
 * @Date : 2021. 5. 31
 * @Method Name : checkPageViewsReady
 */
function checkPageViewsReady(oldvalue, importData) {
    undefined === oldvalue && (oldvalue = pdfViewer.pageViewsReady);
    var clearcheck = setInterval(repeatcheck, 100);
    function repeatcheck() {
        return new Promise(function (resolve, reject) {
                if (pdfViewer.pageViewsReady) {
                    resolve("pageViewsReady");
                    clearInterval(clearcheck);
                }
            }).then(function (text) {
                console.log(text);
                templatemod.importFieldData(importData);
            });
    }
}

/**
 * @description PDF 페이지의 Layer사이즈가 변할 때의 처리를한다.
 *
 * @param {Event} evt event
 * @Date : 2021. 5. 31
 * @Method Name : changeLayerSize
 */
 function changeLayerSize(evt) {
    let height = 0;
    pdfViewer._pages.forEach(function (element) {
        height += calcPageHeight(element);
    });
    templatemod.templateResize(evt, height);
}

/**
 * @description  문서의 배율을 축소한다.
 *
 * @Date : 2021. 5. 31
 * @Method Name : documentZoomOut
 */
function  documentZoomOut() {
    const currentValue = parseFloat(pdfViewer.currentScale);
    pdfViewer.currentScale = currentValue - 0.1;
    setScaleValueText(pdfViewer.currentScale);
}

/**
 * @description  문서의 배율을 확대한다.
 *
 * @Date : 2021. 5. 31
 * @Method Name : documentZoomIn
 */
function  documentZoomIn() {
    const currentValue = parseFloat(pdfViewer.currentScale);
    pdfViewer.currentScale = currentValue + 0.1;
    setScaleValueText(pdfViewer.currentScale);
}

/**
 * @description  문서의 배율을 설정한다.
 *
 * @param {String}  value문서의 배율
 * @Date : 2021. 5. 31
 * @Method Name : setScaleValueText
 */
 function setScaleValueText(value) {
    const currentValue = Math.floor(parseFloat(value) * 100);
     var element = __templateOwnerNode.querySelector(" #scaleSelectContainer > a");
    element.textContent = currentValue + "%";
}

/**
 * @description  사이드 패널이 보이고 있으면 숨기고 숨겨있으면 보이게한다.
 *
 * @param {Event} event event
 * @Date : 2021. 5. 31
 * @Method Name : hideShowSidePanel
 */
function hideShowSidePanel(event) {
    let targetElBtn = __templateOwnerNode.querySelector("#Editor-Component-Active-Button");
    let targetElPanel = __templateOwnerNode.querySelector("#Editor-Component");
    let arrowBtn = __templateOwnerNode.querySelector("#Editor-Component-Active-Button > .Button-Icon-Component .Arrow-Btn ");
    arrowBtn.classList.toggle("Reverse-Btn");
    if (!targetElBtn.classList.contains("Left-Panel-Btn-Hide-Animation")) {
        targetElBtn.classList.toggle("Left-Panel-Btn-Hide-Animation");
        targetElPanel.classList.toggle("Left-Panel-Hide-Animation");

    } else {
        targetElBtn.classList.toggle("Left-Panel-Btn-Show-Animation");
        targetElPanel.classList.toggle("Left-Panel-Show-Animation");
    }
}

/**
 * @description  사이드 패널이 보이고 있으면 숨기고 숨겨있으면 보이게한다.
 *
 * @param {Event} evt event
 * @Date : 2021. 5. 31
 * @Method Name : hideShowSidePanel
 */
function fieldSelectTool(evt) {
    evt.stopPropagation();
    const element = evt.target.closest("li");
    const selectValue = element.getAttribute("data-index");
    templatemod.clearSelectedTool();
    if (!element.classList.contains("selected")) {
        element.classList.add("selected");
    }
    templatemod.selectTool(parseInt(selectValue));
}

/**
 * @description  undo button handler
 *
 * @param {Event} evt  event
 * @Date : 2021. 5. 31
 * @Method Name : undoAction
 */
function undoAction(evt) {
    templatemod.undoAction();
}

/**
 * @description  redo button handler
 *
 * @param {Event} evt event
 * @Date : 2021. 5. 31
 * @Method Name : redoAction
 */
function redoAction(evt) {
    templatemod.redoAction();
}

/**
 * @description  Field들을 왼쪽라인에 맞춰서 정렬
 *
 * @param {Event} evt event
 * @Date : 2021. 5. 31
 * @Method Name : sortFieldAligLeft
 */
function sortFieldAligLeft(evt) {
    templatemod.sortFieldsAlign("left");
}

/**
 * @description  Field들을 오른쪽라인에 맞춰서 정렬
 *
 * @param {Event} evt event
 * @Date : 2021. 5. 31
 * @Method Name : sortFieldsAlign
 */
function sortFieldAligRight(evt) {
    templatemod.sortFieldsAlign("right");
}

/**
 * @description  Field들을 x좌표 기준의 센터라인에 맞춰서 정렬
 *
 * @param {Event} evt event
 * @Date : 2021. 5. 31
 * @Method Name : sortFieldAligHCenter
 */
function sortFieldAligHCenter(evt) {
    templatemod.sortFieldsAlign("hCenter");
}

/**
 * @description  Field들을 Top라인에 맞춰서 정렬
 *
 * @param {Event} evt event
 * @Date : 2021. 5. 31
 * @Method Name : sortFieldAligTop
 */
function sortFieldAligTop(evt) {
    templatemod.sortFieldsAlign("top");
}

/**
 * @description  Field들을 y좌표 기준의 센터라인에 맞춰서 정렬
 *
 * @param {Event} evt  event
 * @Date : 2021. 5. 31
 * @Method Name : sortFieldAligVCenter
 */
function sortFieldAligVCenter(evt) {
    templatemod.sortFieldsAlign("vCenter");
}

/**
 * @description  Field들을 Bottom라인에 맞춰서 정렬
 *
 * @param {Event} evt event
 * @Date : 2021. 5. 31
 * @Method Name : sortFieldAligBottom
 */
function sortFieldAligBottom(evt) {
    templatemod.sortFieldsAlign("bottom");
}

/**
 * @description  PDF문서의 배율 Select를 보여준다.
 *
 * @param {Event} evt event
 * @Date : 2021. 5. 31
 * @Method Name : showScaleSelector
 */
function showScaleSelector(evt) {

    const targetBbox = evt.target.getBoundingClientRect();
    let scaleContainer = __templateOwnerNode.querySelector(".Scale-Seletor-Container");
    console.log(targetBbox);
    scaleContainer.style.left = targetBbox.left + "px";
    scaleContainer.style.top = targetBbox.top + "px";
    scaleContainer.style.zIndex = "-1";
    
    if (scaleContainer.classList.contains("Template-Hide")) {
        scaleContainer.classList.toggle("Template-Hide");
    }
    let scaleSelect = scaleContainer.querySelector("select");
    if (!$(scaleSelect).hasClass("select2-hidden-accessible")) {
        // Select2 has been initialized
        $(scaleSelect).select2({
            minimumResultsForSearch: Infinity,
            width: "80px"
        });
    }
    $(scaleSelect).val(pdfViewer.currentScale).trigger("change");
    $(scaleSelect).select2('open');
    $(scaleSelect).on('select2:select', function (e) {
        // Do something
        var data = e.params.data;
        pdfViewer.currentScale = data.id;
        setScaleValueText(data.id);
    });
}

function appendFontFamily(fontFamilyArr) {
    templatemod.appendFontFamily(fontFamilyArr);
}

function appendSignTabShowOpt(signTabShowDefOptVal) {
  templatemod.appendSignTabShowOpt(signTabShowDefOptVal);
}
})();

/******/ 	return __webpack_exports__;
/******/ })()
;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDcmJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDMEM7QUFDRTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsUUFBUSxNQUFNO0FBQzVCLGNBQWMsUUFBUSxLQUFLO0FBQzNCLGNBQWMsUUFBUSxLQUFLO0FBQzNCLGNBQWMsUUFBUSxTQUFTO0FBQy9CLGNBQWMsUUFBUSxVQUFVO0FBQ2hDLGNBQWMsUUFBUSxVQUFVO0FBQ2hDLGNBQWMsUUFBUSxRQUFRO0FBQzlCLGNBQWMsUUFBUSxTQUFTO0FBQy9CLGNBQWMsUUFBUSxRQUFRO0FBQzlCLGNBQWMsUUFBUSxTQUFTO0FBQy9CLGNBQWMsUUFBUSxRQUFRO0FBQzlCLGNBQWMsUUFBUSxZQUFZO0FBQ2xDLGNBQWMsUUFBUSxZQUFZO0FBQ2xDLGNBQWMsUUFBUSxjQUFjO0FBQ3BDLGNBQWMsUUFBUSxhQUFhO0FBQ25DLGNBQWMsUUFBUSxhQUFhO0FBQ25DLGNBQWMsUUFBUSxRQUFRO0FBQzlCLGNBQWMsU0FBUyxhQUFhO0FBQ3BDLGNBQWMsUUFBUSxTQUFTO0FBQy9CLGNBQWMsUUFBUSxXQUFXO0FBQ2pDLGNBQWMsUUFBUSxXQUFXO0FBQ2pDLGNBQWMsUUFBUSxZQUFZO0FBQ2xDO0FBQ0EsY0FBYyxVQUFVLFVBQVU7QUFDbEMsY0FBYyxVQUFVLFNBQVM7QUFDakMsY0FBYyxVQUFVLFdBQVc7QUFDbkMsY0FBYyxVQUFVLG9CQUFvQjtBQUM1QyxjQUFjLFVBQVUscUJBQXFCO0FBQzdDO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QixnQkFBZ0IsU0FBUztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFNBQVM7QUFDeEIsZUFBZSxVQUFVO0FBQ3pCLGVBQWUsVUFBVTtBQUN6QixlQUFlLFVBQVU7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFD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LFNBQVMsS0FBNkI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsYUFBYTtBQUM1QixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtB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Ozs7Ozs7QUMvREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RCxLQUFLO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7QUMvSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUMwQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLFFBQVEsa0JBQWtCO0FB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLGtEQUFLO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxrREFBSztBQUNqQixVQUFVLGtEQUFLO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxrREFBSztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsY0FBYyxRQUFRO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwyQkFBMkI7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxh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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxvREFBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxrREFBSztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxvREFBUztBQUNwQixXQUFXLG9EQUFTO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxvREFBUztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxvREFBUztBQUNwQjtBQUNBO0FBQ0EsU0FBUztBQUNU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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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Y0FBYyxTQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxvREFBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGtEQUFLO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGtEQUFLO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDaHZHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxLQUE0RCxnQ0FBZ0MsQ0FBZ0s7QUFDaFEsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFLGFBQWE7QUFDeEY7QUFDQTtBQUNBLDhDQUE4QztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RUFBeUUsZ0JBQWdCO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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LGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwRUFBMEU7QUFDMUU7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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Q3JDO0FBQ0E7QUFDQSw4QkFBOEIsb0RBQVM7QUFDdkM7QUFDQSw4QkFBOEIsb0RBQVM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFVBQVU7QUFDekIsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG9EQUFTO0FBQ3JDO0FBQ0E7QUFDQSw4QkFBOEIsb0RBQVM7QUFDdkM7QUFDQSw4QkFBOEIsb0RBQVM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90ZW1wbGF0ZS1kZXNpZ25lci93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vdGVtcGxhdGUtZGVzaWduZXIvLi9qcy9wZGZfZm9ybS9zcmMvQ29uc3RhbnRzLmpzIiwid2VicGFjazovL3RlbXBsYXRlLWRlc2lnbmVyLy4vanMvcGRmX2Zvcm0vc3JjL0ZpZWxkcy9CYXNlRmllbGQuanMiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUtZGVzaWduZXIvLi9qcy9wZGZfZm9ybS9zcmMvRmllbGRzL0NoZWNrYm94RmllbGQuanMiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUtZGVzaWduZXIvLi9qcy9wZGZfZm9ybS9zcmMvRmllbGRzL0NvbWJvYm94RmllbGQuanMiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUtZGVzaWduZXIvLi9qcy9wZGZfZm9ybS9zcmMvRmllbGRzL0RhdGVGaWVsZC5qcyIsIndlYnBhY2s6Ly90ZW1wbGF0ZS1kZXNpZ25lci8uL2pzL3BkZl9mb3JtL3NyYy9GaWVsZHMvSW1hZ2VGaWVsZC5qcyIsIndlYnBhY2s6Ly90ZW1wbGF0ZS1kZXNpZ25lci8uL2pzL3BkZl9mb3JtL3NyYy9GaWVsZHMvTGFiZWxGaWVsZC5qcyIsIndlYnBhY2s6Ly90ZW1wbGF0ZS1kZXNpZ25lci8uL2pzL3BkZl9mb3JtL3NyYy9GaWVsZHMvTXVsdGlMaW5lVGV4dEZpZWxkLmpzIiwid2VicGFjazovL3RlbXBsYXRlLWRlc2lnbmVyLy4vanMvcGRmX2Zvcm0vc3JjL0ZpZWxkcy9OdW1iZXJGaWVsZC5qcyIsIndlYnBhY2s6Ly90ZW1wbGF0ZS1kZXNpZ25lci8uL2pzL3BkZl9mb3JtL3NyYy9GaWVsZHMvUmFkaW9GaWVsZC5qcyIsIndlYnBhY2s6Ly90ZW1wbGF0ZS1kZXNpZ25lci8uL2pzL3BkZl9mb3JtL3NyYy9GaWVsZHMvU2lnbkZpZWxkLmpzIiwid2VicGFjazovL3RlbXBsYXRlLWRlc2lnbmVyLy4vanMvcGRmX2Zvcm0vc3JjL0ZpZWxkcy9UZXh0QmFzZUZpZWxkLmpzIiwid2VicGFjazovL3RlbXBsYXRlLWRlc2lnbmVyLy4vanMvcGRmX2Zvcm0vc3JjL0ZpZWxkcy9UZXh0RmllbGQuanMiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUtZGVzaWduZXIvLi9qcy9wZGZfZm9ybS9zcmMvVHJhbnNsYXRvci90cmFuc2xhdG9yLmpzIiwid2VicGFjazovL3RlbXBsYXRlLWRlc2lnbmVyLy4vanMvcGRmX2Zvcm0vc3JjL1RyYW5zbGF0b3IvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUtZGVzaWduZXIvLi9qcy9wZGZfZm9ybS9zcmMvcGRmLmN1cnNvci50b29sLmpzIiwid2VicGFjazovL3RlbXBsYXRlLWRlc2lnbmVyLy4vanMvcGRmX2Zvcm0vc3JjL3RlbXBsYXRlL3RlbXBsYXRlRGF0YS5qcyIsIndlYnBhY2s6Ly90ZW1wbGF0ZS1kZXNpZ25lci8uL2pzL3BkZl9mb3JtL3NyYy90ZW1wbGF0ZS90ZW1wbGF0ZURhdGFPd25lci5qcyIsIndlYnBhY2s6Ly90ZW1wbGF0ZS1kZXNpZ25lci8uL2pzL3BkZl9mb3JtL3NyYy90ZW1wbGF0ZS90ZW1wbGF0ZURhdGFQYWdlLmpzIiwid2VicGFjazovL3RlbXBsYXRlLWRlc2lnbmVyLy4vanMvcGRmX2Zvcm0vc3JjL3RlbXBsYXRlL3RlbXBsYXRlVXNlckZpZWxkSW5mby5qcyIsIndlYnBhY2s6Ly90ZW1wbGF0ZS1kZXNpZ25lci8uL2pzL3BkZl9mb3JtL3NyYy90ZW1wbGF0ZS90ZW1wbGF0ZW1vZC5qcyIsIndlYnBhY2s6Ly90ZW1wbGF0ZS1kZXNpZ25lci8uL2pzL3BkZl9mb3JtL3NyYy91dGlscy9jb2xvci1waWNrZXIuanMiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUtZGVzaWduZXIvLi9qcy9wZGZfZm9ybS9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUtZGVzaWduZXIvLi9ub2RlX21vZHVsZXMvYW5pbWVqcy9saWIvYW5pbWUuZXMuanMiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUtZGVzaWduZXIvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUtZGVzaWduZXIvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUtZGVzaWduZXIvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3RlbXBsYXRlLWRlc2lnbmVyL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUtZGVzaWduZXIvd2VicGFjay9ydW50aW1lL2hhcm1vbnkgbW9kdWxlIGRlY29yYXRvciIsIndlYnBhY2s6Ly90ZW1wbGF0ZS1kZXNpZ25lci93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3RlbXBsYXRlLWRlc2lnbmVyL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vdGVtcGxhdGUtZGVzaWduZXIvLi9qcy9wZGZfZm9ybS9zcmMvdGVtcGxhdGUvdGVtcGxhdGVNYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFwidGVtcGxhdGVtb2RcIiwgW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1widGVtcGxhdGVtb2RcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1widGVtcGxhdGVtb2RcIl0gPSBmYWN0b3J5KCk7XG59KSh0aGlzLCAoKSA9PiB7XG5yZXR1cm4gIiwiXHJcbi8qKlxyXG4gKiBAbW9kdWxlIFRlbXBsYXRlL0NPTlNUQU5UU1xyXG4gKi9cclxuXHJcblxyXG4vKipcclxuICogQGRlc2NyaXB0aW9uIO2UhOuhnOygne2KuOyXkOyEnCDsgqzsmqntlZjripQg7IOB7IiYIOuqqOydjFxyXG4gKlxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gQVNURVJJU0tfSUNPTl9DTEFTUyB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjQVNURVJJU0tfSUNPTl9DTEFTU31cclxuICogQHByb3BlcnR5IHtOdW1iZXJ9IEFTVFJFSVNLX0RJVl9IRUlHSFQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0FTVFJFSVNLX0RJVl9IRUlHSFR9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBDUkVBVEVfRklFTERfQUNUSU9OICB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjQ1JFQVRFX0ZJRUxEX0FDVElPTiB9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBESVZJREVSX0NMQVNTICB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjRElWSURFUl9DTEFTUyB9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBEUkFHX0JPWF9OQU1FICB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjRFJBR19CT1hfTkFNRSB9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBFRElUT1JfQVRUUl9DTEFTUyAge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0VESVRPUl9BVFRSX0NMQVNTIH1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IEVESVRPUl9BVFRSX0NPTlRFTlRTX1JPV19DTEFTUyB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjRURJVE9SX0FUVFJfQ09OVEVOVFNfUk9XX0NMQVNTfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gRURJVE9SX0FUVFJfREFURV9JTlBVVF9DTEFTUyB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjRURJVE9SX0FUVFJfREFURV9JTlBVVF9DTEFTU31cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IEVESVRPUl9BVFRSX0lOUFVUX0NMQVNTICB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjRURJVE9SX0FUVFJfSU5QVVRfQ0xBU1MgfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gRURJVE9SX0FUVFJfSU5QVVRfV1JBUF9DTEFTUyAge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0VESVRPUl9BVFRSX0lOUFVUX1dSQVBfQ0xBU1MgfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gRURJVE9SX0FUVFJfS0lORF9DTEFTUyB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjRURJVE9SX0FUVFJfS0lORF9DTEFTU31cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IEVESVRPUl9BVFRSX1BBTkVMX0NMQVNTICB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjRURJVE9SX0FUVFJfUEFORUxfQ0xBU1MgfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gRURJVE9SX0FUVFJfUEFORUxfSUQgIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNFRElUT1JfQVRUUl9QQU5FTF9JRCB9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBFRElUT1JfQVRUUl9ST1dfV1JBUF9DTEFTUyAge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0VESVRPUl9BVFRSX1JPV19XUkFQX0NMQVNTIH1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IEVESVRPUl9BVFRSX1NFTEVDVF9DTEFTUyB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjRURJVE9SX0FUVFJfU0VMRUNUX0NMQVNTfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gRURJVE9SX0FUVFJfVEVYVEFSRUFfQ0xBU1MgIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNFRElUT1JfQVRUUl9URVhUQVJFQV9DTEFTUyB9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBFRElUT1JfQ09NUE9ORU5UX0NMQVNTICB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjRURJVE9SX0NPTVBPTkVOVF9DTEFTUyB9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBGSUVMRF9BVFRSX0NIQU5HRV9BQ1RJT04gIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNGSUVMRF9BVFRSX0NIQU5HRV9BQ1RJT04gfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gRklFTERfREVMRVRFX0JVVFRPTl9DTEFTUyAge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0ZJRUxEX0RFTEVURV9CVVRUT05fQ0xBU1MgfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gR1JPVVBfQVRUUl9DSEFOR0VfQUNUSU9OIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNHUk9VUF9BVFRSX0NIQU5HRV9BQ1RJT059XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBHUk9VUF9BVFRSX09XTkVSX0NIQU5HRV9BQ1RJT04ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0dST1VQX0FUVFJfT1dORVJfQ0hBTkdFX0FDVElPTn1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IEdST1VQX1JFTU9WRV9BQ1RJT04ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0dST1VQX1JFTU9WRV9BQ1RJT059XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBISURFX0NMQVNTIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNISURFX0NMQVNTfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gTUFJTl9HUk9VUF9OQU1FIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNNQUlOX0dST1VQX05BTUV9XHJcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBNSU5JTVVNX0RSQUdfU0laRSAge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI01JTklNVU1fRFJBR19TSVpFIH1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IFBSRVZJRVdfUkVBREVSX1BERl9WSUVXRVIge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI1BSRVZJRVdfUkVBREVSX1BERl9WSUVXRVJ9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBQUkVWSUVXX1JFQURFUl9QREZfVklFV0VSX0NPTlRBSU5FUiAge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI1BSRVZJRVdfUkVBREVSX1BERl9WSUVXRVJfQ09OVEFJTkVSIH1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IFJFQURFUl9QQUdFX0ZJRUxEX0xBWUVSX0NMQVNTICB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjUkVBREVSX1BBR0VfRklFTERfTEFZRVJfQ0xBU1MgfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gUkVBREVSX1BERl9WSUVXRVIgIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNSRUFERVJfUERGX1ZJRVdFUiB9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBSRUFERVJfUERGX1ZJRVdFUl9DT05UQUlORVIgIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNSRUFERVJfUERGX1ZJRVdFUl9DT05UQUlORVIgfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gUkVNT1ZFX0ZJRUxEX0FDVElPTiB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjUkVNT1ZFX0ZJRUxEX0FDVElPTn1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IFNIT1dfQ0xBU1MgIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNTSE9XX0NMQVNTIH1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IFNXSVRDSF9MQUJFTF9DTEFTUyB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjU1dJVENIX0xBQkVMX0NMQVNTfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gU1dJVENIX0xBQkVMX1NMSURFUl9DTEFTUyAge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI1NXSVRDSF9MQUJFTF9TTElERVJfQ0xBU1MgfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gU1dJVENIX0xBQkVMX1NMSURFUl9ST1VORF9DTEFTUyAge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI1NXSVRDSF9MQUJFTF9TTElERVJfUk9VTkRfQ0xBU1MgfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gVEVNUExBVEVfTEFZRVJfQVNURVJJU0tfTkFNRSAge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI1RFTVBMQVRFX0xBWUVSX0FTVEVSSVNLX05BTUUgfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gVEVNUExBVEVfTEFZRVJfTkFNRSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjVEVNUExBVEVfTEFZRVJfTkFNRX1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IFRFTVBMQVRFX0xBWUVSX1JFQ1RfTkFNRSAge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI1RFTVBMQVRFX0xBWUVSX1JFQ1RfTkFNRSB9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBURU1QTEFURV9QREZfVklFV0VSICB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjVEVNUExBVEVfUERGX1ZJRVdFUiB9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBURU1QTEFURV9QREZfVklFV0VSX0NPTlRBSU5FUiAge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI1RFTVBMQVRFX1BERl9WSUVXRVJfQ09OVEFJTkVSIH1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IFRJVExFX0NMQVNTICB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjVElUTEVfQ0xBU1MgfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gVElUTEVfV1JBUF9DTEFTUyAge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI1RJVExFX1dSQVBfQ0xBU1MgfVxyXG4gKiBcclxuICogQGNsYXNzXHJcbiAqIEBGaWxlTmFtZSBDT05TVEFOVFMuanNcclxuICogQHNpbmNlIDIwMjEuMDUuMzFcclxuICovXHJcbmV4cG9ydCBjbGFzcyBDT05TVEFOVFMge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI01BSU5fR1JPVVBfTkFNRVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIENhbnZhc+ydmCDrqZTsnbgg64W465OcXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBNQUlOX0dST1VQX05BTUUgPSBcIk1haW5Db250YWluZXJcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNURU1QTEFURV9QREZfVklFV0VSX0NPTlRBSU5FUlxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRl66qo65Oc7JeQ7ISc7J2YIFBERiBWaWV3ZXIgQ29udGFpbmVyXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBURU1QTEFURV9QREZfVklFV0VSX0NPTlRBSU5FUiA9IFwiVGVtcGxhdGVWaWV3ZXJDb250YWluZXJcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNURU1QTEFURV9QREZfVklFV0VSXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgVGVtcGxhdGXrqqjrk5zsl5DshJzsnZggUERGIFZpZXdlclxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgVEVNUExBVEVfUERGX1ZJRVdFUiA9IFwiVGVtcGxhdGVQREZWaWV3ZXJcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNSRUFERVJfUERGX1ZJRVdFUl9DT05UQUlORVJcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDshJzrqoXrqqjrk5zsl5DshJzsnZggUERGIFZpZXdlciBDb250YWluZXJcclxuICAgICAqL1xyXG4gICAgc3RhdGljIFJFQURFUl9QREZfVklFV0VSX0NPTlRBSU5FUiA9IFwiUmVhZGVyVmlld2VyQ29udGFpbmVyXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjUkVBREVSX1BERl9WSUVXRVJcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDshJzrqoXrqqjrk5zsl5DshJzsnZggUERGIFZpZXdlclxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgUkVBREVSX1BERl9WSUVXRVIgPSBcIlJlYWRlclBERlZpZXdlclwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI1BSRVZJRVdfUkVBREVSX1BERl9WSUVXRVJfQ09OVEFJTkVSXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg66+466as67O06riwIOuqqOuTnOyXkOyEnOydmCBQREYgVmlld2VyIENvbnRhaW5lclxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgUFJFVklFV19SRUFERVJfUERGX1ZJRVdFUl9DT05UQUlORVIgPSBcIlByZXZpZXdSZWFkZXJWaWV3ZXJDb250YWluZXJcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNQUkVWSUVXX1JFQURFUl9QREZfVklFV0VSXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg66+466as67O06riwIOuqqOuTnOyXkOyEnOydmCBQREYgVmlld2VyXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBQUkVWSUVXX1JFQURFUl9QREZfVklFV0VSID0gXCJQcmV2aWV3UmVhZGVyUERGVmlld2VyXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjVEVNUExBVEVfTEFZRVJfTkFNRVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRlIOugiOydtOyWtCDsnbTrpoRcclxuICAgICAqL1xyXG4gICAgc3RhdGljIFRFTVBMQVRFX0xBWUVSX05BTUUgPSBcIlRlbXBsYXRlTGF5ZXJcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNURU1QTEFURV9MQVlFUl9BU1RFUklTS19OQU1FXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgVGVtcGxhdGXsl5DshJwg7ZWE7IiYIOyXrOu2gCDrp4jtgazqsIAg7J6I64qUIOugiOydtOyWtCDsnbTrpoRcclxuICAgICAqL1xyXG4gICAgc3RhdGljIFRFTVBMQVRFX0xBWUVSX0FTVEVSSVNLX05BTUUgPSBcIlRlbXBsYXRlQXN0ZXJpc2tMYXllclwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI1RFTVBMQVRFX0xBWUVSX1JFQ1RfTkFNRVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRl7JeQ7IScIO2VhOuTnOulvCDrp4zrk6TquLAg7JyE7ZW0IOyDneyEse2VmOuKlCDsnoTsi5wgZGl2IOydtOumhFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgVEVNUExBVEVfTEFZRVJfUkVDVF9OQU1FID0gXCJUZW1wbGF0ZVJlY3RcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNEUkFHX0JPWF9OQU1FXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgVGVtcGxhdGXsl5DshJwg65Oc656Y6re4IO2WiOydhOuVjCDtlYTrk5zrk6TsnbQg7J6I7J2EIOqyveyasCDrp4zrk5zripQgU1ZHIOq3uOujuSDrhbjrk5wg7J2066aEXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBEUkFHX0JPWF9OQU1FID0gXCJEcmFnQm94R3JvdXBcIjtcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjU0hPV19DTEFTU1xyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIOuFuOuTnOulvCDrs7TsnbTrj4TroZ0g7ZWY64qUIENTUyDtgbTrnpjsiqQg7J2066aEXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBTSE9XX0NMQVNTID0gXCJUZW1wbGF0ZS1TaG93XCJcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNISURFX0NMQVNTXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg64W465Oc66W8IOyViOuztOydtOuPhOuhnSDtlZjripQgQ1NTIO2BtOuemOyKpCDsnbTrpoRcclxuICAgICAqL1xyXG4gICAgc3RhdGljIEhJREVfQ0xBU1MgPSBcIlRlbXBsYXRlLUhpZGVcIlxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0VESVRPUl9DT01QT05FTlRfQ0xBU1NcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBUZW1wbGF0ZeuqqOuTnOyXkOyEnCDsgqzsnbTrk5wg7YOt7J2YIO2BtOudvOyKpCDsnbTrpoQuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBFRElUT1JfQ09NUE9ORU5UX0NMQVNTID0gXCJFZGl0b3ItQ29tcG9uZW50X0JveFwiO1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNFRElUT1JfQVRUUl9DTEFTU1xyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRl66qo65Oc7JeQ7IScIO2VhOuTnOydmCDsho3shLEg64W465OcIO2BtOuemOyKpCDsnbTrpoQuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBFRElUT1JfQVRUUl9DTEFTUyA9IFwiRWRpdG9yLUF0dHJpYnV0ZVwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0ZJRUxEX0RFTEVURV9CVVRUT05fQ0xBU1NcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBUZW1wbGF0ZeuqqOuTnOyXkOyEnCDsgq3soJzrsoTtirwg64W465OcIO2BtOuemOyKpCDsnbTrpoQuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBGSUVMRF9ERUxFVEVfQlVUVE9OX0NMQVNTID0gXCJGaWVsZC1EZWxldGUtQnV0dG9uXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjTUVNT19QUk9QRVJUWV9CVVRUT05fQ0xBU1NcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBSZWFkZXLrqqjrk5zsl5DshJwg66mU66qoIOyGjeyEsSDrsoTtirwg64W465OcIO2BtOuemOyKpCDsnbTrpoQuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBNRU1PX1BST1BFUlRZX0JVVFRPTl9DTEFTUyA9IFwiTUVNTy1Qcm9wZXJ0eS1CdXR0b25cIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNFRElUT1JfQVRUUl9LSU5EX0NMQVNTXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgVGVtcGxhdGXrqqjrk5zsl5DshJwg7ZWE65Oc7J2YIOyGjeyEsSDsooXrpZgg64W465OcIO2BtOuemOyKpCDsnbTrpoQuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBFRElUT1JfQVRUUl9LSU5EX0NMQVNTID0gXCJBdHRyaWJ1dGUta2luZFwiO1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNFRElUT1JfQVRUUl9QQU5FTF9DTEFTU1xyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRl66qo65Oc7JeQ7IScIO2VhOuTnOydmCDsho3shLEg7YyQ64SsIOuFuOuTnCDtgbTrnpjsiqQg7J2066aELlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgRURJVE9SX0FUVFJfUEFORUxfQ0xBU1MgPSBcIkF0dHJpYnV0ZS1Db250ZW50c1wiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0VESVRPUl9BVFRSX1BBTkVMX0lEXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgVGVtcGxhdGXrqqjrk5zsl5DshJwg7ZWE65Oc7J2YIOyGjeyEsSDtjJDrhKwg64W465OcIElELlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgRURJVE9SX0FUVFJfUEFORUxfSUQgPSBcIkF0dHJpYnV0ZS1QYW5lbFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0VESVRPUl9BVFRSX0NPTlRFTlRTX1JPV19DTEFTU1xyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRl66qo65Oc7JeQ7IScIO2VhOuTnOydmCDsho3shLEg7Luo7YWQ7LigIOyXtOydmCDtgbTrnpjsiqQg7J2066aEXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBFRElUT1JfQVRUUl9DT05URU5UU19ST1dfQ0xBU1MgPSBcIkF0dHJpYnV0ZS1Db250ZW50cy1Sb3dcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNFRElUT1JfQVRUUl9ST1dfV1JBUF9DTEFTU1xyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRl66qo65Oc7JeQ7IScIO2VhOuTnOydmCDsho3shLEg7Luo7YWQ7LigIOyXtOydhCDqsJDsi7jqs6Ag7J6I64qUIOuFuOuTnOydmCDtgbTrnpjsiqQg7J2066aEXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBFRElUT1JfQVRUUl9ST1dfV1JBUF9DTEFTUyA9IFwiQXR0cmlidXRlLUNvbnRlbnRzLVJvdy1XcmFwXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjVElUTEVfV1JBUF9DTEFTU1xyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRl66qo65Oc7JeQ7IScIO2VhOuTnOydmCDsho3shLEg7Luo7YWQ7LigIOyXtOydmCDtg4DsnbTti4DsnYQg6rCQ7Iu46rOgIOyeiOuKlCDrhbjrk5zsnZgg7YG0656Y7IqkIOydtOumhFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgVElUTEVfV1JBUF9DTEFTUyA9IFwiVGl0bGUtV3JhcFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI1RJVExFX0NMQVNTXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgVGVtcGxhdGXrqqjrk5zsl5DshJwg7ZWE65Oc7J2YIOyGjeyEsSDsu6jthZDsuKAg7Je07J2YIO2DgOydtO2LgCDrhbjrk5zsnZgg7YG0656Y7IqkIOydtOumhFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgVElUTEVfQ0xBU1MgPSBcIlRpdGxlXCI7XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0VESVRPUl9BVFRSX1NFTEVDVF9DTEFTU1xyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRl66qo65Oc7JeQ7IScIO2VhOuTnOydmCDsho3shLEg7J2YIFNlbGVjdCDrhbjrk5zsnZgg7YG0656Y7IqkIOydtOumhFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgRURJVE9SX0FUVFJfU0VMRUNUX0NMQVNTID0gXCJBdHRyaWJ1dGUtU2VsZWN0XCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjU1dJVENIX0xBQkVMX0NMQVNTXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgVGVtcGxhdGXrqqjrk5zsl5DshJwg7ZWE65Oc7J2YIOyGjeyEsSDsnZggU3dpdGNo67KE7Yq8ICDrhbjrk5zsnZgg7YG0656Y7IqkIOydtOumhFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgU1dJVENIX0xBQkVMX0NMQVNTID0gXCJBdHRyaWJ1dGUtU3dpdGNoLUxhYmVsXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjU1dJVENIX0xBQkVMX1NMSURFUl9DTEFTU1xyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRl66qo65Oc7JeQ7IScIO2VhOuTnOydmCDsho3shLEg7J2YIFN3aXRjaOuyhO2KvOydmCDsiqzrnbzsnbTrjZQg64W465Oc7J2YIO2BtOuemOyKpCDsnbTrpoRcclxuICAgICAqL1xyXG4gICAgc3RhdGljIFNXSVRDSF9MQUJFTF9TTElERVJfQ0xBU1MgPSBcIkF0dHJpYnV0ZS1Td2l0Y2gtU2xpZGVyXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjU1dJVENIX0xBQkVMX1NMSURFUl9ST1VORF9DTEFTU1xyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRl66qo65Oc7JeQ7IScIO2VhOuTnOydmCDsho3shLEg7J2YIFN3aXRjaOuyhO2KvOydmCDsiqzrnbzsnbTrjZTsnZgg64+E6re4656AIERpdiDrhbjrk5zsnZgg7YG0656Y7IqkIOydtOumhFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgU1dJVENIX0xBQkVMX1NMSURFUl9ST1VORF9DTEFTUyA9IFwiUm91bmRcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNESVZJREVSX0NMQVNTXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg6rWs67aE7J6QIOuFuOuTnOydmCDtgbTrnpjsiqQg7J2066aEXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBESVZJREVSX0NMQVNTID0gXCJEaXZpZGVyXCI7XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0VESVRPUl9BVFRSX0lOUFVUX0NMQVNTXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgVGVtcGxhdGXrqqjrk5zsl5DshJwg7ZWE65Oc7J2YIOyGjeyEsSDsnZggaW5wdXQg64W465Oc7J2YIO2BtOuemOyKpCDsnbTrpoRcclxuICAgICAqL1xyXG4gICAgc3RhdGljIEVESVRPUl9BVFRSX0lOUFVUX0NMQVNTID0gXCJBdHRyaWJ1dGUtSW5wdXRcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNFRElUT1JfQVRUUl9URVhUQVJFQV9DTEFTU1xyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRl66qo65Oc7JeQ7IScIO2VhOuTnOydmCDsho3shLEg7J2YIFRleHRhcmVhIOuFuOuTnOydmCDtgbTrnpjsiqQg7J2066aEXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBFRElUT1JfQVRUUl9URVhUQVJFQV9DTEFTUyA9IFwiQXR0cmlidXRlLVRleHRhcmVhXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjRURJVE9SX0FUVFJfREFURV9JTlBVVF9DTEFTU1xyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRl66qo65Oc7JeQ7IScIO2VhOuTnOydmCDsho3shLEg7J2YIERhdGUgaW5wdXQg64W465Oc7J2YIO2BtOuemOyKpCDsnbTrpoRcclxuICAgICAqL1xyXG4gICAgc3RhdGljIEVESVRPUl9BVFRSX0RBVEVfSU5QVVRfQ0xBU1MgPSBcIkF0dHJpYnV0ZS1EYXRlLUlucHV0XCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0NPTlNUQU5UUy5DT05TVEFOVFMjRURJVE9SX0FUVFJfSU5QVVRfV1JBUF9DTEFTU1xyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRl66qo65Oc7JeQ7IScIO2VhOuTnOydmCDsho3shLEg7J2YIGlucHV0IOuFuOuTnOulvCDqsJDsi7jqs6Ag7J6I64qUIOuFuOuTnOydmCDtgbTrnpjsiqQg7J2066aEXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBFRElUT1JfQVRUUl9JTlBVVF9XUkFQX0NMQVNTID0gXCJBdHRyaWJ1dGUtSW5wdXQtV3JhcFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0NSRUFURV9GSUVMRF9BQ1RJT05cclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBUZW1wbGF0ZeuqqOuTnOyXkOyEnCBVTkRPIFJFRE/snZgg7ZWE65OcIOyDneyEsSBBY3Rpb27snZgg7J2066aEXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBDUkVBVEVfRklFTERfQUNUSU9OID0gXCJDcmVhdGVGaWVsZEFjdGlvblwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI1JFTU9WRV9GSUVMRF9BQ1RJT05cclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBUZW1wbGF0ZeuqqOuTnOyXkOyEnCBVTkRPIFJFRE/snZgg7ZWE65OcIOyCreygnCBBY3Rpb27snZgg7J2066aEXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBSRU1PVkVfRklFTERfQUNUSU9OID0gXCJSZW1vdmVGaWVsZEFjdGlvblwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0ZJRUxEX0FUVFJfQ0hBTkdFX0FDVElPTlxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRl66qo65Oc7JeQ7IScIFVORE8gUkVET+ydmCDtlYTrk5wg7IaN7ISxIOuzgOqyvSBBY3Rpb27snZgg7J2066aEXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBGSUVMRF9BVFRSX0NIQU5HRV9BQ1RJT04gPSBcIkZpZWxkQXR0ckNoYW5nZUFjdGlvblwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0dST1VQX1JFTU9WRV9BQ1RJT05cclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBUZW1wbGF0ZeuqqOuTnOyXkOyEnCBVTkRPIFJFRE/snZgg7ZWE65OcIOyCreygnCBBY3Rpb27snZgg7J2066aEXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBHUk9VUF9SRU1PVkVfQUNUSU9OID0gXCJHcm91cFJlbW92ZUFjdGlvblwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0dST1VQX0FUVFJfQ0hBTkdFX0FDVElPTlxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRl66qo65Oc7JeQ7IScIFVORE8gUkVET+ydmCDtlYTrk5zrk6TsnZgg7IaN7ISxIOuzgOqyvSBBY3Rpb27snZgg7J2066aEXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBHUk9VUF9BVFRSX0NIQU5HRV9BQ1RJT04gPSBcIkdyb3VwQXR0ckNoYW5nZUFjdGlvblwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0dST1VQX0FUVFJfT1dORVJfQ0hBTkdFX0FDVElPTlxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRl66qo65Oc7JeQ7IScIFVORE8gUkVET+ydmCDtlYTrk5zrk6TsnZgg7ISc66qF7J6QIOuzgOqyvSBBY3Rpb27snZgg7J2066aEXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBHUk9VUF9BVFRSX09XTkVSX0NIQU5HRV9BQ1RJT04gPSBcIkdyb3VwQXR0ck93bmVyQ2hhbmdlQWN0aW9uXCI7XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI1JFQURFUl9QQUdFX0ZJRUxEX0xBWUVSX0NMQVNTXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ISc66qFIOuqqOuTnOyXkOyEnCBGaWVsZOuTpOydtCDsmKzrnbzqsIgg66CI7J207Ja0IO2BtOuemOyKpCDsnbTrpoQuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBSRUFERVJfUEFHRV9GSUVMRF9MQVlFUl9DTEFTUyA9IFwiUmVhZGVyLVBhZ2UtRmllbGQtTGF5ZXJcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNSRUFERVJfUEFHRV9NRU1PX0xBWUVSX0NMQVNTXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ISc66qFIOuqqOuTnOyXkOyEnCBNRU1P65Ok7J20IOyYrOudvOqwiCDroIjsnbTslrQg7YG0656Y7IqkIOydtOumhC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIFJFQURFUl9QQUdFX01FTU9fTEFZRVJfQ0xBU1MgPSBcIlJlYWRlci1QYWdlLU1lbW8tTGF5ZXJcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNBU1RFUklTS19JQ09OX0NMQVNTXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgVGVtcGxhdGXrqqjrk5zsl5DshJwg7ZWE7IiYIOyXrOu2gCDslYTsnbTsvZgg7YG0656Y7IqkIOydtOumhFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgQVNURVJJU0tfSUNPTl9DTEFTUyA9IFwiQXN0ZXJpc2stSWNvblwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge051bWJlcn1cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI0FTVFJFSVNLX0RJVl9IRUlHSFRcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBUZW1wbGF0ZeuqqOuTnOyXkOyEnCDtlYTsiJgg7Jes67aAIOyVhOydtOy9mCDshLjroZzquLjsnbRcclxuICAgICAqL1xyXG4gICAgc3RhdGljIEFTVFJFSVNLX0RJVl9IRUlHSFQgPSAxMjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtOdW1iZXJ9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvQ09OU1RBTlRTLkNPTlNUQU5UUyNNSU5JTVVNX0RSQUdfU0laRVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRl66qo65Oc7JeQ7IScIOuTnOuemOq3uOulvCDtlojri6TripQg7LWc7IaM7J2YIOyCrOydtOymiCDquLDspIBcclxuICAgICAqL1xyXG4gICAgc3RhdGljIE1JTklNVU1fRFJBR19TSVpFID0gMTA7XHJcblxyXG4gICAgc3RhdGljIFJBRElPX1RZUEVfMSA9ICcxJztcclxuICAgIHN0YXRpYyBSQUlPRF9UWVBFXzFfUEFUSCA9IGA8cGF0aCBkPVwiTTI0LDEyYy02LjYsMC0xMiw1LjQtMTIsMTJzNS40LDEyLDEyLDEyczEyLTUuNCwxMi0xMlMzMC42LFxyXG4gICAgICAgICAgICAxMiwyNCwxMnpNMjQsMEMxMC44LDAsMCwxMC44LDAsMjRzMTAuOCwyNCwyNCwyNHMyNC0xMC44LDI0LTI0UzM3LjIsMCwyNCwwek0yNCw0My4yQzEzLjQsNDMuMiw0LjgsMzQuNiw0LjgsMjRTMTMuNCxcclxuICAgICAgICAgICAgNC44LDI0LDQuOFM0My4yLDEzLjQsNDMuMiwyNFMzNC42LDQzLjIsMjQsNDMuMnpcIi8+YDtcclxuICAgIHN0YXRpYyBSQURJT19UWVBFXzIgPSAnMic7XHJcbiAgICBzdGF0aWMgUkFJT0RfVFlQRV8yX1BBVEggPSBgPHBhdGggZD1cIk0yNCwwQzEwLjgsMCwwLDEwLjgsMCwyNHMxMC44LDI0LDI0LDI0czI0LTEwLjgsMjQtMjRTMzcuMiwwLDI0LDB6TTI0LDQzLjJDMTMuNCw0My4yLDQuOCwzNC42LDQuOCwyNFMxMy40LFxcXHJcbiAgICAgICAgICAgIDQuOCwyNCw0LjhTNDMuMiwxMy40LDQzLjIsMjRTMzQuNiw0My4yLDI0LDQzLjJ6XCIvPmA7XHJcblxyXG4gICAgICAgICAgICBcclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9DT05TVEFOVFMuQ09OU1RBTlRTI05PX0VWRU5UX0xBWUVSXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7J2067Kk7Yq466W8IOuwm+yngCDslYrripQgY2xhc3MuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBOT19FVkVOVF9MQVlFUiA9IFwiTm8tRXZlbnQtTGF5ZXJcIjtcclxuXHJcbiAgICBzdGF0aWMgUkVBREVSX0ZJRUxEX0lOUFVUX01PREUgICAgICA9IDA7XHJcbiAgICBzdGF0aWMgUkVBREVSX0ZJRUxEX01FTU9fTU9ERSAgICAgICA9IDE7XHJcbiAgICBzdGF0aWMgUkVBREVSX0ZJRUxEX01FTU9fTUFLRV9NT0RFICA9IDI7XHJcbn1cclxuXHJcbiIsIlxyXG4vKipcclxuICogQG1vZHVsZSBUZW1wbGF0ZS9GaWVsZFxyXG4gKi9cclxuXHJcbmltcG9ydCB7VXRpbHN9IGZyb20gJy4vLi4vdXRpbHMvdXRpbHMuanMnO1xyXG5pbXBvcnQge0NPTlNUQU5UU30gZnJvbSAnLi8uLi9Db25zdGFudHMuanMnO1xyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiDtlYTrk5zrk6TsnZgg6riw67O47J20IOuQmOuKlCBDbGFzc1xyXG4gKiBcclxuICogQHByb3BlcnR5IHtTdHJpbmd9IG1faWQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV9pZH1cclxuICogQHByb3BlcnR5IHtOdW1iZXJ9IG1feCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX3h9XHJcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBtX3kge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV95fVxyXG4gKiBAcHJvcGVydHkge051bWJlcn0gbV93aWR0aCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX3dpZHRofVxyXG4gKiBAcHJvcGVydHkge051bWJlcn0gbV9oZWlnaHQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV9oZWlnaHR9XHJcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBtX3BhZ2VObyB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX3BhZ2VOb31cclxuICogQHByb3BlcnR5IHtOdW1iZXJ9IG1fcGRmWCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX3BkZlh9XHJcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBtX3BkZlgyIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI21fcGRmWDJ9XHJcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBtX3BkZlkge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV9wZGZZfVxyXG4gKiBAcHJvcGVydHkge051bWJlcn0gbV9wZGZZMiB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX3BkZlkyfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gbV90eXBlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI21fdHlwZX1cclxuICogQHByb3BlcnR5IHtOdW1iZXJ9IG1fZm9udFNpemUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV9mb250U2l6ZX1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IG1fZm9udE5hbWUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV9mb250TmFtZX1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IG1fZm9udFdlaWdodCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX2ZvbnRXZWlnaHR9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBtX2ZvbnRTdHlsZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX2ZvbnRTdHlsZX1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IG1fZm9udENvbG9yIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI21fZm9udENvbG9yfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gbV9raW5kIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI21fa2luZH1cclxuICogQHByb3BlcnR5IHtCb29sZWFufSBtX2lzUmVtb3ZlZCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX2lzUmVtb3ZlZH1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IG1fdmFsdWUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV92YWx1ZX1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IG1fb3duZXJJZCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX293bmVySWR9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBtX2ZpZWxkSWQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV9maWVsZElkfVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gbV9yZXF1aXJlZCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX3JlcXVpcmVkfVxyXG4gKiBcclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZnJvbUpzb24ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjZnJvbUpzb259XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGdldEJCb3gge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjZ2V0QkJveH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZmllbGROYW1lIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI2ZpZWxkTmFtZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gc2hvd0ZpZWxkQXR0cmlidXRlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI3Nob3dGaWVsZEF0dHJpYnV0ZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gc2hvd0ZpZWxkc0F0dHJpYnV0ZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNzaG93RmllbGRzQXR0cmlidXRlfVxyXG4gKiBARmlsZU5hbWUgQmFzZUZpZWxkLmpzXHJcbiAqIEBzaW5jZSAyMDIxLjA1LjMxXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQmFzZUZpZWxkIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICogQHBhcmFtIGlkIO2VhOuTnOydmCBJRFxyXG4gICAgICogQHBhcmFtIHBhZ2VObyDtlYTrk5zqsIAg7IaN7ZWcIO2OmOydtOyngCDrsojtmLhcclxuICAgICAqIEBwYXJhbSB4IO2VhOuTnOydmCBzdmfsg4HsnZggeOyijO2RnFxyXG4gICAgICogQHBhcmFtIHkg7ZWE65Oc7J2YIHN2Z+yDgeydmCB57KKM7ZGcXHJcbiAgICAgKiBAcGFyYW0gd2lkdGgg7ZWE65Oc7J2YIOqwgOuhnOq4uOydtFxyXG4gICAgICogQHBhcmFtIGhlaWdodCDtlYTrk5zsnZgg7IS466Gc6ri47J20XHJcbiAgICAgKiBcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoaWQsIHBhZ2VObywgeCwgeSwgd2lkdGgsIGhlaWdodCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX2lkXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIO2VhOuTnOydmCDqs6DsnKAgSURcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciBpZCgpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIGlkKHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1faWQgPSBpZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge051bWJlcn1cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI21feFxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zsnZggc3Zn7IOB7J2YIHgg7KKM7ZGcXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKiAvLyBnZXR0ZXIgeCgpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIHgodmFsKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubV94ID0geDtcclxuXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX3lcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24g7ZWE65Oc7J2YIHN2Z+yDgeydmCB5IOyijO2RnFxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIHkoKVxyXG4gICAgICAgICAqIC8vIHNldHRlciB5KHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1feSA9IHk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX3dpZHRoXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIO2VhOuTnOydmCBzdmfsg4HsnZgg6rCA66GcIOq4uOydtFxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIHdpZHRoKClcclxuICAgICAgICAgKiAvLyBzZXR0ZXIgd2lkdGgodmFsKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubV93aWR0aCA9IHdpZHRoO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7TnVtYmVyfVxyXG4gICAgICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV9oZWlnaHRcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24g7ZWE65Oc7J2YIHN2Z+yDgeydmCDshLjroZwg6ri47J20XHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKiAvLyBnZXR0ZXIgaGVpZ2h0KClcclxuICAgICAgICAgKiAvLyBzZXR0ZXIgaGVpZ2h0KHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1faGVpZ2h0ID0gaGVpZ2h0O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7TnVtYmVyfVxyXG4gICAgICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV9wYWdlTm9cclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24g7ZWE65Oc7J2YIFBERuyXkOyEnOydmCDtjpjsnbTsp4Ag67KI7Zi4XHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKiAvLyBnZXR0ZXIgcGFnZU5vKClcclxuICAgICAgICAgKiAvLyBzZXR0ZXIgcGFnZU5vKHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1fcGFnZU5vID0gcGFnZU5vO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7TnVtYmVyfVxyXG4gICAgICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV9wZGZYXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIO2VhOuTnOydmCBQREbsl5DshJzsnZggWOyijO2RnFxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIHBkZlgoKVxyXG4gICAgICAgICAqIC8vIHNldHRlciBwZGZYKHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1fcGRmWCA9IDA7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX3BkZllcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24g7ZWE65Oc7J2YIFBERuyXkOyEnOydmCBZ7KKM7ZGcXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKiAvLyBnZXR0ZXIgcGRmWSgpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIHBkZlkodmFsKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubV9wZGZZID0gMDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge051bWJlcn1cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI21fcGRmWDJcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24g7ZWE65Oc7J2YIFBERuyXkOyEnOydmCBYMuyijO2RnFxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIHBkZlgyKClcclxuICAgICAgICAgKiAvLyBzZXR0ZXIgcGRmWDIodmFsKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubV9wZGZYMiA9IDA7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX3BkZlkyXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIO2VhOuTnOydmCBQREbsl5DshJzsnZggWTLsooztkZxcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciBwZGZZMigpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIHBkZlkyKHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1fcGRmWTIgPSAwO1xyXG5cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI21fdHlwZVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zsnZgg7YOA7J6F7J2066aEXHJcbiAgICAgICAgICogQHJlYWRvbmx5XHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKiAvLyBnZXR0ZXIgdHlwZSgpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tX3R5cGUgPSBCYXNlRmllbGQuZmllbGROYW1lKCk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX2ZvbnRTaXplXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIO2VhOuTnOyXkOyEnCDsgqzsmqnrkJjripQg7Y+w7Yq47YGs6riw6rCSXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKiAvLyBnZXR0ZXIgZm9udFNpemUoKVxyXG4gICAgICAgICAqIC8vIHNldHRlciBmb250U2l6ZSh2YWwpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tX2ZvbnRTaXplID0gMTY7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX2ZvbnROYW1lXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIO2VhOuTnOyXkOyEnCDsgqzsmqnrkJjripQg7Y+w7Yq47J2066aELlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIGZvbnROYW1lKClcclxuICAgICAgICAgKiAvLyBzZXR0ZXIgZm9udE5hbWUodmFsKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubV9mb250TmFtZSA9ICdNYWxndW5Hb3RoaWMnO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV9mb250V2VpZ2h0XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIO2VhOuTnOyXkOyEnCDsgqzsmqnrkJjripQg7Y+w7Yq4IOuRkOq7mFxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIGZvbnRXZWlnaHQoKVxyXG4gICAgICAgICAqIC8vIHNldHRlciBmb250V2VpZ2h0KHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1fZm9udFdlaWdodCA9IFwiXCI7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX2ZvbnRTdHlsZVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zsl5DshJwg7IKs7Jqp65CY64qUIO2PsO2KuCDsiqTtg4DsnbxcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciBmb250U3R5bGUoKVxyXG4gICAgICAgICAqIC8vIHNldHRlciBmb250U3R5bGUodmFsKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubV9mb250U3R5bGUgPSBcIlwiO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjbV9mb250Q29sb3JcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24g7ZWE65Oc7JeQ7IScIOyCrOyaqeuQmOuKlCDtj7Dtirgg7IOJ7IOBXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKiAvLyBnZXR0ZXIgZm9udENvbG9yKClcclxuICAgICAgICAgKiAvLyBzZXR0ZXIgZm9udENvbG9yKHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1fZm9udENvbG9yID0gXCIjMDAwMDAwXCJcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI21fa2luZFxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiAg7ZWE65Oc7KKF66WY7J2YIO2VnOq4gOydtOumhFxyXG4gICAgICAgICAqIEByZWFkb25seVxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIGtpbmQoKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubV9raW5kID0gXCJcIjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge0Jvb2xlYW59XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX2lzUmVtb3ZlZFxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIGlzUmVtb3ZlZCgpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIGlzUmVtb3ZlZCh2YWwpXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uICDtlYTrk5zsgq3soJzsl6zrtoBcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1faXNSZW1vdmVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX3ZhbHVlXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uICDtlYTrk5wg6rCSXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKiAvLyBnZXR0ZXIgdmFsdWUoKVxyXG4gICAgICAgICAqIC8vIHNldHRlciB2YWx1ZSh2YWwpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tX3ZhbHVlID0gXCJcIjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI21fb3duZXJJZFxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiAg7ZWE65Oc6rCAIOyGje2VnCDshJzrqoXsnpDsnZggSURcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciBvd25lcklkKClcclxuICAgICAgICAgKiAvLyBzZXR0ZXIgb3duZXJJZCh2YWwpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tX293bmVySWQgPSBcIlwiXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNtX2ZpZWxkSWRcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gIO2VhOuTnOydmCDrs4Tsua1cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciBmaWVsZElkKClcclxuICAgICAgICAgKiAvLyBzZXR0ZXIgZmllbGRJZCh2YWwpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tX2ZpZWxkSWQgPSBpZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI21fcmVxdWlyZWRcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gIO2VhOuTnOydmCDtlYTsiJjsl6zrtoBcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciByZXF1aXJlZCgpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIHJlcXVpcmVkKHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1fcmVxdWlyZWQgPSBcInRydWVcIjtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gZnJvbUpzb25cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjZnJvbUpzb25cclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBKU09O642w7J207YSw66GcIOuhnOuTnO2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdGFyZ2V0IOuzteyCrO2VoCDtlYTrk5wg7Jik67iM7KCd7Yq4XHJcbiAgICAgKiBAcGFyYW0ganNvbkRhdGEg7ZWE65Oc7J2YIEpTT07rjbDsnbTthLAuXHJcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEpTT07rjbDsnbTthLDrpbwg66Gc65Oc7ZWcIO2VhOuTnOulvCDrpqzthLTtlZzri6QuXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKi8gXHJcbiAgICBzdGF0aWMgZnJvbUpzb24odGFyZ2V0LCBqc29uRGF0YSkge1xyXG4gICAgICAgIGxldCBmaWVsZCA9IE9iamVjdC5hc3NpZ24odGFyZ2V0LCBqc29uRGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIGZpZWxkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIGZpZWxkTmFtZVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNmaWVsZE5hbWVcclxuICAgICAqIEByZXR1cm4ge1N0cmluZ31cclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtlYTrk5wg7YOA7J6F7J2YIOydtOumhFxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZpZWxkTmFtZSgpIHtcclxuICAgICAgICByZXR1cm4gXCJCYXNlRmllbGRcIjtcclxuICAgIH1cclxuXHJcbiAgICBhbmNlc3RvcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFtcIkJGXCJdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB0eXBlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fdHlwZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV9pZDtcclxuICAgIH1cclxuICAgIGdldCBraW5kKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fa2luZDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgaWQoX19pZCkge1xyXG4gICAgICAgIHRoaXMubV9pZCA9IF9faWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGZpZWxkSWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV9maWVsZElkO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBmaWVsZElkKF9fZmllbGRJZCkge1xyXG4gICAgICAgIHRoaXMubV9pZCA9IF9fZmllbGRJZDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcGFnZU5vKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fcGFnZU5vO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBwYWdlTm8oX3BhZ2VObykge1xyXG4gICAgICAgIHRoaXMubV9wYWdlTm8gPSBfcGFnZU5vO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB4KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1feDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgeChfX3gpIHtcclxuICAgICAgICB0aGlzLm1feCA9IF9feDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgeSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX3k7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHkoX195KSB7XHJcbiAgICAgICAgdGhpcy5tX3kgPSBfX3k7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHdpZHRoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fd2lkdGg7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHdpZHRoKF9fd2lkdGgpIHtcclxuICAgICAgICB0aGlzLm1fd2lkdGggPSBfX3dpZHRoO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBoZWlnaHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV9oZWlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGhlaWdodChfX2hlaWdodCkge1xyXG4gICAgICAgIHRoaXMubV9oZWlnaHQgPSBfX2hlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdG9vbFRpcCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX3Rvb2xUaXA7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHRvb2xUaXAoX190b29sVGlwKSB7XHJcbiAgICAgICAgdGhpcy5tX3Rvb2xUaXAgPSBfX3Rvb2xUaXA7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHBkZlgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV9wZGZYO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBwZGZYKF9fcGRmWCkge1xyXG4gICAgICAgIHRoaXMubV9wZGZYID0gX19wZGZYO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBwZGZZKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fcGRmWTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgcGRmWShfX3BkZlkpIHtcclxuICAgICAgICB0aGlzLm1fcGRmWSA9IF9fcGRmWTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcGRmWDIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV9wZGZYMjtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgcGRmWDIoX19wZGZYMikge1xyXG4gICAgICAgIHRoaXMubV9wZGZYMiA9IF9fcGRmWDI7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHBkZlkyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fcGRmWTI7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHBkZlkyKF9fcGRmWTIpIHtcclxuICAgICAgICB0aGlzLm1fcGRmWTIgPSBfX3BkZlkyO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBmb250U2l6ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX2ZvbnRTaXplO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBmb250U2l6ZShfX2ZvbnRTaXplKSB7XHJcbiAgICAgICAgdGhpcy5tX2ZvbnRTaXplID0gX19mb250U2l6ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZm9udE5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV9mb250TmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgZm9udE5hbWUoX19mb250TmFtZSkge1xyXG4gICAgICAgIHRoaXMubV9mb250TmFtZSA9IF9fZm9udE5hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGZvbnRXZWlnaHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV9mb250V2VpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBmb250V2VpZ2h0KF9fZm9udFdlaWdodCkge1xyXG4gICAgICAgIHRoaXMubV9mb250V2VpZ2h0ID0gX19mb250V2VpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBmb250U3R5bGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV9mb250U3R5bGU7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGZvbnRTdHlsZShfX2ZvbnRTdHlsZSkge1xyXG4gICAgICAgIHRoaXMubV9mb250U3R5bGUgPSBfX2ZvbnRTdHlsZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZm9udENvbG9yKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fZm9udENvbG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBmb250Q29sb3IoX19mb250Q29sb3IpIHtcclxuICAgICAgICB0aGlzLm1fZm9udENvbG9yID0gX19mb250Q29sb3I7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlzUmVtb3ZlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX2lzUmVtb3ZlZDtcclxuICAgIH1cclxuICAgIHNldCBpc1JlbW92ZWQoX2lzUmVtb3ZlZCkge1xyXG4gICAgICAgIHRoaXMubV9pc1JlbW92ZWQgPSBfaXNSZW1vdmVkO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB2YWx1ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX3ZhbHVlO1xyXG4gICAgfVxyXG4gICAgc2V0IHZhbHVlKF92YWx1ZSkge1xyXG4gICAgICAgIHRoaXMubV92YWx1ZSA9IF92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgb3duZXJJZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX293bmVySWQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IG93bmVySWQoX19vd25lcklkKSB7XHJcbiAgICAgICAgdGhpcy5tX293bmVySWQgPSBfX293bmVySWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHJlcXVpcmVkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fcmVxdWlyZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHJlcXVpcmVkKF9fcmVxdWlyZWQpIHtcclxuICAgICAgICB0aGlzLm1fcmVxdWlyZWQgPSBfX3JlcXVpcmVkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBmdW5jdGlvbiBzaG93RmllbGRBdHRyaWJ1dGVcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjc2hvd0ZpZWxkQXR0cmlidXRlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE65Oc7J2YIOyGjeyEsSDtjJ3sl4XssL3snYQg7ISk7KCV7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7RUxFTUVOVH0gbm9kZSAg7IaN7ISxIO2MneyXhSBOb2RlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gaWRWYWx1ZSAgICAg7ZWE65Oc7J2YIGlk6rCSXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcmVxdWlyZWRWYWx1ZSAgICAg7ZWE7IiY7Jes67aAIOqwklxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG93bmVySWRWYWx1ZSAgICDshJzrqoXsnpAg7JWE7J2065SUXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSB1c2VyTGlzdCAgIOyEnOuqheyekCDrpqzsiqTtirhcclxuICAgICAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNoYW5nZUV2ZW50RnVuYyAgICDsho3shLHqsJLsnbQg67OA7ZWg65WMIO2YuOy2nOuQmOuKlCBjYWxsYmFjayBmdW5jdGlvblxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgc2hvd0ZpZWxkQXR0cmlidXRlKG5vZGUsXHJcbiAgICAgICAgaWRWYWx1ZSwgZmllbGRJZFZhbHVlLCByZXF1aXJlZFZhbHVlLCBvd25lcklkVmFsdWUsXHJcbiAgICAgICAgdXNlckxpc3QsXHJcbiAgICAgICAgY2hhbmdlRXZlbnRGdW5jKSB7XHJcblxyXG4gICAgICAgIHZhciBwYW5lbCA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVBhbmVsTm9kZSgpO1xyXG5cclxuICAgICAgICB2YXIgcmVxdWlyZVJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVRvZ2dsZUJ1dHRvbk5vZGUoaWRWYWx1ZSwgXCJyZXF1aXJlZFwiLCBcIlRlbXBsYXRlLmlzUmVxdWlyZWRcIiwgcmVxdWlyZWRWYWx1ZSwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChyZXF1aXJlUm93KTtcclxuICAgICAgICBsZXQgdXNlRGVmYXVsT3B0aW9uTm9kZSA9IFV0aWxzLmdldFVzZXJJbmZvT3B0c0xpc3RDb3VudCgpICE9PSAxO1xyXG4gICAgICAgIHZhciBvd25lclNlbGVjdFJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVNlbGVjdE5vZGUoaWRWYWx1ZSwgXCJvd25lcklkXCIsIHVzZXJMaXN0LCBcIlwiLCB1c2VEZWZhdWxPcHRpb25Ob2RlKTtcclxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChvd25lclNlbGVjdFJvdyk7XHJcblxyXG4gICAgICAgIGxldCBvd25lclNlbGVjdCA9IG93bmVyU2VsZWN0Um93LnF1ZXJ5U2VsZWN0b3IoXCJzZWxlY3RcIik7XHJcbiAgICAgICAgJChvd25lclNlbGVjdCkuc2VsZWN0Mih7XHJcbiAgICAgICAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcclxuICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChvd25lclNlbGVjdCkudmFsKG93bmVySWRWYWx1ZSkudHJpZ2dlcihcImNoYW5nZVwiKTtcclxuICAgICAgICAkKG93bmVyU2VsZWN0KS5vbihcImNoYW5nZVwiLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG5cclxuICAgICAgICB2YXIgZmllbGRJZFZhbHVlUm93ID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlSW5wdXROb2RlKGlkVmFsdWUsIFwiZmllbGRJZFwiLCBcIlRlbXBsYXRlLmZpZWxkSWRUZXh0XCIsIGZpZWxkSWRWYWx1ZSwgXCJcIiwgXCJcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChmaWVsZElkVmFsdWVSb3cpO1xyXG5cclxuXHJcbiAgICAgICAgcGFuZWwuc2V0QXR0cmlidXRlKFwiRmllbGQtaWQtbGlzdFwiLCBpZFZhbHVlKTtcclxuICAgICAgICBub2RlLmNsYXNzTmFtZSA9IFwiRWRpdG9yLUF0dHJpYnV0ZVwiO1xyXG4gICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZChcIkJhc2UtRmllbGRcIik7XHJcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChwYW5lbCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQGZ1bmN0aW9uIHNob3dGaWVsZHNBdHRyaWJ1dGVcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjc2hvd0ZpZWxkc0F0dHJpYnV0ZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOuTnOydmCDsho3shLEg7Yyd7JeF7LC97J2EIOyEpOygle2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0hUTUx9IG93bmVyTm9kZSAg7IaN7ISxIO2MneyXhSBOb2RlXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBmaWVsZExpc3QgICAg7ZWE65Oc65Ok7J2YIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtIVE1MfSBhdHRyTm9kZSAgIOyGjeyEsSDtjJ3sl4XsnZggTm9kZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1haW5Hcm91cCAgICBTVkfsnZgg66mU7J24IEVsZW1lbnRcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHVzZXJMaXN0ICDshJzrqoXsnpAg66as7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBkdk9wdGlvbkxpc3QgICDquLDrs7jqsJIg7ISg7YOdIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtDYWxsYmFja30gY2hhbmdlRXZlbnRGdW5jICAg7IaN7ISx6rCS7J20IOuzgO2VoOuVjCDtmLjstpzrkJjripQgY2FsbGJhY2sgZnVuY3Rpb25cclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHNob3dGaWVsZHNBdHRyaWJ1dGUob3duZXJOb2RlLCBmaWVsZExpc3QsIGF0dHJOb2RlLCBtYWluR3JvdXAsIHVzZXJMaXN0LCBkdk9wdGlvbkxpc3QsIGNoYW5nZUV2ZW50RnVuYykge1xyXG4gICAgICAgIGxldCBub2RlID0gYXR0ck5vZGU7XHJcbiAgICAgICAgaWYgKGF0dHJOb2RlID09PSBudWxsIHx8IFV0aWxzLmlzRW1wdHlPYmplY3QoYXR0ck5vZGUpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJib3ggPSBVdGlscy5tZXJnZUZpZWxkc0JCb3goZmllbGRMaXN0KTtcclxuICAgICAgICAgICAgbm9kZSA9IFV0aWxzLmNyZWF0ZUF0dHJidXRlUG9wdXAob3duZXJOb2RlLCBiYm94KTtcclxuICAgICAgICAgICAgVXRpbHMucmVwb3NpdGlvbkZpZWxkRGVsZXRlQnRuKG93bmVyTm9kZSwgYmJveC54LCBiYm94LnksIGJib3gud2lkdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBVdGlscy5yZW1vdmVBbGxDaGlsZE5vZGUobm9kZSk7XHJcblxyXG4gICAgICAgIHZhciBpZFZhbHVlQXJyID0gW107XHJcbiAgICAgICAgZmllbGRMaXN0LmZvckVhY2goKGZpZWxkKSA9PiB7XHJcbiAgICAgICAgICAgIGlkVmFsdWVBcnIucHVzaChmaWVsZC5pZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIGlkVmFsdWUgPSBpZFZhbHVlQXJyLmpvaW4oKTtcclxuXHJcbiAgICAgICAgdmFyIG93bmVySWRWYWx1ZSA9IGZpZWxkTGlzdFswXS5vd25lcklkO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5vd25lcklkICE9PSBvd25lcklkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIG93bmVySWRWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciByZXF1aXJlZFZhbHVlID0gZmllbGRMaXN0WzBdLnJlcXVpcmVkO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5yZXF1aXJlZCAhPT0gcmVxdWlyZWRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgcmVxdWlyZWRWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBmaWVsZElkVmFsdWUgPSBmaWVsZExpc3RbMF0uZmllbGRJZDtcclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0uZmllbGRJZCAhPT0gZmllbGRJZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZElkVmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBCYXNlRmllbGQuc2hvd0ZpZWxkQXR0cmlidXRlKG5vZGUsXHJcbiAgICAgICAgICAgIGlkVmFsdWUsIGZpZWxkSWRWYWx1ZSwgcmVxdWlyZWRWYWx1ZSwgb3duZXJJZFZhbHVlLFxyXG4gICAgICAgICAgICB1c2VyTGlzdCxcclxuICAgICAgICAgICAgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgIH1cclxuXHJcbiAgICB2YWxpZGF0ZVZhbHVlKHByb3BlcnR5TmFtZSwgdmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQGZ1bmN0aW9uIGdldEJCb3hcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjZ2V0QkJveFxyXG4gICAgICogQGRlc2NyaXB0aW9uIO2VhOuTnOydmCBib3VuZGluZyBSZWN066W8IOumrO2EtCAuXHJcbiAgICAgKiBAbWVtYmVyT2YgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZFxyXG4gICAgICogQHJldHVybiB7UmVjdH0gT2JqZWN0IFxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBnZXRCQm94KCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGxlZnQ6IHRoaXMueCxcclxuICAgICAgICAgICAgdG9wOiB0aGlzLnksXHJcbiAgICAgICAgICAgIHJpZ2h0OiB0aGlzLnggKyB0aGlzLndpZHRoLFxyXG4gICAgICAgICAgICBib3R0b206IHRoaXMueSArIHRoaXMuaGVpZ2h0LFxyXG4gICAgICAgICAgICB4OiB0aGlzLngsXHJcbiAgICAgICAgICAgIHk6IHRoaXMueSxcclxuICAgICAgICAgICAgd2lkdGg6IHRoaXMud2lkdGgsXHJcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5oZWlnaHRcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0gXHJcbiIsIlxyXG4vKipcclxuICogQG1vZHVsZSBUZW1wbGF0ZS9GaWVsZFxyXG4qL1xyXG5cclxuaW1wb3J0IHsgQmFzZUZpZWxkIH0gZnJvbSAnLi9CYXNlRmllbGQnO1xyXG5pbXBvcnQge1V0aWxzfSBmcm9tICcuLy4uL3V0aWxzL3V0aWxzLmpzJztcclxuaW1wb3J0IHtDT05TVEFOVFN9IGZyb20gJy4vLi4vQ29uc3RhbnRzLmpzJztcclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24g7LK07YGs67CV7IqkIO2VhOuTnCBDbGFzc1xyXG4gKlxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBmaWVsZE5hbWUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5DaGVja2JveEZpZWxkI2ZpZWxkTmFtZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gd2lkdGhWYWx1ZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkNoZWNrYm94RmllbGQjd2lkdGhWYWx1ZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gaGVpZ2h0VmFsdWUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5DaGVja2JveEZpZWxkI2hlaWdodFZhbHVlfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBnZXRTVkdGaWVsZE9iamVjdCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkNoZWNrYm94RmllbGQjZ2V0U1ZHRmllbGRPYmplY3R9XHJcbiAqIFxyXG4gKiBAYXVnbWVudHMgQmFzZUZpZWxkIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI0Jhc2VGaWVsZH1cclxuICogQEZpbGVOYW1lIENoZWNrYm94RmllbGQuanNcclxuICogQHNpbmNlIDIwMjEuMDUuMzFcclxuICovXHJcblxyXG5leHBvcnQgY2xhc3MgQ2hlY2tib3hGaWVsZCBleHRlbmRzIEJhc2VGaWVsZCB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAqIEBwYXJhbSBpZCDtlYTrk5zsnZggSURcclxuICAgICAqIEBwYXJhbSBwYWdlTm8g7ZWE65Oc6rCAIOyGje2VnCDtjpjsnbTsp4Ag67KI7Zi4XHJcbiAgICAgKiBAcGFyYW0geCDtlYTrk5zsnZggc3Zn7IOB7J2YIHjsooztkZxcclxuICAgICAqIEBwYXJhbSB5IO2VhOuTnOydmCBzdmfsg4HsnZggeeyijO2RnFxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoaWQsIHBhZ2VObywgeCwgeSkge1xyXG4gICAgICAgIHN1cGVyKGlkLCBwYWdlTm8sIHgsIHksIENoZWNrYm94RmllbGQud2lkdGhWYWx1ZSgpLCBDaGVja2JveEZpZWxkLmhlaWdodFZhbHVlKCkpO1xyXG4gICAgICAgIHRoaXMubV90eXBlID0gQ2hlY2tib3hGaWVsZC5maWVsZE5hbWUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5tX2tpbmQgPSBVdGlscy50cmFuc2xhdGVGb3JLZXkoXCJUZW1wbGF0ZS5jaGVja0ZpZWxkVG9vbFwiKTtcclxuXHJcbiAgICAgICAgaWYgKFV0aWxzLmlzU3RyaW5nRW1wdHkoaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tX2ZpZWxkSWQgPSB0aGlzLm1faWQucmVwbGFjZSh0aGlzLm1fdHlwZSwgdGhpcy5tX2tpbmQgKyBcIi1cIik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gZmllbGROYW1lXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQ2hlY2tib3hGaWVsZCNmaWVsZE5hbWVcclxuICAgICAqIEByZXR1cm4ge1N0cmluZ31cclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtlYTrk5wg7YOA7J6F7J2YIOydtOumhFxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZpZWxkTmFtZSgpIHtcclxuICAgICAgICByZXR1cm4gXCJDaGVja2JveEZpZWxkXCI7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGFuY2VzdG9ycygpIHtcclxuICAgICAgICByZXR1cm4gW1wiQ0JGXCIsIFwiQkZcIl07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gd2lkdGhWYWx1ZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkNoZWNrYm94RmllbGQjd2lkdGhWYWx1ZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOuTnOydmCDstIjquLAg6rCA66GcIOq4uOydtFxyXG4gICAgICogQHJldHVybiB7TnVtYmVyfVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHdpZHRoVmFsdWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIDYwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIGhlaWdodFZhbHVlXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQ2hlY2tib3hGaWVsZCNoZWlnaHRWYWx1ZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOuTnOydmCDstIjquLAg7IS466GcIOq4uOydtFxyXG4gICAgICogQHJldHVybiB7TnVtYmVyfVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGhlaWdodFZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybiA2MDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiBnZXRTVkdGaWVsZE9iamVjdFxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkNoZWNrYm94RmllbGQjZ2V0U1ZHRmllbGRPYmplY3RcclxuICAgICAqIEBtZW1iZXJPZiBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQ2hlY2tib3hGaWVsZFxyXG4gICAgICogQGRlc2NyaXB0aW9uIO2VhOuTnOydmCDsoJXrs7Trpbwg6rCA7KeA6rOgIFNWRyBFbGVtZW5066W8IOyDneyEse2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gY2FudmFzICBTbmFwIFNWR+ydmCBDYW52YXMgT2JqZWN0XHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbWFpbkdyb3VwICAgU1ZH7J2YIOuplOyduCBOb2RlXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gc2NhbGUgIO2YhOyerCBQREbsnZggU2NhbGVcclxuICAgICAqIEBwYXJhbSB7SFRNTH0gb3duZXJOb2RlICAg7ZW064u5IO2UhOuhnOygne2KuOydmCDstZzsg4Hri6ggRWxlbWVudOulvCDqsJDsi7jqs6Ag7J6I64qUIEVsZW1lbnRcclxuICAgICAqIEBwYXJhbSB7Q2FsbGJhY2t9IHJlbW92ZURyYWdPdmVyR3JvdXBGdW5jICAg65Oc656Y6re4IOuQmOyWtCDshKDtg53rkJjslrTsp4QgRmllbGQgR3JvdXDsnYQg7KCc6rGw7ZWY64qUIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICAgKiBAcGFyYW0ge0NhbGxiYWNrfSBjaGFuZ2VWYWx1ZUV2ZW50RnVuYyAgICAg7IaN7ISx6rCS7J20IOuzgO2VoOuVjCDtmLjstpzrkJjripQgY2FsbGJhY2sgZnVuY3Rpb25cclxuICAgICAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNoYW5nZUZyZWVUcmFuc2Zvcm1GdW5jICAgICBGcmVlVHJhbnNmb3Jt7J2EIOuLpOyLnCDsg53shLHtlZjquLAg7JyE7ZWcIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICAgKiBAcmV0dXJuIFNWRyBOb2RlIEVsZW1lbnRcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgZ2V0U1ZHRmllbGRPYmplY3QoY2FudmFzLCBtYWluR3JvdXAsIHNjYWxlLCBvd25lck5vZGUsIHJlbW92ZURyYWdPdmVyR3JvdXBGdW5jLCBjaGFuZ2VWYWx1ZUV2ZW50RnVuYywgY2hhbmdlRnJlZVRyYW5zZm9ybUZ1bmMpIHtcclxuICAgICAgICBsZXQgZ3JvdXAgPSBtYWluR3JvdXAuZ3JvdXAoKTtcclxuICAgICAgICBncm91cC5hdHRyKHtcclxuICAgICAgICAgICAgaWQ6IHRoaXMuaWQgKyBcIkdyb3VwXCIsXHJcbiAgICAgICAgICAgIGN1cnNvcjogXCJtb3ZlXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICBsZXQgcmVjdCA9IGNhbnZhcy5yZWN0KHRoaXMueCwgdGhpcy55LCB0aGlzLndpZHRoICogc2NhbGUsIHRoaXMuaGVpZ2h0ICogc2NhbGUpO1xyXG4gICAgICAgIHJlY3QuYXR0cih7XHJcbiAgICAgICAgICAgIGlkOiB0aGlzLmlkLFxyXG4gICAgICAgICAgICBcImZpbGwtb3BhY2l0eVwiOiBcIjAuNlwiLFxyXG4gICAgICAgICAgICBcImZpbGxcIjogXCIjZmZhYzdmXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICBncm91cC5hcHBlbmQocmVjdCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY2hlY2tTdHJpbmcgPSAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeD1cIicgKyB0aGlzLnggKyAncHhcIiB5PVwiJyArIHRoaXMueSArICdweFwiIHdpZHRoPVwiJyArIHRoaXMud2lkdGggKiBzY2FsZSArXHJcbiAgICAgICAgICAgICdweFwiIGhlaWdodD1cIicgKyB0aGlzLmhlaWdodCAqIHNjYWxlICsgJ3B4XCIgIHZpZXdCb3g9XCIwIDAgNDggNDhcIj48cGF0aCBkPVwiTTE3LjIgMzIuMkw0LjkgMTkuOSAwIDI0LjggMTcuMiA0MiA0OCAxMC45IDQzLjEgNnpcIi8+PC9zdmcgPidcclxuICAgICAgICBjb25zdCBwID0gU25hcC5wYXJzZShjaGVja1N0cmluZyk7XHJcbiAgICAgICAgZ3JvdXAuYXBwZW5kKHApO1xyXG5cclxuICAgICAgICBncm91cC5ob3ZlcihcclxuICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyAvLyBmX2luXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLy8gZl9vdXRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGxldCBfY2hrRmllbGQgPSB0aGlzO1xyXG4gICAgICAgIGxldCBtb3VzZVBvcyA9IHsgeDogMCwgeTogMCB9O1xyXG4gICAgICAgIGdyb3VwLm1vdXNlZG93bihmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgIG1vdXNlUG9zLnggPSBldnQucGFnZVg7XHJcbiAgICAgICAgICAgIG1vdXNlUG9zLnkgPSBldnQucGFnZVk7XHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gbWFpbkdyb3VwLnNlbGVjdEFsbCgnZycpO1xyXG4gICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCAhPT0gZ3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIVV0aWxzLmlzRW1wdHlPYmplY3QoZWxlbWVudC5mcmVlVHJhbnNmb3JtKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmZyZWVUcmFuc2Zvcm0uaGlkZVJlc2l6ZUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoIVV0aWxzLmlzRW1wdHlPYmplY3QoZ3JvdXAuZnJlZVRyYW5zZm9ybSkpIHtcclxuICAgICAgICAgICAgICAgIGdyb3VwLmZyZWVUcmFuc2Zvcm0uc2hvd1Jlc2l6ZUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNoYW5nZUZyZWVUcmFuc2Zvcm1GdW5jKGdyb3VwLCByZWN0LmF0dHIoXCJ3aWR0aFwiKSwgcmVjdC5hdHRyKFwiaGVpZ2h0XCIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBncm91cC5tb3VzZXVwKGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgaWYgKGdyb3VwLnBhcmVudCgpLmF0dHIoXCJpZFwiKSA9PT0gQ09OU1RBTlRTLkRSQUdfQk9YX05BTUUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb3VzZVBvcy54IC0gZXZ0LnBhZ2VYKSA+IENPTlNUQU5UUy5NSU5JTVVNX0RSQUdfU0laRVxyXG4gICAgICAgICAgICAgICAgICAgIHx8IE1hdGguYWJzKG1vdXNlUG9zLnkgLSBldnQucGFnZVkpID4gQ09OU1RBTlRTLk1JTklNVU1fRFJBR19TSVpFKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVtb3ZlRHJhZ092ZXJHcm91cEZ1bmMuY2FsbCgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBtYWluR3JvdXAuc2VsZWN0QWxsKCdnJyk7XHJcbiAgICAgICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgIT09IGdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghVXRpbHMuaXNFbXB0eU9iamVjdChlbGVtZW50LmZyZWVUcmFuc2Zvcm0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmZyZWVUcmFuc2Zvcm0uaGlkZVJlc2l6ZUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFVdGlscy5pc0VtcHR5T2JqZWN0KGdyb3VwLmZyZWVUcmFuc2Zvcm0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXAuZnJlZVRyYW5zZm9ybS5zaG93UmVzaXplSGFuZGxlcigpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VGcmVlVHJhbnNmb3JtRnVuYyhncm91cCwgcmVjdC5hdHRyKFwid2lkdGhcIiksIHJlY3QuYXR0cihcImhlaWdodFwiKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfY2hrRmllbGQuY29uc3RydWN0b3Iuc2hvd0ZpZWxkc0F0dHJpYnV0ZShvd25lck5vZGUsIFtfY2hrRmllbGRdLCB1bmRlZmluZWQsIG1haW5Hcm91cCwgVXRpbHMuZ2V0VXNlckluZm9PcHRzTGlzdCgpLCBVdGlscy5nZXREVkZpZWxkT3B0c0xpc3QoKSwgY2hhbmdlVmFsdWVFdmVudEZ1bmMpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX2Noa0ZpZWxkLmNvbnN0cnVjdG9yLnNob3dGaWVsZHNBdHRyaWJ1dGUob3duZXJOb2RlLCBbX2Noa0ZpZWxkXSwgdW5kZWZpbmVkLCBtYWluR3JvdXAsIFV0aWxzLmdldFVzZXJJbmZvT3B0c0xpc3QoKSwgVXRpbHMuZ2V0RFZGaWVsZE9wdHNMaXN0KCksIGNoYW5nZVZhbHVlRXZlbnRGdW5jKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBncm91cDtcclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbiIsIlxyXG4vKipcclxuICogQG1vZHVsZSBUZW1wbGF0ZS9GaWVsZFxyXG4qL1xyXG5cclxuaW1wb3J0IHtUZXh0QmFzZUZpZWxkfSBmcm9tICcuL1RleHRCYXNlRmllbGQnO1xyXG5pbXBvcnQge1V0aWxzfSBmcm9tICcuLy4uL3V0aWxzL3V0aWxzLmpzJztcclxuaW1wb3J0IHtDT05TVEFOVFN9IGZyb20gJy4vLi4vQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IENQIGZyb20gJy4vLi4vdXRpbHMvY29sb3ItcGlja2VyJztcclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24g7L2k67O067CV7IqkIO2VhOuTnCBDbGFzc1xyXG4gKlxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gbV9jb21ib2JveExpc3Qge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5Db21ib2JveEZpZWxkI21fY29tYm9ib3hMaXN0fVxyXG4gKlxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBmaWVsZE5hbWUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5Db21ib2JveEZpZWxkI2ZpZWxkTmFtZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gc2hvd0ZpZWxkQXR0cmlidXRlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQ29tYm9ib3hGaWVsZCNzaG93RmllbGRBdHRyaWJ1dGV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNob3dGaWVsZHNBdHRyaWJ1dGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5Db21ib2JveEZpZWxkI3Nob3dGaWVsZHNBdHRyaWJ1dGV9XHJcbiAqIFxyXG4gKiBAYXVnbWVudHMgVGV4dEJhc2VGaWVsZCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRCYXNlRmllbGQjVGV4dEJhc2VGaWVsZH1cclxuICogQEZpbGVOYW1lIENvbWJvYm94RmllbGQuanNcclxuICogQHNpbmNlIDIwMjEuMDUuMzFcclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb21ib2JveEZpZWxkIGV4dGVuZHMgVGV4dEJhc2VGaWVsZCB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAqIEBwYXJhbSBpZCDtlYTrk5zsnZggSURcclxuICAgICAqIEBwYXJhbSBwYWdlTm8g7ZWE65Oc6rCAIOyGje2VnCDtjpjsnbTsp4Ag67KI7Zi4XHJcbiAgICAgKiBAcGFyYW0geCDtlYTrk5zsnZggc3Zn7IOB7J2YIHjsooztkZxcclxuICAgICAqIEBwYXJhbSB5IO2VhOuTnOydmCBzdmfsg4HsnZggeeyijO2RnFxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoaWQsIHBhZ2VObywgeCwgeSkge1xyXG4gICAgICAgIHN1cGVyKGlkLCBwYWdlTm8sIHgsIHksIENvbWJvYm94RmllbGQud2lkdGhWYWx1ZSgpLCBDb21ib2JveEZpZWxkLmhlaWdodFZhbHVlKCkpO1xyXG4gICAgICAgIHRoaXMubV90eXBlID0gQ29tYm9ib3hGaWVsZC5maWVsZE5hbWUoKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQ29tYm9ib3hGaWVsZCNtX2NvbWJvYm94TGlzdFxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiDsvaTrs7TrsJXsiqTsl5Ag65Ok7Ja06rCIIOumrOyKpO2KuFxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIGNvbWJvYm94TGlzdCgpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIGNvbWJvYm94TGlzdCh2YWwpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tX2NvbWJvYm94TGlzdCA9IFwiXCI7XHJcblxyXG4gICAgICAgIHRoaXMubV9raW5kID0gVXRpbHMudHJhbnNsYXRlRm9yS2V5KFwiVGVtcGxhdGUuY29tYm9GaWVsZFRvb2xcIik7XHJcbiAgICAgICAgaWYgKFV0aWxzLmlzU3RyaW5nRW1wdHkoaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tX2ZpZWxkSWQgPSB0aGlzLm1faWQucmVwbGFjZSh0aGlzLm1fdHlwZSwgdGhpcy5tX2tpbmQgKyBcIi1cIik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gZmllbGROYW1lXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQ29tYm9ib3hGaWVsZCNmaWVsZE5hbWVcclxuICAgICAqIEByZXR1cm4ge1N0cmluZ31cclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtlYTrk5wg7YOA7J6F7J2YIOydtOumhFxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZpZWxkTmFtZSgpIHtcclxuICAgICAgICByZXR1cm4gXCJDb21ib2JveEZpZWxkXCI7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGFuY2VzdG9ycygpIHtcclxuICAgICAgICByZXR1cm4gW1wiQ01CRlwiLCBcIlRCRlwiLCBcIkJGXCJdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjb21ib2JveExpc3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV9jb21ib2JveExpc3Q7XHJcbiAgICB9XHJcbiAgICBzZXQgY29tYm9ib3hMaXN0KF9fY29tYm9ib3hMaXN0KSB7XHJcbiAgICAgICAgdGhpcy5tX2NvbWJvYm94TGlzdCA9IF9fY29tYm9ib3hMaXN0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIHNob3dGaWVsZEF0dHJpYnV0ZVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkNvbWJvYm94RmllbGQjc2hvd0ZpZWxkQXR0cmlidXRlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE65Oc7J2YIOyGjeyEsSDtjJ3sl4XssL3snYQg7ISk7KCV7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7SFRNTH0gbm9kZSAgIOyGjeyEsSDtjJ3sl4UgTm9kZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGlkVmFsdWUgICAgIO2VhOuTnOydmCBpZOqwklxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHJlcXVpcmVkVmFsdWUgICAgIO2VhOyImOyXrOu2gCDqsJJcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvd25lcklkVmFsdWUgICAg7ISc66qF7J6QIOyVhOydtOuUlFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGR2VmFsdWUgICAgIOq4sOuzuOqwklxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZvbnRGYW1pbHlOYW1lVmFsdWUgICAg7Y+w7Yq4IOydtOumhFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZvbnRTaXplVmFsdWUgICAgIO2PsO2KuCDtgazquLAg6rCSXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dEFsaWduVmFsdWUgICAg7YWN7Iqk7Yq4IOqwgOuhnCDsoJXroKwg6rCSXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gYm9sZFZhbHVlICAgICDtj7Dtirgg67O865OcIOyXrOu2gFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZvbnRDb2xvclZhbHVlICAgICDtj7Dtirgg7Lm86528XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY29tYm9ib3hMaXN0VmFsdWUgICAg7L2k67O067CV7IqkIOumrOyKpO2KuOyXkCDrk6TslrTqsIDripQg66as7Iqk7Yq4IOqwklxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gdXNlckxpc3QgICDshJzrqoXsnpAg66as7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBkdk9wdGlvbkxpc3QgICDquLDrs7jqsJIg7ISg7YOdIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtDYWxsYmFja30gY2hhbmdlRXZlbnRGdW5jICAgIOyGjeyEseqwkuydtCDrs4DtlaDrlYwg7Zi47Lac65CY64qUIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBzaG93RmllbGRBdHRyaWJ1dGUobm9kZSxcclxuICAgICAgICBpZFZhbHVlLCBmaWVsZElkVmFsdWUsIHJlcXVpcmVkVmFsdWUsIG93bmVySWRWYWx1ZSwgZHZWYWx1ZSwgZm9udEZhbWlseU5hbWVWYWx1ZSwgZm9udFNpemVWYWx1ZSwgdGV4dEFsaWduVmFsdWUsIGJvbGRWYWx1ZSwgZm9udENvbG9yVmFsdWUsIGNvbWJvYm94TGlzdFZhbHVlLFxyXG4gICAgICAgIHVzZXJMaXN0LCBkdk9wdGlvbkxpc3QsXHJcbiAgICAgICAgY2hhbmdlRXZlbnRGdW5jKSB7XHJcblxyXG4gICAgICAgIHZhciBwYW5lbCA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVBhbmVsTm9kZSgpO1xyXG5cclxuICAgICAgICB2YXIgcmVxdWlyZVJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVRvZ2dsZUJ1dHRvbk5vZGUoaWRWYWx1ZSwgXCJyZXF1aXJlZFwiLCBcIlRlbXBsYXRlLmlzUmVxdWlyZWRcIiwgcmVxdWlyZWRWYWx1ZSwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChyZXF1aXJlUm93KTtcclxuXHJcbiAgICAgICAgbGV0IHVzZURlZmF1bE9wdGlvbk5vZGUgPSBVdGlscy5nZXRVc2VySW5mb09wdHNMaXN0Q291bnQoKSAhPT0gMTtcclxuICAgICAgICB2YXIgb3duZXJTZWxlY3RSb3cgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVTZWxlY3ROb2RlKGlkVmFsdWUsIFwib3duZXJJZFwiLCB1c2VyTGlzdCwgXCJcIiwgdXNlRGVmYXVsT3B0aW9uTm9kZSk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQob3duZXJTZWxlY3RSb3cpO1xyXG5cclxuICAgICAgICBsZXQgb3duZXJTZWxlY3QgPSBvd25lclNlbGVjdFJvdy5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xyXG4gICAgICAgIGpRdWVyeShvd25lclNlbGVjdCkuc2VsZWN0Mih7XHJcbiAgICAgICAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcclxuICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgalF1ZXJ5KG93bmVyU2VsZWN0KS52YWwob3duZXJJZFZhbHVlKS50cmlnZ2VyKFwiY2hhbmdlXCIpO1xyXG4gICAgICAgIGpRdWVyeShvd25lclNlbGVjdCkub24oXCJjaGFuZ2VcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuXHJcbiAgICAgICAgLy8xMi0yOFxyXG4gICAgICAgIGlmIChkdk9wdGlvbkxpc3QgJiYgQXJyYXkuaXNBcnJheShkdk9wdGlvbkxpc3QpICYmIGR2T3B0aW9uTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciBkZWZhdWx0VmFsdWVSb3cgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVTZWxlY3ROb2RlKGlkVmFsdWUsIFwiZGVmYXVsdFZhbHVlXCIsIGR2T3B0aW9uTGlzdCwgXCJUZW1wbGF0ZS5kZWZhdWx0VmFsdWVUZXh0XCIsIHRydWUpO1xyXG4gICAgICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChkZWZhdWx0VmFsdWVSb3cpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGRlZmF1bHRWYWx1ZVNlbGVjdCA9IGRlZmF1bHRWYWx1ZVJvdy5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xyXG4gICAgICAgICAgICAkKGRlZmF1bHRWYWx1ZVNlbGVjdCkuc2VsZWN0Mih7XHJcbiAgICAgICAgICAgICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogXCIxMDAlXCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICQoZGVmYXVsdFZhbHVlU2VsZWN0KS52YWwoZHZWYWx1ZSkudHJpZ2dlcihcImNoYW5nZVwiKTtcclxuICAgICAgICAgICAgJChkZWZhdWx0VmFsdWVTZWxlY3QpLm9uKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgdmFyIGZpZWxkSWRWYWx1ZVJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZUlucHV0Tm9kZShpZFZhbHVlLCBcImZpZWxkSWRcIiwgXCJUZW1wbGF0ZS5maWVsZElkVGV4dFwiLCBmaWVsZElkVmFsdWUsIFwiXCIsIFwiXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQoZmllbGRJZFZhbHVlUm93KTtcclxuXHJcbiAgICAgICAgdmFyIGNvbWJvYm94Um93ID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlVGV4dEFyZWFOb2RlKGlkVmFsdWUsIFwiY29tYm9ib3hMaXN0XCIsIFwiVGVtcGxhdGUuY29tYm9Cb3hTZWxjdFZhbHVlVGV4dFwiLCBjb21ib2JveExpc3RWYWx1ZSwgXCJcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChjb21ib2JveFJvdyk7XHJcblxyXG4gICAgICAgIHZhciBmb250QXR0clJvdyA9IFV0aWxzLmNyZWF0ZVRleHRBdHRyYnV0ZU5vZGUoaWRWYWx1ZSwgZm9udENvbG9yVmFsdWUsIHRleHRBbGlnblZhbHVlLCBib2xkVmFsdWUsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQoZm9udEF0dHJSb3cucm93KTtcclxuXHJcbiAgICAgICAgbGV0IGZvbnRGYW1pbHlDb21ib1NlbGVjdCA9IGZvbnRBdHRyUm93LmZvbnRGYW1pbHlDb21iby5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xyXG4gICAgICAgICQoZm9udEZhbWlseUNvbWJvU2VsZWN0KS5zZWxlY3QyKHtcclxuICAgICAgICAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxyXG4gICAgICAgICAgICB3aWR0aDogXCIxMDAlXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGZvbnRGYW1pbHlDb21ib1NlbGVjdCkudmFsKGZvbnRGYW1pbHlOYW1lVmFsdWUpLnRyaWdnZXIoXCJjaGFuZ2VcIik7XHJcbiAgICAgICAgJChmb250RmFtaWx5Q29tYm9TZWxlY3QpLm9uKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgbGV0IGZvbnRTaXplQ29tYm9TZWxlY3QgPSBmb250QXR0clJvdy5mb250U2l6ZUNvbWJvLnF1ZXJ5U2VsZWN0b3IoXCJzZWxlY3RcIik7XHJcbiAgICAgICAgJChmb250U2l6ZUNvbWJvU2VsZWN0KS5zZWxlY3QyKHtcclxuICAgICAgICAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxyXG4gICAgICAgICAgICB3aWR0aDogXCIxMDAlXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGZvbnRTaXplQ29tYm9TZWxlY3QpLnZhbChmb250U2l6ZVZhbHVlKS50cmlnZ2VyKFwiY2hhbmdlXCIpO1xyXG4gICAgICAgICQoZm9udFNpemVDb21ib1NlbGVjdCkub24oXCJjaGFuZ2VcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuXHJcbiAgICAgICAgbGV0IGNvbG9ySW5wdXQgPSBmb250QXR0clJvdy5jb2xvckJ0bi5xdWVyeVNlbGVjdG9yKFwiYnV0dG9uXCIpO1xyXG4gICAgICAgIGNvbG9ySW5wdXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gZm9udENvbG9yVmFsdWU7XHJcbiAgICAgICAgbGV0IHBpY2tlciA9IG5ldyBDUChjb2xvcklucHV0LCB7IGNvbG9yOiBmb250Q29sb3JWYWx1ZSB9KTtcclxuICAgICAgICBjb2xvcklucHV0LnZhbHVlID0gZm9udENvbG9yVmFsdWU7XHJcbiAgICAgICAgcGlja2VyLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAociwgZywgYiwgYSkge1xyXG4gICAgICAgICAgICBpZiAoIXBpY2tlci52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29sb3JJbnB1dC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBDUC5IRVgoW3IsIGcsIGIsIGFdKTtcclxuICAgICAgICAgICAgY29sb3JJbnB1dC52YWx1ZSA9IENQLkhFWChbciwgZywgYiwgYV0pO1xyXG5cclxuICAgICAgICAgICAgbGV0IGNvbG9yVGV4dElucHV0ID0gZm9udEF0dHJSb3cuY29sb3JCdG4ucXVlcnlTZWxlY3RvcihcImlucHV0W3R5cGU9J3RleHQnXVwiKTtcclxuICAgICAgICAgICAgY29sb3JUZXh0SW5wdXQudmFsdWUgPSAoQ1AuSEVYKFtyLCBnLCBiLCBhXSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBpY2tlci5vbignZXhpdCcsIGZ1bmN0aW9uIChyLCBnLCBiLCBhKSB7XHJcbiAgICAgICAgICAgIGNvbG9ySW5wdXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gQ1AuSEVYKFtyLCBnLCBiLCBhXSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgY29sb3JUZXh0SW5wdXQgPSBmb250QXR0clJvdy5jb2xvckJ0bi5xdWVyeVNlbGVjdG9yKFwiaW5wdXRbdHlwZT0ndGV4dCddXCIpO1xyXG4gICAgICAgICAgICBjb2xvclRleHRJbnB1dC52YWx1ZSA9IChDUC5IRVgoW3IsIGcsIGIsIGFdKSk7XHJcbiAgICAgICAgICAgIGNvbG9yVGV4dElucHV0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiY2hhbmdlXCIpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcGFuZWwuc2V0QXR0cmlidXRlKFwiRmllbGQtaWQtbGlzdFwiLCBpZFZhbHVlKTtcclxuICAgICAgICBub2RlLmNsYXNzTmFtZSA9IFwiRWRpdG9yLUF0dHJpYnV0ZVwiO1xyXG4gICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZChcIlRleHQtRmllbGRcIik7XHJcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChwYW5lbCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIHNob3dGaWVsZHNBdHRyaWJ1dGVcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5Db21ib2JveEZpZWxkI3Nob3dGaWVsZHNBdHRyaWJ1dGVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtlYTrk5zsnZgg7IaN7ISxIO2MneyXheywveydhCDshKTsoJXtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtIVE1MfSBvd25lck5vZGUgIOyGjeyEsSDtjJ3sl4UgTm9kZVxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gZmllbGRMaXN0ICAgICDtlYTrk5zrk6TsnZgg66as7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge0hUTUx9IGF0dHJOb2RlICAgIOyGjeyEsSDtjJ3sl4XsnZggTm9kZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1haW5Hcm91cCAgICBTVkfsnZgg66mU7J24IEVsZW1lbnRcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHVzZXJMaXN0ICAg7ISc66qF7J6QIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gZHZPcHRpb25MaXN0ICAg6riw67O46rCSIOyEoO2DnSDrpqzsiqTtirhcclxuICAgICAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNoYW5nZUV2ZW50RnVuYyAgICDsho3shLHqsJLsnbQg67OA7ZWg65WMIO2YuOy2nOuQmOuKlCBjYWxsYmFjayBmdW5jdGlvblxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgc2hvd0ZpZWxkc0F0dHJpYnV0ZShvd25lck5vZGUsIGZpZWxkTGlzdCwgYXR0ck5vZGUsIG1haW5Hcm91cCwgdXNlckxpc3QsIGR2T3B0aW9uTGlzdCwgY2hhbmdlRXZlbnRGdW5jKSB7XHJcbiAgICAgICAgbGV0IG5vZGUgPSBhdHRyTm9kZTtcclxuICAgICAgICBpZiAoYXR0ck5vZGUgPT09IG51bGwgfHwgVXRpbHMuaXNFbXB0eU9iamVjdChhdHRyTm9kZSkpIHtcclxuICAgICAgICAgICAgY29uc3QgYmJveCA9IFV0aWxzLm1lcmdlRmllbGRzQkJveChmaWVsZExpc3QpO1xyXG4gICAgICAgICAgICBub2RlID0gVXRpbHMuY3JlYXRlQXR0cmJ1dGVQb3B1cChvd25lck5vZGUsIGJib3gpO1xyXG4gICAgICAgICAgICBVdGlscy5yZXBvc2l0aW9uRmllbGREZWxldGVCdG4ob3duZXJOb2RlLCBiYm94LngsIGJib3gueSwgYmJveC53aWR0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFV0aWxzLnJlbW92ZUFsbENoaWxkTm9kZShub2RlKTtcclxuXHJcbiAgICAgICAgdmFyIGlkVmFsdWVBcnIgPSBbXTtcclxuICAgICAgICBmaWVsZExpc3QuZm9yRWFjaCgoZmllbGQpID0+IHtcclxuICAgICAgICAgICAgaWRWYWx1ZUFyci5wdXNoKGZpZWxkLmlkKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdmFyIGlkVmFsdWUgPSBpZFZhbHVlQXJyLmpvaW4oKTtcclxuXHJcbiAgICAgICAgdmFyIG93bmVySWRWYWx1ZSA9IGZpZWxkTGlzdFswXS5vd25lcklkO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5vd25lcklkICE9PSBvd25lcklkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIG93bmVySWRWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciByZXF1aXJlZFZhbHVlID0gZmllbGRMaXN0WzBdLnJlcXVpcmVkO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5yZXF1aXJlZCAhPT0gcmVxdWlyZWRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgcmVxdWlyZWRWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBkdlZhbHVlID0gZmllbGRMaXN0WzBdLmRlZmF1bHRWYWx1ZTtcclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0uZGVmYXVsdFZhbHVlICE9PSBkdlZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBkdlZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGZvbnRGYW1pbHlOYW1lVmFsdWUgPSBmaWVsZExpc3RbMF0uZm9udE5hbWU7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmZvbnROYW1lICE9PSBmb250RmFtaWx5TmFtZVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBmb250RmFtaWx5TmFtZVZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZm9udFNpemVWYWx1ZSA9IGZpZWxkTGlzdFswXS5mb250U2l6ZTtcclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0uZm9udFNpemUgIT09IGZvbnRTaXplVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplVmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgdGV4dEFsaWduVmFsdWUgPSBmaWVsZExpc3RbMF0udGV4dEFsaWduO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS50ZXh0QWxpZ24gIT09IHRleHRBbGlnblZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QWxpZ25WYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBib2xkVmFsdWUgPSBmaWVsZExpc3RbMF0uaXNCb2xkO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5pc0JvbGQgIT09IGJvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgYm9sZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZm9udENvbG9yVmFsdWUgPSBmaWVsZExpc3RbMF0uZm9udENvbG9yO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5mb250Q29sb3IgIT09IGZvbnRDb2xvclZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBmb250Q29sb3JWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBjb21ib2JveExpc3RWYWx1ZSA9IGZpZWxkTGlzdFswXS5jb21ib2JveExpc3Q7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmNvbWJvYm94TGlzdCAhPT0gY29tYm9ib3hMaXN0VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbWJvYm94TGlzdFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGR2T3B0aW9ucyA9IFtdO1xyXG5cclxuICAgICAgICBpZiAoY29tYm9ib3hMaXN0VmFsdWUgIT09ICcnKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbWJvbGlzdCA9IGNvbWJvYm94TGlzdFZhbHVlLnNwbGl0KFwiXFxuXCIpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBjb21ib2xpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKFV0aWxzLmlzU3RyaW5nRW1wdHkoY29tYm9saXN0W2lkeF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBkdk9wdGlvbnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogY29tYm9saXN0W2lkeF0sXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNvbWJvbGlzdFtpZHhdXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZmllbGRJZFZhbHVlID0gZmllbGRMaXN0WzBdLmZpZWxkSWQ7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmZpZWxkSWQgIT09IGZpZWxkSWRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgZmllbGRJZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgQ29tYm9ib3hGaWVsZC5zaG93RmllbGRBdHRyaWJ1dGUobm9kZSxcclxuICAgICAgICAgICAgaWRWYWx1ZSwgZmllbGRJZFZhbHVlLCByZXF1aXJlZFZhbHVlLCBvd25lcklkVmFsdWUsIGR2VmFsdWUsIGZvbnRGYW1pbHlOYW1lVmFsdWUsIGZvbnRTaXplVmFsdWUsIHRleHRBbGlnblZhbHVlLCBib2xkVmFsdWUsIGZvbnRDb2xvclZhbHVlLCBjb21ib2JveExpc3RWYWx1ZSxcclxuICAgICAgICAgICAgdXNlckxpc3QsIGR2T3B0aW9ucyxcclxuICAgICAgICAgICAgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgIH1cclxuXHJcbiAgICB2YWxpZGF0ZVZhbHVlKHByb3BlcnR5TmFtZSwgdmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbn1cclxuIiwiXHJcbi8qKlxyXG4gKiBAbW9kdWxlIFRlbXBsYXRlL0ZpZWxkXHJcbiovXHJcblxyXG5pbXBvcnQge1RleHRCYXNlRmllbGR9IGZyb20gJy4vVGV4dEJhc2VGaWVsZCc7XHJcbmltcG9ydCB7VXRpbHN9IGZyb20gJy4vLi4vdXRpbHMvdXRpbHMuanMnO1xyXG5pbXBvcnQge0NPTlNUQU5UU30gZnJvbSAnLi8uLi9Db25zdGFudHMuanMnO1xyXG5pbXBvcnQgQ1AgZnJvbSAnLi8uLi91dGlscy9jb2xvci1waWNrZXInO1xyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiDrgqDsp5wg7ZWE65OcIENsYXNzXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGZpZWxkTmFtZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkRhdGVGaWVsZCNmaWVsZE5hbWV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNob3dGaWVsZEF0dHJpYnV0ZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkRhdGVGaWVsZCNzaG93RmllbGRBdHRyaWJ1dGV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNob3dGaWVsZHNBdHRyaWJ1dGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5EYXRlRmllbGQjc2hvd0ZpZWxkc0F0dHJpYnV0ZX1cclxuICogXHJcbiAqIEBhdWdtZW50cyBUZXh0QmFzZUZpZWxkIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuVGV4dEJhc2VGaWVsZCNUZXh0QmFzZUZpZWxkfVxyXG4gKiBARmlsZU5hbWUgRGF0ZUZpZWxkLmpzXHJcbiAqIEBzaW5jZSAyMDIxLjA1LjMxXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRGF0ZUZpZWxkIGV4dGVuZHMgVGV4dEJhc2VGaWVsZCB7XHJcbiAgICAvKipcclxuICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICogQHBhcmFtIGlkIO2VhOuTnOydmCBJRFxyXG4gICAgICogQHBhcmFtIHBhZ2VObyDtlYTrk5zqsIAg7IaN7ZWcIO2OmOydtOyngCDrsojtmLhcclxuICAgICAqIEBwYXJhbSB4IO2VhOuTnOydmCBzdmfsg4HsnZggeOyijO2RnFxyXG4gICAgICogQHBhcmFtIHkg7ZWE65Oc7J2YIHN2Z+yDgeydmCB57KKM7ZGcXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihpZCwgcGFnZU5vLCB4LCB5KSB7XHJcbiAgICAgICAgc3VwZXIoaWQsIHBhZ2VObywgeCwgeSwgRGF0ZUZpZWxkLndpZHRoVmFsdWUoKSwgRGF0ZUZpZWxkLmhlaWdodFZhbHVlKCkpO1xyXG4gICAgICAgIHRoaXMubV90eXBlID0gRGF0ZUZpZWxkLmZpZWxkTmFtZSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMubV9raW5kID0gVXRpbHMudHJhbnNsYXRlRm9yS2V5KFwiVGVtcGxhdGUuZGF0ZUZpZWxkVG9vbFwiKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuRGF0ZUZpZWxkI21faW5wdXRNYXhcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24g64Kg7Kec7J2YIOy1nOuMgOqwklxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIGlucHV0TWF4KClcclxuICAgICAgICAgKiAvLyBzZXR0ZXIgaW5wdXRNYXgodmFsKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubV9pbnB1dE1heCA9IFwiXCI7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkRhdGVGaWVsZCNtX2lucHV0TWluXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIOuCoOynnOydmCDstZzshozqsJJcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciBpbnB1dE1pbigpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIGlucHV0TWluKHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1faW5wdXRNaW4gPSBcIlwiO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5EYXRlRmllbGQjbV91c2VDdXJyZW50RGF0ZVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiAg7ZiE7J6sIOuCoOynnOulvCDquLDrs7jqsJLsnLzroZwg7IKs7Jqp7ZWgIOyngCDsl6zrtoBcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciB1c2VDdXJyZW50RGF0ZSgpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIHVzZUN1cnJlbnREYXRlKHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1fdXNlQ3VycmVudERhdGUgPSBcInRydWVcIjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuRGF0ZUZpZWxkI21faW5wdXRGb3JtYXRcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gIOuCoOynnCDtj6zrqadcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciBpbnB1dEZvcm1hdCgpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIGlucHV0Rm9ybWF0KHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1faW5wdXRGb3JtYXQgPSBcIlktbS1kXCI7XHJcbiAgICAgICAgaWYgKFV0aWxzLmlzU3RyaW5nRW1wdHkoaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tX2ZpZWxkSWQgPSB0aGlzLm1faWQucmVwbGFjZSh0aGlzLm1fdHlwZSwgdGhpcy5tX2tpbmQgKyBcIi1cIik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gZmllbGROYW1lXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuRGF0ZUZpZWxkI2ZpZWxkTmFtZVxyXG4gICAgICogQHJldHVybiB7U3RyaW5nfVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOuTnCDtg4DsnoXsnZgg7J2066aEXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZmllbGROYW1lKCkge1xyXG4gICAgICAgIHJldHVybiBcIkRhdGVGaWVsZFwiO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBhbmNlc3RvcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFtcIkRGXCIsIFwiVEJGXCIsIFwiQkZcIl07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlucHV0Rm9ybWF0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1faW5wdXRGb3JtYXQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGlucHV0Rm9ybWF0KF9faW5wdXRGb3JtYXQpIHtcclxuICAgICAgICB0aGlzLm1faW5wdXRGb3JtYXQgPSBfX2lucHV0Rm9ybWF0O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpbnB1dE1heCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX2lucHV0TWF4O1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBpbnB1dE1heChfX2lucHV0TWF4KSB7XHJcbiAgICAgICAgdGhpcy5tX2lucHV0TWF4ID0gX19pbnB1dE1heDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaW5wdXRNaW4oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV9pbnB1dE1pbjtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgaW5wdXRNaW4oX19pbnB1dE1pbikge1xyXG4gICAgICAgIHRoaXMubV9pbnB1dE1pbiA9IF9faW5wdXRNaW47XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHVzZUN1cnJlbnREYXRlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fdXNlQ3VycmVudERhdGU7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHVzZUN1cnJlbnREYXRlKF9fdXNlQ3VycmVudERhdGUpIHtcclxuICAgICAgICB0aGlzLm1fdXNlQ3VycmVudERhdGUgPSBfX3VzZUN1cnJlbnREYXRlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIHNob3dGaWVsZEF0dHJpYnV0ZVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkRhdGVGaWVsZCNzaG93RmllbGRBdHRyaWJ1dGVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSAg7ZWE65Oc7J2YIOyGjeyEsSDtjJ3sl4XssL3snYQg7ISk7KCV7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7SFRNTH0gbm9kZSAg7IaN7ISxIO2MneyXhSBOb2RlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gaWRWYWx1ZSAgICAg7ZWE65Oc7J2YIGlk6rCSXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcmVxdWlyZWRWYWx1ZSAgICAg7ZWE7IiY7Jes67aAIOqwklxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG93bmVySWRWYWx1ZSAgICAg7ISc66qF7J6QIOyVhOydtOuUlFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGlucHV0Rm9ybWF0VmFsdWUgICAgIOuCoOynnCDtmJXsi51cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB1c2VDdXJyZW50RGF0ZVZhbHVlICAgICDtmITsnqwg64Kg7Kec66W8IOyTsOuKlOyngCDsl6zrtoBcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmb250RmFtaWx5TmFtZVZhbHVlICAgICDtj7Dtirgg7J2066aEXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZm9udFNpemVWYWx1ZSAgICAg7Y+w7Yq4IO2BrOq4sCDqsJJcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0QWxpZ25WYWx1ZSAgICAg7YWN7Iqk7Yq4IOqwgOuhnCDsoJXroKwg6rCSXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gYm9sZFZhbHVlICAgICDtj7Dtirgg67O865OcIOyXrOu2gFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZvbnRDb2xvclZhbHVlICAgICDtj7Dtirgg7Lm86528XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY29tYm9ib3hMaXN0VmFsdWUgICAg7L2k67O067CV7IqkIOumrOyKpO2KuOyXkCDrk6TslrTqsIDripQg66as7Iqk7Yq4IOqwklxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gdXNlckxpc3QgICDshJzrqoXsnpAg66as7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBkdk9wdGlvbkxpc3QgICDquLDrs7jqsJIg7ISg7YOdIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtDYWxsYmFja30gY2hhbmdlRXZlbnRGdW5jICAgIOyGjeyEseqwkuydtCDrs4DtlaDrlYwg7Zi47Lac65CY64qUIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBzaG93RmllbGRBdHRyaWJ1dGUobm9kZSxcclxuICAgICAgICBpZFZhbHVlLCBmaWVsZElkVmFsdWUsIHJlcXVpcmVkVmFsdWUsIG93bmVySWRWYWx1ZSwgaW5wdXRGb3JtYXRWYWx1ZSwgdXNlQ3VycmVudERhdGVWYWx1ZSxcclxuICAgICAgICBmb250RmFtaWx5TmFtZVZhbHVlLCBmb250U2l6ZVZhbHVlLCB0ZXh0QWxpZ25WYWx1ZSwgYm9sZFZhbHVlLCBmb250Q29sb3JWYWx1ZSxcclxuICAgICAgICB1c2VyTGlzdCxcclxuICAgICAgICBjaGFuZ2VFdmVudEZ1bmMpIHtcclxuICAgICAgICB2YXIgcGFuZWwgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVQYW5lbE5vZGUoKTtcclxuXHJcbiAgICAgICAgdmFyIHJlcXVpcmVSb3cgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVUb2dnbGVCdXR0b25Ob2RlKGlkVmFsdWUsIFwicmVxdWlyZWRcIiwgXCJUZW1wbGF0ZS5pc1JlcXVpcmVkXCIsIHJlcXVpcmVkVmFsdWUsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQocmVxdWlyZVJvdyk7XHJcblxyXG4gICAgICAgIGxldCB1c2VEZWZhdWxPcHRpb25Ob2RlID0gVXRpbHMuZ2V0VXNlckluZm9PcHRzTGlzdENvdW50KCkgIT09IDE7XHJcbiAgICAgICAgdmFyIG93bmVyU2VsZWN0Um93ID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlU2VsZWN0Tm9kZShpZFZhbHVlLCBcIm93bmVySWRcIiwgdXNlckxpc3QsIFwiXCIsIHVzZURlZmF1bE9wdGlvbk5vZGUpO1xyXG4gICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKG93bmVyU2VsZWN0Um93KTtcclxuXHJcbiAgICAgICAgbGV0IG93bmVyU2VsZWN0ID0gb3duZXJTZWxlY3RSb3cucXVlcnlTZWxlY3RvcihcInNlbGVjdFwiKTtcclxuICAgICAgICAkKG93bmVyU2VsZWN0KS5zZWxlY3QyKHtcclxuICAgICAgICAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxyXG4gICAgICAgICAgICB3aWR0aDogXCIxMDAlXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKG93bmVyU2VsZWN0KS52YWwob3duZXJJZFZhbHVlKS50cmlnZ2VyKFwiY2hhbmdlXCIpO1xyXG4gICAgICAgICQob3duZXJTZWxlY3QpLm9uKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcblxyXG4gICAgICAgIHZhciBmb250QXR0clJvdyA9IFV0aWxzLmNyZWF0ZVRleHRBdHRyYnV0ZU5vZGUoaWRWYWx1ZSwgZm9udENvbG9yVmFsdWUsIHRleHRBbGlnblZhbHVlLCBib2xkVmFsdWUsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQoZm9udEF0dHJSb3cucm93KTtcclxuXHJcbiAgICAgICAgbGV0IGZvbnRGYW1pbHlDb21ib1NlbGVjdCA9IGZvbnRBdHRyUm93LmZvbnRGYW1pbHlDb21iby5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xyXG4gICAgICAgICQoZm9udEZhbWlseUNvbWJvU2VsZWN0KS5zZWxlY3QyKHtcclxuICAgICAgICAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxyXG4gICAgICAgICAgICB3aWR0aDogXCIxMDAlXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGZvbnRGYW1pbHlDb21ib1NlbGVjdCkudmFsKGZvbnRGYW1pbHlOYW1lVmFsdWUpLnRyaWdnZXIoXCJjaGFuZ2VcIik7XHJcbiAgICAgICAgJChmb250RmFtaWx5Q29tYm9TZWxlY3QpLm9uKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgbGV0IGZvbnRTaXplQ29tYm9TZWxlY3QgPSBmb250QXR0clJvdy5mb250U2l6ZUNvbWJvLnF1ZXJ5U2VsZWN0b3IoXCJzZWxlY3RcIik7XHJcbiAgICAgICAgJChmb250U2l6ZUNvbWJvU2VsZWN0KS5zZWxlY3QyKHtcclxuICAgICAgICAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxyXG4gICAgICAgICAgICB3aWR0aDogXCIxMDAlXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGZvbnRTaXplQ29tYm9TZWxlY3QpLnZhbChmb250U2l6ZVZhbHVlKS50cmlnZ2VyKFwiY2hhbmdlXCIpO1xyXG4gICAgICAgICQoZm9udFNpemVDb21ib1NlbGVjdCkub24oXCJjaGFuZ2VcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuXHJcbiAgICAgICAgbGV0IGNvbG9ySW5wdXQgPSBmb250QXR0clJvdy5jb2xvckJ0bi5xdWVyeVNlbGVjdG9yKFwiYnV0dG9uXCIpO1xyXG4gICAgICAgIGNvbG9ySW5wdXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gZm9udENvbG9yVmFsdWU7XHJcbiAgICAgICAgbGV0IHBpY2tlciA9IG5ldyBDUChjb2xvcklucHV0LCB7IGNvbG9yOiBmb250Q29sb3JWYWx1ZSB9KTtcclxuICAgICAgICBjb2xvcklucHV0LnZhbHVlID0gZm9udENvbG9yVmFsdWU7XHJcbiAgICAgICAgcGlja2VyLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAociwgZywgYiwgYSkge1xyXG4gICAgICAgICAgICBpZiAoIXBpY2tlci52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29sb3JJbnB1dC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBDUC5IRVgoW3IsIGcsIGIsIGFdKTtcclxuICAgICAgICAgICAgY29sb3JJbnB1dC52YWx1ZSA9IENQLkhFWChbciwgZywgYiwgYV0pO1xyXG5cclxuICAgICAgICAgICAgbGV0IGNvbG9yVGV4dElucHV0ID0gZm9udEF0dHJSb3cuY29sb3JCdG4ucXVlcnlTZWxlY3RvcihcImlucHV0W3R5cGU9J3RleHQnXVwiKTtcclxuICAgICAgICAgICAgY29sb3JUZXh0SW5wdXQudmFsdWUgPSAoQ1AuSEVYKFtyLCBnLCBiLCBhXSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBpY2tlci5vbignZXhpdCcsIGZ1bmN0aW9uIChyLCBnLCBiLCBhKSB7XHJcbiAgICAgICAgICAgIGNvbG9ySW5wdXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gQ1AuSEVYKFtyLCBnLCBiLCBhXSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgY29sb3JUZXh0SW5wdXQgPSBmb250QXR0clJvdy5jb2xvckJ0bi5xdWVyeVNlbGVjdG9yKFwiaW5wdXRbdHlwZT0ndGV4dCddXCIpO1xyXG4gICAgICAgICAgICBjb2xvclRleHRJbnB1dC52YWx1ZSA9IChDUC5IRVgoW3IsIGcsIGIsIGFdKSk7XHJcbiAgICAgICAgICAgIGNvbG9yVGV4dElucHV0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiY2hhbmdlXCIpKTtcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIHZhciBmaWVsZElkVmFsdWVSb3cgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVJbnB1dE5vZGUoaWRWYWx1ZSwgXCJmaWVsZElkXCIsIFwiVGVtcGxhdGUuZmllbGRJZFRleHRcIiwgZmllbGRJZFZhbHVlLCBcIlwiLCBcIlwiLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG4gICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKGZpZWxkSWRWYWx1ZVJvdyk7XHJcblxyXG4gICAgICAgIHZhciBpbnB1dEZvcm1hdFJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVNlbGVjdE5vZGUoaWRWYWx1ZSwgXCJpbnB1dEZvcm1hdFwiLCBVdGlscy5kYXRlRm9ybWF0Q29tYm9Cb3gsIFwiVGVtcGxhdGUuZGF0ZUZvcm1hdFRleHRcIiwgZmFsc2UpO1xyXG4gICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKGlucHV0Rm9ybWF0Um93KTtcclxuXHJcbiAgICAgICAgbGV0IGlucHV0Rm9ybWF0U2VsZWN0ID0gaW5wdXRGb3JtYXRSb3cucXVlcnlTZWxlY3RvcihcInNlbGVjdFwiKTtcclxuICAgICAgICAkKGlucHV0Rm9ybWF0U2VsZWN0KS5zZWxlY3QyKHtcclxuICAgICAgICAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxyXG4gICAgICAgICAgICB3aWR0aDogXCIxMDAlXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGlucHV0Rm9ybWF0U2VsZWN0KS52YWwoaW5wdXRGb3JtYXRWYWx1ZSkudHJpZ2dlcihcImNoYW5nZVwiKTtcclxuICAgICAgICAkKGlucHV0Rm9ybWF0U2VsZWN0KS5vbihcImNoYW5nZVwiLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG5cclxuICAgICAgICB2YXIgdXNlQ3VycmVudFJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZUNoZWNrQm94Tm9kZShpZFZhbHVlLCBcInVzZUN1cnJlbnREYXRlXCIsIFwiVGVtcGxhdGUudXNlQ3VycmVudERhdGVUZXh0XCIsIHVzZUN1cnJlbnREYXRlVmFsdWUsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQodXNlQ3VycmVudFJvdyk7XHJcblxyXG4gICAgICAgIHBhbmVsLnNldEF0dHJpYnV0ZShcIkZpZWxkLWlkLWxpc3RcIiwgaWRWYWx1ZSk7XHJcbiAgICAgICAgbm9kZS5jbGFzc05hbWUgPSBcIkVkaXRvci1BdHRyaWJ1dGVcIjtcclxuICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoXCJUZXh0LUZpZWxkXCIpO1xyXG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQocGFuZWwpO1xyXG4gICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gc2hvd0ZpZWxkc0F0dHJpYnV0ZVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkRhdGVGaWVsZCNzaG93RmllbGRzQXR0cmlidXRlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgIO2VhOuTnOydmCDsho3shLEg7Yyd7JeF7LC97J2EIOyEpOygle2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0hUTUx9IG93bmVyTm9kZSAg7IaN7ISxIO2MneyXhSBOb2RlXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBmaWVsZExpc3QgICAgIO2VhOuTnOuTpOydmCDrpqzsiqTtirhcclxuICAgICAqIEBwYXJhbSB7SFRNTH0gYXR0ck5vZGUgICAg7IaN7ISxIO2MneyXheydmCBOb2RlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWFpbkdyb3VwICAgIFNWR+ydmCDrqZTsnbggRWxlbWVudFxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gdXNlckxpc3QgICDshJzrqoXsnpAg66as7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBkdk9wdGlvbkxpc3QgICDquLDrs7jqsJIg7ISg7YOdIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtDYWxsYmFja30gY2hhbmdlRXZlbnRGdW5jICAgIOyGjeyEseqwkuydtCDrs4DtlaDrlYwg7Zi47Lac65CY64qUIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBzaG93RmllbGRzQXR0cmlidXRlKG93bmVyTm9kZSwgZmllbGRMaXN0LCBhdHRyTm9kZSwgbWFpbkdyb3VwLCB1c2VyTGlzdCwgZHZPcHRpb25MaXN0LCBjaGFuZ2VFdmVudEZ1bmMpIHtcclxuICAgICAgICBsZXQgbm9kZSA9IGF0dHJOb2RlO1xyXG4gICAgICAgIGlmIChhdHRyTm9kZSA9PT0gbnVsbCB8fCBVdGlscy5pc0VtcHR5T2JqZWN0KGF0dHJOb2RlKSkge1xyXG4gICAgICAgICAgICBjb25zdCBiYm94ID0gVXRpbHMubWVyZ2VGaWVsZHNCQm94KGZpZWxkTGlzdCk7XHJcbiAgICAgICAgICAgIG5vZGUgPSBVdGlscy5jcmVhdGVBdHRyYnV0ZVBvcHVwKG93bmVyTm9kZSwgYmJveCk7XHJcbiAgICAgICAgICAgIFV0aWxzLnJlcG9zaXRpb25GaWVsZERlbGV0ZUJ0bihvd25lck5vZGUsIGJib3gueCwgYmJveC55LCBiYm94LndpZHRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgVXRpbHMucmVtb3ZlQWxsQ2hpbGROb2RlKG5vZGUpO1xyXG5cclxuICAgICAgICB2YXIgaWRWYWx1ZUFyciA9IFtdO1xyXG4gICAgICAgIGZpZWxkTGlzdC5mb3JFYWNoKChmaWVsZCkgPT4ge1xyXG4gICAgICAgICAgICBpZFZhbHVlQXJyLnB1c2goZmllbGQuaWQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgaWRWYWx1ZSA9IGlkVmFsdWVBcnIuam9pbigpO1xyXG5cclxuICAgICAgICB2YXIgb3duZXJJZFZhbHVlID0gZmllbGRMaXN0WzBdLm93bmVySWQ7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLm93bmVySWQgIT09IG93bmVySWRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgb3duZXJJZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHJlcXVpcmVkVmFsdWUgPSBmaWVsZExpc3RbMF0ucmVxdWlyZWQ7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLnJlcXVpcmVkICE9PSByZXF1aXJlZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICByZXF1aXJlZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGlkVmFsdWUgPSBpZFZhbHVlQXJyLmpvaW4oKTtcclxuICAgICAgICB2YXIgZmllbGRJZFZhbHVlID0gZmllbGRMaXN0WzBdLmZpZWxkSWQ7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmZpZWxkSWQgIT09IGZpZWxkSWRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgZmllbGRJZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGZvbnRGYW1pbHlOYW1lVmFsdWUgPSBmaWVsZExpc3RbMF0uZm9udE5hbWU7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmZvbnROYW1lICE9PSBmb250RmFtaWx5TmFtZVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBmb250RmFtaWx5TmFtZVZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZm9udFNpemVWYWx1ZSA9IGZpZWxkTGlzdFswXS5mb250U2l6ZTtcclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0uZm9udFNpemUgIT09IGZvbnRTaXplVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplVmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgdGV4dEFsaWduVmFsdWUgPSBmaWVsZExpc3RbMF0udGV4dEFsaWduO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS50ZXh0QWxpZ24gIT09IHRleHRBbGlnblZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QWxpZ25WYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBib2xkVmFsdWUgPSBmaWVsZExpc3RbMF0uaXNCb2xkO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5pc0JvbGQgIT09IGJvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgYm9sZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZm9udENvbG9yVmFsdWUgPSBmaWVsZExpc3RbMF0uZm9udENvbG9yO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5mb250Q29sb3IgIT09IGZvbnRDb2xvclZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBmb250Q29sb3JWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGlucHV0Rm9ybWF0VmFsdWUgPSBmaWVsZExpc3RbMF0uaW5wdXRGb3JtYXQ7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmlucHV0Rm9ybWF0ICE9PSBpbnB1dEZvcm1hdFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dEZvcm1hdFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHVzZUN1cnJlbnREYXRlVmFsdWUgPSBmaWVsZExpc3RbMF0udXNlQ3VycmVudERhdGU7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLnVzZUN1cnJlbnREYXRlICE9PSB1c2VDdXJyZW50RGF0ZVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB1c2VDdXJyZW50RGF0ZVZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGZpZWxkSWRWYWx1ZSA9IGZpZWxkTGlzdFswXS5maWVsZElkO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5maWVsZElkICE9PSBmaWVsZElkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGZpZWxkSWRWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIERhdGVGaWVsZC5zaG93RmllbGRBdHRyaWJ1dGUobm9kZSxcclxuICAgICAgICAgICAgaWRWYWx1ZSwgZmllbGRJZFZhbHVlLCByZXF1aXJlZFZhbHVlLCBvd25lcklkVmFsdWUsIGlucHV0Rm9ybWF0VmFsdWUsIHVzZUN1cnJlbnREYXRlVmFsdWUsXHJcbiAgICAgICAgICAgIGZvbnRGYW1pbHlOYW1lVmFsdWUsIGZvbnRTaXplVmFsdWUsIHRleHRBbGlnblZhbHVlLCBib2xkVmFsdWUsIGZvbnRDb2xvclZhbHVlLFxyXG4gICAgICAgICAgICB1c2VyTGlzdCxcclxuICAgICAgICAgICAgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgIH1cclxufVxyXG4iLCJcclxuLyoqXHJcbiAqIEBtb2R1bGUgVGVtcGxhdGUvRmllbGRcclxuKi9cclxuXHJcbmltcG9ydCB7IEJhc2VGaWVsZCB9IGZyb20gJy4vQmFzZUZpZWxkJztcclxuaW1wb3J0IHtVdGlsc30gZnJvbSAnLi8uLi91dGlscy91dGlscy5qcyc7XHJcbmltcG9ydCB7Q09OU1RBTlRTfSBmcm9tICcuLy4uL0NvbnN0YW50cy5qcyc7XHJcblxyXG4vKipcclxuICogQGRlc2NyaXB0aW9uIOydtOuvuOyngCDtlYTrk5wgQ2xhc3NcclxuICpcclxuICpcclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZmllbGROYW1lIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuSW1hZ2VGaWVsZCNmaWVsZE5hbWV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHdpZHRoVmFsdWUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5JbWFnZUZpZWxkI3dpZHRoVmFsdWV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGhlaWdodFZhbHVlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuSW1hZ2VGaWVsZCNoZWlnaHRWYWx1ZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gbWFrZVNWR1RleHQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5JbWFnZUZpZWxkI21ha2VTVkdUZXh0fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBnZXRTVkdGaWVsZE9iamVjdCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkltYWdlRmllbGQjZ2V0U1ZHRmllbGRPYmplY3R9XHJcbiAqXHJcbiAqIEBhdWdtZW50cyBCYXNlRmllbGQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5CYXNlRmllbGQjQmFzZUZpZWxkfVxyXG4gKiBARmlsZU5hbWUgSW1hZ2VGaWVsZC5qc1xyXG4gKiBAc2luY2UgMjAyMS4wNS4zMVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEltYWdlRmllbGQgZXh0ZW5kcyBCYXNlRmllbGQge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAqIEBwYXJhbSBpZCDtlYTrk5zsnZggSURcclxuICAgICAqIEBwYXJhbSBwYWdlTm8g7ZWE65Oc6rCAIOyGje2VnCDtjpjsnbTsp4Ag67KI7Zi4XHJcbiAgICAgKiBAcGFyYW0geCDtlYTrk5zsnZggc3Zn7IOB7J2YIHjsooztkZxcclxuICAgICAqIEBwYXJhbSB5IO2VhOuTnOydmCBzdmfsg4HsnZggeeyijO2RnFxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoaWQsIHBhZ2VObywgeCwgeSkge1xyXG4gICAgICAgIHN1cGVyKGlkLCBwYWdlTm8sIHgsIHksIEltYWdlRmllbGQud2lkdGhWYWx1ZSgpLCBJbWFnZUZpZWxkLmhlaWdodFZhbHVlKCkpO1xyXG4gICAgICAgIHRoaXMubV90eXBlID0gSW1hZ2VGaWVsZC5maWVsZE5hbWUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5tX2tpbmQgPSBVdGlscy50cmFuc2xhdGVGb3JLZXkoXCJUZW1wbGF0ZS5pbWFnZUZpZWxkVG9vbFwiKTtcclxuXHJcbiAgICAgICAgaWYgKFV0aWxzLmlzU3RyaW5nRW1wdHkoaWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tX2ZpZWxkSWQgPSB0aGlzLm1faWQucmVwbGFjZSh0aGlzLm1fdHlwZSwgdGhpcy5tX2tpbmQgKyBcIi1cIik7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIGZpZWxkTmFtZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkltYWdlRmllbGQjZmllbGROYW1lXHJcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE65OcIO2DgOyeheydmCDsnbTrpoRcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBmaWVsZE5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiSW1hZ2VGaWVsZFwiO1xyXG4gICAgfVxyXG5cclxuICAgIFxyXG4gICAgYW5jZXN0b3JzKCkge1xyXG4gICAgICAgIHJldHVybiBbXCJJTUdGXCIsIFwiQkZcIl07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gd2lkdGhWYWx1ZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkltYWdlRmllbGQjd2lkdGhWYWx1ZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOuTnOydmCDstIjquLAg6rCA66GcIOq4uOydtFxyXG4gICAgICogQHJldHVybiB7TnVtYmVyfVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHdpZHRoVmFsdWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIDE1MDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gaGVpZ2h0VmFsdWVcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5JbWFnZUZpZWxkI2hlaWdodFZhbHVlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgIO2VhOuTnOydmCDstIjquLAg7IS466GcIOq4uOydtFxyXG4gICAgICogQHJldHVybiB7TnVtYmVyfVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGhlaWdodFZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybiA2MDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiBnZXRTVkdGaWVsZE9iamVjdFxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkltYWdlRmllbGQjbWFrZVNWR1RleHRcclxuICAgICAqIEBtZW1iZXJPZiBtb2R1bGU6VGVtcGxhdGUvRmllbGQuSW1hZ2VGaWVsZFxyXG4gICAgICogQGRlc2NyaXB0aW9uIO2VhOuTnOydmCDsooXrpZjrpbwg7ZGc7ZiE7ZWY64qUIFNWRyBUZXh0IGVsZW1lbnRcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gc2NhbGUg7ZiE7J6sIFBERuydmCBTY2FsZVxyXG4gICAgICogQHJldHVybiBTVkcgTm9kZSBFbGVtZW50XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIG1ha2VTVkdUZXh0KHNjYWxlKSB7XHJcbiAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5tX2ZpZWxkSWQ7XHJcbiAgICAgICAgdmFyIHRleHRGb250Q29sb3IgPSBcImZpbGw9J1wiICsgdGhpcy5mb250Q29sb3IgKyBcIicgXCI7XHJcblxyXG4gICAgICAgIGxldCB0ZXh0UG9zID0gJyB4PVwiNTAlXCIgIGR5PVwiMC4zNWVtXCIgdGV4dC1hbmNob3I9XCJtaWRkbGVcIiAnXHJcbiAgICAgICAgaWYgKHRoaXMudGV4dEFsaWduID09PSBcImxlZnRcIikge1xyXG4gICAgICAgICAgICB0ZXh0UG9zID0gJyB4PVwiMyVcIiAgZHk9XCIwLjM1ZW1cIiB0ZXh0LWFuY2hvcj1cInN0YXJ0XCIgJztcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGV4dEFsaWduID09PSBcInJpZ2h0XCIpIHtcclxuICAgICAgICAgICAgdGV4dFBvcyA9ICcgeD1cIjk3JVwiIGR5PVwiMC4zNWVtXCIgdGV4dC1hbmNob3I9XCJlbmRcIiAnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHRleHRWZXJ0aWNhbFBvcyA9ICd5PVwiNTAlXCInO1xyXG5cclxuICAgICAgICBsZXQgZm9udEluZm8gPSAnIGZvbnQtc2l6ZT1cIicgKyB0aGlzLmZvbnRTaXplICsgJ3B4XCIgJztcclxuICAgICAgICBsZXQgdGV4dE9iaiA9ICc8dGV4dCcgKyB0ZXh0UG9zICsgdGV4dFZlcnRpY2FsUG9zICsgZm9udEluZm8gKyB0ZXh0Rm9udENvbG9yICsgJz4nICsgdmFsdWUgKyAnPC90ZXh0Pic7XHJcbiAgICAgICAgY29uc3QgZm9iamVjdFNWRyA9ICc8c3ZnIHg9XCInICsgdGhpcy54ICsgJ3B4XCIgeT1cIicgKyB0aGlzLnkgKyAncHhcIiB3aWR0aD1cIicgKyB0aGlzLndpZHRoICogc2NhbGUgK1xyXG4gICAgICAgICAgICAncHhcIiBoZWlnaHQ9XCInICsgdGhpcy5oZWlnaHQgKiBzY2FsZSArICdweFwiPjxnICA+JyArIHRleHRPYmogKyAnPC9nPjwvc3ZnPic7XHJcblxyXG4gICAgICAgIHJldHVybiBmb2JqZWN0U1ZHO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIGdldFNWR0ZpZWxkT2JqZWN0XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuSW1hZ2VGaWVsZCNnZXRTVkdGaWVsZE9iamVjdFxyXG4gICAgICogQG1lbWJlck9mIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5JbWFnZUZpZWxkXHJcbiAgICAgKiBAZGVzY3JpcHRpb24g7ZWE65Oc7J2YIOygleuztOulvCDqsIDsp4Dqs6AgU1ZHIEVsZW1lbnTrpbwg7IOd7ISx7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjYW52YXMgU25hcCBTVkfsnZggQ2FudmFzIE9iamVjdFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG1haW5Hcm91cCAgIFNWR+ydmCDrqZTsnbggTm9kZVxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHNjYWxlICDtmITsnqwgUERG7J2YIFNjYWxlXHJcbiAgICAgKiBAcGFyYW0ge0hUTUx9IG93bmVyTm9kZSAgICDtlbTri7kg7ZSE66Gc7KCd7Yq47J2YIOy1nOyDgeuLqCBFbGVtZW5066W8IOqwkOyLuOqzoCDsnojripQgRWxlbWVudFxyXG4gICAgICogQHBhcmFtIHtDYWxsYmFja30gcmVtb3ZlRHJhZ092ZXJHcm91cEZ1bmMgICAgIOuTnOuemOq3uCDrkJjslrQg7ISg7YOd65CY7Ja07KeEIEZpZWxkIEdyb3Vw7J2EIOygnOqxsO2VmOuKlCBjYWxsYmFjayBmdW5jdGlvblxyXG4gICAgICogQHBhcmFtIHtDYWxsYmFja30gY2hhbmdlVmFsdWVFdmVudEZ1bmMgICAg7IaN7ISx6rCS7J20IOuzgO2VoOuVjCDtmLjstpzrkJjripQgY2FsbGJhY2sgZnVuY3Rpb25cclxuICAgICAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNoYW5nZUZyZWVUcmFuc2Zvcm1GdW5jICAgICBGcmVlVHJhbnNmb3Jt7J2EIOuLpOyLnCDsg53shLHtlZjquLAg7JyE7ZWcIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICAgKiBAcmV0dXJuIFNWRyBOb2RlIEVsZW1lbnRcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgZ2V0U1ZHRmllbGRPYmplY3QoY2FudmFzLCBtYWluR3JvdXAsIHNjYWxlLCBvd25lck5vZGUsIHJlbW92ZURyYWdPdmVyR3JvdXBGdW5jLCBjaGFuZ2VWYWx1ZUV2ZW50RnVuYywgY2hhbmdlRnJlZVRyYW5zZm9ybUZ1bmMpIHtcclxuICAgICAgICBsZXQgZ3JvdXAgPSBtYWluR3JvdXAuZ3JvdXAoKTtcclxuICAgICAgICBncm91cC5hdHRyKHtcclxuICAgICAgICAgICAgaWQ6IHRoaXMuaWQgKyBcIkdyb3VwXCIsXHJcbiAgICAgICAgICAgIGN1cnNvcjogXCJtb3ZlXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICBsZXQgcmVjdCA9IGNhbnZhcy5yZWN0KHRoaXMueCwgdGhpcy55LCB0aGlzLndpZHRoICogc2NhbGUsIHRoaXMuaGVpZ2h0ICogc2NhbGUpO1xyXG4gICAgICAgIHJlY3QuYXR0cih7XHJcbiAgICAgICAgICAgIGlkOiB0aGlzLmlkLFxyXG4gICAgICAgICAgICBcImZpbGwtb3BhY2l0eVwiOiBcIjAuNlwiLFxyXG4gICAgICAgICAgICBcImZpbGxcIjogXCIjZmZhYzdmXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICBncm91cC5hcHBlbmQocmVjdCk7XHJcbiAgICAgICAgY29uc3QgcCA9IFNuYXAucGFyc2UodGhpcy5tYWtlU1ZHVGV4dChzY2FsZSkpO1xyXG4gICAgICAgIGdyb3VwLmFwcGVuZChwKTtcclxuXHJcbiAgICAgICAgZ3JvdXAuaG92ZXIoXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLy8gZl9pblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7IC8vIGZfb3V0XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBsZXQgX2ltZ0ZpZWxkID0gdGhpcztcclxuICAgICAgICBsZXQgbW91c2VQb3MgPSB7IHg6IDAsIHk6IDAgfTtcclxuICAgICAgICBncm91cC5tb3VzZWRvd24oZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICAgICAgICBtb3VzZVBvcy54ID0gZXZ0LnBhZ2VYO1xyXG4gICAgICAgICAgICBtb3VzZVBvcy55ID0gZXZ0LnBhZ2VZO1xyXG4gICAgICAgICAgICBjb25zdCBpdGVtcyA9IG1haW5Hcm91cC5zZWxlY3RBbGwoJ2cnKTtcclxuICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgIT09IGdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFVdGlscy5pc0VtcHR5T2JqZWN0KGVsZW1lbnQuZnJlZVRyYW5zZm9ybSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5mcmVlVHJhbnNmb3JtLmhpZGVSZXNpemVIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKCFVdGlscy5pc0VtcHR5T2JqZWN0KGdyb3VwLmZyZWVUcmFuc2Zvcm0pKSB7XHJcbiAgICAgICAgICAgICAgICBncm91cC5mcmVlVHJhbnNmb3JtLnNob3dSZXNpemVIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VGcmVlVHJhbnNmb3JtRnVuYyhncm91cCwgcmVjdC5hdHRyKFwid2lkdGhcIiksIHJlY3QuYXR0cihcImhlaWdodFwiKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZ3JvdXAubW91c2V1cChmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgIGlmIChncm91cC5wYXJlbnQoKS5hdHRyKFwiaWRcIikgPT09IENPTlNUQU5UUy5EUkFHX0JPWF9OQU1FKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMobW91c2VQb3MueCAtIGV2dC5wYWdlWCkgPiBDT05TVEFOVFMuTUlOSU1VTV9EUkFHX1NJWkVcclxuICAgICAgICAgICAgICAgICAgICB8fCBNYXRoLmFicyhtb3VzZVBvcy55IC0gZXZ0LnBhZ2VZKSA+IENPTlNUQU5UUy5NSU5JTVVNX0RSQUdfU0laRSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlbW92ZURyYWdPdmVyR3JvdXBGdW5jLmNhbGwoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gbWFpbkdyb3VwLnNlbGVjdEFsbCgnZycpO1xyXG4gICAgICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50ICE9PSBncm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIVV0aWxzLmlzRW1wdHlPYmplY3QoZWxlbWVudC5mcmVlVHJhbnNmb3JtKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5mcmVlVHJhbnNmb3JtLmhpZGVSZXNpemVIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmICghVXRpbHMuaXNFbXB0eU9iamVjdChncm91cC5mcmVlVHJhbnNmb3JtKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwLmZyZWVUcmFuc2Zvcm0uc2hvd1Jlc2l6ZUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlRnJlZVRyYW5zZm9ybUZ1bmMoZ3JvdXAsIHJlY3QuYXR0cihcIndpZHRoXCIpLCByZWN0LmF0dHIoXCJoZWlnaHRcIikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgX2ltZ0ZpZWxkLmNvbnN0cnVjdG9yLnNob3dGaWVsZHNBdHRyaWJ1dGUob3duZXJOb2RlLCBbX2ltZ0ZpZWxkXSwgdW5kZWZpbmVkLCBtYWluR3JvdXAsIFV0aWxzLmdldFVzZXJJbmZvT3B0c0xpc3QoKSwgVXRpbHMuZ2V0RFZGaWVsZE9wdHNMaXN0KCksIGNoYW5nZVZhbHVlRXZlbnRGdW5jKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF9pbWdGaWVsZC5jb25zdHJ1Y3Rvci5zaG93RmllbGRzQXR0cmlidXRlKG93bmVyTm9kZSwgW19pbWdGaWVsZF0sIHVuZGVmaW5lZCwgbWFpbkdyb3VwLCBVdGlscy5nZXRVc2VySW5mb09wdHNMaXN0KCksIFV0aWxzLmdldERWRmllbGRPcHRzTGlzdCgpLCBjaGFuZ2VWYWx1ZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZ3JvdXA7XHJcblxyXG4gICAgfVxyXG59XHJcbiIsIlxyXG4vKipcclxuICogQG1vZHVsZSBUZW1wbGF0ZS9GaWVsZFxyXG4qL1xyXG5cclxuaW1wb3J0IHtUZXh0QmFzZUZpZWxkfSBmcm9tICcuL1RleHRCYXNlRmllbGQnO1xyXG5pbXBvcnQge1V0aWxzfSBmcm9tICcuLy4uL3V0aWxzL3V0aWxzLmpzJztcclxuaW1wb3J0IHtDT05TVEFOVFN9IGZyb20gJy4vLi4vQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IENQIGZyb20gJy4vLi4vdXRpbHMvY29sb3ItcGlja2VyJztcclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24g66CI7J2067iUIO2VhOuTnCBDbGFzc1xyXG4gKlxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBmaWVsZE5hbWUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5MYWJlbEZpZWxkI2ZpZWxkTmFtZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gc2hvd0ZpZWxkQXR0cmlidXRlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuTGFiZWxGaWVsZCNzaG93RmllbGRBdHRyaWJ1dGV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNob3dGaWVsZHNBdHRyaWJ1dGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5MYWJlbEZpZWxkI3Nob3dGaWVsZHNBdHRyaWJ1dGV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IG1ha2VTVkdUZXh0IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuTGFiZWxGaWVsZCNtYWtlU1ZHVGV4dH1cclxuICpcclxuICogQGF1Z21lbnRzIFRleHRCYXNlRmllbGQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5UZXh0QmFzZUZpZWxkI1RleHRCYXNlRmllbGR9XHJcbiAqIEBGaWxlTmFtZSBMYWJlbEZpZWxkLmpzXHJcbiAqIEBzaW5jZSAyMDIxLjA1LjMxXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTGFiZWxGaWVsZCBleHRlbmRzIFRleHRCYXNlRmllbGQge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAqIEBwYXJhbSBpZCDtlYTrk5zsnZggSURcclxuICAgICAqIEBwYXJhbSBwYWdlTm8g7ZWE65Oc6rCAIOyGje2VnCDtjpjsnbTsp4Ag67KI7Zi4XHJcbiAgICAgKiBAcGFyYW0geCDtlYTrk5zsnZggc3Zn7IOB7J2YIHjsooztkZxcclxuICAgICAqIEBwYXJhbSB5IO2VhOuTnOydmCBzdmfsg4HsnZggeeyijO2RnFxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoaWQsIHBhZ2VObywgeCwgeSkge1xyXG4gICAgICAgIHN1cGVyKGlkLCBwYWdlTm8sIHgsIHksIExhYmVsRmllbGQud2lkdGhWYWx1ZSgpLCBMYWJlbEZpZWxkLmhlaWdodFZhbHVlKCkpO1xyXG4gICAgICAgIHRoaXMubV90eXBlID0gTGFiZWxGaWVsZC5maWVsZE5hbWUoKTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMubV9tYXhWYWx1ZUxlbmd0aCA9IDEwMDtcclxuXHJcbiAgICAgICAgdGhpcy5tX2tpbmQgPSBVdGlscy50cmFuc2xhdGVGb3JLZXkoXCJUZW1wbGF0ZS5sYWJlbEZpZWxkVG9vbFwiKTtcclxuICAgICAgICBpZiAoVXRpbHMuaXNTdHJpbmdFbXB0eShpZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1fZmllbGRJZCA9IHRoaXMubV9pZC5yZXBsYWNlKHRoaXMubV90eXBlLCB0aGlzLm1fa2luZCArIFwiLVwiKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gZmllbGROYW1lXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuTGFiZWxGaWVsZCNmaWVsZE5hbWVcclxuICAgICAqIEByZXR1cm4ge1N0cmluZ31cclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtlYTrk5wg7YOA7J6F7J2YIOydtOumhFxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZpZWxkTmFtZSgpIHtcclxuICAgICAgICByZXR1cm4gXCJMYWJlbEZpZWxkXCI7XHJcbiAgICB9XHJcblxyXG4gICAgYW5jZXN0b3JzKCkge1xyXG4gICAgICAgIHJldHVybiBbXCJMRlwiLCBcIlRCRlwiLCBcIkJGXCJdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIHNob3dGaWVsZEF0dHJpYnV0ZVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkxhYmVsRmllbGQjc2hvd0ZpZWxkQXR0cmlidXRlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE65Oc7J2YIOyGjeyEsSDtjJ3sl4XssL3snYQg7ISk7KCV7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7SFRNTH0gbm9kZSAgIOyGjeyEsSDtjJ3sl4UgTm9kZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGlkVmFsdWUgICAgIO2VhOuTnOydmCBpZOqwklxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHJlcXVpcmVkVmFsdWUgICAgIO2VhOyImOyXrOu2gCDqsJJcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvd25lcklkVmFsdWUgICAgIOyEnOuqheyekCDslYTsnbTrlJRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkdlZhbHVlICAgICDquLDrs7jqsJJcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmb250RmFtaWx5TmFtZVZhbHVlICAgICDtj7Dtirgg7J2066aEXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZm9udFNpemVWYWx1ZSAgICAg7Y+w7Yq4IO2BrOq4sCDqsJJcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0QWxpZ25WYWx1ZSAgICAg7YWN7Iqk7Yq4IOqwgOuhnCDsoJXroKwg6rCSXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gYm9sZFZhbHVlICAgICDtj7Dtirgg67O865OcIOyXrOu2gFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZvbnRDb2xvclZhbHVlICAgICDtj7Dtirgg7Lm86528XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRWYWx1ZSAgICDroIjsnbTruJQg7YWN7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSB1c2VyTGlzdCAgIOyEnOuqheyekCDrpqzsiqTtirhcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGR2T3B0aW9uTGlzdCAgIOq4sOuzuOqwkiDshKDtg50g66as7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge0NhbGxiYWNrfSBjaGFuZ2VFdmVudEZ1bmMgICAg7IaN7ISx6rCS7J20IOuzgO2VoOuVjCDtmLjstpzrkJjripQgY2FsbGJhY2sgZnVuY3Rpb25cclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHNob3dGaWVsZEF0dHJpYnV0ZShub2RlLFxyXG4gICAgICAgIGlkVmFsdWUsIGZpZWxkSWRWYWx1ZSwgcmVxdWlyZWRWYWx1ZSwgb3duZXJJZFZhbHVlLCBkdlZhbHVlLCBmb250RmFtaWx5TmFtZVZhbHVlLCBmb250U2l6ZVZhbHVlLCB0ZXh0QWxpZ25WYWx1ZSwgYm9sZFZhbHVlLCBmb250Q29sb3JWYWx1ZSwgZmllbGRWYWx1ZSxcclxuICAgICAgICB1c2VyTGlzdCwgZHZPcHRpb25MaXN0LFxyXG4gICAgICAgIGNoYW5nZUV2ZW50RnVuYykge1xyXG5cclxuICAgICAgICB2YXIgcGFuZWwgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVQYW5lbE5vZGUoKTtcclxuXHJcbiAgICAgICAgdmFyIHJlcXVpcmVSb3cgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVUb2dnbGVCdXR0b25Ob2RlKGlkVmFsdWUsIFwicmVxdWlyZWRcIiwgXCJUZW1wbGF0ZS5pc1JlcXVpcmVkXCIsIHJlcXVpcmVkVmFsdWUsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQocmVxdWlyZVJvdyk7XHJcblxyXG4gICAgICAgIGxldCB1c2VEZWZhdWxPcHRpb25Ob2RlID0gVXRpbHMuZ2V0VXNlckluZm9PcHRzTGlzdENvdW50KCkgIT09IDE7XHJcbiAgICAgICAgdmFyIG93bmVyU2VsZWN0Um93ID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlU2VsZWN0Tm9kZShpZFZhbHVlLCBcIm93bmVySWRcIiwgdXNlckxpc3QsIFwiXCIsIHVzZURlZmF1bE9wdGlvbk5vZGUpO1xyXG4gICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKG93bmVyU2VsZWN0Um93KTtcclxuXHJcbiAgICAgICAgbGV0IG93bmVyU2VsZWN0ID0gb3duZXJTZWxlY3RSb3cucXVlcnlTZWxlY3RvcihcInNlbGVjdFwiKTtcclxuICAgICAgICBqUXVlcnkob3duZXJTZWxlY3QpLnNlbGVjdDIoe1xyXG4gICAgICAgICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXHJcbiAgICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGpRdWVyeShvd25lclNlbGVjdCkudmFsKG93bmVySWRWYWx1ZSkudHJpZ2dlcihcImNoYW5nZVwiKTtcclxuICAgICAgICBqUXVlcnkob3duZXJTZWxlY3QpLm9uKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcblxyXG4gICAgICAgIC8vMTItMjhcclxuICAgICAgICBpZiAoZHZPcHRpb25MaXN0ICYmIEFycmF5LmlzQXJyYXkoZHZPcHRpb25MaXN0KSAmJiBkdk9wdGlvbkxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB2YXIgZGVmYXVsdFZhbHVlUm93ID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlU2VsZWN0Tm9kZShpZFZhbHVlLCBcImRlZmF1bHRWYWx1ZVwiLCBkdk9wdGlvbkxpc3QsIFwiVGVtcGxhdGUuZGVmYXVsdFZhbHVlVGV4dFwiLCB0cnVlKTtcclxuICAgICAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQoZGVmYXVsdFZhbHVlUm93KTtcclxuXHJcbiAgICAgICAgICAgIGxldCBkZWZhdWx0VmFsdWVTZWxlY3QgPSBkZWZhdWx0VmFsdWVSb3cucXVlcnlTZWxlY3RvcihcInNlbGVjdFwiKTtcclxuICAgICAgICAgICAgJChkZWZhdWx0VmFsdWVTZWxlY3QpLnNlbGVjdDIoe1xyXG4gICAgICAgICAgICAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkKGRlZmF1bHRWYWx1ZVNlbGVjdCkudmFsKGR2VmFsdWUpLnRyaWdnZXIoXCJjaGFuZ2VcIik7XHJcbiAgICAgICAgICAgICQoZGVmYXVsdFZhbHVlU2VsZWN0KS5vbihcImNoYW5nZVwiLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGZpZWxkSWRWYWx1ZVJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZUlucHV0Tm9kZShpZFZhbHVlLCBcImZpZWxkSWRcIiwgXCJUZW1wbGF0ZS5maWVsZElkVGV4dFwiLCBmaWVsZElkVmFsdWUsIFwiXCIsIFwiXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQoZmllbGRJZFZhbHVlUm93KTtcclxuXHJcbiAgICAgICAgdmFyIGZpZWxkVmFsdWVSb3cgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVJbnB1dE5vZGUoaWRWYWx1ZSwgXCJ2YWx1ZVwiLCBcIlRlbXBsYXRlLmxhYmVsVmFsdWVUZXh0XCIsIGZpZWxkVmFsdWUsIFwiXCIsIFwiXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQoZmllbGRWYWx1ZVJvdyk7XHJcblxyXG4gICAgICAgIHZhciBmb250QXR0clJvdyA9IFV0aWxzLmNyZWF0ZVRleHRBdHRyYnV0ZU5vZGUoaWRWYWx1ZSwgZm9udENvbG9yVmFsdWUsIHRleHRBbGlnblZhbHVlLCBib2xkVmFsdWUsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQoZm9udEF0dHJSb3cucm93KTtcclxuXHJcbiAgICAgICAgbGV0IGZvbnRGYW1pbHlDb21ib1NlbGVjdCA9IGZvbnRBdHRyUm93LmZvbnRGYW1pbHlDb21iby5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xyXG4gICAgICAgICQoZm9udEZhbWlseUNvbWJvU2VsZWN0KS5zZWxlY3QyKHtcclxuICAgICAgICAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxyXG4gICAgICAgICAgICB3aWR0aDogXCIxMDAlXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGZvbnRGYW1pbHlDb21ib1NlbGVjdCkudmFsKGZvbnRGYW1pbHlOYW1lVmFsdWUpLnRyaWdnZXIoXCJjaGFuZ2VcIik7XHJcbiAgICAgICAgJChmb250RmFtaWx5Q29tYm9TZWxlY3QpLm9uKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgbGV0IGZvbnRTaXplQ29tYm9TZWxlY3QgPSBmb250QXR0clJvdy5mb250U2l6ZUNvbWJvLnF1ZXJ5U2VsZWN0b3IoXCJzZWxlY3RcIik7XHJcbiAgICAgICAgJChmb250U2l6ZUNvbWJvU2VsZWN0KS5zZWxlY3QyKHtcclxuICAgICAgICAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxyXG4gICAgICAgICAgICB3aWR0aDogXCIxMDAlXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGZvbnRTaXplQ29tYm9TZWxlY3QpLnZhbChmb250U2l6ZVZhbHVlKS50cmlnZ2VyKFwiY2hhbmdlXCIpO1xyXG4gICAgICAgICQoZm9udFNpemVDb21ib1NlbGVjdCkub24oXCJjaGFuZ2VcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuXHJcbiAgICAgICAgbGV0IGNvbG9ySW5wdXQgPSBmb250QXR0clJvdy5jb2xvckJ0bi5xdWVyeVNlbGVjdG9yKFwiYnV0dG9uXCIpO1xyXG4gICAgICAgIGNvbG9ySW5wdXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gZm9udENvbG9yVmFsdWU7XHJcbiAgICAgICAgbGV0IHBpY2tlciA9IG5ldyBDUChjb2xvcklucHV0LCB7IGNvbG9yOiBmb250Q29sb3JWYWx1ZSB9KTtcclxuICAgICAgICBjb2xvcklucHV0LnZhbHVlID0gZm9udENvbG9yVmFsdWU7XHJcbiAgICAgICAgcGlja2VyLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAociwgZywgYiwgYSkge1xyXG4gICAgICAgICAgICBpZiAoIXBpY2tlci52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29sb3JJbnB1dC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBDUC5IRVgoW3IsIGcsIGIsIGFdKTtcclxuICAgICAgICAgICAgY29sb3JJbnB1dC52YWx1ZSA9IENQLkhFWChbciwgZywgYiwgYV0pO1xyXG5cclxuICAgICAgICAgICAgbGV0IGNvbG9yVGV4dElucHV0ID0gZm9udEF0dHJSb3cuY29sb3JCdG4ucXVlcnlTZWxlY3RvcihcImlucHV0W3R5cGU9J3RleHQnXVwiKTtcclxuICAgICAgICAgICAgY29sb3JUZXh0SW5wdXQudmFsdWUgPSAoQ1AuSEVYKFtyLCBnLCBiLCBhXSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBpY2tlci5vbignZXhpdCcsIGZ1bmN0aW9uIChyLCBnLCBiLCBhKSB7XHJcbiAgICAgICAgICAgIGNvbG9ySW5wdXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gQ1AuSEVYKFtyLCBnLCBiLCBhXSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgY29sb3JUZXh0SW5wdXQgPSBmb250QXR0clJvdy5jb2xvckJ0bi5xdWVyeVNlbGVjdG9yKFwiaW5wdXRbdHlwZT0ndGV4dCddXCIpO1xyXG4gICAgICAgICAgICBjb2xvclRleHRJbnB1dC52YWx1ZSA9IChDUC5IRVgoW3IsIGcsIGIsIGFdKSk7XHJcbiAgICAgICAgICAgIGNvbG9yVGV4dElucHV0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiY2hhbmdlXCIpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcGFuZWwuc2V0QXR0cmlidXRlKFwiRmllbGQtaWQtbGlzdFwiLCBpZFZhbHVlKTtcclxuXHJcbiAgICAgICAgbm9kZS5jbGFzc05hbWUgPSBcIkVkaXRvci1BdHRyaWJ1dGVcIjtcclxuICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoXCJUZXh0LUZpZWxkXCIpO1xyXG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQocGFuZWwpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiBzaG93RmllbGRzQXR0cmlidXRlXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuTGFiZWxGaWVsZCNzaG93RmllbGRzQXR0cmlidXRlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24g7ZWE65Oc7J2YIOyGjeyEsSDtjJ3sl4XssL3snYQg7ISk7KCV7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7SFRNTH0gb3duZXJOb2RlICDsho3shLEg7Yyd7JeFIE5vZGVcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGZpZWxkTGlzdCAgICAg7ZWE65Oc65Ok7J2YIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtIVE1MfSBhdHRyTm9kZSAgICDsho3shLEg7Yyd7JeF7J2YIE5vZGVcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtYWluR3JvdXAgICAgU1ZH7J2YIOuplOyduCBFbGVtZW50XHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSB1c2VyTGlzdCAgIOyEnOuqheyekCDrpqzsiqTtirhcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGR2T3B0aW9uTGlzdCAgIOq4sOuzuOqwkiDshKDtg50g66as7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge0NhbGxiYWNrfSBjaGFuZ2VFdmVudEZ1bmMgICAg7IaN7ISx6rCS7J20IOuzgO2VoOuVjCDtmLjstpzrkJjripQgY2FsbGJhY2sgZnVuY3Rpb25cclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHNob3dGaWVsZHNBdHRyaWJ1dGUob3duZXJOb2RlLCBmaWVsZExpc3QsIGF0dHJOb2RlLCBtYWluR3JvdXAsIHVzZXJMaXN0LCBkdk9wdGlvbkxpc3QsIGNoYW5nZUV2ZW50RnVuYykge1xyXG4gICAgICAgIGxldCBub2RlID0gYXR0ck5vZGU7XHJcbiAgICAgICAgaWYgKGF0dHJOb2RlID09PSBudWxsIHx8IFV0aWxzLmlzRW1wdHlPYmplY3QoYXR0ck5vZGUpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJib3ggPSBVdGlscy5tZXJnZUZpZWxkc0JCb3goZmllbGRMaXN0KTtcclxuICAgICAgICAgICAgbm9kZSA9IFV0aWxzLmNyZWF0ZUF0dHJidXRlUG9wdXAob3duZXJOb2RlLCBiYm94KTtcclxuICAgICAgICAgICAgVXRpbHMucmVwb3NpdGlvbkZpZWxkRGVsZXRlQnRuKG93bmVyTm9kZSwgYmJveC54LCBiYm94LnksIGJib3gud2lkdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBVdGlscy5yZW1vdmVBbGxDaGlsZE5vZGUobm9kZSk7XHJcblxyXG4gICAgICAgIHZhciBpZFZhbHVlQXJyID0gW107XHJcbiAgICAgICAgZmllbGRMaXN0LmZvckVhY2goKGZpZWxkKSA9PiB7XHJcbiAgICAgICAgICAgIGlkVmFsdWVBcnIucHVzaChmaWVsZC5pZCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciBpZFZhbHVlID0gaWRWYWx1ZUFyci5qb2luKCk7XHJcblxyXG4gICAgICAgIHZhciBvd25lcklkVmFsdWUgPSBmaWVsZExpc3RbMF0ub3duZXJJZDtcclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0ub3duZXJJZCAhPT0gb3duZXJJZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBvd25lcklkVmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgdmFyIGZpZWxkSWRWYWx1ZSA9IGZpZWxkTGlzdFswXS5maWVsZElkO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5maWVsZElkICE9PSBmaWVsZElkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGZpZWxkSWRWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciByZXF1aXJlZFZhbHVlID0gZmllbGRMaXN0WzBdLnJlcXVpcmVkO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5yZXF1aXJlZCAhPT0gcmVxdWlyZWRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgcmVxdWlyZWRWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBkdlZhbHVlID0gZmllbGRMaXN0WzBdLmRlZmF1bHRWYWx1ZTtcclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0uZGVmYXVsdFZhbHVlICE9PSBkdlZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBkdlZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGZvbnRGYW1pbHlOYW1lVmFsdWUgPSBmaWVsZExpc3RbMF0uZm9udE5hbWU7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmZvbnROYW1lICE9PSBmb250RmFtaWx5TmFtZVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBmb250RmFtaWx5TmFtZVZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZm9udFNpemVWYWx1ZSA9IGZpZWxkTGlzdFswXS5mb250U2l6ZTtcclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0uZm9udFNpemUgIT09IGZvbnRTaXplVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplVmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgdGV4dEFsaWduVmFsdWUgPSBmaWVsZExpc3RbMF0udGV4dEFsaWduO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS50ZXh0QWxpZ24gIT09IHRleHRBbGlnblZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QWxpZ25WYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBib2xkVmFsdWUgPSBmaWVsZExpc3RbMF0uaXNCb2xkO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5pc0JvbGQgIT09IGJvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgYm9sZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZm9udENvbG9yVmFsdWUgPSBmaWVsZExpc3RbMF0uZm9udENvbG9yO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5mb250Q29sb3IgIT09IGZvbnRDb2xvclZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBmb250Q29sb3JWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBmaWVsZFZhbHVlID0gZmllbGRMaXN0WzBdLnZhbHVlO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS52YWx1ZSAhPT0gZmllbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgZmllbGRWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIExhYmVsRmllbGQuc2hvd0ZpZWxkQXR0cmlidXRlKG5vZGUsXHJcbiAgICAgICAgICAgIGlkVmFsdWUsIGZpZWxkSWRWYWx1ZSwgcmVxdWlyZWRWYWx1ZSwgb3duZXJJZFZhbHVlLCBkdlZhbHVlLCBmb250RmFtaWx5TmFtZVZhbHVlLCBmb250U2l6ZVZhbHVlLCB0ZXh0QWxpZ25WYWx1ZSwgYm9sZFZhbHVlLCBmb250Q29sb3JWYWx1ZSwgZmllbGRWYWx1ZSxcclxuICAgICAgICAgICAgdXNlckxpc3QsIGR2T3B0aW9uTGlzdCxcclxuICAgICAgICAgICAgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgIH1cclxuXHJcbiAgICB2YWxpZGF0ZVZhbHVlKHByb3BlcnR5TmFtZSwgdmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gZ2V0U1ZHRmllbGRPYmplY3RcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5MYWJlbEZpZWxkI21ha2VTVkdUZXh0XHJcbiAgICAgKiBAbWVtYmVyT2YgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkxhYmVsRmllbGRcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSAg7ZWE65Oc7J2YIOyiheulmOulvCDtkZztmITtlZjripQgU1ZHIFRleHQgZWxlbWVudFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzY2FsZSDtmITsnqwgUERG7J2YIFNjYWxlXHJcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IFNWRyBOb2RlIEVsZW1lbnRcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgbWFrZVNWR1RleHQoc2NhbGUpIHtcclxuICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLnZhbHVlO1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gJycgJiYgdGhpcy5kZWZhdWx0VmFsdWVUZXh0ID09PSAnJykge1xyXG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMubV9maWVsZElkO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICcnICYmIHRoaXMuZGVmYXVsdFZhbHVlVGV4dCAhPT0gJycpIHtcclxuICAgICAgICAgICAgdmFsdWUgPSB0aGlzLmRlZmF1bHRWYWx1ZVRleHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB0ZXh0Rm9udENvbG9yID0gXCJmaWxsPSdcIiArIHRoaXMuZm9udENvbG9yICsgXCInIFwiO1xyXG5cclxuICAgICAgICBsZXQgdGV4dFBvcyA9ICcgeD1cIjUwJVwiICBkeT1cIjAuMzVlbVwiIHRleHQtYW5jaG9yPVwibWlkZGxlXCIgJ1xyXG4gICAgICAgIGlmICh0aGlzLnRleHRBbGlnbiA9PT0gXCJsZWZ0XCIpIHtcclxuICAgICAgICAgICAgdGV4dFBvcyA9ICcgeD1cIjMlXCIgIGR5PVwiMC4zNWVtXCIgdGV4dC1hbmNob3I9XCJzdGFydFwiICc7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRleHRBbGlnbiA9PT0gXCJyaWdodFwiKSB7XHJcbiAgICAgICAgICAgIHRleHRQb3MgPSAnIHg9XCI5NyVcIiBkeT1cIjAuMzVlbVwiIHRleHQtYW5jaG9yPVwiZW5kXCIgJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB0ZXh0VmVydGljYWxQb3MgPSAneT1cIjUwJVwiJztcclxuICAgICAgICBpZiAodGhpcy50ZXh0VmV0aWNhbEFsaWduID09PSBcInRvcFwiKSB7XHJcbiAgICAgICAgICAgIHRleHRWZXJ0aWNhbFBvcyA9ICd5PVwiMjUlXCInO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy50ZXh0VmV0aWNhbEFsaWduID09PSBcImJvdHRvbVwiKSB7XHJcbiAgICAgICAgICAgIHRleHRWZXJ0aWNhbFBvcyA9ICd5PVwiNzAlXCInO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGZvbnRXZWlndGggPSBcIlwiO1xyXG4gICAgICAgIGlmICh0aGlzLmlzQm9sZCA9PT0gXCJ0cnVlXCIpIHtcclxuICAgICAgICAgICAgZm9udFdlaWd0aCA9IFwiIGZvbnQtd2VpZ2h0PSdib2xkJyBcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBmb250Rm1haWx5ID0gXCIgZm9udC1mYW1pbHk9J1wiICsgdGhpcy5mb250TmFtZSArIFwiJyBcIjtcclxuXHJcbiAgICAgICAgbGV0IGZvbnRJbmZvID0gJyBmb250LXNpemU9XCInICsgdGhpcy5mb250U2l6ZSAqIHNjYWxlICsgJ3B4XCIgJztcclxuICAgICAgICBsZXQgdGV4dE9iaiA9ICc8dGV4dCcgKyB0ZXh0UG9zICsgdGV4dFZlcnRpY2FsUG9zICsgZm9udEZtYWlseSArIGZvbnRJbmZvICsgdGV4dEZvbnRDb2xvciArIGZvbnRXZWlndGggKyAnPicgKyB2YWx1ZSArICc8L3RleHQ+JztcclxuICAgICAgICBjb25zdCBmb2JqZWN0U1ZHID0gJzxzdmcgeD1cIicgKyB0aGlzLnggKyAncHhcIiB5PVwiJyArIHRoaXMueSArICdweFwiIHdpZHRoPVwiJyArIHRoaXMud2lkdGggKiBzY2FsZSArXHJcbiAgICAgICAgICAgICdweFwiIGhlaWdodD1cIicgKyB0aGlzLmhlaWdodCAqIHNjYWxlICsgJ3B4XCI+PGcgID4nICsgdGV4dE9iaiArICc8L2c+PC9zdmc+JztcclxuXHJcbiAgICAgICAgcmV0dXJuIGZvYmplY3RTVkc7XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsIlxyXG4vKipcclxuICogQG1vZHVsZSBUZW1wbGF0ZS9GaWVsZFxyXG4qL1xyXG5cclxuXHJcbmltcG9ydCB7VGV4dEJhc2VGaWVsZH0gZnJvbSAnLi9UZXh0QmFzZUZpZWxkJztcclxuaW1wb3J0IHtVdGlsc30gZnJvbSAnLi4vdXRpbHMvdXRpbHMuanMnO1xyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiDrqYDti7Drnbzsnbgg7ZWE65OcIENsYXNzXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGZpZWxkTmFtZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLk11bHRpTGluZVRleHRGaWVsZCNmaWVsZE5hbWV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNob3dGaWVsZEF0dHJpYnV0ZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLk11bHRpTGluZVRleHRGaWVsZCNzaG93RmllbGRBdHRyaWJ1dGV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNob3dGaWVsZHNBdHRyaWJ1dGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5NdWx0aUxpbmVUZXh0RmllbGQjc2hvd0ZpZWxkc0F0dHJpYnV0ZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gbWFrZVNWR1RleHQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5NdWx0aUxpbmVUZXh0RmllbGQjbWFrZVNWR1RleHR9XHJcbiAqXHJcbiAqIEBhdWdtZW50cyBUZXh0QmFzZUZpZWxkIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuVGV4dEJhc2VGaWVsZCNUZXh0QmFzZUZpZWxkfVxyXG4gKiBARmlsZU5hbWUgTXVsdGlMaW5lVGV4dEZpZWxkLmpzXHJcbiAqIEBzaW5jZSAyMDIxLjA1LjMxXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTXVsdGlMaW5lVGV4dEZpZWxkIGV4dGVuZHMgVGV4dEJhc2VGaWVsZCB7XHJcbiAgICAvKipcclxuICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICogQHBhcmFtIGlkIO2VhOuTnOydmCBJRFxyXG4gICAgICogQHBhcmFtIHBhZ2VObyDtlYTrk5zqsIAg7IaN7ZWcIO2OmOydtOyngCDrsojtmLhcclxuICAgICAqIEBwYXJhbSB4IO2VhOuTnOydmCBzdmfsg4HsnZggeOyijO2RnFxyXG4gICAgICogQHBhcmFtIHkg7ZWE65Oc7J2YIHN2Z+yDgeydmCB57KKM7ZGcXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihpZCwgcGFnZU5vLCB4LCB5KSB7XHJcbiAgICAgICAgc3VwZXIoaWQsIHBhZ2VObywgeCwgeSwgTXVsdGlMaW5lVGV4dEZpZWxkLndpZHRoVmFsdWUoKSwgTXVsdGlMaW5lVGV4dEZpZWxkLmhlaWdodFZhbHVlKCkpO1xyXG4gICAgICAgIHRoaXMubV90eXBlID0gTXVsdGlMaW5lVGV4dEZpZWxkLmZpZWxkTmFtZSgpO1xyXG5cclxuICAgICAgICB0aGlzLm1fa2luZCA9IFV0aWxzLnRyYW5zbGF0ZUZvcktleShcIlRlbXBsYXRlLm11bHRpbGluZUZpZWxkVG9vbFwiKTtcclxuICAgICAgICBpZiAoVXRpbHMuaXNTdHJpbmdFbXB0eShpZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1fZmllbGRJZCA9IHRoaXMubV9pZC5yZXBsYWNlKHRoaXMubV90eXBlLCB0aGlzLm1fa2luZCArIFwiLVwiKTtcclxuICAgICAgICB0aGlzLnRleHRWZXRpY2FsQWxpZ24gPSBcInRvcFwiO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIGZpZWxkTmFtZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLk11bHRpTGluZVRleHRGaWVsZCNmaWVsZE5hbWVcclxuICAgICAqIEByZXR1cm4ge1N0cmluZ31cclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtlYTrk5wg7YOA7J6F7J2YIOydtOumhFxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZpZWxkTmFtZSgpIHtcclxuICAgICAgICByZXR1cm4gXCJNdWx0aUxpbmVUZXh0RmllbGRcIjtcclxuICAgIH1cclxuXHJcbiAgICBhbmNlc3RvcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFtcIk1MVEZcIiwgXCJUQkZcIiwgXCJCRlwiXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiB3aWR0aFZhbHVlXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuTXVsdGlMaW5lVGV4dEZpZWxkI3dpZHRoVmFsdWVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtlYTrk5zsnZgg7LSI6riwIOqwgOuhnCDquLjsnbRcclxuICAgICAqIEByZXR1cm4ge051bWJlcn1cclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyB3aWR0aFZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybiAxNTA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gaGVpZ2h0VmFsdWVcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5NdWx0aUxpbmVUZXh0RmllbGQjaGVpZ2h0VmFsdWVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtlYTrk5zsnZgg7LSI6riwIOyEuOuhnCDquLjsnbRcclxuICAgICAqIEByZXR1cm4ge051bWJlcn1cclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBoZWlnaHRWYWx1ZSgpIHtcclxuICAgICAgICByZXR1cm4gNjA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gc2hvd0ZpZWxkc0F0dHJpYnV0ZVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLk11bHRpTGluZVRleHRGaWVsZCNzaG93RmllbGRzQXR0cmlidXRlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgIO2VhOuTnOydmCDsho3shLEg7Yyd7JeF7LC97J2EIOyEpOygle2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0VMRU1FTlR9IG93bmVyTm9kZSAg7IaN7ISxIO2MneyXhSBOb2RlXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBmaWVsZExpc3QgICAgIO2VhOuTnOuTpOydmCDrpqzsiqTtirhcclxuICAgICAqIEBwYXJhbSB7SFRNTH0gYXR0ck5vZGUgICAg7IaN7ISxIO2MneyXheydmCBOb2RlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWFpbkdyb3VwICAgIFNWR+ydmCDrqZTsnbggRWxlbWVudFxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gdXNlckxpc3QgICDshJzrqoXsnpAg66as7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBkdk9wdGlvbkxpc3QgICDquLDrs7jqsJIg7ISg7YOdIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtDYWxsYmFja30gY2hhbmdlRXZlbnRGdW5jICAgIOyGjeyEseqwkuydtCDrs4DtlaDrlYwg7Zi47Lac65CY64qUIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBzaG93RmllbGRzQXR0cmlidXRlKG93bmVyTm9kZSwgZmllbGRMaXN0LCBhdHRyTm9kZSwgbWFpbkdyb3VwLCB1c2VyTGlzdCwgZHZPcHRpb25MaXN0LCBjaGFuZ2VFdmVudEZ1bmMpIHtcclxuICAgICAgICBUZXh0QmFzZUZpZWxkLnNob3dGaWVsZHNBdHRyaWJ1dGUob3duZXJOb2RlLCBmaWVsZExpc3QsIGF0dHJOb2RlLCBtYWluR3JvdXAsIHVzZXJMaXN0LCBkdk9wdGlvbkxpc3QsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFsaWRhdGVWYWx1ZShwcm9wZXJ0eU5hbWUsIHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn1cclxuIiwiXHJcbi8qKlxyXG4gKiBAbW9kdWxlIFRlbXBsYXRlL0ZpZWxkXHJcbiAqL1xyXG5cclxuaW1wb3J0IHtUZXh0QmFzZUZpZWxkfSBmcm9tICcuL1RleHRCYXNlRmllbGQnO1xyXG5pbXBvcnQge1V0aWxzfSBmcm9tICcuLy4uL3V0aWxzL3V0aWxzLmpzJztcclxuaW1wb3J0IENQIGZyb20gJy4vLi4vdXRpbHMvY29sb3ItcGlja2VyJztcclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24g7Iir7J6QIO2VhOuTnCBDbGFzc1xyXG4gKlxyXG4gKiBAcHJvcGVydHkge051bWJlcn0gbV9pbnB1dE1heCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLk51bWJlckZpZWxkI21faW5wdXRNYXh9XHJcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBtX2lucHV0TWluIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuTnVtYmVyRmllbGQjbV9pbnB1dE1pbn1cclxuICogXHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGZpZWxkTmFtZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLk51bWJlckZpZWxkI2ZpZWxkTmFtZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gc2hvd0ZpZWxkc0F0dHJpYnV0ZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLk51bWJlckZpZWxkI3Nob3dGaWVsZHNBdHRyaWJ1dGV9XHJcbiAqIFxyXG4gKiBAYXVnbWVudHMgVGV4dEJhc2VGaWVsZCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRCYXNlRmllbGQjVGV4dEJhc2VGaWVsZH1cclxuICogQEZpbGVOYW1lIE51bWJlckZpZWxkLmpzXHJcbiAqIEBzaW5jZSAyMDIxLjA1LjMxXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTnVtYmVyRmllbGQgZXh0ZW5kcyBUZXh0QmFzZUZpZWxkIHtcclxuICAgIC8qKlxyXG4gICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgKiBAcGFyYW0gaWQg7ZWE65Oc7J2YIElEXHJcbiAgICAgKiBAcGFyYW0gcGFnZU5vIO2VhOuTnOqwgCDsho3tlZwg7Y6Y7J207KeAIOuyiO2YuFxyXG4gICAgICogQHBhcmFtIHgg7ZWE65Oc7J2YIHN2Z+yDgeydmCB47KKM7ZGcXHJcbiAgICAgKiBAcGFyYW0geSDtlYTrk5zsnZggc3Zn7IOB7J2YIHnsooztkZxcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGlkLCBwYWdlTm8sIHgsIHkpIHtcclxuICAgICAgICBzdXBlcihpZCwgcGFnZU5vLCB4LCB5LCBOdW1iZXJGaWVsZC53aWR0aFZhbHVlKCksIE51bWJlckZpZWxkLmhlaWdodFZhbHVlKCkpO1xyXG4gICAgICAgIHRoaXMubV90eXBlID0gTnVtYmVyRmllbGQuZmllbGROYW1lKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5tX2tpbmQgPSBVdGlscy50cmFuc2xhdGVGb3JLZXkoXCJUZW1wbGF0ZS5udW1iZXJGaWVsZFRvb2xcIik7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLk51bWJlckZpZWxkI21faW5wdXRNYXhcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24g7Iir7J6QIO2VhOuTnOydmCDstZzrjIDqsJJcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciBpbnB1dE1heCgpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIGlucHV0TWF4KHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1faW5wdXRNYXggPSBudWxsO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7TnVtYmVyfVxyXG4gICAgICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5OdW1iZXJGaWVsZCNtX2lucHV0TWluXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIOyIq+yekCDtlYTrk5zsnZgg7LWc7IaM6rCSXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKiAvLyBnZXR0ZXIgaW5wdXRNaW4oKVxyXG4gICAgICAgICAqIC8vIHNldHRlciBpbnB1dE1pbih2YWwpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tX2lucHV0TWluID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5tX3VzZUNhbGMgPSAnZmFsc2UnO1xyXG5cclxuICAgICAgICBpZiAoVXRpbHMuaXNTdHJpbmdFbXB0eShpZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1fZmllbGRJZCA9IHRoaXMubV9pZC5yZXBsYWNlKHRoaXMubV90eXBlLCB0aGlzLm1fa2luZCArIFwiLVwiKTtcclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiBmaWVsZE5hbWVcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5OdW1iZXJGaWVsZCNmaWVsZE5hbWVcclxuICAgICAqIEByZXR1cm4ge1N0cmluZ31cclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtlYTrk5wg7YOA7J6F7J2YIOydtOumhFxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZpZWxkTmFtZSgpIHtcclxuICAgICAgICByZXR1cm4gXCJOdW1iZXJGaWVsZFwiO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBhbmNlc3RvcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFtcIk5GXCIsIFwiVEJGXCIsIFwiQkZcIl07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlucHV0TWF4KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1faW5wdXRNYXg7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGlucHV0TWF4KF9faW5wdXRNYXgpIHtcclxuICAgICAgICB0aGlzLm1faW5wdXRNYXggPSBfX2lucHV0TWF4O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpbnB1dE1pbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX2lucHV0TWluO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBpbnB1dE1pbihfX2lucHV0TWluKSB7XHJcbiAgICAgICAgdGhpcy5tX2lucHV0TWluID0gX19pbnB1dE1pbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiBzaG93RmllbGRBdHRyaWJ1dGVcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5UZXh0QmFzZUZpZWxkI3Nob3dGaWVsZEF0dHJpYnV0ZVxyXG4gICAgICogQGRlc2NyaXB0aW9uICAoU3RhdGljKSDtlYTrk5zsnZgg7IaN7ISxIO2MneyXheywveydhCDshKTsoJXtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtFTEVNRU5UfSBub2RlICDsho3shLEg7Yyd7JeFIE5vZGVcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBpZFZhbHVlICAgICDtlYTrk5zsnZggaWTqsJJcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSByZXF1aXJlZFZhbHVlICAgICDtlYTsiJjsl6zrtoAg6rCSXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gb3duZXJJZFZhbHVlICAgICDshJzrqoXsnpAg7JWE7J2065SUXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZHZWYWx1ZSAgICAg6riw67O46rCSXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gbWluVmFsdWUgICAgIOy1nOyGjOqwklxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG1heFZhbHVlICAgICDstZzrjIDqsJJcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmb250RmFtaWx5TmFtZVZhbHVlICAgICDtj7Dtirgg7J2066aEXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZm9udFNpemVWYWx1ZSAgICAg7Y+w7Yq4IO2BrOq4sCDqsJJcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0QWxpZ25WYWx1ZSAgICAg7YWN7Iqk7Yq4IOqwgOuhnCDsoJXroKwg6rCSXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gYm9sZFZhbHVlICAgICDtj7Dtirgg67O865OcIOyXrOu2gFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZvbnRDb2xvclZhbHVlICAgICDtj7Dtirgg7Lm86528XHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSB1c2VyTGlzdCAgIOyEnOuqheyekCDrpqzsiqTtirhcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGR2T3B0aW9uTGlzdCAgIOq4sOuzuOqwkiDshKDtg50g66as7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge0NhbGxiYWNrfSBjaGFuZ2VFdmVudEZ1bmMgICAg7IaN7ISx6rCS7J20IOuzgO2VoOuVjCDtmLjstpzrkJjripQgY2FsbGJhY2sgZnVuY3Rpb25cclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHNob3dGaWVsZEF0dHJpYnV0ZShub2RlLFxyXG4gICAgICAgIGlkVmFsdWUsIGZpZWxkSWRWYWx1ZSwgcmVxdWlyZWRWYWx1ZSwgb3duZXJJZFZhbHVlLCBkdlZhbHVlLCBtaW5WYWx1ZSwgbWF4VmFsdWUsIHVzZUNhbGNWYWwsIGZvbnRGYW1pbHlOYW1lVmFsdWUsIGZvbnRTaXplVmFsdWUsIHRleHRBbGlnblZhbHVlLCBib2xkVmFsdWUsIGZvbnRDb2xvclZhbHVlLFxyXG4gICAgICAgIHVzZXJMaXN0LCBkdk9wdGlvbkxpc3QsXHJcbiAgICAgICAgY2hhbmdlRXZlbnRGdW5jKSB7XHJcblxyXG4gICAgICAgIHZhciBwYW5lbCA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVBhbmVsTm9kZSgpO1xyXG5cclxuICAgICAgICB2YXIgcmVxdWlyZVJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVRvZ2dsZUJ1dHRvbk5vZGUoaWRWYWx1ZSwgXCJyZXF1aXJlZFwiLCBcIlRlbXBsYXRlLmlzUmVxdWlyZWRcIiwgcmVxdWlyZWRWYWx1ZSwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChyZXF1aXJlUm93KTtcclxuXHJcbiAgICAgICAgbGV0IHVzZURlZmF1bE9wdGlvbk5vZGUgPSBVdGlscy5nZXRVc2VySW5mb09wdHNMaXN0Q291bnQoKSAhPT0gMTtcclxuICAgICAgICB2YXIgb3duZXJTZWxlY3RSb3cgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVTZWxlY3ROb2RlKGlkVmFsdWUsIFwib3duZXJJZFwiLCB1c2VyTGlzdCwgXCJcIiwgdXNlRGVmYXVsT3B0aW9uTm9kZSk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQob3duZXJTZWxlY3RSb3cpO1xyXG5cclxuICAgICAgICBsZXQgb3duZXJTZWxlY3QgPSBvd25lclNlbGVjdFJvdy5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xyXG4gICAgICAgIGpRdWVyeShvd25lclNlbGVjdCkuc2VsZWN0Mih7XHJcbiAgICAgICAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcclxuICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgalF1ZXJ5KG93bmVyU2VsZWN0KS52YWwob3duZXJJZFZhbHVlKS50cmlnZ2VyKFwiY2hhbmdlXCIpO1xyXG4gICAgICAgIGpRdWVyeShvd25lclNlbGVjdCkub24oXCJjaGFuZ2VcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuXHJcbiAgICAgICAgLy8xMi0yOFxyXG4gICAgICAgIGlmIChkdk9wdGlvbkxpc3QgJiYgQXJyYXkuaXNBcnJheShkdk9wdGlvbkxpc3QpICYmIGR2T3B0aW9uTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciBkZWZhdWx0VmFsdWVSb3cgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVTZWxlY3ROb2RlKGlkVmFsdWUsIFwiZGVmYXVsdFZhbHVlXCIsIGR2T3B0aW9uTGlzdCwgXCJUZW1wbGF0ZS5kZWZhdWx0VmFsdWVUZXh0XCIsIHRydWUpO1xyXG4gICAgICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChkZWZhdWx0VmFsdWVSb3cpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGRlZmF1bHRWYWx1ZVNlbGVjdCA9IGRlZmF1bHRWYWx1ZVJvdy5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xyXG4gICAgICAgICAgICAkKGRlZmF1bHRWYWx1ZVNlbGVjdCkuc2VsZWN0Mih7XHJcbiAgICAgICAgICAgICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogXCIxMDAlXCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICQoZGVmYXVsdFZhbHVlU2VsZWN0KS52YWwoZHZWYWx1ZSkudHJpZ2dlcihcImNoYW5nZVwiKTtcclxuICAgICAgICAgICAgJChkZWZhdWx0VmFsdWVTZWxlY3QpLm9uKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbWluVmFsID0gVXRpbHMuaXNTdHJpbmdFbXB0eShtaW5WYWx1ZSkgPyAnJyA6IE51bWJlcihtaW5WYWx1ZSk7XHJcbiAgICAgICAgdmFyIG1pblZhbHVlUm93ID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlSW5wdXROb2RlKGlkVmFsdWUsIFwiZmllbGRNaW5WYWx1ZVwiLCBcIlRlbXBsYXRlLmZpZWxkTWluVmFsdWVcIiwgbWluVmFsLCBcIm51bWJlclwiLCBcIlwiLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG4gICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKG1pblZhbHVlUm93KTtcclxuICAgICAgICBsZXQgbWF4VmFsID0gVXRpbHMuaXNTdHJpbmdFbXB0eShtYXhWYWx1ZSkgPyAnJyA6IE51bWJlcihtYXhWYWx1ZSk7XHJcbiAgICAgICAgdmFyIG1heFZhbHVlUm93ID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlSW5wdXROb2RlKGlkVmFsdWUsIFwiZmllbGRNYXhWYWx1ZVwiLCBcIlRlbXBsYXRlLmZpZWxkTWF4VmFsdWVcIiwgbWF4VmFsLCBcIm51bWJlclwiLCBcIlwiLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG4gICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKG1heFZhbHVlUm93KTtcclxuXHJcbiAgICAgICAgbGV0IGNhbGNSb3cgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVUb2dnbGVCdXR0b25Ob2RlKGlkVmFsdWUsIFwidXNlQ2FsY1wiLCBcIlRlbXBsYXRlLnVzZUNhbGNcIiwgdXNlQ2FsY1ZhbCwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChjYWxjUm93KTtcclxuXHJcbiAgICAgICAgdmFyIGZpZWxkSWRWYWx1ZVJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZUlucHV0Tm9kZShpZFZhbHVlLCBcImZpZWxkSWRcIiwgXCJUZW1wbGF0ZS5maWVsZElkVGV4dFwiLCBmaWVsZElkVmFsdWUsIFwiXCIsIFwiXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQoZmllbGRJZFZhbHVlUm93KTtcclxuXHJcbiAgICAgICAgdmFyIGZvbnRBdHRyUm93ID0gVXRpbHMuY3JlYXRlVGV4dEF0dHJidXRlTm9kZShpZFZhbHVlLCBmb250Q29sb3JWYWx1ZSwgdGV4dEFsaWduVmFsdWUsIGJvbGRWYWx1ZSwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChmb250QXR0clJvdy5yb3cpO1xyXG5cclxuICAgICAgICBsZXQgZm9udEZhbWlseUNvbWJvU2VsZWN0ID0gZm9udEF0dHJSb3cuZm9udEZhbWlseUNvbWJvLnF1ZXJ5U2VsZWN0b3IoXCJzZWxlY3RcIik7XHJcbiAgICAgICAgJChmb250RmFtaWx5Q29tYm9TZWxlY3QpLnNlbGVjdDIoe1xyXG4gICAgICAgICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXHJcbiAgICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZm9udEZhbWlseUNvbWJvU2VsZWN0KS52YWwoZm9udEZhbWlseU5hbWVWYWx1ZSkudHJpZ2dlcihcImNoYW5nZVwiKTtcclxuICAgICAgICAkKGZvbnRGYW1pbHlDb21ib1NlbGVjdCkub24oXCJjaGFuZ2VcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgICAgICBsZXQgZm9udFNpemVDb21ib1NlbGVjdCA9IGZvbnRBdHRyUm93LmZvbnRTaXplQ29tYm8ucXVlcnlTZWxlY3RvcihcInNlbGVjdFwiKTtcclxuICAgICAgICAkKGZvbnRTaXplQ29tYm9TZWxlY3QpLnNlbGVjdDIoe1xyXG4gICAgICAgICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXHJcbiAgICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZm9udFNpemVDb21ib1NlbGVjdCkudmFsKGZvbnRTaXplVmFsdWUpLnRyaWdnZXIoXCJjaGFuZ2VcIik7XHJcbiAgICAgICAgJChmb250U2l6ZUNvbWJvU2VsZWN0KS5vbihcImNoYW5nZVwiLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG5cclxuICAgICAgICBsZXQgY29sb3JJbnB1dCA9IGZvbnRBdHRyUm93LmNvbG9yQnRuLnF1ZXJ5U2VsZWN0b3IoXCJidXR0b25cIik7XHJcbiAgICAgICAgY29sb3JJbnB1dC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBmb250Q29sb3JWYWx1ZTtcclxuICAgICAgICBsZXQgcGlja2VyID0gbmV3IENQKGNvbG9ySW5wdXQsIHsgY29sb3I6IGZvbnRDb2xvclZhbHVlIH0pO1xyXG4gICAgICAgIGNvbG9ySW5wdXQudmFsdWUgPSBmb250Q29sb3JWYWx1ZTtcclxuICAgICAgICBwaWNrZXIub24oJ2NoYW5nZScsIGZ1bmN0aW9uIChyLCBnLCBiLCBhKSB7XHJcbiAgICAgICAgICAgIGlmICghcGlja2VyLnZpc2libGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb2xvcklucHV0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IENQLkhFWChbciwgZywgYiwgYV0pO1xyXG4gICAgICAgICAgICBjb2xvcklucHV0LnZhbHVlID0gQ1AuSEVYKFtyLCBnLCBiLCBhXSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgY29sb3JUZXh0SW5wdXQgPSBmb250QXR0clJvdy5jb2xvckJ0bi5xdWVyeVNlbGVjdG9yKFwiaW5wdXRbdHlwZT0ndGV4dCddXCIpO1xyXG4gICAgICAgICAgICBjb2xvclRleHRJbnB1dC52YWx1ZSA9IChDUC5IRVgoW3IsIGcsIGIsIGFdKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcGlja2VyLm9uKCdleGl0JywgZnVuY3Rpb24gKHIsIGcsIGIsIGEpIHtcclxuICAgICAgICAgICAgY29sb3JJbnB1dC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBDUC5IRVgoW3IsIGcsIGIsIGFdKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBjb2xvclRleHRJbnB1dCA9IGZvbnRBdHRyUm93LmNvbG9yQnRuLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFt0eXBlPSd0ZXh0J11cIik7XHJcbiAgICAgICAgICAgIGNvbG9yVGV4dElucHV0LnZhbHVlID0gKENQLkhFWChbciwgZywgYiwgYV0pKTtcclxuICAgICAgICAgICAgY29sb3JUZXh0SW5wdXQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJjaGFuZ2VcIikpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBwYW5lbC5zZXRBdHRyaWJ1dGUoXCJGaWVsZC1pZC1saXN0XCIsIGlkVmFsdWUpO1xyXG5cclxuICAgICAgICBub2RlLmNsYXNzTmFtZSA9IFwiRWRpdG9yLUF0dHJpYnV0ZVwiO1xyXG4gICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZChcIlRleHQtRmllbGRcIik7XHJcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChwYW5lbCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiBzaG93RmllbGRzQXR0cmlidXRlXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuTnVtYmVyRmllbGQjc2hvd0ZpZWxkc0F0dHJpYnV0ZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOuTnOydmCDsho3shLEg7Yyd7JeF7LC97J2EIOyEpOygle2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0hUTUx9IG93bmVyTm9kZSAg7IaN7ISxIO2MneyXhSBOb2RlXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBmaWVsZExpc3QgICAgIO2VhOuTnOuTpOydmCDrpqzsiqTtirhcclxuICAgICAqIEBwYXJhbSB7SFRNTH0gYXR0ck5vZGUgICAg7IaN7ISxIO2MneyXheydmCBOb2RlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWFpbkdyb3VwICAgIFNWR+ydmCDrqZTsnbggRWxlbWVudFxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gdXNlckxpc3QgICDshJzrqoXsnpAg66as7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBkdk9wdGlvbkxpc3QgICDquLDrs7jqsJIg7ISg7YOdIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtDYWxsYmFja30gY2hhbmdlRXZlbnRGdW5jICAgIOyGjeyEseqwkuydtCDrs4DtlaDrlYwg7Zi47Lac65CY64qUIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBzaG93RmllbGRzQXR0cmlidXRlKG93bmVyTm9kZSwgZmllbGRMaXN0LCBhdHRyTm9kZSwgbWFpbkdyb3VwLCB1c2VyTGlzdCwgZHZPcHRpb25MaXN0LCBjaGFuZ2VFdmVudEZ1bmMpIHtcclxuICAgICAgICBsZXQgbm9kZSA9IGF0dHJOb2RlO1xyXG4gICAgICAgIGlmIChhdHRyTm9kZSA9PT0gbnVsbCB8fCBVdGlscy5pc0VtcHR5T2JqZWN0KGF0dHJOb2RlKSkge1xyXG4gICAgICAgICAgICBjb25zdCBiYm94ID0gVXRpbHMubWVyZ2VGaWVsZHNCQm94KGZpZWxkTGlzdCk7XHJcbiAgICAgICAgICAgIG5vZGUgPSBVdGlscy5jcmVhdGVBdHRyYnV0ZVBvcHVwKG93bmVyTm9kZSwgYmJveCk7XHJcbiAgICAgICAgICAgIFV0aWxzLnJlcG9zaXRpb25GaWVsZERlbGV0ZUJ0bihvd25lck5vZGUsIGJib3gueCwgYmJveC55LCBiYm94LndpZHRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgVXRpbHMucmVtb3ZlQWxsQ2hpbGROb2RlKG5vZGUpO1xyXG5cclxuICAgICAgICB2YXIgaWRWYWx1ZUFyciA9IFtdO1xyXG4gICAgICAgIGZpZWxkTGlzdC5mb3JFYWNoKChmaWVsZCkgPT4ge1xyXG4gICAgICAgICAgICBpZFZhbHVlQXJyLnB1c2goZmllbGQuaWQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgaWRWYWx1ZSA9IGlkVmFsdWVBcnIuam9pbigpO1xyXG5cclxuICAgICAgICB2YXIgb3duZXJJZFZhbHVlID0gZmllbGRMaXN0WzBdLm93bmVySWQ7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLm93bmVySWQgIT09IG93bmVySWRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgb3duZXJJZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHJlcXVpcmVkVmFsdWUgPSBmaWVsZExpc3RbMF0ucmVxdWlyZWQ7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLnJlcXVpcmVkICE9PSByZXF1aXJlZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICByZXF1aXJlZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGR2VmFsdWUgPSBmaWVsZExpc3RbMF0uZGVmYXVsdFZhbHVlO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5kZWZhdWx0VmFsdWUgIT09IGR2VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGR2VmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZmllbGRJZFZhbHVlID0gZmllbGRMaXN0WzBdLmZpZWxkSWQ7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmZpZWxkSWQgIT09IGZpZWxkSWRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgZmllbGRJZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG1pblZhbHVlID0gZmllbGRMaXN0WzBdLm1faW5wdXRNaW47XHJcbiAgICAgICAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLm1faW5wdXRNaW4gIT09IG1pblZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBtaW5WYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IG1heFZhbHVlID0gZmllbGRMaXN0WzBdLm1faW5wdXRNYXg7XHJcbiAgICAgICAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLm1faW5wdXRNYXggIT09IG1heFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBtYXhWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB1c2VDYWxjVmFsdWUgPSBmaWVsZExpc3RbMF0ubV91c2VDYWxjO1xyXG4gICAgICAgIGZvciAobGV0IGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5tX3VzZUNhbGMgIT09IHVzZUNhbGNWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdXNlQ2FsY1ZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGZvbnRGYW1pbHlOYW1lVmFsdWUgPSBmaWVsZExpc3RbMF0uZm9udE5hbWU7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmZvbnROYW1lICE9PSBmb250RmFtaWx5TmFtZVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBmb250RmFtaWx5TmFtZVZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZm9udFNpemVWYWx1ZSA9IGZpZWxkTGlzdFswXS5mb250U2l6ZTtcclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0uZm9udFNpemUgIT09IGZvbnRTaXplVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplVmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgdGV4dEFsaWduVmFsdWUgPSBmaWVsZExpc3RbMF0udGV4dEFsaWduO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS50ZXh0QWxpZ24gIT09IHRleHRBbGlnblZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QWxpZ25WYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBib2xkVmFsdWUgPSBmaWVsZExpc3RbMF0uaXNCb2xkO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5pc0JvbGQgIT09IGJvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgYm9sZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZm9udENvbG9yVmFsdWUgPSBmaWVsZExpc3RbMF0uZm9udENvbG9yO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5mb250Q29sb3IgIT09IGZvbnRDb2xvclZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBmb250Q29sb3JWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIE51bWJlckZpZWxkLnNob3dGaWVsZEF0dHJpYnV0ZShub2RlLFxyXG4gICAgICAgICAgICBpZFZhbHVlLCBmaWVsZElkVmFsdWUsIHJlcXVpcmVkVmFsdWUsIG93bmVySWRWYWx1ZSwgZHZWYWx1ZSwgbWluVmFsdWUsIG1heFZhbHVlLCB1c2VDYWxjVmFsdWUsIGZvbnRGYW1pbHlOYW1lVmFsdWUsIGZvbnRTaXplVmFsdWUsIHRleHRBbGlnblZhbHVlLCBib2xkVmFsdWUsIGZvbnRDb2xvclZhbHVlLFxyXG4gICAgICAgICAgICB1c2VyTGlzdCwgZHZPcHRpb25MaXN0LFxyXG4gICAgICAgICAgICBjaGFuZ2VFdmVudEZ1bmMpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gdmFsaWRhdGVWYWx1ZVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLk51bWJlckZpZWxkI3ZhbGlkYXRlVmFsdWVcclxuICAgICAqIEBkZXNjcmlwdGlvbiDtlbTri7kg7ZSE66Gc7Y287Yuw7J2YIOqwkuydtCDsnKDtmqjtlZzsp4Ag7LK07YGs7ZWc64ukLiAuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkUHJvcGV0eU5hbWUg7ZWE65Oc7J2YIOyGjeyEsSDsnbTrpoRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZSAgIO2VhOuTnOydmCDsho3shLEg6rCSXHJcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICB2YWxpZGF0ZVZhbHVlKGZpZWxkUHJvcGV0eU5hbWUsIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKGZpZWxkUHJvcGV0eU5hbWUgPT09IFwiZGVmYXVsdFZhbHVlXCIpIHtcclxuICAgICAgICAgICAgbGV0IGlzbnVtID0gL15cXGQrJC8udGVzdCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIGlmICghaXNudW0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufVxyXG5cclxuIiwiXHJcbi8qKlxyXG4gKiBAbW9kdWxlIFRlbXBsYXRlL0ZpZWxkXHJcbiovXHJcblxyXG5pbXBvcnQgeyBCYXNlRmllbGQgfSBmcm9tICcuL0Jhc2VGaWVsZCc7XHJcbmltcG9ydCB7VXRpbHN9IGZyb20gJy4vLi4vdXRpbHMvdXRpbHMuanMnO1xyXG5pbXBvcnQge0NPTlNUQU5UU30gZnJvbSAnLi8uLi9Db25zdGFudHMuanMnO1xyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiDrnbzrlJTsmKQg7ZWE65OcIENsYXNzXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBtX2dyb3VwTmFtZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlJhZGlvRmllbGQjbV9ncm91cE5hbWV9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBtX2RlZmF1bHRWYWx1ZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlJhZGlvRmllbGQjbV9kZWZhdWx0VmFsdWV9XHJcbiAqIFxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBmaWVsZE5hbWUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5SYWRpb0ZpZWxkI2ZpZWxkTmFtZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gd2lkdGhWYWx1ZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlJhZGlvRmllbGQjd2lkdGhWYWx1ZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gaGVpZ2h0VmFsdWUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5SYWRpb0ZpZWxkI2hlaWdodFZhbHVlfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBnZXRTVkdGaWVsZE9iamVjdCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlJhZGlvRmllbGQjZ2V0U1ZHRmllbGRPYmplY3R9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNob3dGaWVsZEF0dHJpYnV0ZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlJhZGlvRmllbGQjc2hvd0ZpZWxkQXR0cmlidXRlfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBzaG93RmllbGRzQXR0cmlidXRlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuUmFkaW9GaWVsZCNzaG93RmllbGRzQXR0cmlidXRlfVxyXG4gKlxyXG4gKiBAYXVnbWVudHMgQmFzZUZpZWxkIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuQmFzZUZpZWxkI0Jhc2VGaWVsZH1cclxuICogQEZpbGVOYW1lIFJhZGlvRmllbGQuanNcclxuICogQHNpbmNlIDIwMjEuMDUuMzFcclxuICovXHJcbmV4cG9ydCBjbGFzcyBSYWRpb0ZpZWxkIGV4dGVuZHMgQmFzZUZpZWxkIHtcclxuICAgIC8qKlxyXG4gICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgKiBAcGFyYW0gaWQg7ZWE65Oc7J2YIElEXHJcbiAgICAgKiBAcGFyYW0gcGFnZU5vIO2VhOuTnOqwgCDsho3tlZwg7Y6Y7J207KeAIOuyiO2YuFxyXG4gICAgICogQHBhcmFtIHgg7ZWE65Oc7J2YIHN2Z+yDgeydmCB47KKM7ZGcXHJcbiAgICAgKiBAcGFyYW0geSDtlYTrk5zsnZggc3Zn7IOB7J2YIHnsooztkZxcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGlkLCBwYWdlTm8sIHgsIHkpIHtcclxuICAgICAgICBzdXBlcihpZCwgcGFnZU5vLCB4LCB5LCBSYWRpb0ZpZWxkLndpZHRoVmFsdWUoKSwgUmFkaW9GaWVsZC5oZWlnaHRWYWx1ZSgpKTtcclxuICAgICAgICB0aGlzLm1fdHlwZSA9IFJhZGlvRmllbGQuZmllbGROYW1lKCk7XHJcblxyXG4gICAgICAgIHRoaXMubV9raW5kID0gVXRpbHMudHJhbnNsYXRlRm9yS2V5KFwiVGVtcGxhdGUucmFkaW9GaWVsZFRvb2xcIik7XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChVdGlscy5pc1N0cmluZ0VtcHR5KGlkKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5SYWRpb0ZpZWxkI21fZ3JvdXBOYW1lXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIOudvOuUlOyYpCDqt7jro7kg7J2066aEXHJcbiAgICAgICAgICogQGRlZmF1bHQgaWTqsIAg65Ok7Ja06rCE64ukLlxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIGdyb3VwTmFtZSgpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIGdyb3VwTmFtZSh2YWwpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tX2dyb3VwTmFtZSA9IGlkO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5SYWRpb0ZpZWxkI21fZGVmYXVsdFZhbHVlXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIOudvOuUlOyYpOulvCDshKDtg53tlojsnYQg65WM7J2YIOqwklxyXG4gICAgICAgICAqIEBkZWZhdWx0IGlk6rCAIOuTpOyWtOqwhOuLpC5cclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciBkZWZhdWx0VmFsdWUoKVxyXG4gICAgICAgICAqIC8vIHNldHRlciBkZWZhdWx0VmFsdWUodmFsKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubV9kZWZhdWx0VmFsdWUgPSBpZDtcclxuICAgICAgICB0aGlzLm1fZmllbGRJZCA9IHRoaXMubV9pZC5yZXBsYWNlKHRoaXMubV90eXBlLCB0aGlzLm1fa2luZCArIFwiLVwiKTtcclxuICAgICAgICB0aGlzLm1fcmFkaW9UeXBlID0gQ09OU1RBTlRTLlJBRElPX1RZUEVfMTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiBmaWVsZE5hbWVcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5SYWRpb0ZpZWxkI2ZpZWxkTmFtZVxyXG4gICAgICogQHJldHVybiB7U3RyaW5nfVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOuTnCDtg4DsnoXsnZgg7J2066aEXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZmllbGROYW1lKCkge1xyXG4gICAgICAgIHJldHVybiBcIlJhZGlvRmllbGRcIjtcclxuICAgIH1cclxuXHJcbiAgICBhbmNlc3RvcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFsgXCJSRlwiLCBcIkJGXCJdO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gd2lkdGhWYWx1ZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlJhZGlvRmllbGQjd2lkdGhWYWx1ZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOuTnOydmCDstIjquLAg6rCA66GcIOq4uOydtFxyXG4gICAgICogQHJldHVybiB7TnVtYmVyfVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHdpZHRoVmFsdWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIDYwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIGhlaWdodFZhbHVlXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuUmFkaW9GaWVsZCNoZWlnaHRWYWx1ZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOuTnOydmCDstIjquLAg7IS466GcIOq4uOydtFxyXG4gICAgICogQHJldHVybiB7TnVtYmVyfVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGhlaWdodFZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybiA2MDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZ3JvdXBOYW1lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fZ3JvdXBOYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBncm91cE5hbWUoX19ncm91cE5hbWUpIHtcclxuICAgICAgICB0aGlzLm1fZ3JvdXBOYW1lID0gX19ncm91cE5hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGRlZmF1bHRWYWx1ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX2RlZmF1bHRWYWx1ZTtcclxuICAgIH1cclxuICAgIHNldCBkZWZhdWx0VmFsdWUoX19kZWZhdWx0VmFsdWUpIHtcclxuICAgICAgICB0aGlzLm1fZGVmYXVsdFZhbHVlID0gX19kZWZhdWx0VmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHJhZGlvVHlwZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX3JhZGlvVHlwZTtcclxuICAgIH1cclxuICAgIHNldCByYWRpb1R5cGUoX19yYWRpb1R5cGUpIHtcclxuICAgICAgICB0aGlzLm1fcmFkaW9UeXBlID0gX19yYWRpb1R5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gZ2V0U1ZHRmllbGRPYmplY3RcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5SYWRpb0ZpZWxkI2dldFNWR0ZpZWxkT2JqZWN0XHJcbiAgICAgKiBAbWVtYmVyT2YgbW9kdWxlOlRlbXBsYXRlLkNoZWNrYm94RmllbGRcclxuICAgICAqIEBkZXNjcmlwdGlvbiAg7ZWE65Oc7J2YIOygleuztOulvCDqsIDsp4Dqs6AgU1ZHIEVsZW1lbnTrpbwg7IOd7ISx7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjYW52YXMgU25hcCBTVkfsnZggQ2FudmFzIE9iamVjdFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG1haW5Hcm91cCAgIFNWR+ydmCDrqZTsnbggTm9kZVxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHNjYWxlICDtmITsnqwgUERG7J2YIFNjYWxlXHJcbiAgICAgKiBAcGFyYW0ge0VMRU1FTlR9IG93bmVyTm9kZSAgIO2VtOuLuSDtlITroZzsoJ3tirjsnZgg7LWc7IOB64uoIEVsZW1lbnTrpbwg6rCQ7Iu46rOgIOyeiOuKlCBFbGVtZW50XHJcbiAgICAgKiBAcGFyYW0ge0NhbGxiYWNrfSByZW1vdmVEcmFnT3Zlckdyb3VwRnVuYyAgICAg65Oc656Y6re4IOuQmOyWtCDshKDtg53rkJjslrTsp4QgRmllbGQgR3JvdXDsnYQg7KCc6rGw7ZWY64qUIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICAgKiBAcGFyYW0ge0NhbGxiYWNrfSBjaGFuZ2VWYWx1ZUV2ZW50RnVuYyAgICAg7IaN7ISx6rCS7J20IOuzgO2VoOuVjCDtmLjstpzrkJjripQgY2FsbGJhY2sgZnVuY3Rpb25cclxuICAgICAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNoYW5nZUZyZWVUcmFuc2Zvcm1GdW5jICAgICBGcmVlVHJhbnNmb3Jt7J2EIOuLpOyLnCDsg53shLHtlZjquLAg7JyE7ZWcIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IFNWRyBOb2RlIEVsZW1lbnRcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgZ2V0U1ZHRmllbGRPYmplY3QoY2FudmFzLCBtYWluR3JvdXAsIHNjYWxlLCBvd25lck5vZGUsIHJlbW92ZURyYWdPdmVyR3JvdXBGdW5jLCBjaGFuZ2VWYWx1ZUV2ZW50RnVuYywgY2hhbmdlRnJlZVRyYW5zZm9ybUZ1bmMpIHtcclxuICAgICAgICBsZXQgZ3JvdXAgPSBtYWluR3JvdXAuZ3JvdXAoKTtcclxuICAgICAgICBncm91cC5hdHRyKHtcclxuICAgICAgICAgICAgaWQ6IHRoaXMuaWQgKyBcIkdyb3VwXCIsXHJcbiAgICAgICAgICAgIGN1cnNvcjogXCJtb3ZlXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICBsZXQgcmVjdCA9IGNhbnZhcy5yZWN0KHRoaXMueCwgdGhpcy55LCB0aGlzLndpZHRoICogc2NhbGUsIHRoaXMuaGVpZ2h0ICogc2NhbGUpO1xyXG4gICAgICAgIHJlY3QuYXR0cih7XHJcbiAgICAgICAgICAgIGlkOiB0aGlzLmlkLFxyXG4gICAgICAgICAgICBcImZpbGwtb3BhY2l0eVwiOiBcIjAuNlwiLFxyXG4gICAgICAgICAgICBcImZpbGxcIjogXCIjZmZhYzdmXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICBncm91cC5hcHBlbmQocmVjdCk7XHJcbiAgICAgICAgY29uc3QgcmFkaW9QYXRoID0gdGhpcy5tX3JhZGlvVHlwZSA9PT0gQ09OU1RBTlRTLlJBRElPX1RZUEVfMSA/IENPTlNUQU5UUy5SQUlPRF9UWVBFXzFfUEFUSCA6IENPTlNUQU5UUy5SQUlPRF9UWVBFXzJfUEFUSCBcclxuICAgICAgICBjb25zdCByYWRpb1N0cmluZyA9ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4PVwiJyArIHRoaXMueCArICdweFwiIHk9XCInICsgdGhpcy55ICsgJ3B4XCIgd2lkdGg9XCInICsgdGhpcy53aWR0aCAqIHNjYWxlICtcclxuICAgICAgICAgICAgJ3B4XCIgaGVpZ2h0PVwiJyArIHRoaXMuaGVpZ2h0ICogc2NhbGUgKyAncHhcIiAgdmlld0JveD1cIjAgMCA0OCA0OFwiPiAnICsgcmFkaW9QYXRoICsgJyA8L3N2ZyA+J1xyXG4gICAgICAgIGNvbnN0IHAgPSBTbmFwLnBhcnNlKHJhZGlvU3RyaW5nKTtcclxuICAgICAgICBncm91cC5hcHBlbmQocCk7XHJcblxyXG5cclxuICAgICAgICBncm91cC5ob3ZlcihcclxuICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyAvLyBmX2luXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLy8gZl9vdXRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGxldCBfcmFkaW9GaWVsZCA9IHRoaXM7XHJcbiAgICAgICAgbGV0IG1vdXNlUG9zID0geyB4OiAwLCB5OiAwIH07XHJcbiAgICAgICAgZ3JvdXAubW91c2Vkb3duKGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgbW91c2VQb3MueCA9IGV2dC5wYWdlWDtcclxuICAgICAgICAgICAgbW91c2VQb3MueSA9IGV2dC5wYWdlWTtcclxuICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBtYWluR3JvdXAuc2VsZWN0QWxsKCdnJyk7XHJcbiAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50ICE9PSBncm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghVXRpbHMuaXNFbXB0eU9iamVjdChlbGVtZW50LmZyZWVUcmFuc2Zvcm0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuZnJlZVRyYW5zZm9ybS5oaWRlUmVzaXplSGFuZGxlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIVV0aWxzLmlzRW1wdHlPYmplY3QoZ3JvdXAuZnJlZVRyYW5zZm9ybSkpIHtcclxuICAgICAgICAgICAgICAgIGdyb3VwLmZyZWVUcmFuc2Zvcm0uc2hvd1Jlc2l6ZUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNoYW5nZUZyZWVUcmFuc2Zvcm1GdW5jKGdyb3VwLCByZWN0LmF0dHIoXCJ3aWR0aFwiKSwgcmVjdC5hdHRyKFwiaGVpZ2h0XCIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBncm91cC5tb3VzZXVwKGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgaWYgKGdyb3VwLnBhcmVudCgpLmF0dHIoXCJpZFwiKSA9PT0gQ09OU1RBTlRTLkRSQUdfQk9YX05BTUUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb3VzZVBvcy54IC0gZXZ0LnBhZ2VYKSA+IENPTlNUQU5UUy5NSU5JTVVNX0RSQUdfU0laRVxyXG4gICAgICAgICAgICAgICAgICAgIHx8IE1hdGguYWJzKG1vdXNlUG9zLnkgLSBldnQucGFnZVkpID4gQ09OU1RBTlRTLk1JTklNVU1fRFJBR19TSVpFKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVtb3ZlRHJhZ092ZXJHcm91cEZ1bmMuY2FsbCgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBtYWluR3JvdXAuc2VsZWN0QWxsKCdnJyk7XHJcbiAgICAgICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgIT09IGdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghVXRpbHMuaXNFbXB0eU9iamVjdChlbGVtZW50LmZyZWVUcmFuc2Zvcm0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmZyZWVUcmFuc2Zvcm0uaGlkZVJlc2l6ZUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFVdGlscy5pc0VtcHR5T2JqZWN0KGdyb3VwLmZyZWVUcmFuc2Zvcm0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXAuZnJlZVRyYW5zZm9ybS5zaG93UmVzaXplSGFuZGxlcigpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VGcmVlVHJhbnNmb3JtRnVuYyhncm91cCwgcmVjdC5hdHRyKFwid2lkdGhcIiksIHJlY3QuYXR0cihcImhlaWdodFwiKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfcmFkaW9GaWVsZC5jb25zdHJ1Y3Rvci5zaG93RmllbGRzQXR0cmlidXRlKG93bmVyTm9kZSwgW19yYWRpb0ZpZWxkXSwgdW5kZWZpbmVkLCBtYWluR3JvdXAsIFV0aWxzLmdldFVzZXJJbmZvT3B0c0xpc3QoKSwgVXRpbHMuZ2V0RFZGaWVsZE9wdHNMaXN0KCksIGNoYW5nZVZhbHVlRXZlbnRGdW5jKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF9yYWRpb0ZpZWxkLmNvbnN0cnVjdG9yLnNob3dGaWVsZHNBdHRyaWJ1dGUob3duZXJOb2RlLCBbX3JhZGlvRmllbGRdLCB1bmRlZmluZWQsIG1haW5Hcm91cCwgVXRpbHMuZ2V0VXNlckluZm9PcHRzTGlzdCgpLCBVdGlscy5nZXREVkZpZWxkT3B0c0xpc3QoKSwgY2hhbmdlVmFsdWVFdmVudEZ1bmMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGdyb3VwO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBjaGFuZ2VUZXh0RWxlbWVudChmaWVsZEdyb3VwLCBzY2FsZSkge1xyXG4gICAgICAgIGZpZWxkR3JvdXAuc2VsZWN0KFwic3ZnXCIpLnJlbW92ZSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHJhZGlvUGF0aCA9IHRoaXMubV9yYWRpb1R5cGUgPT09IENPTlNUQU5UUy5SQURJT19UWVBFXzEgPyBDT05TVEFOVFMuUkFJT0RfVFlQRV8xX1BBVEggOiBDT05TVEFOVFMuUkFJT0RfVFlQRV8yX1BBVEggXHJcbiAgICAgICAgY29uc3QgcmFkaW9TdHJpbmcgPSAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeD1cIicgKyB0aGlzLnggKyAncHhcIiB5PVwiJyArIHRoaXMueSArICdweFwiIHdpZHRoPVwiJyArIHRoaXMud2lkdGggKiBzY2FsZSArXHJcbiAgICAgICAgICAgICdweFwiIGhlaWdodD1cIicgKyB0aGlzLmhlaWdodCAqIHNjYWxlICsgJ3B4XCIgIHZpZXdCb3g9XCIwIDAgNDggNDhcIj4gJyArIHJhZGlvUGF0aCArICcgPC9zdmcgPidcclxuICAgICAgICBjb25zdCBwID0gU25hcC5wYXJzZShyYWRpb1N0cmluZyk7XHJcbiAgICAgICAgZmllbGRHcm91cC5hcHBlbmQocCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQGZ1bmN0aW9uIHNob3dGaWVsZEF0dHJpYnV0ZVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlJhZGlvRmllbGQjc2hvd0ZpZWxkQXR0cmlidXRlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gIChTdGF0aWMpIO2VhOuTnOydmCDsho3shLEg7Yyd7JeF7LC97J2EIOyEpOygle2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0VMRU1FTlR9IG5vZGUgIOyGjeyEsSDtjJ3sl4UgTm9kZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGlkVmFsdWUgICAgIO2VhOuTnOydmCBpZOqwklxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHJlcXVpcmVkVmFsdWUgICAgIO2VhOyImOyXrOu2gCDqsJJcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvd25lcklkVmFsdWUgICAgIOyEnOuqheyekCDslYTsnbTrlJRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBncm91cE5hbWVWYWx1ZSAgICAg652865SU7JikIOq3uOujuSDsnbTrpoQuXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZHZWYWx1ZSAgICAg6riw67O46rCSXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSB1c2VyTGlzdCAgIOyEnOuqheyekCDrpqzsiqTtirhcclxuICAgICAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNoYW5nZUV2ZW50RnVuYyAgICDsho3shLHqsJLsnbQg67OA7ZWg65WMIO2YuOy2nOuQmOuKlCBjYWxsYmFjayBmdW5jdGlvblxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgc2hvd0ZpZWxkQXR0cmlidXRlKG5vZGUsXHJcbiAgICAgICAgaWRWYWx1ZSwgZmllbGRJZFZhbHVlLCByZXF1aXJlZFZhbHVlLCBvd25lcklkVmFsdWUsIGdyb3VwTmFtZVZhbHVlLCBkdlZhbHVlLCByYWlvZFR5cGVWYWx1ZSxcclxuICAgICAgICB1c2VyTGlzdCxcclxuICAgICAgICBjaGFuZ2VFdmVudEZ1bmMpIHtcclxuXHJcbiAgICAgICAgdmFyIHBhbmVsID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlUGFuZWxOb2RlKCk7XHJcblxyXG4gICAgICAgIHZhciByZXF1aXJlUm93ID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlVG9nZ2xlQnV0dG9uTm9kZShpZFZhbHVlLCBcInJlcXVpcmVkXCIsIFwiVGVtcGxhdGUuaXNSZXF1aXJlZFwiLCByZXF1aXJlZFZhbHVlLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG4gICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKHJlcXVpcmVSb3cpO1xyXG5cclxuICAgICAgICBsZXQgdXNlRGVmYXVsT3B0aW9uTm9kZSA9IFV0aWxzLmdldFVzZXJJbmZvT3B0c0xpc3RDb3VudCgpICE9PSAxO1xyXG4gICAgICAgIHZhciBvd25lclNlbGVjdFJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVNlbGVjdE5vZGUoaWRWYWx1ZSwgXCJvd25lcklkXCIsIHVzZXJMaXN0LCBcIlwiLCB1c2VEZWZhdWxPcHRpb25Ob2RlKTtcclxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChvd25lclNlbGVjdFJvdyk7XHJcblxyXG4gICAgICAgIGxldCBvd25lclNlbGVjdCA9IG93bmVyU2VsZWN0Um93LnF1ZXJ5U2VsZWN0b3IoXCJzZWxlY3RcIik7XHJcbiAgICAgICAgJChvd25lclNlbGVjdCkuc2VsZWN0Mih7XHJcbiAgICAgICAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcclxuICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChvd25lclNlbGVjdCkudmFsKG93bmVySWRWYWx1ZSkudHJpZ2dlcihcImNoYW5nZVwiKTtcclxuICAgICAgICAkKG93bmVyU2VsZWN0KS5vbihcImNoYW5nZVwiLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG5cclxuICAgICAgICB2YXIgcmFkaW9UeXBlUm93ID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlU2VsZWN0Tm9kZShpZFZhbHVlLCBcInJhZGlvVHlwZVwiLCBVdGlscy5yYWRpb1R5cGVMaXN0LCBcIlwiLCB1c2VEZWZhdWxPcHRpb25Ob2RlKTtcclxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChyYWRpb1R5cGVSb3cpO1xyXG5cclxuICAgICAgICBsZXQgcmFkaW9UeXBlU2VsZWN0ID0gcmFkaW9UeXBlUm93LnF1ZXJ5U2VsZWN0b3IoXCJzZWxlY3RcIik7XHJcbiAgICAgICAgJChyYWRpb1R5cGVTZWxlY3QpLnNlbGVjdDIoe1xyXG4gICAgICAgICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXHJcbiAgICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQocmFkaW9UeXBlU2VsZWN0KS52YWwocmFpb2RUeXBlVmFsdWUpLnRyaWdnZXIoXCJjaGFuZ2VcIik7XHJcbiAgICAgICAgJChyYWRpb1R5cGVTZWxlY3QpLm9uKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcblxyXG4gICAgICAgIHZhciBncm91cFJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZUlucHV0Tm9kZShpZFZhbHVlLCBcImdyb3VwTmFtZVwiLCBcIlRlbXBsYXRlLnJhZGlvR3JvdXBOYW1lVGV4dFwiLCBncm91cE5hbWVWYWx1ZSwgXCJcIiwgXCJcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChncm91cFJvdyk7XHJcblxyXG4gICAgICAgIHZhciBkdlZhbHVlUm93ID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlSW5wdXROb2RlKGlkVmFsdWUsIFwiZGVmYXVsdFZhbHVlXCIsIFwiVGVtcGxhdGUucmFkaW9WYWx1ZVRleHRcIiwgZHZWYWx1ZSwgXCJcIiwgXCJcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChkdlZhbHVlUm93KTtcclxuXHJcbiAgICAgICAgdmFyIGZpZWxkSWRWYWx1ZVJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZUlucHV0Tm9kZShpZFZhbHVlLCBcImZpZWxkSWRcIiwgXCJUZW1wbGF0ZS5maWVsZElkVGV4dFwiLCBmaWVsZElkVmFsdWUsIFwiXCIsIFwiXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQoZmllbGRJZFZhbHVlUm93KTtcclxuXHJcbiAgICAgICAgcGFuZWwuc2V0QXR0cmlidXRlKFwiRmllbGQtaWQtbGlzdFwiLCBpZFZhbHVlKTtcclxuXHJcbiAgICAgICAgbm9kZS5jbGFzc05hbWUgPSBcIkVkaXRvci1BdHRyaWJ1dGVcIjtcclxuICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoXCJCYXNlLUZpZWxkXCIpO1xyXG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQocGFuZWwpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiBzaG93RmllbGRzQXR0cmlidXRlXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuUmFkaW9GaWVsZCNzaG93RmllbGRzQXR0cmlidXRlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE65Oc7J2YIOyGjeyEsSDtjJ3sl4XssL3snYQg7ISk7KCV7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7RUxFTUVOVH0gb3duZXJOb2RlICDsho3shLEg7Yyd7JeFIE5vZGVcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGZpZWxkTGlzdCAgICAg7ZWE65Oc65Ok7J2YIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtFTEVNRU5UfSBhdHRyTm9kZSAgIOyGjeyEsSDtjJ3sl4XsnZggTm9kZVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1haW5Hcm91cCAgICBTVkfsnZgg66mU7J24IEVsZW1lbnRcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHVzZXJMaXN0ICAg7ISc66qF7J6QIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gZHZPcHRpb25MaXN0ICAg6riw67O46rCSIOyEoO2DnSDrpqzsiqTtirhcclxuICAgICAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNoYW5nZUV2ZW50RnVuYyAgICDsho3shLHqsJLsnbQg67OA7ZWg65WMIO2YuOy2nOuQmOuKlCBjYWxsYmFjayBmdW5jdGlvblxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgc2hvd0ZpZWxkc0F0dHJpYnV0ZShvd25lck5vZGUsIGZpZWxkTGlzdCwgYXR0ck5vZGUsIG1haW5Hcm91cCwgdXNlckxpc3QsIGR2T3B0aW9uTGlzdCwgY2hhbmdlRXZlbnRGdW5jKSB7XHJcbiAgICAgICAgbGV0IG5vZGUgPSBhdHRyTm9kZTtcclxuICAgICAgICBpZiAoYXR0ck5vZGUgPT09IG51bGwgfHwgVXRpbHMuaXNFbXB0eU9iamVjdChhdHRyTm9kZSkpIHtcclxuICAgICAgICAgICAgY29uc3QgYmJveCA9IFV0aWxzLm1lcmdlRmllbGRzQkJveChmaWVsZExpc3QpO1xyXG4gICAgICAgICAgICBub2RlID0gVXRpbHMuY3JlYXRlQXR0cmJ1dGVQb3B1cChvd25lck5vZGUsIGJib3gpO1xyXG4gICAgICAgICAgICBVdGlscy5yZXBvc2l0aW9uRmllbGREZWxldGVCdG4ob3duZXJOb2RlLCBiYm94LngsIGJib3gueSwgYmJveC53aWR0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFV0aWxzLnJlbW92ZUFsbENoaWxkTm9kZShub2RlKTtcclxuXHJcblxyXG4gICAgICAgIHZhciBpZFZhbHVlQXJyID0gW107XHJcbiAgICAgICAgZmllbGRMaXN0LmZvckVhY2goKGZpZWxkKSA9PiB7XHJcbiAgICAgICAgICAgIGlkVmFsdWVBcnIucHVzaChmaWVsZC5pZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIGlkVmFsdWUgPSBpZFZhbHVlQXJyLmpvaW4oKTtcclxuXHJcbiAgICAgICAgdmFyIG93bmVySWRWYWx1ZSA9IGZpZWxkTGlzdFswXS5vd25lcklkO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5vd25lcklkICE9PSBvd25lcklkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIG93bmVySWRWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBmaWVsZElkVmFsdWUgPSBmaWVsZExpc3RbMF0uZmllbGRJZDtcclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0uZmllbGRJZCAhPT0gZmllbGRJZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZElkVmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgcmVxdWlyZWRWYWx1ZSA9IGZpZWxkTGlzdFswXS5yZXF1aXJlZDtcclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0ucmVxdWlyZWQgIT09IHJlcXVpcmVkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHJlcXVpcmVkVmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZ3JvdXBOYW1lVmFsdWUgPSBmaWVsZExpc3RbMF0uZ3JvdXBOYW1lO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5ncm91cE5hbWUgIT09IGdyb3VwTmFtZVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBncm91cE5hbWVWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBkdlZhbHVlID0gZmllbGRMaXN0WzBdLmRlZmF1bHRWYWx1ZTtcclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0uZGVmYXVsdFZhbHVlICE9PSBkdlZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBkdlZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHJhaW9kVHlwZVZhbHVlID0gZmllbGRMaXN0WzBdLm1fcmFkaW9UeXBlO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5tX3JhZGlvVHlwZSAhPT0gcmFpb2RUeXBlVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHJhaW9kVHlwZVZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgUmFkaW9GaWVsZC5zaG93RmllbGRBdHRyaWJ1dGUobm9kZSxcclxuICAgICAgICAgICAgaWRWYWx1ZSwgZmllbGRJZFZhbHVlLCByZXF1aXJlZFZhbHVlLCBvd25lcklkVmFsdWUsIGdyb3VwTmFtZVZhbHVlLCBkdlZhbHVlLCByYWlvZFR5cGVWYWx1ZSxcclxuICAgICAgICAgICAgdXNlckxpc3QsXHJcbiAgICAgICAgICAgIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsIlxyXG4vKipcclxuICogQG1vZHVsZSBUZW1wbGF0ZS9GaWVsZFxyXG4qL1xyXG5cclxuaW1wb3J0IHsgQmFzZUZpZWxkIH0gZnJvbSAnLi9CYXNlRmllbGQnO1xyXG5pbXBvcnQge1V0aWxzfSBmcm9tICcuLy4uL3V0aWxzL3V0aWxzLmpzJztcclxuaW1wb3J0IHtDT05TVEFOVFN9IGZyb20gJy4vLi4vQ29uc3RhbnRzLmpzJztcclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24g7ISc66qFIO2VhOuTnCBDbGFzc1xyXG4gKlxyXG4gKiBAcHJvcGVydHkge051bWJlcn0gbV9zaWduUGVuVGhpY2tuZXNzIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuU2lnbkZpZWxkI21fc2lnblBlblRoaWNrbmVzc31cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IG1fc2lnblBlbkNvbG9yIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuU2lnbkZpZWxkI21fc2lnblBlbkNvbG9yfVxyXG4gKlxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBmaWVsZE5hbWUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5TaWduRmllbGQjZmllbGROYW1lfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSB3aWR0aFZhbHVlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuU2lnbkZpZWxkI3dpZHRoVmFsdWV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGhlaWdodFZhbHVlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuU2lnbkZpZWxkI2hlaWdodFZhbHVlfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBnZXRTVkdGaWVsZE9iamVjdCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlNpZ25GaWVsZCNnZXRTVkdGaWVsZE9iamVjdH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gbWFrZVNWR1RleHQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5TaWduRmllbGQjbWFrZVNWR1RleHR9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNob3dGaWVsZEF0dHJpYnV0ZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlNpZ25GaWVsZCNzaG93RmllbGRBdHRyaWJ1dGV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNob3dGaWVsZHNBdHRyaWJ1dGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5TaWduRmllbGQjc2hvd0ZpZWxkc0F0dHJpYnV0ZX1cclxuICpcclxuICogQGF1Z21lbnRzIEJhc2VGaWVsZCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlLkJhc2VGaWVsZCNCYXNlRmllbGR9XHJcbiAqIEBGaWxlTmFtZSBTaWduRmllbGQuanNcclxuICogQHNpbmNlIDIwMjEuMDUuMzFcclxuICovXHJcbmV4cG9ydCBjbGFzcyBTaWduRmllbGQgZXh0ZW5kcyBCYXNlRmllbGQge1xyXG4gIC8qKlxyXG4gICAqIEBjb25zdHJ1Y3RvclxyXG4gICAqIEBwYXJhbSBpZCDtlYTrk5zsnZggSURcclxuICAgKiBAcGFyYW0gcGFnZU5vIO2VhOuTnOqwgCDsho3tlZwg7Y6Y7J207KeAIOuyiO2YuFxyXG4gICAqIEBwYXJhbSB4IO2VhOuTnOydmCBzdmfsg4HsnZggeOyijO2RnFxyXG4gICAqIEBwYXJhbSB5IO2VhOuTnOydmCBzdmfsg4HsnZggeeyijO2RnFxyXG4gICAqXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoaWQsIHBhZ2VObywgeCwgeSwgdXNlRHJhd1NpZ24sIHVzZUltYWdlU2lnbiwgdXNlUmVnU2lnbikge1xyXG4gICAgc3VwZXIoaWQsIHBhZ2VObywgeCwgeSwgU2lnbkZpZWxkLndpZHRoVmFsdWUoKSwgU2lnbkZpZWxkLmhlaWdodFZhbHVlKCkpO1xyXG4gICAgdGhpcy5tX3R5cGUgPSBTaWduRmllbGQuZmllbGROYW1lKCk7XHJcblxyXG4gICAgdGhpcy5tX2tpbmQgPSBVdGlscy50cmFuc2xhdGVGb3JLZXkoXCJUZW1wbGF0ZS5zaWduRmllbGRUb29sXCIpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUge051bWJlcn1cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS5SYWRpb0ZpZWxkI21fc2lnblBlblRoaWNrbmVzc1xyXG4gICAgICogQGRlc2NyaXB0aW9uIOyEnOuqhe2OnOydmCDrkZDqu5hcclxuICAgICAqIEBkZWZhdWx0IDEuMFxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIC8vIGdldHRlciBzaWduUGVuVGhpY2tuZXNzKClcclxuICAgICAqIC8vIHNldHRlciBzaWduUGVuVGhpY2tuZXNzKHZhbClcclxuICAgICAqL1xyXG4gICAgdGhpcy5tX3NpZ25QZW5UaGlja25lc3MgPSAxO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS5SYWRpb0ZpZWxkI21fc2lnblBlbkNvbG9yXHJcbiAgICAgKiBAZGVzY3JpcHRpb24g7ISc66qF7Y6c7J2YIOyDieyDgVxyXG4gICAgICogQGRlZmF1bHQgIzAwMDAwMFxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIC8vIGdldHRlciBzaWduUGVuQ29sb3IoKVxyXG4gICAgICogLy8gc2V0dGVyIHNpZ25QZW5Db2xvcih2YWwpXHJcbiAgICAgKi9cclxuICAgIHRoaXMubV9zaWduUGVuQ29sb3IgPSBcIiMwMDAwMDBcIjtcclxuICAgIGlmIChVdGlscy5pc1N0cmluZ0VtcHR5KGlkKSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLm1fZmllbGRJZCA9IHRoaXMubV9pZC5yZXBsYWNlKHRoaXMubV90eXBlLCB0aGlzLm1fa2luZCArIFwiLVwiKTtcclxuXHJcbiAgICBTaWduRmllbGQudXNlRHJhd1NpZ25EZWYgPSB1c2VEcmF3U2lnbjtcclxuICAgIFNpZ25GaWVsZC51c2VJbWFnZVNpZ25EZWYgPSB1c2VJbWFnZVNpZ247XHJcbiAgICBTaWduRmllbGQudXNlUmVnU2lnbkRlZiA9IHVzZVJlZ1NpZ247XHJcblxyXG5cclxuICAgIHRoaXMubV91c2VEcmF3U2lnbiA9IHVzZURyYXdTaWduO1xyXG4gICAgdGhpcy5tX3VzZUltYWdlU2lnbiA9IHVzZUltYWdlU2lnbjtcclxuICAgIHRoaXMubV91c2VSZWdTaWduID0gdXNlUmVnU2lnbjtcclxuICAgIC8vcmVnU2lnbkFwaVxyXG4gICAgdGhpcy5tX3JlZ1NpZ25BcGlVcmwgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGZpZWxkTmFtZVxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5TaWduRmllbGQjZmllbGROYW1lXHJcbiAgICogQHJldHVybiB7U3RyaW5nfVxyXG4gICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtlYTrk5wg7YOA7J6F7J2YIOydtOumhFxyXG4gICAqIEBzdGF0aWNcclxuICAgKlxyXG4gICAqL1xyXG4gIHN0YXRpYyBmaWVsZE5hbWUoKSB7XHJcbiAgICByZXR1cm4gXCJTaWduRmllbGRcIjtcclxuICB9XHJcblxyXG4gIGFuY2VzdG9ycygpIHtcclxuICAgIHJldHVybiBbXCJTRlwiLCBcIkJGXCJdO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIHdpZHRoVmFsdWVcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuU2lnbkZpZWxkI3dpZHRoVmFsdWVcclxuICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE65Oc7J2YIOy0iOq4sCDqsIDroZwg6ri47J20XHJcbiAgICogQHJldHVybiB7TnVtYmVyfVxyXG4gICAqIEBzdGF0aWNcclxuICAgKlxyXG4gICAqL1xyXG4gIHN0YXRpYyB3aWR0aFZhbHVlKCkge1xyXG4gICAgcmV0dXJuIDE1MDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBoZWlnaHRWYWx1ZVxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5TaWduRmllbGQjaGVpZ2h0VmFsdWVcclxuICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE65Oc7J2YIOy0iOq4sCDshLjroZwg6ri47J20XHJcbiAgICogQHJldHVybiB7TnVtYmVyfVxyXG4gICAqIEBzdGF0aWNcclxuICAgKlxyXG4gICAqL1xyXG4gIHN0YXRpYyBoZWlnaHRWYWx1ZSgpIHtcclxuICAgIHJldHVybiA2MDtcclxuICB9XHJcblxyXG4gIGdldCBzaWduUGVuVGhpY2tuZXNzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMubV9zaWduUGVuVGhpY2tuZXNzO1xyXG4gIH1cclxuICBzZXQgc2lnblBlblRoaWNrbmVzcyhfX3NpZ25QZW5UaGlja25lc3MpIHtcclxuICAgIHRoaXMubV9zaWduUGVuVGhpY2tuZXNzID0gX19zaWduUGVuVGhpY2tuZXNzO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHNpZ25QZW5Db2xvcigpIHtcclxuICAgIHJldHVybiB0aGlzLm1fc2lnblBlbkNvbG9yO1xyXG4gIH1cclxuICBzZXQgc2lnblBlbkNvbG9yKF9fc2lnblBlbkNvbG9yKSB7XHJcbiAgICB0aGlzLm1fc2lnblBlbkNvbG9yID0gX19zaWduUGVuQ29sb3I7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIHNob3dGaWVsZEF0dHJpYnV0ZVxyXG4gICAqIEBzdGF0aWNcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuU2lnbkZpZWxkI3Nob3dGaWVsZEF0dHJpYnV0ZVxyXG4gICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSAg7ZWE65Oc7J2YIOyGjeyEsSDtjJ3sl4XssL3snYQg7ISk7KCV7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtFTEVNRU5UfSBub2RlICDsho3shLEg7Yyd7JeFIE5vZGVcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gaWRWYWx1ZSAgICAg7ZWE65Oc7J2YIGlk6rCSXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHJlcXVpcmVkVmFsdWUgICAgIO2VhOyImOyXrOu2gCDqsJJcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gb3duZXJJZFZhbHVlICAgICDshJzrqoXsnpAg7JWE7J2065SUXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHNpZ25QZW5UaGlja25lc3NWYWx1ZSAgICAg7IKs7J24IO2MrCDrkZDquahcclxuICAgKiBAcGFyYW0ge0FycmF5fSB1c2VyTGlzdCAgIOyEnOuqheyekCDrpqzsiqTtirhcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gdXNlRHJhd1NpZ24gICAgIO2VhOyImOyXrOu2gCDqsJJcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gdXNlSW1hZ2VTaWduICAgICDtlYTsiJjsl6zrtoAg6rCSXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHVzZVJlZ1NpZ24gICAgIO2VhOyImOyXrOu2gCDqsJJcclxuICAgKiBAcGFyYW0ge0NhbGxiYWNrfSBjaGFuZ2VFdmVudEZ1bmMgICAg7IaN7ISx6rCS7J20IOuzgO2VoOuVjCDtmLjstpzrkJjripQgY2FsbGJhY2sgZnVuY3Rpb25cclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgc3RhdGljIHNob3dGaWVsZEF0dHJpYnV0ZShcclxuICAgIG5vZGUsXHJcbiAgICBpZFZhbHVlLFxyXG4gICAgZmllbGRJZFZhbHVlLFxyXG4gICAgcmVxdWlyZWRWYWx1ZSxcclxuICAgIG93bmVySWRWYWx1ZSxcclxuICAgIHNpZ25QZW5UaGlja25lc3NWYWx1ZSxcclxuICAgIHVzZXJMaXN0LFxyXG4gICAgdXNlRHJhd1NpZ25WYWx1ZSxcclxuICAgIHVzZUltYWdlU2lnblZhbHVlLFxyXG4gICAgdXNlUmVnU2lnblZhbHVlLFxyXG4gICAgcmVnU2lnbkFwaVVybFZhbHVlLFxyXG4gICAgY2hhbmdlRXZlbnRGdW5jLFxyXG4gICAgc2lnblRhYlNob3dPcHRcclxuICApIHtcclxuICAgIHZhciBwYW5lbCA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVBhbmVsTm9kZSgpO1xyXG5cclxuICAgIHZhciByZXF1aXJlUm93ID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlVG9nZ2xlQnV0dG9uTm9kZShcclxuICAgICAgaWRWYWx1ZSxcclxuICAgICAgXCJyZXF1aXJlZFwiLFxyXG4gICAgICBcIlRlbXBsYXRlLmlzUmVxdWlyZWRcIixcclxuICAgICAgcmVxdWlyZWRWYWx1ZSxcclxuICAgICAgY2hhbmdlRXZlbnRGdW5jXHJcbiAgICApO1xyXG4gICAgcGFuZWwuYXBwZW5kQ2hpbGQocmVxdWlyZVJvdyk7XHJcblxyXG4gICAgbGV0IHVzZURlZmF1bE9wdGlvbk5vZGUgPSBVdGlscy5nZXRVc2VySW5mb09wdHNMaXN0Q291bnQoKSAhPT0gMTtcclxuICAgIHZhciBvd25lclNlbGVjdFJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVNlbGVjdE5vZGUoXHJcbiAgICAgIGlkVmFsdWUsXHJcbiAgICAgIFwib3duZXJJZFwiLFxyXG4gICAgICB1c2VyTGlzdCxcclxuICAgICAgXCJcIixcclxuICAgICAgdXNlRGVmYXVsT3B0aW9uTm9kZVxyXG4gICAgKTtcclxuICAgIHBhbmVsLmFwcGVuZENoaWxkKG93bmVyU2VsZWN0Um93KTtcclxuXHJcbiAgICBsZXQgb3duZXJTZWxlY3QgPSBvd25lclNlbGVjdFJvdy5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xyXG4gICAgJChvd25lclNlbGVjdCkuc2VsZWN0Mih7XHJcbiAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcclxuICAgICAgd2lkdGg6IFwiMTAwJVwiLFxyXG4gICAgfSk7XHJcbiAgICAkKG93bmVyU2VsZWN0KS52YWwob3duZXJJZFZhbHVlKS50cmlnZ2VyKFwiY2hhbmdlXCIpO1xyXG4gICAgJChvd25lclNlbGVjdCkub24oXCJjaGFuZ2VcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuXHJcbiAgICB2YXIgcGVuV2lkdGhTZWxlY3RSb3cgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVTZWxlY3ROb2RlKFxyXG4gICAgICBpZFZhbHVlLFxyXG4gICAgICBcInNpZ25QZW5UaGlja25lc3NcIixcclxuICAgICAgVXRpbHMuZ2V0U2lnblBlbldpZHRoQ29tYm9Cb3goKSxcclxuICAgICAgXCJUZW1wbGF0ZS5zaWduUGVuVGhpY2tuZXNzVGV4dFwiLFxyXG4gICAgICBmYWxzZVxyXG4gICAgKTtcclxuICAgIHBhbmVsLmFwcGVuZENoaWxkKHBlbldpZHRoU2VsZWN0Um93KTtcclxuXHJcbiAgICBsZXQgcGVuV2lkdGhTZWxlY3QgPSBwZW5XaWR0aFNlbGVjdFJvdy5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xyXG4gICAgJChwZW5XaWR0aFNlbGVjdCkuc2VsZWN0Mih7XHJcbiAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcclxuICAgICAgd2lkdGg6IFwiMTAwJVwiLFxyXG4gICAgfSk7XHJcbiAgICAkKHBlbldpZHRoU2VsZWN0KS52YWwoc2lnblBlblRoaWNrbmVzc1ZhbHVlKS50cmlnZ2VyKFwiY2hhbmdlXCIpO1xyXG4gICAgJChwZW5XaWR0aFNlbGVjdCkub24oXCJjaGFuZ2VcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuXHJcbiAgICB2YXIgZmllbGRJZFZhbHVlUm93ID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlSW5wdXROb2RlKFxyXG4gICAgICBpZFZhbHVlLFxyXG4gICAgICBcImZpZWxkSWRcIixcclxuICAgICAgXCJUZW1wbGF0ZS5maWVsZElkVGV4dFwiLFxyXG4gICAgICBmaWVsZElkVmFsdWUsXHJcbiAgICAgIFwiXCIsXHJcbiAgICAgIFwiXCIsXHJcbiAgICAgIGNoYW5nZUV2ZW50RnVuY1xyXG4gICAgKTtcclxuICAgIHBhbmVsLmFwcGVuZENoaWxkKGZpZWxkSWRWYWx1ZVJvdyk7XHJcblxyXG4gICAgLypcclxuICAgICAgICAxMjE0IGxidyDsi5zsnpFcclxuICAgICAgICAqL1xyXG5cclxuICAgIFxyXG4gICAgdGhpcy51c2VEcmF3U2lnbkRlZiA9IHNpZ25UYWJTaG93T3B0LnVzZURyYXdTaWduO1xyXG4gICAgdGhpcy51c2VJbWFnZVNpZ25EZWYgPSBzaWduVGFiU2hvd09wdC51c2VJbWFnZVNpZ247XHJcbiAgICB0aGlzLnVzZVJlZ1NpZ25EZWYgPSBzaWduVGFiU2hvd09wdC51c2VSZWdTaWduO1xyXG5cclxuICAgIGlmICh0aGlzLnVzZURyYXdTaWduRGVmID09IHVuZGVmaW5lZCl7XHJcbiAgICAgIHRoaXMudXNlRHJhd1NpZ25EZWYgPSBcInRydWVcIjtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnVzZUltYWdlU2lnbkRlZiA9PSB1bmRlZmluZWQpIHtcclxuICAgICAgdGhpcy51c2VJbWFnZVNpZ25EZWYgPSBcInRydWVcIjtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnVzZVJlZ1NpZ25EZWYgPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHRoaXMudXNlUmVnU2lnbkRlZiA9IFwidHJ1ZVwiO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgIC8vMS7tjpxcclxuICAgIGlmIChcInRydWVcIiA9PSB0aGlzLnVzZURyYXdTaWduRGVmIHx8IHVzZURyYXdTaWduVmFsdWUgPT0gXCJ0cnVlXCIpIHtcclxuICAgICAgdmFyIHVzZURyYXdTaWduUm93ID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlVG9nZ2xlQnV0dG9uTm9kZShcclxuICAgICAgICBpZFZhbHVlLFxyXG4gICAgICAgIFwidXNlRHJhd1NpZ25cIixcclxuICAgICAgICBcIlRlbXBsYXRlLmRyYXdTaWduVGV4dFwiLFxyXG4gICAgICAgIHVzZURyYXdTaWduVmFsdWUsXHJcbiAgICAgICAgY2hhbmdlRXZlbnRGdW5jXHJcbiAgICAgICk7XHJcbiAgICAgIHBhbmVsLmFwcGVuZENoaWxkKHVzZURyYXdTaWduUm93KTtcclxuICAgIH1cclxuXHJcbiAgICAvLzIuIOydtOuvuOyngFxyXG4gICAgaWYgKFwidHJ1ZVwiID09IHRoaXMudXNlSW1hZ2VTaWduRGVmIHx8IHVzZUltYWdlU2lnblZhbHVlID09IFwidHJ1ZVwiKSB7XHJcbiAgICAgIHZhciB1c2VJbWFnZVNpZ25Sb3cgPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVUb2dnbGVCdXR0b25Ob2RlKFxyXG4gICAgICAgIGlkVmFsdWUsXHJcbiAgICAgICAgXCJ1c2VJbWFnZVNpZ25cIixcclxuICAgICAgICBcIlRlbXBsYXRlLmltYWdlU2lnblRleHRcIixcclxuICAgICAgICB1c2VJbWFnZVNpZ25WYWx1ZSxcclxuICAgICAgICBjaGFuZ2VFdmVudEZ1bmNcclxuICAgICAgKTtcclxuICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQodXNlSW1hZ2VTaWduUm93KTtcclxuICAgIH1cclxuXHJcbiAgICAvLzMuIOuTseuhneuQnCDsnbTrr7jsp4BcclxuICAgIGlmIChcInRydWVcIiA9PSB0aGlzLnVzZVJlZ1NpZ25EZWYgfHwgdXNlUmVnU2lnblZhbHVlID09IFwidHJ1ZVwiKSB7XHJcbiAgICAgIHZhciB1c2VSZWdTaWduUm93ID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlVG9nZ2xlQnV0dG9uTm9kZShcclxuICAgICAgICBpZFZhbHVlLFxyXG4gICAgICAgIFwidXNlUmVnU2lnblwiLFxyXG4gICAgICAgIFwiVGVtcGxhdGUucmVnU2lnblRleHRcIixcclxuICAgICAgICB1c2VSZWdTaWduVmFsdWUsXHJcbiAgICAgICAgY2hhbmdlRXZlbnRGdW5jXHJcbiAgICAgICk7XHJcbiAgICAgIHBhbmVsLmFwcGVuZENoaWxkKHVzZVJlZ1NpZ25Sb3cpO1xyXG4gICAgfVxyXG4gICAgXHJcblxyXG4gICAgLyogMTIxNSDsoJzsmbhcclxuICAgIHZhciByZWdTaWduQXBpVXJsUm93ID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlSW5wdXROb2RlKFxyXG4gICAgICBpZFZhbHVlLFxyXG4gICAgICBcInJlZ1NpZ25BcGlVcmxcIixcclxuICAgICAgXCJUZW1wbGF0ZS5yZWdTaWduQXBpVXJsVGV4dFwiLFxyXG4gICAgICByZWdTaWduQXBpVXJsVmFsdWUsXHJcbiAgICAgIFwi65Ox66Gd65CcIOydtOuvuOyngCDshJzrqoXtg63sl5Ag7J2066+47KeA66W8IOu2iOufrOyYrCDsiJgg7J6I64+E66GdIOyEnOuyhOydmCBBUEkgVVJM7J2EIOyeheugpe2VqeuLiOuLpC5cIixcclxuICAgICAgXCJcIixcclxuICAgICAgY2hhbmdlRXZlbnRGdW5jXHJcbiAgICApO1xyXG4gICAgcGFuZWwuYXBwZW5kQ2hpbGQocmVnU2lnbkFwaVVybFJvdyk7XHJcbiAgICAqL1xyXG4gICAgLypcclxuICAgICAgICAxMjE0IGxidyDrgZ1cclxuICAgICAgICAqL1xyXG5cclxuICAgIHBhbmVsLnNldEF0dHJpYnV0ZShcIkZpZWxkLWlkLWxpc3RcIiwgaWRWYWx1ZSk7XHJcblxyXG4gICAgbm9kZS5jbGFzc05hbWUgPSBcIkVkaXRvci1BdHRyaWJ1dGVcIjtcclxuICAgIG5vZGUuY2xhc3NMaXN0LmFkZChcIlNpZ24tRmllbGRcIik7XHJcbiAgICBub2RlLmFwcGVuZENoaWxkKHBhbmVsKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBzaG93RmllbGRzQXR0cmlidXRlXHJcbiAgICogQHN0YXRpY1xyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5TaWduRmllbGQjc2hvd0ZpZWxkc0F0dHJpYnV0ZVxyXG4gICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtlYTrk5zsnZgg7IaN7ISxIO2MneyXheywveydhCDshKTsoJXtlZzri6QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0VMRU1FTlR9IG93bmVyTm9kZSAg7IaN7ISxIO2MneyXhSBOb2RlXHJcbiAgICogQHBhcmFtIHtBcnJheX0gZmllbGRMaXN0ICAgICDtlYTrk5zrk6TsnZgg66as7Iqk7Yq4XHJcbiAgICogQHBhcmFtIHtFTEVNRU5UfSBhdHRyTm9kZSAgICDsho3shLEg7Yyd7JeF7J2YIE5vZGVcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWFpbkdyb3VwICAgIFNWR+ydmCDrqZTsnbggRWxlbWVudFxyXG4gICAqIEBwYXJhbSB7QXJyYXl9IHVzZXJMaXN0ICAg7ISc66qF7J6QIOumrOyKpO2KuFxyXG4gICAqIEBwYXJhbSB7QXJyYXl9IGR2T3B0aW9uTGlzdCAgIOq4sOuzuOqwkiDshKDtg50g66as7Iqk7Yq4XHJcbiAgICogQHBhcmFtIHtDYWxsYmFja30gY2hhbmdlRXZlbnRGdW5jICAgIOyGjeyEseqwkuydtCDrs4DtlaDrlYwg7Zi47Lac65CY64qUIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIHN0YXRpYyBzaG93RmllbGRzQXR0cmlidXRlKFxyXG4gICAgb3duZXJOb2RlLFxyXG4gICAgZmllbGRMaXN0LFxyXG4gICAgYXR0ck5vZGUsXHJcbiAgICBtYWluR3JvdXAsXHJcbiAgICB1c2VyTGlzdCxcclxuICAgIGR2T3B0aW9uTGlzdCxcclxuICAgIGNoYW5nZUV2ZW50RnVuYyxcclxuICAgIHNpZ25UYWJTaG93T3B0XHJcbiAgKSB7XHJcbiAgICBsZXQgbm9kZSA9IGF0dHJOb2RlO1xyXG4gICAgaWYgKGF0dHJOb2RlID09PSBudWxsIHx8IFV0aWxzLmlzRW1wdHlPYmplY3QoYXR0ck5vZGUpKSB7XHJcbiAgICAgIGNvbnN0IGJib3ggPSBVdGlscy5tZXJnZUZpZWxkc0JCb3goZmllbGRMaXN0KTtcclxuICAgICAgbm9kZSA9IFV0aWxzLmNyZWF0ZUF0dHJidXRlUG9wdXAob3duZXJOb2RlLCBiYm94KTtcclxuICAgICAgVXRpbHMucmVwb3NpdGlvbkZpZWxkRGVsZXRlQnRuKG93bmVyTm9kZSwgYmJveC54LCBiYm94LnksIGJib3gud2lkdGgpO1xyXG4gICAgfVxyXG4gICAgVXRpbHMucmVtb3ZlQWxsQ2hpbGROb2RlKG5vZGUpO1xyXG5cclxuICAgIHZhciBpZFZhbHVlQXJyID0gW107XHJcbiAgICBmaWVsZExpc3QuZm9yRWFjaCgoZmllbGQpID0+IHtcclxuICAgICAgaWRWYWx1ZUFyci5wdXNoKGZpZWxkLmlkKTtcclxuICAgIH0pO1xyXG4gICAgdmFyIGlkVmFsdWUgPSBpZFZhbHVlQXJyLmpvaW4oKTtcclxuXHJcbiAgICB2YXIgb3duZXJJZFZhbHVlID0gZmllbGRMaXN0WzBdLm93bmVySWQ7XHJcbiAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICBpZiAoZmllbGRMaXN0W2lkeF0ub3duZXJJZCAhPT0gb3duZXJJZFZhbHVlKSB7XHJcbiAgICAgICAgb3duZXJJZFZhbHVlID0gXCJcIjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBmaWVsZElkVmFsdWUgPSBmaWVsZExpc3RbMF0uZmllbGRJZDtcclxuICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5maWVsZElkICE9PSBmaWVsZElkVmFsdWUpIHtcclxuICAgICAgICBmaWVsZElkVmFsdWUgPSBcIlwiO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHJlcXVpcmVkVmFsdWUgPSBmaWVsZExpc3RbMF0ucmVxdWlyZWQ7XHJcbiAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICBpZiAoZmllbGRMaXN0W2lkeF0ucmVxdWlyZWQgIT09IHJlcXVpcmVkVmFsdWUpIHtcclxuICAgICAgICByZXF1aXJlZFZhbHVlID0gXCJcIjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBzaWduUGVuVGhpY2tuZXNzVmFsdWUgPSBmaWVsZExpc3RbMF0uc2lnblBlblRoaWNrbmVzcztcclxuICAgIGZpZWxkTGlzdC5mb3JFYWNoKChmaWVsZCkgPT4ge1xyXG4gICAgICBpZiAoZmllbGQuc2lnblBlblRoaWNrbmVzcyAhPT0gc2lnblBlblRoaWNrbmVzc1ZhbHVlKSB7XHJcbiAgICAgICAgc2lnblBlblRoaWNrbmVzc1ZhbHVlID0gXCJcIjtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGxldCB1c2VEcmF3U2lnblZhbHVlID0gZmllbGRMaXN0WzBdLm1fdXNlRHJhd1NpZ247XHJcbiAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICBpZiAoZmllbGRMaXN0W2lkeF0ubV91c2VEcmF3U2lnbiAhPT0gdXNlRHJhd1NpZ25WYWx1ZSkge1xyXG4gICAgICAgIHVzZURyYXdTaWduVmFsdWUgPSBcIlwiO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHVzZUltYWdlU2lnblZhbHVlID0gZmllbGRMaXN0WzBdLm1fdXNlSW1hZ2VTaWduO1xyXG4gICAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLm1fdXNlSW1hZ2VTaWduICE9PSB1c2VJbWFnZVNpZ25WYWx1ZSkge1xyXG4gICAgICAgIHVzZUltYWdlU2lnblZhbHVlID0gXCJcIjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxldCB1c2VSZWdTaWduVmFsdWUgPSBmaWVsZExpc3RbMF0ubV91c2VSZWdTaWduO1xyXG4gICAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLm1fdXNlUmVnU2lnbiAhPT0gdXNlUmVnU2lnblZhbHVlKSB7XHJcbiAgICAgICAgdXNlUmVnU2lnblZhbHVlID0gXCJcIjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciByZWdTaWduQXBpVXJsVmFsdWUgPSBmaWVsZExpc3RbMF0ubV9yZWdTaWduQXBpVXJsO1xyXG4gICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLm1fcmVnU2lnbkFwaVVybCAhPT0gcmVnU2lnbkFwaVVybFZhbHVlKSB7XHJcbiAgICAgICAgcmVnU2lnbkFwaVVybFZhbHVlID0gXCJcIjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIFNpZ25GaWVsZC5zaG93RmllbGRBdHRyaWJ1dGUoXHJcbiAgICAgIG5vZGUsXHJcbiAgICAgIGlkVmFsdWUsXHJcbiAgICAgIGZpZWxkSWRWYWx1ZSxcclxuICAgICAgcmVxdWlyZWRWYWx1ZSxcclxuICAgICAgb3duZXJJZFZhbHVlLFxyXG4gICAgICBzaWduUGVuVGhpY2tuZXNzVmFsdWUsXHJcbiAgICAgIHVzZXJMaXN0LFxyXG4gICAgICB1c2VEcmF3U2lnblZhbHVlLFxyXG4gICAgICB1c2VJbWFnZVNpZ25WYWx1ZSxcclxuICAgICAgdXNlUmVnU2lnblZhbHVlLFxyXG4gICAgICByZWdTaWduQXBpVXJsVmFsdWUsXHJcbiAgICAgIGNoYW5nZUV2ZW50RnVuYyxcclxuICAgICAgc2lnblRhYlNob3dPcHRcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gZ2V0U1ZHRmllbGRPYmplY3RcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUuSW1hZ2VGaWVsZCNtYWtlU1ZHVGV4dFxyXG4gICAqIEBtZW1iZXJPZiBtb2R1bGU6VGVtcGxhdGUuSW1hZ2VGaWVsZFxyXG4gICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zsnZgg7KKF66WY66W8IO2RnO2YhO2VmOuKlCBTVkcgVGV4dCBlbGVtZW50XHJcbiAgICpcclxuICAgKiBAcGFyYW0ge051bWJlcn0gc2NhbGUg7ZiE7J6sIFBERuydmCBTY2FsZVxyXG4gICAqIEByZXR1cm4ge09iamVjdH0gU1ZHIE5vZGUgRWxlbWVudFxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBtYWtlU1ZHVGV4dChzY2FsZSkge1xyXG4gICAgbGV0IHZhbHVlID0gdGhpcy5tX2ZpZWxkSWQ7XHJcbiAgICB2YXIgdGV4dEZvbnRDb2xvciA9IFwiZmlsbD0nXCIgKyB0aGlzLmZvbnRDb2xvciArIFwiJyBcIjtcclxuXHJcbiAgICBsZXQgdGV4dFBvcyA9ICcgeD1cIjUwJVwiICBkeT1cIjAuMzVlbVwiIHRleHQtYW5jaG9yPVwibWlkZGxlXCIgJztcclxuICAgIGlmICh0aGlzLnRleHRBbGlnbiA9PT0gXCJsZWZ0XCIpIHtcclxuICAgICAgdGV4dFBvcyA9ICcgeD1cIjMlXCIgIGR5PVwiMC4zNWVtXCIgdGV4dC1hbmNob3I9XCJzdGFydFwiICc7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMudGV4dEFsaWduID09PSBcInJpZ2h0XCIpIHtcclxuICAgICAgdGV4dFBvcyA9ICcgeD1cIjk3JVwiIGR5PVwiMC4zNWVtXCIgdGV4dC1hbmNob3I9XCJlbmRcIiAnO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB0ZXh0VmVydGljYWxQb3MgPSAneT1cIjUwJVwiJztcclxuXHJcbiAgICBsZXQgZm9udEluZm8gPSAnIGZvbnQtc2l6ZT1cIicgKyB0aGlzLmZvbnRTaXplICsgJ3B4XCIgJztcclxuICAgIGxldCB0ZXh0T2JqID1cclxuICAgICAgXCI8dGV4dFwiICtcclxuICAgICAgdGV4dFBvcyArXHJcbiAgICAgIHRleHRWZXJ0aWNhbFBvcyArXHJcbiAgICAgIGZvbnRJbmZvICtcclxuICAgICAgdGV4dEZvbnRDb2xvciArXHJcbiAgICAgIFwiPlwiICtcclxuICAgICAgdmFsdWUgK1xyXG4gICAgICBcIjwvdGV4dD5cIjtcclxuICAgIGNvbnN0IGZvYmplY3RTVkcgPVxyXG4gICAgICAnPHN2ZyB4PVwiJyArXHJcbiAgICAgIHRoaXMueCArXHJcbiAgICAgICdweFwiIHk9XCInICtcclxuICAgICAgdGhpcy55ICtcclxuICAgICAgJ3B4XCIgd2lkdGg9XCInICtcclxuICAgICAgdGhpcy53aWR0aCAqIHNjYWxlICtcclxuICAgICAgJ3B4XCIgaGVpZ2h0PVwiJyArXHJcbiAgICAgIHRoaXMuaGVpZ2h0ICogc2NhbGUgK1xyXG4gICAgICAncHhcIj48ZyAgPicgK1xyXG4gICAgICB0ZXh0T2JqICtcclxuICAgICAgXCI8L2c+PC9zdmc+XCI7XHJcblxyXG4gICAgcmV0dXJuIGZvYmplY3RTVkc7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gZ2V0U1ZHRmllbGRPYmplY3RcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUuUmFkaW9GaWVsZCNnZXRTVkdGaWVsZE9iamVjdFxyXG4gICAqIEBtZW1iZXJPZiBtb2R1bGU6VGVtcGxhdGUvRmllbGQuU2lnbkZpZWxkXHJcbiAgICogQGRlc2NyaXB0aW9uICDtlYTrk5zsnZgg7KCV67O066W8IOqwgOyngOqzoCBTVkcgRWxlbWVudOulvCDsg53shLHtlZzri6QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdH0gY2FudmFzIFNuYXAgU1ZH7J2YIENhbnZhcyBPYmplY3RcclxuICAgKiBAcGFyYW0ge09iamVjdH0gbWFpbkdyb3VwICAgU1ZH7J2YIOuplOyduCBOb2RlXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHNjYWxlICDtmITsnqwgUERG7J2YIFNjYWxlXHJcbiAgICogQHBhcmFtIHtFTEVNRU5UfSBvd25lck5vZGUgICAg7ZW064u5IO2UhOuhnOygne2KuOydmCDstZzsg4Hri6ggRWxlbWVudOulvCDqsJDsi7jqs6Ag7J6I64qUIEVsZW1lbnRcclxuICAgKiBAcGFyYW0ge0NhbGxiYWNrfSByZW1vdmVEcmFnT3Zlckdyb3VwRnVuYyAgICAg65Oc656Y6re4IOuQmOyWtCDshKDtg53rkJjslrTsp4QgRmllbGQgR3JvdXDsnYQg7KCc6rGw7ZWY64qUIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICogQHBhcmFtIHtDYWxsYmFja30gY2hhbmdlVmFsdWVFdmVudEZ1bmMgICAgIOyGjeyEseqwkuydtCDrs4DtlaDrlYwg7Zi47Lac65CY64qUIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICogQHBhcmFtIHtDYWxsYmFja30gY2hhbmdlRnJlZVRyYW5zZm9ybUZ1bmMgICAgRnJlZVRyYW5zZm9ybeydhCDri6Tsi5wg7IOd7ISx7ZWY6riwIOychO2VnCBjYWxsYmFjayBmdW5jdGlvblxyXG4gICAqIEByZXR1cm4gU1ZHIE5vZGUgRWxlbWVudFxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBnZXRTVkdGaWVsZE9iamVjdChcclxuICAgIGNhbnZhcyxcclxuICAgIG1haW5Hcm91cCxcclxuICAgIHNjYWxlLFxyXG4gICAgb3duZXJOb2RlLFxyXG4gICAgcmVtb3ZlRHJhZ092ZXJHcm91cEZ1bmMsXHJcbiAgICBjaGFuZ2VWYWx1ZUV2ZW50RnVuYyxcclxuICAgIGNoYW5nZUZyZWVUcmFuc2Zvcm1GdW5jXHJcbiAgKSB7XHJcbiAgICBsZXQgZ3JvdXAgPSBtYWluR3JvdXAuZ3JvdXAoKTtcclxuICAgIGdyb3VwLmF0dHIoe1xyXG4gICAgICBpZDogdGhpcy5pZCArIFwiR3JvdXBcIixcclxuICAgICAgY3Vyc29yOiBcIm1vdmVcIixcclxuICAgIH0pO1xyXG4gICAgbGV0IHJlY3QgPSBjYW52YXMucmVjdChcclxuICAgICAgdGhpcy54LFxyXG4gICAgICB0aGlzLnksXHJcbiAgICAgIHRoaXMud2lkdGggKiBzY2FsZSxcclxuICAgICAgdGhpcy5oZWlnaHQgKiBzY2FsZVxyXG4gICAgKTtcclxuICAgIHJlY3QuYXR0cih7XHJcbiAgICAgIGlkOiB0aGlzLmlkLFxyXG4gICAgICBcImZpbGwtb3BhY2l0eVwiOiBcIjAuNlwiLFxyXG4gICAgICBmaWxsOiBcIiNmZmFjN2ZcIixcclxuICAgIH0pO1xyXG4gICAgZ3JvdXAuYXBwZW5kKHJlY3QpO1xyXG4gICAgY29uc3QgcCA9IFNuYXAucGFyc2UodGhpcy5tYWtlU1ZHVGV4dChzY2FsZSkpO1xyXG4gICAgZ3JvdXAuYXBwZW5kKHApO1xyXG5cclxuICAgIGdyb3VwLmhvdmVyKFxyXG4gICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gZl9pblxyXG4gICAgICB9LFxyXG4gICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gZl9vdXRcclxuICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICBsZXQgX3NpZ25GaWVsZCA9IHRoaXM7XHJcbiAgICBsZXQgbW91c2VQb3MgPSB7IHg6IDAsIHk6IDAgfTtcclxuICAgIGdyb3VwLm1vdXNlZG93bihmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgIG1vdXNlUG9zLnggPSBldnQucGFnZVg7XHJcbiAgICAgIG1vdXNlUG9zLnkgPSBldnQucGFnZVk7XHJcbiAgICAgIGNvbnN0IGl0ZW1zID0gbWFpbkdyb3VwLnNlbGVjdEFsbChcImdcIik7XHJcbiAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoZWxlbWVudCAhPT0gZ3JvdXApIHtcclxuICAgICAgICAgIGlmICghVXRpbHMuaXNFbXB0eU9iamVjdChlbGVtZW50LmZyZWVUcmFuc2Zvcm0pKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuZnJlZVRyYW5zZm9ybS5oaWRlUmVzaXplSGFuZGxlcigpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIGlmICghVXRpbHMuaXNFbXB0eU9iamVjdChncm91cC5mcmVlVHJhbnNmb3JtKSkge1xyXG4gICAgICAgIGdyb3VwLmZyZWVUcmFuc2Zvcm0uc2hvd1Jlc2l6ZUhhbmRsZXIoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjaGFuZ2VGcmVlVHJhbnNmb3JtRnVuYyhncm91cCwgcmVjdC5hdHRyKFwid2lkdGhcIiksIHJlY3QuYXR0cihcImhlaWdodFwiKSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGdyb3VwLm1vdXNldXAoZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICBpZiAoZ3JvdXAucGFyZW50KCkuYXR0cihcImlkXCIpID09PSBDT05TVEFOVFMuRFJBR19CT1hfTkFNRSkge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIE1hdGguYWJzKG1vdXNlUG9zLnggLSBldnQucGFnZVgpID4gQ09OU1RBTlRTLk1JTklNVU1fRFJBR19TSVpFIHx8XHJcbiAgICAgICAgICBNYXRoLmFicyhtb3VzZVBvcy55IC0gZXZ0LnBhZ2VZKSA+IENPTlNUQU5UUy5NSU5JTVVNX0RSQUdfU0laRVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZW1vdmVEcmFnT3Zlckdyb3VwRnVuYy5jYWxsKCk7XHJcbiAgICAgICAgY29uc3QgaXRlbXMgPSBtYWluR3JvdXAuc2VsZWN0QWxsKFwiZ1wiKTtcclxuICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICBpZiAoZWxlbWVudCAhPT0gZ3JvdXApIHtcclxuICAgICAgICAgICAgaWYgKCFVdGlscy5pc0VtcHR5T2JqZWN0KGVsZW1lbnQuZnJlZVRyYW5zZm9ybSkpIHtcclxuICAgICAgICAgICAgICBlbGVtZW50LmZyZWVUcmFuc2Zvcm0uaGlkZVJlc2l6ZUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICghVXRpbHMuaXNFbXB0eU9iamVjdChncm91cC5mcmVlVHJhbnNmb3JtKSkge1xyXG4gICAgICAgICAgZ3JvdXAuZnJlZVRyYW5zZm9ybS5zaG93UmVzaXplSGFuZGxlcigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjaGFuZ2VGcmVlVHJhbnNmb3JtRnVuYyhcclxuICAgICAgICAgICAgZ3JvdXAsXHJcbiAgICAgICAgICAgIHJlY3QuYXR0cihcIndpZHRoXCIpLFxyXG4gICAgICAgICAgICByZWN0LmF0dHIoXCJoZWlnaHRcIilcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF9zaWduRmllbGQuY29uc3RydWN0b3Iuc2hvd0ZpZWxkc0F0dHJpYnV0ZShcclxuICAgICAgICAgIG93bmVyTm9kZSxcclxuICAgICAgICAgIFtfc2lnbkZpZWxkXSxcclxuICAgICAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgICAgIG1haW5Hcm91cCxcclxuICAgICAgICAgIFV0aWxzLmdldFVzZXJJbmZvT3B0c0xpc3QoKSxcclxuICAgICAgICAgIFV0aWxzLmdldERWRmllbGRPcHRzTGlzdCgpLFxyXG4gICAgICAgICAgY2hhbmdlVmFsdWVFdmVudEZ1bmMsXHJcbiAgICAgICAgICBVdGlscy5nZXRTaWduVGFiU2hvd09wdCgpLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgX3NpZ25GaWVsZC5jb25zdHJ1Y3Rvci5zaG93RmllbGRzQXR0cmlidXRlKFxyXG4gICAgICAgICAgb3duZXJOb2RlLFxyXG4gICAgICAgICAgW19zaWduRmllbGRdLFxyXG4gICAgICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgbWFpbkdyb3VwLFxyXG4gICAgICAgICAgVXRpbHMuZ2V0VXNlckluZm9PcHRzTGlzdCgpLFxyXG4gICAgICAgICAgVXRpbHMuZ2V0RFZGaWVsZE9wdHNMaXN0KCksXHJcbiAgICAgICAgICBjaGFuZ2VWYWx1ZUV2ZW50RnVuYyxcclxuICAgICAgICAgIFV0aWxzLmdldFNpZ25UYWJTaG93T3B0KCksXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZ3JvdXA7XHJcbiAgfVxyXG59XHJcbiIsIlxyXG4vKipcclxuICogQG1vZHVsZSBUZW1wbGF0ZS9GaWVsZFxyXG4qL1xyXG5cclxuaW1wb3J0IHsgQmFzZUZpZWxkIH0gZnJvbSAnLi9CYXNlRmllbGQnO1xyXG5pbXBvcnQge1V0aWxzfSBmcm9tICcuLy4uL3V0aWxzL3V0aWxzLmpzJztcclxuaW1wb3J0IHtDT05TVEFOVFN9IGZyb20gJy4vLi4vQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IENQIGZyb20gJy4vLi4vdXRpbHMvY29sb3ItcGlja2VyJztcclxuXHJcbi8qKlxyXG4gKiBA7YWN7Iqk7Yq4IO2VhOuTnOydmCDquLDrs7jsnbQg65CY64qUIENsYXNzXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGZpZWxkTmFtZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRCYXNlRmllbGQjZmllbGROYW1lfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSB3aWR0aFZhbHVlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuVGV4dEJhc2VGaWVsZCN3aWR0aFZhbHVlfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBoZWlnaHRWYWx1ZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRCYXNlRmllbGQjaGVpZ2h0VmFsdWV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IG5lZWRUZXh0U3ZnUmVmcmVzaCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRCYXNlRmllbGQjbmVlZFRleHRTdmdSZWZyZXNofVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBtYWtlU1ZHVGV4dCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRCYXNlRmllbGQjbWFrZVNWR1RleHR9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGdldFNWR0ZpZWxkT2JqZWN0IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuVGV4dEJhc2VGaWVsZCNnZXRTVkdGaWVsZE9iamVjdH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gY2hhbmdlVGV4dEVsZW1lbnQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5UZXh0QmFzZUZpZWxkI2NoYW5nZVRleHRFbGVtZW50fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBzaG93RmllbGRBdHRyaWJ1dGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5UZXh0QmFzZUZpZWxkI3Nob3dGaWVsZEF0dHJpYnV0ZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gc2hvd0ZpZWxkc0F0dHJpYnV0ZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRCYXNlRmllbGQjc2hvd0ZpZWxkc0F0dHJpYnV0ZX1cclxuICpcclxuICogQGF1Z21lbnRzIEJhc2VGaWVsZCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLkJhc2VGaWVsZCNCYXNlRmllbGR9XHJcbiAqIEBGaWxlTmFtZSBUZXh0QmFzZUZpZWxkLmpzXHJcbiAqIEBzaW5jZSAyMDIxLjA1LjMxXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVGV4dEJhc2VGaWVsZCBleHRlbmRzIEJhc2VGaWVsZCB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAqIEBwYXJhbSBpZCDtlYTrk5zsnZggSURcclxuICAgICAqIEBwYXJhbSBwYWdlTm8g7ZWE65Oc6rCAIOyGje2VnCDtjpjsnbTsp4Ag67KI7Zi4XHJcbiAgICAgKiBAcGFyYW0geCDtlYTrk5zsnZggc3Zn7IOB7J2YIHjsooztkZxcclxuICAgICAqIEBwYXJhbSB5IO2VhOuTnOydmCBzdmfsg4HsnZggeeyijO2RnFxyXG4gICAgICogQHBhcmFtIHdpZHRoIO2VhOuTnOydmCDqsIDroZzquLjsnbRcclxuICAgICAqIEBwYXJhbSBoZWlnaHQg7ZWE65Oc7J2YIOyEuOuhnOq4uOydtFxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoaWQsIHBhZ2VObywgeCwgeSwgd2lkdGgsIGhlaWdodCkge1xyXG4gICAgICAgIHN1cGVyKGlkLCBwYWdlTm8sIHgsIHksIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgIHRoaXMubV90eXBlID0gVGV4dEJhc2VGaWVsZC5maWVsZE5hbWUoKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuVGV4dEJhc2VGaWVsZCNtX3BsYWNlSG9sZGVyXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIHBsYWNlSG9sZGVyXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKiAvLyBnZXR0ZXIgcGxhY2VIb2xkZXIoKVxyXG4gICAgICAgICAqIC8vIHNldHRlciBwbGFjZUhvbGRlcih2YWwpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tX3BsYWNlSG9sZGVyID0gJyc7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRCYXNlRmllbGQjbV9kZWZhdWx0VmFsdWVcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24g7YWN7Iqk7Yq4IOq4sOuzuOqwkiAgSURcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciBkZWZhdWx0VmFsdWUoKVxyXG4gICAgICAgICAqIC8vIHNldHRlciBkZWZhdWx0VmFsdWUodmFsKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubV9kZWZhdWx0VmFsdWUgPSBcIlwiO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5UZXh0QmFzZUZpZWxkI21fZGVmYXVsdFZhbHVlVGV4dFxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiAg7YWN7Iqk7Yq4IOq4sOuzuOqwkuydhCDtkZztmITtlZjripQg7YWN7Iqk7Yq4XHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKiAvLyBnZXR0ZXIgZGVmYXVsdFZhbHVlVGV4dCgpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIGRlZmF1bHRWYWx1ZVRleHQodmFsKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubV9kZWZhdWx0VmFsdWVUZXh0ID0gXCJcIjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuVGV4dEJhc2VGaWVsZCNtX3RleHRBbGlnblxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiDthY3siqTtirjsnZgg6rCA66GcIOygleugrOqwklxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIHRleHRBbGlnbigpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIHRleHRBbGlnbih2YWwpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tX3RleHRBbGlnbiA9IFwibGVmdFwiO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5UZXh0QmFzZUZpZWxkI21fdGV4dFZldGljYWxBbGlnblxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiDthY3siqTtirjsnZgg7IS466GcIOygleugrOqwklxyXG4gICAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAgICogLy8gZ2V0dGVyIHRleHRWZXRpY2FsQWxpZ24oKVxyXG4gICAgICAgICAqIC8vIHNldHRlciB0ZXh0VmV0aWNhbEFsaWduKHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1fdGV4dFZldGljYWxBbGlnbiA9IFwibWlkZGxlXCI7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRCYXNlRmllbGQjbV9ib2xkXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIO2FjeyKpO2KuOydmCDrs7zrk5wg7Jes67aAXHJcbiAgICAgICAgICogQGV4YW1wbGVcclxuICAgICAgICAgKiAvLyBnZXR0ZXIgYm9sZCgpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIGJvbGQodmFsKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubV9ib2xkID0gXCJmYWxzZVwiO1xyXG4gICAgICAgIHRoaXMubV9raW5kID0gXCJcIjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiB3aWR0aFZhbHVlXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuVGV4dEJhc2VGaWVsZCN3aWR0aFZhbHVlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE65Oc7J2YIOy0iOq4sCDqsIDroZwg6ri47J20XHJcbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9XHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgd2lkdGhWYWx1ZSgpIHtcclxuICAgICAgICByZXR1cm4gMTUwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIGhlaWdodFZhbHVlXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRmllbGQuVGV4dEJhc2VGaWVsZCNoZWlnaHRWYWx1ZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOuTnOydmCDstIjquLAg7IS466GcIOq4uOydtFxyXG4gICAgICogQHJldHVybiB7TnVtYmVyfVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGhlaWdodFZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybiA0MDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiBmaWVsZE5hbWVcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5UZXh0QmFzZUZpZWxkI2ZpZWxkTmFtZVxyXG4gICAgICogQHJldHVybiB7U3RyaW5nfVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpICDtlYTrk5wg7YOA7J6F7J2YIOydtOumhFxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZpZWxkTmFtZSgpIHtcclxuICAgICAgICByZXR1cm4gXCJUZXh0QmFzZUZpZWxkXCI7XHJcbiAgICB9XHJcblxyXG4gICAgYW5jZXN0b3JzKCkge1xyXG4gICAgICAgIHJldHVybiBbIFwiVEJGXCIsIFwiQkZcIl07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHBsYWNlSG9sZGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fcGxhY2VIb2xkZXI7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHBsYWNlSG9sZGVyKF9fcGxhY2VIb2xkZXIpIHtcclxuICAgICAgICB0aGlzLm1fcGxhY2VIb2xkZXIgPSBfX3BsYWNlSG9sZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBkZWZhdWx0VmFsdWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV9kZWZhdWx0VmFsdWU7XHJcbiAgICB9XHJcbiAgICBzZXQgZGVmYXVsdFZhbHVlKF9fZGVmYXVsdFZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5tX2RlZmF1bHRWYWx1ZSA9IF9fZGVmYXVsdFZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBkZWZhdWx0VmFsdWVUZXh0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fZGVmYXVsdFZhbHVlVGV4dDtcclxuICAgIH1cclxuICAgIHNldCBkZWZhdWx0VmFsdWVUZXh0KF9fZGVmYXVsdFZhbHVlVGV4dCkge1xyXG4gICAgICAgIHRoaXMubV9kZWZhdWx0VmFsdWVUZXh0ID0gX19kZWZhdWx0VmFsdWVUZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB0ZXh0QWxpZ24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV90ZXh0QWxpZ247XHJcbiAgICB9XHJcbiAgICBzZXQgdGV4dEFsaWduKF9fdGV4dEFsaWduKSB7XHJcbiAgICAgICAgdGhpcy5tX3RleHRBbGlnbiA9IF9fdGV4dEFsaWduO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB0ZXh0VmV0aWNhbEFsaWduKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fdGV4dFZldGljYWxBbGlnbjtcclxuICAgIH1cclxuICAgIHNldCB0ZXh0VmV0aWNhbEFsaWduKF9fdGV4dFZldGljYWxBbGlnbikge1xyXG4gICAgICAgIHRoaXMubV90ZXh0VmV0aWNhbEFsaWduID0gX190ZXh0VmV0aWNhbEFsaWduO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpc0JvbGQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV9ib2xkO1xyXG4gICAgfVxyXG4gICAgc2V0IGlzQm9sZChfX2JvbGQpIHtcclxuICAgICAgICB0aGlzLm1fYm9sZCA9IF9fYm9sZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiBuZWVkVGV4dFN2Z1JlZnJlc2hcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5UZXh0QmFzZUZpZWxkI25lZWRUZXh0U3ZnUmVmcmVzaFxyXG4gICAgICogQGRlc2NyaXB0aW9uICAoU3RhdGljKSDtlbTri7ntlZjripQg7ZWE65Oc7J2YIOyGjeyEseydtCBTVkfsnZgg7YWN7Iqk7Yq4IE5vZGXrpbwg67OA6rK97ZW07JW865CY64qU7KeAIOyytO2BrO2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0geyBTdHJpbmd9IGZpZWxkUHJvcGV0eU5hbWUg7ZWE65Oc7J2YIOyGjeyEseqwklxyXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0g7YWN7Iqk7Yq466W8IOyDiOuhnCDqt7jroKTslbzrkJjripQg7ZWE65Oc7J2YIOqyveyasCBUUlVF66W8IOumrO2EtO2VnOuLpC5cclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIG5lZWRUZXh0U3ZnUmVmcmVzaChmaWVsZFByb3BldHlOYW1lKSB7XHJcbiAgICAgICAgaWYgKGZpZWxkUHJvcGV0eU5hbWUgPT09IFwiZGVmYXVsdFZhbHVlXCIgfHxcclxuICAgICAgICAgICAgZmllbGRQcm9wZXR5TmFtZSA9PT0gXCJ2YWx1ZVwiIHx8XHJcbiAgICAgICAgICAgIGZpZWxkUHJvcGV0eU5hbWUgPT09IFwiZmllbGRJZFwiIHx8XHJcbiAgICAgICAgICAgIGZpZWxkUHJvcGV0eU5hbWUgPT09IFwicGxhY2VIb2xkZXJcIiB8fFxyXG4gICAgICAgICAgICBmaWVsZFByb3BldHlOYW1lID09PSBcInRleHRBbGlnblwiIHx8XHJcbiAgICAgICAgICAgIGZpZWxkUHJvcGV0eU5hbWUgPT09IFwiYm9sZFwiIHx8XHJcbiAgICAgICAgICAgIGZpZWxkUHJvcGV0eU5hbWUgPT09IFwiZm9udFNpemVcIiB8fFxyXG4gICAgICAgICAgICBmaWVsZFByb3BldHlOYW1lID09PSBcImZvbnROYW1lXCIgfHxcclxuICAgICAgICAgICAgZmllbGRQcm9wZXR5TmFtZSA9PT0gXCJyYWRpb1R5cGVcIiB8fFxyXG4gICAgICAgICAgICBmaWVsZFByb3BldHlOYW1lID09PSBcImZvbnRDb2xvclwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gbWFrZVNWR1RleHRcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5UZXh0QmFzZUZpZWxkI21ha2VTVkdUZXh0XHJcbiAgICAgKiBAbWVtYmVyT2YgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRCYXNlRmllbGRcclxuICAgICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zsnZgg7KKF66WY66W8IO2RnO2YhO2VmOuKlCBTVkcgVGV4dCBlbGVtZW50XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHNjYWxlIO2YhOyerCBQREbsnZggU2NhbGVcclxuICAgICAqIEByZXR1cm4ge09iamVjdH0gU1ZHIE5vZGUgRWxlbWVudFxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBtYWtlU1ZHVGV4dChzY2FsZSkge1xyXG4gICAgICAgIGxldCB2YWx1ZSA9IHRoaXMuZGVmYXVsdFZhbHVlVGV4dDtcclxuICAgICAgICBpZiAodmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgIHZhbHVlID0gdGhpcy5tX2ZpZWxkSWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB0ZXh0Rm9udENvbG9yID0gXCJmaWxsPSdcIiArIHRoaXMuZm9udENvbG9yICsgXCInIFwiO1xyXG4gXHJcbiAgICAgICAgbGV0IHRleHRQb3MgPSAnIHg9XCI1MCVcIiAgZHk9XCIwLjM1ZW1cIiB0ZXh0LWFuY2hvcj1cIm1pZGRsZVwiICdcclxuICAgICAgICBpZiAodGhpcy50ZXh0QWxpZ24gPT09IFwibGVmdFwiKSB7XHJcbiAgICAgICAgICAgIHRleHRQb3MgPSAnIHg9XCIzJVwiICBkeT1cIjAuMzVlbVwiIHRleHQtYW5jaG9yPVwic3RhcnRcIiAnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy50ZXh0QWxpZ24gPT09IFwicmlnaHRcIikge1xyXG4gICAgICAgICAgICB0ZXh0UG9zID0gJyB4PVwiOTclXCIgZHk9XCIwLjM1ZW1cIiB0ZXh0LWFuY2hvcj1cImVuZFwiICc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdGV4dFZlcnRpY2FsUG9zID0gJ3k9XCI1MCVcIic7XHJcbiAgICAgICAgaWYgKHRoaXMudGV4dFZldGljYWxBbGlnbiA9PT0gXCJ0b3BcIikge1xyXG4gICAgICAgICAgICB0ZXh0VmVydGljYWxQb3MgPSAneT1cIjI1JVwiJztcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGV4dFZldGljYWxBbGlnbiA9PT0gXCJib3R0b21cIikge1xyXG4gICAgICAgICAgICB0ZXh0VmVydGljYWxQb3MgPSAneT1cIjcwJVwiJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBmb250V2VpZ3RoID0gXCJcIjtcclxuICAgICAgICBpZiAodGhpcy5pc0JvbGQgPT09IFwidHJ1ZVwiKSB7XHJcbiAgICAgICAgICAgIGZvbnRXZWlndGggPSBcIiBmb250LXdlaWdodD0nYm9sZCcgXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgZm9udEZtYWlseSA9IFwiIGZvbnQtZmFtaWx5PSdcIiArIHRoaXMuZm9udE5hbWUgKyBcIicgXCI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGZvbnRJbmZvID0gJyBmb250LXNpemU9XCInICsgdGhpcy5mb250U2l6ZSAgKiBzY2FsZSArICdweFwiICc7XHJcbiAgICAgICAgbGV0IHRleHRPYmogPSAnPHRleHQnICsgdGV4dFBvcyArIHRleHRWZXJ0aWNhbFBvcyArIGZvbnRGbWFpbHkgKyBmb250SW5mbyArIHRleHRGb250Q29sb3IgKyBmb250V2VpZ3RoICsgICc+JyArIHZhbHVlICsgJzwvdGV4dD4nO1xyXG4gICAgICAgIGNvbnN0IGZvYmplY3RTVkcgPSAnPHN2ZyB4PVwiJyArIHRoaXMueCArICdweFwiIHk9XCInICsgdGhpcy55ICsgJ3B4XCIgd2lkdGg9XCInICsgdGhpcy53aWR0aCAqIHNjYWxlICtcclxuICAgICAgICAgICAgJ3B4XCIgaGVpZ2h0PVwiJyArIHRoaXMuaGVpZ2h0ICogc2NhbGUgKyAncHhcIj48ZyAgPicgKyB0ZXh0T2JqICsgJzwvZz48L3N2Zz4nO1xyXG5cclxuICAgICAgICByZXR1cm4gZm9iamVjdFNWRztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiBnZXRTVkdGaWVsZE9iamVjdFxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRCYXNlRmllbGQjZ2V0U1ZHRmllbGRPYmplY3RcclxuICAgICAqIEBtZW1iZXJPZiBtb2R1bGU6VGVtcGxhdGUvRmllbGQuVGV4dEJhc2VGaWVsZFxyXG4gICAgICogQGRlc2NyaXB0aW9uICDtlYTrk5zsnZgg7KCV67O066W8IOqwgOyngOqzoCBTVkcgRWxlbWVudOulvCDsg53shLHtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGNhbnZhcyBTbmFwIFNWR+ydmCBDYW52YXMgT2JqZWN0XHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbWFpbkdyb3VwICAgU1ZH7J2YIOuplOyduCBOb2RlXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gc2NhbGUgIO2YhOyerCBQREbsnZggU2NhbGVcclxuICAgICAqIEBwYXJhbSB7RUxFTUVOVH0gb3duZXJOb2RlICAgIO2VtOuLuSDtlITroZzsoJ3tirjsnZgg7LWc7IOB64uoIEVsZW1lbnTrpbwg6rCQ7Iu46rOgIOyeiOuKlCBFbGVtZW50XHJcbiAgICAgKiBAcGFyYW0ge0NhbGxiYWNrfSByZW1vdmVEcmFnT3Zlckdyb3VwRnVuYyAgICDrk5zrnpjqt7gg65CY7Ja0IOyEoO2DneuQmOyWtOynhCBGaWVsZCBHcm91cOydhCDsoJzqsbDtlZjripQgY2FsbGJhY2sgZnVuY3Rpb25cclxuICAgICAqIEBwYXJhbSB7Q2FsbGJhY2t9IGNoYW5nZVZhbHVlRXZlbnRGdW5jICAgICDsho3shLHqsJLsnbQg67OA7ZWg65WMIO2YuOy2nOuQmOuKlCBjYWxsYmFjayBmdW5jdGlvblxyXG4gICAgICogQHBhcmFtIHtDYWxsYmFja30gY2hhbmdlRnJlZVRyYW5zZm9ybUZ1bmMgICAgIEZyZWVUcmFuc2Zvcm3snYQg64uk7IucIOyDneyEse2VmOq4sCDsnITtlZwgY2FsbGJhY2sgZnVuY3Rpb25cclxuICAgICAqIEByZXR1cm4gU1ZHIE5vZGUgRWxlbWVudFxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBnZXRTVkdGaWVsZE9iamVjdChjYW52YXMsIG1haW5Hcm91cCwgc2NhbGUsIG93bmVyTm9kZSwgcmVtb3ZlRHJhZ092ZXJHcm91cEZ1bmMsIGNoYW5nZVZhbHVlRXZlbnRGdW5jLCBjaGFuZ2VGcmVlVHJhbnNmb3JtRnVuYykge1xyXG4gICAgICAgIGxldCBncm91cCA9IG1haW5Hcm91cC5ncm91cCgpO1xyXG4gICAgICAgIGdyb3VwLmF0dHIoe1xyXG4gICAgICAgICAgICBpZDogdGhpcy5pZCArIFwiR3JvdXBcIixcclxuICAgICAgICAgICAgY3Vyc29yOiBcIm1vdmVcIlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXQgcmVjdCA9IGNhbnZhcy5yZWN0KHRoaXMueCwgdGhpcy55LCB0aGlzLndpZHRoICogc2NhbGUsIHRoaXMuaGVpZ2h0ICogc2NhbGUpO1xyXG4gICAgICAgIHJlY3QuYXR0cih7XHJcbiAgICAgICAgICAgIGlkOiB0aGlzLmlkLFxyXG4gICAgICAgICAgICBcImZpbGwtb3BhY2l0eVwiOiBcIjAuNVwiLFxyXG4gICAgICAgICAgICBcImZpbGxcIjogXCIjZmZhYzdmXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICBncm91cC5hcHBlbmQocmVjdCk7XHJcbiAgICAgICAgY29uc3QgcCA9IFNuYXAucGFyc2UodGhpcy5tYWtlU1ZHVGV4dChzY2FsZSkpO1xyXG4gICAgICAgIGdyb3VwLmFwcGVuZChwKTtcclxuXHJcbiAgICAgICAgZ3JvdXAuaG92ZXIoXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLy8gZl9pblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7IC8vIGZfb3V0XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgXHJcbiAgICAgICAgbGV0IF90ZXh0QmFzZUZpZWxkID0gdGhpcztcclxuICAgICAgICBsZXQgbW91c2VQb3MgPSB7IHg6IDAsIHk6IDAgfTtcclxuICAgICAgICBncm91cC5tb3VzZWRvd24oZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICAgICAgICBtb3VzZVBvcy54ID0gZXZ0LnBhZ2VYO1xyXG4gICAgICAgICAgICBtb3VzZVBvcy55ID0gZXZ0LnBhZ2VZO1xyXG4gICAgICAgICAgICBjb25zdCBpdGVtcyA9IG1haW5Hcm91cC5zZWxlY3RBbGwoJ2cnKTtcclxuICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgIT09IGdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFVdGlscy5pc0VtcHR5T2JqZWN0KGVsZW1lbnQuZnJlZVRyYW5zZm9ybSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5mcmVlVHJhbnNmb3JtLmhpZGVSZXNpemVIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghVXRpbHMuaXNFbXB0eU9iamVjdChncm91cC5mcmVlVHJhbnNmb3JtKSkge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXAuZnJlZVRyYW5zZm9ybS5zaG93UmVzaXplSGFuZGxlcigpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlRnJlZVRyYW5zZm9ybUZ1bmMoZ3JvdXAsIHJlY3QuYXR0cihcIndpZHRoXCIpLCByZWN0LmF0dHIoXCJoZWlnaHRcIikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZ3JvdXAubW91c2V1cChmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgIGlmIChncm91cC5wYXJlbnQoKS5hdHRyKFwiaWRcIikgPT09IENPTlNUQU5UUy5EUkFHX0JPWF9OQU1FKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMobW91c2VQb3MueCAtIGV2dC5wYWdlWCkgPiBDT05TVEFOVFMuTUlOSU1VTV9EUkFHX1NJWkVcclxuICAgICAgICAgICAgICAgICAgICB8fCBNYXRoLmFicyhtb3VzZVBvcy55IC0gZXZ0LnBhZ2VZKSA+IENPTlNUQU5UUy5NSU5JTVVNX0RSQUdfU0laRSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlbW92ZURyYWdPdmVyR3JvdXBGdW5jLmNhbGwoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gbWFpbkdyb3VwLnNlbGVjdEFsbCgnZycpO1xyXG4gICAgICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50ICE9PSBncm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIVV0aWxzLmlzRW1wdHlPYmplY3QoZWxlbWVudC5mcmVlVHJhbnNmb3JtKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5mcmVlVHJhbnNmb3JtLmhpZGVSZXNpemVIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmICghVXRpbHMuaXNFbXB0eU9iamVjdChncm91cC5mcmVlVHJhbnNmb3JtKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwLmZyZWVUcmFuc2Zvcm0uc2hvd1Jlc2l6ZUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlRnJlZVRyYW5zZm9ybUZ1bmMoZ3JvdXAsIHJlY3QuYXR0cihcIndpZHRoXCIpLCByZWN0LmF0dHIoXCJoZWlnaHRcIikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgX3RleHRCYXNlRmllbGQuY29uc3RydWN0b3Iuc2hvd0ZpZWxkc0F0dHJpYnV0ZShvd25lck5vZGUsIFtfdGV4dEJhc2VGaWVsZF0sIHVuZGVmaW5lZCwgbWFpbkdyb3VwLCBVdGlscy5nZXRVc2VySW5mb09wdHNMaXN0KCksIFV0aWxzLmdldERWRmllbGRPcHRzTGlzdCgpLCBjaGFuZ2VWYWx1ZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfdGV4dEJhc2VGaWVsZC5jb25zdHJ1Y3Rvci5zaG93RmllbGRzQXR0cmlidXRlKG93bmVyTm9kZSwgW190ZXh0QmFzZUZpZWxkXSwgdW5kZWZpbmVkLCBtYWluR3JvdXAsIFV0aWxzLmdldFVzZXJJbmZvT3B0c0xpc3QoKSwgVXRpbHMuZ2V0RFZGaWVsZE9wdHNMaXN0KCksIGNoYW5nZVZhbHVlRXZlbnRGdW5jKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBncm91cDtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gY2hhbmdlVGV4dEVsZW1lbnRcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5UZXh0QmFzZUZpZWxkI2NoYW5nZVRleHRFbGVtZW50XHJcbiAgICAgKiBAbWVtYmVyT2YgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRCYXNlRmllbGRcclxuICAgICAqIEBkZXNjcmlwdGlvbiAgIO2VhOuTnOulvCDtkZztmITtlZjripQgVGV4dCBOb2Rl7J2YIFRleHTrpbwg67OA6rK97ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBmaWVsZEdyb3VwIEZpZWxk7J2YIFNWRyDrhbjrk5xcclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzY2FsZSDtmITsnqwgUERG7J2YIFNjYWxlXHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIGNoYW5nZVRleHRFbGVtZW50KGZpZWxkR3JvdXAsIHNjYWxlKSB7XHJcbiAgICAgICAgZmllbGRHcm91cC5zZWxlY3QoXCJzdmdcIikucmVtb3ZlKCk7XHJcbiAgICAgICAgdmFyIG5ld1RleHQgPSB0aGlzLm1ha2VTVkdUZXh0KHNjYWxlKTtcclxuICAgICAgICBjb25zdCBwID0gU25hcC5wYXJzZShuZXdUZXh0KTtcclxuICAgICAgICBmaWVsZEdyb3VwLmFwcGVuZChwKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiBzaG93RmllbGRBdHRyaWJ1dGVcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5UZXh0QmFzZUZpZWxkI3Nob3dGaWVsZEF0dHJpYnV0ZVxyXG4gICAgICogQGRlc2NyaXB0aW9uICAoU3RhdGljKSDtlYTrk5zsnZgg7IaN7ISxIO2MneyXheywveydhCDshKTsoJXtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtFTEVNRU5UfSBub2RlICDsho3shLEg7Yyd7JeFIE5vZGVcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBpZFZhbHVlICAgICDtlYTrk5zsnZggaWTqsJJcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSByZXF1aXJlZFZhbHVlICAgICDtlYTsiJjsl6zrtoAg6rCSXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gb3duZXJJZFZhbHVlICAgICDshJzrqoXsnpAg7JWE7J2065SUXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZHZWYWx1ZSAgICAg6riw67O46rCSXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZm9udEZhbWlseU5hbWVWYWx1ZSAgICAg7Y+w7Yq4IOydtOumhFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZvbnRTaXplVmFsdWUgICAgIO2PsO2KuCDtgazquLAg6rCSXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dEFsaWduVmFsdWUgICAgIO2FjeyKpO2KuCDqsIDroZwg7KCV66CsIOqwklxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGJvbGRWYWx1ZSAgICAg7Y+w7Yq4IOuzvOuTnCDsl6zrtoBcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmb250Q29sb3JWYWx1ZSAgICAg7Y+w7Yq4IOy5vOudvFxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gdXNlckxpc3QgICDshJzrqoXsnpAg66as7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBkdk9wdGlvbkxpc3QgICDquLDrs7jqsJIg7ISg7YOdIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtDYWxsYmFja30gY2hhbmdlRXZlbnRGdW5jICAgIOyGjeyEseqwkuydtCDrs4DtlaDrlYwg7Zi47Lac65CY64qUIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBzaG93RmllbGRBdHRyaWJ1dGUobm9kZSxcclxuICAgICAgICBpZFZhbHVlLCBmaWVsZElkVmFsdWUsIHJlcXVpcmVkVmFsdWUsIG93bmVySWRWYWx1ZSwgZHZWYWx1ZSwgZm9udEZhbWlseU5hbWVWYWx1ZSwgZm9udFNpemVWYWx1ZSwgdGV4dEFsaWduVmFsdWUsIGJvbGRWYWx1ZSwgZm9udENvbG9yVmFsdWUsXHJcbiAgICAgICAgdXNlckxpc3QsIGR2T3B0aW9uTGlzdCxcclxuICAgICAgICBjaGFuZ2VFdmVudEZ1bmMpIHtcclxuXHJcbiAgICAgICAgdmFyIHBhbmVsID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlUGFuZWxOb2RlKCk7XHJcblxyXG4gICAgICAgIHZhciByZXF1aXJlUm93ID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlVG9nZ2xlQnV0dG9uTm9kZShpZFZhbHVlLCBcInJlcXVpcmVkXCIsIFwiVGVtcGxhdGUuaXNSZXF1aXJlZFwiLCByZXF1aXJlZFZhbHVlLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG4gICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKHJlcXVpcmVSb3cpO1xyXG5cclxuICAgICAgICBsZXQgdXNlRGVmYXVsT3B0aW9uTm9kZSA9IFV0aWxzLmdldFVzZXJJbmZvT3B0c0xpc3RDb3VudCgpICE9PSAxO1xyXG4gICAgICAgIHZhciBvd25lclNlbGVjdFJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVNlbGVjdE5vZGUoaWRWYWx1ZSwgXCJvd25lcklkXCIsIHVzZXJMaXN0LCBcIlwiLCB1c2VEZWZhdWxPcHRpb25Ob2RlKTtcclxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChvd25lclNlbGVjdFJvdyk7XHJcblxyXG4gICAgICAgIGxldCBvd25lclNlbGVjdCA9IG93bmVyU2VsZWN0Um93LnF1ZXJ5U2VsZWN0b3IoXCJzZWxlY3RcIik7XHJcbiAgICAgICAgalF1ZXJ5KG93bmVyU2VsZWN0KS5zZWxlY3QyKHtcclxuICAgICAgICAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IEluZmluaXR5LFxyXG4gICAgICAgICAgICB3aWR0aDogXCIxMDAlXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICBqUXVlcnkob3duZXJTZWxlY3QpLnZhbChvd25lcklkVmFsdWUpLnRyaWdnZXIoXCJjaGFuZ2VcIik7XHJcbiAgICAgICAgalF1ZXJ5KG93bmVyU2VsZWN0KS5vbihcImNoYW5nZVwiLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG5cclxuICAgICAgICAvLzEyLTI4XHJcbiAgICAgICAgaWYgKGR2T3B0aW9uTGlzdCAmJiBBcnJheS5pc0FycmF5KGR2T3B0aW9uTGlzdCkgJiYgZHZPcHRpb25MaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdmFyIGRlZmF1bHRWYWx1ZVJvdyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVNlbGVjdE5vZGUoaWRWYWx1ZSwgXCJkZWZhdWx0VmFsdWVcIiwgZHZPcHRpb25MaXN0LCBcIlRlbXBsYXRlLmRlZmF1bHRWYWx1ZVRleHRcIiwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKGRlZmF1bHRWYWx1ZVJvdyk7XHJcbiAgICBcclxuICAgICAgICAgICAgbGV0IGRlZmF1bHRWYWx1ZVNlbGVjdCA9IGRlZmF1bHRWYWx1ZVJvdy5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xyXG4gICAgICAgICAgICAkKGRlZmF1bHRWYWx1ZVNlbGVjdCkuc2VsZWN0Mih7XHJcbiAgICAgICAgICAgICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogSW5maW5pdHksXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogXCIxMDAlXCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICQoZGVmYXVsdFZhbHVlU2VsZWN0KS52YWwoZHZWYWx1ZSkudHJpZ2dlcihcImNoYW5nZVwiKTtcclxuICAgICAgICAgICAgJChkZWZhdWx0VmFsdWVTZWxlY3QpLm9uKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZmllbGRJZFZhbHVlUm93ID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlSW5wdXROb2RlKGlkVmFsdWUsIFwiZmllbGRJZFwiLCBcIlRlbXBsYXRlLmZpZWxkSWRUZXh0XCIsIGZpZWxkSWRWYWx1ZSwgXCJcIiwgXCJcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZChmaWVsZElkVmFsdWVSb3cpO1xyXG5cclxuICAgICAgICB2YXIgZm9udEF0dHJSb3cgPSBVdGlscy5jcmVhdGVUZXh0QXR0cmJ1dGVOb2RlKGlkVmFsdWUsIGZvbnRDb2xvclZhbHVlLCB0ZXh0QWxpZ25WYWx1ZSwgYm9sZFZhbHVlLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG4gICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKGZvbnRBdHRyUm93LnJvdyk7XHJcblxyXG4gICAgICAgIGxldCBmb250RmFtaWx5Q29tYm9TZWxlY3QgPSBmb250QXR0clJvdy5mb250RmFtaWx5Q29tYm8ucXVlcnlTZWxlY3RvcihcInNlbGVjdFwiKTtcclxuICAgICAgICAkKGZvbnRGYW1pbHlDb21ib1NlbGVjdCkuc2VsZWN0Mih7XHJcbiAgICAgICAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcclxuICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChmb250RmFtaWx5Q29tYm9TZWxlY3QpLnZhbChmb250RmFtaWx5TmFtZVZhbHVlKS50cmlnZ2VyKFwiY2hhbmdlXCIpO1xyXG4gICAgICAgICQoZm9udEZhbWlseUNvbWJvU2VsZWN0KS5vbihcImNoYW5nZVwiLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG4gICAgICAgIGxldCBmb250U2l6ZUNvbWJvU2VsZWN0ID0gZm9udEF0dHJSb3cuZm9udFNpemVDb21iby5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xyXG4gICAgICAgICQoZm9udFNpemVDb21ib1NlbGVjdCkuc2VsZWN0Mih7XHJcbiAgICAgICAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcclxuICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChmb250U2l6ZUNvbWJvU2VsZWN0KS52YWwoZm9udFNpemVWYWx1ZSkudHJpZ2dlcihcImNoYW5nZVwiKTtcclxuICAgICAgICAkKGZvbnRTaXplQ29tYm9TZWxlY3QpLm9uKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcblxyXG4gICAgICAgIGxldCBjb2xvcklucHV0ID0gZm9udEF0dHJSb3cuY29sb3JCdG4ucXVlcnlTZWxlY3RvcihcImJ1dHRvblwiKTtcclxuICAgICAgICBjb2xvcklucHV0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGZvbnRDb2xvclZhbHVlO1xyXG4gICAgICAgIGxldCBwaWNrZXIgPSBuZXcgQ1AoY29sb3JJbnB1dCwgeyBjb2xvcjogZm9udENvbG9yVmFsdWUgfSk7XHJcbiAgICAgICAgY29sb3JJbnB1dC52YWx1ZSA9IGZvbnRDb2xvclZhbHVlO1xyXG4gICAgICAgIHBpY2tlci5vbignY2hhbmdlJywgZnVuY3Rpb24gKHIsIGcsIGIsIGEpIHtcclxuICAgICAgICAgICAgaWYgKCFwaWNrZXIudmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbG9ySW5wdXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gQ1AuSEVYKFtyLCBnLCBiLCBhXSk7XHJcbiAgICAgICAgICAgIGNvbG9ySW5wdXQudmFsdWUgPSBDUC5IRVgoW3IsIGcsIGIsIGFdKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBjb2xvclRleHRJbnB1dCA9IGZvbnRBdHRyUm93LmNvbG9yQnRuLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFt0eXBlPSd0ZXh0J11cIik7XHJcbiAgICAgICAgICAgIGNvbG9yVGV4dElucHV0LnZhbHVlID0gKENQLkhFWChbciwgZywgYiwgYV0pKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBwaWNrZXIub24oJ2V4aXQnLCBmdW5jdGlvbiAociwgZywgYiwgYSkge1xyXG4gICAgICAgICAgICBjb2xvcklucHV0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IENQLkhFWChbciwgZywgYiwgYV0pO1xyXG5cclxuICAgICAgICAgICAgbGV0IGNvbG9yVGV4dElucHV0ID0gZm9udEF0dHJSb3cuY29sb3JCdG4ucXVlcnlTZWxlY3RvcihcImlucHV0W3R5cGU9J3RleHQnXVwiKTtcclxuICAgICAgICAgICAgY29sb3JUZXh0SW5wdXQudmFsdWUgPSAoQ1AuSEVYKFtyLCBnLCBiLCBhXSkpO1xyXG4gICAgICAgICAgICBjb2xvclRleHRJbnB1dC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImNoYW5nZVwiKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHBhbmVsLnNldEF0dHJpYnV0ZShcIkZpZWxkLWlkLWxpc3RcIiwgaWRWYWx1ZSk7XHJcblxyXG4gICAgICAgIG5vZGUuY2xhc3NOYW1lID0gXCJFZGl0b3ItQXR0cmlidXRlXCI7XHJcbiAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKFwiVGV4dC1GaWVsZFwiKTtcclxuICAgICAgICBub2RlLmFwcGVuZENoaWxkKHBhbmVsKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gc2hvd0ZpZWxkc0F0dHJpYnV0ZVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRCYXNlRmllbGQjc2hvd0ZpZWxkc0F0dHJpYnV0ZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOuTnOydmCDsho3shLEg7Yyd7JeF7LC97J2EIOyEpOygle2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0VMRU1FTlR9IG93bmVyTm9kZSAg7IaN7ISxIO2MneyXhSBOb2RlXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBmaWVsZExpc3QgICAgIO2VhOuTnOuTpOydmCDrpqzsiqTtirhcclxuICAgICAqIEBwYXJhbSB7RUxFTUVOVH0gYXR0ck5vZGUgICAg7IaN7ISxIO2MneyXheydmCBOb2RlXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWFpbkdyb3VwICAgIFNWR+ydmCDrqZTsnbggRWxlbWVudFxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gdXNlckxpc3QgICDshJzrqoXsnpAg66as7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBkdk9wdGlvbkxpc3QgICDquLDrs7jqsJIg7ISg7YOdIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtDYWxsYmFja30gY2hhbmdlRXZlbnRGdW5jICAgIOyGjeyEseqwkuydtCDrs4DtlaDrlYwg7Zi47Lac65CY64qUIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBzaG93RmllbGRzQXR0cmlidXRlKG93bmVyTm9kZSwgZmllbGRMaXN0LCBhdHRyTm9kZSwgbWFpbkdyb3VwLCB1c2VyTGlzdCwgZHZPcHRpb25MaXN0LCBjaGFuZ2VFdmVudEZ1bmMpIHtcclxuICAgICAgICBsZXQgbm9kZSA9IGF0dHJOb2RlO1xyXG4gICAgICAgIGlmIChhdHRyTm9kZSA9PT0gbnVsbCB8fCBVdGlscy5pc0VtcHR5T2JqZWN0KGF0dHJOb2RlKSkge1xyXG4gICAgICAgICAgICBjb25zdCBiYm94ID0gVXRpbHMubWVyZ2VGaWVsZHNCQm94KGZpZWxkTGlzdCk7XHJcbiAgICAgICAgICAgIG5vZGUgPSBVdGlscy5jcmVhdGVBdHRyYnV0ZVBvcHVwKG93bmVyTm9kZSwgYmJveCk7XHJcbiAgICAgICAgICAgIFV0aWxzLnJlcG9zaXRpb25GaWVsZERlbGV0ZUJ0bihvd25lck5vZGUsIGJib3gueCwgYmJveC55LCBiYm94LndpZHRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgVXRpbHMucmVtb3ZlQWxsQ2hpbGROb2RlKG5vZGUpO1xyXG5cclxuICAgICAgICB2YXIgaWRWYWx1ZUFyciA9IFtdO1xyXG4gICAgICAgIGZpZWxkTGlzdC5mb3JFYWNoKChmaWVsZCkgPT4ge1xyXG4gICAgICAgICAgICBpZFZhbHVlQXJyLnB1c2goZmllbGQuaWQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgaWRWYWx1ZSA9IGlkVmFsdWVBcnIuam9pbigpO1xyXG5cclxuICAgICAgICB2YXIgb3duZXJJZFZhbHVlID0gZmllbGRMaXN0WzBdLm93bmVySWQ7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLm93bmVySWQgIT09IG93bmVySWRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgb3duZXJJZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHJlcXVpcmVkVmFsdWUgPSBmaWVsZExpc3RbMF0ucmVxdWlyZWQ7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLnJlcXVpcmVkICE9PSByZXF1aXJlZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICByZXF1aXJlZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGR2VmFsdWUgPSBmaWVsZExpc3RbMF0uZGVmYXVsdFZhbHVlO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5kZWZhdWx0VmFsdWUgIT09IGR2VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGR2VmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZmllbGRJZFZhbHVlID0gZmllbGRMaXN0WzBdLmZpZWxkSWQ7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmZpZWxkSWQgIT09IGZpZWxkSWRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgZmllbGRJZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGZvbnRGYW1pbHlOYW1lVmFsdWUgPSBmaWVsZExpc3RbMF0uZm9udE5hbWU7XHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTGlzdFtpZHhdLmZvbnROYW1lICE9PSBmb250RmFtaWx5TmFtZVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBmb250RmFtaWx5TmFtZVZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZm9udFNpemVWYWx1ZSA9IGZpZWxkTGlzdFswXS5mb250U2l6ZTtcclxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGRMaXN0W2lkeF0uZm9udFNpemUgIT09IGZvbnRTaXplVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplVmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgdGV4dEFsaWduVmFsdWUgPSBmaWVsZExpc3RbMF0udGV4dEFsaWduO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS50ZXh0QWxpZ24gIT09IHRleHRBbGlnblZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QWxpZ25WYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBib2xkVmFsdWUgPSBmaWVsZExpc3RbMF0uaXNCb2xkO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5pc0JvbGQgIT09IGJvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgYm9sZFZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZm9udENvbG9yVmFsdWUgPSBmaWVsZExpc3RbMF0uZm9udENvbG9yO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkTGlzdC5sZW5ndGg7ICsraWR4KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZExpc3RbaWR4XS5mb250Q29sb3IgIT09IGZvbnRDb2xvclZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBmb250Q29sb3JWYWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFRleHRCYXNlRmllbGQuc2hvd0ZpZWxkQXR0cmlidXRlKG5vZGUsXHJcbiAgICAgICAgICAgIGlkVmFsdWUsIGZpZWxkSWRWYWx1ZSwgcmVxdWlyZWRWYWx1ZSwgb3duZXJJZFZhbHVlLCBkdlZhbHVlLCBmb250RmFtaWx5TmFtZVZhbHVlLCBmb250U2l6ZVZhbHVlLCB0ZXh0QWxpZ25WYWx1ZSwgYm9sZFZhbHVlLCBmb250Q29sb3JWYWx1ZSxcclxuICAgICAgICAgICAgdXNlckxpc3QsIGR2T3B0aW9uTGlzdCxcclxuICAgICAgICAgICAgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdmFsaWRhdGVWYWx1ZShwcm9wZXJ0eU5hbWUsIHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsIlxyXG4vKipcclxuICogQG1vZHVsZSBUZW1wbGF0ZS9GaWVsZFxyXG4qL1xyXG5cclxuaW1wb3J0IHtUZXh0QmFzZUZpZWxkfSBmcm9tICcuL1RleHRCYXNlRmllbGQnO1xyXG5pbXBvcnQge1V0aWxzfSBmcm9tICcuLy4uL3V0aWxzL3V0aWxzLmpzJztcclxuXHJcbi8qKlxyXG4gKiDthY3siqTtirgg7ZWE65OcIENsYXNzXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBtX21heFZhbHVlTGVuZ3RoIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuVGV4dEZpZWxkI21fbWF4VmFsdWVMZW5ndGh9XHJcbiAqIFxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBmaWVsZE5hbWUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9GaWVsZC5UZXh0RmllbGQjZmllbGROYW1lfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBzaG93RmllbGRzQXR0cmlidXRlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRmllbGQuVGV4dEZpZWxkI3Nob3dGaWVsZHNBdHRyaWJ1dGV9XHJcbiAqIFxyXG4gKiBAYXVnbWVudHMgVGV4dEJhc2VGaWVsZCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRCYXNlRmllbGQjVGV4dEJhc2VGaWVsZH1cclxuICogQEZpbGVOYW1lIFRleHRGaWVsZC5qc1xyXG4gKiBAc2luY2UgMjAyMS4wNS4zMVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRleHRGaWVsZCBleHRlbmRzIFRleHRCYXNlRmllbGQge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAqIEBwYXJhbSBpZCDtlYTrk5zsnZggSURcclxuICAgICAqIEBwYXJhbSBwYWdlTm8g7ZWE65Oc6rCAIOyGje2VnCDtjpjsnbTsp4Ag67KI7Zi4XHJcbiAgICAgKiBAcGFyYW0geCDtlYTrk5zsnZggc3Zn7IOB7J2YIHjsooztkZxcclxuICAgICAqIEBwYXJhbSB5IO2VhOuTnOydmCBzdmfsg4HsnZggeeyijO2RnFxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoaWQsIHBhZ2VObywgeCwgeSkge1xyXG4gICAgICAgIHN1cGVyKGlkLCBwYWdlTm8sIHgsIHksIFRleHRGaWVsZC53aWR0aFZhbHVlKCksIFRleHRGaWVsZC5oZWlnaHRWYWx1ZSgpKTtcclxuICAgICAgICB0aGlzLm1fdHlwZSA9IFRleHRGaWVsZC5maWVsZE5hbWUoKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge051bWJlcn1cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUuTnVtYmVyRmllbGQjbV9tYXhWYWx1ZUxlbmd0aFxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiDthY3siqTtirgg7ZWE65OcIOqwkuydmCDstZzrjIDquLjsnbRcclxuICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAqIC8vIGdldHRlciBtYXhWYWx1ZUxlbmd0aCgpXHJcbiAgICAgICAgICogLy8gc2V0dGVyIG1heFZhbHVlTGVuZ3RoKHZhbClcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1fbWF4VmFsdWVMZW5ndGggPSAxMDA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5tX2tpbmQgPSBVdGlscy50cmFuc2xhdGVGb3JLZXkoXCJUZW1wbGF0ZS50ZXh0RmllbGRUb29sXCIpO1xyXG4gICAgICAgIGlmIChVdGlscy5pc1N0cmluZ0VtcHR5KGlkKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubV9maWVsZElkID0gdGhpcy5tX2lkLnJlcGxhY2UodGhpcy5tX3R5cGUsIHRoaXMubV9raW5kICsgXCItXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIGZpZWxkTmFtZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRGaWVsZCNmaWVsZE5hbWVcclxuICAgICAqIEByZXR1cm4ge1N0cmluZ31cclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtlYTrk5wg7YOA7J6F7J2YIOydtOumhFxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZpZWxkTmFtZSgpIHtcclxuICAgICAgICByZXR1cm4gXCJUZXh0RmllbGRcIjtcclxuICAgIH1cclxuXHJcbiAgICBhbmNlc3RvcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFtcIlRGXCIsIFwiVEJGXCIsIFwiQkZcIl07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG1heFZhbHVlTGVuZ3RoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fbWF4VmFsdWVMZW5ndGg7XHJcbiAgICB9XHJcbiAgICBzZXQgbWF4VmFsdWVMZW5ndGgoX19tYXhWYWx1ZUxlbmd0aCkge1xyXG4gICAgICAgIHRoaXMubV9tYXhWYWx1ZUxlbmd0aCA9IF9fbWF4VmFsdWVMZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gc2hvd0ZpZWxkc0F0dHJpYnV0ZVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0ZpZWxkLlRleHRGaWVsZCNzaG93RmllbGRzQXR0cmlidXRlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE65Oc7J2YIOyGjeyEsSDtjJ3sl4XssL3snYQg7ISk7KCV7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7RUxFTUVOVH0gb3duZXJOb2RlICDsho3shLEg7Yyd7JeFIE5vZGVcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGZpZWxkTGlzdCAgICAg7ZWE65Oc65Ok7J2YIOumrOyKpO2KuFxyXG4gICAgICogQHBhcmFtIHtFTEVNRU5UfSBhdHRyTm9kZSAgICDsho3shLEg7Yyd7JeF7J2YIE5vZGVcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtYWluR3JvdXAgICAgU1ZH7J2YIOuplOyduCBFbGVtZW50XHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSB1c2VyTGlzdCAgIOyEnOuqheyekCDrpqzsiqTtirhcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGR2T3B0aW9uTGlzdCAgIOq4sOuzuOqwkiDshKDtg50g66as7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge0NhbGxiYWNrfSBjaGFuZ2VFdmVudEZ1bmMgICAg7IaN7ISx6rCS7J20IOuzgO2VoOuVjCDtmLjstpzrkJjripQgY2FsbGJhY2sgZnVuY3Rpb25cclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHNob3dGaWVsZHNBdHRyaWJ1dGUob3duZXJOb2RlLCBmaWVsZExpc3QsIGF0dHJOb2RlLCBtYWluR3JvdXAsIHVzZXJMaXN0LCBkdk9wdGlvbkxpc3QsIGNoYW5nZUV2ZW50RnVuYykge1xyXG4gICAgICAgIFRleHRCYXNlRmllbGQuc2hvd0ZpZWxkc0F0dHJpYnV0ZShvd25lck5vZGUsIGZpZWxkTGlzdCwgYXR0ck5vZGUsIG1haW5Hcm91cCwgdXNlckxpc3QsIGR2T3B0aW9uTGlzdCwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdmFsaWRhdGVWYWx1ZShwcm9wZXJ0eU5hbWUsIHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4vdXRpbHMuanMnO1xyXG5cclxuLyoqXHJcbiAqIHNpbXBsZS10cmFuc2xhdG9yXHJcbiAqIEEgc21hbGwgSmF2YVNjcmlwdCBsaWJyYXJ5IHRvIHRyYW5zbGF0ZSB3ZWJwYWdlcyBpbnRvIGRpZmZlcmVudCBsYW5ndWFnZXMuXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmRyZWFzcmVtZHQvc2ltcGxlLXRyYW5zbGF0b3JcclxuICpcclxuICogQXV0aG9yOiBBbmRyZWFzIFJlbWR0IDxtZUBhbmRyZWFzcmVtZHQuY29tPiAoaHR0cHM6Ly9hbmRyZWFzcmVtZHQuY29tKVxyXG4gKiBMaWNlbnNlOiBNSVQgKGh0dHBzOi8vbWl0LWxpY2Vuc2Uub3JnLylcclxuICovXHJcbmNsYXNzIFRyYW5zbGF0b3Ige1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplIHRoZSBUcmFuc2xhdG9yIGJ5IHByb3ZpZGluZyBvcHRpb25zLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIHRoaXMuZGVidWcgPSBsb2dnZXIodHJ1ZSk7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyAhPSAnb2JqZWN0JyB8fCBBcnJheS5pc0FycmF5KG9wdGlvbnMpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVidWcoJ0lOVkFMSURfT1BUSU9OUycsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBvcHRpb25zID0ge307XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmxhbmd1YWdlcyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IE9iamVjdC5hc3NpZ24oVHJhbnNsYXRvci5kZWZhdWx0Q29uZmlnLCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgY29uc3QgeyBkZWJ1ZywgcmVnaXN0ZXJHbG9iYWxseSwgZGV0ZWN0TGFuZ3VhZ2UgfSA9IHRoaXMuY29uZmlnO1xyXG5cclxuICAgICAgICB0aGlzLmRlYnVnID0gbG9nZ2VyKGRlYnVnKTtcclxuXHJcbiAgICAgICAgaWYgKHJlZ2lzdGVyR2xvYmFsbHkpIHtcclxuICAgICAgICAgICAgdGhpcy5fZ2xvYmFsT2JqZWN0W3JlZ2lzdGVyR2xvYmFsbHldID0gdGhpcy50cmFuc2xhdGVGb3JLZXkuYmluZCh0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkZXRlY3RMYW5ndWFnZSAmJiB0aGlzLl9lbnYgPT0gJ2Jyb3dzZXInKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RldGVjdExhbmd1YWdlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIHRoZSBnbG9iYWwgb2JqZWN0LCBkZXBlbmRpbmcgb24gdGhlIGVudmlyb25tZW50LlxyXG4gICAgICogSWYgdGhlIHNjcmlwdCBpcyBleGVjdXRlZCBpbiBhIGJyb3dzZXIsIHJldHVybiB0aGUgd2luZG93IG9iamVjdCxcclxuICAgICAqIG90aGVyd2lzZSwgaW4gTm9kZS5qcywgcmV0dXJuIHRoZSBnbG9iYWwgb2JqZWN0LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge09iamVjdH1cclxuICAgICAqL1xyXG4gICAgZ2V0IF9nbG9iYWxPYmplY3QoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2VudiA9PSAnYnJvd3NlcicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBnbG9iYWw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBhbmQgcmV0dXJuIHRoZSBlbnZpcm9ubWVudCBpbiB3aGljaCB0aGUgc2NyaXB0IGlzIGV4ZWN1dGVkLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gVGhlIGVudmlyb25tZW50XHJcbiAgICAgKi9cclxuICAgIGdldCBfZW52KCkge1xyXG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnYnJvd3Nlcic7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xyXG4gICAgICAgICAgICByZXR1cm4gJ25vZGUnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuICdicm93c2VyJztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERldGVjdCB0aGUgdXNlcnMgcHJlZmVycmVkIGxhbmd1YWdlLiBJZiB0aGUgbGFuZ3VhZ2UgaXMgc3RvcmVkIGluXHJcbiAgICAgKiBsb2NhbFN0b3JhZ2UgZHVlIHRvIGEgcHJldmlvdXMgaW50ZXJhY3Rpb24sIHVzZSBpdC5cclxuICAgICAqIElmIG5vIGxvY2FsU3RvcmFnZSBlbnRyeSBoYXMgYmVlbiBmb3VuZCwgdXNlIHRoZSBkZWZhdWx0IGJyb3dzZXIgbGFuZ3VhZ2UuXHJcbiAgICAgKi9cclxuICAgIF9kZXRlY3RMYW5ndWFnZSgpIHtcclxuICAgICAgICBjb25zdCBpbk1lbW9yeSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMuY29uZmlnLnBlcnNpc3RLZXkpO1xyXG5cclxuICAgICAgICBpZiAoaW5NZW1vcnkpIHtcclxuICAgICAgICAgICAgdGhpcy5jb25maWcuZGVmYXVsdExhbmd1YWdlID0gaW5NZW1vcnk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgbGFuZyA9IG5hdmlnYXRvci5sYW5ndWFnZXNcclxuICAgICAgICAgICAgICAgID8gbmF2aWdhdG9yLmxhbmd1YWdlc1swXVxyXG4gICAgICAgICAgICAgICAgOiBuYXZpZ2F0b3IubGFuZ3VhZ2U7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5kZWZhdWx0TGFuZ3VhZ2UgPSBsYW5nLnN1YnN0cigwLCAyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYSB0cmFuc2xhdGVkIHZhbHVlIGZyb20gYSBKU09OIGJ5IHByb3ZpZGluZyBhIGtleS4gQWRkaXRpb25hbGx5LFxyXG4gICAgICogdGhlIHRhcmdldCBsYW5ndWFnZSBjYW4gYmUgc3BlY2lmaWVkIGFzIHRoZSBzZWNvbmQgcGFyYW1ldGVyLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0b0xhbmd1YWdlXHJcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XHJcbiAgICAgKi9cclxuICAgIF9nZXRWYWx1ZUZyb21KU09OKGtleSwgdG9MYW5ndWFnZSkge1xyXG4gICAgICAgIGNvbnN0IGpzb24gPSB0aGlzLmxhbmd1YWdlcy5nZXQodG9MYW5ndWFnZSk7XHJcblxyXG4gICAgICAgIHJldHVybiBrZXkuc3BsaXQoJy4nKS5yZWR1Y2UoKG9iaiwgaSkgPT4gKG9iaiA/IG9ialtpXSA6IG51bGwpLCBqc29uKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlcGxhY2UgYSBnaXZlbiBET00gbm9kZXMnIGF0dHJpYnV0ZSB2YWx1ZXMgKGJ5IGRlZmF1bHQgaW5uZXJIVE1MKSB3aXRoXHJcbiAgICAgKiB0aGUgdHJhbnNsYXRlZCB0ZXh0LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0b0xhbmd1YWdlXHJcbiAgICAgKi9cclxuICAgIF9yZXBsYWNlKGVsZW1lbnQsIHRvTGFuZ3VhZ2UpIHtcclxuICAgICAgICBjb25zdCBrZXlzID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaTE4bicpPy5zcGxpdCgvXFxzL2cpO1xyXG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBlbGVtZW50Py5nZXRBdHRyaWJ1dGUoJ2RhdGEtaTE4bi1hdHRyJyk/LnNwbGl0KC9cXHMvZyk7XHJcblxyXG4gICAgICAgIGlmIChhdHRyaWJ1dGVzICYmIGtleXMubGVuZ3RoICE9IGF0dHJpYnV0ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVidWcoJ01JU01BVENISU5HX0FUVFJJQlVURVMnLCBrZXlzLCBhdHRyaWJ1dGVzLCBlbGVtZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGtleXMuZm9yRWFjaCgoa2V5LCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0gdGhpcy5fZ2V0VmFsdWVGcm9tSlNPTihrZXksIHRvTGFuZ3VhZ2UpO1xyXG4gICAgICAgICAgICBjb25zdCBhdHRyID0gYXR0cmlidXRlcyA/IGF0dHJpYnV0ZXNbaW5kZXhdIDogJ2lubmVySFRNTCc7XHJcblxyXG4gICAgICAgICAgICBpZiAodGV4dCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGF0dHIgPT0gJ2lubmVySFRNTCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50W2F0dHJdID0gdGV4dDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0ciwgdGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlYnVnKCdUUkFOU0xBVElPTl9OT1RfRk9VTkQnLCBrZXksIHRvTGFuZ3VhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUcmFuc2xhdGUgYWxsIERPTSBub2RlcyB0aGF0IG1hdGNoIHRoZSBnaXZlbiBzZWxlY3RvciBpbnRvIHRoZVxyXG4gICAgICogc3BlY2lmaWVkIHRhcmdldCBsYW5ndWFnZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdG9MYW5ndWFnZSBUaGUgdGFyZ2V0IGxhbmd1YWdlXHJcbiAgICAgKi9cclxuICAgIHRyYW5zbGF0ZVBhZ2VUbyh0b0xhbmd1YWdlID0gdGhpcy5jb25maWcuZGVmYXVsdExhbmd1YWdlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2VudiA9PSAnbm9kZScpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWJ1ZygnSU5WQUxJRF9FTlZJUk9OTUVOVCcpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodHlwZW9mIHRvTGFuZ3VhZ2UgIT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWJ1ZygnSU5WQUxJRF9QQVJBTV9MQU5HVUFHRScsIHRvTGFuZ3VhZ2UpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodG9MYW5ndWFnZS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmRlYnVnKCdFTVBUWV9QQVJBTV9MQU5HVUFHRScpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMubGFuZ3VhZ2VzLmhhcyh0b0xhbmd1YWdlKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRlYnVnKCdOT19MQU5HVUFHRV9SRUdJU1RFUkVEJywgdG9MYW5ndWFnZSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID1cclxuICAgICAgICAgICAgdHlwZW9mIHRoaXMuY29uZmlnLnNlbGVjdG9yID09ICdzdHJpbmcnXHJcbiAgICAgICAgICAgICAgICA/IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLmNvbmZpZy5zZWxlY3RvcikpXHJcbiAgICAgICAgICAgICAgICA6IHRoaXMuY29uZmlnLnNlbGVjdG9yO1xyXG5cclxuICAgICAgICBpZiAoZWxlbWVudHMubGVuZ3RoICYmIGVsZW1lbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4gdGhpcy5fcmVwbGFjZShlbGVtZW50LCB0b0xhbmd1YWdlKSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50cy5sZW5ndGggPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlcGxhY2UoZWxlbWVudHMsIHRvTGFuZ3VhZ2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fY3VycmVudExhbmd1YWdlID0gdG9MYW5ndWFnZTtcclxuICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubGFuZyA9IHRvTGFuZ3VhZ2U7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5wZXJzaXN0KSB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMuY29uZmlnLnBlcnNpc3RLZXksIHRvTGFuZ3VhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRyYW5zbGF0ZSBhIGdpdmVuIGtleSBpbnRvIHRoZSBzcGVjaWZpZWQgbGFuZ3VhZ2UgaWYgaXQgZXhpc3RzXHJcbiAgICAgKiBpbiB0aGUgdHJhbnNsYXRpb24gZmlsZS4gSWYgbm90IG9yIGlmIHRoZSBsYW5ndWFnZSBoYXNuJ3QgYmVlbiBhZGRlZCB5ZXQsXHJcbiAgICAgKiB0aGUgcmV0dXJuIHZhbHVlIGlzIGBudWxsYC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5IFRoZSBrZXkgZnJvbSB0aGUgbGFuZ3VhZ2UgZmlsZSB0byB0cmFuc2xhdGVcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0b0xhbmd1YWdlIFRoZSB0YXJnZXQgbGFuZ3VhZ2VcclxuICAgICAqIEByZXR1cm4geyhTdHJpbmd8bnVsbCl9XHJcbiAgICAgKi9cclxuICAgIHRyYW5zbGF0ZUZvcktleShrZXksIHRvTGFuZ3VhZ2UgPSB0aGlzLmNvbmZpZy5kZWZhdWx0TGFuZ3VhZ2UpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGtleSAhPSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICB0aGlzLmRlYnVnKCdJTlZBTElEX1BBUkFNX0tFWScsIGtleSk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmxhbmd1YWdlcy5oYXModG9MYW5ndWFnZSkpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWJ1ZygnTk9fTEFOR1VBR0VfUkVHSVNURVJFRCcsIHRvTGFuZ3VhZ2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHRleHQgPSB0aGlzLl9nZXRWYWx1ZUZyb21KU09OKGtleSwgdG9MYW5ndWFnZSk7XHJcblxyXG4gICAgICAgIGlmICghdGV4dCkge1xyXG4gICAgICAgICAgICB0aGlzLmRlYnVnKCdUUkFOU0xBVElPTl9OT1RfRk9VTkQnLCBrZXksIHRvTGFuZ3VhZ2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkIGEgdHJhbnNsYXRpb24gcmVzb3VyY2UgdG8gdGhlIFRyYW5zbGF0b3Igb2JqZWN0LiBUaGUgbGFuZ3VhZ2VcclxuICAgICAqIGNhbiB0aGVuIGJlIHVzZWQgdG8gdHJhbnNsYXRlIHNpbmdsZSBrZXlzIG9yIHRoZSBlbnRpcmUgcGFnZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbGFuZ3VhZ2UgVGhlIHRhcmdldCBsYW5ndWFnZSB0byBhZGRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBqc29uIFRoZSBsYW5ndWFnZSByZXNvdXJjZSBmaWxlIGFzIEpTT05cclxuICAgICAqIEByZXR1cm4ge09iamVjdH0gVHJhbnNsYXRvciBpbnN0YW5jZVxyXG4gICAgICovXHJcbiAgICBhZGQobGFuZ3VhZ2UsIGpzb24pIHtcclxuICAgICAgICBpZiAodHlwZW9mIGxhbmd1YWdlICE9ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVidWcoJ0lOVkFMSURfUEFSQU1fTEFOR1VBR0UnLCBsYW5ndWFnZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGxhbmd1YWdlLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVidWcoJ0VNUFRZX1BBUkFNX0xBTkdVQUdFJyk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoanNvbikgfHwgdHlwZW9mIGpzb24gIT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWJ1ZygnSU5WQUxJRF9QQVJBTV9KU09OJywganNvbik7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKGpzb24pLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVidWcoJ0VNUFRZX1BBUkFNX0pTT04nKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmxhbmd1YWdlcy5zZXQobGFuZ3VhZ2UsIGpzb24pO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZSBhIHRyYW5zbGF0aW9uIHJlc291cmNlIGZyb20gdGhlIFRyYW5zbGF0b3Igb2JqZWN0LiBUaGUgbGFuZ3VhZ2VcclxuICAgICAqIHdvbid0IGJlIGF2YWlsYWJsZSBhZnRlcndhcmRzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBsYW5ndWFnZSBUaGUgdGFyZ2V0IGxhbmd1YWdlIHRvIHJlbW92ZVxyXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBUcmFuc2xhdG9yIGluc3RhbmNlXHJcbiAgICAgKi9cclxuICAgIHJlbW92ZShsYW5ndWFnZSkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgbGFuZ3VhZ2UgIT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWJ1ZygnSU5WQUxJRF9QQVJBTV9MQU5HVUFHRScsIGxhbmd1YWdlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobGFuZ3VhZ2UubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5kZWJ1ZygnRU1QVFlfUEFSQU1fTEFOR1VBR0UnKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmxhbmd1YWdlcy5kZWxldGUobGFuZ3VhZ2UpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZldGNoIGEgdHJhbnNsYXRpb24gcmVzb3VyY2UgZnJvbSB0aGUgd2ViIHNlcnZlci4gSXQgY2FuIGVpdGhlciBmZXRjaFxyXG4gICAgICogYSBzaW5nbGUgcmVzb3VyY2Ugb3IgYW4gYXJyYXkgb2YgcmVzb3VyY2VzLiBBZnRlciBhbGwgcmVzb3VyY2VzIGFyZSBmZXRjaGVkLFxyXG4gICAgICogcmV0dXJuIGEgUHJvbWlzZS5cclxuICAgICAqIElmIHRoZSBvcHRpb25hbCwgc2Vjb25kIHBhcmFtZXRlciBpcyBzZXQgdG8gdHJ1ZSwgdGhlIGZldGNoZWQgdHJhbnNsYXRpb25zXHJcbiAgICAgKiB3aWxsIGJlIGFkZGVkIHRvIHRoZSBUcmFuc2xhdG9yIG9iamVjdC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xBcnJheX0gc291cmNlcyBUaGUgZmlsZXMgdG8gZmV0Y2hcclxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gc2F2ZSBTYXZlIHRoZSB0cmFuc2xhdGlvbiB0byB0aGUgVHJhbnNsYXRvciBvYmplY3RcclxuICAgICAqIEByZXR1cm4geyhQcm9taXNlfG51bGwpfVxyXG4gICAgICovXHJcbiAgICBmZXRjaChzb3VyY2VzLCBzYXZlID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShzb3VyY2VzKSAmJiB0eXBlb2Ygc291cmNlcyAhPSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICB0aGlzLmRlYnVnKCdJTlZBTElEX1BBUkFNRVRFUl9TT1VSQ0VTJywgc291cmNlcyk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHNvdXJjZXMpKSB7XHJcbiAgICAgICAgICAgIHNvdXJjZXMgPSBbc291cmNlc107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB1cmxzID0gc291cmNlcy5tYXAoKHNvdXJjZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBmaWxlbmFtZSA9IHNvdXJjZS5yZXBsYWNlKC9cXC5qc29uJC8sICcnKS5yZXBsYWNlKC9eXFwvLywgJycpO1xyXG4gICAgICAgICAgICBjb25zdCBwYXRoID0gdGhpcy5jb25maWcuZmlsZXNMb2NhdGlvbi5yZXBsYWNlKC9cXC8kLywgJycpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGAke3BhdGh9LyR7ZmlsZW5hbWV9Lmpzb25gO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fZW52ID09ICdicm93c2VyJykge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwodXJscy5tYXAoKHVybCkgPT4gZmV0Y2godXJsKSkpXHJcbiAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2VzKSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZXMubWFwKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlYnVnKCdGRVRDSF9FUlJPUicsIHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAudGhlbigobGFuZ3VhZ2VGaWxlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGEgZmlsZSBjb3VsZCBub3QgYmUgZmV0Y2hlZCwgaXQgd2lsbCBiZSBgdW5kZWZpbmVkYCBhbmQgZmlsdGVyZWQgb3V0LlxyXG4gICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlRmlsZXMgPSBsYW5ndWFnZUZpbGVzLmZpbHRlcigoZmlsZSkgPT4gZmlsZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzYXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlRmlsZXMuZm9yRWFjaCgoZmlsZSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkKHNvdXJjZXNbaW5kZXhdLCBmaWxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFuZ3VhZ2VGaWxlcy5sZW5ndGggPiAxID8gbGFuZ3VhZ2VGaWxlcyA6IGxhbmd1YWdlRmlsZXNbMF07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2VudiA9PSAnbm9kZScpIHtcclxuICAgICAgICAgICAgLy8gcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICBjb25zdCBsYW5ndWFnZUZpbGVzID0gW107XHJcblxyXG4gICAgICAgICAgICAvLyAgICAgdXJscy5mb3JFYWNoKCh1cmwsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgY29uc3QganNvbiA9IEpTT04ucGFyc2UoXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICByZXF1aXJlKCdmcycpLnJlYWRGaWxlU3luYyhwcm9jZXNzLmN3ZCgpICsgdXJsLCAndXRmLTgnKVxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgaWYgKHNhdmUpIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHRoaXMuYWRkKHNvdXJjZXNbaW5kZXhdLCBqc29uKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgbGFuZ3VhZ2VGaWxlcy5wdXNoKGpzb24pO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLmRlYnVnKCdNT0RVTEVfTk9UX0ZPVU5EJywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gICAgIHJlc29sdmUobGFuZ3VhZ2VGaWxlcy5sZW5ndGggPiAxID8gbGFuZ3VhZ2VGaWxlcyA6IGxhbmd1YWdlRmlsZXNbMF0pO1xyXG4gICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBkZWZhdWx0IGxhbmd1YWdlIG9mIHRoZSB0cmFuc2xhdG9yIGluc3RhbmNlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBsYW5ndWFnZVxyXG4gICAgICogQHJldHVybiB7dm9pZH1cclxuICAgICAqL1xyXG4gICAgc2V0RGVmYXVsdExhbmd1YWdlKGxhbmd1YWdlKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBsYW5ndWFnZSAhPSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICB0aGlzLmRlYnVnKCdJTlZBTElEX1BBUkFNX0xBTkdVQUdFJywgbGFuZ3VhZ2UpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobGFuZ3VhZ2UubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5kZWJ1ZygnRU1QVFlfUEFSQU1fTEFOR1VBR0UnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmxhbmd1YWdlcy5oYXMobGFuZ3VhZ2UpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVidWcoJ05PX0xBTkdVQUdFX1JFR0lTVEVSRUQnLCBsYW5ndWFnZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jb25maWcuZGVmYXVsdExhbmd1YWdlID0gbGFuZ3VhZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBsYW5ndWFnZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XHJcbiAgICAgKi9cclxuICAgIGdldCBjdXJyZW50TGFuZ3VhZ2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRMYW5ndWFnZSB8fCB0aGlzLmNvbmZpZy5kZWZhdWx0TGFuZ3VhZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IGRlZmF1bHQgbGFuZ3VhZ2U7XHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7U3RyaW5nfVxyXG4gICAgICovXHJcbiAgICBnZXQgZGVmYXVsdExhbmd1YWdlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZy5kZWZhdWx0TGFuZ3VhZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gdGhlIGRlZmF1bHQgY29uZmlnIG9iamVjdCB3aG9zZSBrZXlzIGNhbiBiZSBvdmVycmlkZW5cclxuICAgICAqIGJ5IHRoZSB1c2VyJ3MgY29uZmlnIHBhc3NlZCB0byB0aGUgY29uc3RydWN0b3IuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7T2JqZWN0fVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0IGRlZmF1bHRDb25maWcoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZGVmYXVsdExhbmd1YWdlOiAnZW4nLFxyXG4gICAgICAgICAgICBkZXRlY3RMYW5ndWFnZTogdHJ1ZSxcclxuICAgICAgICAgICAgc2VsZWN0b3I6ICdbZGF0YS1pMThuXScsXHJcbiAgICAgICAgICAgIGRlYnVnOiBmYWxzZSxcclxuICAgICAgICAgICAgcmVnaXN0ZXJHbG9iYWxseTogJ19fJyxcclxuICAgICAgICAgICAgcGVyc2lzdDogZmFsc2UsXHJcbiAgICAgICAgICAgIHBlcnNpc3RLZXk6ICdwcmVmZXJyZWRfbGFuZ3VhZ2UnLFxyXG4gICAgICAgICAgICBmaWxlc0xvY2F0aW9uOiAnL2kxOG4nLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFRyYW5zbGF0b3I7IiwiY29uc3QgQ09OU09MRV9NRVNTQUdFUyA9IHtcclxuICAgIElOVkFMSURfUEFSQU1fTEFOR1VBR0U6IChwYXJhbSkgPT5cclxuICAgICAgICBgSW52YWxpZCBwYXJhbWV0ZXIgZm9yIFxcYGxhbmd1YWdlXFxgIHByb3ZpZGVkLiBFeHBlY3RlZCBhIHN0cmluZywgYnV0IGdvdCAke3R5cGVvZiBwYXJhbX0uYCxcclxuICAgIElOVkFMSURfUEFSQU1fSlNPTjogKHBhcmFtKSA9PlxyXG4gICAgICAgIGBJbnZhbGlkIHBhcmFtZXRlciBmb3IgXFxganNvblxcYCBwcm92aWRlZC4gRXhwZWN0ZWQgYW4gb2JqZWN0LCBidXQgZ290ICR7dHlwZW9mIHBhcmFtfS5gLFxyXG4gICAgRU1QVFlfUEFSQU1fTEFOR1VBR0U6ICgpID0+XHJcbiAgICAgICAgYFRoZSBwYXJhbWV0ZXIgZm9yIFxcYGxhbmd1YWdlXFxgIGNhbid0IGJlIGFuIGVtcHR5IHN0cmluZy5gLFxyXG4gICAgRU1QVFlfUEFSQU1fSlNPTjogKCkgPT5cclxuICAgICAgICBgVGhlIHBhcmFtZXRlciBmb3IgXFxganNvblxcYCBtdXN0IGhhdmUgYXQgbGVhc3Qgb25lIGtleS92YWx1ZSBwYWlyLmAsXHJcbiAgICBJTlZBTElEX1BBUkFNX0tFWTogKHBhcmFtKSA9PlxyXG4gICAgICAgIGBJbnZhbGlkIHBhcmFtZXRlciBmb3IgXFxga2V5XFxgIHByb3ZpZGVkLiBFeHBlY3RlZCBhIHN0cmluZywgYnV0IGdvdCAke3R5cGVvZiBwYXJhbX0uYCxcclxuICAgIE5PX0xBTkdVQUdFX1JFR0lTVEVSRUQ6IChsYW5ndWFnZSkgPT5cclxuICAgICAgICBgTm8gdHJhbnNsYXRpb24gZm9yIGxhbmd1YWdlIFwiJHtsYW5ndWFnZX1cIiBoYXMgYmVlbiBhZGRlZCwgeWV0LiBNYWtlIHN1cmUgdG8gcmVnaXN0ZXIgdGhhdCBsYW5ndWFnZSB1c2luZyB0aGUgXFxgLmFkZCgpXFxgIG1ldGhvZCBmaXJzdC5gLFxyXG4gICAgVFJBTlNMQVRJT05fTk9UX0ZPVU5EOiAoa2V5LCBsYW5ndWFnZSkgPT5cclxuICAgICAgICBgTm8gdHJhbnNsYXRpb24gZm91bmQgZm9yIGtleSBcIiR7a2V5fVwiIGluIGxhbmd1YWdlIFwiJHtsYW5ndWFnZX1cIi4gSXMgdGhlcmUgYSBrZXkvdmFsdWUgaW4geW91ciB0cmFuc2xhdGlvbiBmaWxlP2AsXHJcbiAgICBJTlZBTElEX1BBUkFNRVRFUl9TT1VSQ0VTOiAocGFyYW0pID0+XHJcbiAgICAgICAgYEludmFsaWQgcGFyYW1ldGVyIGZvciBcXGBzb3VyY2VzXFxgIHByb3ZpZGVkLiBFeHBlY3RlZCBlaXRoZXIgYSBzdHJpbmcgb3IgYW4gYXJyYXksIGJ1dCBnb3QgJHt0eXBlb2YgcGFyYW19LmAsXHJcbiAgICBGRVRDSF9FUlJPUjogKHJlc3BvbnNlKSA9PlxyXG4gICAgICAgIGBDb3VsZCBub3QgZmV0Y2ggXCIke3Jlc3BvbnNlLnVybH1cIjogJHtyZXNwb25zZS5zdGF0dXN9ICgke3Jlc3BvbnNlLnN0YXR1c1RleHR9KWAsXHJcbiAgICBJTlZBTElEX0VOVklST05NRU5UOiAoKSA9PlxyXG4gICAgICAgIGBZb3UgYXJlIHRyeWluZyB0byBleGVjdXRlIHRoZSBtZXRob2QgXFxgdHJhbnNsYXRlUGFnZVRvKClcXGAsIHdoaWNoIGlzIG9ubHkgYXZhaWxhYmxlIGluIHRoZSBicm93c2VyLiBZb3VyIGVudmlyb25tZW50IGlzIG1vc3QgbGlrZWx5IE5vZGUuanNgLFxyXG4gICAgTU9EVUxFX05PVF9GT1VORDogKG1lc3NhZ2UpID0+IG1lc3NhZ2UsXHJcbiAgICBNSVNNQVRDSElOR19BVFRSSUJVVEVTOiAoa2V5cywgYXR0cmlidXRlcywgZWxlbWVudCkgPT5cclxuICAgICAgICBgVGhlIGF0dHJpYnV0ZXMgXCJkYXRhLWkxOG5cIiBhbmQgXCJkYXRhLWkxOG4tYXR0clwiIG11c3QgY29udGFpbiB0aGUgc2FtZSBudW1iZXIgb2Yga2V5cy5cclxuXHJcblZhbHVlcyBpbiBcXGBkYXRhLWkxOG5cXGA6ICAgICAgKCR7a2V5cy5sZW5ndGh9KSBcXGAke2tleXMuam9pbignICcpfVxcYFxyXG5WYWx1ZXMgaW4gXFxgZGF0YS1pMThuLWF0dHJcXGA6ICgke2F0dHJpYnV0ZXMubGVuZ3RofSkgXFxgJHthdHRyaWJ1dGVzLmpvaW4oJyAnKX1cXGBcclxuXHJcblRoZSBIVE1MIGVsZW1lbnQgaXM6XHJcbiR7ZWxlbWVudC5vdXRlckhUTUx9YCxcclxuICAgIElOVkFMSURfT1BUSU9OUzogKHBhcmFtKSA9PlxyXG4gICAgICAgIGBJbnZhbGlkIGNvbmZpZyBwYXNzZWQgdG8gdGhlIFxcYFRyYW5zbGF0b3JcXGAgY29uc3RydWN0b3IuIEV4cGVjdGVkIGFuIG9iamVjdCwgYnV0IGdvdCAke3R5cGVvZiBwYXJhbX0uIFVzaW5nIGRlZmF1bHQgY29uZmlnIGluc3RlYWQuYCxcclxufTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGlzRW5hYmxlZFxyXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBsb2dnZXIoaXNFbmFibGVkKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gbG9nKGNvZGUsIC4uLmFyZ3MpIHtcclxuICAgICAgICBpZiAoaXNFbmFibGVkKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gQ09OU09MRV9NRVNTQUdFU1tjb2RlXTtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IobWVzc2FnZSA/IG1lc3NhZ2UoLi4uYXJncykgOiAnVW5oYW5kbGVkIEVycm9yJyk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lID0gZXguc3RhY2suc3BsaXQoL1xcbi9nKVsxXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IFttZXRob2QsIGZpbGVwYXRoXSA9IGxpbmUuc3BsaXQoL0AvKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGAke2V4Lm1lc3NhZ2V9XHJcblxyXG5UaGlzIGVycm9yIGhhcHBlbmVkIGluIHRoZSBtZXRob2QgXFxgJHttZXRob2R9XFxgIGZyb206IFxcYCR7ZmlsZXBhdGh9XFxgLlxyXG5cclxuSWYgeW91IGRvbid0IHdhbnQgdG8gc2VlIHRoZXNlIGVycm9yIG1lc3NhZ2VzLCB0dXJuIG9mZiBkZWJ1Z2dpbmcgYnkgcGFzc2luZyBcXGB7IGRlYnVnOiBmYWxzZSB9XFxgIHRvIHRoZSBjb25zdHJ1Y3Rvci5cclxuXHJcbkVycm9yIGNvZGU6ICR7Y29kZX1cclxuXHJcbkNoZWNrIG91dCB0aGUgZG9jdW1lbnRhdGlvbiBmb3IgbW9yZSBkZXRhaWxzIGFib3V0IHRoZSBBUEk6XHJcbmh0dHBzOi8vZ2l0aHViLmNvbS9hbmRyZWFzcmVtZHQvc2ltcGxlLXRyYW5zbGF0b3IjdXNhZ2VcclxuICAgICAgICBgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0iLCIvL2ltcG9ydCAqIGFzIEdyYWJUb1BhbiBmcm9tICcuL2dyYWItdG8tcGFuLmpzJztcclxuXHJcbmNvbnN0IGlzTm90SUVvcklzSUUxMHBsdXMgPSAhZG9jdW1lbnQuZG9jdW1lbnRNb2RlIHx8IGRvY3VtZW50LmRvY3VtZW50TW9kZSA+IDk7XHJcbmNvbnN0IGNocm9tZTIgPSB3aW5kb3cuY2hyb21lO1xyXG5jb25zdCBpc0Nocm9tZTE1T3JPcGVyYTE1cGx1cyA9IGNocm9tZTIgJiYgKGNocm9tZTIud2Vic3RvcmUgfHwgY2hyb21lMi5hcHApO1xyXG5jb25zdCBpc1NhZmFyaTZwbHVzID0gL0FwcGxlLy50ZXN0KG5hdmlnYXRvci52ZW5kb3IpICYmIC9WZXJzaW9uXFwvKFs2LTldXFxkKnxbMS01XVxcZCspLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG5cclxuZnVuY3Rpb24gaXNMZWZ0TW91c2VSZWxlYXNlZChldmVudCkge1xyXG4gICAgICAgIGlmIChcImJ1dHRvbnNcIiBpbiBldmVudCAmJiBpc05vdElFb3JJc0lFMTBwbHVzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gIShldmVudC5idXR0b25zICYgMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoaXNDaHJvbWUxNU9yT3BlcmExNXBsdXMgfHwgaXNTYWZhcmk2cGx1cykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGV2ZW50LndoaWNoID09PSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbiAgICAgICAgICAgICAgICBcclxubGV0IG1hdGNoZXNTZWxlY3RvcjtcclxuW1wid2Via2l0TVwiLCBcIm1vek1cIiwgXCJtc01cIiwgXCJvTVwiLCBcIm1cIl0uc29tZShmdW5jdGlvbiAocHJlZml4KSB7XHJcbiAgICAgICAgbGV0IG5hbWUgPSBwcmVmaXggKyBcImF0Y2hlc1wiO1xyXG5cclxuICAgICAgICBpZiAobmFtZSBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIG1hdGNoZXNTZWxlY3RvciA9IG5hbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBuYW1lICs9IFwiU2VsZWN0b3JcIjtcclxuXHJcbiAgICAgICAgaWYgKG5hbWUgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBtYXRjaGVzU2VsZWN0b3IgPSBuYW1lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG1hdGNoZXNTZWxlY3RvcjtcclxufSk7XHJcblxyXG5jb25zdCBDdXJzb3JUb29sID0ge1xyXG4gICAgICAgIFNFTEVDVDogMCxcclxuICAgICAgICBIQU5EOiAxLFxyXG4gICAgICAgIFpPT006IDJcclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBQREZDdXJzb3JUb29scyB7XHJcbiAgICAgICAgY29uc3RydWN0b3Ioe1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLFxyXG4gICAgICAgICAgICAgICAgZXZlbnRCdXMsXHJcbiAgICAgICAgICAgICAgICBjdXJzb3JUb29sT25Mb2FkID0gMVxyXG4gICAgICAgIH0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudEJ1cyA9IGV2ZW50QnVzO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVCZWZvcmVQcmVzZW50YXRpb25Nb2RlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZFRvb2wgPSBuZXcgR3JhYlRvUGFuKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogdGhpcy5jb250YWluZXJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3dpdGNoVG9vbChjdXJzb3JUb29sT25Mb2FkKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZ2V0IGFjdGl2ZVRvb2woKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzd2l0Y2hUb29sKHRvb2wpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZUJlZm9yZVByZXNlbnRhdGlvbk1vZGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0b29sID09PSB0aGlzLmFjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlzYWJsZUFjdGl2ZVRvb2wgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy5hY3RpdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEN1cnNvclRvb2wuU0VMRUNUOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ3Vyc29yVG9vbC5IQU5EOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kVG9vbC5kZWFjdGl2YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDdXJzb3JUb29sLlpPT006XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRvb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDdXJzb3JUb29sLlNFTEVDVDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlQWN0aXZlVG9vbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDdXJzb3JUb29sLkhBTkQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZUFjdGl2ZVRvb2woKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRUb29sLmFjdGl2YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEN1cnNvclRvb2wuWk9PTTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBzd2l0Y2hUb29sOiBcIiR7dG9vbH1cIiBpcyBhbiB1bnN1cHBvcnRlZCB2YWx1ZS5gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSB0b29sO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2Rpc3BhdGNoRXZlbnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF9kaXNwYXRjaEV2ZW50KCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudEJ1cy5kaXNwYXRjaChcImN1cnNvcnRvb2xjaGFuZ2VkXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sOiB0aGlzLmFjdGl2ZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50QnVzLl9vbihcInN3aXRjaGN1cnNvcnRvb2xcIiwgZXZ0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hUb29sKGV2dC50b29sKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRCdXMuX29uKFwicHJlc2VudGF0aW9ubW9kZWNoYW5nZWRcIiwgZXZ0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2dC5zd2l0Y2hJblByb2dyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcHJldmlvdXNseUFjdGl2ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldnQuYWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNseUFjdGl2ZSA9IHRoaXMuYWN0aXZlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3dpdGNoVG9vbChDdXJzb3JUb29sLlNFTEVDVCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVCZWZvcmVQcmVzZW50YXRpb25Nb2RlID0gcHJldmlvdXNseUFjdGl2ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c2x5QWN0aXZlID0gdGhpcy5hY3RpdmVCZWZvcmVQcmVzZW50YXRpb25Nb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlQmVmb3JlUHJlc2VudGF0aW9uTW9kZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hUb29sKHByZXZpb3VzbHlBY3RpdmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG59IiwiXHJcbi8qKlxyXG4gKiBAbW9kdWxlIFRlbXBsYXRlL0RhdGFcclxuICovXHJcblxyXG5pbXBvcnQge1V0aWxzfSBmcm9tICcuLy4uL3V0aWxzL3V0aWxzLmpzJztcclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICog66y47ISc7J2YIOydtOumhOqzvCDshJzrqoXsnpDsnZgg7KCV67O066W8IOuLtOqzoCDsnojripQgQ2xhc3MgPGJyLz5cclxuICogSlNPTuuNsOydtO2EsOulvCDstpTstpztlZjquLAg7JyE7ZW0IOunjOuTpOyWtOynhCBEYXRhIENsYXNzXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBmb3JtVGVtcGxhdGVOYW1lIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZURhdGEjZm9ybVRlbXBsYXRlTmFtZX1cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IGZvcm1UZW1wbGF0ZVVVSUQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9EYXRhLlRlbXBsYXRlRGF0YSNmb3JtVGVtcGxhdGVVVUlEfVxyXG4gKiBAcHJvcGVydHkge0FycmF5fSBmb3JtZXJMaXN0IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZURhdGEjZm9ybWVyTGlzdH1cclxuICpcclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gcHVzaE93bmVyIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZURhdGEjcHVzaE93bmVyfVxyXG4gKiBcclxuICogQGV4YW1wbGVcclxuICogIOyVhOuemOyZgCDqsJnsnbQgSlNPTuuNsOydtO2EsOulvCDrp4zrk6Qg65WMIOyCrOyaqeuQnOuLpC5cclxuICogIHtcclxuICAgICAgICBcImZvcm1UZW1wbGF0ZU5hbWVcIjogXCJGb3JtIFRlbXBsYXRlIOusuOyEnCDsnbTrpoRcIixcclxuICAgICAgICBcImZvcm1UZW1wbGF0ZVVVSURcIjogXCJGb3JtIFRlbXBsYXRlIOusuOyEnCBVVUlEXCIsXHJcbiAgICAgICAgXCJmb3JtZXJMaXN0XCI6IFsgIC0tIFRlbXBsYXRlRGF0YU93bmVyIERhdGEgQ2xhc3NcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJwYWdlc1wiOiBbICAtLSBUZW1wbGF0ZURhdGFQYWdlIERhdGEgQ2xhc3NcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwicGFnZU5vXCI6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZmllbGRzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF1cclxuICAgIH1cclxuICpcclxuICogQEZpbGVOYW1lIFRlbXBsYXRlRGF0YS5qc1xyXG4gKiBAc2luY2UgMjAyMS4wNS4zMVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRlbXBsYXRlRGF0YSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFRlbXBsYXRlIOusuOyEnCDsnbTrpoQuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCB1dWlkKSB7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0RhdGEuVGVtcGxhdGVEYXRhI2Zvcm1UZW1wbGF0ZU5hbWVcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gIFRlbXBsYXRlIOusuOyEnCDsnbTrpoQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5mb3JtVGVtcGxhdGVOYW1lID0gbmFtZTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZURhdGEjZm9ybVRlbXBsYXRlVVVJRFxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiAgVGVtcGxhdGUg66y47IScIFVVSUQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5mb3JtVGVtcGxhdGVVVUlEID0gdXVpZDtcclxuICAgICAgICBpZiAodXVpZCA9PT0gdW5kZWZpbmVkIHx8IHV1aWQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5mb3JtVGVtcGxhdGVVVUlEID0gVXRpbHMuZ2VuZXJhdGVfdXVpZHY0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7QXJyYXl9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0RhdGEuVGVtcGxhdGVEYXRhI2Zvcm1lckxpc3RcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gIFRlbXBsYXRlRGF0YU93bmVyIEFycmF5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5mb3JtZXJMaXN0ID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gcHVzaE93bmVyXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZURhdGEjcHVzaE93bmVyXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gVGVtcGxhdGVEYXRhT3duZXLrpbwg7LaU6rCA7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvd25lckRhdGEg7LaU6rCA7ZWgIOyEnOuqheyekCDrjbDsnbTthLAgVGVtcGxhdGVEYXRhT3duZXJcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICovXHJcbiAgICBwdXNoT3duZXIob3duZXJEYXRhKSB7XHJcbiAgICAgICAgdGhpcy5mb3JtZXJMaXN0LnB1c2gob3duZXJEYXRhKTtcclxuICAgIH1cclxufSIsIlxyXG4vKipcclxuICogQG1vZHVsZSBUZW1wbGF0ZS9EYXRhXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiDtjpjsnbTsp4Ag7KCV67O066W8IOuLtOqzoCDsnojripQg7ISc66qF7J6QIOygleuztCBDbGFzczxici8+XHJcbiAqIEpTT07rjbDsnbTthLDrpbwg7LaU7Lac7ZWY6riwIOychO2VtCDrp4zrk6TslrTsp4QgRGF0YSBDbGFzc1xyXG4gKiBcclxuICpcclxuICogQHByb3BlcnR5IHtBcnJheX0gcGFnZXMge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9EYXRhLlRlbXBsYXRlRGF0YU93bmVyI3BhZ2VzfVxyXG4gKlxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBwdXNoUGFnZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL0RhdGEuVGVtcGxhdGVEYXRhT3duZXIjcHVzaFBhZ2V9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNsb25lVGVtcGxhdGVEYXRhT3duZXJPYmplY3Qge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9EYXRhLlRlbXBsYXRlRGF0YU93bmVyI2Nsb25lVGVtcGxhdGVEYXRhT3duZXJPYmplY3R9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNsb25lT2JqZWN0IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZURhdGFPd25lciNjbG9uZU9iamVjdH1cclxuICogXHJcbiAqIEBzZWUgbW9kdWxlOlRlbXBsYXRlL0RhdGEuVGVtcGxhdGVEYXRhXHJcbiAqIEBGaWxlTmFtZSBUZW1wbGF0ZURhdGFPd25lci5qc1xyXG4gKiBAc2luY2UgMjAyMS4wNS4zMVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRlbXBsYXRlRGF0YU93bmVyIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge0FycmF5fVxyXG4gICAgICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9EYXRhLlRlbXBsYXRlRGF0YU93bmVyI3BhZ2VzXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uICBUZW1wbGF0ZURhdGFQYWdlIO2BtOuemOyKpCDrsLDsl7RcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnBhZ2VzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gcHVzaFBhZ2VcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9EYXRhLlRlbXBsYXRlRGF0YU93bmVyI3B1c2hQYWdlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gVGVtcGxhdGVEYXRhUGFnZSBPYmplY3Trpbwg7LaU6rCA7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlICBUZW1wbGF0ZURhdGFQYWdlIE9iamVjdFxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgKi9cclxuICAgIHB1c2hQYWdlKHBhZ2UpIHtcclxuICAgICAgICB0aGlzLnBhZ2VzLnB1c2gocGFnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gY2xvbmVUZW1wbGF0ZURhdGFPd25lck9iamVjdFxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0RhdGEuVGVtcGxhdGVEYXRhT3duZXIjY2xvbmVUZW1wbGF0ZURhdGFPd25lck9iamVjdFxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIFRlbXBsYXRlRGF0YU93bmVyIOyYpOu4jOygne2KuOulvCDrs7XsgqztlZzri6QuXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogIOuzteyCrO2VoCBPYmplY3RcclxuICAgICAqIEByZXR1cm4ge09iamVjdH0gVGVtcGxhdGVEYXRhT3duZXIgT2JqZWN0XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAqL1xyXG4gICAgc3RhdGljIGNsb25lVGVtcGxhdGVEYXRhT3duZXJPYmplY3Qob2JqKSB7XHJcbiAgICAgICAgdmFyIGNsb25lID0gbmV3IFRlbXBsYXRlRGF0YU93bmVyKCk7XHJcbiAgICAgICAgZm9yICh2YXIga2V5IGluIG9iaikge1xyXG4gICAgICAgICAgICBpZiAoa2V5ID09PSBcInBhZ2VzXCIgfHwga2V5ID09PSBcImZpZWxkc1wiKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9ialtrZXldID09IFwib2JqZWN0XCIgJiYgb2JqW2tleV0gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY2xvbmVba2V5XSA9IFRlbXBsYXRlRGF0YU93bmVyLmNsb25lT2JqZWN0KG9ialtrZXldKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNsb25lW2tleV0gPSBvYmpba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGNsb25lO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGNsb25lT2JqZWN0XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZURhdGFPd25lciNjbG9uZU9iamVjdFxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIOyYpOu4jOygne2KuOulvCDrs7XsgqztlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiAg67O17IKs7ZWgIE9iamVjdFxyXG4gICAgICogQHJldHVybiB7T2JqZWN0fVxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgKi9cclxuICAgIHN0YXRpYyBjbG9uZU9iamVjdChvYmopIHtcclxuICAgICAgICB2YXIgY2xvbmUgPSB7fTtcclxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgIGlmIChrZXkgPT09IFwicGFnZXNcIiB8fCBrZXkgPT09IFwiZmllbGRzXCIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqW2tleV0gPT0gXCJvYmplY3RcIiAmJiBvYmpba2V5XSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjbG9uZVtrZXldID0gVGVtcGxhdGVEYXRhT3duZXIuY2xvbmVPYmplY3Qob2JqW2tleV0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2xvbmVba2V5XSA9IG9ialtrZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY2xvbmU7XHJcbiAgICB9XHJcblxyXG59XHJcbiIsIlxyXG4vKipcclxuICogQG1vZHVsZSBUZW1wbGF0ZS9EYXRhXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiAg7ZWE65OcIOumrOyKpO2KuCDsoJXrs7Trpbwg64u06rOgIOyeiOuKlCDtjpjsnbTsp4Ag7KCV67O0IENsYXNzPGJyLz5cclxuICogSlNPTuuNsOydtO2EsOulvCDstpTstpztlZjquLAg7JyE7ZW0IOunjOuTpOyWtOynhCBEYXRhIENsYXNzXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBwYWdlTm8ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9EYXRhLlRlbXBsYXRlRGF0YVBhZ2UjcGFnZU5vfVxyXG4gKiBAcHJvcGVydHkge0FycmF5fSBmaWVsZHMge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9EYXRhLlRlbXBsYXRlRGF0YVBhZ2UjZmllbGRzfVxyXG4gKlxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBwdXNoRmllbGQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9EYXRhLlRlbXBsYXRlRGF0YVBhZ2UjcHVzaEZpZWxkfVxyXG4gKlxyXG4gKiBAc2VlIG1vZHVsZTpUZW1wbGF0ZS9EYXRhLlRlbXBsYXRlRGF0YVxyXG4gKiBARmlsZU5hbWUgVGVtcGxhdGVEYXRhUGFnZS5qc1xyXG4gKiBAc2luY2UgMjAyMS4wNS4zMVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRlbXBsYXRlRGF0YVBhZ2Uge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHBhZ2VObyDtjpjsnbTsp4Ag67KI7Zi4XHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHBhZ2VObykge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XHJcbiAgICAgICAgICogQG5hbWUgbW9kdWxlOiBUZW1wbGF0ZS9EYXRhLlRlbXBsYXRlRGF0YVBhZ2UjcGFnZU5vXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uICDtjpjsnbTsp4Ag67KI7Zi4XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5wYWdlTm8gPSBwYWdlTm87XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtBcnJheX1cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZURhdGFQYWdlI2ZpZWxkc1xyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiAgRmllbGQg66as7Iqk7Yq4LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuZmllbGRzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gcHVzaEZpZWxkXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZURhdGFPd25lciNwdXNoRmllbGRcclxuICAgICAqIEBkZXNjcmlwdGlvbiBGaWVsZCBPYmplY3Trpbwg7LaU6rCA7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBmaWVsZCAgRmllbGQgT2JqZWN0XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAqL1xyXG4gICAgcHVzaEZpZWxkKGZpZWxkKSB7XHJcbiAgICAgICAgdGhpcy5maWVsZHMucHVzaChmaWVsZCk7XHJcbiAgICB9XHJcbn0iLCJcclxuLyoqXHJcbiAqIEBtb2R1bGUgVGVtcGxhdGUvRGF0YVxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24g7ISc66qF7J6QIOygleuztCBDbGFzc1xyXG4gKiBcclxuICpcclxuICogQHByb3BlcnR5IHtBcnJheX0gZmllbGRzIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZVVzZXJGaWVsZEluZm8jZmllbGRzfVxyXG4gKlxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBwdXNoRmllbGQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9EYXRhLlRlbXBsYXRlVXNlckZpZWxkSW5mbyNwdXNoRmllbGR9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGZpZWxkIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZVVzZXJGaWVsZEluZm8jZmllbGR9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHJlbW92ZUZpZWxkIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZVVzZXJGaWVsZEluZm8jcmVtb3ZlRmllbGR9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNvbnRhaW5zIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZVVzZXJGaWVsZEluZm8jY29udGFpbnN9XHJcbiAqIFxyXG4gKiBAY2xhc3NcclxuICogQEZpbGVOYW1lIFRlbXBsYXRlVXNlckZpZWxkSW5mby5qc1xyXG4gKiBAc2luY2UgMjAyMS4wNS4zMVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRlbXBsYXRlVXNlckZpZWxkSW5mbyB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtBcnJheX1cclxuICAgICAgICAgKiBAbmFtZSBtb2R1bGU6IFRlbXBsYXRlL0RhdGEuVGVtcGxhdGVVc2VyRmllbGRJbmZvI2ZpZWxkc1xyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiAgRmllbGQg66as7Iqk7Yq4LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuZmllbGRzID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gcHVzaEZpZWxkXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZVVzZXJGaWVsZEluZm8jcHVzaEZpZWxkXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gRmllbGQgT2JqZWN066W8IOy2lOqwgO2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZmllbGQgIEZpZWxkIE9iamVjdFxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgKi9cclxuICAgIHB1c2hGaWVsZChmaWVsZElkLCBmaWVsZCkge1xyXG4gICAgICAgIHRoaXMuZmllbGRzW2ZpZWxkSWRdID0gZmllbGQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZnVuY3Rpb24gZmllbGRcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9EYXRhLlRlbXBsYXRlVXNlckZpZWxkSW5mbyNmaWVsZFxyXG4gICAgICogQGRlc2NyaXB0aW9uIElE7JeQIO2VtOuLue2VmOuKlCBGaWVsZCBPYmplY3Trpbwg66as7YS07ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZElkICBGaWVsZCBJRFxyXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBGaWVsZCBPYmplY3RcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICovXHJcbiAgICBmaWVsZChmaWVsZElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmllbGRzW2ZpZWxkSWRdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGZ1bmN0aW9uIHJlbW92ZUZpZWxkXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvRGF0YS5UZW1wbGF0ZVVzZXJGaWVsZEluZm8jcmVtb3ZlRmllbGRcclxuICAgICAqIEBkZXNjcmlwdGlvbiBJROyXkCDtlbTri7ntlZjripQgRmllbGQgT2JqZWN066W8IOyCreygnO2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRJZCAgRmllbGQgSURcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICovXHJcbiAgICByZW1vdmVGaWVsZChmaWVsZElkKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29udGFpbnMoZmllbGRJZCkpIHtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuZmllbGRzW2ZpZWxkSWRdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBmdW5jdGlvbiBjb250YWluc1xyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL0RhdGEuVGVtcGxhdGVVc2VyRmllbGRJbmZvI2NvbnRhaW5zXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gSUTsl5Ag7ZW064u57ZWY64qUIEZpZWxkIE9iamVjdOqwgCDsobTsnqztlZjripTsp4Ag7Jes67aA66W8IOumrO2EtO2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRJZCAgRmllbGQgSURcclxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59fSDsobTsnqztlZjrqbQgVHJ1ZSDslYTri4jrqbQgZmFsc2VcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICovXHJcbiAgICBjb250YWlucyhmaWVsZElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmllbGRzLmhhc093blByb3BlcnR5KGZpZWxkSWQpO1xyXG4gICAgfVxyXG59IiwiXHJcbi8qKlxyXG4gKiBAbW9kdWxlIFRlbXBsYXRlL1RlbXBsYXRlTW9kXHJcbiAqL1xyXG5cclxuaW1wb3J0IGFuaW1lIGZyb20gJ2FuaW1lanMvbGliL2FuaW1lLmVzLmpzJztcclxuXHJcbmltcG9ydCB7VXRpbHN9IGZyb20gJy4vLi4vdXRpbHMvdXRpbHMuanMnO1xyXG5pbXBvcnQge0NPTlNUQU5UU30gZnJvbSAnLi8uLi9Db25zdGFudHMuanMnO1xyXG5pbXBvcnQge0Jhc2VGaWVsZH0gZnJvbSAnLi8uLi9GaWVsZHMvQmFzZUZpZWxkJztcclxuaW1wb3J0IHtUZXh0RmllbGR9IGZyb20gJy4vLi4vRmllbGRzL1RleHRGaWVsZCc7XHJcbmltcG9ydCB7TnVtYmVyRmllbGR9IGZyb20gJy4vLi4vRmllbGRzL051bWJlckZpZWxkJztcclxuaW1wb3J0IHtEYXRlRmllbGR9IGZyb20gJy4vLi4vRmllbGRzL0RhdGVGaWVsZCc7XHJcbmltcG9ydCB7U2lnbkZpZWxkfSBmcm9tICcuLy4uL0ZpZWxkcy9TaWduRmllbGQnO1xyXG5pbXBvcnQge1RleHRCYXNlRmllbGR9IGZyb20gJy4vLi4vRmllbGRzL1RleHRCYXNlRmllbGQuanMnO1xyXG5pbXBvcnQge0ltYWdlRmllbGR9IGZyb20gXCIuLi9GaWVsZHMvSW1hZ2VGaWVsZC5qc1wiO1xyXG5pbXBvcnQge011bHRpTGluZVRleHRGaWVsZH0gZnJvbSBcIi4uL0ZpZWxkcy9NdWx0aUxpbmVUZXh0RmllbGQuanNcIjtcclxuaW1wb3J0IHtDaGVja2JveEZpZWxkfSBmcm9tIFwiLi4vRmllbGRzL0NoZWNrYm94RmllbGQuanNcIjtcclxuaW1wb3J0IHtSYWRpb0ZpZWxkfSBmcm9tIFwiLi4vRmllbGRzL1JhZGlvRmllbGQuanNcIjtcclxuaW1wb3J0IHtMYWJlbEZpZWxkfSBmcm9tIFwiLi4vRmllbGRzL0xhYmVsRmllbGQuanNcIjtcclxuaW1wb3J0IHtDb21ib2JveEZpZWxkfSBmcm9tIFwiLi4vRmllbGRzL0NvbWJvYm94RmllbGQuanNcIjtcclxuXHJcbmltcG9ydCB7VGVtcGxhdGVEYXRhfSBmcm9tICcuL3RlbXBsYXRlRGF0YS5qcyc7XHJcbmltcG9ydCB7VGVtcGxhdGVEYXRhT3duZXJ9IGZyb20gJy4vdGVtcGxhdGVEYXRhT3duZXIuanMnO1xyXG5pbXBvcnQge1RlbXBsYXRlRGF0YVBhZ2V9IGZyb20gJy4vdGVtcGxhdGVEYXRhUGFnZS5qcyc7XHJcbmltcG9ydCB7VGVtcGxhdGVVc2VyRmllbGRJbmZvfSBmcm9tICcuL3RlbXBsYXRlVXNlckZpZWxkSW5mby5qcyc7XHJcblxyXG5cclxuXHJcbnZhciBfdGVtcGxhdGVNb2Q7XHJcblxyXG4vKipcclxuICogQGRlc2NyaXB0aW9uIO2VhOuTnCDqtIDroKgg7LKY66as66W8IO2VmOuKlCBDbGFzc1xyXG4gKiBcclxuICogQHByb3BlcnR5IHtCb29sZWFufSBkcmFnU3RhcnQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNkcmFnU3RhcnR9XHJcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBkcmFnQm94IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZHJhZ0JveH1cclxuICogQHByb3BlcnR5IHtPYmplY3R9IG1haW5DYW52YXMge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNtYWluQ2FudmFzfVxyXG4gKiBAcHJvcGVydHkge1JlY3R9IHBhZ2VCb3VuZGluZ0JveCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3BhZ2VCb3VuZGluZ0JveH1cclxuICogQHByb3BlcnR5IHtPYmplY3R9IHRlbXBsYXRlUmVjdE1vdXNlUG9zaXRpb24ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCN0ZW1wbGF0ZVJlY3RNb3VzZVBvc2l0aW9ufVxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gc2VsZWN0QWRkRmllbGRUeXBlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2Qjc2VsZWN0QWRkRmllbGRUeXBlfVxyXG4gKiBAcHJvcGVydHkge09iamVjdH0gZmllbGREaWN0aW9uYXJ5IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZmllbGREaWN0aW9uYXJ5fVxyXG4gKiBAcHJvcGVydHkge051bWJlcn0gdW5yZWRvQWN0aW9uSWR4IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjdW5yZWRvQWN0aW9uSWR4fVxyXG4gKiBAcHJvcGVydHkge09iamVjdH0gdW5yZWRvQWN0aW9uRGljdCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3VucmVkb0FjdGlvbkRpY3R9XHJcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBwZGZWaWV3ZXIge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNwZGZWaWV3ZXJ9XHJcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSB0ZW1wbGF0ZVVzZXJGaWVsZEluZm8ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCN0ZW1wbGF0ZVVzZXJGaWVsZEluZm99XHJcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBvd25lck5vZGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNvd25lck5vZGV9XHJcbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gaXNGaWVsZERyYWdTdGFydCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2lzRmllbGREcmFnU3RhcnR9XHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBtZW51Q29kZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI21lbnVDb2RlfVxyXG4gKlxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBhZGRVbmRvUmVkb0FjdCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2FkZFVuZG9SZWRvQWN0fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBidWlsZERWT3B0c0luZm8ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNidWlsZERWT3B0c0luZm99XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGJ1aWxkRmllbGRmb3JtZXJMaXN0IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjYnVpbGRGaWVsZGZvcm1lckxpc3R9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGJ1aWxkRmllbGRVc2VySW5mbyB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2J1aWxkRmllbGRVc2VySW5mb31cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gY2FsY0ZpZWxkUG9zdGlvbiB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2NhbGNGaWVsZFBvc3Rpb259XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNhbGNUZW1wbGF0ZUJvdW5kYXJ5IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjY2FsY1RlbXBsYXRlQm91bmRhcnl9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNoYW5nZUZpZWxkUG9zaXRpb24ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNjaGFuZ2VGaWVsZFBvc2l0aW9ufVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBjaGFuZ2VGaWVsZFZhbHVlRXZlbnQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNjaGFuZ2VGaWVsZFZhbHVlRXZlbnR9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNoYW5nZUZyZWVUcmFuc2Zvcm0ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNjaGFuZ2VGcmVlVHJhbnNmb3JtfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBjaGFuZ2VHcm91cEJveEZyZWVUcmFuc2Zvcm0ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNjaGFuZ2VHcm91cEJveEZyZWVUcmFuc2Zvcm19XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNoZWNrVGVtcGxhdGVGaWVsZERhdGEge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNjaGVja1RlbXBsYXRlRmllbGREYXRhfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBjbGVhclNlbGVjdGVkVG9vbCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2NsZWFyU2VsZWN0ZWRUb29sfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBjb252ZXJ0VXNlckxpc3RUb1NlbGVjdE9wdGlvbnMge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNjb252ZXJ0VXNlckxpc3RUb1NlbGVjdE9wdGlvbnN9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNyZWF0ZURyYWdPdmVyR3JvdXAge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNjcmVhdGVEcmFnT3Zlckdyb3VwfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBjcmVhdGVGaWVsZCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2NyZWF0ZUZpZWxkfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBjcmVhdGVGaWVsZE9iamVjdCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2NyZWF0ZUZpZWxkT2JqZWN0fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBjcmVhdGVUZW1wbGF0ZVJlY3Qge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNjcmVhdGVUZW1wbGF0ZVJlY3R9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGRyYWdlbmRGdW5jIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZHJhZ2VuZEZ1bmN9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGRyYWdtb3ZlRnVuYyB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2RyYWdtb3ZlRnVuY31cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZHJhZ3N0YXJ0RnVuYyB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2RyYWdzdGFydEZ1bmN9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGV4cG9ydEZpZWxkRGF0YSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2V4cG9ydEZpZWxkRGF0YX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZmllbGREZWxldGVCdG5DbGlja2VkIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZmllbGREZWxldGVCdG5DbGlja2VkfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBmaWVsZEZ0RXZlbnQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNmaWVsZEZ0RXZlbnR9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGZpZWxkUmVwb3NpdGlvbmluZyB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2ZpZWxkUmVwb3NpdGlvbmluZ31cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZ2VuZXJhdGVGaWVsZElkIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZ2VuZXJhdGVGaWVsZElkfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBnZXRDcmVhdGVGaWVsZERlZmF1bHRXaWR0aCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2dldENyZWF0ZUZpZWxkRGVmYXVsdFdpZHRofVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBnZXREdlRleHRWYWx1ZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2dldER2VGV4dFZhbHVlfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBnZXRGaWVsZEZyb21Kc29uIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZ2V0RmllbGRGcm9tSnNvbn1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZ2V0RmllbGRJZEZyb21Hcm91cE5vZGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNnZXRGaWVsZElkRnJvbUdyb3VwTm9kZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZ2V0RmllbGRKc29uRGF0YSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2dldEZpZWxkSnNvbkRhdGF9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGdldEZpZWxkU2l6ZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2dldEZpZWxkU2l6ZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZ2V0UGFnZUJvcmRlcldpZHRoIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZ2V0UGFnZUJvcmRlcldpZHRofVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBnZXRQYWdlQm91bmRpbmdDbGllbnRSZWN0IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZ2V0UGFnZUJvdW5kaW5nQ2xpZW50UmVjdH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZ2V0UGFnZUVsZW1lbnQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNnZXRQYWdlRWxlbWVudH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZ2V0UGRmUGFnZUZyb21TdmdQb3Mge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNnZXRQZGZQYWdlRnJvbVN2Z1Bvc31cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gaGlkZUFsbFJlc2l6ZUhhbmRsZXMge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNoaWRlQWxsUmVzaXplSGFuZGxlc31cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gaGlkZUZpZWxkQXR0cmlidXRlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjaGlkZUZpZWxkQXR0cmlidXRlfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBoaWRlVGVtcGxhdGVMYXllciB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2hpZGVUZW1wbGF0ZUxheWVyfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBpbXBvcnRGaWVsZERhdGEge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNpbXBvcnRGaWVsZERhdGF9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGtleWNoZWNrIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2Qja2V5Y2hlY2t9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHJlZG9BY3Rpb24ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNyZWRvQWN0aW9ufVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSByZWZyZXNoZm9ybWVyTGlzdCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3JlZnJlc2hmb3JtZXJMaXN0fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSByZW1vdmVEcmFnR3JvdXBGaWVsZCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3JlbW92ZURyYWdHcm91cEZpZWxkfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSByZW1vdmVEcmFnT3Zlckdyb3VwIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjcmVtb3ZlRHJhZ092ZXJHcm91cH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gcmVtb3ZlRmllbGQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNyZW1vdmVGaWVsZH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gcmVtb3ZlU2VsZWN0ZWRGaWVsZCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3JlbW92ZVNlbGVjdGVkRmllbGR9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHJlbW92ZVRlbXBsYXRlUmVjdCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3JlbW92ZVRlbXBsYXRlUmVjdH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gcmVwbGFjZUZpZWxkRGF0YSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3JlcGxhY2VGaWVsZERhdGF9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHJlcGxhY2VGaWVsZFN0cmluZ0RhdGEge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNyZXBsYWNlRmllbGRTdHJpbmdEYXRhfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSByZXNldFRvb2wge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNyZXNldFRvb2x9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNlbGVjdFRvb2wge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNzZWxlY3RUb29sfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBzZWxlY3RVc2VyTGlzdCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3NlbGVjdFVzZXJMaXN0fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBzaG93QXN0ZXJpc2tEaXYge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNzaG93QXN0ZXJpc2tEaXZ9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNob3dGaWVsZEF0dHJpYnV0ZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3Nob3dGaWVsZEF0dHJpYnV0ZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gc2hvd0ZpZWxkTGlzdEF0dHJpYnV0ZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3Nob3dGaWVsZExpc3RBdHRyaWJ1dGV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNvcnRGaWVsZHNBbGlnbiB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3NvcnRGaWVsZHNBbGlnbn1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gc29ydEZpZWxkc0JvdHRvbUFsaWduIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2Qjc29ydEZpZWxkc0JvdHRvbUFsaWdufVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBzb3J0RmllbGRzSENlbnRlckFsaWduIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2Qjc29ydEZpZWxkc0hDZW50ZXJBbGlnbn1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gc29ydEZpZWxkc0hSZWd1bGFySW50ZXJ2YWxBbGlnbiB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3NvcnRGaWVsZHNIUmVndWxhckludGVydmFsQWxpZ259XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNvcnRGaWVsZHNMZWZ0QWxpZ24ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNzb3J0RmllbGRzTGVmdEFsaWdufVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBzb3J0RmllbGRzUmlnaHRBbGlnbiB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3NvcnRGaWVsZHNSaWdodEFsaWdufVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBzb3J0RmllbGRzVG9wQWxpZ24ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNzb3J0RmllbGRzVG9wQWxpZ259XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHNvcnRGaWVsZHNWQ2VudGVyQWxpZ24ge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNzb3J0RmllbGRzVkNlbnRlckFsaWdufVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBzb3J0RmllbGRzVlJlZ3VsYXJJbnRlcnZhbEFsaWduIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2Qjc29ydEZpZWxkc1ZSZWd1bGFySW50ZXJ2YWxBbGlnbn1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gdGVtcGxhdGVJbml0IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjdGVtcGxhdGVJbml0fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSB0ZW1wbGF0ZU1vdXNlTW92ZUV2ZW50IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjdGVtcGxhdGVNb3VzZU1vdmVFdmVudH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gdGVtcGxhdGVNb3VzZVVwRXZlbnQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCN0ZW1wbGF0ZU1vdXNlVXBFdmVudH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gdGVtcGxhdGVSZXNpemUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCN0ZW1wbGF0ZVJlc2l6ZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gdG1wR3JvdXBGdEV2ZW50IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjdG1wR3JvdXBGdEV2ZW50fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSB1bmRvQWN0aW9uIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjdW5kb0FjdGlvbn1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gdXBkYXRlRmllbGRQb2ludCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3VwZGF0ZUZpZWxkUG9pbnR9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGFwcGVuZEZvbnRGYW1pbHkge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNhcHBlbmRGb250RmFtaWx5fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBhcHBlbmRTaWduVGFiU2hvd09wdCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2FwcGVuZFNpZ25UYWJTaG93T3B0fVxyXG4gKiBcclxuICogQEZpbGVOYW1lIFRlbXBsYXRlTW9kLmpzXHJcbiAqIEBzaW5jZSAyMDIxLjA1LjMxXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVGVtcGxhdGVNb2Qge1xyXG4gIC8qKlxyXG4gICAqIEB0eXBlIHtCb29sZWFufVxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNkcmFnU3RhcnRcclxuICAgKiBAZGVzY3JpcHRpb24gIFNWR+2ZlOuptOyXkOyEnCDrk5zrnpjqt7jqsIAg7Iuc7J6R65CY7JeI64qU7KeAIOyXrOu2gFxyXG4gICAqL1xyXG4gIGRyYWdTdGFydCA9IGZhbHNlO1xyXG5cclxuICAvKipcclxuICAgKiBAdHlwZSB7T2JqZWN0fVxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNkcmFnQm94XHJcbiAgICogQGRlc2NyaXB0aW9uICBTVkfsl5DshJwg65Oc656Y6re465CcIOqyg+ydhCDtkZztmITtlZjripQgUmVjdCBOb2RlXHJcbiAgICovXHJcbiAgZHJhZ0JveCA9IHVuZGVmaW5lZDtcclxuXHJcbiAgLyoqXHJcbiAgICogQHR5cGUge09iamVjdH1cclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjbWFpbkNhbnZhc1xyXG4gICAqIEBkZXNjcmlwdGlvbiAgU25hcCBJbnN0YW5jZVxyXG4gICAqL1xyXG4gIG1haW5DYW52YXM7XHJcblxyXG4gIC8qKlxyXG4gICAqIEB0eXBlIHtSZWN0fVxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNwYWdlQm91bmRpbmdCb3hcclxuICAgKiBAZGVzY3JpcHRpb24gIO2VhOuTnOuTpOydtCDsm4Dsp4Hsnbwg7IiYIOyeiOuKlCDqsr3qs4RcclxuICAgKi9cclxuICBwYWdlQm91bmRpbmdCb3ggPSB7IHg6IDAsIHk6IDAsIHdpZHRoOiAwLCBoZWlnaHQ6IDAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQHR5cGUge09iamVjdH1cclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjdGVtcGxhdGVSZWN0TW91c2VQb3NpdGlvblxyXG4gICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zrpbwg7IOd7ISx7ZWY7JesIOybgOyngSDsnbzrlYwg7ZiE7J6sIOuniOyasOyKpCDsnITsuZjsmYAg6riw7KG0IOuniOyasOyKpCDsnITsuZjrpbwg6rCA7KeA6rOgIOyeiOuKlCDrs4DsiJhcclxuICAgKi9cclxuICB0ZW1wbGF0ZVJlY3RNb3VzZVBvc2l0aW9uO1xyXG5cclxuICAvKipcclxuICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNzZWxlY3RBZGRGaWVsZFR5cGVcclxuICAgKiBAZGVzY3JpcHRpb24g7ZWE65Oc66W8IOunjOuTpOq4sCDsnITtlbQg7ISg7YOd65CcIO2VhOuTnOydmCDsooXrpZhcclxuICAgKi9cclxuICBzZWxlY3RBZGRGaWVsZFR5cGUgPSBcIlwiO1xyXG5cclxuICAvKipcclxuICAgKiBAdHlwZSB7T2JqZWN0fVxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNmaWVsZERpY3Rpb25hcnlcclxuICAgKiBAZGVzY3JpcHRpb24g7ZWE65Oc65Ok7J2YIOygleuztOulvCDqsIDsp4Dqs6Ag7J6I64qUIERpY3Rpb25hcnlcclxuICAgKi9cclxuICBmaWVsZERpY3Rpb25hcnkgPSB7fTtcclxuXHJcbiAgLyoqXHJcbiAgICogQHR5cGUge051bWJlcn1cclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjdW5yZWRvQWN0aW9uSWR4XHJcbiAgICogQGRlc2NyaXB0aW9uIO2YhOyerCBVbmRvIFJlZG8gSW5kZXhcclxuICAgKi9cclxuICB1bnJlZG9BY3Rpb25JZHggPSAtMTtcclxuXHJcbiAgLyoqXHJcbiAgICogQHR5cGUge09iamVjdH1cclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjdW5yZWRvQWN0aW9uRGljdFxyXG4gICAqIEBkZXNjcmlwdGlvbiBVbmRvIFJlZG/snZggQWN0aW9u7J2EIOqwgOyngOqzoCDsnojripQgRGljdGlvbmFyeVxyXG4gICAqL1xyXG4gIHVucmVkb0FjdGlvbkRpY3QgPSB7fTtcclxuXHJcbiAgLyoqXHJcbiAgICogQHR5cGUge1BERlZpZXdlcn1cclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjcGRmVmlld2VyXHJcbiAgICogQGRlc2NyaXB0aW9uIFBERi5qcyDrt7DslrQg7Jik67iM7KCd7Yq4XHJcbiAgICovXHJcbiAgcGRmVmlld2VyO1xyXG5cclxuICAvKipcclxuICAgKiBAdHlwZSB7T2JqZWN0fVxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCN0ZW1wbGF0ZVVzZXJGaWVsZEluZm9cclxuICAgKiBAZGVzY3JpcHRpb24g7ISc66qF7J6Q7J2YIOygleuztOulvCDqsIDsp4Dqs6Ag7J6I64qUIERpY3Rpb25hcnlcclxuICAgKi9cclxuICB0ZW1wbGF0ZVVzZXJGaWVsZEluZm8gPSB7fTtcclxuXHJcbiAgLyoqXHJcbiAgICogQHR5cGUge0VsZW1lbnR9XHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI293bmVyTm9kZVxyXG4gICAqIEBkZXNjcmlwdGlvbiDsnbQg7ZSE66Gc7KCd7Yq46rCAIO2PrO2VqOuQoCBFbGVtZW507J2YIOu2gOuqqCBIVE1MIEVMRU1FTlRcclxuICAgKi9cclxuICBvd25lck5vZGUgPSBudWxsO1xyXG5cclxuICAvKipcclxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjaXNGaWVsZERyYWdTdGFydFxyXG4gICAqIEBkZXNjcmlwdGlvbiDtmITsnqwg7ZWE65Oc6rCAIOuTnOuemOq3uCDrkJjqs6Ag7J6I64qU7KeAIOyXrOu2gC5cclxuICAgKi9cclxuICBpc0ZpZWxkRHJhZ1N0YXJ0ID0gZmFsc2U7XHJcblxyXG4gIC8qKlxyXG4gICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI21lbnVDb2RlXHJcbiAgICogQGRlc2NyaXB0aW9uIHNtYXJ0c3VpdOyXkOyEnOydmCBtZW51Y29kZVxyXG4gICAqL1xyXG4gIG1lbnVDb2RlID0gXCJcIjtcclxuXHJcbiAgdGVtcGxhdGVDbGlwQm9hcmQgPSBcIlwiO1xyXG5cclxuICB1c2VEcmF3U2lnbiA9IFwidHJ1ZVwiO1xyXG4gIHVzZUltYWdlU2lnbiA9IFwidHJ1ZVwiO1xyXG4gIHVzZVJlZ1NpZ24gPSBcInRydWVcIjtcclxuXHJcbiAgLyoqXHJcbiAgICogQGNvbnN0cnVjdG9yXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IF9wZGZWaWV3ZXIgUERGIFZpZXdlciBPYmplY3RcclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IG93bmVyTm9kZSDsnbQg7ZSE66Gc7KCd7Yq46rCAIO2PrO2VqOuQoCBFbGVtZW507J2YIOu2gOuqqCBIVE1MIEVMRU1FTlRcclxuICAgKlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKF9wZGZWaWV3ZXIsIG93bmVyTm9kZSA9IG51bGwsIHNpZ25UYWJTaG93RGVmT3B0VmFsKSB7XHJcbiAgICB0aGlzLnBkZlZpZXdlciA9IF9wZGZWaWV3ZXI7XHJcbiAgICBfdGVtcGxhdGVNb2QgPSB0aGlzO1xyXG4gICAgX3RlbXBsYXRlTW9kLmFwcGVuZFNpZ25UYWJTaG93T3B0KHNpZ25UYWJTaG93RGVmT3B0VmFsKTtcclxuICAgIHRoaXMub3duZXJOb2RlID0gb3duZXJOb2RlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGFkZFVuZG9SZWRvQWN0XHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2FkZFVuZG9SZWRvQWN0XHJcbiAgICogQGRlc2NyaXB0aW9uIHVuZG8gcmVkbyDsspjrpqzrpbwg7JyE7ZWcIOuNsOydtO2EsOulvCDstpTqsIAuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAgIGFjdGlvbiDsooXrpZhcclxuICAgKiBAcGFyYW0ge09iamVjdH0gb2xkRGF0YSAgICAg7J207KCE7JeQIOyeiOuNmCDrjbDsnbTthLBcclxuICAgKiBAcGFyYW0ge09iamVjdH0gbmV3RGF0YSAgICAg7IOI66Gc7Jq0IOuNsOydtO2EsFxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBhZGRVbmRvUmVkb0FjdCh0eXBlLCBvbGREYXRhLCBuZXdEYXRhKSB7XHJcbiAgICBpZiAoXHJcbiAgICAgIHR5cGUgIT09IENPTlNUQU5UUy5DUkVBVEVfRklFTERfQUNUSU9OICYmXHJcbiAgICAgIHR5cGUgIT09IENPTlNUQU5UUy5SRU1PVkVfRklFTERfQUNUSU9OICYmXHJcbiAgICAgIG9sZERhdGEgPT09IG5ld0RhdGFcclxuICAgICkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBfdGVtcGxhdGVNb2QudW5yZWRvQWN0aW9uRGljdFsrK190ZW1wbGF0ZU1vZC51bnJlZG9BY3Rpb25JZHhdID0ge1xyXG4gICAgICBhY3Rpb246IHR5cGUsXHJcbiAgICAgIG9sZDogb2xkRGF0YSxcclxuICAgICAgbmV3OiBuZXdEYXRhLFxyXG4gICAgfTtcclxuICAgIF90ZW1wbGF0ZU1vZC51bnJlZG9BY3Rpb25EaWN0W190ZW1wbGF0ZU1vZC51bnJlZG9BY3Rpb25JZHggKyAxXSA9IHVuZGVmaW5lZDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBidWlsZERWT3B0c0luZm9cclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjYnVpbGREVk9wdHNJbmZvXHJcbiAgICogQGRlc2NyaXB0aW9uIERlZmF1bHQgVmFsdWUg66as7Iqk7Yq4IOygleuztOulvCDshKTsoJUgLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtBcnJheX0gZHZPcHRpb25zICAgRGVmYXVsdCBWYWx1ZSDrpqzsiqTtirhcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgYnVpbGREVk9wdHNJbmZvKGR2T3B0aW9ucykge1xyXG4gICAgdmFyIGR2T3B0aW9uTGlzdCA9IFtdO1xyXG4gICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgZHZPcHRpb25zLmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgZHZPcHRpb25MaXN0LnB1c2goe1xyXG4gICAgICAgIHRleHQ6IGR2T3B0aW9uc1tpZHhdLmRpc3BsYXlUZXh0LFxyXG4gICAgICAgIHZhbHVlOiBkdk9wdGlvbnNbaWR4XS52YXJpYWJsZSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBVdGlscy5zZXREVkZpZWxkT3B0c0xpc3QoZHZPcHRpb25MaXN0KTtcclxuICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGJ1aWxkU2lnblRhYlNob3dPcHRcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjYnVpbGRTaWduVGFiU2hvd09wdFxyXG4gICAqIEBkZXNjcmlwdGlvbiBEZWZhdWx0IFZhbHVlIOumrOyKpO2KuCDsoJXrs7Trpbwg7ISk7KCVIC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBPcHRpb25zICAgRGVmYXVsdCBWYWx1ZSDrpqzsiqTtirhcclxuICAgKiBARGF0ZSA6IDIwMjMuIDEyLiAyN1xyXG4gICAqL1xyXG4gICAgYnVpbGRTaWduVGFiU2hvd09wdChPcHRpb25zKSB7XHJcbiAgICAgIC8vdmFyIE9wdGlvbkxpc3QgPSB7fTtcclxuICAgICAgXHJcbiAgICAgIFV0aWxzLnNldFNpZ25UYWJTaG93T3B0KE9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gYnVpbGRGaWVsZFVzZXJJbmZvXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2J1aWxkRmllbGRVc2VySW5mb1xyXG4gICAqIEBkZXNjcmlwdGlvbiDshJzrqoXtlaAg7IKs656M65OkIOumrOyKpO2KuCDsoJXrs7Trpbwg7ISk7KCVIC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7QXJyYXl9IGR2T3B0aW9ucyAgIOyEnOuqhe2VoCDsgqzrnozrk6Qg7KCV67O0IOumrOyKpO2KuFxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBidWlsZEZpZWxkVXNlckluZm8odXNlckxpc3QpIHtcclxuICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IHVzZXJMaXN0Lmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgbGV0IGZpZWxkVXNlckluZm8gPSBPYmplY3QuYXNzaWduKFxyXG4gICAgICAgIG5ldyBUZW1wbGF0ZVVzZXJGaWVsZEluZm8oKSxcclxuICAgICAgICB1c2VyTGlzdFtpZHhdXHJcbiAgICAgICk7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC50ZW1wbGF0ZVVzZXJGaWVsZEluZm9bZmllbGRVc2VySW5mby51c2VyVVVJRF0gPVxyXG4gICAgICAgIGZpZWxkVXNlckluZm87XHJcbiAgICB9XHJcbiAgICBVdGlscy5zZXRVc2VySW5mb09wdHNMaXN0KFxyXG4gICAgICBfdGVtcGxhdGVNb2QuY29udmVydFVzZXJMaXN0VG9TZWxlY3RPcHRpb25zKFxyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC50ZW1wbGF0ZVVzZXJGaWVsZEluZm9cclxuICAgICAgKVxyXG4gICAgKTtcclxuICAgIFV0aWxzLnNldFVzZXJJbmZvT3B0c0xpc3RDb3VudChcclxuICAgICAgT2JqZWN0LmtleXMoX3RlbXBsYXRlTW9kLnRlbXBsYXRlVXNlckZpZWxkSW5mbykubGVuZ3RoXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGJ1aWxkRmllbGRmb3JtZXJMaXN0XHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2J1aWxkRmllbGRmb3JtZXJMaXN0XHJcbiAgICogQGRlc2NyaXB0aW9uIOyCrOydtOuTnCDtjKjrhJDsl5Ag7J6I64qUIOyEnOuqheyekCDsoJXrs7Trpbwg6rCx7IugIC5cclxuICAgKlxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBidWlsZEZpZWxkZm9ybWVyTGlzdCgpIHtcclxuICAgIGNvbnN0IG93bmVyRG9tID0gX3RlbXBsYXRlTW9kLm93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiAjRWRpdG9yLVVzZXItQ29tcG9uZW50X0JveFwiXHJcbiAgICApO1xyXG4gICAgVXRpbHMucmVtb3ZlQWxsQ2hpbGROb2RlKG93bmVyRG9tKTtcclxuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhfdGVtcGxhdGVNb2QudGVtcGxhdGVVc2VyRmllbGRJbmZvKTtcclxuICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgIGNvbnN0IHVzZXJGaWVsZEluZm8gPSBfdGVtcGxhdGVNb2QudGVtcGxhdGVVc2VyRmllbGRJbmZvW2tleV07XHJcbiAgICAgIGlmICh1c2VyRmllbGRJbmZvLmlzRm9ybWVyID09PSBcIllcIikge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBsZXQgZmllbGRMaXN0RG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgZmllbGRMaXN0RG9tLnNldEF0dHJpYnV0ZShcImRhdGEtdXNlci1rZXlcIiwga2V5KTtcclxuICAgICAgZmllbGRMaXN0RG9tLmNsYXNzTGlzdC5hZGQoXCJVc2VyLUNvbXBvbmVudC1MaXN0LUNvbmF0aW5lclwiKTtcclxuICAgICAgY29uc3QgZmllbGRLZXlzID0gT2JqZWN0LmtleXModXNlckZpZWxkSW5mby5maWVsZHMpO1xyXG4gICAgICBpZiAoZmllbGRLZXlzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIGZpZWxkTGlzdERvbS5jbGFzc0xpc3QuYWRkKFwiTm8tQ2hpbGRcIik7XHJcbiAgICAgIH1cclxuICAgICAgbGV0IGxpc3REb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidWxcIik7XHJcbiAgICAgIGxpc3REb20uY2xhc3NOYW1lID0gXCJVc2VyLUNvbXBvbmVudC1MaXN0XCI7XHJcbiAgICAgIGxldCBsaXN0SXRlbURvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuICAgICAgbGV0IGxpc3RJdGVtU3BhbkRvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICBsaXN0SXRlbVNwYW5Eb20udGV4dENvbnRlbnQgPSB1c2VyRmllbGRJbmZvLmRpc3BsYXlVc2VyTmFtZTtcclxuICAgICAgbGlzdEl0ZW1Eb20uYXBwZW5kQ2hpbGQobGlzdEl0ZW1TcGFuRG9tKTtcclxuICAgICAgbGlzdERvbS5hcHBlbmRDaGlsZChsaXN0SXRlbURvbSk7XHJcbiAgICAgIGZpZWxkS2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZEtleSkge1xyXG4gICAgICAgIGNvbnN0IHVzZXJGaWVsZCA9IHVzZXJGaWVsZEluZm8uZmllbGQoZmllbGRLZXkpO1xyXG4gICAgICAgIGlmICh1c2VyRmllbGQuaXNSZW1vdmVkKSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBsaXN0SXRlbURvbTIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XHJcbiAgICAgICAgbGV0IGxpc3RJdGVtU3BhbkRvbTIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICBsZXQgcHJlZml4ID1cclxuICAgICAgICAgIHVzZXJGaWVsZC5yZXF1aXJlZCA9PT0gXCJ0cnVlXCJcclxuICAgICAgICAgICAgPyBcIltcIiArIFV0aWxzLnRyYW5zbGF0ZUZvcktleShcIlRlbXBsYXRlLnJlcXVpcmVUZXh0XCIpICsgXCJdXCJcclxuICAgICAgICAgICAgOiBcIltcIiArIFV0aWxzLnRyYW5zbGF0ZUZvcktleShcIlRlbXBsYXRlLnNlbGVjdFRleHRcIikgKyBcIl1cIjtcclxuICAgICAgICBpZiAodXNlckZpZWxkLnR5cGUgPT09IFwiU2lnbkZpZWxkXCIpIHtcclxuICAgICAgICAgIGxpc3RJdGVtU3BhbkRvbTIudGV4dENvbnRlbnQgPVxyXG4gICAgICAgICAgICBcIltcIiArIFV0aWxzLnRyYW5zbGF0ZUZvcktleShcIlRlbXBsYXRlLnNpZ25UZXh0XCIpICsgXCJdXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxpc3RJdGVtU3BhbkRvbTIudGV4dENvbnRlbnQgPSBwcmVmaXggKyB1c2VyRmllbGQuZmllbGRJZDtcclxuXHJcbiAgICAgICAgbGlzdEl0ZW1Eb20yLmFwcGVuZENoaWxkKGxpc3RJdGVtU3BhbkRvbTIpO1xyXG4gICAgICAgIGxpc3REb20uYXBwZW5kQ2hpbGQobGlzdEl0ZW1Eb20yKTtcclxuICAgICAgfSk7XHJcbiAgICAgIGZpZWxkTGlzdERvbS5hcHBlbmRDaGlsZChsaXN0RG9tKTtcclxuICAgICAgb3duZXJEb20uYXBwZW5kQ2hpbGQoZmllbGRMaXN0RG9tKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGNhbGNGaWVsZFBvc3Rpb25cclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjY2FsY0ZpZWxkUG9zdGlvblxyXG4gICAqIEBkZXNjcmlwdGlvbiBGaWVsZOydmCDsnITsuZgoSFRNTOyXkOyEnCnrpbwg6rOE7IKw7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGZpZWxkICAgQmFzZUZpZWxk66W8IOyDgeyGjeuwm+ydgCBPYmplY3RcclxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlzSW1wb3J0XHJcbiAgICogRmllbGTrpbwgSW1wb3J07KSR7J28IOqyveyasOyXkCDtlYTrk5wg7JyE7LmY66W8IOqzhOyCsO2VoCDrlYwgUGFnZSBFbGVtZW507J2YIOuztOuNlOuPhCDtlajqu5gg6rOE7IKw7ZWc64ukLlxyXG4gICAqIEByZXR1cm4ge09iamVjdH0gUmVjdCAgeyB4OiAsIHk6ICwgd2lkdGg6ICwgaGVpZ2h0OiAgfVxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBjYWxjRmllbGRQb3N0aW9uKGZpZWxkLCBpc0ltcG9ydCA9IGZhbHNlKSB7XHJcbiAgICB2YXIgdmlld0JCb3ggPSBfdGVtcGxhdGVNb2Qub3duZXJOb2RlXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiICNcIiArIENPTlNUQU5UUy5URU1QTEFURV9QREZfVklFV0VSKVxyXG4gICAgICAuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICBjb25zdCBmaWVsZFBhZ2VObyA9IGZpZWxkLnBhZ2VObztcclxuICAgIGNvbnN0IHZpZXdwb3J0ID0gX3RlbXBsYXRlTW9kLnBkZlZpZXdlci5fcGFnZXNbZmllbGRQYWdlTm8gLSAxXS52aWV3cG9ydDtcclxuICAgIHZhciB2aWV3cG9ydFhZID0gdmlld3BvcnQuY29udmVydFRvVmlld3BvcnRQb2ludChmaWVsZC5wZGZYLCBmaWVsZC5wZGZZKTtcclxuICAgIHZhciB2aWV3cG9ydFhZMiA9IHZpZXdwb3J0LmNvbnZlcnRUb1ZpZXdwb3J0UG9pbnQoZmllbGQucGRmWDIsIGZpZWxkLnBkZlkyKTtcclxuXHJcbiAgICB2YXIgcGFnZU9mZlNldCA9IF90ZW1wbGF0ZU1vZC5jb21wdXRlUGFnZU9mZnNldChmaWVsZFBhZ2VObyk7XHJcblxyXG4gICAgdmFyIG5ld1ggPSB2aWV3cG9ydFhZWzBdICsgcGFnZU9mZlNldC5sZWZ0IC0gdmlld0JCb3gubGVmdDtcclxuICAgIHZhciBuZXdZID0gdmlld3BvcnRYWVsxXSArIHBhZ2VPZmZTZXQudG9wIC0gdmlld0JCb3gudG9wO1xyXG4gICAgdmFyIG5ld1gyID0gdmlld3BvcnRYWTJbMF0gKyBwYWdlT2ZmU2V0LmxlZnQgLSB2aWV3QkJveC5sZWZ0O1xyXG4gICAgdmFyIG5ld1kyID0gdmlld3BvcnRYWTJbMV0gKyBwYWdlT2ZmU2V0LnRvcCAtIHZpZXdCQm94LnRvcDtcclxuXHJcbiAgICBpZiAoaXNJbXBvcnQpIHtcclxuICAgICAgdmFyIHBhZ2VCb3JkZXJXaWR0aCA9IF90ZW1wbGF0ZU1vZC5nZXRQYWdlQm9yZGVyV2lkdGgoZmllbGRQYWdlTm8pO1xyXG4gICAgICBuZXdYID0gbmV3WCArIHBhZ2VCb3JkZXJXaWR0aC5sZWZ0O1xyXG4gICAgICBuZXdZID0gbmV3WSArIHBhZ2VCb3JkZXJXaWR0aC50b3A7XHJcbiAgICAgIG5ld1gyID0gbmV3WDIgKyBwYWdlQm9yZGVyV2lkdGgubGVmdDtcclxuICAgICAgbmV3WTIgPSBuZXdZMiArIHBhZ2VCb3JkZXJXaWR0aC50b3A7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIG5ld1cgPSBNYXRoLmFicyhuZXdYMiAtIG5ld1gpO1xyXG4gICAgdmFyIG5ld0ggPSBNYXRoLmFicyhuZXdZMiAtIG5ld1kpO1xyXG5cclxuICAgIGZpZWxkLnggPSBuZXdYO1xyXG4gICAgZmllbGQueSA9IG5ld1k7XHJcbiAgICBmaWVsZC53aWR0aCA9IG5ld1c7XHJcbiAgICBmaWVsZC5oZWlnaHQgPSBuZXdIO1xyXG4gICAgcmV0dXJuIHsgeDogbmV3WCwgeTogbmV3WSwgd2lkdGg6IG5ld1csIGhlaWdodDogbmV3SCB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGNhbGNUZW1wbGF0ZUJvdW5kYXJ5XHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2NhbGNUZW1wbGF0ZUJvdW5kYXJ5XHJcbiAgICogQGRlc2NyaXB0aW9uIO2VhOuTnOuTpOydtCDsm4Dsp4Hsnbwg7IiYIOyeiOuKlCDqsr3qs4Trpbwg6rOE7IKw7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IG9iamVjdFdpZHRoICDqsIDroZzquLjsnbRcclxuICAgKiBAcGFyYW0ge051bWJlcn0gb2JqZWN0SGVpZ2h0ICDshLjroZwg6ri47J20XHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIGNhbGNUZW1wbGF0ZUJvdW5kYXJ5KG9iamVjdFdpZHRoLCBvYmplY3RIZWlnaHQpIHtcclxuICAgIGNvbnN0IHZpZXdlcjEgPSBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiICNcIiArIENPTlNUQU5UUy5URU1QTEFURV9QREZfVklFV0VSXHJcbiAgICApO1xyXG4gICAgY29uc3Qgdmlld2VyQm91bmRpbmdSZWN0ID0gdmlld2VyMS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIHZhciBwZ1JlY3QgPSBfdGVtcGxhdGVNb2QuZ2V0UGFnZUJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgX3RlbXBsYXRlTW9kLnBhZ2VCb3VuZGluZ0JveC54ID1cclxuICAgICAgcGdSZWN0LnggKyBvYmplY3RXaWR0aCAvIDIgLSB2aWV3ZXJCb3VuZGluZ1JlY3QubGVmdDtcclxuICAgIF90ZW1wbGF0ZU1vZC5wYWdlQm91bmRpbmdCb3gueSA9XHJcbiAgICAgIHBnUmVjdC55ICsgb2JqZWN0SGVpZ2h0IC8gMiAtIHZpZXdlckJvdW5kaW5nUmVjdC50b3A7XHJcbiAgICBfdGVtcGxhdGVNb2QucGFnZUJvdW5kaW5nQm94LndpZHRoID0gcGdSZWN0LndpZHRoIC0gb2JqZWN0V2lkdGg7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gY2hhbmdlRmllbGRQb3NpdGlvblxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNjaGFuZ2VGaWVsZFBvc2l0aW9uXHJcbiAgICogQGRlc2NyaXB0aW9uIEZpZWxk7J2YIOuzgOqyveuQnCDsnITsuZjrpbwg7ISk7KCV7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGZpZWxkICAgQmFzZUZpZWxk66W8IOyDgeyGjeuwm+ydgCBPYmplY3RcclxuICAgKiBAcGFyYW0ge01hdHJpeH0gbmV3TWF0cml4ICAgIOychOy5mOygleuztOulvCDqs4TsgrDtlaDrlYwg7JOw7J28IOuplO2KuOumreyKpCDquLDrs7jqsJIgdW5kZWluZmVkXHJcbiAgICogQHBhcmFtIHtCb29sZWFufSBkb25vdFVuZG9SZWRvICAgICB1bmRvIHJlZG/rjbDsnbTthLDrpbwg7IOd7ISx7ZWY64qU7KeAIOyXrOu2gCDquLDrs7jqsJIgZmFsc2VcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgY2hhbmdlRmllbGRQb3NpdGlvbihmaWVsZCwgbmV3TWF0cml4ID0gdW5kZWZpbmVkLCBkb25vdFVuZG9SZWRvID0gZmFsc2UpIHtcclxuICAgIGxldCBjaGlsZFJlY3QgPSBmaWVsZC5zZWxlY3QoXCJyZWN0XCIpO1xyXG4gICAgbGV0IGZpZWxkR2xvYmFsTWF0cml4ID0gbmV3TWF0cml4O1xyXG4gICAgaWYgKGZpZWxkR2xvYmFsTWF0cml4ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgZmllbGRHbG9iYWxNYXRyaXggPSBmaWVsZC50cmFuc2Zvcm0oKS5nbG9iYWxNYXRyaXg7XHJcbiAgICB9XHJcbiAgICBsZXQgY2hpbGRSZWN0QkJveCA9IGNoaWxkUmVjdC5nZXRCQm94KCk7XHJcbiAgICBjb25zdCB4MSA9IGZpZWxkR2xvYmFsTWF0cml4LngoY2hpbGRSZWN0QkJveC54LCBjaGlsZFJlY3RCQm94LnkpO1xyXG4gICAgY29uc3QgeTEgPSBmaWVsZEdsb2JhbE1hdHJpeC55KGNoaWxkUmVjdEJCb3gueCwgY2hpbGRSZWN0QkJveC55KTtcclxuICAgIGNvbnN0IHgyID0gZmllbGRHbG9iYWxNYXRyaXgueChjaGlsZFJlY3RCQm94LngyLCBjaGlsZFJlY3RCQm94LnkyKTtcclxuICAgIGNvbnN0IHkyID0gZmllbGRHbG9iYWxNYXRyaXgueShjaGlsZFJlY3RCQm94LngyLCBjaGlsZFJlY3RCQm94LnkyKTtcclxuICAgIGNvbnN0IHdpZHRoID0gTWF0aC5hYnMoeDIgLSB4MSk7XHJcbiAgICBjb25zdCBoZWlnaHQgPSBNYXRoLmFicyh5MiAtIHkxKTtcclxuICAgIGNoaWxkUmVjdC5hdHRyKHsgeDogeDEsIHk6IHkxLCB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0IH0pO1xyXG4gICAgdmFyIGNoaWxkU3ZnID0gZmllbGQuc2VsZWN0KFwic3ZnXCIpO1xyXG4gICAgY2hpbGRTdmcuYXR0cih7IHg6IHgxLCB5OiB5MSwgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCB9KTtcclxuICAgIGZpZWxkLnRyYW5zZm9ybShTbmFwLm1hdHJpeCgpLnRvVHJhbnNmb3JtU3RyaW5nKCkpO1xyXG4gICAgdmFyIG9sZERhdGEgPSBfdGVtcGxhdGVNb2QuZ2V0RmllbGRKc29uRGF0YShjaGlsZFJlY3QuYXR0cihcImlkXCIpKTtcclxuICAgIGNvbnN0IGlzVXBkYXRlZCA9IF90ZW1wbGF0ZU1vZC51cGRhdGVGaWVsZFBvaW50KGZpZWxkKTtcclxuICAgIGlmIChpc1VwZGF0ZWQgPT09IGZhbHNlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIF90ZW1wbGF0ZU1vZC5jaGFuZ2VGcmVlVHJhbnNmb3JtKGZpZWxkLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgIGlmICghZG9ub3RVbmRvUmVkbykge1xyXG4gICAgICB2YXIgbmV3RGF0YSA9IF90ZW1wbGF0ZU1vZC5nZXRGaWVsZEpzb25EYXRhKGNoaWxkUmVjdC5hdHRyKFwiaWRcIikpO1xyXG4gICAgICBfdGVtcGxhdGVNb2QuYWRkVW5kb1JlZG9BY3QoXHJcbiAgICAgICAgQ09OU1RBTlRTLkZJRUxEX0FUVFJfQ0hBTkdFX0FDVElPTixcclxuICAgICAgICBvbGREYXRhLFxyXG4gICAgICAgIG5ld0RhdGFcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBjaGFuZ2VGaWVsZFZhbHVlRXZlbnRcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjY2hhbmdlRmllbGRWYWx1ZUV2ZW50XHJcbiAgICogQGRlc2NyaXB0aW9uIO2VhOuTnOydmCDsho3shLEg6rCS7J20IOuzgOqyvSDrkJjsl4jsnYQg65WMIOyGjeyEseydmCDsooXrpZjsl5Ag65Sw6528IOyymOumrO2VmOq4sCDsnITtlZwg66mU7IaM65OcLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50ICBldmVudCBPYmplY3RcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgY2hhbmdlRmllbGRWYWx1ZUV2ZW50KGV2ZW50KSB7XHJcbiAgICBjb25zdCB0YXJnZXROb2RlID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgY29uc3QgZmllbGRJZCA9IHRhcmdldE5vZGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1maWVsZC1pZFwiKTtcclxuICAgIGNvbnN0IGZpZWxkUHJvcGV0eU5hbWUgPSB0YXJnZXROb2RlLmdldEF0dHJpYnV0ZShcclxuICAgICAgXCJkYXRhLWZpZWxkLXByb3BlcnR5LW5hbWVcIlxyXG4gICAgKTtcclxuICAgIHZhciBvbGREYXRhQXJyID0gW107XHJcbiAgICB2YXIgbmV3RGF0YUFyciA9IFtdO1xyXG4gICAgdmFyIG93bmVySWQgPSBcIlwiO1xyXG5cclxuICAgIGZpZWxkSWQuc3BsaXQoXCIsXCIpLmZvckVhY2goKGlkVmFsKSA9PiB7XHJcbiAgICAgIHZhciBmaWVsZEdyb3VwID0gX3RlbXBsYXRlTW9kLm1haW5DYW52YXMuc2VsZWN0KFwiI1wiICsgaWRWYWwgKyBcIkdyb3VwXCIpO1xyXG4gICAgICBpZiAoZmllbGRHcm91cCA9PT0gbnVsbCB8fCBmaWVsZEdyb3VwID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgdmFyIGZpZWxkID0gX3RlbXBsYXRlTW9kLmZpZWxkRGljdGlvbmFyeVtpZFZhbF07XHJcbiAgICAgIGlmICghZmllbGQudmFsaWRhdGVWYWx1ZShmaWVsZFByb3BldHlOYW1lLCB0YXJnZXROb2RlLnZhbHVlKSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwibm90IHZhbGlkYXRlXCIpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBvbGREYXRhID0gX3RlbXBsYXRlTW9kLmdldEZpZWxkSnNvbkRhdGEoaWRWYWwpO1xyXG4gICAgICBvbGREYXRhQXJyLnB1c2gob2xkRGF0YSk7XHJcbiAgICAgIFV0aWxzLmFzc2lnbihmaWVsZCwgXCJtX1wiICsgZmllbGRQcm9wZXR5TmFtZSwgdGFyZ2V0Tm9kZS52YWx1ZSk7XHJcbiAgICAgIGlmIChUZXh0QmFzZUZpZWxkLm5lZWRUZXh0U3ZnUmVmcmVzaChmaWVsZFByb3BldHlOYW1lKSkge1xyXG4gICAgICAgIGlmIChmaWVsZFByb3BldHlOYW1lID09PSBcImRlZmF1bHRWYWx1ZVwiICYmIGZpZWxkLnR5cGUgPT09IFwiVGV4dEZpZWxkXCIpIHtcclxuICAgICAgICAgIGxldCBkdlRleHQgPSBfdGVtcGxhdGVNb2QuZ2V0RHZUZXh0VmFsdWUodGFyZ2V0Tm9kZS52YWx1ZSk7XHJcbiAgICAgICAgICBmaWVsZC5kZWZhdWx0VmFsdWVUZXh0ID0gZHZUZXh0O1xyXG4gICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICBmaWVsZFByb3BldHlOYW1lID09PSBcImRlZmF1bHRWYWx1ZVwiICYmXHJcbiAgICAgICAgICBmaWVsZC50eXBlID09PSBcIkNvbWJvYm94RmllbGRcIlxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgbGV0IGR2VGV4dCA9IHRhcmdldE5vZGUudmFsdWU7XHJcbiAgICAgICAgICBmaWVsZC5kZWZhdWx0VmFsdWVUZXh0ID0gZHZUZXh0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY3VyU2NhbGUgPSBfdGVtcGxhdGVNb2QucGRmVmlld2VyLmN1cnJlbnRTY2FsZTtcclxuICAgICAgICBmaWVsZC5jaGFuZ2VUZXh0RWxlbWVudChmaWVsZEdyb3VwLCBjdXJTY2FsZSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGZpZWxkUHJvcGV0eU5hbWUgPT09IFwib3duZXJJZFwiKSB7XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLnJlZnJlc2hmb3JtZXJMaXN0KGZpZWxkKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZmllbGRQcm9wZXR5TmFtZSA9PT0gXCJmaWVsZE1pblZhbHVlXCIpIHtcclxuICAgICAgICBmaWVsZC5tX2lucHV0TWluID0gTnVtYmVyKHRhcmdldE5vZGUudmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChmaWVsZFByb3BldHlOYW1lID09PSBcImZpZWxkTWF4VmFsdWVcIikge1xyXG4gICAgICAgIGZpZWxkLm1faW5wdXRNYXggPSBOdW1iZXIodGFyZ2V0Tm9kZS52YWx1ZSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGZpZWxkUHJvcGV0eU5hbWUgPT09IFwidXNlQ2FsY1wiKSB7XHJcbiAgICAgICAgZmllbGQubV91c2VDYWxjID0gdGFyZ2V0Tm9kZS52YWx1ZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZmllbGRQcm9wZXR5TmFtZSA9PT0gXCJ1c2VEcmF3U2lnblwiKSB7XHJcbiAgICAgICAgZmllbGQubV91c2VEcmF3U2lnbiA9IHRhcmdldE5vZGUudmFsdWU7XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLnZhbGlkYXRlU2lnbk9wdGlvbnModGFyZ2V0Tm9kZSwgZmllbGRJZCwgZmllbGRQcm9wZXR5TmFtZSk7XHJcbiAgICAgICAgZmllbGQubV91c2VEcmF3U2lnbiA9IHRhcmdldE5vZGUudmFsdWU7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGZpZWxkUHJvcGV0eU5hbWUgPT09IFwidXNlSW1hZ2VTaWduXCIpIHtcclxuICAgICAgICBmaWVsZC5tX3VzZUltYWdlU2lnbiA9IHRhcmdldE5vZGUudmFsdWU7XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLnZhbGlkYXRlU2lnbk9wdGlvbnModGFyZ2V0Tm9kZSwgZmllbGRJZCwgZmllbGRQcm9wZXR5TmFtZSk7XHJcbiAgICAgICAgZmllbGQubV91c2VJbWFnZVNpZ24gPSB0YXJnZXROb2RlLnZhbHVlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChmaWVsZFByb3BldHlOYW1lID09PSBcInVzZVJlZ1NpZ25cIikge1xyXG4gICAgICAgIGZpZWxkLm1fdXNlUmVnU2lnbiA9IHRhcmdldE5vZGUudmFsdWU7XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLnZhbGlkYXRlU2lnbk9wdGlvbnModGFyZ2V0Tm9kZSwgZmllbGRJZCwgZmllbGRQcm9wZXR5TmFtZSk7XHJcbiAgICAgICAgZmllbGQubV91c2VSZWdTaWduID0gdGFyZ2V0Tm9kZS52YWx1ZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZmllbGRQcm9wZXR5TmFtZSA9PT0gXCJyZXF1aXJlZFwiKSB7XHJcbiAgICAgICAgVXRpbHMuc2hvd0FzdGVyaXNrRGl2KFxyXG4gICAgICAgICAgX3RlbXBsYXRlTW9kLm93bmVyTm9kZSxcclxuICAgICAgICAgIGlkVmFsLFxyXG4gICAgICAgICAgdGFyZ2V0Tm9kZS52YWx1ZSA9PT0gXCJ0cnVlXCIgPyB0cnVlIDogZmFsc2VcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IG5ld0RhdGEgPSBfdGVtcGxhdGVNb2QuZ2V0RmllbGRKc29uRGF0YShpZFZhbCk7XHJcbiAgICAgIG5ld0RhdGFBcnIucHVzaChuZXdEYXRhKTtcclxuICAgICAgb3duZXJJZCA9IGZpZWxkLm93bmVySWQ7XHJcbiAgICB9KTtcclxuICAgIGlmIChvbGREYXRhQXJyLmxlbmd0aCA9PT0gMCB8fCBuZXdEYXRhQXJyID09PSAwKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChcclxuICAgICAgZmllbGRQcm9wZXR5TmFtZSA9PT0gXCJvd25lcklkXCIgfHxcclxuICAgICAgZmllbGRQcm9wZXR5TmFtZSA9PT0gXCJmaWVsZElkXCIgfHxcclxuICAgICAgZmllbGRQcm9wZXR5TmFtZSA9PT0gXCJyZXF1aXJlZFwiXHJcbiAgICApIHtcclxuICAgICAgX3RlbXBsYXRlTW9kLmJ1aWxkRmllbGRmb3JtZXJMaXN0KCk7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5zZWxlY3RVc2VyTGlzdChvd25lcklkKTtcclxuICAgIH1cclxuICAgIGxldCBhY3Rpb25OYW1lID0gQ09OU1RBTlRTLkdST1VQX0FUVFJfQ0hBTkdFX0FDVElPTjtcclxuICAgIGlmIChmaWVsZFByb3BldHlOYW1lID09PSBcIm93bmVySWRcIikge1xyXG4gICAgICBhY3Rpb25OYW1lID0gQ09OU1RBTlRTLkdST1VQX0FUVFJfT1dORVJfQ0hBTkdFX0FDVElPTjtcclxuICAgIH1cclxuICAgIF90ZW1wbGF0ZU1vZC5hZGRVbmRvUmVkb0FjdChhY3Rpb25OYW1lLCBvbGREYXRhQXJyLCBuZXdEYXRhQXJyKTtcclxuICB9XHJcblxyXG4gIC8v67OR7JqxIOy2lOqwgFxyXG4gIHZhbGlkYXRlU2lnbk9wdGlvbnModGFyZ2V0Tm9kZSwgZmllbGRJZCwgZmllbGRQcm9wZXR5TmFtZSkge1xyXG4gICAgY29uc3Qgc2lnbkZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5TaWduLUZpZWxkXCIpO1xyXG4gICAgY29uc3QgdXNlRHJhd1NpZ25JbnB1dCA9IHNpZ25GaWVsZC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAnaW5wdXRbZGF0YS1maWVsZC1wcm9wZXJ0eS1uYW1lPVwidXNlRHJhd1NpZ25cIl0nXHJcbiAgICApO1xyXG4gICAgY29uc3QgdXNlSW1hZ2VTaWduSW5wdXQgPSBzaWduRmllbGQucXVlcnlTZWxlY3RvcihcclxuICAgICAgJ2lucHV0W2RhdGEtZmllbGQtcHJvcGVydHktbmFtZT1cInVzZUltYWdlU2lnblwiXSdcclxuICAgICk7XHJcbiAgICBjb25zdCB1c2VSZWdTaWduSW5wdXQgPSBzaWduRmllbGQucXVlcnlTZWxlY3RvcihcclxuICAgICAgJ2lucHV0W2RhdGEtZmllbGQtcHJvcGVydHktbmFtZT1cInVzZVJlZ1NpZ25cIl0nXHJcbiAgICApO1xyXG5cclxuICAgIGxldCB1c2VEcmF3U2lnbiA9IHVzZURyYXdTaWduSW5wdXQgJiYgdXNlRHJhd1NpZ25JbnB1dC52YWx1ZSA9PT0gXCJ0cnVlXCIgPyB0cnVlIDogZmFsc2U7XHJcbiAgICBsZXQgdXNlSW1hZ2VTaWduID0gdXNlSW1hZ2VTaWduSW5wdXQgJiYgdXNlSW1hZ2VTaWduSW5wdXQudmFsdWUgPT09IFwidHJ1ZVwiID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgbGV0IHVzZVJlZ1NpZ24gPSB1c2VSZWdTaWduSW5wdXQgJiYgdXNlUmVnU2lnbklucHV0LnZhbHVlID09PSBcInRydWVcIiA/IHRydWUgOiBmYWxzZTtcclxuXHJcbiAgICBpZiAoIXVzZURyYXdTaWduICYmICF1c2VJbWFnZVNpZ24gJiYgIXVzZVJlZ1NpZ24pIHtcclxuICAgICAgY29uc29sZS5sb2coXCJ0YXJnZXROb2RlLmNoZWNrZWQ6XCIgKyB0YXJnZXROb2RlLmNoZWNrZWQgKyBcIlxcblwiKTtcclxuICAgICAgY29uc29sZS5sb2coXCJ0YXJnZXROb2RlLnZhbHVlOlwiICsgdGFyZ2V0Tm9kZS52YWx1ZSArIFwiXFxuXCIpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcInVzZURyYXdTaWduSW5wdXQudmFsdWU6XCIgKyB1c2VEcmF3U2lnbklucHV0LnZhbHVlICsgXCJcXG5cIik7XHJcbiAgICAgIHRhcmdldE5vZGUuY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgIHRhcmdldE5vZGUudmFsdWUgPSBcInRydWVcIjtcclxuICAgICAgLy9hbGVydCgn7KCB7Ja064+EIO2VmOuCmOydmCDshJzrqoUg7Ji17IWY7J2EIO2ZnOyEse2ZlO2VtOyVvCDtlanri4jri6QuJyk7XHJcblxyXG4gICAgICAvLyDrtoDrqqgg7JqU7IaM66W8IOywvuqzoCxcclxuICAgICAgbGV0IHBhcmVudERpdiA9IHRhcmdldE5vZGUucGFyZW50RWxlbWVudDtcclxuICAgICAgLy8g67aA66qoIOyalOyGjCDrgrTsl5DshJwg7LK07YGs67CV7Iqk66W8IOywvuyKteuLiOuLpC5cclxuICAgICAgbGV0IGNoZWNrYm94SW5wdXQgPSBwYXJlbnREaXYucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJyk7XHJcbiAgICAgIGNoZWNrYm94SW5wdXQuY2hlY2tlZCA9IHRydWU7XHJcblxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBjaGFuZ2VGcmVlVHJhbnNmb3JtXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2NoYW5nZUZyZWVUcmFuc2Zvcm1cclxuICAgKiBAZGVzY3JpcHRpb24g7ZWE65Oc7J2YIO2BrOq4sCDrsI8g7JyE7LmY66W8IOuzgOqyve2VmOuKlCBGcmVlVHJhbnNmb3Jt7J2EIOyDiOuhnCDrs4Dqsr3tlZzri6QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdH0gZmllbGRHcm91cCAgIFNWR+ydmCBncm91cCDsmKTruIzsoJ3tirhcclxuICAgKiBAcGFyYW0ge051bWJlcn0gd2lkdGggICAgIO2VhOuTnOydmCDqsIDroZwg6ri47J20XHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGhlaWdodCAgICDtlYTrk5zsnZgg7IS466GcIOq4uOydtFxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBjaGFuZ2VGcmVlVHJhbnNmb3JtKGZpZWxkR3JvdXAsIHdpZHRoLCBoZWlnaHQpIHtcclxuICAgIGlmIChmaWVsZEdyb3VwLnBhcmVudCgpLmF0dHIoXCJpZFwiKSA9PT0gQ09OU1RBTlRTLkRSQUdfQk9YX05BTUUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IGhhc0hpZGVDbGFzcyA9IGZhbHNlO1xyXG4gICAgaWYgKCFVdGlscy5pc0VtcHR5T2JqZWN0KGZpZWxkR3JvdXAuZnJlZVRyYW5zZm9ybSkpIHtcclxuICAgICAgaGFzSGlkZUNsYXNzID0gIWZpZWxkR3JvdXAuZnJlZVRyYW5zZm9ybS5pc1Nob3dSZXNpemVIYW5kbGVyKCk7XHJcbiAgICAgIGZpZWxkR3JvdXAuZnJlZVRyYW5zZm9ybS51bnBsdWcoKTtcclxuICAgIH1cclxuICAgIF90ZW1wbGF0ZU1vZC5jYWxjVGVtcGxhdGVCb3VuZGFyeSh3aWR0aCwgaGVpZ2h0KTtcclxuICAgIC8vIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgbGV0IGZ0ID0gX3RlbXBsYXRlTW9kLm1haW5DYW52YXMuZnJlZVRyYW5zZm9ybShcclxuICAgICAgZmllbGRHcm91cCxcclxuICAgICAge1xyXG4gICAgICAgIHNuYXA6IHsgcm90YXRlOiAxIH0sXHJcbiAgICAgICAgYXR0cnM6IHsgc3Ryb2tlOiBcIiM5ZDY4NTlcIiB9LFxyXG4gICAgICAgIHN1YmplY3RCQm94OiBmaWVsZEdyb3VwLnNlbGVjdChcInJlY3RcIikuZ2V0QkJveCh0cnVlKSxcclxuICAgICAgICBzaXplOiA0LFxyXG4gICAgICAgIGRyYXc6IFwiYmJveFwiLFxyXG4gICAgICAgIGJvdW5kYXJ5OiBfdGVtcGxhdGVNb2QucGFnZUJvdW5kaW5nQm94LFxyXG4gICAgICB9LFxyXG4gICAgICBmdW5jdGlvbiAoZnQyLCBldmVudHMpIHtcclxuICAgICAgICBfdGVtcGxhdGVNb2QuZmllbGRGdEV2ZW50KGV2ZW50c1swXSwgZmllbGRHcm91cCk7XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICBmdC5zZXRPcHRzKHsgcm90YXRlOiBmYWxzZSB9KTtcclxuICAgIGlmIChoYXNIaWRlQ2xhc3MpIHtcclxuICAgICAgZmllbGRHcm91cC5mcmVlVHJhbnNmb3JtLmhpZGVSZXNpemVIYW5kbGVyKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gY2hhbmdlR3JvdXBCb3hGcmVlVHJhbnNmb3JtXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2NoYW5nZUdyb3VwQm94RnJlZVRyYW5zZm9ybVxyXG4gICAqIEBkZXNjcmlwdGlvbu2VhOuTnCDqt7jro7nrsJXsiqQg7YGs6riwIOuwjyDsnITsuZjrpbwg67OA6rK97ZWY64qUIEZyZWVUcmFuc2Zvcm3snYQg7IOI66GcIOuzgOqyve2VnOuLpC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0ZW1wR3JvdXBCb3ggIFNWR+ydmCBncm91cCDsmKTruIzsoJ3tirhcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgY2hhbmdlR3JvdXBCb3hGcmVlVHJhbnNmb3JtKHRlbXBHcm91cEJveCkge1xyXG4gICAgaWYgKCFVdGlscy5pc0VtcHR5T2JqZWN0KHRlbXBHcm91cEJveC5mcmVlVHJhbnNmb3JtKSkge1xyXG4gICAgICB0ZW1wR3JvdXBCb3guZnJlZVRyYW5zZm9ybS51bnBsdWcoKTtcclxuICAgIH1cclxuICAgIF90ZW1wbGF0ZU1vZC5jYWxjVGVtcGxhdGVCb3VuZGFyeShcclxuICAgICAgdGVtcEdyb3VwQm94LmdldEJCb3goKS53aWR0aCxcclxuICAgICAgdGVtcEdyb3VwQm94LmdldEJCb3goKS5oZWlnaHRcclxuICAgICk7XHJcbiAgICB2YXIgdGVtcEdGdCA9IF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzLmZyZWVUcmFuc2Zvcm0oXHJcbiAgICAgIHRlbXBHcm91cEJveCxcclxuICAgICAge1xyXG4gICAgICAgIHNuYXA6IHsgcm90YXRlOiAxIH0sXHJcbiAgICAgICAgc2l6ZTogNCxcclxuICAgICAgICBkcmF3OiBcImJib3hcIixcclxuICAgICAgICBib3VuZGFyeTogX3RlbXBsYXRlTW9kLnBhZ2VCb3VuZGluZ0JveCxcclxuICAgICAgfSxcclxuICAgICAgZnVuY3Rpb24gKGZ0LCBldmVudHMpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKGV2ZW50cyk7XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLnRtcEdyb3VwRnRFdmVudChldmVudHNbMF0pO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgdGVtcEdGdC5zZXRPcHRzKHsgcm90YXRlOiBmYWxzZSwgc2NhbGU6IGZhbHNlIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGNoZWNrVGVtcGxhdGVGaWVsZERhdGFcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjY2hlY2tUZW1wbGF0ZUZpZWxkRGF0YVxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIExhYmVs7J2064KYIENvbWJvYm947J2YIOqyveyasCDslYjsl5Ag6rCS7J2EIOyFi+2Mhe2VmOyngCDslYrsnLzrqbQg7ISc66qF66qo65Oc7JeQ7IScXHJcbiAgICog7ZWE7IiYIOqwkiDssrTtgawg7Jes67aA66W8IO2GteqzvO2VmOyngCDrqrvtlZjquLAg65WM66y47JeQIO2FnO2UjOumvyDsl5DrlJTtirjsl5DshJwg7ZW064u5IOqwkuuTpOydtFxyXG4gICAqIOuTpOyWtCDsnojripTsp4Ag7LK07YGs7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cclxuICAgKiBARGF0ZSA6IDIwMjEuIDYuIDE4XHJcbiAgICovXHJcbiAgY2hlY2tUZW1wbGF0ZUZpZWxkRGF0YSgpIHtcclxuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhfdGVtcGxhdGVNb2QudGVtcGxhdGVVc2VyRmllbGRJbmZvKTtcclxuICAgIGZvciAobGV0IHVzcktleUlkeCA9IDA7IHVzcktleUlkeCA8IGtleXMubGVuZ3RoOyArK3VzcktleUlkeCkge1xyXG4gICAgICBjb25zdCB1c2VySW5mbyA9IF90ZW1wbGF0ZU1vZC50ZW1wbGF0ZVVzZXJGaWVsZEluZm9ba2V5c1t1c3JLZXlJZHhdXTtcclxuICAgICAgZm9yIChcclxuICAgICAgICB2YXIgcGFnZU5vID0gMDtcclxuICAgICAgICBwYWdlTm8gPCBfdGVtcGxhdGVNb2QucGRmVmlld2VyLnBhZ2VzQ291bnQ7XHJcbiAgICAgICAgKytwYWdlTm9cclxuICAgICAgKSB7XHJcbiAgICAgICAgY29uc3QgZmllbGRLZXlzID0gT2JqZWN0LmtleXMoX3RlbXBsYXRlTW9kLmZpZWxkRGljdGlvbmFyeSk7XHJcbiAgICAgICAgZm9yIChsZXQga2V5SWR4ID0gMDsga2V5SWR4IDwgZmllbGRLZXlzLmxlbmd0aDsgKytrZXlJZHgpIHtcclxuICAgICAgICAgIGNvbnN0IGZpZWxkID0gX3RlbXBsYXRlTW9kLmZpZWxkRGljdGlvbmFyeVtmaWVsZEtleXNba2V5SWR4XV07XHJcbiAgICAgICAgICBpZiAoZmllbGQuaXNSZW1vdmVkKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGZpZWxkLnR5cGUgPT09IFwiTGFiZWxGaWVsZFwiKSB7XHJcbiAgICAgICAgICAgIGlmIChVdGlscy5pc1N0cmluZ0VtcHR5KGZpZWxkLnZhbHVlKSkge1xyXG4gICAgICAgICAgICAgIGxldCBzdmdSZWN0ID0gX3RlbXBsYXRlTW9kLm1haW5DYW52YXMuc2VsZWN0KFxyXG4gICAgICAgICAgICAgICAgXCIjXCIgKyBmaWVsZC5pZCArIFwiR3JvdXAgPiByZWN0XCJcclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgIF90ZW1wbGF0ZU1vZC5zaG93RmllbGRBdHRyaWJ1dGUoZmllbGQuaWQpO1xyXG4gICAgICAgICAgICAgIGxldCB2aWV3ZXJDb250YWluZXIgPSBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgICAgICAgICBcIiAjXCIgKyBDT05TVEFOVFMuVEVNUExBVEVfUERGX1ZJRVdFUl9DT05UQUlORVJcclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgIHZpZXdlckNvbnRhaW5lci5zY3JvbGxUb3AgPSBzdmdSZWN0LmF0dHIoXCJ5XCIpO1xyXG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIGlmIChmaWVsZC50eXBlID09PSBcIkNvbWJvYm94RmllbGRcIikge1xyXG4gICAgICAgICAgICBpZiAoVXRpbHMuaXNTdHJpbmdFbXB0eShmaWVsZC5jb21ib2JveExpc3QpKSB7XHJcbiAgICAgICAgICAgICAgbGV0IHN2Z1JlY3QgPSBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy5zZWxlY3QoXHJcbiAgICAgICAgICAgICAgICBcIiNcIiArIGZpZWxkLmlkICsgXCJHcm91cCA+IHJlY3RcIlxyXG4gICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgX3RlbXBsYXRlTW9kLnNob3dGaWVsZEF0dHJpYnV0ZShmaWVsZC5pZCk7XHJcbiAgICAgICAgICAgICAgbGV0IHZpZXdlckNvbnRhaW5lciA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgICAgICAgICAgIFwiICNcIiArIENPTlNUQU5UUy5URU1QTEFURV9QREZfVklFV0VSX0NPTlRBSU5FUlxyXG4gICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgdmlld2VyQ29udGFpbmVyLnNjcm9sbFRvcCA9IHN2Z1JlY3QuYXR0cihcInlcIik7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gY2xlYXJTZWxlY3RlZFRvb2xcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjY2xlYXJTZWxlY3RlZFRvb2xcclxuICAgKiBAZGVzY3JpcHRpb24g7IKs7J2065OcIO2DreyXkCDshKDtg6DrkJwg66qo65Oc66W8IOy0iOq4sO2ZlO2VnOuLpC5cclxuICAgKlxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBjbGVhclNlbGVjdGVkVG9vbCgpIHtcclxuICAgIGxldCB0b29sRWxlbWVudCA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvckFsbChcclxuICAgICAgXCIuXCIgKyBDT05TVEFOVFMuRURJVE9SX0NPTVBPTkVOVF9DTEFTUyArIFwiIHVsIGxpXCJcclxuICAgICk7XHJcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdG9vbEVsZW1lbnQubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgIGlmICh0b29sRWxlbWVudFtpbmRleF0uY2xhc3NMaXN0LmNvbnRhaW5zKFwic2VsZWN0ZWRcIikpIHtcclxuICAgICAgICB0b29sRWxlbWVudFtpbmRleF0uY2xhc3NMaXN0LnRvZ2dsZShcInNlbGVjdGVkXCIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gY29tcHV0ZVBhZ2VPZmZzZXRcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjY29tcHV0ZVBhZ2VPZmZzZXRcclxuICAgKiBAZGVzY3JpcHRpb27sgqzsnbTrk5wgIO2OmOydtOyngOydmCBPZmZzZXTsnYQg6rOE7IKw7ZWc64ukLi5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBwYWdlTm8gIO2OmOydtOyngCDrsojtmLhcclxuICAgKiBAcmV0dXJuICB7T2JqZWN0fSB7IGxlZnQ6ICwgdG9wOiAgfVxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBjb21wdXRlUGFnZU9mZnNldChwYWdlTm8pIHtcclxuICAgIGxldCBwZ05vZGUgPSBfdGVtcGxhdGVNb2QuZ2V0UGFnZUVsZW1lbnQocGFnZU5vKTtcclxuICAgIHZhciByZWN0ID0gcGdOb2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxyXG4gICAgICBib2R5RWx0ID0gZG9jdW1lbnQuYm9keTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHRvcDogcmVjdC50b3AgKyBib2R5RWx0LnNjcm9sbFRvcCxcclxuICAgICAgbGVmdDogcmVjdC5sZWZ0ICsgYm9keUVsdC5zY3JvbGxMZWZ0LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBjb252ZXJ0VXNlckxpc3RUb1NlbGVjdE9wdGlvbnNcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjY29udmVydFVzZXJMaXN0VG9TZWxlY3RPcHRpb25zXHJcbiAgICogQGRlc2NyaXB0aW9uIOyCrOydtOuTnCDshJzrqoXsnpAg66as7Iqk7Yq466W8IO2VhOuTnCDsho3shLHsl5DshJwg7IKs7Jqp7ZWY6riwIOychO2VtCDsl6zquLDshJwg7IKs7Jqp7ZWgIO2PrOupp+ycvOuhnCDrs4DtmZjtlZzri6QuIC5cclxuICAgKlxyXG4gICAqIEByZXR1cm4ge0FycmF5fSBbeyB0ZXh0OiAsIHZhbHVlOiAgfS4uLl1cclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgY29udmVydFVzZXJMaXN0VG9TZWxlY3RPcHRpb25zKCkge1xyXG4gICAgbGV0IG9wdGlvbkxpc3QgPSBbXTtcclxuXHJcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoX3RlbXBsYXRlTW9kLnRlbXBsYXRlVXNlckZpZWxkSW5mbyk7XHJcbiAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICBjb25zdCB1c3JJbmZvID0gX3RlbXBsYXRlTW9kLnRlbXBsYXRlVXNlckZpZWxkSW5mb1trZXldO1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgdXNySW5mby5pc0Zvcm1lciAhPT0gbnVsbCAmJlxyXG4gICAgICAgIHVzckluZm8uaXNGb3JtZXIgIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgIHVzckluZm8uaXNGb3JtZXIgPT09IFwiWVwiXHJcbiAgICAgICkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBvcHRpb25MaXN0LnB1c2goe1xyXG4gICAgICAgIHRleHQ6IHVzckluZm8uZGlzcGxheVVzZXJOYW1lLFxyXG4gICAgICAgIHZhbHVlOiB1c3JJbmZvLnVzZXJVVUlELFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBvcHRpb25MaXN0O1xyXG4gIH1cclxuXHJcbiAgY29weU9iamVjdCgpIHtcclxuICAgIF90ZW1wbGF0ZU1vZC50ZW1wbGF0ZUNsaXBCb2FyZCA9IFwiXCI7XHJcbiAgICBjb25zdCBzZWxlY3RlZE5vZGUgPSBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiIC5cIiArIENPTlNUQU5UUy5FRElUT1JfQVRUUl9DTEFTU1xyXG4gICAgKTtcclxuICAgIGlmIChzZWxlY3RlZE5vZGUgPT09IG51bGwpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYXR0clBhbmVsTm9kZSA9IHNlbGVjdGVkTm9kZS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5cIiArIENPTlNUQU5UUy5FRElUT1JfQVRUUl9QQU5FTF9DTEFTU1xyXG4gICAgKTtcclxuICAgIGlmIChhdHRyUGFuZWxOb2RlID09PSBudWxsKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGlkTGlzdEF0dHIgPSBhdHRyUGFuZWxOb2RlLmdldEF0dHJpYnV0ZShcIkZpZWxkLWlkLWxpc3RcIik7XHJcbiAgICBfdGVtcGxhdGVNb2QudGVtcGxhdGVDbGlwQm9hcmQgPSBpZExpc3RBdHRyO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGNyZWF0ZURyYWdPdmVyR3JvdXBcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjY3JlYXRlRHJhZ092ZXJHcm91cFxyXG4gICAqIEBkZXNjcmlwdGlvbiDsgqzsnbTrk5wg65Oc656Y6re4IOuQnCDqs7PsnZggT2JqZWN065Ok7J2EIHN2ZyDqt7jro7nsnLzroZwg66y264qU64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGJvcmRlciBTbmFw7J2YIGJvdW5kaW5nIGJveFxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBjcmVhdGVEcmFnT3Zlckdyb3VwKGJvcmRlcikge1xyXG4gICAgX3RlbXBsYXRlTW9kLmhpZGVGaWVsZEF0dHJpYnV0ZSgpO1xyXG4gICAgdmFyIHRlbXBHTmV3ID0gX3RlbXBsYXRlTW9kLm1haW5DYW52YXMuZ3JvdXAoKTtcclxuICAgIHRlbXBHTmV3LmF0dHIoeyBpZDogQ09OU1RBTlRTLkRSQUdfQk9YX05BTUUgfSk7XHJcbiAgICB2YXIgaXRlbXMgPSBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy5zZWxlY3RBbGwoXHJcbiAgICAgIFwiI1wiICsgQ09OU1RBTlRTLk1BSU5fR1JPVVBfTkFNRSArIFwiID4gZ1wiXHJcbiAgICApO1xyXG4gICAgdmFyIHNlbGVjdEl0ZW1BcnJheSA9IFtdO1xyXG4gICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgdmFyIG15Ym91bmRzID0gZWwuZ2V0QkJveCgpO1xyXG4gICAgICBpZiAoU25hcC5wYXRoLmlzQkJveEludGVyc2VjdChteWJvdW5kcywgYm9yZGVyKSkge1xyXG4gICAgICAgIHNlbGVjdEl0ZW1BcnJheS5wdXNoKGVsKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIVV0aWxzLmlzRW1wdHlPYmplY3QoZWwuZnJlZVRyYW5zZm9ybSkpIHtcclxuICAgICAgICBlbC5mcmVlVHJhbnNmb3JtLmhpZGVSZXNpemVIYW5kbGVyKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgaWYgKHNlbGVjdEl0ZW1BcnJheS5sZW5ndGggPT0gMSkge1xyXG4gICAgICBpZiAoIVV0aWxzLmlzRW1wdHlPYmplY3Qoc2VsZWN0SXRlbUFycmF5WzBdLmZyZWVUcmFuc2Zvcm0pKSB7XHJcbiAgICAgICAgc2VsZWN0SXRlbUFycmF5WzBdLmZyZWVUcmFuc2Zvcm0udW5wbHVnKCk7XHJcbiAgICAgIH1cclxuICAgICAgbGV0IGJib3ggPSBzZWxlY3RJdGVtQXJyYXlbMF0uZ2V0QkJveCgpO1xyXG4gICAgICBfdGVtcGxhdGVNb2QuY2hhbmdlRnJlZVRyYW5zZm9ybShcclxuICAgICAgICBzZWxlY3RJdGVtQXJyYXlbMF0sXHJcbiAgICAgICAgYmJveC53aWR0aCxcclxuICAgICAgICBiYm94LmhlaWdodFxyXG4gICAgICApO1xyXG4gICAgICBjb25zdCBjaGlsZFJlY3QgPSBzZWxlY3RJdGVtQXJyYXlbMF0uc2VsZWN0KFwicmVjdFwiKTtcclxuICAgICAgX3RlbXBsYXRlTW9kLnNob3dGaWVsZEF0dHJpYnV0ZShjaGlsZFJlY3QuYXR0cihcImlkXCIpKTtcclxuICAgICAgdGVtcEdOZXcucmVtb3ZlKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChzZWxlY3RJdGVtQXJyYXkubGVuZ3RoIDwgMSkge1xyXG4gICAgICB0ZW1wR05ldy5yZW1vdmUoKTtcclxuICAgICAgX3RlbXBsYXRlTW9kLmhpZGVGaWVsZEF0dHJpYnV0ZSgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB2YXIgZmllbGRMaXN0ID0gW107XHJcbiAgICBzZWxlY3RJdGVtQXJyYXkuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgaWYgKCFVdGlscy5pc0VtcHR5T2JqZWN0KGVsLmZyZWVUcmFuc2Zvcm0pKSB7XHJcbiAgICAgICAgZWwuZnJlZVRyYW5zZm9ybS51bnBsdWcoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgY2hpbGRSZWN0ID0gZWwuc2VsZWN0KFwicmVjdFwiKTtcclxuICAgICAgZmllbGRMaXN0LnB1c2goX3RlbXBsYXRlTW9kLmZpZWxkRGljdGlvbmFyeVtjaGlsZFJlY3QuYXR0cihcImlkXCIpXSk7XHJcbiAgICAgIHRlbXBHTmV3LmFwcGVuZChlbCk7XHJcbiAgICB9KTtcclxuICAgIF90ZW1wbGF0ZU1vZC5zaG93RmllbGRMaXN0QXR0cmlidXRlKGZpZWxkTGlzdCk7XHJcbiAgICBpZiAoIVV0aWxzLmlzRW1wdHlPYmplY3QodGVtcEdOZXcuZnJlZVRyYW5zZm9ybSkpIHtcclxuICAgICAgdGVtcEdOZXcuZnJlZVRyYW5zZm9ybS51bnBsdWcoKTtcclxuICAgIH1cclxuICAgIF90ZW1wbGF0ZU1vZC5jYWxjVGVtcGxhdGVCb3VuZGFyeShcclxuICAgICAgdGVtcEdOZXcuZ2V0QkJveCgpLndpZHRoLFxyXG4gICAgICB0ZW1wR05ldy5nZXRCQm94KCkuaGVpZ2h0XHJcbiAgICApO1xyXG4gICAgdmFyIHRlbXBHRnQgPSBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy5mcmVlVHJhbnNmb3JtKFxyXG4gICAgICB0ZW1wR05ldyxcclxuICAgICAge1xyXG4gICAgICAgIHNuYXA6IHsgcm90YXRlOiAxIH0sXHJcbiAgICAgICAgc2l6ZTogNCxcclxuICAgICAgICBkcmF3OiBcImJib3hcIixcclxuICAgICAgICBib3VuZGFyeTogX3RlbXBsYXRlTW9kLnBhZ2VCb3VuZGluZ0JveCxcclxuICAgICAgfSxcclxuICAgICAgZnVuY3Rpb24gKGZ0LCBldmVudHMpIHtcclxuICAgICAgICBfdGVtcGxhdGVNb2QudG1wR3JvdXBGdEV2ZW50KGV2ZW50c1swXSk7XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICB0ZW1wR0Z0LnNldE9wdHMoeyByb3RhdGU6IGZhbHNlLCBzY2FsZTogZmFsc2UgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gY3JlYXRlRmllbGRcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjY3JlYXRlRmllbGRcclxuICAgKiBAZGVzY3JpcHRpb24g7IKs7J2065OcIO2VhOuTnOulvCDsg53shLHtlZzri6QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAg7ZWE65Oc7J2YIO2DgOyehVxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBtb3VzZVBhZ2VYICAg66eI7Jqw7Iqk7J2YIHjsooztkZxcclxuICAgKiBAcGFyYW0ge051bWJlciB9IG1vdXNlUGFnZVkgICDrp4jsmrDsiqTsnZggeeyijO2RnFxyXG4gICAqIEByZXR1cm4ge09iamVjdH0gZmllbGRHcm91cCBTVkfsnZggR3JvdXAgT2JqZWN0XHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIGNyZWF0ZUZpZWxkKHR5cGUsIG1vdXNlUGFnZVgsIG1vdXNlUGFnZVkpIHtcclxuICAgIHZhciBtYWluR3JvdXAgPSBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy5zZWxlY3QoXHJcbiAgICAgIFwiI1wiICsgQ09OU1RBTlRTLk1BSU5fR1JPVVBfTkFNRVxyXG4gICAgKTtcclxuXHJcbiAgICBjb25zdCB2aWV3ZXIxID0gX3RlbXBsYXRlTW9kLm93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiAjXCIgKyBDT05TVEFOVFMuVEVNUExBVEVfUERGX1ZJRVdFUlxyXG4gICAgKTtcclxuICAgIGNvbnN0IHZpZXdlckJvdW5kaW5nUmVjdCA9IHZpZXdlcjEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICBjb25zdCBtMSA9IF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzLnRyYW5zZm9ybSgpLmRpZmZNYXRyaXguaW52ZXJ0KCk7XHJcbiAgICBjb25zdCBmaWVsZFggPSBtMS54KFxyXG4gICAgICBtb3VzZVBhZ2VYIC0gdmlld2VyQm91bmRpbmdSZWN0LmxlZnQsXHJcbiAgICAgIG1vdXNlUGFnZVkgLSB2aWV3ZXJCb3VuZGluZ1JlY3QudG9wXHJcbiAgICApO1xyXG4gICAgY29uc3QgZmllbGRZID0gbTEueShcclxuICAgICAgbW91c2VQYWdlWCAtIHZpZXdlckJvdW5kaW5nUmVjdC5sZWZ0LFxyXG4gICAgICBtb3VzZVBhZ2VZIC0gdmlld2VyQm91bmRpbmdSZWN0LnRvcFxyXG4gICAgKTtcclxuICAgIGxldCBmaWVsZCA9IF90ZW1wbGF0ZU1vZC5jcmVhdGVGaWVsZE9iamVjdChcclxuICAgICAgdHlwZSxcclxuICAgICAgZmllbGRYLFxyXG4gICAgICBmaWVsZFksXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5nZXRQZGZQYWdlRnJvbVN2Z1BvcyhmaWVsZFgsIGZpZWxkWSlcclxuICAgICk7XHJcbiAgICBfdGVtcGxhdGVNb2Quc2VsZWN0QWRkRmllbGRUeXBlID0gXCJcIjtcclxuICAgIGxldCBvc3QgPSBfdGVtcGxhdGVNb2QuY29tcHV0ZVBhZ2VPZmZzZXQoKTtcclxuICAgIGxldCBwYWdlQm9yZGVyV2lkdGggPSBfdGVtcGxhdGVNb2QuZ2V0UGFnZUJvcmRlcldpZHRoKGZpZWxkLnBhZ2VObyk7XHJcblxyXG4gICAgbGV0IHggPSBtb3VzZVBhZ2VYIC0gb3N0LmxlZnQgLSBwYWdlQm9yZGVyV2lkdGgubGVmdDtcclxuICAgIGxldCB5ID0gbW91c2VQYWdlWSAtIG9zdC50b3AgLSBwYWdlQm9yZGVyV2lkdGgudG9wO1xyXG4gICAgbGV0IGZpZWxkR3JvdXAgPSBmaWVsZC5nZXRTVkdGaWVsZE9iamVjdChcclxuICAgICAgX3RlbXBsYXRlTW9kLm1haW5DYW52YXMsXHJcbiAgICAgIG1haW5Hcm91cCxcclxuICAgICAgX3RlbXBsYXRlTW9kLnBkZlZpZXdlci5jdXJyZW50U2NhbGUsXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5vd25lck5vZGUsXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5yZW1vdmVEcmFnT3Zlckdyb3VwLFxyXG4gICAgICBfdGVtcGxhdGVNb2QuY2hhbmdlRmllbGRWYWx1ZUV2ZW50LFxyXG4gICAgICBfdGVtcGxhdGVNb2QuY2hhbmdlRnJlZVRyYW5zZm9ybVxyXG4gICAgKTtcclxuICAgIHZhciBncm91cEJCb3ggPSBmaWVsZEdyb3VwLmdldEJCb3goKTtcclxuICAgIGNvbnN0IHZpZXdwb3J0ID0gX3RlbXBsYXRlTW9kLnBkZlZpZXdlci5fcGFnZXNbZmllbGQucGFnZU5vIC0gMV0udmlld3BvcnQ7XHJcbiAgICBsZXQgcGRmUG9pc2lvbiA9IHZpZXdwb3J0LmNvbnZlcnRUb1BkZlBvaW50KHgsIHkpO1xyXG4gICAgbGV0IHBkZlBvaXNpb24yID0gdmlld3BvcnQuY29udmVydFRvUGRmUG9pbnQoXHJcbiAgICAgIHggKyBncm91cEJCb3gud2lkdGgsXHJcbiAgICAgIHkgKyBncm91cEJCb3guaGVpZ2h0XHJcbiAgICApO1xyXG4gICAgZmllbGQucGRmWCA9IHBkZlBvaXNpb25bMF07XHJcbiAgICBmaWVsZC5wZGZZID0gcGRmUG9pc2lvblsxXTtcclxuICAgIGZpZWxkLnBkZlgyID0gcGRmUG9pc2lvbjJbMF07XHJcbiAgICBmaWVsZC5wZGZZMiA9IHBkZlBvaXNpb24yWzFdO1xyXG4gICAgX3RlbXBsYXRlTW9kLmZpZWxkRGljdGlvbmFyeVtmaWVsZC5pZF0gPSBmaWVsZDtcclxuICAgIGlmIChVdGlscy5nZXRVc2VySW5mb09wdHNMaXN0Q291bnQoKSA9PT0gMSkge1xyXG4gICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoX3RlbXBsYXRlTW9kLnRlbXBsYXRlVXNlckZpZWxkSW5mbyk7XHJcbiAgICAgIGZpZWxkLm1fb3duZXJJZCA9IF90ZW1wbGF0ZU1vZC50ZW1wbGF0ZVVzZXJGaWVsZEluZm9ba2V5c1swXV0udXNlclVVSUQ7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5yZWZyZXNoZm9ybWVyTGlzdChmaWVsZCk7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5idWlsZEZpZWxkZm9ybWVyTGlzdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIF90ZW1wbGF0ZU1vZC5jaGFuZ2VGcmVlVHJhbnNmb3JtKGZpZWxkR3JvdXAsIGZpZWxkLndpZHRoLCBmaWVsZC5oZWlnaHQpO1xyXG4gICAgX3RlbXBsYXRlTW9kLnNob3dBc3Rlcmlza0RpdihcclxuICAgICAgZmllbGQuaWQsXHJcbiAgICAgIGZpZWxkLnJlcXVpcmVkID09PSBcInRydWVcIixcclxuICAgICAgZmllbGQueCxcclxuICAgICAgZmllbGQueSxcclxuICAgICAgZmllbGQuaGVpZ2h0XHJcbiAgICApO1xyXG4gICAgdmFyIGpzb25EYXRhID0gSlNPTi5zdHJpbmdpZnkoZmllbGQpO1xyXG4gICAgX3RlbXBsYXRlTW9kLmFkZFVuZG9SZWRvQWN0KFxyXG4gICAgICBDT05TVEFOVFMuQ1JFQVRFX0ZJRUxEX0FDVElPTixcclxuICAgICAganNvbkRhdGEsXHJcbiAgICAgIGpzb25EYXRhXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIGZpZWxkR3JvdXA7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gY3JlYXRlRmllbGRPYmplY3RcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjY3JlYXRlRmllbGRPYmplY3RcclxuICAgKiBAZGVzY3JpcHRpb24g7IKs7J2065OcIEZpbGVkIE9iamVjdOydmCDsnbjsiqTthLTsiqTrpbwg7IOd7ISx7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUg7ZWE65Oc7J2YIO2DgOyehVxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB4ICAgICB47KKM7ZGcXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHkgICAgIHnsooztkZxcclxuICAgKiBAcmV0dXJuIHtPYmplY3R9IEZpZWxkIE9iamVjdFxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBjcmVhdGVGaWVsZE9iamVjdCh0eXBlLCB4LCB5LCBwYWdlTnVtID0gdW5kZWZpbmVkKSB7XHJcbiAgICBsZXQgZmllbGRJZCA9IF90ZW1wbGF0ZU1vZC5nZW5lcmF0ZUZpZWxkSWQodHlwZSk7XHJcbiAgICBsZXQgcGFnZU5vID0gcGFnZU51bTtcclxuICAgIGlmIChwYWdlTnVtID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgcGFnZU5vID0gX3RlbXBsYXRlTW9kLnBkZlZpZXdlci5jdXJyZW50UGFnZU51bWJlcjtcclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKHBhZ2VObyk7XHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgY2FzZSBcIlRleHRGaWVsZFwiOiB7XHJcbiAgICAgICAgbGV0IHRleHRGaWVsZCA9IG5ldyBUZXh0RmllbGQoZmllbGRJZCwgcGFnZU5vLCB4LCB5KTtcclxuICAgICAgICByZXR1cm4gdGV4dEZpZWxkO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgXCJMYWJlbEZpZWxkXCI6IHtcclxuICAgICAgICBsZXQgbGFiZWxGaWVsZCA9IG5ldyBMYWJlbEZpZWxkKGZpZWxkSWQsIHBhZ2VObywgeCwgeSk7XHJcbiAgICAgICAgcmV0dXJuIGxhYmVsRmllbGQ7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIlNpZ25GaWVsZFwiOiB7XHJcbiAgICAgICAgbGV0IHNpZ25GaWVsZCA9IG5ldyBTaWduRmllbGQoXHJcbiAgICAgICAgICBmaWVsZElkLFxyXG4gICAgICAgICAgcGFnZU5vLFxyXG4gICAgICAgICAgeCxcclxuICAgICAgICAgIHksXHJcbiAgICAgICAgICBfdGVtcGxhdGVNb2QudXNlRHJhd1NpZ24sXHJcbiAgICAgICAgICBfdGVtcGxhdGVNb2QudXNlSW1hZ2VTaWduLFxyXG4gICAgICAgICAgX3RlbXBsYXRlTW9kLnVzZVJlZ1NpZ25cclxuICAgICAgICApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBzaWduRmllbGQ7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIk51bWJlckZpZWxkXCI6IHtcclxuICAgICAgICBsZXQgbnVtYmVyRmllbGQgPSBuZXcgTnVtYmVyRmllbGQoZmllbGRJZCwgcGFnZU5vLCB4LCB5KTtcclxuICAgICAgICByZXR1cm4gbnVtYmVyRmllbGQ7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIkRhdGVGaWVsZFwiOiB7XHJcbiAgICAgICAgbGV0IGRhdGVGaWVsZCA9IG5ldyBEYXRlRmllbGQoZmllbGRJZCwgcGFnZU5vLCB4LCB5KTtcclxuICAgICAgICByZXR1cm4gZGF0ZUZpZWxkO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgXCJJbWFnZUZpZWxkXCI6IHtcclxuICAgICAgICBsZXQgaW1hZ2VGaWVsZCA9IG5ldyBJbWFnZUZpZWxkKGZpZWxkSWQsIHBhZ2VObywgeCwgeSk7XHJcbiAgICAgICAgcmV0dXJuIGltYWdlRmllbGQ7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIk11bHRpTGluZVRleHRGaWVsZFwiOiB7XHJcbiAgICAgICAgbGV0IG11bHRpbGluZVRleHRGaWVsZCA9IG5ldyBNdWx0aUxpbmVUZXh0RmllbGQoZmllbGRJZCwgcGFnZU5vLCB4LCB5KTtcclxuICAgICAgICByZXR1cm4gbXVsdGlsaW5lVGV4dEZpZWxkO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgXCJDaGVja2JveEZpZWxkXCI6IHtcclxuICAgICAgICBsZXQgY2hlY2tib3hGaWVsZCA9IG5ldyBDaGVja2JveEZpZWxkKGZpZWxkSWQsIHBhZ2VObywgeCwgeSk7XHJcbiAgICAgICAgcmV0dXJuIGNoZWNrYm94RmllbGQ7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIlJhZGlvRmllbGRcIjoge1xyXG4gICAgICAgIGxldCByYWRpb0ZpZWxkID0gbmV3IFJhZGlvRmllbGQoZmllbGRJZCwgcGFnZU5vLCB4LCB5KTtcclxuICAgICAgICByZXR1cm4gcmFkaW9GaWVsZDtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwiQ29tYm9ib3hGaWVsZFwiOiB7XHJcbiAgICAgICAgbGV0IGNvbWJvYm94RmllbGQgPSBuZXcgQ29tYm9ib3hGaWVsZChmaWVsZElkLCBwYWdlTm8sIHgsIHkpO1xyXG4gICAgICAgIHJldHVybiBjb21ib2JveEZpZWxkO1xyXG4gICAgICB9XHJcbiAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGNyZWF0ZVRlbXBsYXRlUmVjdFxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNjcmVhdGVUZW1wbGF0ZVJlY3RcclxuICAgKiBAZGVzY3JpcHRpb24gUERG7JyE7JeQIOyYrOudvOqwgOuKlCBUZW1wbGF0ZSDroIjsnbTslrTsl5Ag7ZWE65Oc66W8IOunjOuTpOq4sOychO2VtCDsnoTsi5wgRGl266W8IOunjOuToOuLpC5cclxuICAgKlxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBjcmVhdGVUZW1wbGF0ZVJlY3QoKSB7XHJcbiAgICB2YXIgdGVtcGxhdGVMYXllciA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIgI1wiICsgQ09OU1RBTlRTLlRFTVBMQVRFX0xBWUVSX05BTUVcclxuICAgICk7XHJcbiAgICB0ZW1wbGF0ZUxheWVyLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICBsZXQgdGVtcGxhdGVSZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIHRlbXBsYXRlUmVjdC5pZCA9IENPTlNUQU5UUy5URU1QTEFURV9MQVlFUl9SRUNUX05BTUU7XHJcbiAgICB0ZW1wbGF0ZVJlY3Quc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XHJcbiAgICB0ZW1wbGF0ZVJlY3Quc3R5bGUubGVmdCA9IFwiMHB4XCI7XHJcbiAgICB0ZW1wbGF0ZVJlY3Quc3R5bGUudG9wID0gXCIwcHhcIjtcclxuICAgIHZhciBzaXplID0gX3RlbXBsYXRlTW9kLmdldEZpZWxkU2l6ZShfdGVtcGxhdGVNb2Quc2VsZWN0QWRkRmllbGRUeXBlKTtcclxuICAgIHZhciBjdXJTY2FsZSA9IF90ZW1wbGF0ZU1vZC5wZGZWaWV3ZXIuY3VycmVudFNjYWxlO1xyXG4gICAgdGVtcGxhdGVSZWN0LnN0eWxlLndpZHRoID0gc2l6ZS53ICogY3VyU2NhbGUgKyBcInB4XCI7XHJcbiAgICB0ZW1wbGF0ZVJlY3Quc3R5bGUuaGVpZ2h0ID0gc2l6ZS5oICogY3VyU2NhbGUgKyBcInB4XCI7XHJcbiAgICB0ZW1wbGF0ZVJlY3Quc3R5bGUuYmFja2dyb3VuZCA9IFwibm9uZVwiO1xyXG4gICAgdGVtcGxhdGVSZWN0LnN0eWxlLmJvcmRlciA9IFwiMXB4IHNvbGlkIHJlZFwiO1xyXG4gICAgX3RlbXBsYXRlTW9kLm93bmVyTm9kZVxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIiAjXCIgKyBDT05TVEFOVFMuVEVNUExBVEVfTEFZRVJfTkFNRSlcclxuICAgICAgLmFwcGVuZENoaWxkKHRlbXBsYXRlUmVjdCk7XHJcblxyXG4gICAgdGVtcGxhdGVMYXllci5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICBcIm1vdXNlbW92ZVwiLFxyXG4gICAgICBfdGVtcGxhdGVNb2QudGVtcGxhdGVNb3VzZU1vdmVFdmVudCxcclxuICAgICAgdHJ1ZVxyXG4gICAgKTtcclxuICAgIHRlbXBsYXRlTGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgXCJtb3VzZXVwXCIsXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC50ZW1wbGF0ZU1vdXNlVXBFdmVudCxcclxuICAgICAgdHJ1ZVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBkcmFnZW5kRnVuY1xyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNkcmFnZW5kRnVuY1xyXG4gICAqIEBkZXNjcmlwdGlvbiBTVkfrgrTsl5DshJwgRHJhZ+qwgCDrgZ3rgqzsnYTrloTsnZgg7ZuE7LKY66as66W8IO2VnOuLpC4gLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgZXZlbnQgb2JqZWN0XHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIGRyYWdlbmRGdW5jKGV2ZW50KSB7XHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIGlmICghX3RlbXBsYXRlTW9kLmRyYWdTdGFydCkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICB2YXIgYm9yZGVyID0gX3RlbXBsYXRlTW9kLmRyYWdCb3guZ2V0QkJveCgpO1xyXG4gICAgX3RlbXBsYXRlTW9kLmRyYWdCb3gucmVtb3ZlKCk7XHJcbiAgICBfdGVtcGxhdGVNb2QuZHJhZ1N0YXJ0ID0gZmFsc2U7XHJcbiAgICBfdGVtcGxhdGVNb2QucmVtb3ZlRHJhZ092ZXJHcm91cCgpO1xyXG4gICAgX3RlbXBsYXRlTW9kLmNyZWF0ZURyYWdPdmVyR3JvdXAoYm9yZGVyKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBkcmFnbW92ZUZ1bmNcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZHJhZ21vdmVGdW5jXHJcbiAgICogQGRlc2NyaXB0aW9uIFNWR+uCtOyXkOyEnCDrk5zrnpjqt7gg7KSR7J28IOuVjCDsspjrpqzrpbwg7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGR4ICDsi5zsnpHsooztkZzroZwg67aA7YSwIHjrp4ztgbwg7JuA7KeB7J24IO2BrOq4sFxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkeSAgIOyLnOyekeyijO2RnOuhnCDrtoDthLAgeeunjO2BvCDsm4Dsp4Hsnbgg7YGs6riwXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHggICDrp4jsmrDsiqTsnZggeOyijO2RnCDsgqzsmqntlZjsp4Ag7JWK7J2MXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHkgICDrp4jsmrDsiqTsnZggeeyijO2RnCDsgqzsmqntlZjsp4Ag7JWK7J2MXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50ICAgICBFdmVudCBPYmplY3RcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgZHJhZ21vdmVGdW5jKGR4LCBkeSwgeCwgeSwgZXZlbnQpIHtcclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgaWYgKCFfdGVtcGxhdGVNb2QuZHJhZ1N0YXJ0KSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHZhciB4b2Zmc2V0ID0gMCxcclxuICAgICAgeW9mZnNldCA9IDA7XHJcblxyXG4gICAgaWYgKGR4IDwgMCkge1xyXG4gICAgICB4b2Zmc2V0ID0gZHg7XHJcbiAgICAgIGR4ID0gLTEgKiBkeDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZHkgPCAwKSB7XHJcbiAgICAgIHlvZmZzZXQgPSBkeTtcclxuICAgICAgZHkgPSAtMSAqIGR5O1xyXG4gICAgfVxyXG5cclxuICAgIF90ZW1wbGF0ZU1vZC5kcmFnQm94LnRyYW5zZm9ybShcIlRcIiArIHhvZmZzZXQgKyBcIixcIiArIHlvZmZzZXQpO1xyXG4gICAgX3RlbXBsYXRlTW9kLmRyYWdCb3guYXR0cihcIndpZHRoXCIsIGR4KTtcclxuICAgIF90ZW1wbGF0ZU1vZC5kcmFnQm94LmF0dHIoXCJoZWlnaHRcIiwgZHkpO1xyXG4gICAgX3RlbXBsYXRlTW9kLmRyYWdCb3guYXR0cihcImZpbGxcIiwgXCJub25lXCIpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGRyYWdzdGFydEZ1bmNcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZHJhZ3N0YXJ0RnVuY1xyXG4gICAqIEBkZXNjcmlwdGlvbiBTVkfrgrTsl5DshJwgZHJhZ+ulvCDsi5zsnpHtlaDrlYwg7LKY66as7ZWY64qUIOuplOyGjOuTnFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHggICDrp4jsmrDsiqTsnZggeOyijO2RnCDsgqzsmqntlZjsp4Ag7JWK7J2MXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHkgICDrp4jsmrDsiqTsnZggeeyijO2RnCDsgqzsmqntlZjsp4Ag7JWK7J2MXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50ICAgICBFdmVudCBPYmplY3RcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgZHJhZ3N0YXJ0RnVuYyh4LCB5LCBldmVudCkge1xyXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAvL2lmIHBhdGggb3IgY2lyY2xlIHdlcmUgY2xpY2tlZCBkb24ndCBkcmF3IGJveFxyXG4gICAgaWYgKFxyXG4gICAgICAhKGV2ZW50LnRhcmdldC5ub2RlTmFtZSA9PT0gXCJzdmdcIiB8fCBldmVudC50YXJnZXQubm9kZU5hbWUgPT09IFwicmVjdFwiKVxyXG4gICAgKSB7XHJcbiAgICAgIGlmIChfdGVtcGxhdGVNb2QuZHJhZ0JveCkge1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5kcmFnQm94LnJlbW92ZSgpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmIChldmVudC50YXJnZXQubm9kZU5hbWUgPT09IFwicmVjdFwiKSB7XHJcbiAgICAgIHZhciBkcmFnU3RvcCA9IGZhbHNlO1xyXG4gICAgICBpZiAoIVV0aWxzLmlzU3RyaW5nRW1wdHkoZXZlbnQuc3JjRWxlbWVudC5pZCkpIHtcclxuICAgICAgICB2YXIgb2JqMSA9IF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzXHJcbiAgICAgICAgICAuc2VsZWN0KFwiI1wiICsgZXZlbnQuc3JjRWxlbWVudC5pZClcclxuICAgICAgICAgIC5wYXJlbnQoKTtcclxuICAgICAgICBpZiAob2JqMSkge1xyXG4gICAgICAgICAgZHJhZ1N0b3AgPVxyXG4gICAgICAgICAgICAhVXRpbHMuaXNFbXB0eU9iamVjdChvYmoxLmZyZWVUcmFuc2Zvcm0pIHx8XHJcbiAgICAgICAgICAgIG9iajEucGFyZW50KCkuYXR0cihcImlkXCIpID09PSBDT05TVEFOVFMuRFJBR19CT1hfTkFNRTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKFxyXG4gICAgICAgIChldmVudC50YXJnZXQgIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdCAhPT0gbnVsbCAmJlxyXG4gICAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdCAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0Lmxlbmd0aCA+IDAgJiZcclxuICAgICAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJmdGhhbmRsZVwiKSkgfHxcclxuICAgICAgICBkcmFnU3RvcFxyXG4gICAgICApIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBfdGVtcGxhdGVNb2QuZHJhZ0JveCAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICBfdGVtcGxhdGVNb2QuZHJhZ0JveCAhPT0gbnVsbFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgX3RlbXBsYXRlTW9kLmRyYWdCb3gucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgX3RlbXBsYXRlTW9kLmRyYWdTdGFydCA9IHRydWU7XHJcbiAgICB2YXIgdmlld2VyMSA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIgI1wiICsgQ09OU1RBTlRTLlRFTVBMQVRFX1BERl9WSUVXRVJcclxuICAgICk7XHJcbiAgICB2YXIgYnIgPSB2aWV3ZXIxLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgdmFyIG1haW5DYXZuYXNNYXRyaXggPSBfdGVtcGxhdGVNb2QubWFpbkNhbnZhc1xyXG4gICAgICAudHJhbnNmb3JtKClcclxuICAgICAgLmRpZmZNYXRyaXguaW52ZXJ0KCk7XHJcbiAgICB2YXIgZ3JhZ0JveFggPSBtYWluQ2F2bmFzTWF0cml4LngoXHJcbiAgICAgIGV2ZW50LnBhZ2VYIC0gYnIubGVmdCxcclxuICAgICAgZXZlbnQucGFnZVkgLSBici50b3BcclxuICAgICk7XHJcbiAgICB2YXIgZ3JhZ0JveFkgPSBtYWluQ2F2bmFzTWF0cml4LnkoXHJcbiAgICAgIGV2ZW50LnBhZ2VYIC0gYnIubGVmdCxcclxuICAgICAgZXZlbnQucGFnZVkgLSBici50b3BcclxuICAgICk7XHJcbiAgICBfdGVtcGxhdGVNb2QuZHJhZ0JveCA9IF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzXHJcbiAgICAgIC5yZWN0KGdyYWdCb3hYLCBncmFnQm94WSwgMCwgMClcclxuICAgICAgLmF0dHIoXCJzdHJva2VcIiwgXCJibGFja1wiKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBleHBvcnRGaWVsZERhdGFcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZXhwb3J0RmllbGREYXRhXHJcbiAgICogQGRlc2NyaXB0aW9uIEZpZWxk7KCV67O066W8IEpTT07tmJXsi53snLzroZwg66as7YS07ZWY64qUIOuplOyGjOuTnFxyXG4gICAqXHJcbiAgICogQHJldHVybiB7U3RyaW5nfSB7IGZvcm1UZW1wbGF0ZU5hbWU6IFwiXCIsIHBhZ2VzOiBbIHtkYXRhLi4uLCBmaWVsZHM6IFtdfV0gfVxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBleHBvcnRGaWVsZERhdGEoKSB7XHJcbiAgICB2YXIgdGVtcGxhdGVUaXRsZSA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIgLkVkaXRvci1Ub29sYmFyLUdyb3VwLkNlbnRlciA+IHNwYW4gXCJcclxuICAgICk7XHJcbiAgICB0ZW1wbGF0ZVRpdGxlLnRleHRDb250ZW50O1xyXG4gICAgbGV0IHRlbXBsYXRlRGF0YSA9IG5ldyBUZW1wbGF0ZURhdGEodGVtcGxhdGVUaXRsZS50ZXh0Q29udGVudCk7XHJcblxyXG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKF90ZW1wbGF0ZU1vZC50ZW1wbGF0ZVVzZXJGaWVsZEluZm8pO1xyXG4gICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgY29uc3QgdXNlckluZm8gPSBfdGVtcGxhdGVNb2QudGVtcGxhdGVVc2VyRmllbGRJbmZvW2tleV07XHJcbiAgICAgIGxldCB0ZW1wbGF0ZURhdGFPd25lciA9XHJcbiAgICAgICAgVGVtcGxhdGVEYXRhT3duZXIuY2xvbmVUZW1wbGF0ZURhdGFPd25lck9iamVjdCh1c2VySW5mbyk7XHJcbiAgICAgIGZvciAoXHJcbiAgICAgICAgdmFyIHBhZ2VObyA9IDA7XHJcbiAgICAgICAgcGFnZU5vIDwgX3RlbXBsYXRlTW9kLnBkZlZpZXdlci5wYWdlc0NvdW50O1xyXG4gICAgICAgICsrcGFnZU5vXHJcbiAgICAgICkge1xyXG4gICAgICAgIGxldCB0ZW1wbGF0ZURhdGFQYWdlID0gbmV3IFRlbXBsYXRlRGF0YVBhZ2UocGFnZU5vKTtcclxuXHJcbiAgICAgICAgY29uc3QgZmllbGRLZXlzID0gT2JqZWN0LmtleXMoX3RlbXBsYXRlTW9kLmZpZWxkRGljdGlvbmFyeSk7XHJcbiAgICAgICAgZmllbGRLZXlzLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkS2V5KSB7XHJcbiAgICAgICAgICBjb25zdCBmaWVsZCA9IF90ZW1wbGF0ZU1vZC5maWVsZERpY3Rpb25hcnlbZmllbGRLZXldO1xyXG4gICAgICAgICAgaWYgKGZpZWxkLmlzUmVtb3ZlZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAocGFnZU5vICE9PSBmaWVsZC5wYWdlTm8gLSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChVdGlscy5pc1N0cmluZ0VtcHR5KGZpZWxkLm93bmVySWQpICYmIHVzZXJJbmZvLmlzRm9ybWVyID09PSBcIllcIikge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZURhdGFQYWdlLnB1c2hGaWVsZChmaWVsZCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChmaWVsZC5vd25lcklkICE9PSBrZXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGVtcGxhdGVEYXRhUGFnZS5wdXNoRmllbGQoZmllbGQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRlbXBsYXRlRGF0YU93bmVyLnB1c2hQYWdlKHRlbXBsYXRlRGF0YVBhZ2UpO1xyXG4gICAgICB9XHJcbiAgICAgIHRlbXBsYXRlRGF0YS5wdXNoT3duZXIodGVtcGxhdGVEYXRhT3duZXIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRlbXBsYXRlRGF0YSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gZmllbGREZWxldGVCdG5DbGlja2VkXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2ZpZWxkRGVsZXRlQnRuQ2xpY2tlZFxyXG4gICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zsnZgg7IKt7KCcIOuyhO2KvOydhCDriIzroIDsnYTrlYwg64+Z7J6R7ZWY64qUIOuplOyGjOuTnC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBldnQgICAgRXZlbnQgT2JqZWN0XHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIGZpZWxkRGVsZXRlQnRuQ2xpY2tlZChldnQpIHtcclxuICAgIF90ZW1wbGF0ZU1vZC5yZW1vdmVTZWxlY3RlZEZpZWxkKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gZmllbGRGdEV2ZW50XHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2ZpZWxkRnRFdmVudFxyXG4gICAqIEBkZXNjcmlwdGlvbiBEZWZhdWx0IFZhbHVlIOumrOyKpO2KuOygleuztOulvCDshKTsoJUgLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZSAgIOydtOuypO2KuCDsooXrpZhcclxuICAgKiBAcGFyYW0ge09iamVjdH0gZmllbGQgIFNWR+ydmCBGaWVsZCBHcm91cCBPYmplY3RcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgZmllbGRGdEV2ZW50KGV2ZW50TmFtZSwgZmllbGQpIHtcclxuICAgIGlmIChldmVudE5hbWUgPT09IFwiZHJhZyBzdGFydFwiIHx8IGV2ZW50TmFtZSA9PT0gXCJhcHBseVwiKSB7XHJcbiAgICAgIC8vaGlkZSBhdHRyXHJcbiAgICAgIGxldCBjaGlsZFJlY3QgPSBmaWVsZC5zZWxlY3QoXCJyZWN0XCIpO1xyXG4gICAgICBsZXQgZmllbGRJZCA9IGNoaWxkUmVjdC5hdHRyKFwiaWRcIik7XHJcbiAgICAgIGlmIChfdGVtcGxhdGVNb2QuaXNGaWVsZERyYWdTdGFydCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5oaWRlRmllbGRBdHRyaWJ1dGUoKTtcclxuICAgICAgICBpZiAoVXRpbHMuaXNTaG93QXN0ZXJpc2tEaXYoX3RlbXBsYXRlTW9kLm93bmVyTm9kZSwgZmllbGRJZCkpIHtcclxuICAgICAgICAgIFV0aWxzLnNob3dBc3Rlcmlza0RpdihfdGVtcGxhdGVNb2Qub3duZXJOb2RlLCBmaWVsZElkLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBfdGVtcGxhdGVNb2QuaXNGaWVsZERyYWdTdGFydCA9IHRydWU7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5oaWRlRmllbGRBdHRyaWJ1dGUoKTtcclxuXHJcbiAgICAgIFV0aWxzLnNob3dBc3Rlcmlza0RpdihfdGVtcGxhdGVNb2Qub3duZXJOb2RlLCBmaWVsZElkLCBmYWxzZSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZXZlbnROYW1lID09PSBcInNjYWxlIGVuZFwiIHx8IGV2ZW50TmFtZSA9PT0gXCJkcmFnIGVuZFwiKSB7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5pc0ZpZWxkRHJhZ1N0YXJ0ID0gZmFsc2U7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5jaGFuZ2VGaWVsZFBvc2l0aW9uKGZpZWxkKTtcclxuICAgICAgX3RlbXBsYXRlTW9kLnNob3dGaWVsZEF0dHJpYnV0ZShcclxuICAgICAgICBfdGVtcGxhdGVNb2QuZ2V0RmllbGRJZEZyb21Hcm91cE5vZGUoZmllbGQpXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gZmllbGRSZXBvc2l0aW9uaW5nXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2ZpZWxkUmVwb3NpdGlvbmluZ1xyXG4gICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zsnZgg7JyE7LmY66W8IOyerOyhsOygle2VnOuLpC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudCAgZXZlbnQgb2JqZWN0XHJcbiAgICogQHBhcmFtIHtCb29sZWFufSBpc0ltcG9ydCAgZmllbGTrpbwg7J6E7Y+s7Yq47ZWY64qU7KeAIOyXrOu2gFxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBmaWVsZFJlcG9zaXRpb25pbmcoZXZlbnQsIGlzSW1wb3J0ID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhfdGVtcGxhdGVNb2QuZmllbGREaWN0aW9uYXJ5KTtcclxuICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgIHZhciBmaWVsZCA9IF90ZW1wbGF0ZU1vZC5maWVsZERpY3Rpb25hcnlba2V5XTtcclxuICAgICAgdmFyIGZpZWxkR3JvdXAgPSBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy5zZWxlY3QoXCIjXCIgKyBmaWVsZC5pZCArIFwiR3JvdXBcIik7XHJcblxyXG4gICAgICB2YXIgZmllbGRSZWN0ID0gZmllbGRHcm91cC5zZWxlY3QoXCJyZWN0XCIpO1xyXG4gICAgICB2YXIgZmllbGRTdmcgPSBmaWVsZEdyb3VwLnNlbGVjdChcInN2Z1wiKTtcclxuICAgICAgdmFyIG9sZFcgPSBmaWVsZC53aWR0aDtcclxuICAgICAgY29uc3QgbmV3UmVjdCA9IF90ZW1wbGF0ZU1vZC5jYWxjRmllbGRQb3N0aW9uKGZpZWxkLCBpc0ltcG9ydCk7XHJcbiAgICAgIHZhciBzY2FsZSA9IG5ld1JlY3Qud2lkdGggLyBvbGRXO1xyXG4gICAgICBmaWVsZFJlY3QuYXR0cihuZXdSZWN0KTtcclxuICAgICAgZmllbGRTdmcuYXR0cihuZXdSZWN0KTtcclxuICAgICAgdmFyIGZpZWxkU3ZnVGV4dCA9IGZpZWxkU3ZnLnNlbGVjdChcInRleHRcIik7XHJcbiAgICAgIGlmIChmaWVsZFN2Z1RleHQpIHtcclxuICAgICAgICBmaWVsZFN2Z1RleHQuYXR0cihcImZvbnQtc2l6ZVwiLCBmaWVsZC5mb250U2l6ZSAqIHNjYWxlICsgXCJweFwiKTtcclxuICAgICAgICBmaWVsZEdyb3VwLnRyYW5zZm9ybShTbmFwLm1hdHJpeCgpLnRvVHJhbnNmb3JtU3RyaW5nKCkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBfdGVtcGxhdGVNb2QuY2hhbmdlRnJlZVRyYW5zZm9ybShcclxuICAgICAgICBmaWVsZEdyb3VwLFxyXG4gICAgICAgIG5ld1JlY3Qud2lkdGgsXHJcbiAgICAgICAgbmV3UmVjdC5oZWlnaHRcclxuICAgICAgKTtcclxuXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5zaG93QXN0ZXJpc2tEaXYoXHJcbiAgICAgICAgZmllbGQuaWQsXHJcbiAgICAgICAgZmllbGQucmVxdWlyZWQgPT09IFwidHJ1ZVwiLFxyXG4gICAgICAgIG5ld1JlY3QueCxcclxuICAgICAgICBuZXdSZWN0LnksXHJcbiAgICAgICAgbmV3UmVjdC5oZWlnaHRcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGdlbmVyYXRlRmllbGRJZFxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNnZW5lcmF0ZUZpZWxkSWRcclxuICAgKiBAZGVzY3JpcHRpb24g7ZWE65Oc7J2YIOydtOumhOydhCDtmITsnqwg7KG07J6s7ZWY64qUIO2VhOuTnOydmCBOb+ykkSBNQVjqsJLsnYQg7LC+7JWE7IScICsx7ZW07IScIOunjOuToOuLpC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIO2VhOuTnOydmCDsooXrpZhcclxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IO2VhOuTnOydmCDsnbTrpoQuXHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIGdlbmVyYXRlRmllbGRJZCh0eXBlKSB7XHJcbiAgICB2YXIgdHlwZUxpc3QgPSBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy5zZWxlY3RBbGwoXHJcbiAgICAgIFwicmVjdFtpZF49J1wiICsgdHlwZSArIFwiJ11cIlxyXG4gICAgKTtcclxuICAgIGlmICh0eXBlTGlzdC5sZW5ndGggPCAxKSB7XHJcbiAgICAgIHJldHVybiB0eXBlICsgMTtcclxuICAgIH1cclxuICAgIGxldCBmaXJzdElkID0gdHlwZUxpc3RbMF0ubm9kZS5pZDtcclxuICAgIGxldCBtYXhOb1N0ciA9IGZpcnN0SWQucmVwbGFjZSh0eXBlLCBcIlwiKTtcclxuICAgIGxldCBtYXhObyA9IHBhcnNlSW50KG1heE5vU3RyKTtcclxuICAgIGZvciAodmFyIHR5cGVJZHggPSAxOyB0eXBlSWR4IDwgdHlwZUxpc3QubGVuZ3RoOyB0eXBlSWR4KyspIHtcclxuICAgICAgbGV0IG9iajEgPSB0eXBlTGlzdFt0eXBlSWR4XTtcclxuICAgICAgbGV0IG9iak5vU3RyID0gb2JqMS5hdHRyKFwiaWRcIikucmVwbGFjZSh0eXBlLCBcIlwiKTtcclxuICAgICAgbGV0IG9iak5vID0gcGFyc2VJbnQob2JqTm9TdHIpO1xyXG4gICAgICBpZiAob2JqTm8gPiBtYXhObykge1xyXG4gICAgICAgIG1heE5vID0gb2JqTm87XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIG1heE5vID0gbWF4Tm8gKyAxO1xyXG4gICAgcmV0dXJuIHR5cGUgKyBtYXhObztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBnZXRDcmVhdGVGaWVsZERlZmF1bHRXaWR0aFxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNnZXRDcmVhdGVGaWVsZERlZmF1bHRXaWR0aFxyXG4gICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zrpbwg66eM65Ok65WMIO2VhOuTnOydmCDshKTsoJXrkJwg6riw67O47YGs6riw66W8IOumrO2EtO2VnOuLpC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlICDtlYTrk5zsnZgg7KKF66WYXHJcbiAgICogQHJldHVybiB7TnVtYmVyfSDtlYTrk5zsnZgg6riw67O4IOqwgOuhnOq4uOydtFxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBnZXRDcmVhdGVGaWVsZERlZmF1bHRXaWR0aCh0eXBlKSB7XHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgY2FzZSBcIlRleHRGaWVsZFwiOiB7XHJcbiAgICAgICAgcmV0dXJuIFRleHRGaWVsZC53aWR0aFZhbHVlKCk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIkxhYmVsRmllbGRcIjoge1xyXG4gICAgICAgIHJldHVybiBMYWJlbEZpZWxkLndpZHRoVmFsdWUoKTtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwiTnVtYmVyRmllbGRcIjoge1xyXG4gICAgICAgIHJldHVybiBOdW1iZXJGaWVsZC53aWR0aFZhbHVlKCk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIkRhdGVGaWVsZFwiOiB7XHJcbiAgICAgICAgcmV0dXJuIERhdGVGaWVsZC53aWR0aFZhbHVlKCk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIlNpZ25GaWVsZFwiOiB7XHJcbiAgICAgICAgcmV0dXJuIFNpZ25GaWVsZC53aWR0aFZhbHVlKCk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIkltYWdlRmllbGRcIjoge1xyXG4gICAgICAgIHJldHVybiBJbWFnZUZpZWxkLndpZHRoVmFsdWUoKTtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwiTXVsdGlMaW5lVGV4dEZpZWxkXCI6IHtcclxuICAgICAgICByZXR1cm4gTXVsdGlMaW5lVGV4dEZpZWxkLndpZHRoVmFsdWUoKTtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwiQ2hlY2tib3hGaWVsZFwiOiB7XHJcbiAgICAgICAgcmV0dXJuIENoZWNrYm94RmllbGQud2lkdGhWYWx1ZSgpO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgXCJSYWRpb0ZpZWxkXCI6IHtcclxuICAgICAgICByZXR1cm4gUmFkaW9GaWVsZC53aWR0aFZhbHVlKCk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIkNvbWJvYm94RmllbGRcIjoge1xyXG4gICAgICAgIHJldHVybiBDb21ib2JveEZpZWxkLndpZHRoVmFsdWUoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGdldER2VGV4dFZhbHVlXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2dldER2VGV4dFZhbHVlXHJcbiAgICogQGRlc2NyaXB0aW9uIERlZmF1bHQgVmFsdWUg7J2YIOydveydhCDsiJgg7J6I64qUIFRleHTqsJLsnYQg67CY7ZmY7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtICB7U3RyaW5nfSB2YWx1ZSDquLDrs7jqsJLsnZggdmFyaWFibGVcclxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IOq4sOuzuOqwkuydmCBUZXh0IOqwklxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBnZXREdlRleHRWYWx1ZSh2YWx1ZSkge1xyXG4gICAgY29uc3QgZHZPcHRzID0gVXRpbHMuZ2V0RFZGaWVsZE9wdHNMaXN0KCk7XHJcbiAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBkdk9wdHMubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICBpZiAoZHZPcHRzW2lkeF0udmFsdWUgPT09IHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIGR2T3B0c1tpZHhdLnRleHQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBcIlwiO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGdldEZpZWxkRnJvbUpzb25cclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZ2V0RmllbGRGcm9tSnNvblxyXG4gICAqIEBkZXNjcmlwdGlvbiBKU09OIO2FjeyKpO2KuOulvCDsnbTsmqntlZjsl6wg7ZWE65Oc7J2YIOyduOyKpO2EtOyKpOulvCDsg53shLHtlZjsl6wg67CY7ZmY7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtICB7U3RyaW5nfSB0eXBlIO2VhOuTnOydmCDsooXrpZhcclxuICAgKiBAcGFyYW0gIHtTdHJpbmd9IGpzb25EYXRhICDtlYTrk5wg642w7J207YSw7J2YIEpTT04g7YWN7Iqk7Yq4XHJcbiAgICogQHJldHVybiBGaWVsZCBPYmplY3Qg7ZWE65Oc7J2YIOyduOyKpO2EtOyKpFxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBnZXRGaWVsZEZyb21Kc29uKHR5cGUsIGpzb25EYXRhKSB7XHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgY2FzZSBcIlNpZ25GaWVsZFwiOiB7XHJcbiAgICAgICAgcmV0dXJuIEJhc2VGaWVsZC5mcm9tSnNvbihuZXcgU2lnbkZpZWxkKCksIGpzb25EYXRhKTtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwiVGV4dEZpZWxkXCI6IHtcclxuICAgICAgICByZXR1cm4gQmFzZUZpZWxkLmZyb21Kc29uKG5ldyBUZXh0RmllbGQoKSwganNvbkRhdGEpO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgXCJMYWJlbEZpZWxkXCI6IHtcclxuICAgICAgICByZXR1cm4gQmFzZUZpZWxkLmZyb21Kc29uKG5ldyBMYWJlbEZpZWxkKCksIGpzb25EYXRhKTtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwiTnVtYmVyRmllbGRcIjoge1xyXG4gICAgICAgIHJldHVybiBCYXNlRmllbGQuZnJvbUpzb24obmV3IE51bWJlckZpZWxkKCksIGpzb25EYXRhKTtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwiRGF0ZUZpZWxkXCI6IHtcclxuICAgICAgICByZXR1cm4gQmFzZUZpZWxkLmZyb21Kc29uKG5ldyBEYXRlRmllbGQoKSwganNvbkRhdGEpO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgXCJJbWFnZUZpZWxkXCI6IHtcclxuICAgICAgICByZXR1cm4gQmFzZUZpZWxkLmZyb21Kc29uKG5ldyBJbWFnZUZpZWxkKCksIGpzb25EYXRhKTtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwiTXVsdGlMaW5lVGV4dEZpZWxkXCI6IHtcclxuICAgICAgICByZXR1cm4gQmFzZUZpZWxkLmZyb21Kc29uKG5ldyBNdWx0aUxpbmVUZXh0RmllbGQoKSwganNvbkRhdGEpO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgXCJDaGVja2JveEZpZWxkXCI6IHtcclxuICAgICAgICByZXR1cm4gQmFzZUZpZWxkLmZyb21Kc29uKG5ldyBDaGVja2JveEZpZWxkKCksIGpzb25EYXRhKTtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwiUmFkaW9GaWVsZFwiOiB7XHJcbiAgICAgICAgcmV0dXJuIEJhc2VGaWVsZC5mcm9tSnNvbihuZXcgUmFkaW9GaWVsZCgpLCBqc29uRGF0YSk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIkNvbWJvYm94RmllbGRcIjoge1xyXG4gICAgICAgIHJldHVybiBCYXNlRmllbGQuZnJvbUpzb24obmV3IENvbWJvYm94RmllbGQoKSwganNvbkRhdGEpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gZ2V0RmllbGRJZEZyb21Hcm91cE5vZGVcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZ2V0RmllbGRJZEZyb21Hcm91cE5vZGVcclxuICAgKiBAZGVzY3JpcHRpb24gU1ZH7J2YIEdyb3Vw7Jik67iM7KCd7Yq466Gc67aA7YSwIO2VhOuTnOydmCBJROulvCDssL7slYTshJwg67CY7ZmY7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtICB7T2JqZWN0fSBmaWVsZEdvcnVwICBTVkfsnZggZ3JvdXAg7Jik67iM7KCd7Yq4XHJcbiAgICogQHJldHVybiB7U3RyaW5nfSDtlYTrk5zsnZggSURcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgZ2V0RmllbGRJZEZyb21Hcm91cE5vZGUoZmllbGRHb3J1cCkge1xyXG4gICAgbGV0IGNoaWxkUmVjdCA9IGZpZWxkR29ydXAuc2VsZWN0KFwicmVjdFwiKTtcclxuICAgIHJldHVybiBjaGlsZFJlY3QuYXR0cihcImlkXCIpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGdldEZpZWxkSnNvbkRhdGFcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjZ2V0RmllbGRKc29uRGF0YVxyXG4gICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zsnZgg642w7J207YSw66W8IEpTT04gVGV4dOuhnCDrsJjtmZjtlZzri6QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gIHtTdHJpbmd9IGZpZWxkSWQgRmllbGTsnZggSURcclxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IEpTT04g7YWN7Iqk7Yq4XHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIGdldEZpZWxkSnNvbkRhdGEoZmllbGRJZCkge1xyXG4gICAgdmFyIGZpZWxkID0gX3RlbXBsYXRlTW9kLmZpZWxkRGljdGlvbmFyeVtmaWVsZElkXTtcclxuICAgIHZhciBkYXRhID0gSlNPTi5zdHJpbmdpZnkoZmllbGQpO1xyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gZ2V0RmllbGRTaXplXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2dldEZpZWxkU2l6ZVxyXG4gICAqIEBkZXNjcmlwdGlvbiDtlYTrk5zsnZgg6rCA66GcIOyEuOuhnCDsgqzsnbTspojrpbwg66as7YS0LlxyXG4gICAqXHJcbiAgICogQHBhcmFtICB7U3RyaW5nfSB0eXBlIO2VhOuTnOydmCDsooXrpZhcclxuICAgKiBAcmV0dXJuICB7T2JqZWN0fSB7IHc6ICwgaDogIH0gIGRlZmF1bHQgLSB7IHc6IDE1MCwgaDogNDAgfTtcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgZ2V0RmllbGRTaXplKHR5cGUpIHtcclxuICAgIHZhciBzaXplID0geyB3OiAxNTAsIGg6IDQwIH07XHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgY2FzZSBcIlRleHRGaWVsZFwiOlxyXG4gICAgICBjYXNlIFwiTnVtYmVyRmllbGRcIjpcclxuICAgICAgY2FzZSBcIkRhdGVGaWVsZFwiOlxyXG4gICAgICBjYXNlIFwiTGFiZWxGaWVsZFwiOlxyXG4gICAgICBjYXNlIFwiQ29tYm9ib3hGaWVsZFwiOlxyXG4gICAgICAgIHNpemUgPSB7IHc6IFRleHRGaWVsZC53aWR0aFZhbHVlKCksIGg6IFRleHRGaWVsZC5oZWlnaHRWYWx1ZSgpIH07XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJTaWduRmllbGRcIjpcclxuICAgICAgY2FzZSBcIkltYWdlRmllbGRcIjpcclxuICAgICAgICBzaXplID0geyB3OiBTaWduRmllbGQud2lkdGhWYWx1ZSgpLCBoOiBTaWduRmllbGQuaGVpZ2h0VmFsdWUoKSB9O1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiTXVsdGlMaW5lVGV4dEZpZWxkXCI6XHJcbiAgICAgICAgc2l6ZSA9IHtcclxuICAgICAgICAgIHc6IE11bHRpTGluZVRleHRGaWVsZC53aWR0aFZhbHVlKCksXHJcbiAgICAgICAgICBoOiBNdWx0aUxpbmVUZXh0RmllbGQuaGVpZ2h0VmFsdWUoKSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiQ2hlY2tib3hGaWVsZFwiOlxyXG4gICAgICAgIHNpemUgPSB7XHJcbiAgICAgICAgICB3OiBDaGVja2JveEZpZWxkLndpZHRoVmFsdWUoKSxcclxuICAgICAgICAgIGg6IENoZWNrYm94RmllbGQuaGVpZ2h0VmFsdWUoKSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiUmFkaW9GaWVsZFwiOlxyXG4gICAgICAgIHNpemUgPSB7IHc6IFJhZGlvRmllbGQud2lkdGhWYWx1ZSgpLCBoOiBSYWRpb0ZpZWxkLmhlaWdodFZhbHVlKCkgfTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgIHJldHVybiBzaXplO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGdldFBhZ2VFbGVtZW50XHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2dldFBhZ2VFbGVtZW50XHJcbiAgICogQGRlc2NyaXB0aW9uIFBERiDtjpjsnbTsp4AgRWxlbWVudFxyXG4gICAqXHJcbiAgICogQHBhcmFtICB7TnVtYmVyfSBwYWdlTm8gIFBERiDtjpjsnbTsp4Ag67KI7Zi4XHJcbiAgICogQHJldHVybiB7RWxlbWVudH1cclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgZ2V0UGFnZUVsZW1lbnQocGFnZU5vKSB7XHJcbiAgICBsZXQgcGFnZU51bWJlciA9IHBhZ2VObztcclxuICAgIGlmIChwYWdlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgcGFnZU51bWJlciA9IF90ZW1wbGF0ZU1vZC5wZGZWaWV3ZXIuY3VycmVudFBhZ2VOdW1iZXI7XHJcbiAgICB9XHJcbiAgICBsZXQgcGcgPSBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiICNUZW1wbGF0ZVBERlZpZXdlciBbYXJpYS1sYWJlbD0nUGFnZSBcIiArIHBhZ2VOdW1iZXIgKyBcIiddXCJcclxuICAgICk7XHJcbiAgICByZXR1cm4gcGc7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gZ2V0UGFnZUJvcmRlcldpZHRoXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2dldFBhZ2VCb3JkZXJXaWR0aFxyXG4gICAqIEBkZXNjcmlwdGlvbiBQREYg7Y6Y7J207KeA7J2YIGJvcmRlciBXaWR0aOulvCDrsJjtlZztlZzri6QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0geyBOdW1iZXJ9IHBhZ2VObyAgUERGIO2OmOydtOyngCDrsojtmLhcclxuICAgKiBAcmV0dXJuIHtSZWN0fSBPYmplY3QgeyBsZWZ0OiAsIHRvcDogLCByaWdodDogLCBib3R0b206ICB9XHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIGdldFBhZ2VCb3JkZXJXaWR0aChwYWdlTm8pIHtcclxuICAgIGxldCBwYWdlTnVtYmVyID0gcGFnZU5vO1xyXG4gICAgaWYgKHBhZ2VOdW1iZXIgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBwYWdlTnVtYmVyID0gX3RlbXBsYXRlTW9kLnBkZlZpZXdlci5jdXJyZW50UGFnZU51bWJlcjtcclxuICAgIH1cclxuICAgIGxldCBwZ05vZGUgPSBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiICNUZW1wbGF0ZVBERlZpZXdlciBbYXJpYS1sYWJlbD0nUGFnZSBcIiArIHBhZ2VOdW1iZXIgKyBcIiddXCJcclxuICAgICk7XHJcblxyXG4gICAgbGV0IHBhZ2VDb21wdXRlZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUocGdOb2RlKTtcclxuICAgIGxldCBib3JkZXJUb3BTdHIgPSBwYWdlQ29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKFwiYm9yZGVyLXRvcC13aWR0aFwiKTtcclxuICAgIGxldCBib3JkZXJMZWZ0U3RyID0gcGFnZUNvbXB1dGVkU3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShcImJvcmRlci1sZWZ0LXdpZHRoXCIpO1xyXG4gICAgbGV0IGJvcmRlckJvdHRvbVN0ciA9IHBhZ2VDb21wdXRlZFN0eWxlLmdldFByb3BlcnR5VmFsdWUoXHJcbiAgICAgIFwiYm9yZGVyLWJvdHRvbS13aWR0aFwiXHJcbiAgICApO1xyXG4gICAgbGV0IGJvcmRlclJpZ2h0U3RyID1cclxuICAgICAgcGFnZUNvbXB1dGVkU3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShcImJvcmRlci1yaWdodC13aWR0aFwiKTtcclxuICAgIGxldCBib3JkZXJUb3BXaWR0aCA9IDA7XHJcbiAgICBsZXQgYm9yZGVyTGVmdFdpZHRoID0gMDtcclxuICAgIGxldCBib3JkZXJCb3R0b21XaWR0aCA9IDA7XHJcbiAgICBsZXQgYm9yZGVyUmlnaHRXaWR0aCA9IDA7XHJcbiAgICBpZiAoIVV0aWxzLmlzU3RyaW5nRW1wdHkoYm9yZGVyVG9wU3RyKSkge1xyXG4gICAgICBib3JkZXJUb3BXaWR0aCA9IHBhcnNlSW50KGJvcmRlclRvcFN0ci5yZXBsYWNlKFwicHhcIiwgXCJcIikpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFVdGlscy5pc1N0cmluZ0VtcHR5KGJvcmRlckxlZnRTdHIpKSB7XHJcbiAgICAgIGJvcmRlckxlZnRXaWR0aCA9IHBhcnNlSW50KGJvcmRlckxlZnRTdHIucmVwbGFjZShcInB4XCIsIFwiXCIpKTtcclxuICAgIH1cclxuICAgIGlmICghVXRpbHMuaXNTdHJpbmdFbXB0eShib3JkZXJCb3R0b21TdHIpKSB7XHJcbiAgICAgIGJvcmRlckJvdHRvbVdpZHRoID0gcGFyc2VJbnQoYm9yZGVyQm90dG9tU3RyLnJlcGxhY2UoXCJweFwiLCBcIlwiKSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIVV0aWxzLmlzU3RyaW5nRW1wdHkoYm9yZGVyUmlnaHRTdHIpKSB7XHJcbiAgICAgIGJvcmRlclJpZ2h0V2lkdGggPSBwYXJzZUludChib3JkZXJSaWdodFN0ci5yZXBsYWNlKFwicHhcIiwgXCJcIikpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdG9wOiBib3JkZXJUb3BXaWR0aCxcclxuICAgICAgbGVmdDogYm9yZGVyTGVmdFdpZHRoLFxyXG4gICAgICBib3R0b206IGJvcmRlckJvdHRvbVdpZHRoLFxyXG4gICAgICByaWdodDogYm9yZGVyUmlnaHRXaWR0aCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gZ2V0UGFnZUJvdW5kaW5nQ2xpZW50UmVjdFxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNnZXRQYWdlQm91bmRpbmdDbGllbnRSZWN0XHJcbiAgICogQGRlc2NyaXB0aW9uIFBERiDtjpjsnbTsp4DsnZggQm91bmRpbmcgUmVjdFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHsgTnVtYmVyfSBwYWdlTm8gIFBERiDtjpjsnbTsp4Ag67KI7Zi4XHJcbiAgICogQHJldHVybiB7UmVjdH0gT2JqZWN0IHsgeDogLCB5OiAsIHdpZHRoOiAsIGhlaWdodDogIH1cclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgZ2V0UGFnZUJvdW5kaW5nQ2xpZW50UmVjdChwYWdlTm8pIHtcclxuICAgIGxldCBwYWdlTnVtYmVyID0gcGFnZU5vO1xyXG4gICAgaWYgKHBhZ2VOdW1iZXIgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBwYWdlTnVtYmVyID0gX3RlbXBsYXRlTW9kLnBkZlZpZXdlci5jdXJyZW50UGFnZU51bWJlcjtcclxuICAgIH1cclxuICAgIGxldCBwZyA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIgI1RlbXBsYXRlUERGVmlld2VyIFthcmlhLWxhYmVsPSdQYWdlIFwiICsgcGFnZU51bWJlciArIFwiJ11cIlxyXG4gICAgKTtcclxuICAgIHJldHVybiBwZy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBnZXRQZGZQYWdlRnJvbVN2Z1Bvc1xyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNnZXRQZGZQYWdlRnJvbVN2Z1Bvc1xyXG4gICAqIEBkZXNjcmlwdGlvbiBTVkcg66CI7J207Ja07JeQ7IScIFBERuydmCDtjpjsnbTsp4Ag7JyE7LmY66W8IOqzhOyCsO2VmOyXrCDrpqzthLTtlZzri6QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge051bWJlcn0geCBTVkfsnZggWOyijO2RnFxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB5IFNWR+ydmCBZ7KKM7ZGcXHJcbiAgICogQHJldHVybiB7TnVtYmVyfSBQZGYgUGFnZSBOdW1iZXJcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgZ2V0UGRmUGFnZUZyb21TdmdQb3MoeCwgeSkge1xyXG4gICAgbGV0IGN1cnJlbnRIZWlnaHRTdW0gPSAwO1xyXG4gICAgZm9yIChsZXQgaWR4ID0gMTsgaWR4IDw9IF90ZW1wbGF0ZU1vZC5wZGZWaWV3ZXIucGFnZXNDb3VudDsgKytpZHgpIHtcclxuICAgICAgbGV0IHBhZ2VSZWN0ID0gX3RlbXBsYXRlTW9kLmdldFBhZ2VCb3VuZGluZ0NsaWVudFJlY3QoaWR4KTtcclxuICAgICAgbGV0IHBhZ2VIZWlnaHQgPSBwYWdlUmVjdC5oZWlnaHQ7XHJcbiAgICAgIGN1cnJlbnRIZWlnaHRTdW0gKz0gcGFnZUhlaWdodDtcclxuICAgICAgaWYgKGN1cnJlbnRIZWlnaHRTdW0gPiB5KSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYCR7aWR4fSwgJHtwYWdlSGVpZ2h0fSwgJHtjdXJyZW50SGVpZ2h0U3VtfSwgJHt5fWApO1xyXG4gICAgICAgIHJldHVybiBpZHg7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiAxO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGhpZGVBbGxSZXNpemVIYW5kbGVzXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2hpZGVBbGxSZXNpemVIYW5kbGVzXHJcbiAgICogQGRlc2NyaXB0aW9uIO2VhOuTnOuTpOydmCDrpqzsgqzsnbTspogg7ZW465Ok65+s65Ok7J2EIOyIqOq4tOuLpC5cclxuICAgKlxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBoaWRlQWxsUmVzaXplSGFuZGxlcygpIHtcclxuICAgIGxldCBpdGVtcyA9IF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzLnNlbGVjdEFsbChcclxuICAgICAgXCIjXCIgKyBDT05TVEFOVFMuTUFJTl9HUk9VUF9OQU1FICsgXCIgPiBnXCJcclxuICAgICk7XHJcbiAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgIGlmICghVXRpbHMuaXNFbXB0eU9iamVjdChlbGVtZW50LmZyZWVUcmFuc2Zvcm0pKSB7XHJcbiAgICAgICAgZWxlbWVudC5mcmVlVHJhbnNmb3JtLmhpZGVSZXNpemVIYW5kbGVyKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIGhpZGVGaWVsZEF0dHJpYnV0ZVxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNoaWRlRmllbGRBdHRyaWJ1dGVcclxuICAgKiBAZGVzY3JpcHRpb24g7ZWE65Oc7J2YIOyGjeyEsSDtjJ3sl4XsnYQg7Iio6ri064ukLlxyXG4gICAqXHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIGhpZGVGaWVsZEF0dHJpYnV0ZSgpIHtcclxuICAgIGNvbnN0IHNlbGVjdGVkTm9kZSA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIgLlwiICsgQ09OU1RBTlRTLkVESVRPUl9BVFRSX0NMQVNTXHJcbiAgICApO1xyXG4gICAgVXRpbHMucmVtb3ZlQWxsQ2hpbGROb2RlKHNlbGVjdGVkTm9kZSk7XHJcbiAgICBpZiAoc2VsZWN0ZWROb2RlICE9PSBudWxsKSB7XHJcbiAgICAgIHNlbGVjdGVkTm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGVsZXRlQnRuTm9kZSA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIgLlwiICsgQ09OU1RBTlRTLkZJRUxEX0RFTEVURV9CVVRUT05fQ0xBU1NcclxuICAgICk7XHJcblxyXG4gICAgaWYgKFxyXG4gICAgICBkZWxldGVCdG5Ob2RlICE9PSBudWxsICYmXHJcbiAgICAgIGRlbGV0ZUJ0bk5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKENPTlNUQU5UUy5TSE9XX0NMQVNTKVxyXG4gICAgKSB7XHJcbiAgICAgIGRlbGV0ZUJ0bk5vZGUuY2xhc3NMaXN0LnRvZ2dsZShDT05TVEFOVFMuU0hPV19DTEFTUyk7XHJcbiAgICB9XHJcbiAgICBpZiAoXHJcbiAgICAgIGRlbGV0ZUJ0bk5vZGUgIT09IG51bGwgJiZcclxuICAgICAgIWRlbGV0ZUJ0bk5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKENPTlNUQU5UUy5ISURFX0NMQVNTKVxyXG4gICAgKSB7XHJcbiAgICAgIGRlbGV0ZUJ0bk5vZGUuY2xhc3NMaXN0LnRvZ2dsZShDT05TVEFOVFMuSElERV9DTEFTUyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gaGlkZVRlbXBsYXRlTGF5ZXJcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjaGlkZVRlbXBsYXRlTGF5ZXJcclxuICAgKiBAZGVzY3JpcHRpb24gVGVtcGxhdGVMYXllcuulvCDsiKjquLTri6QuXHJcbiAgICpcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgaGlkZVRlbXBsYXRlTGF5ZXIoKSB7XHJcbiAgICBsZXQgdGVtcGxhdGVMYXllciA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIgI1wiICsgQ09OU1RBTlRTLlRFTVBMQVRFX0xBWUVSX05BTUVcclxuICAgICk7XHJcbiAgICB0ZW1wbGF0ZUxheWVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXHJcbiAgICAgIFwibW91c2Vtb3ZlXCIsXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC50ZW1wbGF0ZU1vdXNlTW92ZUV2ZW50LFxyXG4gICAgICB0cnVlXHJcbiAgICApO1xyXG4gICAgdGVtcGxhdGVMYXllci5yZW1vdmVFdmVudExpc3RlbmVyKFxyXG4gICAgICBcIm1vdXNldXBcIixcclxuICAgICAgX3RlbXBsYXRlTW9kLnRlbXBsYXRlTW91c2VVcEV2ZW50LFxyXG4gICAgICB0cnVlXHJcbiAgICApO1xyXG4gICAgdGVtcGxhdGVMYXllci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gaW1wb3J0RmllbGREYXRhXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI2ltcG9ydEZpZWxkRGF0YVxyXG4gICAqIEBkZXNjcmlwdGlvbiAgZmllbGTrpbwgaW1wb3J07ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgIGltcG9ydO2VoCBqc29uIGRhdGFcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgaW1wb3J0RmllbGREYXRhKGRhdGEpIHtcclxuICAgIGRhdGEuZm9ybWVyTGlzdC5mb3JFYWNoKChvd25lcikgPT4ge1xyXG4gICAgICBvd25lci5wYWdlcy5mb3JFYWNoKChwYWdlKSA9PiB7XHJcbiAgICAgICAgaWYgKHBhZ2UucGFnZU5vID49IF90ZW1wbGF0ZU1vZC5wZGZWaWV3ZXIuX3BhZ2VzLmxlbmd0aCkge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwYWdlLmZpZWxkcy5mb3JFYWNoKChmaWVsZCkgPT4ge1xyXG4gICAgICAgICAgZmllbGQubV9vd25lcklkID0gb3duZXIudXNlclVVSUQ7XHJcbiAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIG93bmVyLmlzRm9ybWVyICE9PSBudWxsICYmXHJcbiAgICAgICAgICAgIG93bmVyLmlzRm9ybWVyICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgb3duZXIuaXNGb3JtZXIgPT09IFwiWVwiXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgZmllbGQubV9vd25lcklkID0gXCJcIjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIF90ZW1wbGF0ZU1vZC5yZXBsYWNlRmllbGREYXRhKGZpZWxkLCB0cnVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIC8vIF90ZW1wbGF0ZU1vZC5maWVsZFJlcG9zaXRpb25pbmcoKTtcclxuICAgIF90ZW1wbGF0ZU1vZC5oaWRlQWxsUmVzaXplSGFuZGxlcygpO1xyXG4gICAgX3RlbXBsYXRlTW9kLmhpZGVGaWVsZEF0dHJpYnV0ZSgpO1xyXG4gICAgX3RlbXBsYXRlTW9kLmhpZGVUZW1wbGF0ZUxheWVyKCk7XHJcbiAgICBfdGVtcGxhdGVNb2QuYnVpbGRGaWVsZGZvcm1lckxpc3QoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBrZXljaGVja1xyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNrZXljaGVja1xyXG4gICAqIEBkZXNjcmlwdGlvbiAga2V5Y2hlY2sgIOuLqOy2le2CpCDsnbTrsqTtirguXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdH0gZXZ0ICAgZXZ06rCd7LK0XHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIGtleWNoZWNrKGV2dCkge1xyXG4gICAgdmFyIGtleUNvZGUgPSBldnQud2hpY2ggPyBldnQud2hpY2ggOiBldnQua2V5Q29kZTtcclxuICAgIGlmIChldnQuY3RybEtleSkge1xyXG4gICAgICBzd2l0Y2ggKGtleUNvZGUpIHtcclxuICAgICAgICBjYXNlIDg5OlxyXG4gICAgICAgICAgX3RlbXBsYXRlTW9kLnJlZG9BY3Rpb24oKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBjYXNlIDkwOlxyXG4gICAgICAgICAgX3RlbXBsYXRlTW9kLnVuZG9BY3Rpb24oKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBjYXNlIDc3OlxyXG4gICAgICAgIC8vIGxldCBkYXQxID0gX3RlbXBsYXRlTW9kLmV4cG9ydEZpZWxkRGF0YSgpO1xyXG4gICAgICAgIC8vICBjb25zb2xlLmxvZygoZGF0MSkpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoZGF0MSkpO1xyXG5cclxuICAgICAgICAvLyBfdGVtcGxhdGVNb2QuaW1wb3J0RmllbGREYXRhKFwiL3Rlc3RGaWVsZHMuanNvblwiLCB0cnVlKTtcclxuICAgICAgICAvLyByZXR1cm47XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coX3RlbXBsYXRlTW9kLmlzQWxsRmllbGRIYXNPd25lcigpKTtcclxuXHJcbiAgICAgICAgLy8gbGV0IHJldDEgPSBfdGVtcGxhdGVNb2QuY2hlY2tUZW1wbGF0ZUZpZWxkRGF0YSgpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHJldDEpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGtleUNvZGUgPT09IDQ2KSB7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5yZW1vdmVTZWxlY3RlZEZpZWxkKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwYXN0ZU9iamVjdCgpIHtcclxuICAgIGNvbnNvbGUubG9nKF90ZW1wbGF0ZU1vZC50ZW1wbGF0ZUNsaXBCb2FyZCk7XHJcbiAgICBpZiAoVXRpbHMuaXNTdHJpbmdFbXB0eShfdGVtcGxhdGVNb2QudGVtcGxhdGVDbGlwQm9hcmQpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGZpZWxkSWRMaXN0ID0gX3RlbXBsYXRlTW9kLnRlbXBsYXRlQ2xpcEJvYXJkLnNwbGl0KFwiLFwiKTtcclxuICAgIGZvciAoY29uc3QgZmllbGRJZCBvZiBmaWVsZElkTGlzdCkge1xyXG4gICAgICBjb25zdCBmaWVsZCA9IF90ZW1wbGF0ZU1vZC5maWVsZERpY3Rpb25hcnlbZmllbGRJZF07XHJcbiAgICAgIGNvbnN0IGZpZWxkSnNvbkRhdGEgPSBKU09OLnN0cmluZ2lmeShmaWVsZCk7XHJcbiAgICAgIGNvbnN0IGNvcHlGaWVsZDEgPSBKU09OLnBhcnNlKGZpZWxkSnNvbkRhdGEpO1xyXG4gICAgICBsZXQgbmV3SWQgPSBfdGVtcGxhdGVNb2QuZ2VuZXJhdGVGaWVsZElkKGNvcHlGaWVsZDEubV90eXBlKTtcclxuICAgICAgY29weUZpZWxkMS5tX2lkID0gbmV3SWQ7XHJcbiAgICAgIGNvcHlGaWVsZDEubV9wZGZYID0gY29weUZpZWxkMS5tX3BkZlggKyAxMDtcclxuICAgICAgY29weUZpZWxkMS5tX3BkZlgyID0gY29weUZpZWxkMS5tX3BkZlgyICsgMTA7XHJcbiAgICAgIGNvcHlGaWVsZDEubV9wZGZZID0gY29weUZpZWxkMS5tX3BkZlkgLSAxMDtcclxuICAgICAgY29weUZpZWxkMS5tX3BkZlkyID0gY29weUZpZWxkMS5tX3BkZlkyIC0gMTA7XHJcbiAgICAgIGNvcHlGaWVsZDEubV9maWVsZElkID0gbmV3SWQucmVwbGFjZShcclxuICAgICAgICBjb3B5RmllbGQxLm1fdHlwZSxcclxuICAgICAgICBjb3B5RmllbGQxLm1fa2luZCArIFwiLVwiXHJcbiAgICAgICk7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5yZXBsYWNlRmllbGRTdHJpbmdEYXRhKEpTT04uc3RyaW5naWZ5KGNvcHlGaWVsZDEpKTtcclxuICAgIH1cclxuICAgIGlmIChmaWVsZElkTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5oaWRlQWxsUmVzaXplSGFuZGxlcygpO1xyXG4gICAgICBfdGVtcGxhdGVNb2QuaGlkZUZpZWxkQXR0cmlidXRlKCk7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5oaWRlVGVtcGxhdGVMYXllcigpO1xyXG4gICAgICBfdGVtcGxhdGVNb2QuYnVpbGRGaWVsZGZvcm1lckxpc3QoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiByZWRvQWN0aW9uXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3JlZG9BY3Rpb25cclxuICAgKiBAZGVzY3JpcHRpb24gICDsnbTsoITsl5Ag7Iuk7ZaJ7Leo7IaMIO2WiOuNmCDqsoPsnYQg64uk7IucIOyLpO2Wie2VnOuLpC5cclxuICAgKlxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICByZWRvQWN0aW9uKCkge1xyXG4gICAgdmFyIGlkeCA9ICsrX3RlbXBsYXRlTW9kLnVucmVkb0FjdGlvbklkeDtcclxuICAgIHZhciBkYXRhID0gX3RlbXBsYXRlTW9kLnVucmVkb0FjdGlvbkRpY3RbaWR4XTtcclxuICAgIGlmIChkYXRhID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgX3RlbXBsYXRlTW9kLnVucmVkb0FjdGlvbklkeC0tO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBfdGVtcGxhdGVNb2QucmVtb3ZlRHJhZ092ZXJHcm91cCgpO1xyXG4gICAgc3dpdGNoIChkYXRhLmFjdGlvbikge1xyXG4gICAgICBjYXNlIENPTlNUQU5UUy5DUkVBVEVfRklFTERfQUNUSU9OOlxyXG4gICAgICBjYXNlIENPTlNUQU5UUy5GSUVMRF9BVFRSX0NIQU5HRV9BQ1RJT046IHtcclxuICAgICAgICBfdGVtcGxhdGVNb2QucmVwbGFjZUZpZWxkU3RyaW5nRGF0YShkYXRhLm5ldyk7XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLmJ1aWxkRmllbGRmb3JtZXJMaXN0KCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgQ09OU1RBTlRTLlJFTU9WRV9GSUVMRF9BQ1RJT046IHtcclxuICAgICAgICBfdGVtcGxhdGVNb2QucmVtb3ZlRmllbGQoZGF0YS5uZXcpO1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5oaWRlRmllbGRBdHRyaWJ1dGUoKTtcclxuICAgICAgICBfdGVtcGxhdGVNb2QuYnVpbGRGaWVsZGZvcm1lckxpc3QoKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBDT05TVEFOVFMuR1JPVVBfUkVNT1ZFX0FDVElPTjoge1xyXG4gICAgICAgIGRhdGEubmV3LmZvckVhY2goKG5ld0RhdGEpID0+IHtcclxuICAgICAgICAgIF90ZW1wbGF0ZU1vZC5yZW1vdmVGaWVsZChuZXdEYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBfdGVtcGxhdGVNb2QuaGlkZUZpZWxkQXR0cmlidXRlKCk7XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLmJ1aWxkRmllbGRmb3JtZXJMaXN0KCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgQ09OU1RBTlRTLkdST1VQX0FUVFJfQ0hBTkdFX0FDVElPTjoge1xyXG4gICAgICAgIGRhdGEubmV3LmZvckVhY2goKG5ld0RhdGEpID0+IHtcclxuICAgICAgICAgIF90ZW1wbGF0ZU1vZC5yZXBsYWNlRmllbGRTdHJpbmdEYXRhKG5ld0RhdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5idWlsZEZpZWxkZm9ybWVyTGlzdCgpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIENPTlNUQU5UUy5HUk9VUF9BVFRSX09XTkVSX0NIQU5HRV9BQ1RJT046IHtcclxuICAgICAgICBkYXRhLm5ldy5mb3JFYWNoKChuZXdEYXRhKSA9PiB7XHJcbiAgICAgICAgICBfdGVtcGxhdGVNb2QucmVwbGFjZUZpZWxkU3RyaW5nRGF0YShuZXdEYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBfdGVtcGxhdGVNb2QuYnVpbGRGaWVsZGZvcm1lckxpc3QoKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiByZWZyZXNoZm9ybWVyTGlzdFxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNyZWZyZXNoZm9ybWVyTGlzdFxyXG4gICAqIEBkZXNjcmlwdGlvbiAg7ZWE65Oc7J2YIOyEnOuqheyekCDsoJXrs7TqsIAg7IiY7KCV65CgIOuVjCDsgqzsnbTrk5zsnZgg7ISc66qF7J6QIOumrOyKpO2KuOulvCDqsLHsi6DtlZzri6QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gIHtPYmVqY3R9IGZpZWxkIOqwseyLoO2VoCDtlYTrk5wg7J247Iqk7YS07IqkXHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIHJlZnJlc2hmb3JtZXJMaXN0KGZpZWxkKSB7XHJcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoX3RlbXBsYXRlTW9kLnRlbXBsYXRlVXNlckZpZWxkSW5mbyk7XHJcbiAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICBsZXQgdXNlckluZm8gPSBfdGVtcGxhdGVNb2QudGVtcGxhdGVVc2VyRmllbGRJbmZvW2tleV07XHJcbiAgICAgIGlmICh1c2VySW5mby5jb250YWlucyhmaWVsZC5pZCkpIHtcclxuICAgICAgICBpZiAoZmllbGQub3duZXJJZCAhPT0ga2V5KSB7XHJcbiAgICAgICAgICB1c2VySW5mby5yZW1vdmVGaWVsZChmaWVsZC5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChmaWVsZC5vd25lcklkID09PSBrZXkpIHtcclxuICAgICAgICAgIHVzZXJJbmZvLnB1c2hGaWVsZChmaWVsZC5pZCwgZmllbGQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gcmVtb3ZlRHJhZ0dyb3VwRmllbGRcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjcmVtb3ZlRHJhZ0dyb3VwRmllbGRcclxuICAgKiBAZGVzY3JpcHRpb24gIERyYWftlbTshJwg7ISg7YOd7ZWcIO2VhOuTnOydmCDqt7jro7nsnYQg7KeA7Jq064ukLlxyXG4gICAqXHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIHJlbW92ZURyYWdHcm91cEZpZWxkKCkge1xyXG4gICAgdmFyIHRlbXBHT2xkID0gX3RlbXBsYXRlTW9kLm1haW5DYW52YXMuc2VsZWN0KFxyXG4gICAgICBcIiNcIiArIENPTlNUQU5UUy5EUkFHX0JPWF9OQU1FXHJcbiAgICApO1xyXG4gICAgdmFyIG1haW5Hcm91cCA9IF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzLnNlbGVjdChcclxuICAgICAgXCIjXCIgKyBDT05TVEFOVFMuTUFJTl9HUk9VUF9OQU1FXHJcbiAgICApO1xyXG4gICAgaWYgKHRlbXBHT2xkICE9PSBudWxsICYmIHRlbXBHT2xkLmNoaWxkcmVuKCkubGVuZ3RoID49IDEpIHtcclxuICAgICAgdGVtcEdPbGQuZnJlZVRyYW5zZm9ybS5oaWRlSGFuZGxlcygpO1xyXG4gICAgICB2YXIgY2hkcyA9IHRlbXBHT2xkLmNoaWxkcmVuKCk7XHJcbiAgICAgIGNvbnN0IHRlbXBHTWF0cml4ID0gdGVtcEdPbGQudHJhbnNmb3JtKCkuZ2xvYmFsTWF0cml4O1xyXG4gICAgICB2YXIgb2xkRGF0YUFyciA9IFtdO1xyXG4gICAgICB2YXIgbmV3RGF0YUFyciA9IFtdO1xyXG4gICAgICBjaGRzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCBjaGlsZFJlY3QgPSBlbGVtZW50LnNlbGVjdChcInJlY3RcIik7XHJcbiAgICAgICAgY29uc3QgZmllbGQgPSBfdGVtcGxhdGVNb2QuZmllbGREaWN0aW9uYXJ5W2NoaWxkUmVjdC5hdHRyKFwiaWRcIildO1xyXG4gICAgICAgIGZpZWxkLmlzUmVtb3ZlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIGxldCB1c3JGaWVsZERhdGEgPSBfdGVtcGxhdGVNb2QudGVtcGxhdGVVc2VyRmllbGRJbmZvW2ZpZWxkLm93bmVySWRdO1xyXG4gICAgICAgIGlmICh1c3JGaWVsZERhdGEgIT09IG51bGwgJiYgdXNyRmllbGREYXRhICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgIHVzckZpZWxkRGF0YS5yZW1vdmVGaWVsZChmaWVsZC5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBsYXllckRpdiA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgICAgIFwiICNcIiArIENPTlNUQU5UUy5URU1QTEFURV9MQVlFUl9BU1RFUklTS19OQU1FXHJcbiAgICAgICAgKTtcclxuICAgICAgICBsZXQgYXN0ZXJpc2tEaXYgPSBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgICBcIiAjXCIgKyBmaWVsZC5pZCArIFwiX2FzdGVyaXNrXCJcclxuICAgICAgICApO1xyXG4gICAgICAgIGxheWVyRGl2LnJlbW92ZUNoaWxkKGFzdGVyaXNrRGl2KTtcclxuXHJcbiAgICAgICAgY29uc3QgZmllbGRKc29uRGF0YSA9IEpTT04uc3RyaW5naWZ5KGZpZWxkKTtcclxuICAgICAgICBvbGREYXRhQXJyLnB1c2goZmllbGRKc29uRGF0YSk7XHJcbiAgICAgICAgbmV3RGF0YUFyci5wdXNoKGZpZWxkSnNvbkRhdGEpO1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5oaWRlRmllbGRBdHRyaWJ1dGUoKTtcclxuICAgICAgfSk7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5hZGRVbmRvUmVkb0FjdChcclxuICAgICAgICBDT05TVEFOVFMuR1JPVVBfUkVNT1ZFX0FDVElPTixcclxuICAgICAgICBvbGREYXRhQXJyLFxyXG4gICAgICAgIG5ld0RhdGFBcnJcclxuICAgICAgKTtcclxuICAgICAgdGVtcEdPbGQucmVtb3ZlKCk7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5idWlsZEZpZWxkZm9ybWVyTGlzdCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIHJlbW92ZURyYWdPdmVyR3JvdXBcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjcmVtb3ZlRHJhZ092ZXJHcm91cFxyXG4gICAqIEBkZXNjcmlwdGlvbiAgIOuTnOuemOq3uO2VtOyEnCDrp4zrk6Qg7ZWE65OcIOq3uOumveydhCDtlbTsoJztlZzri6QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gIHtCb29sZWFufSBkb25vdFVuZG9SZWRvICB1bmRvUmVkb+ulvCDsi6TtlontlZjsp4Ag7JWK64qU64ukLlxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICByZW1vdmVEcmFnT3Zlckdyb3VwKGRvbm90VW5kb1JlZG8gPSB0cnVlKSB7XHJcbiAgICB2YXIgdGVtcEdPbGQgPSBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy5zZWxlY3QoXHJcbiAgICAgIFwiI1wiICsgQ09OU1RBTlRTLkRSQUdfQk9YX05BTUVcclxuICAgICk7XHJcbiAgICB2YXIgbWFpbkdyb3VwID0gX3RlbXBsYXRlTW9kLm1haW5DYW52YXMuc2VsZWN0KFxyXG4gICAgICBcIiNcIiArIENPTlNUQU5UUy5NQUlOX0dST1VQX05BTUVcclxuICAgICk7XHJcbiAgICBpZiAodGVtcEdPbGQgIT09IG51bGwgJiYgdGVtcEdPbGQuY2hpbGRyZW4oKS5sZW5ndGggPj0gMSkge1xyXG4gICAgICB0ZW1wR09sZC5mcmVlVHJhbnNmb3JtLmhpZGVIYW5kbGVzKCk7XHJcbiAgICAgIHZhciBjaGRzID0gdGVtcEdPbGQuY2hpbGRyZW4oKTtcclxuICAgICAgY29uc3QgdGVtcEdNYXRyaXggPSB0ZW1wR09sZC50cmFuc2Zvcm0oKS5nbG9iYWxNYXRyaXg7XHJcbiAgICAgIGNoZHMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgIG1haW5Hcm91cC5hcHBlbmQoZWxlbWVudCk7XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLmNoYW5nZUZpZWxkUG9zaXRpb24oZWxlbWVudCwgdGVtcEdNYXRyaXgsIGRvbm90VW5kb1JlZG8pO1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5jaGFuZ2VGcmVlVHJhbnNmb3JtKFxyXG4gICAgICAgICAgZWxlbWVudCxcclxuICAgICAgICAgIGVsZW1lbnQud2lkdGgsXHJcbiAgICAgICAgICBlbGVtZW50LmhlaWdodFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0pO1xyXG4gICAgICB0ZW1wR09sZC5yZW1vdmUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiByZW1vdmVGaWVsZFxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNyZW1vdmVGaWVsZFxyXG4gICAqIEBkZXNjcmlwdGlvbiAgdW5kbywgcmVkb+yXkOyEnCDtlYTrk5zrpbwg7IKt7KCc7ZWgIOuVjCDsgqzsmqkuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gIHtTdHJpbmd9IGpzb25EYXRhIO2VhOuTnOydmCBKU09OIFN0cmluZyDrjbDsnbTthLBcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgcmVtb3ZlRmllbGQoanNvbkRhdGEpIHtcclxuICAgIGNvbnN0IHJlcGxhY2VEYXRhID0gSlNPTi5wYXJzZShqc29uRGF0YSk7XHJcbiAgICBjb25zdCBmaWVsZDEgPSBfdGVtcGxhdGVNb2QuZ2V0RmllbGRGcm9tSnNvbihcclxuICAgICAgcmVwbGFjZURhdGEubV90eXBlLFxyXG4gICAgICByZXBsYWNlRGF0YVxyXG4gICAgKTtcclxuICAgIGZpZWxkMS5pc1JlbW92ZWQgPSB0cnVlO1xyXG4gICAgaWYgKCFVdGlscy5pc1N0cmluZ0VtcHR5KGZpZWxkMS5vd25lcklkKSkge1xyXG4gICAgICBfdGVtcGxhdGVNb2QudGVtcGxhdGVVc2VyRmllbGRJbmZvW2ZpZWxkMS5vd25lcklkXS5yZW1vdmVGaWVsZChmaWVsZDEuaWQpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbWFpbkdyb3VwID0gX3RlbXBsYXRlTW9kLm1haW5DYW52YXMuc2VsZWN0KFxyXG4gICAgICBcIiNcIiArIENPTlNUQU5UUy5NQUlOX0dST1VQX05BTUVcclxuICAgICk7XHJcbiAgICB2YXIgc2VsZWN0ZWRGaWVsZEdyb3VwID0gbWFpbkdyb3VwLnNlbGVjdChcIiNcIiArIGZpZWxkMS5pZCArIFwiR3JvdXBcIik7XHJcbiAgICBpZiAoc2VsZWN0ZWRGaWVsZEdyb3VwKSB7XHJcbiAgICAgIHNlbGVjdGVkRmllbGRHcm91cC5mcmVlVHJhbnNmb3JtLnVucGx1ZygpO1xyXG4gICAgICBzZWxlY3RlZEZpZWxkR3JvdXAucmVtb3ZlKCk7XHJcblxyXG4gICAgICBsZXQgbGF5ZXJEaXYgPSBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgXCIgI1wiICsgQ09OU1RBTlRTLlRFTVBMQVRFX0xBWUVSX0FTVEVSSVNLX05BTUVcclxuICAgICAgKTtcclxuICAgICAgbGV0IGFzdGVyaXNrRGl2ID0gX3RlbXBsYXRlTW9kLm93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgIFwiICNcIiArIGZpZWxkMS5pZCArIFwiX2FzdGVyaXNrXCJcclxuICAgICAgKTtcclxuICAgICAgaWYgKGFzdGVyaXNrRGl2ICE9PSBudWxsICYmIGFzdGVyaXNrRGl2ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBsYXllckRpdi5yZW1vdmVDaGlsZChhc3Rlcmlza0Rpdik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiByZW1vdmVTZWxlY3RlZEZpZWxkXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3JlbW92ZVNlbGVjdGVkRmllbGRcclxuICAgKiBAZGVzY3JpcHRpb24gIOyEoO2DneuQnCDtlYTrk5zrpbwg7IKt7KCc7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIHJlbW92ZVNlbGVjdGVkRmllbGQoKSB7XHJcbiAgICBjb25zdCBzZWxlY3RlZE5vZGUgPSBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiIC5cIiArIENPTlNUQU5UUy5FRElUT1JfQVRUUl9DTEFTU1xyXG4gICAgKTtcclxuICAgIGNvbnN0IGF0dHJQYW5lbE5vZGUgPSBzZWxlY3RlZE5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuXCIgKyBDT05TVEFOVFMuRURJVE9SX0FUVFJfUEFORUxfQ0xBU1NcclxuICAgICk7XHJcbiAgICBpZiAoYXR0clBhbmVsTm9kZSA9PT0gbnVsbCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBpZExpc3RBdHRyID0gYXR0clBhbmVsTm9kZS5nZXRBdHRyaWJ1dGUoXCJGaWVsZC1pZC1saXN0XCIpO1xyXG4gICAgaWYgKFV0aWxzLmlzU3RyaW5nRW1wdHkoaWRMaXN0QXR0cikpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgaWRBcnJheSA9IGlkTGlzdEF0dHIuc3BsaXQoXCIsXCIpO1xyXG4gICAgaWYgKGlkQXJyYXkubGVuZ3RoID4gMSkge1xyXG4gICAgICBfdGVtcGxhdGVNb2QucmVtb3ZlRHJhZ0dyb3VwRmllbGQoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdmFyIHNlbGVjdGVkSXRlbSA9IF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzLnNlbGVjdChcclxuICAgICAgXCIjXCIgKyBpZEFycmF5WzBdICsgXCJHcm91cFwiXHJcbiAgICApO1xyXG4gICAgaWYgKHNlbGVjdGVkSXRlbSA9PT0gbnVsbCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBjaGlsZFJlY3QgPSBzZWxlY3RlZEl0ZW0uc2VsZWN0KFwicmVjdFwiKTtcclxuICAgIGNvbnN0IGZpZWxkID0gX3RlbXBsYXRlTW9kLmZpZWxkRGljdGlvbmFyeVtjaGlsZFJlY3QuYXR0cihcImlkXCIpXTtcclxuICAgIGZpZWxkLmlzUmVtb3ZlZCA9IHRydWU7XHJcbiAgICBsZXQgdXNyRmllbGREYXRhID0gX3RlbXBsYXRlTW9kLnRlbXBsYXRlVXNlckZpZWxkSW5mb1tmaWVsZC5vd25lcklkXTtcclxuICAgIGlmICh1c3JGaWVsZERhdGEgIT09IG51bGwgJiYgdXNyRmllbGREYXRhICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgdXNyRmllbGREYXRhLnJlbW92ZUZpZWxkKGZpZWxkLmlkKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBmaWVsZEpzb25EYXRhID0gSlNPTi5zdHJpbmdpZnkoZmllbGQpO1xyXG4gICAgX3RlbXBsYXRlTW9kLmFkZFVuZG9SZWRvQWN0KFxyXG4gICAgICBDT05TVEFOVFMuUkVNT1ZFX0ZJRUxEX0FDVElPTixcclxuICAgICAgZmllbGRKc29uRGF0YSxcclxuICAgICAgZmllbGRKc29uRGF0YVxyXG4gICAgKTtcclxuICAgIF90ZW1wbGF0ZU1vZC5oaWRlRmllbGRBdHRyaWJ1dGUoKTtcclxuICAgIHNlbGVjdGVkSXRlbS5mcmVlVHJhbnNmb3JtLnVucGx1ZygpO1xyXG4gICAgc2VsZWN0ZWRJdGVtLnJlbW92ZSgpO1xyXG5cclxuICAgIGxldCBsYXllckRpdiA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIgI1wiICsgQ09OU1RBTlRTLlRFTVBMQVRFX0xBWUVSX0FTVEVSSVNLX05BTUVcclxuICAgICk7XHJcbiAgICBsZXQgYXN0ZXJpc2tEaXYgPSBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiICNcIiArIGZpZWxkLmlkICsgXCJfYXN0ZXJpc2tcIlxyXG4gICAgKTtcclxuICAgIGlmIChhc3Rlcmlza0RpdiAhPT0gbnVsbCAmJiBhc3Rlcmlza0RpdiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGxheWVyRGl2LnJlbW92ZUNoaWxkKGFzdGVyaXNrRGl2KTtcclxuICAgIH1cclxuXHJcbiAgICBfdGVtcGxhdGVNb2QuYnVpbGRGaWVsZGZvcm1lckxpc3QoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiByZW1vdmVUZW1wbGF0ZVJlY3RcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjcmVtb3ZlVGVtcGxhdGVSZWN0XHJcbiAgICogQGRlc2NyaXB0aW9uICAgUERG7JyE7JeQIOyYrOudvOqwgOuKlCBUZW1wbGF0ZSDroIjsnbTslrTsl5Ag7ZWE65Oc66W8IOunjOuTpOq4sOychO2VtCDrp4zrk6Ag7J6E7IucIERpduulvCDsgq3soJztlZzri6QuXHJcbiAgICpcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgcmVtb3ZlVGVtcGxhdGVSZWN0KCkge1xyXG4gICAgbGV0IHRlbXBsYXRlTGF5ZXIgPSBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiICNcIiArIENPTlNUQU5UUy5URU1QTEFURV9MQVlFUl9OQU1FXHJcbiAgICApO1xyXG4gICAgbGV0IHRlbXBsYXRlUmVjdCA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIgI1wiICsgQ09OU1RBTlRTLlRFTVBMQVRFX0xBWUVSX1JFQ1RfTkFNRVxyXG4gICAgKTtcclxuICAgIGlmICh0ZW1wbGF0ZVJlY3QgPT09IG51bGwgfHwgdGVtcGxhdGVSZWN0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGVtcGxhdGVMYXllci5yZW1vdmVDaGlsZCh0ZW1wbGF0ZVJlY3QpO1xyXG4gICAgdGVtcGxhdGVMYXllci5yZW1vdmVFdmVudExpc3RlbmVyKFxyXG4gICAgICBcIm1vdXNlbW92ZVwiLFxyXG4gICAgICBfdGVtcGxhdGVNb2QudGVtcGxhdGVNb3VzZU1vdmVFdmVudCxcclxuICAgICAgdHJ1ZVxyXG4gICAgKTtcclxuICAgIHRlbXBsYXRlTGF5ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcclxuICAgICAgXCJtb3VzZXVwXCIsXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC50ZW1wbGF0ZU1vdXNlVXBFdmVudCxcclxuICAgICAgdHJ1ZVxyXG4gICAgKTtcclxuICAgIHRlbXBsYXRlTGF5ZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIHJlcGxhY2VGaWVsZERhdGFcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjcmVwbGFjZUZpZWxkRGF0YVxyXG4gICAqIEBkZXNjcmlwdGlvbiAg7ZW064u57ZWY64qUIEpTT04gU3RyaW5n7J2YIOuNsOydtO2EsOuhnCDtlYTrk5zrpbwg6rWQ7LK07ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGpzb25EYXRhIO2VhOuTnOydmCBKU09OIFN0cmluZyDrjbDsnbTthLBcclxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlzSW1wb3J0IGltcG9ydOydvCDrlYwg7Zi47Lac65CY64qU7KeAIOyXrOu2gFxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICByZXBsYWNlRmllbGREYXRhKGpzb25EYXRhLCBpc0ltcG9ydCA9IGZhbHNlKSB7XHJcbiAgICBfdGVtcGxhdGVNb2QuaGlkZUFsbFJlc2l6ZUhhbmRsZXMoKTtcclxuICAgIGNvbnN0IGZpZWxkMSA9IF90ZW1wbGF0ZU1vZC5nZXRGaWVsZEZyb21Kc29uKGpzb25EYXRhLm1fdHlwZSwganNvbkRhdGEpO1xyXG4gICAgZmllbGQxLmlzUmVtb3ZlZCA9IGZhbHNlO1xyXG4gICAgY29uc3QgbWFpbkdyb3VwID0gX3RlbXBsYXRlTW9kLm1haW5DYW52YXMuc2VsZWN0KFxyXG4gICAgICBcIiNcIiArIENPTlNUQU5UUy5NQUlOX0dST1VQX05BTUVcclxuICAgICk7XHJcbiAgICB2YXIgc2VsZWN0ZWRGaWVsZEdyb3VwID0gbWFpbkdyb3VwLnNlbGVjdChcIiNcIiArIGZpZWxkMS5pZCArIFwiR3JvdXBcIik7XHJcbiAgICBpZiAoc2VsZWN0ZWRGaWVsZEdyb3VwKSB7XHJcbiAgICAgIGlmICghVXRpbHMuaXNFbXB0eU9iamVjdChzZWxlY3RlZEZpZWxkR3JvdXAuZnJlZVRyYW5zZm9ybSkpIHtcclxuICAgICAgICBzZWxlY3RlZEZpZWxkR3JvdXAuZnJlZVRyYW5zZm9ybS51bnBsdWcoKTtcclxuICAgICAgfVxyXG4gICAgICBzZWxlY3RlZEZpZWxkR3JvdXAucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbmV3UmVjdCA9IF90ZW1wbGF0ZU1vZC5jYWxjRmllbGRQb3N0aW9uKGZpZWxkMSwgaXNJbXBvcnQpO1xyXG4gICAgbGV0IGZpZWxkR3JvdXAgPSBmaWVsZDEuZ2V0U1ZHRmllbGRPYmplY3QoXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzLFxyXG4gICAgICBtYWluR3JvdXAsXHJcbiAgICAgIDEuMCxcclxuICAgICAgX3RlbXBsYXRlTW9kLm93bmVyTm9kZSxcclxuICAgICAgX3RlbXBsYXRlTW9kLnJlbW92ZURyYWdPdmVyR3JvdXAsXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5jaGFuZ2VGaWVsZFZhbHVlRXZlbnQsXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5jaGFuZ2VGcmVlVHJhbnNmb3JtXHJcbiAgICApO1xyXG4gICAgbWFpbkdyb3VwLmFwcGVuZChmaWVsZEdyb3VwKTtcclxuICAgIF90ZW1wbGF0ZU1vZC5maWVsZERpY3Rpb25hcnlbZmllbGQxLmlkXSA9IGZpZWxkMTtcclxuXHJcbiAgICBfdGVtcGxhdGVNb2QuY2hhbmdlRnJlZVRyYW5zZm9ybShmaWVsZEdyb3VwLCBmaWVsZDEud2lkdGgsIGZpZWxkMS5oZWlnaHQpO1xyXG4gICAgX3RlbXBsYXRlTW9kLnJlZnJlc2hmb3JtZXJMaXN0KGZpZWxkMSk7XHJcblxyXG4gICAgX3RlbXBsYXRlTW9kLnNob3dBc3Rlcmlza0RpdihcclxuICAgICAgZmllbGQxLmlkLFxyXG4gICAgICBmaWVsZDEucmVxdWlyZWQgPT09IFwidHJ1ZVwiLFxyXG4gICAgICBmaWVsZDEueCxcclxuICAgICAgZmllbGQxLnksXHJcbiAgICAgIGZpZWxkMS5oZWlnaHRcclxuICAgICk7XHJcblxyXG4gICAgX3RlbXBsYXRlTW9kLnNob3dGaWVsZEF0dHJpYnV0ZShmaWVsZDEuaWQpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIHJlcGxhY2VGaWVsZFN0cmluZ0RhdGFcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2QjcmVwbGFjZUZpZWxkU3RyaW5nRGF0YVxyXG4gICAqIEBkZXNjcmlwdGlvbiAgIO2VtOuLue2VmOuKlCBKU09OIOuNsOydtO2EsOuhnCDtlYTrk5zrpbwg6rWQ7LK07ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGpzb25EYXRhIO2VhOuTnOydmCBKU09OIFN0cmluZyDrjbDsnbTthLBcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgcmVwbGFjZUZpZWxkU3RyaW5nRGF0YShqc29uRGF0YSkge1xyXG4gICAgX3RlbXBsYXRlTW9kLmhpZGVBbGxSZXNpemVIYW5kbGVzKCk7XHJcbiAgICBjb25zdCByZXBsYWNlRGF0YSA9IEpTT04ucGFyc2UoanNvbkRhdGEpO1xyXG4gICAgX3RlbXBsYXRlTW9kLnJlcGxhY2VGaWVsZERhdGEocmVwbGFjZURhdGEsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIHJlc2V0VG9vbFxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNyZXNldFRvb2xcclxuICAgKiBAZGVzY3JpcHRpb24gIOyEoO2DneuQnCDtiLTsnYQg66as7IWL7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIHJlc2V0VG9vbCgpIHtcclxuICAgIF90ZW1wbGF0ZU1vZC5zZWxlY3RBZGRGaWVsZFR5cGUgPSBcIlwiO1xyXG4gICAgX3RlbXBsYXRlTW9kLnJlbW92ZVRlbXBsYXRlUmVjdCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIHNlbGVjdFVzZXJMaXN0XHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3NlbGVjdFVzZXJMaXN0XHJcbiAgICogQGRlc2NyaXB0aW9uIFwiVXNlciBJRFwi7JeQIOunnuuKlCDshJzrqoXsnpDrpbwg7ISg7YOd65CcIOyDge2DnOuhnCDrp4zrk6Dri6QuIC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB1c2VyS2V5IFVzZXIgSWRcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgc2VsZWN0VXNlckxpc3QodXNlcktleSkge1xyXG4gICAgY29uc3Qgb3duZXJEb20gPSBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiICNFZGl0b3ItVXNlci1Db21wb25lbnRfQm94XCJcclxuICAgICk7XHJcbiAgICBvd25lckRvbS5jaGlsZE5vZGVzLmZvckVhY2goKGNoaWxkKSA9PiB7XHJcbiAgICAgIGlmIChjaGlsZC5jbGFzc0xpc3QuY29udGFpbnMoXCJDdXJyZW50XCIpKSB7XHJcbiAgICAgICAgY2hpbGQuY2xhc3NMaXN0LnRvZ2dsZShcIkN1cnJlbnRcIik7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgY2hpbGRVc2VyS2V5ID0gY2hpbGQuZ2V0QXR0cmlidXRlKFwiZGF0YS11c2VyLWtleVwiKTtcclxuICAgICAgaWYgKHVzZXJLZXkgPT09IGNoaWxkVXNlcktleSkge1xyXG4gICAgICAgIGNoaWxkLmNsYXNzTGlzdC50b2dnbGUoXCJDdXJyZW50XCIpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBzZWxlY3RUb29sXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3NlbGVjdFRvb2xcclxuICAgKiBAZGVzY3JpcHRpb24g7ZWE65Oc66W8IOunjOuTpOq4sCDsnITtlZwg7Yi07J2EIOyEpOygle2VnOuLpC4gLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRvb2wgdG9vbCDsnbTrpoRcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgc2VsZWN0VG9vbCh0b29sKSB7XHJcbiAgICBpZiAoXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5zZWxlY3RBZGRGaWVsZFR5cGUgIT09IFwiXCIgfHxcclxuICAgICAgX3RlbXBsYXRlTW9kLnNlbGVjdEFkZEZpZWxkVHlwZSAhPT0gdW5kZWZpbmVkXHJcbiAgICApIHtcclxuICAgICAgX3RlbXBsYXRlTW9kLnJlbW92ZVRlbXBsYXRlUmVjdCgpO1xyXG4gICAgfVxyXG4gICAgc3dpdGNoICh0b29sKSB7XHJcbiAgICAgIGNhc2UgMDoge1xyXG4gICAgICAgIGlmIChfdGVtcGxhdGVNb2Quc2VsZWN0QWRkRmllbGRUeXBlID09PSBcIlNpZ25GaWVsZFwiKSB7XHJcbiAgICAgICAgICBfdGVtcGxhdGVNb2QucmVzZXRUb29sKCk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5zZWxlY3RBZGRGaWVsZFR5cGUgPSBcIlNpZ25GaWVsZFwiO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgMToge1xyXG4gICAgICAgIGlmIChfdGVtcGxhdGVNb2Quc2VsZWN0QWRkRmllbGRUeXBlID09PSBcIlRleHRGaWVsZFwiKSB7XHJcbiAgICAgICAgICBfdGVtcGxhdGVNb2QucmVzZXRUb29sKCk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5zZWxlY3RBZGRGaWVsZFR5cGUgPSBcIlRleHRGaWVsZFwiO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgMjoge1xyXG4gICAgICAgIGlmIChfdGVtcGxhdGVNb2Quc2VsZWN0QWRkRmllbGRUeXBlID09PSBcIk11bHRpTGluZVRleHRGaWVsZFwiKSB7XHJcbiAgICAgICAgICBfdGVtcGxhdGVNb2QucmVzZXRUb29sKCk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5zZWxlY3RBZGRGaWVsZFR5cGUgPSBcIk11bHRpTGluZVRleHRGaWVsZFwiO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgMzoge1xyXG4gICAgICAgIGlmIChfdGVtcGxhdGVNb2Quc2VsZWN0QWRkRmllbGRUeXBlID09PSBcIkxhYmVsRmllbGRcIikge1xyXG4gICAgICAgICAgX3RlbXBsYXRlTW9kLnJlc2V0VG9vbCgpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfdGVtcGxhdGVNb2Quc2VsZWN0QWRkRmllbGRUeXBlID0gXCJMYWJlbEZpZWxkXCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSA0OiB7XHJcbiAgICAgICAgaWYgKF90ZW1wbGF0ZU1vZC5zZWxlY3RBZGRGaWVsZFR5cGUgPT09IFwiQ2hlY2tib3hGaWVsZFwiKSB7XHJcbiAgICAgICAgICBfdGVtcGxhdGVNb2QucmVzZXRUb29sKCk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5zZWxlY3RBZGRGaWVsZFR5cGUgPSBcIkNoZWNrYm94RmllbGRcIjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlIDU6IHtcclxuICAgICAgICBpZiAoX3RlbXBsYXRlTW9kLnNlbGVjdEFkZEZpZWxkVHlwZSA9PT0gXCJSYWRpb0ZpZWxkXCIpIHtcclxuICAgICAgICAgIF90ZW1wbGF0ZU1vZC5yZXNldFRvb2woKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLnNlbGVjdEFkZEZpZWxkVHlwZSA9IFwiUmFkaW9GaWVsZFwiO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgNjoge1xyXG4gICAgICAgIGlmIChfdGVtcGxhdGVNb2Quc2VsZWN0QWRkRmllbGRUeXBlID09PSBcIkNvbWJvYm94RmllbGRcIikge1xyXG4gICAgICAgICAgX3RlbXBsYXRlTW9kLnJlc2V0VG9vbCgpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfdGVtcGxhdGVNb2Quc2VsZWN0QWRkRmllbGRUeXBlID0gXCJDb21ib2JveEZpZWxkXCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSA3OiB7XHJcbiAgICAgICAgaWYgKF90ZW1wbGF0ZU1vZC5zZWxlY3RBZGRGaWVsZFR5cGUgPT09IFwiRGF0ZUZpZWxkXCIpIHtcclxuICAgICAgICAgIF90ZW1wbGF0ZU1vZC5yZXNldFRvb2woKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLnNlbGVjdEFkZEZpZWxkVHlwZSA9IFwiRGF0ZUZpZWxkXCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSA4OiB7XHJcbiAgICAgICAgaWYgKF90ZW1wbGF0ZU1vZC5zZWxlY3RBZGRGaWVsZFR5cGUgPT09IFwiTnVtYmVyRmllbGRcIikge1xyXG4gICAgICAgICAgX3RlbXBsYXRlTW9kLnJlc2V0VG9vbCgpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfdGVtcGxhdGVNb2Quc2VsZWN0QWRkRmllbGRUeXBlID0gXCJOdW1iZXJGaWVsZFwiO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgOToge1xyXG4gICAgICAgIGlmIChfdGVtcGxhdGVNb2Quc2VsZWN0QWRkRmllbGRUeXBlID09PSBcIkltYWdlRmllbGRcIikge1xyXG4gICAgICAgICAgX3RlbXBsYXRlTW9kLnJlc2V0VG9vbCgpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfdGVtcGxhdGVNb2Quc2VsZWN0QWRkRmllbGRUeXBlID0gXCJJbWFnZUZpZWxkXCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfdGVtcGxhdGVNb2QuY3JlYXRlVGVtcGxhdGVSZWN0KCk7XHJcbiAgICBfdGVtcGxhdGVNb2QuaGlkZUZpZWxkQXR0cmlidXRlKCk7XHJcbiAgICBfdGVtcGxhdGVNb2QuaGlkZUFsbFJlc2l6ZUhhbmRsZXMoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBzaG93QXN0ZXJpc2tEaXZcclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2Qjc2hvd0FzdGVyaXNrRGl2XHJcbiAgICogQGRlc2NyaXB0aW9uIO2VtOuLuSDtlYTrk5wgSUTsnZgg7ZWE7IiYIOyXrOu2gOulvCDrs7Tsl6zspITsp4Ag7Jes67aA66W8IOyEpOygle2VnOuLpC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZElkICBGaWVsZCBpZFxyXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNTaG93ICAgICDrs7Tsl6zspITsp4Ag7Jes67aAXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGZpZWxkWCAgICAg7ZWE65Oc7J2YIFjsooztkZxcclxuICAgKiBAcGFyYW0ge051bWJlcn0gZmllbGRZICAgICDtlYTrk5zsnZggWeyijO2RnFxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBmaWVsZEhlaWdodCAgIO2VhOuTnOydmCDrhpLsnbRcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgc2hvd0FzdGVyaXNrRGl2KGZpZWxkSWQsIGlzU2hvdywgZmllbGRYLCBmaWVsZFksIGZpZWxkSGVpZ2h0KSB7XHJcbiAgICBsZXQgYXN0ZXJpc2tEaXYgPSBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiICNcIiArIGZpZWxkSWQgKyBcIl9hc3Rlcmlza1wiXHJcbiAgICApO1xyXG4gICAgaWYgKGFzdGVyaXNrRGl2ID09PSBudWxsKSB7XHJcbiAgICAgIGNvbnN0IGFzdGVyaXNrRGl2ID0gVXRpbHMuY3JlYXRlQXN0ZXJpc2tEaXYoXHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLm93bmVyTm9kZSxcclxuICAgICAgICBmaWVsZElkXHJcbiAgICAgICk7XHJcbiAgICAgIGFzdGVyaXNrRGl2LmlkID0gZmllbGRJZCArIFwiX2FzdGVyaXNrXCI7XHJcbiAgICB9XHJcbiAgICBVdGlscy5zaG93QXN0ZXJpc2tEaXYoXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5vd25lck5vZGUsXHJcbiAgICAgIGZpZWxkSWQsXHJcbiAgICAgIGlzU2hvdyxcclxuICAgICAgZmllbGRYLFxyXG4gICAgICBmaWVsZFksXHJcbiAgICAgIGZpZWxkSGVpZ2h0XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIHNob3dGaWVsZEF0dHJpYnV0ZVxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNzaG93RmllbGRBdHRyaWJ1dGVcclxuICAgKiBAZGVzY3JpcHRpb24gIO2VtOuLuSDtlYTrk5wgSUTsnZgg7IaN7ISx7LC97J2EIOuztOyXrOykgOuLpC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZElkICBGaWVsZCBpZFxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBzaG93RmllbGRBdHRyaWJ1dGUoZmllbGRJZCkge1xyXG4gICAgY29uc3QgZmllbGQgPSBfdGVtcGxhdGVNb2QuZmllbGREaWN0aW9uYXJ5W2ZpZWxkSWRdO1xyXG4gICAgbGV0IGF0dHJOb2RlID0gVXRpbHMuY3JlYXRlQXR0cmJ1dGVQb3B1cChcclxuICAgICAgX3RlbXBsYXRlTW9kLm93bmVyTm9kZSxcclxuICAgICAgZmllbGQuZ2V0QkJveCgpXHJcbiAgICApO1xyXG4gICAgdmFyIG1haW5Hcm91cCA9IF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzLnNlbGVjdChcclxuICAgICAgXCIjXCIgKyBDT05TVEFOVFMuTUFJTl9HUk9VUF9OQU1FXHJcbiAgICApO1xyXG4gICAgdmFyIGZpZWxkQW5jZXN0b3JzID0gVXRpbHMuZmllbGRBbmNlc3RvcnMoZmllbGQpO1xyXG4gICAgZmllbGRBbmNlc3RvcnNbMF0uY29uc3RydWN0b3Iuc2hvd0ZpZWxkc0F0dHJpYnV0ZShcclxuICAgICAgX3RlbXBsYXRlTW9kLm93bmVyTm9kZSxcclxuICAgICAgW2ZpZWxkXSxcclxuICAgICAgYXR0ck5vZGUsXHJcbiAgICAgIG1haW5Hcm91cCxcclxuICAgICAgVXRpbHMuZ2V0VXNlckluZm9PcHRzTGlzdCgpLFxyXG4gICAgICBVdGlscy5nZXREVkZpZWxkT3B0c0xpc3QoKSxcclxuICAgICAgX3RlbXBsYXRlTW9kLmNoYW5nZUZpZWxkVmFsdWVFdmVudCxcclxuICAgICAgVXRpbHMuZ2V0U2lnblRhYlNob3dPcHQoKSxcclxuICAgICk7XHJcblxyXG4gICAgbGV0IGRlbGV0ZUJ0bk5vZGUgPSBVdGlscy5jcmVhdGVGaWVsZERlbGV0ZUJ0bihcclxuICAgICAgX3RlbXBsYXRlTW9kLm93bmVyTm9kZSxcclxuICAgICAgX3RlbXBsYXRlTW9kLmZpZWxkRGVsZXRlQnRuQ2xpY2tlZFxyXG4gICAgKTtcclxuICAgIGRlbGV0ZUJ0bk5vZGUuc3R5bGUubGVmdCA9IGZpZWxkLnggKyBmaWVsZC53aWR0aCArIDEwICsgXCJweFwiO1xyXG4gICAgY29uc3QgZmllbGRDZW50ZXJZID0gZmllbGQueSArIGZpZWxkLmhlaWdodCAvIDIgLSAxMDtcclxuICAgIGRlbGV0ZUJ0bk5vZGUuc3R5bGUudG9wID0gZmllbGRDZW50ZXJZICsgXCJweFwiO1xyXG4gICAgX3RlbXBsYXRlTW9kLnNlbGVjdFVzZXJMaXN0KGZpZWxkLm93bmVySWQpO1xyXG4gIH1cclxuXHJcbiAgc2hvd0NvbW1vbkZpZWxkTGlzdEF0dHJpYnV0ZShcclxuICAgIHR5cGUsXHJcbiAgICBvd25lck5vZGUsXHJcbiAgICBmaWVsZExpc3QsXHJcbiAgICBhdHRyTm9kZSxcclxuICAgIG1haW5Hcm91cCxcclxuICAgIHVzZXJMaXN0LFxyXG4gICAgZHZPcHRpb25MaXN0LFxyXG4gICAgY2hhbmdlRXZlbnRGdW5jXHJcbiAgKSB7XHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgY2FzZSBcIlRGXCI6IHtcclxuICAgICAgICByZXR1cm4gVGV4dEZpZWxkLnNob3dGaWVsZHNBdHRyaWJ1dGUoXHJcbiAgICAgICAgICBvd25lck5vZGUsXHJcbiAgICAgICAgICBmaWVsZExpc3QsXHJcbiAgICAgICAgICBhdHRyTm9kZSxcclxuICAgICAgICAgIG1haW5Hcm91cCxcclxuICAgICAgICAgIHVzZXJMaXN0LFxyXG4gICAgICAgICAgZHZPcHRpb25MaXN0LFxyXG4gICAgICAgICAgY2hhbmdlRXZlbnRGdW5jXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwiTEZcIjoge1xyXG4gICAgICAgIHJldHVybiBMYWJlbEZpZWxkLnNob3dGaWVsZHNBdHRyaWJ1dGUoXHJcbiAgICAgICAgICBvd25lck5vZGUsXHJcbiAgICAgICAgICBmaWVsZExpc3QsXHJcbiAgICAgICAgICBhdHRyTm9kZSxcclxuICAgICAgICAgIG1haW5Hcm91cCxcclxuICAgICAgICAgIHVzZXJMaXN0LFxyXG4gICAgICAgICAgZHZPcHRpb25MaXN0LFxyXG4gICAgICAgICAgY2hhbmdlRXZlbnRGdW5jXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwiU0ZcIjoge1xyXG4gICAgICAgIHJldHVybiBTaWduRmllbGQuc2hvd0ZpZWxkc0F0dHJpYnV0ZShcclxuICAgICAgICAgIG93bmVyTm9kZSxcclxuICAgICAgICAgIGZpZWxkTGlzdCxcclxuICAgICAgICAgIGF0dHJOb2RlLFxyXG4gICAgICAgICAgbWFpbkdyb3VwLFxyXG4gICAgICAgICAgdXNlckxpc3QsXHJcbiAgICAgICAgICBkdk9wdGlvbkxpc3QsXHJcbiAgICAgICAgICBjaGFuZ2VFdmVudEZ1bmMsXHJcbiAgICAgICAgICBVdGlscy5nZXRTaWduVGFiU2hvd09wdCgpLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIk5GXCI6IHtcclxuICAgICAgICByZXR1cm4gTnVtYmVyRmllbGQuc2hvd0ZpZWxkc0F0dHJpYnV0ZShcclxuICAgICAgICAgIG93bmVyTm9kZSxcclxuICAgICAgICAgIGZpZWxkTGlzdCxcclxuICAgICAgICAgIGF0dHJOb2RlLFxyXG4gICAgICAgICAgbWFpbkdyb3VwLFxyXG4gICAgICAgICAgdXNlckxpc3QsXHJcbiAgICAgICAgICBkdk9wdGlvbkxpc3QsXHJcbiAgICAgICAgICBjaGFuZ2VFdmVudEZ1bmNcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgXCJERlwiOiB7XHJcbiAgICAgICAgcmV0dXJuIERhdGVGaWVsZC5zaG93RmllbGRzQXR0cmlidXRlKFxyXG4gICAgICAgICAgb3duZXJOb2RlLFxyXG4gICAgICAgICAgZmllbGRMaXN0LFxyXG4gICAgICAgICAgYXR0ck5vZGUsXHJcbiAgICAgICAgICBtYWluR3JvdXAsXHJcbiAgICAgICAgICB1c2VyTGlzdCxcclxuICAgICAgICAgIGR2T3B0aW9uTGlzdCxcclxuICAgICAgICAgIGNoYW5nZUV2ZW50RnVuY1xyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIklNR0ZcIjoge1xyXG4gICAgICAgIHJldHVybiBJbWFnZUZpZWxkLnNob3dGaWVsZHNBdHRyaWJ1dGUoXHJcbiAgICAgICAgICBvd25lck5vZGUsXHJcbiAgICAgICAgICBmaWVsZExpc3QsXHJcbiAgICAgICAgICBhdHRyTm9kZSxcclxuICAgICAgICAgIG1haW5Hcm91cCxcclxuICAgICAgICAgIHVzZXJMaXN0LFxyXG4gICAgICAgICAgZHZPcHRpb25MaXN0LFxyXG4gICAgICAgICAgY2hhbmdlRXZlbnRGdW5jXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwiTUxURlwiOiB7XHJcbiAgICAgICAgcmV0dXJuIE11bHRpTGluZVRleHRGaWVsZC5zaG93RmllbGRzQXR0cmlidXRlKFxyXG4gICAgICAgICAgb3duZXJOb2RlLFxyXG4gICAgICAgICAgZmllbGRMaXN0LFxyXG4gICAgICAgICAgYXR0ck5vZGUsXHJcbiAgICAgICAgICBtYWluR3JvdXAsXHJcbiAgICAgICAgICB1c2VyTGlzdCxcclxuICAgICAgICAgIGR2T3B0aW9uTGlzdCxcclxuICAgICAgICAgIGNoYW5nZUV2ZW50RnVuY1xyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIkNCRlwiOiB7XHJcbiAgICAgICAgcmV0dXJuIENoZWNrYm94RmllbGQuc2hvd0ZpZWxkc0F0dHJpYnV0ZShcclxuICAgICAgICAgIG93bmVyTm9kZSxcclxuICAgICAgICAgIGZpZWxkTGlzdCxcclxuICAgICAgICAgIGF0dHJOb2RlLFxyXG4gICAgICAgICAgbWFpbkdyb3VwLFxyXG4gICAgICAgICAgdXNlckxpc3QsXHJcbiAgICAgICAgICBkdk9wdGlvbkxpc3QsXHJcbiAgICAgICAgICBjaGFuZ2VFdmVudEZ1bmNcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgXCJSRlwiOiB7XHJcbiAgICAgICAgcmV0dXJuIFJhZGlvRmllbGQuc2hvd0ZpZWxkc0F0dHJpYnV0ZShcclxuICAgICAgICAgIG93bmVyTm9kZSxcclxuICAgICAgICAgIGZpZWxkTGlzdCxcclxuICAgICAgICAgIGF0dHJOb2RlLFxyXG4gICAgICAgICAgbWFpbkdyb3VwLFxyXG4gICAgICAgICAgdXNlckxpc3QsXHJcbiAgICAgICAgICBkdk9wdGlvbkxpc3QsXHJcbiAgICAgICAgICBjaGFuZ2VFdmVudEZ1bmNcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgXCJDTUJGXCI6IHtcclxuICAgICAgICByZXR1cm4gQ29tYm9ib3hGaWVsZC5zaG93RmllbGRzQXR0cmlidXRlKFxyXG4gICAgICAgICAgb3duZXJOb2RlLFxyXG4gICAgICAgICAgZmllbGRMaXN0LFxyXG4gICAgICAgICAgYXR0ck5vZGUsXHJcbiAgICAgICAgICBtYWluR3JvdXAsXHJcbiAgICAgICAgICB1c2VyTGlzdCxcclxuICAgICAgICAgIGR2T3B0aW9uTGlzdCxcclxuICAgICAgICAgIGNoYW5nZUV2ZW50RnVuY1xyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgIHJldHVybiBCYXNlRmllbGQuc2hvd0ZpZWxkc0F0dHJpYnV0ZShcclxuICAgICAgICAgIG93bmVyTm9kZSxcclxuICAgICAgICAgIGZpZWxkTGlzdCxcclxuICAgICAgICAgIGF0dHJOb2RlLFxyXG4gICAgICAgICAgbWFpbkdyb3VwLFxyXG4gICAgICAgICAgdXNlckxpc3QsXHJcbiAgICAgICAgICBkdk9wdGlvbkxpc3QsXHJcbiAgICAgICAgICBjaGFuZ2VFdmVudEZ1bmNcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gc2hvd0ZpZWxkTGlzdEF0dHJpYnV0ZVxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNzaG93RmllbGRMaXN0QXR0cmlidXRlXHJcbiAgICogQGRlc2NyaXB0aW9uIO2VtOuLuSDtlYTrk5zrk6TsnZgg7IaN7ISx7LC97J2EIOuztOyXrOykgOuLpC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7QXJyYXl9IGZpZWxkTGlzdCAgRmllbGQgT2JqZWN0IExpc3RcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgc2hvd0ZpZWxkTGlzdEF0dHJpYnV0ZShmaWVsZExpc3QpIHtcclxuICAgIHZhciBkcmFnT3ZlckJveCA9IF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzLnNlbGVjdChcclxuICAgICAgXCIjXCIgKyBDT05TVEFOVFMuRFJBR19CT1hfTkFNRVxyXG4gICAgKTtcclxuICAgIHZhciBkcmFnT3ZlckJCb3ggPSBkcmFnT3ZlckJveC5nZXRCQm94KCk7XHJcbiAgICBsZXQgYXR0ck5vZGUgPSBVdGlscy5jcmVhdGVBdHRyYnV0ZVBvcHVwKFxyXG4gICAgICBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLFxyXG4gICAgICBkcmFnT3ZlckJCb3hcclxuICAgICk7XHJcbiAgICB2YXIgbWFpbkdyb3VwID0gX3RlbXBsYXRlTW9kLm1haW5DYW52YXMuc2VsZWN0KFxyXG4gICAgICBcIiNcIiArIENPTlNUQU5UUy5NQUlOX0dST1VQX05BTUVcclxuICAgICk7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhVdGlscy5maW5kU2FtZUFuY2VzdG9yMihmaWVsZExpc3QpKTtcclxuICAgIGNvbnN0IGNvbW1vbkZpZWxkVHlwZSA9IFV0aWxzLmZpbmRTYW1lQW5jZXN0b3IyKGZpZWxkTGlzdCk7XHJcbiAgICBfdGVtcGxhdGVNb2Quc2hvd0NvbW1vbkZpZWxkTGlzdEF0dHJpYnV0ZShcclxuICAgICAgY29tbW9uRmllbGRUeXBlLFxyXG4gICAgICBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLFxyXG4gICAgICBmaWVsZExpc3QsXHJcbiAgICAgIGF0dHJOb2RlLFxyXG4gICAgICBtYWluR3JvdXAsXHJcbiAgICAgIFV0aWxzLmdldFVzZXJJbmZvT3B0c0xpc3QoKSxcclxuICAgICAgVXRpbHMuZ2V0RFZGaWVsZE9wdHNMaXN0KCksXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5jaGFuZ2VGaWVsZFZhbHVlRXZlbnRcclxuICAgICk7XHJcblxyXG4gICAgbGV0IGRlbGV0ZUJ0bk5vZGUgPSBVdGlscy5jcmVhdGVGaWVsZERlbGV0ZUJ0bihcclxuICAgICAgX3RlbXBsYXRlTW9kLm93bmVyTm9kZSxcclxuICAgICAgX3RlbXBsYXRlTW9kLmZpZWxkRGVsZXRlQnRuQ2xpY2tlZFxyXG4gICAgKTtcclxuICAgIGRlbGV0ZUJ0bk5vZGUuc3R5bGUubGVmdCA9IGRyYWdPdmVyQkJveC54ICsgZHJhZ092ZXJCQm94LndpZHRoICsgMTAgKyBcInB4XCI7XHJcbiAgICBkZWxldGVCdG5Ob2RlLnN0eWxlLnRvcCA9IGRyYWdPdmVyQkJveC55ICsgMTAgKyBcInB4XCI7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gc29ydEZpZWxkc0FsaWduXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3NvcnRGaWVsZHNBbGlnblxyXG4gICAqIEBkZXNjcmlwdGlvbiDshKDtg53rkJwg7ZWE65Oc65Ok7J2YIOychOy5mOulvCDsoJXroKwg7Iuc7YKo64ukLi5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlICDsoJXroKwg7J2066aELiBsZWZ0LCBoQ2VudGVyLCByaWdodCwgdG9wLCB2Q2VudGVyLCBib3R0b20sIFZSZWd1bGFySW50ZXJ2YWwsIEhSZWd1bGFySW50ZXJ2YWxcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgc29ydEZpZWxkc0FsaWduKHR5cGUpIHtcclxuICAgIHZhciB0ZW1wR0JveCA9IF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzLnNlbGVjdChcclxuICAgICAgXCIjXCIgKyBDT05TVEFOVFMuRFJBR19CT1hfTkFNRVxyXG4gICAgKTtcclxuICAgIGlmICh0ZW1wR0JveCA9PT0gbnVsbCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHNlbGVjdGVkSXRlbXMgPSBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy5zZWxlY3RBbGwoXHJcbiAgICAgIFwiI1wiICsgQ09OU1RBTlRTLkRSQUdfQk9YX05BTUUgKyBcIiA+IGdcIlxyXG4gICAgKTtcclxuICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICBjYXNlIFwibGVmdFwiOiB7XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLnNvcnRGaWVsZHNMZWZ0QWxpZ24oc2VsZWN0ZWRJdGVtcyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcImhDZW50ZXJcIjoge1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5zb3J0RmllbGRzSENlbnRlckFsaWduKHRlbXBHQm94LCBzZWxlY3RlZEl0ZW1zKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwicmlnaHRcIjoge1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5zb3J0RmllbGRzUmlnaHRBbGlnbihzZWxlY3RlZEl0ZW1zKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwidG9wXCI6IHtcclxuICAgICAgICBfdGVtcGxhdGVNb2Quc29ydEZpZWxkc1RvcEFsaWduKHNlbGVjdGVkSXRlbXMpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgXCJ2Q2VudGVyXCI6IHtcclxuICAgICAgICBfdGVtcGxhdGVNb2Quc29ydEZpZWxkc1ZDZW50ZXJBbGlnbih0ZW1wR0JveCwgc2VsZWN0ZWRJdGVtcyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcImJvdHRvbVwiOiB7XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLnNvcnRGaWVsZHNCb3R0b21BbGlnbihzZWxlY3RlZEl0ZW1zKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFwiVlJlZ3VsYXJJbnRlcnZhbFwiOiB7XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLnNvcnRGaWVsZHNWUmVndWxhckludGVydmFsQWxpZ24oc2VsZWN0ZWRJdGVtcyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBcIkhSZWd1bGFySW50ZXJ2YWxcIjoge1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5zb3J0RmllbGRzSFJlZ3VsYXJJbnRlcnZhbEFsaWduKHNlbGVjdGVkSXRlbXMpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBfdGVtcGxhdGVNb2QudG1wR3JvdXBGdEV2ZW50KFwiZHJhZyBlbmRcIik7XHJcbiAgICBfdGVtcGxhdGVNb2QuY2hhbmdlR3JvdXBCb3hGcmVlVHJhbnNmb3JtKHRlbXBHQm94KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBzb3J0RmllbGRzQm90dG9tQWxpZ25cclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2Qjc29ydEZpZWxkc0JvdHRvbUFsaWduXHJcbiAgICogQGRlc2NyaXB0aW9uIOyEoO2DneuQnCDtlYTrk5zrk6TsnYQg6rCA7J6lIOuCruydgCBZ7KKM7ZGc66GcIOygleugrOyLnO2CqOuLpC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7QXJyYXl9IHNlbGVjdGVkSXRlbXMgIEZpZWxkIExpc3RcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgc29ydEZpZWxkc0JvdHRvbUFsaWduKHNlbGVjdGVkSXRlbXMpIHtcclxuICAgIGlmIChzZWxlY3RlZEl0ZW1zLmxlbmd0aCA8IDIpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdmFyIG1pblkgPSAwO1xyXG4gICAgc2VsZWN0ZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHZhciBjaGlsZFJlY3QgPSBpdGVtLnNlbGVjdChcInJlY3RcIik7XHJcbiAgICAgIHZhciBiYm94ID0gY2hpbGRSZWN0LmdldEJCb3goKTtcclxuICAgICAgaWYgKGJib3gueTIgPiBtaW5ZKSB7XHJcbiAgICAgICAgbWluWSA9IGJib3gueTI7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgc2VsZWN0ZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHZhciBjaGlsZFJlY3QgPSBpdGVtLnNlbGVjdChcInJlY3RcIik7XHJcbiAgICAgIHZhciBiYm94ID0gY2hpbGRSZWN0LmdldEJCb3goKTtcclxuICAgICAgY2hpbGRSZWN0LmF0dHIoeyB5OiBtaW5ZIC0gYmJveC5oZWlnaHQgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBzb3J0RmllbGRzSENlbnRlckFsaWduXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3NvcnRGaWVsZHNIQ2VudGVyQWxpZ25cclxuICAgKiBAZGVzY3JpcHRpb24gIOyEoO2DneuQnCDtlYTrk5zrk6TsnZggWeyijO2RnCDspJHslZnsnLzroZwg7KCV66Cs7Iuc7YKo64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtBcnJheX0gc2VsZWN0ZWRJdGVtcyAgRmllbGQgTGlzdFxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBzb3J0RmllbGRzSENlbnRlckFsaWduKHRlbXBHQm94LCBzZWxlY3RlZEl0ZW1zKSB7XHJcbiAgICBpZiAoc2VsZWN0ZWRJdGVtcy5sZW5ndGggPCAyKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciBncm91cEJib3ggPSB0ZW1wR0JveC5nZXRCQm94KCk7XHJcbiAgICB2YXIgY3ggPSBncm91cEJib3guY3g7XHJcbiAgICBzZWxlY3RlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdmFyIGNoaWxkUmVjdCA9IGl0ZW0uc2VsZWN0KFwicmVjdFwiKTtcclxuICAgICAgdmFyIGJib3ggPSBjaGlsZFJlY3QuZ2V0QkJveCgpO1xyXG4gICAgICBjaGlsZFJlY3QuYXR0cih7IHg6IGN4IC0gYmJveC53aWR0aCAvIDIgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBzb3J0RmllbGRzSFJlZ3VsYXJJbnRlcnZhbEFsaWduXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3NvcnRGaWVsZHNIUmVndWxhckludGVydmFsQWxpZ25cclxuICAgKiBAZGVzY3JpcHRpb24gIOyEoO2DneuQnCDtlYTrk5zrk6TsnYQg6rCA66GcIOqwhOqyqeydtCDsnbzsoJXtlZjqsowg7KCV66Cs7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtBcnJheX0gc2VsZWN0ZWRJdGVtcyAgRmllbGQgTGlzdFxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBzb3J0RmllbGRzSFJlZ3VsYXJJbnRlcnZhbEFsaWduKHNlbGVjdGVkSXRlbXMpIHtcclxuICAgIGlmIChzZWxlY3RlZEl0ZW1zLmxlbmd0aCA8IDMpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdmFyIGl0ZW1zID0gQXJyYXkuZnJvbShzZWxlY3RlZEl0ZW1zKTtcclxuICAgIGl0ZW1zID0gaXRlbXMuc29ydChmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICB2YXIgY2hpbGRSZWN0QSA9IGEuc2VsZWN0KFwicmVjdFwiKS5nZXRCQm94KCk7XHJcbiAgICAgIHZhciBjaGlsZFJlY3RCID0gYi5zZWxlY3QoXCJyZWN0XCIpLmdldEJCb3goKTtcclxuICAgICAgcmV0dXJuIGNoaWxkUmVjdEEueCAtIGNoaWxkUmVjdEIueDtcclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBmaXJzdEl0ZW0gPSBpdGVtc1swXTtcclxuICAgIHZhciBsYXN0SXRlbSA9IGl0ZW1zW2l0ZW1zLmxlbmd0aCAtIDFdO1xyXG4gICAgdmFyIGZpcnN0SXRlbUJCb3ggPSBmaXJzdEl0ZW0uZ2V0QkJveCgpO1xyXG4gICAgdmFyIGxhc3RJdGVtQkJveCA9IGxhc3RJdGVtLmdldEJCb3goKTtcclxuICAgIHZhciB0b3RhbEludGVydmFsID0gTWF0aC5hYnMobGFzdEl0ZW1CQm94LnggLSBmaXJzdEl0ZW1CQm94LngyKTtcclxuICAgIGZvciAodmFyIGlkeCA9IDE7IGlkeCA8IGl0ZW1zLmxlbmd0aCAtIDE7ICsraWR4KSB7XHJcbiAgICAgIHZhciBpdGVtID0gaXRlbXNbaWR4XTtcclxuICAgICAgdmFyIGNoaWxkUmVjdCA9IGl0ZW0uc2VsZWN0KFwicmVjdFwiKTtcclxuICAgICAgdmFyIGJib3ggPSBjaGlsZFJlY3QuZ2V0QkJveCgpO1xyXG4gICAgICB0b3RhbEludGVydmFsID0gdG90YWxJbnRlcnZhbCAtIGJib3gud2lkdGg7XHJcbiAgICB9XHJcbiAgICB2YXIgYmV0d2Vlbkl0ZW1DbnQgPSBpdGVtcy5sZW5ndGggLSAxO1xyXG4gICAgdmFyIGludGVydmFsID0gdG90YWxJbnRlcnZhbCAvIGJldHdlZW5JdGVtQ250O1xyXG4gICAgdmFyIGJlZm9yZVgyID0gZmlyc3RJdGVtQkJveC54MjtcclxuICAgIGZvciAodmFyIGlkeDIgPSAxOyBpZHgyIDwgaXRlbXMubGVuZ3RoIC0gMTsgKytpZHgyKSB7XHJcbiAgICAgIHZhciBpdGVtMiA9IGl0ZW1zW2lkeDJdO1xyXG4gICAgICB2YXIgY2hpbGRSZWN0MiA9IGl0ZW0yLnNlbGVjdChcInJlY3RcIik7XHJcbiAgICAgIGNoaWxkUmVjdDIuYXR0cih7IHg6IGJlZm9yZVgyICsgaW50ZXJ2YWwgfSk7XHJcbiAgICAgIHZhciBiYm94MiA9IGNoaWxkUmVjdDIuZ2V0QkJveCgpO1xyXG4gICAgICBiZWZvcmVYMiA9IGJib3gyLngyO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIHNvcnRGaWVsZHNMZWZ0QWxpZ25cclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2Qjc29ydEZpZWxkc0xlZnRBbGlnblxyXG4gICAqIEBkZXNjcmlwdGlvbiDshKDtg53rkJwg7ZWE65Oc65Ok7J2EIOqwgOyepSDrgq7snYAgWOyijO2RnOuhnCDsoJXroKzsi5ztgqjri6QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0FycmF5fSBzZWxlY3RlZEl0ZW1zIEZpZWxkIExpc3RcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgc29ydEZpZWxkc0xlZnRBbGlnbihzZWxlY3RlZEl0ZW1zKSB7XHJcbiAgICBpZiAoc2VsZWN0ZWRJdGVtcy5sZW5ndGggPCAyKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciBtaW5YID0gTnVtYmVyLk1BWF9WQUxVRTtcclxuICAgIHNlbGVjdGVkSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB2YXIgY2hpbGRSZWN0ID0gaXRlbS5zZWxlY3QoXCJyZWN0XCIpO1xyXG4gICAgICB2YXIgYmJveCA9IGNoaWxkUmVjdC5nZXRCQm94KCk7XHJcbiAgICAgIGlmIChiYm94LnggPCBtaW5YKSB7XHJcbiAgICAgICAgbWluWCA9IGJib3gueDtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgc2VsZWN0ZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHZhciBjaGlsZFJlY3QgPSBpdGVtLnNlbGVjdChcInJlY3RcIik7XHJcbiAgICAgIGNoaWxkUmVjdC5hdHRyKHsgeDogbWluWCB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIHNvcnRGaWVsZHNSaWdodEFsaWduXHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3NvcnRGaWVsZHNSaWdodEFsaWduXHJcbiAgICogQGRlc2NyaXB0aW9uICDshKDtg53rkJwg7ZWE65Oc65Ok7J2EIOqwgOyepSDtgbAgWOyijO2RnOuhnCDsoJXroKzsi5ztgqjri6QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0FycmF5fSBzZWxlY3RlZEl0ZW1zICBGaWVsZCBMaXN0XHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIHNvcnRGaWVsZHNSaWdodEFsaWduKHNlbGVjdGVkSXRlbXMpIHtcclxuICAgIGlmIChzZWxlY3RlZEl0ZW1zLmxlbmd0aCA8IDIpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdmFyIG1pblggPSAwO1xyXG4gICAgc2VsZWN0ZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHZhciBjaGlsZFJlY3QgPSBpdGVtLnNlbGVjdChcInJlY3RcIik7XHJcbiAgICAgIHZhciBiYm94ID0gY2hpbGRSZWN0LmdldEJCb3goKTtcclxuICAgICAgaWYgKGJib3gueDIgPiBtaW5YKSB7XHJcbiAgICAgICAgbWluWCA9IGJib3gueDI7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHNlbGVjdGVkSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB2YXIgY2hpbGRSZWN0ID0gaXRlbS5zZWxlY3QoXCJyZWN0XCIpO1xyXG4gICAgICB2YXIgYmJveCA9IGNoaWxkUmVjdC5nZXRCQm94KCk7XHJcbiAgICAgIGNoaWxkUmVjdC5hdHRyKHsgeDogbWluWCAtIGJib3gud2lkdGggfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiBzb3J0RmllbGRzVG9wQWxpZ25cclxuICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVGVtcGxhdGVNb2QuVGVtcGxhdGVNb2Qjc29ydEZpZWxkc1RvcEFsaWduXHJcbiAgICogQGRlc2NyaXB0aW9uIOyEoO2DneuQnCDtlYTrk5zrk6TsnYQg6rCA7J6lIOuGkuydgCBZ7KKM7ZGc66GcIOygleugrOyLnO2CqOuLpC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7QXJyYXl9IHNlbGVjdGVkSXRlbXMgIEZpZWxkIExpc3RcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgc29ydEZpZWxkc1RvcEFsaWduKHNlbGVjdGVkSXRlbXMpIHtcclxuICAgIGlmIChzZWxlY3RlZEl0ZW1zLmxlbmd0aCA8IDIpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdmFyIG1pblkgPSBOdW1iZXIuTUFYX1ZBTFVFO1xyXG4gICAgc2VsZWN0ZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHZhciBjaGlsZFJlY3QgPSBpdGVtLnNlbGVjdChcInJlY3RcIik7XHJcbiAgICAgIHZhciBiYm94ID0gY2hpbGRSZWN0LmdldEJCb3goKTtcclxuICAgICAgaWYgKGJib3gueSA8IG1pblkpIHtcclxuICAgICAgICBtaW5ZID0gYmJveC55O1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBzZWxlY3RlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdmFyIGNoaWxkUmVjdCA9IGl0ZW0uc2VsZWN0KFwicmVjdFwiKTtcclxuICAgICAgY2hpbGRSZWN0LmF0dHIoeyB5OiBtaW5ZIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gc29ydEZpZWxkc1ZDZW50ZXJBbGlnblxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNzb3J0RmllbGRzVkNlbnRlckFsaWduXHJcbiAgICogQGRlc2NyaXB0aW9uIOyEoO2DneuQnCDtlYTrk5zrk6TsnYQgWeyijO2RnOydmCDqsIDsmrTrjbDroZwg7KCV66Cs7Iuc7YKo64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtBcnJheX0gc2VsZWN0ZWRJdGVtcyAgRmllbGQgTGlzdFxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICBzb3J0RmllbGRzVkNlbnRlckFsaWduKHRlbXBHQm94LCBzZWxlY3RlZEl0ZW1zKSB7XHJcbiAgICBpZiAoc2VsZWN0ZWRJdGVtcy5sZW5ndGggPCAyKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciBncm91cEJib3ggPSB0ZW1wR0JveC5nZXRCQm94KCk7XHJcbiAgICB2YXIgY3kgPSBncm91cEJib3guY3k7XHJcbiAgICBzZWxlY3RlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdmFyIGNoaWxkUmVjdCA9IGl0ZW0uc2VsZWN0KFwicmVjdFwiKTtcclxuICAgICAgdmFyIGJib3ggPSBjaGlsZFJlY3QuZ2V0QkJveCgpO1xyXG4gICAgICBjaGlsZFJlY3QuYXR0cih7IHk6IGN5IC0gYmJveC5oZWlnaHQgLyAyIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gc29ydEZpZWxkc1ZSZWd1bGFySW50ZXJ2YWxBbGlnblxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCNzb3J0RmllbGRzVlJlZ3VsYXJJbnRlcnZhbEFsaWduXHJcbiAgICogQGRlc2NyaXB0aW9uIOyEoO2DneuQnCDtlYTrk5zrk6TsnYQg7IS466Gc6rCE6rKp7J20IOydvOygle2VmOqyjCDsoJXroKzsi5ztgqjri6QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0FycmF5fSBzZWxlY3RlZEl0ZW1zIEZpZWxkIExpc3RcclxuICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICovXHJcbiAgc29ydEZpZWxkc1ZSZWd1bGFySW50ZXJ2YWxBbGlnbihzZWxlY3RlZEl0ZW1zKSB7XHJcbiAgICBpZiAoc2VsZWN0ZWRJdGVtcy5sZW5ndGggPCAzKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciBpdGVtcyA9IEFycmF5LmZyb20oc2VsZWN0ZWRJdGVtcyk7XHJcbiAgICBpdGVtcyA9IGl0ZW1zLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgdmFyIGNoaWxkUmVjdEEgPSBhLnNlbGVjdChcInJlY3RcIikuZ2V0QkJveCgpO1xyXG4gICAgICB2YXIgY2hpbGRSZWN0QiA9IGIuc2VsZWN0KFwicmVjdFwiKS5nZXRCQm94KCk7XHJcbiAgICAgIHJldHVybiBjaGlsZFJlY3RBLnkgLSBjaGlsZFJlY3RCLnk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgZmlyc3RJdGVtID0gaXRlbXNbMF07XHJcbiAgICB2YXIgbGFzdEl0ZW0gPSBpdGVtc1tpdGVtcy5sZW5ndGggLSAxXTtcclxuICAgIHZhciBmaXJzdEl0ZW1CQm94ID0gZmlyc3RJdGVtLmdldEJCb3goKTtcclxuICAgIHZhciBsYXN0SXRlbUJCb3ggPSBsYXN0SXRlbS5nZXRCQm94KCk7XHJcbiAgICB2YXIgdG90YWxJbnRlcnZhbCA9IE1hdGguYWJzKGxhc3RJdGVtQkJveC55IC0gZmlyc3RJdGVtQkJveC55Mik7XHJcbiAgICBmb3IgKHZhciBpZHggPSAxOyBpZHggPCBpdGVtcy5sZW5ndGggLSAxOyArK2lkeCkge1xyXG4gICAgICB2YXIgaXRlbSA9IGl0ZW1zW2lkeF07XHJcbiAgICAgIHZhciBjaGlsZFJlY3QgPSBpdGVtLnNlbGVjdChcInJlY3RcIik7XHJcbiAgICAgIHZhciBiYm94ID0gY2hpbGRSZWN0LmdldEJCb3goKTtcclxuICAgICAgdG90YWxJbnRlcnZhbCA9IHRvdGFsSW50ZXJ2YWwgLSBiYm94LmhlaWdodDtcclxuICAgIH1cclxuICAgIHZhciBiZXR3ZWVuSXRlbUNudCA9IGl0ZW1zLmxlbmd0aCAtIDE7XHJcbiAgICB2YXIgaW50ZXJ2YWwgPSB0b3RhbEludGVydmFsIC8gYmV0d2Vlbkl0ZW1DbnQ7XHJcbiAgICB2YXIgYmVmb3JlWTIgPSBmaXJzdEl0ZW1CQm94LnkyO1xyXG4gICAgZm9yICh2YXIgaWR4MiA9IDE7IGlkeDIgPCBpdGVtcy5sZW5ndGggLSAxOyArK2lkeDIpIHtcclxuICAgICAgdmFyIGl0ZW0yID0gaXRlbXNbaWR4Ml07XHJcbiAgICAgIHZhciBjaGlsZFJlY3QyID0gaXRlbTIuc2VsZWN0KFwicmVjdFwiKTtcclxuICAgICAgY2hpbGRSZWN0Mi5hdHRyKHsgeTogYmVmb3JlWTIgKyBpbnRlcnZhbCB9KTtcclxuICAgICAgdmFyIGJib3gyID0gY2hpbGRSZWN0Mi5nZXRCQm94KCk7XHJcbiAgICAgIGJlZm9yZVkyID0gYmJveDIueTI7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gdGVtcGxhdGVJbml0XHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3RlbXBsYXRlSW5pdFxyXG4gICAqIEBkZXNjcmlwdGlvbiDstIjquLDtmZQg7ISk7KCV7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIHRlbXBsYXRlSW5pdCgpIHtcclxuICAgIHZhciBsYXllckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBsYXllckRpdi5pZCA9IENPTlNUQU5UUy5URU1QTEFURV9MQVlFUl9OQU1FO1xyXG4gICAgbGF5ZXJEaXYuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XHJcbiAgICBsYXllckRpdi5zdHlsZS50b3AgPSBcIjBweFwiO1xyXG4gICAgbGF5ZXJEaXYuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcclxuICAgIGxheWVyRGl2LnN0eWxlLnpJbmRleCA9IFwiOTlcIjtcclxuICAgIHZhciBwZGZDb250YWluZXIgPSBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiICNcIiArIENPTlNUQU5UUy5URU1QTEFURV9QREZfVklFV0VSX0NPTlRBSU5FUlxyXG4gICAgKTtcclxuICAgIHBkZkNvbnRhaW5lci5hcHBlbmRDaGlsZChsYXllckRpdik7XHJcblxyXG4gICAgX3RlbXBsYXRlTW9kLm1haW5DYW52YXMgPSBTbmFwKFwiMTAwJVwiLCBcIjEwMCVcIik7XHJcbiAgICBsZXQgdmlld2VyID0gX3RlbXBsYXRlTW9kLm93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiAjXCIgKyBDT05TVEFOVFMuVEVNUExBVEVfUERGX1ZJRVdFUlxyXG4gICAgKTtcclxuICAgIHZpZXdlci5hcHBlbmRDaGlsZChfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy5ub2RlKTtcclxuICAgIF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzLmF0dHIoe1xyXG4gICAgICBzdHlsZTogXCJwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgei1pbmRleDogOTlcIixcclxuICAgIH0pO1xyXG4gICAgbGV0IG1haW5Hcm91cCA9IF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzLmdyb3VwKCk7XHJcbiAgICBtYWluR3JvdXAuYXR0cih7IGlkOiBDT05TVEFOVFMuTUFJTl9HUk9VUF9OQU1FIH0pO1xyXG4gICAgX3RlbXBsYXRlTW9kLm1haW5DYW52YXMuZHJhZyhcclxuICAgICAgX3RlbXBsYXRlTW9kLmRyYWdtb3ZlRnVuYyxcclxuICAgICAgX3RlbXBsYXRlTW9kLmRyYWdzdGFydEZ1bmMsXHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5kcmFnZW5kRnVuY1xyXG4gICAgKTtcclxuICAgIHZpZXdlci5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCAwKTtcclxuICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIF90ZW1wbGF0ZU1vZC5rZXljaGVjaywgdHJ1ZSk7XHJcblxyXG4gICAgbGV0IGFzdGVyaXNrTGF5ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgYXN0ZXJpc2tMYXllci5pZCA9IENPTlNUQU5UUy5URU1QTEFURV9MQVlFUl9BU1RFUklTS19OQU1FO1xyXG4gICAgYXN0ZXJpc2tMYXllci5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuICAgIGFzdGVyaXNrTGF5ZXIuc3R5bGUudG9wID0gXCIwXCI7XHJcbiAgICBhc3Rlcmlza0xheWVyLnN0eWxlLnpJbmRleCA9IFwiOThcIjtcclxuICAgIGFzdGVyaXNrTGF5ZXIuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcclxuICAgIHZpZXdlci5hcHBlbmRDaGlsZChhc3Rlcmlza0xheWVyKTtcclxuXHJcbiAgICBfdGVtcGxhdGVNb2QuYnVpbGRGaWVsZGZvcm1lckxpc3QoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiB0ZW1wbGF0ZU1vdXNlTW92ZUV2ZW50XHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3RlbXBsYXRlTW91c2VNb3ZlRXZlbnRcclxuICAgKiBAZGVzY3JpcHRpb24gUERG7JyE7JeQIOyYrOudvOqwgOuKlCBUZW1wbGF0ZSDroIjsnbTslrTsl5Ag7ZWE65Oc66W8IOybgOyngeydvCDrlYwg67Cc7IOd7ZWY64qUIE1PVkUgRXZlbnTrpbwg7LKY66as7ZWc64ukLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50ICAgZXZlbnQgT2JqZWN0XHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIHRlbXBsYXRlTW91c2VNb3ZlRXZlbnQoZXZlbnQpIHtcclxuICAgIGxldCB0ZW1wbGF0ZVJlY3QgPSBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiICNcIiArIENPTlNUQU5UUy5URU1QTEFURV9MQVlFUl9SRUNUX05BTUVcclxuICAgICk7XHJcbiAgICBsZXQgdGFyZ2V0MSA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIgI1wiICsgQ09OU1RBTlRTLlRFTVBMQVRFX0xBWUVSX05BTUVcclxuICAgICk7XHJcbiAgICBsZXQgdGFyZ2V0MiA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIgI1wiICsgQ09OU1RBTlRTLlRFTVBMQVRFX0xBWUVSX1JFQ1RfTkFNRVxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoISh0YXJnZXQxID09PSBldmVudC50YXJnZXQgfHwgdGFyZ2V0MiA9PT0gZXZlbnQudGFyZ2V0KSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBsZXQgb2Zmc2V0WCA9IGV2ZW50Lm9mZnNldFg7XHJcbiAgICBsZXQgb2Zmc2V0WSA9IGV2ZW50Lm9mZnNldFk7XHJcbiAgICBpZiAoXHJcbiAgICAgIGV2ZW50LnRhcmdldCA9PT0gdGFyZ2V0MiAmJlxyXG4gICAgICAhVXRpbHMuaXNFbXB0eU9iamVjdChfdGVtcGxhdGVNb2QudGVtcGxhdGVSZWN0TW91c2VQb3NpdGlvbilcclxuICAgICkge1xyXG4gICAgICBvZmZzZXRYID1cclxuICAgICAgICBfdGVtcGxhdGVNb2QudGVtcGxhdGVSZWN0TW91c2VQb3NpdGlvbi54ICtcclxuICAgICAgICAoZXZlbnQucGFnZVggLSBfdGVtcGxhdGVNb2QudGVtcGxhdGVSZWN0TW91c2VQb3NpdGlvbi5veCk7XHJcbiAgICAgIG9mZnNldFkgPVxyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC50ZW1wbGF0ZVJlY3RNb3VzZVBvc2l0aW9uLnkgK1xyXG4gICAgICAgIChldmVudC5wYWdlWSAtIF90ZW1wbGF0ZU1vZC50ZW1wbGF0ZVJlY3RNb3VzZVBvc2l0aW9uLm95KTtcclxuICAgIH1cclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgX3RlbXBsYXRlTW9kLnRlbXBsYXRlUmVjdE1vdXNlUG9zaXRpb24gPSB7XHJcbiAgICAgIHg6IG9mZnNldFgsXHJcbiAgICAgIHk6IG9mZnNldFksXHJcbiAgICAgIG94OiBldmVudC5wYWdlWCxcclxuICAgICAgb3k6IGV2ZW50LnBhZ2VZLFxyXG4gICAgfTtcclxuXHJcbiAgICBhbmltZSh7XHJcbiAgICAgIHRhcmdldHM6IHRlbXBsYXRlUmVjdCxcclxuICAgICAgdHJhbnNsYXRlWDogb2Zmc2V0WCxcclxuICAgICAgdHJhbnNsYXRlWTogb2Zmc2V0WSxcclxuICAgICAgZGlyZWN0aW9uOiBcIm5vcm1hbFwiLFxyXG4gICAgICBsb29wOiBmYWxzZSxcclxuICAgICAgZGVsYXk6IGFuaW1lLnN0YWdnZXIoMzAwLCB7IGVhc2luZzogXCJlYXNlT3V0RWxhc3RpYygxLCAuNilcIiB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIHRlbXBsYXRlTW91c2VVcEV2ZW50XHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3RlbXBsYXRlTW91c2VVcEV2ZW50XHJcbiAgICogQGRlc2NyaXB0aW9uIFBERuychOyXkCDsmKzrnbzqsIDripQgVGVtcGxhdGUg66CI7J207Ja07JeQIO2VhOuTnOulvCDsm4Dsp4Hsnbwg65WMIOuwnOyDne2VmOuKlCBtb3VudCB1cCBFdmVudOulvCDsspjrpqztlZzri6QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnQgIGV2ZW50IE9iamVjdFxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICB0ZW1wbGF0ZU1vdXNlVXBFdmVudChldmVudCkge1xyXG4gICAgX3RlbXBsYXRlTW9kLnJlbW92ZVRlbXBsYXRlUmVjdCgpO1xyXG4gICAgX3RlbXBsYXRlTW9kLmNsZWFyU2VsZWN0ZWRUb29sKCk7XHJcblxyXG4gICAgdmFyIG1haW5Hcm91cCA9IF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzLnNlbGVjdChcclxuICAgICAgXCIjXCIgKyBDT05TVEFOVFMuTUFJTl9HUk9VUF9OQU1FXHJcbiAgICApO1xyXG4gICAgdmFyIHBhZ2VYID0gZXZlbnQucGFnZVg7XHJcbiAgICB2YXIgcGFnZVJlY3QgPSBfdGVtcGxhdGVNb2QuZ2V0UGFnZUJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgaWYgKHBhZ2VYIDwgcGFnZVJlY3QueCkge1xyXG4gICAgICBwYWdlWCA9IHBhZ2VSZWN0Lng7XHJcbiAgICB9IGVsc2UgaWYgKHBhZ2VYID4gcGFnZVJlY3QueCArIHBhZ2VSZWN0LndpZHRoKSB7XHJcbiAgICAgIHBhZ2VYID1cclxuICAgICAgICBwYWdlUmVjdC54ICtcclxuICAgICAgICBwYWdlUmVjdC53aWR0aCAtXHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLmdldENyZWF0ZUZpZWxkRGVmYXVsdFdpZHRoKFxyXG4gICAgICAgICAgX3RlbXBsYXRlTW9kLnNlbGVjdEFkZEZpZWxkVHlwZVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbiAgICB2YXIgZmllbGRHcm91cCA9IF90ZW1wbGF0ZU1vZC5jcmVhdGVGaWVsZChcclxuICAgICAgX3RlbXBsYXRlTW9kLnNlbGVjdEFkZEZpZWxkVHlwZSxcclxuICAgICAgcGFnZVgsXHJcbiAgICAgIGV2ZW50LnBhZ2VZXHJcbiAgICApO1xyXG4gICAgbWFpbkdyb3VwLmFwcGVuZChmaWVsZEdyb3VwKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiB0ZW1wbGF0ZVJlc2l6ZVxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCN0ZW1wbGF0ZVJlc2l6ZVxyXG4gICAqIEBkZXNjcmlwdGlvbiB0ZW1wbGF0ZeyXkOyEnCDsgqzsmqnrkJjripQg64W465Oc65Ok7J2YIOyCrOydtOymiOulvCDsnqzsobDsoJXtlZzri6QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnQgIGV2ZW50IE9iamVjdFxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBoZWlnaHQgICDrpqzsgqzsnbTspojrkJwg64aS7J20LlxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICB0ZW1wbGF0ZVJlc2l6ZShldmVudCwgaGVpZ2h0KSB7XHJcbiAgICB2YXIgdGVtcGxhdGVMYXllciA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIgI1wiICsgQ09OU1RBTlRTLlRFTVBMQVRFX0xBWUVSX05BTUVcclxuICAgICk7XHJcbiAgICB0ZW1wbGF0ZUxheWVyLnN0eWxlLmhlaWdodCA9IGhlaWdodCArIFwicHhcIjtcclxuICAgIF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzLmF0dHIoeyBoZWlnaHQ6IGhlaWdodCB9KTtcclxuICAgIF90ZW1wbGF0ZU1vZC5wYWdlQm91bmRpbmdCb3guaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgX3RlbXBsYXRlTW9kLmZpZWxkUmVwb3NpdGlvbmluZyhldmVudCwgdHJ1ZSk7XHJcblxyXG4gICAgbGV0IGFzdGVyaXNrTGF5ZXIgPSBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiICNcIiArIENPTlNUQU5UUy5URU1QTEFURV9MQVlFUl9BU1RFUklTS19OQU1FXHJcbiAgICApO1xyXG4gICAgYXN0ZXJpc2tMYXllci5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyBcInB4XCI7XHJcblxyXG4gICAgdmFyIHRlbXBHQm94ID0gX3RlbXBsYXRlTW9kLm1haW5DYW52YXMuc2VsZWN0KFxyXG4gICAgICBcIiNcIiArIENPTlNUQU5UUy5EUkFHX0JPWF9OQU1FXHJcbiAgICApO1xyXG4gICAgaWYgKHRlbXBHQm94ID09PSBudWxsKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciBiYm94ID0gdGVtcEdCb3guZ2V0QkJveCgpO1xyXG4gICAgX3RlbXBsYXRlTW9kLnJlbW92ZURyYWdPdmVyR3JvdXAoKTtcclxuICAgIF90ZW1wbGF0ZU1vZC5jcmVhdGVEcmFnT3Zlckdyb3VwKGJib3gpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGZ1bmN0aW9uIHRtcEdyb3VwRnRFdmVudFxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCN0bXBHcm91cEZ0RXZlbnRcclxuICAgKiBAZGVzY3JpcHRpb24g65Oc656Y6re47ZW07IScIOyEoO2DneuQnCDtlYTrk5wg6re466O5IEZyZWVUcmFuc2Zvcm3snZgg7J2067Kk7Yq466W8IOyymOumrO2VnOuLpC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgIEZyZWVUcmFuc2Zvcm3sl5DshJwg67Cc7IOd7ZWY64qUIOydtOuypO2KuCDsnbTrpoQuXHJcbiAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAqL1xyXG4gIHRtcEdyb3VwRnRFdmVudChldmVudE5hbWUpIHtcclxuICAgIGlmIChldmVudE5hbWUgPT09IFwiZHJhZyBzdGFydFwiIHx8IGV2ZW50TmFtZSA9PT0gXCJhcHBseVwiKSB7XHJcbiAgICAgIC8vaGlkZSBhdHRyXHJcbiAgICAgIGlmIChfdGVtcGxhdGVNb2QuaXNGaWVsZERyYWdTdGFydCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBfdGVtcGxhdGVNb2QuaXNGaWVsZERyYWdTdGFydCA9IHRydWU7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC5oaWRlRmllbGRBdHRyaWJ1dGUoKTtcclxuXHJcbiAgICAgIHZhciBncm91cHMgPSBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy5zZWxlY3RBbGwoXHJcbiAgICAgICAgXCIjXCIgKyBDT05TVEFOVFMuRFJBR19CT1hfTkFNRSArIFwiID4gZ1wiXHJcbiAgICAgICk7XHJcbiAgICAgIHZhciBvbGREYXRhQXJyID0gW107XHJcbiAgICAgIHZhciBuZXdEYXRhQXJyID0gW107XHJcbiAgICAgIHZhciB0ZW1wR09sZCA9IF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzLnNlbGVjdChcclxuICAgICAgICBcIiNcIiArIENPTlNUQU5UUy5EUkFHX0JPWF9OQU1FXHJcbiAgICAgICk7XHJcbiAgICAgIGdyb3Vwcy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgbGV0IGNoaWxkUmVjdCA9IGVsZW1lbnQuc2VsZWN0KFwicmVjdFwiKTtcclxuICAgICAgICBVdGlscy5zaG93QXN0ZXJpc2tEaXYoXHJcbiAgICAgICAgICBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLFxyXG4gICAgICAgICAgY2hpbGRSZWN0LmF0dHIoXCJpZFwiKSxcclxuICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZXZlbnROYW1lID09PSBcImRyYWcgZW5kXCIpIHtcclxuICAgICAgX3RlbXBsYXRlTW9kLmlzRmllbGREcmFnU3RhcnQgPSBmYWxzZTtcclxuICAgICAgdmFyIGdyb3VwcyA9IF90ZW1wbGF0ZU1vZC5tYWluQ2FudmFzLnNlbGVjdEFsbChcclxuICAgICAgICBcIiNcIiArIENPTlNUQU5UUy5EUkFHX0JPWF9OQU1FICsgXCIgPiBnXCJcclxuICAgICAgKTtcclxuICAgICAgdmFyIG9sZERhdGFBcnIgPSBbXTtcclxuICAgICAgdmFyIG5ld0RhdGFBcnIgPSBbXTtcclxuICAgICAgdmFyIHRlbXBHT2xkID0gX3RlbXBsYXRlTW9kLm1haW5DYW52YXMuc2VsZWN0KFxyXG4gICAgICAgIFwiI1wiICsgQ09OU1RBTlRTLkRSQUdfQk9YX05BTUVcclxuICAgICAgKTtcclxuICAgICAgdmFyIGZpZWxkTGlzdCA9IFtdO1xyXG4gICAgICBncm91cHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGxldCBjaGlsZFJlY3QgPSBlbGVtZW50LnNlbGVjdChcInJlY3RcIik7XHJcbiAgICAgICAgbGV0IGZpZWxkSWQgPSBjaGlsZFJlY3QuYXR0cihcImlkXCIpO1xyXG4gICAgICAgIHZhciBvbGREYXRhID0gX3RlbXBsYXRlTW9kLmdldEZpZWxkSnNvbkRhdGEoZmllbGRJZCk7XHJcbiAgICAgICAgb2xkRGF0YUFyci5wdXNoKG9sZERhdGEpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBHTWF0cml4ID0gdGVtcEdPbGQudHJhbnNmb3JtKCkuZ2xvYmFsTWF0cml4O1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5jaGFuZ2VGaWVsZFBvc2l0aW9uKGVsZW1lbnQsIHRlbXBHTWF0cml4LCB0cnVlKTtcclxuICAgICAgICB2YXIgbmV3RGF0YSA9IF90ZW1wbGF0ZU1vZC5nZXRGaWVsZEpzb25EYXRhKGZpZWxkSWQpO1xyXG4gICAgICAgIG5ld0RhdGFBcnIucHVzaChuZXdEYXRhKTtcclxuICAgICAgICBmaWVsZExpc3QucHVzaChfdGVtcGxhdGVNb2QuZmllbGREaWN0aW9uYXJ5W2ZpZWxkSWRdKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRlbXBHT2xkLnRyYW5zZm9ybShTbmFwLm1hdHJpeCgpLnRvVHJhbnNmb3JtU3RyaW5nKCkpO1xyXG4gICAgICBfdGVtcGxhdGVNb2Quc2hvd0ZpZWxkTGlzdEF0dHJpYnV0ZShmaWVsZExpc3QpO1xyXG4gICAgICBfdGVtcGxhdGVNb2QuYWRkVW5kb1JlZG9BY3QoXHJcbiAgICAgICAgQ09OU1RBTlRTLkdST1VQX0FUVFJfQ0hBTkdFX0FDVElPTixcclxuICAgICAgICBvbGREYXRhQXJyLFxyXG4gICAgICAgIG5ld0RhdGFBcnJcclxuICAgICAgKTtcclxuICAgICAgX3RlbXBsYXRlTW9kLmNoYW5nZUdyb3VwQm94RnJlZVRyYW5zZm9ybSh0ZW1wR09sZCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAZnVuY3Rpb24gdW5kb0FjdGlvblxyXG4gICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9UZW1wbGF0ZU1vZC5UZW1wbGF0ZU1vZCN1bmRvQWN0aW9uXHJcbiAgICogQGRlc2NyaXB0aW9uICBVbmRv66W8IOyymOumrO2VnOuLpC5cclxuICAgKlxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICB1bmRvQWN0aW9uKCkge1xyXG4gICAgdmFyIGlkeCA9IF90ZW1wbGF0ZU1vZC51bnJlZG9BY3Rpb25JZHgtLTtcclxuICAgIGlmIChpZHggPCAwKSB7XHJcbiAgICAgIF90ZW1wbGF0ZU1vZC51bnJlZG9BY3Rpb25JZHggPSAtMTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgX3RlbXBsYXRlTW9kLnJlbW92ZURyYWdPdmVyR3JvdXAoKTtcclxuICAgIHZhciBkYXRhID0gX3RlbXBsYXRlTW9kLnVucmVkb0FjdGlvbkRpY3RbaWR4XTtcclxuICAgIHN3aXRjaCAoZGF0YS5hY3Rpb24pIHtcclxuICAgICAgY2FzZSBDT05TVEFOVFMuQ1JFQVRFX0ZJRUxEX0FDVElPTjoge1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5yZW1vdmVGaWVsZChkYXRhLm9sZCk7XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLmhpZGVGaWVsZEF0dHJpYnV0ZSgpO1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5idWlsZEZpZWxkZm9ybWVyTGlzdCgpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIENPTlNUQU5UUy5SRU1PVkVfRklFTERfQUNUSU9OOlxyXG4gICAgICBjYXNlIENPTlNUQU5UUy5GSUVMRF9BVFRSX0NIQU5HRV9BQ1RJT046IHtcclxuICAgICAgICBfdGVtcGxhdGVNb2QucmVwbGFjZUZpZWxkU3RyaW5nRGF0YShkYXRhLm9sZCk7XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLmJ1aWxkRmllbGRmb3JtZXJMaXN0KCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgQ09OU1RBTlRTLkdST1VQX1JFTU9WRV9BQ1RJT046XHJcbiAgICAgIGNhc2UgQ09OU1RBTlRTLkdST1VQX0FUVFJfQ0hBTkdFX0FDVElPTjoge1xyXG4gICAgICAgIGRhdGEub2xkLmZvckVhY2goKG9sZERhdGEpID0+IHtcclxuICAgICAgICAgIF90ZW1wbGF0ZU1vZC5yZXBsYWNlRmllbGRTdHJpbmdEYXRhKG9sZERhdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC5idWlsZEZpZWxkZm9ybWVyTGlzdCgpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBjYXNlIENPTlNUQU5UUy5HUk9VUF9BVFRSX09XTkVSX0NIQU5HRV9BQ1RJT046IHtcclxuICAgICAgICBkYXRhLm9sZC5mb3JFYWNoKChvbGREYXRhKSA9PiB7XHJcbiAgICAgICAgICBfdGVtcGxhdGVNb2QucmVwbGFjZUZpZWxkU3RyaW5nRGF0YShvbGREYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBfdGVtcGxhdGVNb2QuYnVpbGRGaWVsZGZvcm1lckxpc3QoKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBmdW5jdGlvbiB1cGRhdGVGaWVsZFBvaW50XHJcbiAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1RlbXBsYXRlTW9kLlRlbXBsYXRlTW9kI3VwZGF0ZUZpZWxkUG9pbnRcclxuICAgKiBAZGVzY3JpcHRpb24gIO2VhOuTnOydmCBQREbsooztkZzrpbwg7JeF642w7J207Yq4IO2VnOuLpC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBmaWVsZEdyb3VwICBTVkfsnZggZ3JvdXAg7Jik67iM7KCd7Yq4XHJcbiAgICpcclxuICAgKiBAcmV0dXJuIHtCb29sZWFufSDrs4Dqsr3snbQg65CY7KeAIOyViuycvOuptCBmYWxzZSDrs4Dqsr3snbTrkJjrqbQgdHJ1ZVxyXG4gICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgKi9cclxuICB1cGRhdGVGaWVsZFBvaW50KGZpZWxkR3JvdXApIHtcclxuICAgIGxldCBjaGlsZFJlY3QgPSBmaWVsZEdyb3VwLnNlbGVjdChcInJlY3RcIik7XHJcbiAgICB2YXIgZmllbGQgPSBfdGVtcGxhdGVNb2QuZmllbGREaWN0aW9uYXJ5W2NoaWxkUmVjdC5hdHRyKFwiaWRcIildO1xyXG4gICAgbGV0IG9zdCA9IF90ZW1wbGF0ZU1vZC5jb21wdXRlUGFnZU9mZnNldChmaWVsZC5wYWdlTm8pO1xyXG4gICAgY29uc3Qgdmlld2VyMSA9IF90ZW1wbGF0ZU1vZC5vd25lck5vZGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIgI1wiICsgQ09OU1RBTlRTLlRFTVBMQVRFX1BERl9WSUVXRVJcclxuICAgICk7XHJcbiAgICBjb25zdCB2aWV3ZXJCb3VuZGluZ1JlY3QgPSB2aWV3ZXIxLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgdmFyIGRpZmZNYXRyaXggPSBfdGVtcGxhdGVNb2QubWFpbkNhbnZhcy50cmFuc2Zvcm0oKS5kaWZmTWF0cml4O1xyXG4gICAgdmFyIGNoaWxkUmVjdEJCb3ggPSBjaGlsZFJlY3QuZ2V0QkJveCgpO1xyXG4gICAgZmllbGQueCA9IGNoaWxkUmVjdEJCb3gueDtcclxuICAgIGZpZWxkLnkgPSBjaGlsZFJlY3RCQm94Lnk7XHJcbiAgICBmaWVsZC53aWR0aCA9IGNoaWxkUmVjdEJCb3gud2lkdGg7XHJcbiAgICBmaWVsZC5oZWlnaHQgPSBjaGlsZFJlY3RCQm94LmhlaWdodDtcclxuICAgIGZpZWxkLnBhZ2VObyA9IF90ZW1wbGF0ZU1vZC5nZXRQZGZQYWdlRnJvbVN2Z1BvcyhmaWVsZC54LCBmaWVsZC55KTtcclxuXHJcbiAgICBsZXQgcGFnZUJvcmRlcldpZHRoID0gX3RlbXBsYXRlTW9kLmdldFBhZ2VCb3JkZXJXaWR0aChmaWVsZC5wYWdlTm8pO1xyXG5cclxuICAgIGxldCB4ID1cclxuICAgICAgZGlmZk1hdHJpeC54KGNoaWxkUmVjdEJCb3gueCwgY2hpbGRSZWN0QkJveC55KSArXHJcbiAgICAgIHZpZXdlckJvdW5kaW5nUmVjdC5sZWZ0IC1cclxuICAgICAgb3N0LmxlZnQgLVxyXG4gICAgICBwYWdlQm9yZGVyV2lkdGgubGVmdDtcclxuICAgIGxldCB5ID1cclxuICAgICAgZGlmZk1hdHJpeC55KGNoaWxkUmVjdEJCb3gueCwgY2hpbGRSZWN0QkJveC55KSArXHJcbiAgICAgIHZpZXdlckJvdW5kaW5nUmVjdC50b3AgLVxyXG4gICAgICBvc3QudG9wIC1cclxuICAgICAgcGFnZUJvcmRlcldpZHRoLnRvcDtcclxuICAgIGNvbnN0IHZpZXdwb3J0ID0gX3RlbXBsYXRlTW9kLnBkZlZpZXdlci5fcGFnZXNbZmllbGQucGFnZU5vIC0gMV0udmlld3BvcnQ7XHJcbiAgICBsZXQgcGRmUG9pc2lvbiA9IHZpZXdwb3J0LmNvbnZlcnRUb1BkZlBvaW50KHgsIHkpO1xyXG4gICAgbGV0IHBkZlBvaXNpb24yID0gdmlld3BvcnQuY29udmVydFRvUGRmUG9pbnQoXHJcbiAgICAgIHggKyBjaGlsZFJlY3RCQm94LndpZHRoLFxyXG4gICAgICB5ICsgY2hpbGRSZWN0QkJveC5oZWlnaHRcclxuICAgICk7XHJcbiAgICBsZXQgaXNTaG93ID0gZmFsc2U7XHJcbiAgICBpZiAoZmllbGQucmVxdWlyZWQgPT09IFwidHJ1ZVwiKSB7XHJcbiAgICAgIGlzU2hvdyA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgVXRpbHMuc2hvd0FzdGVyaXNrRGl2KFxyXG4gICAgICBfdGVtcGxhdGVNb2Qub3duZXJOb2RlLFxyXG4gICAgICBjaGlsZFJlY3QuYXR0cihcImlkXCIpLFxyXG4gICAgICBpc1Nob3csXHJcbiAgICAgIGNoaWxkUmVjdEJCb3gueCxcclxuICAgICAgY2hpbGRSZWN0QkJveC55LFxyXG4gICAgICBjaGlsZFJlY3RCQm94LmhlaWdodFxyXG4gICAgKTtcclxuICAgIGxldCBvbGRQZGZYID0gTnVtYmVyKGZpZWxkLnBkZlgpO1xyXG4gICAgbGV0IG9sZFBkZlgyID0gTnVtYmVyKGZpZWxkLnBkZlgyKTtcclxuICAgIGxldCBvbGRQZGZZID0gTnVtYmVyKGZpZWxkLnBkZlkpO1xyXG4gICAgbGV0IG9sZFBkZlkyID0gTnVtYmVyKGZpZWxkLnBkZlkyKTtcclxuICAgIGlmIChcclxuICAgICAgcGRmUG9pc2lvblswXS50b0ZpeGVkKDIpID09PSBvbGRQZGZYLnRvRml4ZWQoMikgJiZcclxuICAgICAgcGRmUG9pc2lvblsxXS50b0ZpeGVkKDIpID09PSBvbGRQZGZZLnRvRml4ZWQoMikgJiZcclxuICAgICAgcGRmUG9pc2lvbjJbMF0udG9GaXhlZCgyKSA9PT0gb2xkUGRmWDIudG9GaXhlZCgyKSAmJlxyXG4gICAgICBwZGZQb2lzaW9uMlsxXS50b0ZpeGVkKDIpID09PSBvbGRQZGZZMi50b0ZpeGVkKDIpXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZmllbGQucGRmWCA9IHBkZlBvaXNpb25bMF07XHJcbiAgICBmaWVsZC5wZGZZID0gcGRmUG9pc2lvblsxXTtcclxuICAgIGZpZWxkLnBkZlgyID0gcGRmUG9pc2lvbjJbMF07XHJcbiAgICBmaWVsZC5wZGZZMiA9IHBkZlBvaXNpb24yWzFdO1xyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgYXBwZW5kRm9udEZhbWlseShmb250RmFtaWx5QXJyKSB7XHJcbiAgICBVdGlscy5hcHBlbmRGb250RmFtaWx5KGZvbnRGYW1pbHlBcnIpO1xyXG4gIH1cclxuXHJcbiAgYXBwZW5kU2lnblRhYlNob3dPcHQoc2lnblRhYlNob3dEZWZPcHRWYWwpIHtcclxuICAgIGlmIChzaWduVGFiU2hvd0RlZk9wdFZhbCkge1xyXG4gICAgICBpZiAodHlwZW9mIHNpZ25UYWJTaG93RGVmT3B0VmFsLnVzZURyYXdTaWduICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgX3RlbXBsYXRlTW9kLnVzZURyYXdTaWduID0gc2lnblRhYlNob3dEZWZPcHRWYWwudXNlRHJhd1NpZ247XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHR5cGVvZiBzaWduVGFiU2hvd0RlZk9wdFZhbC51c2VJbWFnZVNpZ24gIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICBfdGVtcGxhdGVNb2QudXNlSW1hZ2VTaWduID0gc2lnblRhYlNob3dEZWZPcHRWYWwudXNlSW1hZ2VTaWduO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0eXBlb2Ygc2lnblRhYlNob3dEZWZPcHRWYWwudXNlUmVnU2lnbiAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgIF90ZW1wbGF0ZU1vZC51c2VSZWdTaWduID0gc2lnblRhYlNob3dEZWZPcHRWYWwudXNlUmVnU2lnbjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCIvKiFcclxuICpcclxuICogVGhlIE1JVCBMaWNlbnNlIChNSVQpXHJcbiAqXHJcbiAqIENvcHlyaWdodCDCqSAyMDIxIFRhdWZpayBOdXJyb2htYW5cclxuICpcclxuICogPGh0dHBzOi8vZ2l0aHViLmNvbS90YXVmaWstbnVycm9obWFuL2NvbG9yLXBpY2tlcj5cclxuICpcclxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxyXG4gKiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSDigJxTb2Z0d2FyZeKAnSksIHRvIGRlYWxcclxuICogaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xyXG4gKiB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXHJcbiAqIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xyXG4gKiBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxyXG4gKlxyXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGxcclxuICogY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cclxuICpcclxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIOKAnEFTIElT4oCdLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXHJcbiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxyXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcclxuICogQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxyXG4gKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxyXG4gKiBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRVxyXG4gKiBTT0ZUV0FSRS5cclxuICpcclxuICovXHJcblxyXG4oZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xyXG4gICAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOiB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOiAoZ2xvYmFsID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsVGhpcyA6IGdsb2JhbCB8fCBzZWxmLCBnbG9iYWwuQ1AgPSBmYWN0b3J5KCkpO1xyXG59KSh0aGlzLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICB2YXIgaXNBcnJheSA9IGZ1bmN0aW9uIGlzQXJyYXkoeCkge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KHgpO1xyXG4gICAgfTtcclxuICAgIHZhciBpc0RlZmluZWQgPSBmdW5jdGlvbiBpc0RlZmluZWQoeCkge1xyXG4gICAgICAgIHJldHVybiAndW5kZWZpbmVkJyAhPT0gdHlwZW9mIHg7XHJcbiAgICB9O1xyXG4gICAgdmFyIGlzRnVuY3Rpb24gPSBmdW5jdGlvbiBpc0Z1bmN0aW9uKHgpIHtcclxuICAgICAgICByZXR1cm4gJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIHg7XHJcbiAgICB9O1xyXG4gICAgdmFyIGlzSW5zdGFuY2UgPSBmdW5jdGlvbiBpc0luc3RhbmNlKHgsIG9mKSB7XHJcbiAgICAgICAgcmV0dXJuIHggJiYgaXNTZXQob2YpICYmIHggaW5zdGFuY2VvZiBvZjtcclxuICAgIH07XHJcbiAgICB2YXIgaXNOdWxsID0gZnVuY3Rpb24gaXNOdWxsKHgpIHtcclxuICAgICAgICByZXR1cm4gbnVsbCA9PT0geDtcclxuICAgIH07XHJcbiAgICB2YXIgaXNOdW1iZXIgPSBmdW5jdGlvbiBpc051bWJlcih4KSB7XHJcbiAgICAgICAgcmV0dXJuICdudW1iZXInID09PSB0eXBlb2YgeDtcclxuICAgIH07XHJcbiAgICB2YXIgaXNOdW1lcmljID0gZnVuY3Rpb24gaXNOdW1lcmljKHgpIHtcclxuICAgICAgICByZXR1cm4gL14tPyg/OlxcZCouKT9cXGQrJC8udGVzdCh4ICsgXCJcIik7XHJcbiAgICB9O1xyXG4gICAgdmFyIGlzT2JqZWN0ID0gZnVuY3Rpb24gaXNPYmplY3QoeCwgaXNQbGFpbikge1xyXG4gICAgICAgIGlmIChpc1BsYWluID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgaXNQbGFpbiA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgnb2JqZWN0JyAhPT0gdHlwZW9mIHgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaXNQbGFpbiA/IGlzSW5zdGFuY2UoeCwgT2JqZWN0KSA6IHRydWU7XHJcbiAgICB9O1xyXG4gICAgdmFyIGlzU2V0ID0gZnVuY3Rpb24gaXNTZXQoeCkge1xyXG4gICAgICAgIHJldHVybiBpc0RlZmluZWQoeCkgJiYgIWlzTnVsbCh4KTtcclxuICAgIH07XHJcbiAgICB2YXIgaXNTdHJpbmcgPSBmdW5jdGlvbiBpc1N0cmluZyh4KSB7XHJcbiAgICAgICAgcmV0dXJuICdzdHJpbmcnID09PSB0eXBlb2YgeDtcclxuICAgIH07XHJcbiAgICB2YXIgZnJvbUpTT04gPSBmdW5jdGlvbiBmcm9tSlNPTih4KSB7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gbnVsbDtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB2YWx1ZSA9IEpTT04ucGFyc2UoeCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyB9XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfTtcclxuICAgIHZhciBmcm9tU3RhdGVzID0gZnVuY3Rpb24gZnJvbVN0YXRlcygpIHtcclxuICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgbG90ID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xyXG4gICAgICAgICAgICBsb3RbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduLmFwcGx5KE9iamVjdCwgW3t9XS5jb25jYXQobG90KSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGZyb21WYWx1ZSA9IGZ1bmN0aW9uIGZyb21WYWx1ZSh4KSB7XHJcbiAgICAgICAgaWYgKGlzQXJyYXkoeCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHgubWFwKGZ1bmN0aW9uICh2KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZnJvbVZhbHVlKHgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzT2JqZWN0KHgpKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGsgaW4geCkge1xyXG4gICAgICAgICAgICAgICAgeFtrXSA9IGZyb21WYWx1ZSh4W2tdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4geDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZhbHNlID09PSB4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnZmFsc2UnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobnVsbCA9PT0geCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ251bGwnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHJ1ZSA9PT0geCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ3RydWUnO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gXCJcIiArIHg7XHJcbiAgICB9O1xyXG4gICAgdmFyIHRvQ2FzZUNhbWVsID0gZnVuY3Rpb24gdG9DYXNlQ2FtZWwoeCkge1xyXG4gICAgICAgIHJldHVybiB4LnJlcGxhY2UoL1stXy5dKFxcdykvZywgZnVuY3Rpb24gKG0wLCBtMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdG9DYXNlVXBwZXIobTEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciB0b0Nhc2VVcHBlciA9IGZ1bmN0aW9uIHRvQ2FzZVVwcGVyKHgpIHtcclxuICAgICAgICByZXR1cm4geC50b1VwcGVyQ2FzZSgpO1xyXG4gICAgfTtcclxuICAgIHZhciB0b0NvdW50ID0gZnVuY3Rpb24gdG9Db3VudCh4KSB7XHJcbiAgICAgICAgcmV0dXJuIHgubGVuZ3RoO1xyXG4gICAgfTtcclxuICAgIHZhciB0b0VkZ2UgPSBmdW5jdGlvbiB0b0VkZ2UoeCwgZWRnZXMpIHtcclxuICAgICAgICBpZiAoaXNTZXQoZWRnZXNbMF0pICYmIHggPCBlZGdlc1swXSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZWRnZXNbMF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc1NldChlZGdlc1sxXSkgJiYgeCA+IGVkZ2VzWzFdKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlZGdlc1sxXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHg7XHJcbiAgICB9O1xyXG4gICAgdmFyIHRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTih4KSB7XHJcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHgpO1xyXG4gICAgfTtcclxuICAgIHZhciB0b051bWJlciA9IGZ1bmN0aW9uIHRvTnVtYmVyKHgsIGJhc2UpIHtcclxuICAgICAgICBpZiAoYmFzZSA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgIGJhc2UgPSAxMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJhc2UgPyBwYXJzZUludCh4LCBiYXNlKSA6IHBhcnNlRmxvYXQoeCk7XHJcbiAgICB9O1xyXG4gICAgdmFyIHRvT2JqZWN0Q291bnQgPSBmdW5jdGlvbiB0b09iamVjdENvdW50KHgpIHtcclxuICAgICAgICByZXR1cm4gdG9Db3VudCh0b09iamVjdEtleXMoeCkpO1xyXG4gICAgfTtcclxuICAgIHZhciB0b09iamVjdEtleXMgPSBmdW5jdGlvbiB0b09iamVjdEtleXMoeCkge1xyXG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh4KTtcclxuICAgIH07XHJcbiAgICB2YXIgdG9Sb3VuZCA9IGZ1bmN0aW9uIHRvUm91bmQoeCkge1xyXG4gICAgICAgIHJldHVybiBpc051bWJlcih4KSA/IE1hdGgucm91bmQoeCkgOiBudWxsO1xyXG4gICAgfTtcclxuICAgIHZhciB0b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKHgsIGJhc2UpIHtcclxuICAgICAgICBpZiAoYmFzZSA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgIGJhc2UgPSAxMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGlzTnVtYmVyKHgpID8geC50b1N0cmluZyhiYXNlKSA6IFwiXCIgKyB4O1xyXG4gICAgfTtcclxuICAgIHZhciB0b1ZhbHVlID0gZnVuY3Rpb24gdG9WYWx1ZSh4KSB7XHJcbiAgICAgICAgaWYgKGlzQXJyYXkoeCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHgubWFwKGZ1bmN0aW9uICh2KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9WYWx1ZSh2KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc051bWVyaWMoeCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRvTnVtYmVyKHgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNPYmplY3QoeCkpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgayBpbiB4KSB7XHJcbiAgICAgICAgICAgICAgICB4W2tdID0gdG9WYWx1ZSh4W2tdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4geDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCdmYWxzZScgPT09IHgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoJ251bGwnID09PSB4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoJ3RydWUnID09PSB4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geDtcclxuICAgIH07XHJcbiAgICB2YXIgRCA9IGRvY3VtZW50O1xyXG4gICAgdmFyIFcgPSB3aW5kb3c7XHJcbiAgICB2YXIgQiA9IEQuYm9keTtcclxuICAgIHZhciBSID0gRC5kb2N1bWVudEVsZW1lbnQ7XHJcbiAgICB2YXIgZ2V0QXR0cmlidXRlID0gZnVuY3Rpb24gZ2V0QXR0cmlidXRlKG5vZGUsIGF0dHJpYnV0ZSwgcGFyc2VWYWx1ZSkge1xyXG4gICAgICAgIGlmIChwYXJzZVZhbHVlID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgcGFyc2VWYWx1ZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghaGFzQXR0cmlidXRlKG5vZGUsIGF0dHJpYnV0ZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB2YWx1ZSA9IG5vZGUuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZSk7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlVmFsdWUgPyB0b1ZhbHVlKHZhbHVlKSA6IHZhbHVlO1xyXG4gICAgfTtcclxuICAgIHZhciBnZXREYXR1bSA9IGZ1bmN0aW9uIGdldERhdHVtKG5vZGUsIGRhdHVtLCBwYXJzZVZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHBhcnNlVmFsdWUgPT09IHZvaWQgMCkge1xyXG4gICAgICAgICAgICBwYXJzZVZhbHVlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHZhbHVlID0gZ2V0QXR0cmlidXRlKG5vZGUsICdkYXRhLScgKyBkYXR1bSwgcGFyc2VWYWx1ZSksXHJcbiAgICAgICAgICAgIHYgPSAodmFsdWUgKyBcIlwiKS50cmltKCk7XHJcbiAgICAgICAgaWYgKHBhcnNlVmFsdWUgJiYgdiAmJiAoJ1snID09PSB2WzBdICYmICddJyA9PT0gdi5zbGljZSgtMSkgfHwgJ3snID09PSB2WzBdICYmICd9JyA9PT0gdi5zbGljZSgtMSkpICYmIG51bGwgIT09ICh2ID0gZnJvbUpTT04odmFsdWUpKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfTtcclxuICAgIHZhciBnZXRQYXJlbnQgPSBmdW5jdGlvbiBnZXRQYXJlbnQobm9kZSkge1xyXG4gICAgICAgIHJldHVybiBub2RlLnBhcmVudE5vZGUgfHwgbnVsbDtcclxuICAgIH07XHJcbiAgICB2YXIgZ2V0U3RhdGUgPSBmdW5jdGlvbiBnZXRTdGF0ZShub2RlLCBzdGF0ZSkge1xyXG4gICAgICAgIHJldHVybiBoYXNTdGF0ZShub2RlLCBzdGF0ZSkgJiYgbm9kZVtzdGF0ZV0gfHwgbnVsbDtcclxuICAgIH07XHJcbiAgICB2YXIgZ2V0VGV4dCA9IGZ1bmN0aW9uIGdldFRleHQobm9kZSwgdHJpbSkge1xyXG4gICAgICAgIGlmICh0cmltID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgdHJpbSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBzdGF0ZSA9ICd0ZXh0Q29udGVudCc7XHJcbiAgICAgICAgaWYgKCFoYXNTdGF0ZShub2RlLCBzdGF0ZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY29udGVudCA9IG5vZGVbc3RhdGVdO1xyXG4gICAgICAgIGNvbnRlbnQgPSB0cmltID8gY29udGVudC50cmltKCkgOiBjb250ZW50O1xyXG4gICAgICAgIHJldHVybiBcIlwiICE9PSBjb250ZW50ID8gY29udGVudCA6IG51bGw7XHJcbiAgICB9O1xyXG4gICAgdmFyIGhhc0F0dHJpYnV0ZSA9IGZ1bmN0aW9uIGhhc0F0dHJpYnV0ZShub2RlLCBhdHRyaWJ1dGUpIHtcclxuICAgICAgICByZXR1cm4gbm9kZS5oYXNBdHRyaWJ1dGUoYXR0cmlidXRlKTtcclxuICAgIH07XHJcbiAgICB2YXIgaGFzU3RhdGUgPSBmdW5jdGlvbiBoYXNTdGF0ZShub2RlLCBzdGF0ZSkge1xyXG4gICAgICAgIHJldHVybiBzdGF0ZSBpbiBub2RlO1xyXG4gICAgfTtcclxuICAgIHZhciBpc1dpbmRvdyA9IGZ1bmN0aW9uIGlzV2luZG93KG5vZGUpIHtcclxuICAgICAgICByZXR1cm4gbm9kZSA9PT0gVztcclxuICAgIH07XHJcbiAgICB2YXIgbGV0QXR0cmlidXRlID0gZnVuY3Rpb24gbGV0QXR0cmlidXRlKG5vZGUsIGF0dHJpYnV0ZSkge1xyXG4gICAgICAgIHJldHVybiBub2RlLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGUpLCBub2RlO1xyXG4gICAgfTtcclxuICAgIHZhciBsZXRFbGVtZW50ID0gZnVuY3Rpb24gbGV0RWxlbWVudChub2RlKSB7XHJcbiAgICAgICAgdmFyIHBhcmVudCA9IGdldFBhcmVudChub2RlKTtcclxuICAgICAgICByZXR1cm4gbm9kZS5yZW1vdmUoKSwgcGFyZW50O1xyXG4gICAgfTtcclxuICAgIHZhciBzZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbiBzZXRBdHRyaWJ1dGUobm9kZSwgYXR0cmlidXRlLCB2YWx1ZSkge1xyXG4gICAgICAgIGlmICh0cnVlID09PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICB2YWx1ZSA9IGF0dHJpYnV0ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5vZGUuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZSwgZnJvbVZhbHVlKHZhbHVlKSksIG5vZGU7XHJcbiAgICB9O1xyXG4gICAgdmFyIHNldEF0dHJpYnV0ZXMgPSBmdW5jdGlvbiBzZXRBdHRyaWJ1dGVzKG5vZGUsIGF0dHJpYnV0ZXMpIHtcclxuICAgICAgICB2YXIgdmFsdWU7XHJcbiAgICAgICAgZm9yICh2YXIgYXR0cmlidXRlIGluIGF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgdmFsdWUgPSBhdHRyaWJ1dGVzW2F0dHJpYnV0ZV07XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSB8fCBcIlwiID09PSB2YWx1ZSB8fCAwID09PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgc2V0QXR0cmlidXRlKG5vZGUsIGF0dHJpYnV0ZSwgdmFsdWUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0QXR0cmlidXRlKG5vZGUsIGF0dHJpYnV0ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5vZGU7XHJcbiAgICB9O1xyXG4gICAgdmFyIHNldENoaWxkTGFzdCA9IGZ1bmN0aW9uIHNldENoaWxkTGFzdChwYXJlbnQsIG5vZGUpIHtcclxuICAgICAgICByZXR1cm4gcGFyZW50LmFwcGVuZENoaWxkKG5vZGUpLCBub2RlO1xyXG4gICAgfTtcclxuICAgIHZhciBzZXREYXR1bSA9IGZ1bmN0aW9uIHNldERhdHVtKG5vZGUsIGRhdHVtLCB2YWx1ZSkge1xyXG4gICAgICAgIGlmIChpc0FycmF5KHZhbHVlKSB8fCBpc09iamVjdCh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgdmFsdWUgPSB0b0pTT04odmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc2V0QXR0cmlidXRlKG5vZGUsICdkYXRhLScgKyBkYXR1bSwgdmFsdWUpO1xyXG4gICAgfTtcclxuICAgIHZhciBzZXRFbGVtZW50ID0gZnVuY3Rpb24gc2V0RWxlbWVudChub2RlLCBjb250ZW50LCBhdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgbm9kZSA9IGlzU3RyaW5nKG5vZGUpID8gRC5jcmVhdGVFbGVtZW50KG5vZGUpIDogbm9kZTtcclxuICAgICAgICBpZiAoaXNPYmplY3QoY29udGVudCkpIHtcclxuICAgICAgICAgICAgYXR0cmlidXRlcyA9IGNvbnRlbnQ7XHJcbiAgICAgICAgICAgIGNvbnRlbnQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzU3RyaW5nKGNvbnRlbnQpKSB7XHJcbiAgICAgICAgICAgIHNldEhUTUwobm9kZSwgY29udGVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc09iamVjdChhdHRyaWJ1dGVzKSkge1xyXG4gICAgICAgICAgICBzZXRBdHRyaWJ1dGVzKG5vZGUsIGF0dHJpYnV0ZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgIH07XHJcbiAgICB2YXIgc2V0SFRNTCA9IGZ1bmN0aW9uIHNldEhUTUwobm9kZSwgY29udGVudCwgdHJpbSkge1xyXG4gICAgICAgIGlmICh0cmltID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgdHJpbSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChudWxsID09PSBjb250ZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgc3RhdGUgPSAnaW5uZXJIVE1MJztcclxuICAgICAgICByZXR1cm4gaGFzU3RhdGUobm9kZSwgc3RhdGUpICYmIChub2RlW3N0YXRlXSA9IHRyaW0gPyBjb250ZW50LnRyaW0oKSA6IGNvbnRlbnQpLCBub2RlO1xyXG4gICAgfTtcclxuICAgIHZhciBzZXRTdGF0ZSA9IGZ1bmN0aW9uIHNldFN0YXRlKG5vZGUsIGtleSwgdmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gbm9kZVtrZXldID0gdmFsdWUsIG5vZGU7XHJcbiAgICB9O1xyXG4gICAgdmFyIHNldFN0eWxlID0gZnVuY3Rpb24gc2V0U3R5bGUobm9kZSwgc3R5bGUsIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKGlzTnVtYmVyKHZhbHVlKSkge1xyXG4gICAgICAgICAgICB2YWx1ZSArPSAncHgnO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbm9kZS5zdHlsZVt0b0Nhc2VDYW1lbChzdHlsZSldID0gZnJvbVZhbHVlKHZhbHVlKSwgbm9kZTtcclxuICAgIH07XHJcbiAgICB2YXIgc2V0VGV4dCA9IGZ1bmN0aW9uIHNldFRleHQobm9kZSwgY29udGVudCwgdHJpbSkge1xyXG4gICAgICAgIGlmICh0cmltID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgdHJpbSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChudWxsID09PSBjb250ZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgc3RhdGUgPSAndGV4dENvbnRlbnQnO1xyXG4gICAgICAgIHJldHVybiBoYXNTdGF0ZShub2RlLCBzdGF0ZSkgJiYgKG5vZGVbc3RhdGVdID0gdHJpbSA/IGNvbnRlbnQudHJpbSgpIDogY29udGVudCksIG5vZGU7XHJcbiAgICB9O1xyXG4gICAgdmFyIG9mZkV2ZW50ID0gZnVuY3Rpb24gb2ZmRXZlbnQobmFtZSwgbm9kZSwgdGhlbikge1xyXG4gICAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihuYW1lLCB0aGVuKTtcclxuICAgIH07XHJcbiAgICB2YXIgb2ZmRXZlbnREZWZhdWx0ID0gZnVuY3Rpb24gb2ZmRXZlbnREZWZhdWx0KGUpIHtcclxuICAgICAgICByZXR1cm4gZTsvLyAmJiBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9O1xyXG4gICAgdmFyIG9mZkV2ZW50cyA9IGZ1bmN0aW9uIG9mZkV2ZW50cyhuYW1lcywgbm9kZSwgdGhlbikge1xyXG4gICAgICAgIG5hbWVzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9mZkV2ZW50KG5hbWUsIG5vZGUsIHRoZW4pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHZhciBvbkV2ZW50ID0gZnVuY3Rpb24gb25FdmVudChuYW1lLCBub2RlLCB0aGVuLCBvcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCB8fCBvcHRpb25zID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICB2YXIgc3VwcG9ydHNQYXNzaXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3B0cyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ3Bhc3NpdmUnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1cHBvcnRzUGFzc2l2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRlc3RQYXNzaXZlXCIsIG51bGwsIG9wdHMpO1xyXG4gICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0ZXN0UGFzc2l2ZVwiLCBudWxsLCBvcHRzKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyB9XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSBzdXBwb3J0c1Bhc3NpdmUgPyB7IHBhc3NpdmU6IHRydWUgfSA6IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIobmFtZSwgdGhlbiwgb3B0aW9ucyk7XHJcbiAgICB9O1xyXG4gICAgdmFyIG9uRXZlbnRzID0gZnVuY3Rpb24gb25FdmVudHMobmFtZXMsIG5vZGUsIHRoZW4sIG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbmFtZXMuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gb25FdmVudChuYW1lLCBub2RlLCB0aGVuLCBvcHRpb25zKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gaG9vaygkKSB7XHJcbiAgICAgICAgdmFyIGhvb2tzID0ge307XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGZpcmUobmFtZSwgZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoIWlzU2V0KGhvb2tzW25hbWVdKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaG9va3NbbmFtZV0uZm9yRWFjaChmdW5jdGlvbiAodGhlbikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoZW4uYXBwbHkoJCwgZGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gJDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG9mZihuYW1lLCB0aGVuKSB7XHJcbiAgICAgICAgICAgIGlmICghaXNTZXQobmFtZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBob29rcyA9IHt9LCAkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpc1NldChob29rc1tuYW1lXSkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpc1NldCh0aGVuKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBfaiA9IGhvb2tzW25hbWVdLmxlbmd0aDsgaSA8IF9qOyArK2kpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoZW4gPT09IGhvb2tzW25hbWVdW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBob29rc1tuYW1lXS5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gLy8gQ2xlYW4tdXAgZW1wdHkgaG9vayhzKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgwID09PSBqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBob29rc1tuYW1lXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBob29rc1tuYW1lXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gJDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG9uKG5hbWUsIHRoZW4pIHtcclxuICAgICAgICAgICAgaWYgKCFpc1NldChob29rc1tuYW1lXSkpIHtcclxuICAgICAgICAgICAgICAgIGhvb2tzW25hbWVdID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlzU2V0KHRoZW4pKSB7XHJcbiAgICAgICAgICAgICAgICBob29rc1tuYW1lXS5wdXNoKHRoZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAkO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkLmhvb2tzID0gaG9va3M7XHJcbiAgICAgICAgJC5maXJlID0gZmlyZTtcclxuICAgICAgICAkLm9mZiA9IG9mZjtcclxuICAgICAgICAkLm9uID0gb247XHJcbiAgICAgICAgcmV0dXJuICQ7XHJcbiAgICB9XHJcbiAgICB2YXIgZ2V0QXhpcyA9IGZ1bmN0aW9uIGdldEF4aXMoZXZlbnQsIG5vZGUpIHtcclxuICAgICAgICB2YXIgdG91Y2hlcyA9IGV2ZW50LnRvdWNoZXMsXHJcbiAgICAgICAgICAgIHggPSB0b3VjaGVzID8gdG91Y2hlc1swXS5jbGllbnRYIDogZXZlbnQuY2xpZW50WCxcclxuICAgICAgICAgICAgeSA9IHRvdWNoZXMgPyB0b3VjaGVzWzBdLmNsaWVudFkgOiBldmVudC5jbGllbnRZO1xyXG4gICAgICAgIGlmIChub2RlKSB7XHJcbiAgICAgICAgICAgIHZhciByZWN0ID0gZ2V0UmVjdChub2RlKTtcclxuICAgICAgICAgICAgcmV0dXJuIFt4IC0gcmVjdFswXSwgeSAtIHJlY3RbMV0sIHJlY3RbMF0sIHJlY3RbMV1dO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW3gsIHldO1xyXG4gICAgfTtcclxuICAgIHZhciBnZXRSZWN0ID0gZnVuY3Rpb24gZ2V0UmVjdChub2RlKSB7XHJcbiAgICAgICAgdmFyIGgsIHJlY3QsIHcsIHgsIHksIFgsIFk7XHJcbiAgICAgICAgaWYgKGlzV2luZG93KG5vZGUpKSB7XHJcbiAgICAgICAgICAgIHggPSBub2RlLnBhZ2VYT2Zmc2V0IHx8IFIuc2Nyb2xsTGVmdCB8fCBCLnNjcm9sbExlZnQ7XHJcbiAgICAgICAgICAgIHkgPSBub2RlLnBhZ2VZT2Zmc2V0IHx8IFIuc2Nyb2xsVG9wIHx8IEIuc2Nyb2xsVG9wO1xyXG4gICAgICAgICAgICB3ID0gbm9kZS5pbm5lcldpZHRoO1xyXG4gICAgICAgICAgICBoID0gbm9kZS5pbm5lckhlaWdodDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZWN0ID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgeCA9IHJlY3QubGVmdDtcclxuICAgICAgICAgICAgeSA9IHJlY3QudG9wO1xyXG4gICAgICAgICAgICB3ID0gcmVjdC53aWR0aDtcclxuICAgICAgICAgICAgaCA9IHJlY3QuaGVpZ2h0O1xyXG4gICAgICAgICAgICBYID0gcmVjdC5yaWdodDtcclxuICAgICAgICAgICAgWSA9IHJlY3QuYm90dG9tO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW3gsIHksIHcsIGgsIFgsIFldO1xyXG4gICAgfTtcclxuICAgIGxldCBuYW1lID0gJ0NQJyxcclxuICAgICAgICBkZWxheSA9IFcuc2V0VGltZW91dCxcclxuICAgICAgICBoZXggPSAnSEVYJztcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRDbG9zZXN0KGEsIGIpIHtcclxuICAgICAgICBpZiAoYSA9PT0gYikge1xyXG4gICAgICAgICAgICByZXR1cm4gYTtcclxuICAgICAgICB9XHJcbiAgICAgICAgd2hpbGUgKChhID0gYS5wYXJlbnRFbGVtZW50KSAmJiBhICE9PSBiKTtcclxuICAgICAgICByZXR1cm4gYTtcclxuICAgIH0gLy8gQ29udmVydCBjdXJzb3IgcG9zaXRpb24gdG8gUkdCQVxyXG4gICAgZnVuY3Rpb24gUDJSR0IoYSkge1xyXG4gICAgICAgIGxldCBoID0gK2FbMF0sXHJcbiAgICAgICAgICAgIHMgPSArYVsxXSxcclxuICAgICAgICAgICAgdiA9ICthWzJdLFxyXG4gICAgICAgICAgICByLFxyXG4gICAgICAgICAgICBnLFxyXG4gICAgICAgICAgICBiLFxyXG4gICAgICAgICAgICBpLFxyXG4gICAgICAgICAgICBmLFxyXG4gICAgICAgICAgICBwLFxyXG4gICAgICAgICAgICBxLFxyXG4gICAgICAgICAgICB0O1xyXG4gICAgICAgIGkgPSBNYXRoLmZsb29yKGggKiA2KTtcclxuICAgICAgICBmID0gaCAqIDYgLSBpO1xyXG4gICAgICAgIHAgPSB2ICogKDEgLSBzKTtcclxuICAgICAgICBxID0gdiAqICgxIC0gZiAqIHMpO1xyXG4gICAgICAgIHQgPSB2ICogKDEgLSAoMSAtIGYpICogcyk7XHJcbiAgICAgICAgaSA9IGkgfHwgMDtcclxuICAgICAgICBxID0gcSB8fCAwO1xyXG4gICAgICAgIHQgPSB0IHx8IDA7XHJcbiAgICAgICAgc3dpdGNoIChpICUgNikge1xyXG4gICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICByID0gdiwgZyA9IHQsIGIgPSBwO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgIHIgPSBxLCBnID0gdiwgYiA9IHA7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgciA9IHAsIGcgPSB2LCBiID0gdDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICByID0gcCwgZyA9IHEsIGIgPSB2O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgIHIgPSB0LCBnID0gcCwgYiA9IHY7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgciA9IHYsIGcgPSBwLCBiID0gcTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW3RvUm91bmQociAqIDI1NSksIHRvUm91bmQoZyAqIDI1NSksIHRvUm91bmQoYiAqIDI1NSksIGlzU2V0KGFbM10pID8gK2FbM10gOiAxXTtcclxuICAgIH0gLy8gQ29udmVydCBSR0JBIHRvIEhTVkFcclxuICAgIGZ1bmN0aW9uIFJHQjJIU1YoYSkge1xyXG4gICAgICAgIGxldCByID0gK2FbMF0gLyAyNTUsXHJcbiAgICAgICAgICAgIGcgPSArYVsxXSAvIDI1NSxcclxuICAgICAgICAgICAgYiA9ICthWzJdIC8gMjU1LFxyXG4gICAgICAgICAgICBtYXggPSBNYXRoLm1heChyLCBnLCBiKSxcclxuICAgICAgICAgICAgbWluID0gTWF0aC5taW4ociwgZywgYiksXHJcbiAgICAgICAgICAgIGgsXHJcbiAgICAgICAgICAgIHMsXHJcbiAgICAgICAgICAgIHYgPSBtYXgsXHJcbiAgICAgICAgICAgIGQgPSBtYXggLSBtaW47XHJcbiAgICAgICAgcyA9IG1heCA9PT0gMCA/IDAgOiBkIC8gbWF4O1xyXG4gICAgICAgIGlmIChtYXggPT09IG1pbikge1xyXG4gICAgICAgICAgICBoID0gMDsgLy8gQWNocm9tYXRpY1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAobWF4KSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIHI6XHJcbiAgICAgICAgICAgICAgICAgICAgaCA9IChnIC0gYikgLyBkICsgKGcgPCBiID8gNiA6IDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBnOlxyXG4gICAgICAgICAgICAgICAgICAgIGggPSAoYiAtIHIpIC8gZCArIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIGI6XHJcbiAgICAgICAgICAgICAgICAgICAgaCA9IChyIC0gZykgLyBkICsgNDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBoIC89IDY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbaCwgcywgdiwgaXNTZXQoYVszXSkgPyArYVszXSA6IDFdO1xyXG4gICAgfVxyXG4gICAgY29uc3QgRVZFTlRTX0RPV04gPSBbJ3RvdWNoc3RhcnQnLCAnbW91c2Vkb3duJ107XHJcbiAgICBjb25zdCBFVkVOVFNfTU9WRSA9IFsndG91Y2htb3ZlJywgJ21vdXNlbW92ZSddO1xyXG4gICAgY29uc3QgRVZFTlRTX1JFU0laRSA9IFsnb3JpZW50YXRpb25jaGFuZ2UnLCAncmVzaXplJ107XHJcbiAgICBjb25zdCBFVkVOVFNfVVAgPSBbJ3RvdWNoZW5kJywgJ21vdXNldXAnXTtcclxuXHJcbiAgICBmdW5jdGlvbiBDUChzb3VyY2UsIHN0YXRlID0ge30pIHtcclxuICAgICAgICBpZiAoIUQpIHtcclxuICAgICAgICAgICAgRCA9IGRvY3VtZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIVcpIHtcclxuICAgICAgICAgICAgVyA9IHdpbmRvdztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFCKSB7XHJcbiAgICAgICAgICAgIEIgPSBELmJvZHk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghUikge1xyXG4gICAgICAgICAgICBSID0gRC5kb2N1bWVudEVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghc291cmNlKSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgJCA9IHRoaXM7IC8vIFJldHVybiBuZXcgaW5zdGFuY2UgaWYgYENQYCB3YXMgY2FsbGVkIHdpdGhvdXQgdGhlIGBuZXdgIG9wZXJhdG9yXHJcbiAgICAgICAgaWYgKCFpc0luc3RhbmNlKCQsIENQKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENQKHNvdXJjZSwgc3RhdGUpO1xyXG4gICAgICAgIH0gLy8gQWxyZWFkeSBpbnN0YW50aWF0ZWQsIHNraXAhXHJcbiAgICAgICAgaWYgKHNvdXJjZVtuYW1lXSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCB7XHJcbiAgICAgICAgICAgIGZpcmUsXHJcbiAgICAgICAgICAgIGhvb2tzXHJcbiAgICAgICAgfSA9IGhvb2soJCk7XHJcbiAgICAgICAgJC5zdGF0ZSA9IHN0YXRlID0gZnJvbVN0YXRlcyhDUC5zdGF0ZSwgaXNTdHJpbmcoc3RhdGUpID8ge1xyXG4gICAgICAgICAgICBjb2xvcjogc3RhdGVcclxuICAgICAgICB9IDogc3RhdGUgfHwge30pO1xyXG4gICAgICAgICQuc291cmNlID0gc291cmNlO1xyXG4gICAgICAgICQudmlzaWJsZSA9IGZhbHNlOyAvLyBTdG9yZSBjdXJyZW50IGluc3RhbmNlIHRvIGBDUC5pbnN0YW5jZXNgXHJcbiAgICAgICAgQ1AuaW5zdGFuY2VzW3NvdXJjZS5pZCB8fCBzb3VyY2UubmFtZSB8fCB0b09iamVjdENvdW50KENQLmluc3RhbmNlcyldID0gJDsgLy8gTWFyayBjdXJyZW50IERPTSBhcyBhY3RpdmUgY29sb3IgcGlja2VyIHRvIHByZXZlbnQgZHVwbGljYXRlIGluc3RhbmNlXHJcbiAgICAgICAgc291cmNlW25hbWVdID0gMTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gdGhlVmFsdWUoZnJvbSkge1xyXG4gICAgICAgICAgICBsZXQgdG8gPSBDUFtpc0Z1bmN0aW9uKENQW3N0YXRlLmNvbG9yXSkgPyBzdGF0ZS5jb2xvciA6IGhleF0sXHJcbiAgICAgICAgICAgICAgICB0aGVDb2xvcjsgLy8gR2V0IHZhbHVlIGZyb20gYGRhdGEtY29sb3JgIGF0dHJpYnV0ZVxyXG4gICAgICAgICAgICBpZiAodGhlQ29sb3IgPSBnZXREYXR1bShzb3VyY2UsICdjb2xvcicpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNTZXQoZnJvbSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0RGF0dW0oc291cmNlLCAnY29sb3InLCB0byhmcm9tKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdG8odGhlQ29sb3IpO1xyXG4gICAgICAgICAgICB9IC8vIEdldCB2YWx1ZSBmcm9tIGB2YWx1ZWAgYXR0cmlidXRlXHJcbiAgICAgICAgICAgIGlmICh0aGVDb2xvciA9IGdldFN0YXRlKHNvdXJjZSwgJ3ZhbHVlJykpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpc1NldChmcm9tKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRTdGF0ZShzb3VyY2UsICd2YWx1ZScsIHRvKGZyb20pKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB0byh0aGVDb2xvcik7XHJcbiAgICAgICAgICAgIH0gLy8gR2V0IHZhbHVlIGZyb20gY29udGVudFxyXG4gICAgICAgICAgICBpZiAodGhlQ29sb3IgPSBnZXRUZXh0KHNvdXJjZSkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpc1NldChmcm9tKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRUZXh0KHNvdXJjZSwgdG8oZnJvbSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvKHRoZUNvbG9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaXNTZXQoZnJvbSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjsgLy8gRG8gbm90aGluZ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBbMCwgMCwgMCwgMV07IC8vIERlZmF1bHQgdG8gYmxhY2tcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGNsYXNzTmFtZSA9IHN0YXRlWydjbGFzcyddLFxyXG4gICAgICAgICAgICBkb0VudGVyLFxyXG4gICAgICAgICAgICBkb0V4aXQsXHJcbiAgICAgICAgICAgIGRvRml0LFxyXG4gICAgICAgICAgICBkb1Jlc2l6ZSxcclxuICAgICAgICAgICAgdGhlQ29sb3IgPSB0aGVWYWx1ZSgpLFxyXG4gICAgICAgICAgICB0aGVEYXRhID0gUkdCMkhTVih0aGVDb2xvciksXHJcbiAgICAgICAgICAgIHNlbGYgPSBzZXRFbGVtZW50KCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgICAnY2xhc3MnOiBjbGFzc05hbWVcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIEMgPSBzZXRFbGVtZW50KCdkaXYnKSxcclxuICAgICAgICAgICAgU1YgPSBzZXRFbGVtZW50KCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgICAnY2xhc3MnOiBjbGFzc05hbWUgKyAnOnN2J1xyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgSCA9IHNldEVsZW1lbnQoJ2RpdicsIHtcclxuICAgICAgICAgICAgICAgICdjbGFzcyc6IGNsYXNzTmFtZSArICc6aCdcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIEEgPSBzZXRFbGVtZW50KCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgICAnY2xhc3MnOiBjbGFzc05hbWUgKyAnOmEnXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBTVkNvbG9yID0gc2V0RWxlbWVudCgnZGl2JyksXHJcbiAgICAgICAgICAgIFNWU2F0dXJhdGlvbiA9IHNldEVsZW1lbnQoJ2RpdicpLFxyXG4gICAgICAgICAgICBTVlZhbHVlID0gc2V0RWxlbWVudCgnZGl2JyksXHJcbiAgICAgICAgICAgIFNWQ3Vyc29yID0gc2V0RWxlbWVudCgnaScpLFxyXG4gICAgICAgICAgICBIQ29sb3IgPSBzZXRFbGVtZW50KCdkaXYnKSxcclxuICAgICAgICAgICAgSEN1cnNvciA9IHNldEVsZW1lbnQoJ2knKSxcclxuICAgICAgICAgICAgQUNvbG9yID0gc2V0RWxlbWVudCgnZGl2JyksXHJcbiAgICAgICAgICAgIEFQYXR0ZXJuID0gc2V0RWxlbWVudCgnZGl2JyksXHJcbiAgICAgICAgICAgIEFDdXJzb3IgPSBzZXRFbGVtZW50KCdpJyksXHJcbiAgICAgICAgICAgIFNWU3RhcnRpbmcgPSAwLFxyXG4gICAgICAgICAgICBIU3RhcnRpbmcgPSAwLFxyXG4gICAgICAgICAgICBBU3RhcnRpbmcgPSAwLFxyXG4gICAgICAgICAgICBTVkRyYWdnaW5nID0gMCxcclxuICAgICAgICAgICAgSERyYWdnaW5nID0gMCxcclxuICAgICAgICAgICAgQURyYWdnaW5nID0gMDtcclxuICAgICAgICBzZXRDaGlsZExhc3Qoc2VsZiwgQyk7XHJcbiAgICAgICAgc2V0Q2hpbGRMYXN0KEMsIFNWKTtcclxuICAgICAgICBzZXRDaGlsZExhc3QoQywgSCk7XHJcbiAgICAgICAgc2V0Q2hpbGRMYXN0KEMsIEEpO1xyXG4gICAgICAgIHNldENoaWxkTGFzdChTViwgU1ZDb2xvcik7XHJcbiAgICAgICAgc2V0Q2hpbGRMYXN0KFNWLCBTVlNhdHVyYXRpb24pO1xyXG4gICAgICAgIHNldENoaWxkTGFzdChTViwgU1ZWYWx1ZSk7XHJcbiAgICAgICAgc2V0Q2hpbGRMYXN0KFNWLCBTVkN1cnNvcik7XHJcbiAgICAgICAgc2V0Q2hpbGRMYXN0KEgsIEhDb2xvcik7XHJcbiAgICAgICAgc2V0Q2hpbGRMYXN0KEgsIEhDdXJzb3IpO1xyXG4gICAgICAgIHNldENoaWxkTGFzdChBLCBBQ29sb3IpO1xyXG4gICAgICAgIHNldENoaWxkTGFzdChBLCBBUGF0dGVybik7XHJcbiAgICAgICAgc2V0Q2hpbGRMYXN0KEEsIEFDdXJzb3IpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBkb0FwcGx5KGlzRmlyc3QsIHRvUGFyZW50KSB7XHJcbiAgICAgICAgICAgIC8vIFJlZnJlc2ggZGF0YVxyXG4gICAgICAgICAgICB0aGVEYXRhID0gUkdCMkhTVih0aGVDb2xvciA9IHRoZVZhbHVlKCkpO1xyXG4gICAgICAgICAgICBpZiAoIWlzRmlyc3QpIHtcclxuICAgICAgICAgICAgICAgIHNldENoaWxkTGFzdCh0b1BhcmVudCB8fCBzdGF0ZS5wYXJlbnQgfHwgQiwgc2VsZik7XHJcbiAgICAgICAgICAgICAgICAkLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRvRW50ZXIgPSB0b1BhcmVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZG9BcHBseSgwLCB0b1BhcmVudCksIGZpcmUoJ2VudGVyJywgdGhlQ29sb3IpLCAkO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBkb0V4aXQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZ2V0UGFyZW50KHNlbGYpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0RWxlbWVudChzZWxmKTtcclxuICAgICAgICAgICAgICAgICAgICAkLmN1cnJlbnQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICQudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgb2ZmRXZlbnRzKEVWRU5UU19ET1dOLCBTViwgZG9Eb3duU1YpO1xyXG4gICAgICAgICAgICAgICAgb2ZmRXZlbnRzKEVWRU5UU19ET1dOLCBILCBkb0Rvd25IKTtcclxuICAgICAgICAgICAgICAgIG9mZkV2ZW50cyhFVkVOVFNfRE9XTiwgQSwgZG9Eb3duQSk7XHJcbiAgICAgICAgICAgICAgICBvZmZFdmVudHMoRVZFTlRTX01PVkUsIEQsIGRvTW92ZSk7XHJcbiAgICAgICAgICAgICAgICBvZmZFdmVudHMoRVZFTlRTX1VQLCBELCBkb1N0b3ApO1xyXG4gICAgICAgICAgICAgICAgb2ZmRXZlbnRzKEVWRU5UU19SRVNJWkUsIFcsIGRvUmVzaXplKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmaXJlKCdleGl0JywgdGhlQ29sb3IpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBkb0ZpdCA9IHRvID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCByb290UmVjdCA9IGdldFJlY3QoUiksXHJcbiAgICAgICAgICAgICAgICAgICAgc291cmNlUmVjdCA9IGdldFJlY3Qoc291cmNlKSxcclxuICAgICAgICAgICAgICAgICAgICB3aW5SZWN0ID0gZ2V0UmVjdChXKSxcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxCYXJIZWlnaHQgPSB3aW5SZWN0WzNdIC0gUi5jbGllbnRIZWlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSG9yaXpvbnRhbCBzY3JvbGwgYmFyXHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsQmFyV2lkdGggPSB3aW5SZWN0WzJdIC0gcm9vdFJlY3RbMl0sXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVmVydGljYWwgc2Nyb2xsIGJhclxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGZSZWN0ID0gZ2V0UmVjdChzZWxmKSxcclxuICAgICAgICAgICAgICAgICAgICBzZWxmSGVpZ2h0ID0gc2VsZlJlY3RbM10sXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZldpZHRoID0gc2VsZlJlY3RbMl0sXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZkxlZnQgPSBzb3VyY2VSZWN0WzBdICsgd2luUmVjdFswXSxcclxuICAgICAgICAgICAgICAgICAgICBzZWxmVG9wID0gc291cmNlUmVjdFsxXSArIHdpblJlY3RbMV0gKyBzb3VyY2VSZWN0WzNdOyAvLyBEcm9wIVxyXG4gICAgICAgICAgICAgICAgaWYgKGlzT2JqZWN0KHRvKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzU2V0KHRvWzBdKSAmJiAoc2VsZkxlZnQgPSB0b1swXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNTZXQodG9bMV0pICYmIChzZWxmVG9wID0gdG9bMV0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbWluWCA9IHdpblJlY3RbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pblkgPSB3aW5SZWN0WzFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhYID0gd2luUmVjdFswXSArIHdpblJlY3RbMl0gLSBzZWxmV2lkdGggLSBzY3JvbGxCYXJXaWR0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4WSA9IHdpblJlY3RbMV0gKyB3aW5SZWN0WzNdIC0gc2VsZkhlaWdodCAtIHNjcm9sbEJhckhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmTGVmdCA9IHRvRWRnZShzZWxmTGVmdCwgW21pblgsIG1heFhdKSA+PiAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGZUb3AgPSB0b0VkZ2Uoc2VsZlRvcCwgW21pblksIG1heFldKSA+PiAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2V0U3R5bGUoc2VsZiwgJ2xlZnQnLCBzZWxmTGVmdCk7XHJcbiAgICAgICAgICAgICAgICBzZXRTdHlsZShzZWxmLCAndG9wJywgc2VsZlRvcCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlyZSgnZml0JywgdGhlQ29sb3IpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBkb1Jlc2l6ZSA9ICgpID0+IGRvRml0KCk7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBkb0Rvd25BKGUpIHtcclxuICAgICAgICAgICAgICAgICQuY3VycmVudCA9IEE7XHJcbiAgICAgICAgICAgICAgICBBU3RhcnRpbmcgPSBBRHJhZ2dpbmcgPSAxO1xyXG4gICAgICAgICAgICAgICAgZG9Nb3ZlKGUpO1xyXG4gICAgICAgICAgICAgICAgb2ZmRXZlbnREZWZhdWx0KGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBkb0Rvd25IKGUpIHtcclxuICAgICAgICAgICAgICAgICQuY3VycmVudCA9IEg7XHJcbiAgICAgICAgICAgICAgICBIU3RhcnRpbmcgPSBIRHJhZ2dpbmcgPSAxO1xyXG4gICAgICAgICAgICAgICAgZG9Nb3ZlKGUpO1xyXG4gICAgICAgICAgICAgICAgb2ZmRXZlbnREZWZhdWx0KGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBkb0Rvd25TVihlKSB7XHJcbiAgICAgICAgICAgICAgICAkLmN1cnJlbnQgPSBTVjtcclxuICAgICAgICAgICAgICAgIFNWU3RhcnRpbmcgPSBTVkRyYWdnaW5nID0gMTtcclxuICAgICAgICAgICAgICAgIGRvTW92ZShlKTtcclxuICAgICAgICAgICAgICAgIG9mZkV2ZW50RGVmYXVsdChlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZG9Nb3ZlKGUpIHtcclxuICAgICAgICAgICAgICAgIFNWRHJhZ2dpbmcgJiYgZG9TZXRTVkN1cnNvcihlKTtcclxuICAgICAgICAgICAgICAgIEhEcmFnZ2luZyAmJiBkb1NldEhDdXJzb3IoZSk7XHJcbiAgICAgICAgICAgICAgICBBRHJhZ2dpbmcgJiYgZG9TZXRBQ3Vyc29yKGUpO1xyXG4gICAgICAgICAgICAgICAgdGhlQ29sb3IgPSBQMlJHQih0aGVEYXRhKTtcclxuICAgICAgICAgICAgICAgIGlmIChTVkRyYWdnaW5nIHx8IEhEcmFnZ2luZyB8fCBBRHJhZ2dpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaXJlKFNWU3RhcnRpbmcgfHwgSFN0YXJ0aW5nIHx8IEFTdGFydGluZyA/ICdzdGFydCcgOiAnZHJhZycsIHRoZUNvbG9yKTtcclxuICAgICAgICAgICAgICAgICAgICBmaXJlKCdjaGFuZ2UnLCB0aGVDb2xvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBTVlN0YXJ0aW5nID0gSFN0YXJ0aW5nID0gQVN0YXJ0aW5nID0gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZG9TZXRDb2xvcigpIHtcclxuICAgICAgICAgICAgICAgIGRvU2V0Q3Vyc29yKHRoZURhdGEpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGEgPSBQMlJHQih0aGVEYXRhKSxcclxuICAgICAgICAgICAgICAgICAgICBiID0gUDJSR0IoW3RoZURhdGFbMF0sIDEsIDFdKTtcclxuICAgICAgICAgICAgICAgIHNldFN0eWxlKFNWQ29sb3IsICdiYWNrZ3JvdW5kLWNvbG9yJywgJ3JnYignICsgYlswXSArICcsJyArIGJbMV0gKyAnLCcgKyBiWzJdICsgJyknKTtcclxuICAgICAgICAgICAgICAgIHNldFN0eWxlKEFDb2xvciwgJ2JhY2tncm91bmQtaW1hZ2UnLCAnbGluZWFyLWdyYWRpZW50KHJnYignICsgYVswXSArICcsJyArIGFbMV0gKyAnLCcgKyBhWzJdICsgJyksdHJhbnNwYXJlbnQpJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGRvU2V0Q3Vyc29yKHgpIHtcclxuICAgICAgICAgICAgICAgIGlzU2V0KHhbMV0pICYmIHNldFN0eWxlKFNWQ3Vyc29yLCAncmlnaHQnLCBTVldpZHRoIC0gU1ZXaWR0aEN1cnNvciAvIDIgLSBTVldpZHRoICogK3hbMV0pO1xyXG4gICAgICAgICAgICAgICAgaXNTZXQoeFsyXSkgJiYgc2V0U3R5bGUoU1ZDdXJzb3IsICd0b3AnLCBTVkhlaWdodCAtIFNWSGVpZ2h0Q3Vyc29yIC8gMiAtIFNWSGVpZ2h0ICogK3hbMl0pO1xyXG4gICAgICAgICAgICAgICAgaXNTZXQoeFswXSkgJiYgc2V0U3R5bGUoSEN1cnNvciwgJ3RvcCcsIEhIZWlnaHQgLSBISGVpZ2h0Q3Vyc29yIC8gMiAtIEhIZWlnaHQgKiAreFswXSk7XHJcbiAgICAgICAgICAgICAgICBpc1NldCh4WzNdKSAmJiBzZXRTdHlsZShBQ3Vyc29yLCAndG9wJywgQUhlaWdodCAtIEFIZWlnaHRDdXJzb3IgLyAyIC0gQUhlaWdodCAqICt4WzNdKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZG9TZXRBQ3Vyc29yKGUpIHtcclxuICAgICAgICAgICAgICAgIHRoZURhdGFbM10gPSAoQUhlaWdodCAtIHRvRWRnZShnZXRBeGlzKGUsIEEpWzFdLCBbMCwgQUhlaWdodF0pKSAvIEFIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBkb1NldENvbG9yKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGRvU2V0SEN1cnNvcihlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGVEYXRhWzBdID0gKEhIZWlnaHQgLSB0b0VkZ2UoZ2V0QXhpcyhlLCBIKVsxXSwgWzAsIEhIZWlnaHRdKSkgLyBISGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgZG9TZXRDb2xvcigpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBkb1NldFNWQ3Vyc29yKGUpIHtcclxuICAgICAgICAgICAgICAgIGxldCBTVlBvaW50ID0gZ2V0QXhpcyhlLCBTViksXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9IHRvRWRnZShTVlBvaW50WzBdLCBbMCwgU1ZXaWR0aF0pLFxyXG4gICAgICAgICAgICAgICAgICAgIHkgPSB0b0VkZ2UoU1ZQb2ludFsxXSwgWzAsIFNWSGVpZ2h0XSk7XHJcbiAgICAgICAgICAgICAgICB0aGVEYXRhWzFdID0gMSAtIChTVldpZHRoIC0geCkgLyBTVldpZHRoO1xyXG4gICAgICAgICAgICAgICAgdGhlRGF0YVsyXSA9IChTVkhlaWdodCAtIHkpIC8gU1ZIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBkb1NldENvbG9yKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGRvU3RvcChlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGVDb2xvciA9IFAyUkdCKHRoZURhdGEpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHQgPSBlLnRhcmdldCxcclxuICAgICAgICAgICAgICAgICAgICBpc1NvdXJjZSA9IHNvdXJjZSA9PT0gZ2V0Q2xvc2VzdCh0LCBzb3VyY2UpLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzU2VsZiA9IHNlbGYgPT09IGdldENsb3Nlc3QodCwgc2VsZik7XHJcbiAgICAgICAgICAgICAgICAkLmN1cnJlbnQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc1NvdXJjZSAmJiAhaXNTZWxmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhvb2tzLmJsdXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlyZSgnYmx1cicsIHRoZUNvbG9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDbGljayBvdXRzaWRlIHRoZSBzb3VyY2Ugb3IgcGlja2VyIGVsZW1lbnQgdG8gZXhpdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoU1ZEcmFnZ2luZyB8fCBIRHJhZ2dpbmcgfHwgQURyYWdnaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRQYXJlbnQoc2VsZikgJiYgZG9FeGl0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1NlbGYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFNWRHJhZ2dpbmcgfHwgSERyYWdnaW5nIHx8IEFEcmFnZ2luZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZSgnc3RvcCcsIHRoZUNvbG9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFNWRHJhZ2dpbmcgPSBIRHJhZ2dpbmcgPSBBRHJhZ2dpbmcgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBTVlJlY3QgPSBnZXRSZWN0KFNWKSxcclxuICAgICAgICAgICAgICAgIFNWUmVjdEN1cnNvciA9IGdldFJlY3QoU1ZDdXJzb3IpLFxyXG4gICAgICAgICAgICAgICAgSFJlY3QgPSBnZXRSZWN0KEgpLFxyXG4gICAgICAgICAgICAgICAgSFJlY3RDdXJzb3IgPSBnZXRSZWN0KEhDdXJzb3IpLFxyXG4gICAgICAgICAgICAgICAgQVJlY3QgPSBnZXRSZWN0KEEpLFxyXG4gICAgICAgICAgICAgICAgQVJlY3RDdXJzb3IgPSBnZXRSZWN0KEFDdXJzb3IpLFxyXG4gICAgICAgICAgICAgICAgU1ZIZWlnaHQgPSBTVlJlY3RbM10sXHJcbiAgICAgICAgICAgICAgICBTVkhlaWdodEN1cnNvciA9IFNWUmVjdEN1cnNvclszXSxcclxuICAgICAgICAgICAgICAgIFNWV2lkdGggPSBTVlJlY3RbMl0sXHJcbiAgICAgICAgICAgICAgICBTVldpZHRoQ3Vyc29yID0gU1ZSZWN0Q3Vyc29yWzJdLFxyXG4gICAgICAgICAgICAgICAgSEhlaWdodCA9IEhSZWN0WzNdLFxyXG4gICAgICAgICAgICAgICAgSEhlaWdodEN1cnNvciA9IEhSZWN0Q3Vyc29yWzNdLFxyXG4gICAgICAgICAgICAgICAgQUhlaWdodCA9IEFSZWN0WzNdLFxyXG4gICAgICAgICAgICAgICAgQUhlaWdodEN1cnNvciA9IEFSZWN0Q3Vyc29yWzNdO1xyXG4gICAgICAgICAgICBpZiAoaXNGaXJzdCkge1xyXG4gICAgICAgICAgICAgICAgb25FdmVudHMoRVZFTlRTX0RPV04sIHNvdXJjZSwgZG9DbGljayk7XHJcbiAgICAgICAgICAgICAgICBkZWxheSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyZSgnY2hhbmdlJywgdGhlQ29sb3IpO1xyXG4gICAgICAgICAgICAgICAgfSwgMSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBvbkV2ZW50cyhFVkVOVFNfRE9XTiwgU1YsIGRvRG93blNWKTtcclxuICAgICAgICAgICAgICAgIG9uRXZlbnRzKEVWRU5UU19ET1dOLCBILCBkb0Rvd25IKTtcclxuICAgICAgICAgICAgICAgIG9uRXZlbnRzKEVWRU5UU19ET1dOLCBBLCBkb0Rvd25BKTtcclxuICAgICAgICAgICAgICAgIG9uRXZlbnRzKEVWRU5UU19NT1ZFLCBELCBkb01vdmUpO1xyXG4gICAgICAgICAgICAgICAgb25FdmVudHMoRVZFTlRTX1VQLCBELCBkb1N0b3ApO1xyXG4gICAgICAgICAgICAgICAgb25FdmVudHMoRVZFTlRTX1JFU0laRSwgVywgZG9SZXNpemUpO1xyXG4gICAgICAgICAgICAgICAgZG9GaXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkb1NldENvbG9yKCk7XHJcbiAgICAgICAgICAgICQuY29sb3IgPSAociwgZywgYiwgYSkgPT4gQ1BbaXNGdW5jdGlvbihDUFtzdGF0ZS5jb2xvcl0pID8gc3RhdGUuY29sb3IgOiBoZXhdKFtyLCBnLCBiLCBhXSk7XHJcbiAgICAgICAgICAgICQuY3VycmVudCA9IG51bGw7XHJcbiAgICAgICAgICAgICQuZW50ZXIgPSBkb0VudGVyO1xyXG4gICAgICAgICAgICAkLmV4aXQgPSBkb0V4aXQ7XHJcbiAgICAgICAgICAgICQuZml0ID0gZG9GaXQ7XHJcbiAgICAgICAgICAgICQuZ2V0ID0gKCkgPT4gdGhlVmFsdWUoKTtcclxuICAgICAgICAgICAgJC5wb3AgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNvdXJjZVtuYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkOyAvLyBBbHJlYWR5IGVqZWN0ZWRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBzb3VyY2VbbmFtZV07XHJcbiAgICAgICAgICAgICAgICBvZmZFdmVudHMoRVZFTlRTX0RPV04sIHNvdXJjZSwgZG9DbGljayk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZG9FeGl0KCksIGZpcmUoJ3BvcCcsIHRoZUNvbG9yKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgJC5zZXQgPSAociwgZywgYiwgYSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhlRGF0YSA9IFJHQjJIU1YoW3IsIGcsIGIsIGFdKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkb1NldENvbG9yKCksICQ7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICQuc2VsZiA9IHNlbGY7XHJcbiAgICAgICAgICAgICQudmFsdWUgPSAociwgZywgYiwgYSkgPT4gKCQuc2V0KHIsIGcsIGIsIGEpLCBmaXJlKCdjaGFuZ2UnLCBbciwgZywgYiwgYV0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZG9BcHBseSgxKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZG9DbGljayhlKSB7XHJcbiAgICAgICAgICAgIGlmIChob29rcy5mb2N1cykge1xyXG4gICAgICAgICAgICAgICAgZmlyZSgnZm9jdXMnLCB0aGVDb2xvcik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdCA9IGUudGFyZ2V0LFxyXG4gICAgICAgICAgICAgICAgICAgIGlzU291cmNlID0gc291cmNlID09PSBnZXRDbG9zZXN0KHQsIHNvdXJjZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNTb3VyY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAhZ2V0UGFyZW50KHNlbGYpICYmIGRvRW50ZXIoc3RhdGUucGFyZW50KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9FeGl0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICQ7XHJcbiAgICB9XHJcbiAgICBDUFtoZXhdID0geCA9PiB7XHJcbiAgICAgICAgaWYgKGlzU3RyaW5nKHgpKSB7XHJcbiAgICAgICAgICAgIGxldCBjb3VudCA9ICh4ID0geC50cmltKCkpLmxlbmd0aDtcclxuICAgICAgICAgICAgaWYgKCg0ID09PSBjb3VudCB8fCA3ID09PSBjb3VudCkgJiYgJyMnID09PSB4WzBdKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoL14jKFthLWZcXGRdezN9KXsxLDJ9JC9pLnRlc3QoeCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoNCA9PT0gY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFt0b051bWJlcih4WzFdICsgeFsxXSwgMTYpLCB0b051bWJlcih4WzJdICsgeFsyXSwgMTYpLCB0b051bWJlcih4WzNdICsgeFszXSwgMTYpLCAxXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFt0b051bWJlcih4WzFdICsgeFsyXSwgMTYpLCB0b051bWJlcih4WzNdICsgeFs0XSwgMTYpLCB0b051bWJlcih4WzVdICsgeFs2XSwgMTYpLCAxXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmICgoNSA9PT0gY291bnQgfHwgOSA9PT0gY291bnQpICYmICcjJyA9PT0geFswXSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKC9eIyhbYS1mXFxkXXszLDR9KXsxLDJ9JC9pLnRlc3QoeCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoNSA9PT0gY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFt0b051bWJlcih4WzFdICsgeFsxXSwgMTYpLCB0b051bWJlcih4WzJdICsgeFsyXSwgMTYpLCB0b051bWJlcih4WzNdICsgeFszXSwgMTYpLCB0b051bWJlcih4WzRdICsgeFs0XSwgMTYpIC8gMjU1XTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFt0b051bWJlcih4WzFdICsgeFsyXSwgMTYpLCB0b051bWJlcih4WzNdICsgeFs0XSwgMTYpLCB0b051bWJlcih4WzVdICsgeFs2XSwgMTYpLCB0b051bWJlcih4WzddICsgeFs4XSwgMTYpIC8gMjU1XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gWzAsIDAsIDAsIDFdOyAvLyBEZWZhdWx0IHRvIGJsYWNrXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAnIycgKyAoJzAwMDAwMCcgKyB0b1N0cmluZygreFsyXSB8ICt4WzFdIDw8IDggfCAreFswXSA8PCAxNiwgMTYpKS5zbGljZSgtNikgKyAoaXNTZXQoeFszXSkgJiYgeFszXSA8IDEgPyB0b1N0cmluZyh0b1JvdW5kKHhbM10gKiAyNTUpICsgMHgxMDAwMCwgMTYpLnN1YnN0cigtMikgOiBcIlwiKTtcclxuICAgIH07XHJcbiAgICBDUC5pbnN0YW5jZXMgPSB7fTtcclxuICAgIENQLnN0YXRlID0ge1xyXG4gICAgICAgICdjbGFzcyc6ICdjb2xvci1waWNrZXInLFxyXG4gICAgICAgICdjb2xvcic6IGhleCxcclxuICAgICAgICAncGFyZW50JzogbnVsbFxyXG4gICAgfTtcclxuICAgIENQLnZlcnNpb24gPSAnMi4yLjAnO1xyXG4gICAgcmV0dXJuIENQO1xyXG59KTsiLCIvKipcclxuICogQG1vZHVsZSBUZW1wbGF0ZS9VdGlsc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IENPTlNUQU5UUyB9IGZyb20gJy4vLi4vQ29uc3RhbnRzLmpzJztcclxuXHJcbmltcG9ydCBUcmFuc2xhdG9yIGZyb20gJy4vLi4vVHJhbnNsYXRvci90cmFuc2xhdG9yLmpzJztcclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24gIFV0aWwg66qo7J2MIENsYXNzXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7QXJyYXl9IGZvbnRGYW1pbHlDb21ib0JveCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2ZvbnRGYW1pbHlDb21ib0JveH1cclxuICogQHByb3BlcnR5IHtBcnJheX0gZGF0ZUZvcm1hdENvbWJvQm94IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjZGF0ZUZvcm1hdENvbWJvQm94fVxyXG4gKiBAcHJvcGVydHkge0FycmF5fSBmb250U2l6ZUNvbWJvQm94IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjZm9udFNpemVDb21ib0JveH1cclxuICogQHByb3BlcnR5IHtBcnJheX0gc2lnblBlbldpZHRoQ29tYm9Cb3gge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNzaWduUGVuV2lkdGhDb21ib0JveH1cclxuICogQHByb3BlcnR5IHtBcnJheX0gdXNlckluZm9PcHRpb25MaXN0IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjdXNlckluZm9PcHRpb25MaXN0fVxyXG4gKiBAcHJvcGVydHkge051bWJlcn0gdXNlckluZm9PcHRpb25MaXN0Q291bnQge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyN1c2VySW5mb09wdGlvbkxpc3RDb3VudH1cclxuICogQHByb3BlcnR5IHtBcnJheX0gZHZGaWVsZE9wdGlvbkxpc3Qge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNkdkZpZWxkT3B0aW9uTGlzdH1cclxuICpcclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gYWRkT2JqZWN0c1RvQ2FudmFzIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjYWRkT2JqZWN0c1RvQ2FudmFzfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBhZGRTaWduU3ZnVG9DYW52YXMge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNhZGRTaWduU3ZnVG9DYW52YXN9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGJvdW5kaW5nUmVjdFRvUmVjdCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2JvdW5kaW5nUmVjdFRvUmVjdH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gY2xvbmVGYWJyaWNDYW52YXMge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjbG9uZUZhYnJpY0NhbnZhc31cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gY2xvbmVPYmplY3Qge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjbG9uZU9iamVjdH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gY2xvbmVPYmplY3RUb09iamVjdCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2Nsb25lT2JqZWN0VG9PYmplY3R9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNsb3NlU2VsZWN0MlRhZyB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2Nsb3NlU2VsZWN0MlRhZ31cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gY3JlYXRlQXN0ZXJpc2tEaXYge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjcmVhdGVBc3Rlcmlza0Rpdn1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gY3JlYXRlQXR0cmJ1dGVQb3B1cCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZUF0dHJidXRlUG9wdXB9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNyZWF0ZUF0dHJpYnV0ZUNoZWNrQm94Tm9kZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZUF0dHJpYnV0ZUNoZWNrQm94Tm9kZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gY3JlYXRlQXR0cmlidXRlQ29sb3JJbnB1dE5vZGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjcmVhdGVBdHRyaWJ1dGVDb2xvcklucHV0Tm9kZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gY3JlYXRlQXR0cmlidXRlRGF0ZUlucHV0Tm9kZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZUF0dHJpYnV0ZURhdGVJbnB1dE5vZGV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNyZWF0ZUF0dHJpYnV0ZUlucHV0Tm9kZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZUF0dHJpYnV0ZUlucHV0Tm9kZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gY3JlYXRlQXR0cmlidXRlSW5wdXROb2RlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjY3JlYXRlQXR0cmlidXRlSW5wdXROb2RlfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBjcmVhdGVBdHRyaWJ1dGVQYW5lbE5vZGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjcmVhdGVBdHRyaWJ1dGVQYW5lbE5vZGV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNyZWF0ZUF0dHJpYnV0ZVNlbGVjdElubmVyTm9kZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZUF0dHJpYnV0ZVNlbGVjdElubmVyTm9kZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gY3JlYXRlQXR0cmlidXRlU2VsZWN0Tm9kZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZUF0dHJpYnV0ZVNlbGVjdE5vZGV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNyZWF0ZUF0dHJpYnV0ZVRvZ2dsZUJ1dHRvbk5vZGUge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjcmVhdGVBdHRyaWJ1dGVUb2dnbGVCdXR0b25Ob2RlfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBjcmVhdGVEaXZpZGVyTm9kZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZURpdmlkZXJOb2RlfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBjcmVhdGVGaWVsZERlbGV0ZUJ0biB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZUZpZWxkRGVsZXRlQnRufVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBjcmVhdGVUZXh0QWxpZ25CdXR0b25Ob2RlIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjY3JlYXRlVGV4dEFsaWduQnV0dG9uTm9kZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gY3JlYXRlVGV4dEF0dHJidXRlTm9kZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZVRleHRBdHRyYnV0ZU5vZGV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGNyZWF0ZVRleHRCb2xkQnV0dG9uTm9kZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZVRleHRCb2xkQnV0dG9uTm9kZX1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gY3JlYXRlVGV4dENvbG9yQnV0dG9uTm9kZSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZVRleHRDb2xvckJ1dHRvbk5vZGV9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGZpZWxkQW5jZXN0b3JzIHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjZmllbGRBbmNlc3RvcnN9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGZpbmRTYW1lQW5jZXN0b3Ige0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNmaW5kU2FtZUFuY2VzdG9yfVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBnZXRGb25TaXplQ29tYm9Cb3gge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNnZXRGb25TaXplQ29tYm9Cb3h9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGdldFVzZXJJbmZvT3B0c0xpc3Qge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNnZXRVc2VySW5mb09wdHNMaXN0fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBpbWFnZUZpbGVUb0Jhc2U2NCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2ltYWdlRmlsZVRvQmFzZTY0fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBpc0VtcHR5T2JqZWN0IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjaXNFbXB0eU9iamVjdH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gaXNTaG93QXN0ZXJpc2tEaXYge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNpc1Nob3dBc3Rlcmlza0Rpdn1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gaXNTdHJpbmdFbXB0eSB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2lzU3RyaW5nRW1wdHl9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IG1lcmdlRmllbGRzQkJveCB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLm1lcmdlRmllbGRzQkJveCNhZGRPYmplY3RzVG9DYW52YXN9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IG1lcmdlT2JqZWN0c1JlY3Qge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNtZXJnZU9iamVjdHNSZWN0fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBtZXJnZVJlY3Qge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNtZXJnZVJlY3R9XHJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHJlcG9zaXRpb25GaWVsZERlbGV0ZUJ0biB7QGxpbmsgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI3JlcG9zaXRpb25GaWVsZERlbGV0ZUJ0bn1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gc2V0RFZGaWVsZE9wdHNMaXN0IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjc2V0RFZGaWVsZE9wdHNMaXN0fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBzZXRVc2VySW5mb09wdHNMaXN0IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjc2V0VXNlckluZm9PcHRzTGlzdH1cclxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gc2V0VXNlckluZm9PcHRzTGlzdENvdW50IHtAbGluayBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjc2V0VXNlckluZm9PcHRzTGlzdENvdW50fVxyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBzaG93QXN0ZXJpc2tEaXYge0BsaW5rIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNzaG93QXN0ZXJpc2tEaXZ9XHJcbiAqIFxyXG4gKiBARmlsZU5hbWUgdXRpbHMuanNcclxuICogQHNpbmNlIDIwMjEuMDUuMzFcclxuICovXHJcbmV4cG9ydCBjbGFzcyBVdGlscyB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7QXJyYXl9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjZm9udEZhbWlseUNvbWJvQm94XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7Y+w7Yq4IOyiheulmFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZm9udEZhbWlseUNvbWJvQm94ID0gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGV4dDogXCLrp5HsnYAg6rOg65SVXCIsXHJcbiAgICAgICAgICAgIHZhbHVlOiBcIk1hbGd1bkdvdGhpY1wiXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRleHQ6IFwi67CU7YOV7LK0XCIsXHJcbiAgICAgICAgICAgIHZhbHVlOiBcIkJhdGFuZ1wiXHJcbiAgICAgICAgfVxyXG4gICAgXTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtBcnJheX1cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNkYXRlRm9ybWF0Q29tYm9Cb3hcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDrgqDsp5wg7Y+s66mnIOumrOyKpO2KuFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZGF0ZUZvcm1hdENvbWJvQm94ID0gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGV4dDogXCJZWVlZLU1NLUREXCIsXHJcbiAgICAgICAgICAgIHZhbHVlOiBcIlktbS1kXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGV4dDogXCJZWVlZL01NL0REXCIsXHJcbiAgICAgICAgICAgIHZhbHVlOiBcIlkvbS9kXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGV4dDogXCJZWVlZLk1NLkREXCIsXHJcbiAgICAgICAgICAgIHZhbHVlOiBcIlkubS5kXCJcclxuICAgICAgICB9XHJcbiAgICBdXHJcblxyXG4gICAgc3RhdGljIHJhZGlvVHlwZUxpc3QgPSBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0ZXh0OiBcIlR5cGUgMVwiLFxyXG4gICAgICAgICAgICB2YWx1ZTogQ09OU1RBTlRTLlJBRElPX1RZUEVfMVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0ZXh0OiBcIlR5cGUgMlwiLFxyXG4gICAgICAgICAgICB2YWx1ZTogQ09OU1RBTlRTLlJBRElPX1RZUEVfMlxyXG4gICAgICAgIH1cclxuICAgIF1cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge0FycmF5fVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2ZvbnRTaXplQ29tYm9Cb3hcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtj7Dtirgg7IKs7J207KaIIOy9pOuztOuwleyKpCDrpqzsiqTtirhcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZvbnRTaXplQ29tYm9Cb3ggPSBbXTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtBcnJheX1cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNzaWduUGVuV2lkdGhDb21ib0JveFxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIOyEnOuqhe2OnCDrkZDqu5gg7L2k67O067CV7IqkIOumrOyKpO2KuFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgc2lnblBlbldpZHRoQ29tYm9Cb3ggPSBbXTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtBcnJheX1cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyN1c2VySW5mb09wdGlvbkxpc3RcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDshJzrqoXsnpAg66as7Iqk7Yq4XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyB1c2VySW5mb09wdGlvbkxpc3QgPSBbXTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtOdW1iZXJ9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjdXNlckluZm9PcHRpb25MaXN0Q291bnRcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDshJzrqoXsnpAg66as7Iqk7Yq4IOqwr+yImFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgdXNlckluZm9PcHRpb25MaXN0Q291bnQgPSAwO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge0FycmF5fVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2R2RmllbGRPcHRpb25MaXN0XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg6riw67O46rCSIOyYteyFmCDrpqzsiqTtirhcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGR2RmllbGRPcHRpb25MaXN0ID0gW107XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI3NpZ25UYWJTaG93T3B0XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ISc66qF7YOtIOuztOyehC/slYjrs7TsnoQg6riw67O46rCSIOyYteyFmFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgc2lnblRhYlNob3dPcHQgPSB7fTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjbG9jYWxlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZiE7J6sIOyWuOyWtFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgbG9jYWxlID0gXCJrb1wiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHR5cGUge09iamVjdH1cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyN0cmFuc2xhdG9yXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg64uk6rWt7Ja0IOyCrOyaqeydhCDsnITtlZwgT2JqZWN0XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyB0cmFuc2xhdG9yID0gbmV3IFRyYW5zbGF0b3Ioe1xyXG4gICAgICAgIGZpbGVzTG9jYXRpb246ICcvanMvcGRmX2Zvcm0vaTE4bidcclxuICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICogXHJcbiAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGlzRW1wdHlPYmplY3RcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNpc0VtcHR5T2JqZWN0XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgIE9iamVjdOqwgCDruYTslrTsnojripTsp4Ag7LK07YGsXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbVxyXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gcGFyYW1cclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGlzRW1wdHlPYmplY3QocGFyYW0pIHtcclxuICAgICAgICBpZiAocGFyYW0gPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgICAgICBwYXJhbSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHBhcmFtKS5sZW5ndGggPT09IDA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gY2xvc2VTZWxlY3QyVGFnXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjY2xvc2VTZWxlY3QyVGFnXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgU2VsZWN0MuqwgCDsl7TroKTsnojripQg7YOc6re466W8IOyytO2BrO2VmOyXrCDri6vripTri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBub2RlXHJcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY2xvc2VTZWxlY3QyVGFnKG5vZGUpIHtcclxuICAgICAgICBub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoXCJsaSAuXCIgKyBDT05TVEFOVFMuRURJVE9SX0FUVFJfU0VMRUNUX0NMQVNTKS5mb3JFYWNoKChlbCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwic2VsZWN0Mi1oaWRkZW4tYWNjZXNzaWJsZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgJChlbCkuc2VsZWN0MignY2xvc2UnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIHJlbW92ZUFsbENoaWxkTm9kZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI3JlbW92ZUFsbENoaWxkTm9kZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VtOuLue2VmOuKlCBOb2Rl7J2YIOuqqOuToCBDaGlsZOulvCDsoJzqsbDtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBub2RlXHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyByZW1vdmVBbGxDaGlsZE5vZGUobm9kZSkge1xyXG4gICAgICAgIGlmIChub2RlID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgd2hpbGUgKG5vZGUuZmlyc3RDaGlsZCkge1xyXG4gICAgICAgICAgICBpZiAobm9kZS5sYXN0Q2hpbGQuaWQgPT09IENPTlNUQU5UUy5FRElUT1JfQVRUUl9QQU5FTF9JRCkge1xyXG4gICAgICAgICAgICAgICAgVXRpbHMuY2xvc2VTZWxlY3QyVGFnKG5vZGUubGFzdENoaWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBub2RlLnJlbW92ZUNoaWxkKG5vZGUubGFzdENoaWxkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gY3JlYXRlQXR0cmlidXRlUGFuZWxOb2RlXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjY3JlYXRlQXR0cmlidXRlUGFuZWxOb2RlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE65Oc7J2YIOyGjeyEseydhCDrs7Tsl6zspIQgUGFuZWzrpbwg7IOd7ISx7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVhdGVBdHRyaWJ1dGVQYW5lbE5vZGUoKSB7XHJcbiAgICAgICAgdmFyIHBhbmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInVsXCIpO1xyXG4gICAgICAgIHBhbmVsLmNsYXNzTmFtZSA9IENPTlNUQU5UUy5FRElUT1JfQVRUUl9QQU5FTF9DTEFTUztcclxuICAgICAgICBwYW5lbC5pZCA9IENPTlNUQU5UUy5FRElUT1JfQVRUUl9QQU5FTF9JRDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHBhbmVsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGNyZWF0ZUF0dHJpYnV0ZUlucHV0Tm9kZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZUF0dHJpYnV0ZUlucHV0Tm9kZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2VhOuTnOydmCDsho3shLHspJEgaW5wdXTsnYQg7IKs7Jqp7ZWY64qUIEVsZW1lbnTrpbwg66eM65Og64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZElEIOyCrOyaqe2VoCBGaWVsZOydmCBJRFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkUHJvcGV0eU5hbWUg7IKs7Jqp7ZWgIEZpZWxk7J2YIOyGjeyEsSDsnbTrpoRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZSAgRWxlbWVudOyXkCDsgqzsmqntlaAg7J2066aEXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWUgIGlucHV07JeQIOuTpOyWtOqwiCDqsJJcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBub2RlVG9vbHRpcCAgVG9vbFRpcOyXkCDrk6TslrTqsIgg64K07JqpXHJcbiAgICAgKiBAcGFyYW0ge2NhbGxiYWNrfSBjaGFuZ2VFdmVudEZ1bmMgIOqwkuydtCDrs4DtlaAg65WMIO2YuOy2nOuQmOyWtOyniCBjYWxsYmFja1xyXG4gICAgICogQHJldHVybiB7RWxlbWVudH1cclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWF0ZUF0dHJpYnV0ZUlucHV0Tm9kZShmaWVsZElkLCBmaWVsZFByb3BldHlOYW1lLCB0aXRsZSwgdmFsdWUsIHR5cGUsIG5vZGVUb29sdGlwLCBjaGFuZ2VFdmVudEZ1bmMpIHtcclxuICAgICAgICB2YXIgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xyXG4gICAgICAgIHJvdy5jbGFzc05hbWUgPSBDT05TVEFOVFMuRURJVE9SX0FUVFJfQ09OVEVOVFNfUk9XX0NMQVNTO1xyXG4gICAgICAgIHZhciB0aXRsZVdyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRpdGxlV3JhcC5jbGFzc05hbWUgPSBDT05TVEFOVFMuVElUTEVfV1JBUF9DTEFTUztcclxuICAgICAgICB2YXIgdGl0bGVTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgdGl0bGVTcGFuLmNsYXNzTmFtZSA9IENPTlNUQU5UUy5USVRMRV9DTEFTUztcclxuICAgICAgICB0aXRsZVNwYW4udGV4dENvbnRlbnQgPSBVdGlscy50cmFuc2xhdGVGb3JLZXkodGl0bGUpO1xyXG4gICAgICAgIHRpdGxlU3Bhbi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWkxOG5cIiwgdGl0bGUpO1xyXG4gICAgICAgIHRpdGxlV3JhcC5hcHBlbmRDaGlsZCh0aXRsZVNwYW4pO1xyXG4gICAgICAgIHZhciBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgICAgICBpbnB1dC5jbGFzc05hbWUgPSBDT05TVEFOVFMuRURJVE9SX0FUVFJfSU5QVVRfQ0xBU1M7XHJcbiAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKFwiZGF0YS1maWVsZC1pZFwiLCBmaWVsZElkKTtcclxuICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWZpZWxkLXByb3BlcnR5LW5hbWVcIiwgZmllbGRQcm9wZXR5TmFtZSk7XHJcbiAgICAgICAgaWYgKHZhbHVlICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlICE9PSBcIlwiICkge1xyXG4gICAgICAgICAgICBpbnB1dC50eXBlID0gdHlwZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBjaGFuZ2VFdmVudEZ1bmMsIHRydWUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJvdy5hcHBlbmRDaGlsZCh0aXRsZVdyYXApO1xyXG4gICAgICAgIHJvdy5hcHBlbmRDaGlsZChpbnB1dCk7XHJcbiAgICAgICAgcmV0dXJuIHJvdztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBjcmVhdGVBdHRyaWJ1dGVJbnB1dE5vZGVcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjcmVhdGVBdHRyaWJ1dGVJbnB1dE5vZGVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtlYTrk5zsnZgg7IaN7ISx7KSRIHRleHRhcmXrpbwg7IKs7Jqp7ZWY64qUIEVsZW1lbnTrpbwg66eM65Og64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZElEIOyCrOyaqe2VoCBGaWVsZOydmCBJRFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkUHJvcGV0eU5hbWUg7IKs7Jqp7ZWgIEZpZWxk7J2YIOyGjeyEsSDsnbTrpoRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZSAgRWxlbWVudOyXkCDsgqzsmqntlaAg7J2066aEXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWUgIHRleHRhcmXsl5Ag65Ok7Ja06rCIIOqwklxyXG4gICAgICogQHBhcmFtIHtjYWxsYmFja30gY2hhbmdlRXZlbnRGdW5jIOqwkuydtCDrs4DtlaAg65WMIO2YuOy2nOuQmOyWtOyniCBjYWxsYmFja1xyXG4gICAgICogQHJldHVybiB7RWxlbWVudH1cclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWF0ZUF0dHJpYnV0ZVRleHRBcmVhTm9kZShmaWVsZElkLCBmaWVsZFByb3BldHlOYW1lLCB0aXRsZSwgdmFsdWUsIHR5cGUsIGNoYW5nZUV2ZW50RnVuYykge1xyXG4gICAgICAgIHZhciByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XHJcbiAgICAgICAgcm93LmNsYXNzTmFtZSA9IENPTlNUQU5UUy5FRElUT1JfQVRUUl9DT05URU5UU19ST1dfQ0xBU1M7XHJcbiAgICAgICAgdmFyIHRpdGxlV3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGl0bGVXcmFwLmNsYXNzTmFtZSA9IENPTlNUQU5UUy5USVRMRV9XUkFQX0NMQVNTO1xyXG4gICAgICAgIHZhciB0aXRsZVNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICB0aXRsZVNwYW4uY2xhc3NOYW1lID0gQ09OU1RBTlRTLlRJVExFX0NMQVNTO1xyXG4gICAgICAgIHRpdGxlU3Bhbi50ZXh0Q29udGVudCA9IFV0aWxzLnRyYW5zbGF0ZUZvcktleSh0aXRsZSk7XHJcbiAgICAgICAgdGl0bGVXcmFwLmFwcGVuZENoaWxkKHRpdGxlU3Bhbik7XHJcbiAgICAgICAgdmFyIHRleHRhcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO1xyXG4gICAgICAgIHRleHRhcmVhLmNsYXNzTmFtZSA9IENPTlNUQU5UUy5FRElUT1JfQVRUUl9URVhUQVJFQV9DTEFTUztcclxuICAgICAgICB0ZXh0YXJlYS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWZpZWxkLWlkXCIsIGZpZWxkSWQpO1xyXG4gICAgICAgIHRleHRhcmVhLnNldEF0dHJpYnV0ZShcImRhdGEtZmllbGQtcHJvcGVydHktbmFtZVwiLCBmaWVsZFByb3BldHlOYW1lKTtcclxuICAgICAgICBpZiAodmFsdWUgIT09IFwiXCIpIHtcclxuICAgICAgICAgICAgdGV4dGFyZWEudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGUgIT09IFwiXCIpIHtcclxuICAgICAgICAgICAgdGV4dGFyZWEudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgY2hhbmdlRXZlbnRGdW5jLCB0cnVlKTtcclxuXHJcbiAgICAgICAgcm93LmFwcGVuZENoaWxkKHRpdGxlV3JhcCk7XHJcbiAgICAgICAgcm93LmFwcGVuZENoaWxkKHRleHRhcmVhKTtcclxuICAgICAgICByZXR1cm4gcm93O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGNyZWF0ZUF0dHJpYnV0ZUNoZWNrQm94Tm9kZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZUF0dHJpYnV0ZUNoZWNrQm94Tm9kZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpICDtlYTrk5zsnZgg7IaN7ISx7KSRIGNoZWNrYm9466W8IOyCrOyaqe2VmOuKlCBFbGVtZW5066W8IOunjOuToOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRJRCDsgqzsmqntlaAgRmllbGTsnZggSURcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZFByb3BldHlOYW1lIOyCrOyaqe2VoCBGaWVsZOydmCDsho3shLEg7J2066aEXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGl0bGUgIEVsZW1lbnTsl5Ag7IKs7Jqp7ZWgIOydtOumhFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlICBpbnB1dOyXkCDrk6TslrTqsIgg6rCSXHJcbiAgICAgKiBAcGFyYW0ge2NhbGxiYWNrfSBjaGFuZ2VFdmVudEZ1bmMg6rCS7J20IOuzgO2VoCDrlYwg7Zi47Lac65CY7Ja07KeIIGNhbGxiYWNrXHJcbiAgICAgKiBAcmV0dXJuIHtFbGVtZW50fVxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlYXRlQXR0cmlidXRlQ2hlY2tCb3hOb2RlKGZpZWxkSWQsIGZpZWxkUHJvcGV0eU5hbWUsIHRpdGxlLCB2YWx1ZSwgY2hhbmdlRXZlbnRGdW5jKSB7XHJcbiAgICAgICAgdmFyIHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuICAgICAgICByb3cuY2xhc3NOYW1lID0gQ09OU1RBTlRTLkVESVRPUl9BVFRSX0NPTlRFTlRTX1JPV19DTEFTUztcclxuXHJcbiAgICAgICAgdmFyIGlucHV0VGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgICAgICBpbnB1dFRleHQudHlwZSA9IFwidGV4dFwiO1xyXG4gICAgICAgIGlucHV0VGV4dC5jbGFzc05hbWUgPSBDT05TVEFOVFMuRURJVE9SX0FUVFJfSU5QVVRfQ0xBU1M7XHJcbiAgICAgICAgaW5wdXRUZXh0LnNldEF0dHJpYnV0ZShcImRhdGEtZmllbGQtaWRcIiwgZmllbGRJZCk7XHJcbiAgICAgICAgaW5wdXRUZXh0LnNldEF0dHJpYnV0ZShcImRhdGEtZmllbGQtcHJvcGVydHktbmFtZVwiLCBmaWVsZFByb3BldHlOYW1lKTtcclxuICAgICAgICBpbnB1dFRleHQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIGlucHV0VGV4dC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYywgdHJ1ZSk7XHJcblxyXG4gICAgICAgIHZhciBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgICAgICBpbnB1dC50eXBlID0gXCJjaGVja2JveFwiO1xyXG4gICAgICAgIGlucHV0LmlkID0gZmllbGRQcm9wZXR5TmFtZSArIFwiX2Noa2JveFwiO1xyXG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICAgICAgICBpZiAoaW5wdXQuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgaW5wdXRUZXh0LnZhbHVlID0gXCJ0cnVlXCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dFRleHQudmFsdWUgPSBcImZhbHNlXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaW5wdXRUZXh0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiY2hhbmdlXCIpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHZhbHVlID09PSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgaW5wdXQuY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGlucHV0VGV4dC52YWx1ZSA9IFwidHJ1ZVwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlucHV0LmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgaW5wdXRUZXh0LnZhbHVlID0gXCJmYWxzZVwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGNoZWNrQm94Q29udGFpbmVyTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG4gICAgICAgIGNoZWNrQm94Q29udGFpbmVyTm9kZS5jbGFzc05hbWUgPSBcIkF0dHJpYnV0ZS1Db250ZW50cy1Sb3ctQ2hlY2tCb3gtQ29udGFpbmVyXCJcclxuICAgICAgICBjaGVja0JveENvbnRhaW5lck5vZGUuYXBwZW5kQ2hpbGQoaW5wdXQpO1xyXG4gICAgICAgIHZhciBjaGVja0JveExhYmVsTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcclxuICAgICAgICBjaGVja0JveExhYmVsTm9kZS5odG1sRm9yID0gZmllbGRQcm9wZXR5TmFtZSArIFwiX2Noa2JveFwiO1xyXG4gICAgICAgIGNoZWNrQm94TGFiZWxOb2RlLnRleHRDb250ZW50ID0gdGl0bGU7XHJcbiAgICAgICAgY2hlY2tCb3hDb250YWluZXJOb2RlLmFwcGVuZENoaWxkKGNoZWNrQm94TGFiZWxOb2RlKTtcclxuXHJcbiAgICAgICAgcm93LmFwcGVuZENoaWxkKGNoZWNrQm94Q29udGFpbmVyTm9kZSk7XHJcbiAgICAgICAgcm93LmFwcGVuZENoaWxkKGlucHV0VGV4dCk7XHJcbiAgICAgICAgcmV0dXJuIHJvdztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBjcmVhdGVBdHRyaWJ1dGVEYXRlSW5wdXROb2RlXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjY3JlYXRlQXR0cmlidXRlRGF0ZUlucHV0Tm9kZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpICDtlYTrk5zsnZgg7IaN7ISx7KSRIERhdGXrpbwg7IKs7Jqp7ZWY64qUIEVsZW1lbnTrpbwg66eM65Og64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZElEICDsgqzsmqntlaAgRmllbGTsnZggSURcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZFByb3BldHlOYW1lICDsgqzsmqntlaAgRmllbGTsnZgg7IaN7ISxIOydtOumhFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRpdGxlICBFbGVtZW507JeQIOyCrOyaqe2VoCDsnbTrpoRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZSAgaW5wdXTsl5Ag65Ok7Ja06rCIIOqwklxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG5vZGVUb29sdGlwICBUb29sVGlw7JeQIOuTpOyWtOqwiCDrgrTsmqlcclxuICAgICAqIEBwYXJhbSB7Y2FsbGJhY2t9IGNoYW5nZUV2ZW50RnVuYyAg6rCS7J20IOuzgO2VoCDrlYwg7Zi47Lac65CY7Ja07KeIIGNhbGxiYWNrXHJcbiAgICAgKiBAcmV0dXJuIHtFbGVtZW50fVxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlYXRlQXR0cmlidXRlRGF0ZUlucHV0Tm9kZShmaWVsZElkLCBmaWVsZFByb3BldHlOYW1lLCB0aXRsZSwgdmFsdWUsIG5vZGVUb29sdGlwLCBjaGFuZ2VFdmVudEZ1bmMpIHtcclxuICAgICAgICB2YXIgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xyXG4gICAgICAgIHJvdy5jbGFzc05hbWUgPSBDT05TVEFOVFMuRURJVE9SX0FUVFJfQ09OVEVOVFNfUk9XX0NMQVNTO1xyXG4gICAgICAgIHZhciB0aXRsZVdyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRpdGxlV3JhcC5jbGFzc05hbWUgPSBDT05TVEFOVFMuVElUTEVfV1JBUF9DTEFTUztcclxuICAgICAgICB2YXIgdGl0bGVTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgdGl0bGVTcGFuLmNsYXNzTmFtZSA9IENPTlNUQU5UUy5USVRMRV9DTEFTUztcclxuICAgICAgICB0aXRsZVNwYW4udGV4dENvbnRlbnQgPSB0aXRsZTtcclxuICAgICAgICB0aXRsZVdyYXAuYXBwZW5kQ2hpbGQodGl0bGVTcGFuKTtcclxuICAgICAgICB2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICAgICAgaW5wdXQuY2xhc3NOYW1lID0gQ09OU1RBTlRTLkVESVRPUl9BVFRSX0lOUFVUX0NMQVNTO1xyXG4gICAgICAgIGlucHV0LmlkID0gZmllbGRQcm9wZXR5TmFtZSArIFwiX2RhdGUtcGlja2VyXCI7XHJcbiAgICAgICAgaW5wdXQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShcImRhdGEtZmllbGQtaWRcIiwgZmllbGRJZCk7XHJcbiAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKFwiZGF0YS1maWVsZC1wcm9wZXJ0eS1uYW1lXCIsIGZpZWxkUHJvcGV0eU5hbWUpO1xyXG4gICAgICAgIGlmICh2YWx1ZSAhPT0gXCJcIikge1xyXG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgaW5wdXRQaWNrZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICAgICAgaW5wdXRQaWNrZXIuY2xhc3NOYW1lID0gQ09OU1RBTlRTLkVESVRPUl9BVFRSX0RBVEVfSU5QVVRfQ0xBU1M7XHJcbiAgICAgICAgaWYgKHZhbHVlICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgIGlucHV0UGlja2VyLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgY2hhbmdlRXZlbnRGdW5jLCB0cnVlKTtcclxuICAgICAgICByb3cuYXBwZW5kQ2hpbGQodGl0bGVXcmFwKTtcclxuICAgICAgICByb3cuYXBwZW5kQ2hpbGQoaW5wdXQpO1xyXG4gICAgICAgIHJvdy5hcHBlbmRDaGlsZChpbnB1dFBpY2tlcik7XHJcbiAgICAgICAgcmV0dXJuIHJvdztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBjcmVhdGVBdHRyaWJ1dGVDb2xvcklucHV0Tm9kZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZUF0dHJpYnV0ZUNvbG9ySW5wdXROb2RlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE65Oc7J2YIOyGjeyEseykkSBDb2xvciBQaWNrZXLrpbwg7IKs7Jqp7ZWY64qUIEVsZW1lbnTrpbwg66eM65Og64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZElEICDsgqzsmqntlaAgRmllbGTsnZggSURcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZFByb3BldHlOYW1lICDsgqzsmqntlaAgRmllbGTsnZgg7IaN7ISxIOydtOumhFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRpdGxlICBFbGVtZW507JeQIOyCrOyaqe2VoCDsnbTrpoRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZSAgaW5wdXTsl5Ag65Ok7Ja06rCIIOqwklxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgIGlucHV07J2YIHR5cGXsl5Ag65Ok7Ja06rCIIOqwkiAtIOyCrOyaqe2VmOyngCDslYrsnYwuXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbm9kZVRvb2x0aXAgIFRvb2xUaXDsl5Ag65Ok7Ja06rCIIOuCtOyaqVxyXG4gICAgICogQHBhcmFtIHtjYWxsYmFja30gY2hhbmdlRXZlbnRGdW5jICDqsJLsnbQg67OA7ZWgIOuVjCDtmLjstpzrkJjslrTsp4ggY2FsbGJhY2tcclxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVhdGVBdHRyaWJ1dGVDb2xvcklucHV0Tm9kZShmaWVsZElkLCBmaWVsZFByb3BldHlOYW1lLCB0aXRsZSwgdmFsdWUsIHR5cGUsIG5vZGVUb29sdGlwLCBjaGFuZ2VFdmVudEZ1bmMpIHtcclxuICAgICAgICB2YXIgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xyXG4gICAgICAgIHJvdy5jbGFzc05hbWUgPSBDT05TVEFOVFMuRURJVE9SX0FUVFJfQ09OVEVOVFNfUk9XX0NMQVNTO1xyXG4gICAgICAgIHZhciB0aXRsZVdyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRpdGxlV3JhcC5jbGFzc05hbWUgPSBDT05TVEFOVFMuVElUTEVfV1JBUF9DTEFTUztcclxuICAgICAgICB2YXIgdGl0bGVTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgdGl0bGVTcGFuLmNsYXNzTmFtZSA9IENPTlNUQU5UUy5USVRMRV9DTEFTUztcclxuICAgICAgICB0aXRsZVNwYW4udGV4dENvbnRlbnQgPSB0aXRsZTtcclxuICAgICAgICB0aXRsZVdyYXAuYXBwZW5kQ2hpbGQodGl0bGVTcGFuKTtcclxuICAgICAgICB2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICAgICAgaW5wdXQuY2xhc3NOYW1lID0gQ09OU1RBTlRTLkVESVRPUl9BVFRSX0lOUFVUX0NMQVNTO1xyXG4gICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShcImRhdGEtZmllbGQtaWRcIiwgZmllbGRJZCk7XHJcbiAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKFwiZGF0YS1maWVsZC1wcm9wZXJ0eS1uYW1lXCIsIGZpZWxkUHJvcGV0eU5hbWUpO1xyXG4gICAgICAgIGlmICh2YWx1ZSAhPT0gXCJcIikge1xyXG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnB1dC50eXBlID0gXCJ0ZXh0XCI7XHJcbiAgICAgICAgaW5wdXQuaWQgPSBmaWVsZElkICsgXCJfY29sb3JcIjtcclxuICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYywgdHJ1ZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIGlucHV0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgICAgIGlucHV0QnRuLnR5cGUgPSBcImJ1dHRvblwiO1xyXG4gICAgICAgIHZhciBpbnB1dFdyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGlucHV0V3JhcC5jbGFzc05hbWUgPSBDT05TVEFOVFMuRURJVE9SX0FUVFJfSU5QVVRfV1JBUF9DTEFTUztcclxuICAgICAgICBpbnB1dFdyYXAuYXBwZW5kQ2hpbGQoaW5wdXQpO1xyXG4gICAgICAgIGlucHV0V3JhcC5hcHBlbmRDaGlsZChpbnB1dEJ0bik7XHJcblxyXG4gICAgICAgIHJvdy5hcHBlbmRDaGlsZCh0aXRsZVdyYXApO1xyXG4gICAgICAgIHJvdy5hcHBlbmRDaGlsZChpbnB1dFdyYXApO1xyXG4gICAgICAgIHJldHVybiByb3c7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gY3JlYXRlQXR0cmlidXRlVG9nZ2xlQnV0dG9uTm9kZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZUF0dHJpYnV0ZVRvZ2dsZUJ1dHRvbk5vZGVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSAg7ZWE65Oc7J2YIOyGjeyEseykkSBUb2dnbGUgYnV0dG9u7J2EIOyCrOyaqe2VmOuKlCBFbGVtZW5066W8IOunjOuToOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRJRCAg7IKs7Jqp7ZWgIEZpZWxk7J2YIElEXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRQcm9wZXR5TmFtZSAg7IKs7Jqp7ZWgIEZpZWxk7J2YIOyGjeyEsSDsnbTrpoRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZSAgRWxlbWVudOyXkCDsgqzsmqntlaAg7J2066aEXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWUgIGlucHV07JeQIOuTpOyWtOqwiCDqsJJcclxuICAgICAqIEBwYXJhbSB7Y2FsbGJhY2t9IGNoYW5nZUV2ZW50RnVuYyAg6rCS7J20IOuzgO2VoCDrlYwg7Zi47Lac65CY7Ja07KeIIGNhbGxiYWNrXHJcbiAgICAgKiBAcmV0dXJuIHtFbGVtZW50fVxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlYXRlQXR0cmlidXRlVG9nZ2xlQnV0dG9uTm9kZShmaWVsZElkLCBmaWVsZFByb3BldHlOYW1lLCB0aXRsZSwgdmFsdWUsIGNoYW5nZUV2ZW50RnVuYykge1xyXG4gICAgICAgIHZhciByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XHJcbiAgICAgICAgcm93LmNsYXNzTmFtZSA9IENPTlNUQU5UUy5FRElUT1JfQVRUUl9DT05URU5UU19ST1dfQ0xBU1M7XHJcbiAgICAgICAgdmFyIHJvd1dyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHJvd1dyYXAuY2xhc3NOYW1lID0gQ09OU1RBTlRTLkVESVRPUl9BVFRSX1JPV19XUkFQX0NMQVNTO1xyXG4gICAgICAgIHZhciB0aXRsZVNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICB0aXRsZVNwYW4uY2xhc3NOYW1lID0gQ09OU1RBTlRTLlRJVExFX0NMQVNTO1xyXG4gICAgICAgIHRpdGxlU3Bhbi50ZXh0Q29udGVudCA9IFV0aWxzLnRyYW5zbGF0ZUZvcktleSh0aXRsZSk7XHJcbiAgICAgICAgdGl0bGVTcGFuLnNldEF0dHJpYnV0ZShcImRhdGEtaTE4blwiLCB0aXRsZSk7XHJcbiAgICAgICAgcm93V3JhcC5hcHBlbmRDaGlsZCh0aXRsZVNwYW4pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBzd2l0Y2hMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcclxuICAgICAgICBzd2l0Y2hMYWJlbC5jbGFzc05hbWUgPSBDT05TVEFOVFMuU1dJVENIX0xBQkVMX0NMQVNTO1xyXG5cclxuICAgICAgICB2YXIgaW5wdXRUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgICAgIGlucHV0VGV4dC50eXBlID0gXCJ0ZXh0XCI7XHJcbiAgICAgICAgaW5wdXRUZXh0LnNldEF0dHJpYnV0ZShcImRhdGEtZmllbGQtaWRcIiwgZmllbGRJZCk7XHJcbiAgICAgICAgaW5wdXRUZXh0LnNldEF0dHJpYnV0ZShcImRhdGEtZmllbGQtcHJvcGVydHktbmFtZVwiLCBmaWVsZFByb3BldHlOYW1lKTtcclxuICAgICAgICBpbnB1dFRleHQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIGlucHV0VGV4dC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYywgdHJ1ZSk7XHJcblxyXG4gICAgICAgIHZhciBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgICAgICBpbnB1dC50eXBlID0gXCJjaGVja2JveFwiO1xyXG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICAgICAgICBpZiAoaW5wdXQuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgaW5wdXRUZXh0LnZhbHVlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlucHV0VGV4dC52YWx1ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlucHV0VGV4dC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImNoYW5nZVwiKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHZhbHVlID09PSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgaW5wdXQuY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGlucHV0VGV4dC52YWx1ZSA9IFwidHJ1ZVwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlucHV0LmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgaW5wdXRUZXh0LnZhbHVlID0gXCJmYWxzZVwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHNsaWRlclNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICBzbGlkZXJTcGFuLmNsYXNzTGlzdC5hZGQoQ09OU1RBTlRTLlNXSVRDSF9MQUJFTF9TTElERVJfQ0xBU1MpO1xyXG4gICAgICAgIHNsaWRlclNwYW4uY2xhc3NMaXN0LmFkZChDT05TVEFOVFMuU1dJVENIX0xBQkVMX1NMSURFUl9ST1VORF9DTEFTUyk7XHJcblxyXG4gICAgICAgIHN3aXRjaExhYmVsLmFwcGVuZENoaWxkKGlucHV0KTtcclxuICAgICAgICBzd2l0Y2hMYWJlbC5hcHBlbmRDaGlsZChzbGlkZXJTcGFuKTtcclxuXHJcbiAgICAgICAgcm93V3JhcC5hcHBlbmRDaGlsZChzd2l0Y2hMYWJlbCk7XHJcbiAgICAgICAgcm93V3JhcC5hcHBlbmRDaGlsZChpbnB1dFRleHQpO1xyXG4gICAgICAgIHJvdy5hcHBlbmRDaGlsZChyb3dXcmFwKTtcclxuICAgICAgICByZXR1cm4gcm93O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGNyZWF0ZUF0dHJpYnV0ZVNlbGVjdElubmVyTm9kZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZUF0dHJpYnV0ZVNlbGVjdElubmVyTm9kZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpICDtlYTrk5zsnZgg7IaN7ISx7KSRIFNlbGVjdOulvCDsgqzsmqntlZjripQgRWxlbWVudOulvCDrp4zrk6Dri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkSUQg7IKs7Jqp7ZWgIEZpZWxk7J2YIElEXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRQcm9wZXR5TmFtZSAg7IKs7Jqp7ZWgIEZpZWxk7J2YIOyGjeyEsSDsnbTrpoRcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IG9wdGlvbnMgW3t2YWx1ZTogXCJ2YWx1ZVwiLCB0ZXh0OiBcInRleHRcIn1dIHNlbGVjdOyXkCDsgqzsmqnrkJjripQgTWFwIEFycmF5XHJcbiAgICAgKiBAcGFyYW0geyBTdHJpbmd9IHRpdGxlIEVsZW1lbnTsl5Ag7IKs7Jqp7ZWgIOydtOumhFxyXG4gICAgICogQHBhcmFtIHtCb29sZWFufSB1c2VEZWZhdWxPcHRpb25Ob2RlIOuMgOyDgeyEoO2DneydhCDsgqzsmqntlaDsp4Ag7Jes67aAXHJcbiAgICAgKiBAcmV0dXJuIHtFbGVtZW50fVxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlYXRlQXR0cmlidXRlU2VsZWN0SW5uZXJOb2RlKGZpZWxkSWQsIGZpZWxkUHJvcGV0eU5hbWUsIG9wdGlvbnMsIHRpdGxlLCB1c2VEZWZhdWxPcHRpb25Ob2RlID0gdHJ1ZSkge1xyXG4gICAgICAgIHZhciByb3dXcmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICByb3dXcmFwLmNsYXNzTmFtZSA9IENPTlNUQU5UUy5FRElUT1JfQVRUUl9ST1dfV1JBUF9DTEFTUztcclxuXHJcbiAgICAgICAgaWYgKHRpdGxlICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgIHZhciB0aXRsZVdyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICB0aXRsZVdyYXAuY2xhc3NOYW1lID0gQ09OU1RBTlRTLlRJVExFX1dSQVBfQ0xBU1M7XHJcbiAgICAgICAgICAgIHZhciB0aXRsZVNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICAgICAgdGl0bGVTcGFuLmNsYXNzTmFtZSA9IENPTlNUQU5UUy5USVRMRV9DTEFTUztcclxuICAgICAgICAgICAgdGl0bGVTcGFuLnRleHRDb250ZW50ID0gVXRpbHMudHJhbnNsYXRlRm9yS2V5KHRpdGxlKTtcclxuICAgICAgICAgICAgdGl0bGVTcGFuLnNldEF0dHJpYnV0ZShcImRhdGEtaTE4blwiLCB0aXRsZSk7XHJcbiAgICAgICAgICAgIHRpdGxlV3JhcC5hcHBlbmRDaGlsZCh0aXRsZVNwYW4pO1xyXG4gICAgICAgICAgICByb3dXcmFwLmFwcGVuZENoaWxkKHRpdGxlV3JhcCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgc2VsZWN0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIik7XHJcbiAgICAgICAgc2VsZWN0Tm9kZS5jbGFzc05hbWUgPSBDT05TVEFOVFMuRURJVE9SX0FUVFJfU0VMRUNUX0NMQVNTO1xyXG4gICAgICAgIGlmICh1c2VEZWZhdWxPcHRpb25Ob2RlKSB7XHJcbiAgICAgICAgICAgIHZhciBkZWZhdWx0T3B0aW9uTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XHJcbiAgICAgICAgICAgIGRlZmF1bHRPcHRpb25Ob2RlLnZhbHVlID0gXCJcIjtcclxuICAgICAgICAgICAgZGVmYXVsdE9wdGlvbk5vZGUudGV4dCA9IFV0aWxzLnRyYW5zbGF0ZUZvcktleShcIlRlbXBsYXRlLnNlbGVjdERlZmF1bHRUZXh0XCIpO1xyXG4gICAgICAgICAgICBkZWZhdWx0T3B0aW9uTm9kZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWkxOG5cIiwgXCJUZW1wbGF0ZS5zZWxlY3REZWZhdWx0VGV4dFwiKTtcclxuICAgICAgICAgICAgc2VsZWN0Tm9kZS5hcHBlbmRDaGlsZChkZWZhdWx0T3B0aW9uTm9kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IG9wdGlvbnMubGVuZ3RoOyBpZHgrKykge1xyXG4gICAgICAgICAgICB2YXIgb3B0aW9uTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XHJcbiAgICAgICAgICAgIG9wdGlvbk5vZGUudmFsdWUgPSBvcHRpb25zW2lkeF0udmFsdWU7XHJcbiAgICAgICAgICAgIG9wdGlvbk5vZGUudGV4dCA9IG9wdGlvbnNbaWR4XS50ZXh0O1xyXG4gICAgICAgICAgICBzZWxlY3ROb2RlLmFwcGVuZENoaWxkKG9wdGlvbk5vZGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2VsZWN0Tm9kZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWZpZWxkLWlkXCIsIGZpZWxkSWQpO1xyXG4gICAgICAgIHNlbGVjdE5vZGUuc2V0QXR0cmlidXRlKFwiZGF0YS1maWVsZC1wcm9wZXJ0eS1uYW1lXCIsIGZpZWxkUHJvcGV0eU5hbWUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJvd1dyYXAuYXBwZW5kQ2hpbGQoc2VsZWN0Tm9kZSk7XHJcbiAgICAgICAgcmV0dXJuIHJvd1dyYXA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gY3JlYXRlQXR0cmlidXRlU2VsZWN0Tm9kZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZUF0dHJpYnV0ZVNlbGVjdE5vZGVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSAgIO2VhOuTnOydmCDsho3shLHspJEgU2VsZWN066W8IOyCrOyaqe2VmOuKlCBFbGVtZW5066W8IGxp66GcIOqwkOyLuOyEnCDrp4zrk6Dri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkSUQg7IKs7Jqp7ZWgIEZpZWxk7J2YIElEXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRQcm9wZXR5TmFtZSDsgqzsmqntlaAgRmllbGTsnZgg7IaN7ISxIOydtOumhFxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gb3B0aW9ucyBbe3ZhbHVlOiBcInZhbHVlXCIsIHRleHQ6IFwidGV4dFwifV0gOiBzZWxlY3Tsl5Ag7IKs7Jqp65CY64qUIE1hcCBBcnJheVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRpdGxlICBFbGVtZW507JeQIOyCrOyaqe2VoCDsnbTrpoRcclxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gdXNlRGVmYXVsT3B0aW9uTm9kZSDrjIDsg4HshKDtg53snYQg7IKs7Jqp7ZWg7KeAIOyXrOu2gFxyXG4gICAgICogQHJldHVybiB7RWxlbWVudH1cclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWF0ZUF0dHJpYnV0ZVNlbGVjdE5vZGUoZmllbGRJZCwgZmllbGRQcm9wZXR5TmFtZSwgb3B0aW9ucywgdGl0bGUsIHVzZURlZmF1bE9wdGlvbk5vZGUgPSB0cnVlKSB7XHJcbiAgICAgICAgdmFyIHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuICAgICAgICByb3cuY2xhc3NOYW1lID0gQ09OU1RBTlRTLkVESVRPUl9BVFRSX0NPTlRFTlRTX1JPV19DTEFTUztcclxuICAgICAgICB2YXIgcm93V3JhcCA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVNlbGVjdElubmVyTm9kZShmaWVsZElkLCBmaWVsZFByb3BldHlOYW1lLCBvcHRpb25zLCB0aXRsZSwgdXNlRGVmYXVsT3B0aW9uTm9kZSk7XHJcbiAgICAgICAgcm93LmFwcGVuZENoaWxkKHJvd1dyYXApO1xyXG4gICAgICAgIHJldHVybiByb3c7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gY3JlYXRlRGl2aWRlck5vZGVcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjcmVhdGVEaXZpZGVyTm9kZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpICAgbGnsnZgg6rWs67aE7J6Q66W8IOunjOuToOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIHtFbGVtZW50fVxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlYXRlRGl2aWRlck5vZGUoKSB7XHJcbiAgICAgICAgdmFyIGRpdmlkZXJSb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XHJcbiAgICAgICAgZGl2aWRlclJvdy5jbGFzc05hbWUgPSBDT05TVEFOVFMuRElWSURFUl9DTEFTUztcclxuICAgICAgICByZXR1cm4gZGl2aWRlclJvdztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBjcmVhdGVUZXh0QWxpZ25CdXR0b25Ob2RlXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjY3JlYXRlVGV4dEFsaWduQnV0dG9uTm9kZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpICAg7ZWE65Oc7J2YIOyGjeyEseykkSBUZXh0IEFsaWduIEJ1dHRvbiBFbGVtZW507J2EIOunjOuToOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRJRCAg7IKs7Jqp7ZWgIEZpZWxk7J2YIElEXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWUgIO2YhOyerOydmCB0ZXh0IGFsaWduIOqwklxyXG4gICAgICogQHBhcmFtIHtjYWxsYmFja30gY2hhbmdlRXZlbnRGdW5jIOqwkuydtCDrs4DtlaAg65WMIO2YuOy2nOuQmOyWtOyniCBjYWxsYmFja1xyXG4gICAgICogQHJldHVybiB7RWxlbWVudH1cclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWF0ZVRleHRBbGlnbkJ1dHRvbk5vZGUoZmllbGRJZCwgdmFsdWUsIGNoYW5nZUV2ZW50RnVuYykge1xyXG4gICAgICAgIHZhciByb3dXcmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICByb3dXcmFwLmNsYXNzTmFtZSA9IENPTlNUQU5UUy5FRElUT1JfQVRUUl9ST1dfV1JBUF9DTEFTUztcclxuXHJcbiAgICAgICAgdmFyIHRpdGxlV3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGl0bGVXcmFwLmNsYXNzTmFtZSA9IENPTlNUQU5UUy5USVRMRV9XUkFQX0NMQVNTO1xyXG4gICAgICAgIHZhciB0aXRsZVNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICB0aXRsZVNwYW4uY2xhc3NOYW1lID0gQ09OU1RBTlRTLlRJVExFX0NMQVNTO1xyXG4gICAgICAgIHRpdGxlU3Bhbi50ZXh0Q29udGVudCA9IFV0aWxzLnRyYW5zbGF0ZUZvcktleShcIlRlbXBsYXRlLnRleHRBbGlnblRleHRcIik7XHJcbiAgICAgICAgdGl0bGVTcGFuLnNldEF0dHJpYnV0ZShcImRhdGEtaTE4blwiLCBcIlRlbXBsYXRlLnRleHRBbGlnblRleHRcIik7XHJcbiAgICAgICAgdGl0bGVXcmFwLmFwcGVuZENoaWxkKHRpdGxlU3Bhbik7XHJcbiAgICAgICAgcm93V3JhcC5hcHBlbmRDaGlsZCh0aXRsZVdyYXApO1xyXG5cclxuICAgICAgICB2YXIgYnRuc1dyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHZhciBsZWZ0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICBsZWZ0QnRuLmNsYXNzTGlzdC5hZGQoXCJUZW1wbGF0ZS1CdXR0b25cIik7XHJcbiAgICAgICAgbGVmdEJ0bi5jbGFzc0xpc3QuYWRkKFwiVGV4dC1BbGlnbi1MZWZ0XCIpO1xyXG4gICAgICAgIGxlZnRCdG4uY2xhc3NMaXN0LmFkZChcIlRvZ2dsZS1CdXR0b25cIik7XHJcblxyXG4gICAgICAgIHZhciBsZWZ0SWNvbkJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpXCIpO1xyXG4gICAgICAgIGxlZnRCdG4uYXBwZW5kQ2hpbGQobGVmdEljb25CdG4pO1xyXG5cclxuICAgICAgICB2YXIgY2VudGVyQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICBjZW50ZXJCdG4uY2xhc3NMaXN0LmFkZChcIlRlbXBsYXRlLUJ1dHRvblwiKTtcclxuICAgICAgICBjZW50ZXJCdG4uY2xhc3NMaXN0LmFkZChcIlRleHQtQWxpZ24tQ2VudGVyXCIpO1xyXG4gICAgICAgIGNlbnRlckJ0bi5jbGFzc0xpc3QuYWRkKFwiVG9nZ2xlLUJ1dHRvblwiKTtcclxuXHJcbiAgICAgICAgdmFyIGNlbnRlckljb25CdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaVwiKTtcclxuICAgICAgICBjZW50ZXJCdG4uYXBwZW5kQ2hpbGQoY2VudGVySWNvbkJ0bik7XHJcblxyXG4gICAgICAgIHZhciByaWdodEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgcmlnaHRCdG4uY2xhc3NMaXN0LmFkZChcIlRlbXBsYXRlLUJ1dHRvblwiKTtcclxuICAgICAgICByaWdodEJ0bi5jbGFzc0xpc3QuYWRkKFwiVGV4dC1BbGlnbi1SaWdodFwiKTtcclxuICAgICAgICByaWdodEJ0bi5jbGFzc0xpc3QuYWRkKFwiVG9nZ2xlLUJ1dHRvblwiKTtcclxuXHJcbiAgICAgICAgdmFyIHJpZ2h0SWNvbkJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpXCIpO1xyXG4gICAgICAgIHJpZ2h0QnRuLmFwcGVuZENoaWxkKHJpZ2h0SWNvbkJ0bik7XHJcblxyXG4gICAgICAgIHN3aXRjaCAodmFsdWUpIHtcclxuICAgICAgICAgICAgY2FzZSBcImxlZnRcIjpcclxuICAgICAgICAgICAgICAgIGxlZnRCdG4uY2xhc3NMaXN0LmFkZChcIlNlbGVjdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJjZW50ZXJcIjpcclxuICAgICAgICAgICAgICAgIGNlbnRlckJ0bi5jbGFzc0xpc3QuYWRkKFwiU2VsZWN0ZWRcIik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInJpZ2h0XCI6XHJcbiAgICAgICAgICAgICAgICByaWdodEJ0bi5jbGFzc0xpc3QuYWRkKFwiU2VsZWN0ZWRcIik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBpbnB1dE5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICAgICAgaW5wdXROb2RlLnR5cGUgPSBcInRleHRcIjtcclxuICAgICAgICBpbnB1dE5vZGUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIGlucHV0Tm9kZS52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIGlucHV0Tm9kZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWZpZWxkLWlkXCIsIGZpZWxkSWQpO1xyXG4gICAgICAgIGlucHV0Tm9kZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWZpZWxkLXByb3BlcnR5LW5hbWVcIiwgXCJ0ZXh0QWxpZ25cIik7XHJcbiAgICAgICAgaW5wdXROb2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuXHJcbiAgICAgICAgbGVmdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICAgICAgICBpbnB1dE5vZGUudmFsdWUgPSBcImxlZnRcIjtcclxuICAgICAgICAgICAgaW5wdXROb2RlLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiY2hhbmdlXCIpKTtcclxuICAgICAgICAgICAgaWYgKCFsZWZ0QnRuLmNsYXNzTGlzdC5jb250YWlucyhcIlNlbGVjdGVkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBsZWZ0QnRuLmNsYXNzTGlzdC50b2dnbGUoXCJTZWxlY3RlZFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocmlnaHRCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKFwiU2VsZWN0ZWRcIikpIHtcclxuICAgICAgICAgICAgICAgIHJpZ2h0QnRuLmNsYXNzTGlzdC50b2dnbGUoXCJTZWxlY3RlZFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2VudGVyQnRuLmNsYXNzTGlzdC5jb250YWlucyhcIlNlbGVjdGVkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBjZW50ZXJCdG4uY2xhc3NMaXN0LnRvZ2dsZShcIlNlbGVjdGVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNlbnRlckJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICAgICAgICBpbnB1dE5vZGUudmFsdWUgPSBcImNlbnRlclwiO1xyXG4gICAgICAgICAgICBpbnB1dE5vZGUuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJjaGFuZ2VcIikpO1xyXG4gICAgICAgICAgICBpZiAoIWNlbnRlckJ0bi5jbGFzc0xpc3QuY29udGFpbnMoXCJTZWxlY3RlZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgY2VudGVyQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJTZWxlY3RlZFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocmlnaHRCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKFwiU2VsZWN0ZWRcIikpIHtcclxuICAgICAgICAgICAgICAgIHJpZ2h0QnRuLmNsYXNzTGlzdC50b2dnbGUoXCJTZWxlY3RlZFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobGVmdEJ0bi5jbGFzc0xpc3QuY29udGFpbnMoXCJTZWxlY3RlZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgbGVmdEJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiU2VsZWN0ZWRcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmlnaHRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgaW5wdXROb2RlLnZhbHVlID0gXCJyaWdodFwiO1xyXG4gICAgICAgICAgICBpbnB1dE5vZGUuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJjaGFuZ2VcIikpO1xyXG4gICAgICAgICAgICBpZiAoIXJpZ2h0QnRuLmNsYXNzTGlzdC5jb250YWlucyhcIlNlbGVjdGVkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICByaWdodEJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiU2VsZWN0ZWRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGxlZnRCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKFwiU2VsZWN0ZWRcIikpIHtcclxuICAgICAgICAgICAgICAgIGxlZnRCdG4uY2xhc3NMaXN0LnRvZ2dsZShcIlNlbGVjdGVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjZW50ZXJCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKFwiU2VsZWN0ZWRcIikpIHtcclxuICAgICAgICAgICAgICAgIGNlbnRlckJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiU2VsZWN0ZWRcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGJ0bnNXcmFwLmFwcGVuZENoaWxkKGxlZnRCdG4pO1xyXG4gICAgICAgIGJ0bnNXcmFwLmFwcGVuZENoaWxkKGNlbnRlckJ0bik7XHJcbiAgICAgICAgYnRuc1dyYXAuYXBwZW5kQ2hpbGQocmlnaHRCdG4pO1xyXG4gICAgICAgIGJ0bnNXcmFwLmFwcGVuZENoaWxkKGlucHV0Tm9kZSk7XHJcblxyXG4gICAgICAgIHJvd1dyYXAuYXBwZW5kQ2hpbGQoYnRuc1dyYXApO1xyXG4gICAgICAgIHJldHVybiByb3dXcmFwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGNyZWF0ZVRleHRCb2xkQnV0dG9uTm9kZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZVRleHRCb2xkQnV0dG9uTm9kZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpICDtlYTrk5zsnZgg7IaN7ISx7KSRIFRleHQgQm9sZCB0b2dnbGUgQnV0dG9uIEVsZW1lbnTsnYQg66eM65Og64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZElEICDsgqzsmqntlaAgRmllbGTsnZggSURcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZSAg7ZiE7J6s7J2YIHRleHQgYm9sZCDqsJJcclxuICAgICAqIEBwYXJhbSB7Y2FsbGJhY2t9IGNoYW5nZUV2ZW50RnVuYyDqsJLsnbQg67OA7ZWgIOuVjCDtmLjstpzrkJjslrTsp4ggY2FsbGJhY2tcclxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVhdGVUZXh0Qm9sZEJ1dHRvbk5vZGUoZmllbGRJZCwgdmFsdWUsIGNoYW5nZUV2ZW50RnVuYykge1xyXG4gICAgICAgIHZhciByb3dXcmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICByb3dXcmFwLmNsYXNzTmFtZSA9IENPTlNUQU5UUy5FRElUT1JfQVRUUl9ST1dfV1JBUF9DTEFTUztcclxuXHJcbiAgICAgICAgdmFyIHRpdGxlV3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGl0bGVXcmFwLmNsYXNzTmFtZSA9IENPTlNUQU5UUy5USVRMRV9XUkFQX0NMQVNTO1xyXG4gICAgICAgIHZhciB0aXRsZVNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICB0aXRsZVNwYW4uY2xhc3NOYW1lID0gQ09OU1RBTlRTLlRJVExFX0NMQVNTO1xyXG4gICAgICAgIHRpdGxlU3Bhbi50ZXh0Q29udGVudCA9IFV0aWxzLnRyYW5zbGF0ZUZvcktleShcIlRlbXBsYXRlLmJvbGRUZXh0XCIpO1xyXG4gICAgICAgIHRpdGxlU3Bhbi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWkxOG5cIiwgXCJUZW1wbGF0ZS5ib2xkVGV4dFwiKTtcclxuICAgICAgICB0aXRsZVdyYXAuYXBwZW5kQ2hpbGQodGl0bGVTcGFuKTtcclxuICAgICAgICByb3dXcmFwLmFwcGVuZENoaWxkKHRpdGxlV3JhcCk7XHJcblxyXG4gICAgICAgIHZhciBidG5zV3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdmFyIGJvbGRCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgIGJvbGRCdG4uY2xhc3NMaXN0LmFkZChcIlRlbXBsYXRlLUJ1dHRvblwiKTtcclxuICAgICAgICBib2xkQnRuLmNsYXNzTGlzdC5hZGQoXCJUZXh0LUJvbGQtQnV0dG9uXCIpO1xyXG4gICAgICAgIGJvbGRCdG4uY2xhc3NMaXN0LmFkZChcIlRvZ2dsZS1CdXR0b25cIik7XHJcblxyXG4gICAgICAgIHZhciBib2xkQnRuSWNvbkJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpXCIpO1xyXG4gICAgICAgIGJvbGRCdG4uYXBwZW5kQ2hpbGQoYm9sZEJ0bkljb25CdG4pO1xyXG5cclxuICAgICAgICBpZiAodmFsdWUgPT09IFwidHJ1ZVwiKSB7XHJcbiAgICAgICAgICAgIGJvbGRCdG4uY2xhc3NMaXN0LmFkZChcIlNlbGVjdGVkXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGlucHV0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgICAgICBpbnB1dE5vZGUudHlwZSA9IFwidGV4dFwiO1xyXG4gICAgICAgIGlucHV0Tm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgaW5wdXROb2RlLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgaW5wdXROb2RlLnNldEF0dHJpYnV0ZShcImRhdGEtZmllbGQtaWRcIiwgZmllbGRJZCk7XHJcbiAgICAgICAgaW5wdXROb2RlLnNldEF0dHJpYnV0ZShcImRhdGEtZmllbGQtcHJvcGVydHktbmFtZVwiLCBcImJvbGRcIik7XHJcbiAgICAgICAgaW5wdXROb2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgY2hhbmdlRXZlbnRGdW5jKTtcclxuXHJcbiAgICAgICAgYm9sZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICAgICAgICBpZiAoIWJvbGRCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKFwiU2VsZWN0ZWRcIikpIHtcclxuICAgICAgICAgICAgICAgIGlucHV0Tm9kZS52YWx1ZSA9IFwidHJ1ZVwiO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaW5wdXROb2RlLnZhbHVlID0gXCJmYWxzZVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlucHV0Tm9kZS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImNoYW5nZVwiKSk7XHJcbiAgICAgICAgICAgIGJvbGRCdG4uY2xhc3NMaXN0LnRvZ2dsZShcIlNlbGVjdGVkXCIpO1xyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYnRuc1dyYXAuYXBwZW5kQ2hpbGQoYm9sZEJ0bik7XHJcbiAgICAgICAgYnRuc1dyYXAuYXBwZW5kQ2hpbGQoaW5wdXROb2RlKTtcclxuXHJcbiAgICAgICAgcm93V3JhcC5hcHBlbmRDaGlsZChidG5zV3JhcCk7XHJcbiAgICAgICAgcmV0dXJuIHJvd1dyYXA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gY3JlYXRlVGV4dENvbG9yQnV0dG9uTm9kZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZVRleHRDb2xvckJ1dHRvbk5vZGVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSAg7ZWE65Oc7J2YIOyGjeyEseykkSBUZXh0IENvbG9yIHBpY2tlciBFbGVtZW507J2EIOunjOuToOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRJRCAg7IKs7Jqp7ZWgIEZpZWxk7J2YIElEXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWUgIO2YhOyerOydmCB0ZXh0IGNvbG9yIOqwklxyXG4gICAgICogQHBhcmFtIHtjYWxsYmFja30gY2hhbmdlRXZlbnRGdW5jIOqwkuydtCDrs4DtlaAg65WMIO2YuOy2nOuQmOyWtOyniCBjYWxsYmFja1xyXG4gICAgICogQHJldHVybiB7RWxlbWVudH1cclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWF0ZVRleHRDb2xvckJ1dHRvbk5vZGUoZmllbGRJZCwgdGl0bGUsIHZhbHVlLCBjaGFuZ2VFdmVudEZ1bmMpIHtcclxuICAgICAgICB2YXIgcm93V3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgcm93V3JhcC5jbGFzc05hbWUgPSBDT05TVEFOVFMuRURJVE9SX0FUVFJfUk9XX1dSQVBfQ0xBU1M7XHJcblxyXG4gICAgICAgIHZhciB0aXRsZVdyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRpdGxlV3JhcC5jbGFzc05hbWUgPSBDT05TVEFOVFMuVElUTEVfV1JBUF9DTEFTUztcclxuICAgICAgICB2YXIgdGl0bGVTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgdGl0bGVTcGFuLmNsYXNzTmFtZSA9IENPTlNUQU5UUy5USVRMRV9DTEFTUztcclxuICAgICAgICB0aXRsZVNwYW4udGV4dENvbnRlbnQgPSBVdGlscy50cmFuc2xhdGVGb3JLZXkodGl0bGUpO1xyXG4gICAgICAgIHRpdGxlU3Bhbi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWkxOG5cIiwgdGl0bGUpO1xyXG4gICAgICAgIHRpdGxlV3JhcC5hcHBlbmRDaGlsZCh0aXRsZVNwYW4pO1xyXG4gICAgICAgIHJvd1dyYXAuYXBwZW5kQ2hpbGQodGl0bGVXcmFwKTtcclxuXHJcbiAgICAgICAgdmFyIGJ0bnNXcmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBidG5zV3JhcC5jbGFzc05hbWUgPSBcIkNvbG9yLUJ1dHRvbi1XcmFwXCI7XHJcblxyXG4gICAgICAgIHZhciBib2xkQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICBib2xkQnRuLmNsYXNzTGlzdC5hZGQoXCJUZW1wbGF0ZS1CdXR0b25cIik7XHJcbiAgICAgICAgYm9sZEJ0bi5jbGFzc0xpc3QuYWRkKFwiQ29sb3ItQnV0dG9uXCIpO1xyXG5cclxuICAgICAgICB2YXIgaW5wdXROb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgICAgIGlucHV0Tm9kZS50eXBlID0gXCJ0ZXh0XCI7XHJcbiAgICAgICAgaW5wdXROb2RlLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICBpbnB1dE5vZGUudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICBpbnB1dE5vZGUuc2V0QXR0cmlidXRlKFwiZGF0YS1maWVsZC1pZFwiLCBmaWVsZElkKTtcclxuICAgICAgICBpbnB1dE5vZGUuc2V0QXR0cmlidXRlKFwiZGF0YS1maWVsZC1wcm9wZXJ0eS1uYW1lXCIsIFwiZm9udENvbG9yXCIpO1xyXG4gICAgICAgIGlucHV0Tm9kZS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGNoYW5nZUV2ZW50RnVuYyk7XHJcblxyXG4gICAgICAgIGJ0bnNXcmFwLmFwcGVuZENoaWxkKGJvbGRCdG4pO1xyXG4gICAgICAgIGJ0bnNXcmFwLmFwcGVuZENoaWxkKGlucHV0Tm9kZSk7XHJcblxyXG4gICAgICAgIHJvd1dyYXAuYXBwZW5kQ2hpbGQoYnRuc1dyYXApO1xyXG4gICAgICAgIHJldHVybiByb3dXcmFwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGNyZWF0ZVRleHRBdHRyYnV0ZU5vZGVcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNjcmVhdGVUZXh0QXR0cmJ1dGVOb2RlXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgIO2VhOuTnOydmCDsho3shLHspJEgVGV4dCDsho3shLHsnZggRWxlbWVudOuTpOydhCDrp4zrk6Dri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkSUQgIOyCrOyaqe2VoCBGaWVsZOydmCBJRFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZvbnRDb2xvciAg7ZiE7J6s7J2YIEZvbnQgQ29sb3Ig6rCSXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZm9udEFsaWduICDtmITsnqzsnZggdGV4dCBhbGlnbiDqsJJcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBpc0JvbGQgIO2YhOyerOydmCB0ZXh0IGJvbGQg6rCSXHJcbiAgICAgKiBAcGFyYW0ge2NhbGxiYWNrfSBjaGFuZ2VFdmVudEZ1bmMgIOqwkuydtCDrs4DtlaAg65WMIO2YuOy2nOuQmOyWtOyniCBjYWxsYmFja1xyXG4gICAgICogQHJldHVybiB7RWxlbWVudH1cclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWF0ZVRleHRBdHRyYnV0ZU5vZGUoZmllbGRJZCwgZm9udENvbG9yLCBmb250QWxpZ24sIGlzQm9sZCwgY2hhbmdlRXZlbnRGdW5jKSB7XHJcbiAgICAgICAgdmFyIHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuICAgICAgICByb3cuY2xhc3NOYW1lID0gQ09OU1RBTlRTLkVESVRPUl9BVFRSX0NPTlRFTlRTX1JPV19DTEFTUztcclxuICAgICAgICB2YXIgcm93V3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgcm93V3JhcC5jbGFzc05hbWUgPSBDT05TVEFOVFMuRURJVE9SX0FUVFJfUk9XX1dSQVBfQ0xBU1M7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIGZvbnRBdHRyVGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGFibGVcIik7XHJcbiAgICAgICAgZm9udEF0dHJUYWJsZS5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xyXG4gICAgICAgIHZhciByb3cxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpO1xyXG4gICAgICAgIHZhciBjb2wxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xyXG4gICAgICAgIGNvbDEuc3R5bGUucGFkZGluZ1JpZ2h0ID0gXCIxMHB4XCI7XHJcbiAgICAgICAgY29sMS5jb2xTcGFuID0gNDtcclxuICAgICAgICB2YXIgZm9udEZhbWlseUNvbWJvID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlU2VsZWN0SW5uZXJOb2RlKGZpZWxkSWQsIFwiZm9udE5hbWVcIiwgVXRpbHMuZm9udEZhbWlseUNvbWJvQm94LCBcIlRlbXBsYXRlLmZvbnROYW1lVGV4dFwiLCBmYWxzZSk7XHJcbiAgICAgICAgY29sMS5hcHBlbmRDaGlsZChmb250RmFtaWx5Q29tYm8pO1xyXG4gICAgICAgIHJvdzEuYXBwZW5kQ2hpbGQoY29sMSk7XHJcblxyXG4gICAgICAgIHZhciBjb2wyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xyXG4gICAgICAgIGNvbDIuY29sU3BhbiA9IDQ7XHJcbiAgICAgICAgdmFyIGZvbnRTaXplQ29tYm8gPSBVdGlscy5jcmVhdGVBdHRyaWJ1dGVTZWxlY3RJbm5lck5vZGUoZmllbGRJZCwgXCJmb250U2l6ZVwiLCBVdGlscy5nZXRGb25TaXplQ29tYm9Cb3goKSwgXCJUZW1wbGF0ZS5mb250U2l6ZVRleHRcIiwgZmFsc2UpO1xyXG4gICAgICAgIGNvbDIuYXBwZW5kQ2hpbGQoZm9udFNpemVDb21ibyk7XHJcbiAgICAgICAgcm93MS5hcHBlbmRDaGlsZChjb2wyKTtcclxuXHJcbiAgICAgICAgZm9udEF0dHJUYWJsZS5hcHBlbmRDaGlsZChyb3cxKTtcclxuXHJcbiAgICAgICAgdmFyIHJvdzIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidHJcIik7XHJcbiAgICAgICAgdmFyIGNvbDMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgICAgICAgY29sMy5zdHlsZS5wYWRkaW5nUmlnaHQgPSBcIjEwcHhcIjtcclxuICAgICAgICBjb2wzLnN0eWxlLnBhZGRpbmdUb3AgPSBcIjIwcHhcIjtcclxuICAgICAgICBjb2wzLmNvbFNwYW4gPSA0O1xyXG4gICAgICAgIHJvdzIuYXBwZW5kQ2hpbGQoY29sMyk7XHJcblxyXG4gICAgICAgIHZhciBhbGlnbkJ0bnNOb2RlID0gVXRpbHMuY3JlYXRlVGV4dEFsaWduQnV0dG9uTm9kZShmaWVsZElkLCBmb250QWxpZ24sIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgY29sMy5hcHBlbmRDaGlsZChhbGlnbkJ0bnNOb2RlKTtcclxuXHJcbiAgICAgICAgdmFyIGNvbDQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgICAgICAgY29sNC5zdHlsZS5wYWRkaW5nUmlnaHQgPSBcIjEwcHhcIjtcclxuICAgICAgICBjb2w0LnN0eWxlLnBhZGRpbmdUb3AgPSBcIjIwcHhcIjtcclxuICAgICAgICBjb2w0LmNvbFNwYW4gPSAyO1xyXG4gICAgICAgIHZhciBib2xkQnRuTm9kZSA9IFV0aWxzLmNyZWF0ZVRleHRCb2xkQnV0dG9uTm9kZShmaWVsZElkLCBpc0JvbGQsIGNoYW5nZUV2ZW50RnVuYyk7XHJcbiAgICAgICAgY29sNC5hcHBlbmRDaGlsZChib2xkQnRuTm9kZSk7XHJcbiAgICAgICAgcm93Mi5hcHBlbmRDaGlsZChjb2w0KTtcclxuXHJcbiAgICAgICAgdmFyIGNvbDUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgICAgICAgY29sNS5zdHlsZS5wYWRkaW5nUmlnaHQgPSBcIjEwcHhcIjtcclxuICAgICAgICBjb2w1LnN0eWxlLnBhZGRpbmdUb3AgPSBcIjIwcHhcIjtcclxuICAgICAgICBjb2w1LmNvbFNwYW4gPSAyO1xyXG4gICAgICAgIHZhciBjb2xvckJ0bk5vZGUgPSBVdGlscy5jcmVhdGVUZXh0Q29sb3JCdXR0b25Ob2RlKGZpZWxkSWQsIFwiVGVtcGxhdGUuY29sb3JUZXh0XCIsIGZvbnRDb2xvciwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgICAgICBjb2w1LmFwcGVuZENoaWxkKGNvbG9yQnRuTm9kZSk7XHJcbiAgICAgICAgcm93Mi5hcHBlbmRDaGlsZChjb2w1KTtcclxuXHJcbiAgICAgICAgZm9udEF0dHJUYWJsZS5hcHBlbmRDaGlsZChyb3cyKTtcclxuICAgICAgICByb3dXcmFwLmFwcGVuZENoaWxkKGZvbnRBdHRyVGFibGUpO1xyXG4gICAgICAgIHJvdy5hcHBlbmRDaGlsZChyb3dXcmFwKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByb3c6IHJvdyxcclxuICAgICAgICAgICAgZm9udEZhbWlseUNvbWJvOiBmb250RmFtaWx5Q29tYm8sXHJcbiAgICAgICAgICAgIGZvbnRTaXplQ29tYm86IGZvbnRTaXplQ29tYm8sXHJcbiAgICAgICAgICAgIGNvbG9yQnRuOiBjb2xvckJ0bk5vZGVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBjcmVhdGVUZXh0QXR0cmJ1dGVOb2RlXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjY3JlYXRlVGV4dE1lbW9BdHRyYnV0ZU5vZGVcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSAg66mU66qoIOyGjeyEseydmCBFbGVtZW5065Ok7J2EIOunjOuToOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmllbGRJRCAg7IKs7Jqp7ZWgIEZpZWxk7J2YIElEXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZm9udENvbG9yICDtmITsnqzsnZggRm9udCBDb2xvciDqsJJcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmb250QWxpZ24gIO2YhOyerOydmCB0ZXh0IGFsaWduIOqwklxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGlzQm9sZCAg7ZiE7J6s7J2YIHRleHQgYm9sZCDqsJJcclxuICAgICAqIEBwYXJhbSB7Y2FsbGJhY2t9IGNoYW5nZUV2ZW50RnVuYyAg6rCS7J20IOuzgO2VoCDrlYwg7Zi47Lac65CY7Ja07KeIIGNhbGxiYWNrXHJcbiAgICAgKiBAcmV0dXJuIHtFbGVtZW50fVxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICAgc3RhdGljIGNyZWF0ZVRleHRNZW1vQXR0cmJ1dGVOb2RlKGZpZWxkSWQsIGZvbnRDb2xvciwgaXNCb2xkLCBiYWNrZ3JvdW5kQ29sb3IsIGNoYW5nZUV2ZW50RnVuYykge1xyXG4gICAgICAgIGxldCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XHJcbiAgICAgICAgcm93LmNsYXNzTmFtZSA9IENPTlNUQU5UUy5FRElUT1JfQVRUUl9DT05URU5UU19ST1dfQ0xBU1M7XHJcbiAgICAgICAgbGV0IHJvd1dyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHJvd1dyYXAuY2xhc3NOYW1lID0gQ09OU1RBTlRTLkVESVRPUl9BVFRSX1JPV19XUkFQX0NMQVNTO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBmb250QXR0clRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRhYmxlXCIpO1xyXG4gICAgICAgIGZvbnRBdHRyVGFibGUuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcclxuICAgICAgICBsZXQgcm93MSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKTtcclxuICAgICAgICBsZXQgY29sMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcclxuICAgICAgICBjb2wxLnN0eWxlLnBhZGRpbmdSaWdodCA9IFwiMTBweFwiO1xyXG4gICAgICAgIGNvbDEuY29sU3BhbiA9IDQ7XHJcbiAgICAgICAgbGV0IGZvbnRGYW1pbHlDb21ibyA9IFV0aWxzLmNyZWF0ZUF0dHJpYnV0ZVNlbGVjdElubmVyTm9kZShmaWVsZElkLCBcImZvbnROYW1lXCIsIFV0aWxzLmZvbnRGYW1pbHlDb21ib0JveCwgXCJUZW1wbGF0ZS5mb250TmFtZVRleHRcIiwgZmFsc2UpO1xyXG4gICAgICAgIGNvbDEuYXBwZW5kQ2hpbGQoZm9udEZhbWlseUNvbWJvKTtcclxuICAgICAgICByb3cxLmFwcGVuZENoaWxkKGNvbDEpO1xyXG5cclxuICAgICAgICBsZXQgY29sMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcclxuICAgICAgICBjb2wyLmNvbFNwYW4gPSA0O1xyXG4gICAgICAgIGxldCBmb250U2l6ZUNvbWJvID0gVXRpbHMuY3JlYXRlQXR0cmlidXRlU2VsZWN0SW5uZXJOb2RlKGZpZWxkSWQsIFwiZm9udFNpemVcIiwgVXRpbHMuZ2V0Rm9uU2l6ZUNvbWJvQm94KCksIFwiVGVtcGxhdGUuZm9udFNpemVUZXh0XCIsIGZhbHNlKTtcclxuICAgICAgICBjb2wyLmFwcGVuZENoaWxkKGZvbnRTaXplQ29tYm8pO1xyXG4gICAgICAgIHJvdzEuYXBwZW5kQ2hpbGQoY29sMik7XHJcblxyXG4gICAgICAgIGZvbnRBdHRyVGFibGUuYXBwZW5kQ2hpbGQocm93MSk7XHJcblxyXG4gICAgICAgIGxldCByb3cyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpO1xyXG5cclxuICAgICAgICBsZXQgY29sNCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcclxuICAgICAgICBjb2w0LnN0eWxlLnBhZGRpbmdSaWdodCA9IFwiMTBweFwiO1xyXG4gICAgICAgIGNvbDQuc3R5bGUucGFkZGluZ1RvcCA9IFwiMjBweFwiO1xyXG4gICAgICAgIGNvbDQuY29sU3BhbiA9IDI7XHJcbiAgICAgICAgbGV0IGJvbGRCdG5Ob2RlID0gVXRpbHMuY3JlYXRlVGV4dEJvbGRCdXR0b25Ob2RlKGZpZWxkSWQsIGlzQm9sZCwgY2hhbmdlRXZlbnRGdW5jKTtcclxuICAgICAgICBjb2w0LmFwcGVuZENoaWxkKGJvbGRCdG5Ob2RlKTtcclxuICAgICAgICByb3cyLmFwcGVuZENoaWxkKGNvbDQpO1xyXG5cclxuICAgICAgICBsZXQgY29sNSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcclxuICAgICAgICBjb2w1LnN0eWxlLnBhZGRpbmdSaWdodCA9IFwiMTBweFwiO1xyXG4gICAgICAgIGNvbDUuc3R5bGUucGFkZGluZ1RvcCA9IFwiMjBweFwiO1xyXG4gICAgICAgIGNvbDUuY29sU3BhbiA9IDI7XHJcbiAgICAgICAgbGV0IGNvbG9yQnRuTm9kZSA9IFV0aWxzLmNyZWF0ZVRleHRDb2xvckJ1dHRvbk5vZGUoZmllbGRJZCwgXCJUZW1wbGF0ZS5jb2xvclRleHRcIiwgZm9udENvbG9yLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG4gICAgICAgIGNvbDUuYXBwZW5kQ2hpbGQoY29sb3JCdG5Ob2RlKTtcclxuICAgICAgICByb3cyLmFwcGVuZENoaWxkKGNvbDUpO1xyXG5cclxuICAgICAgICBcclxuICAgICAgICBsZXQgY29sNiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcclxuICAgICAgICBjb2w2LnN0eWxlLnBhZGRpbmdSaWdodCA9IFwiMTBweFwiO1xyXG4gICAgICAgIGNvbDYuc3R5bGUucGFkZGluZ1RvcCA9IFwiMjBweFwiO1xyXG4gICAgICAgIGNvbDYuY29sU3BhbiA9IDI7XHJcbiAgICAgICAgbGV0IGJhY2tncm91bmRDb2xvckJ0bk5vZGUgPSBVdGlscy5jcmVhdGVUZXh0Q29sb3JCdXR0b25Ob2RlKGZpZWxkSWQsIFwiVGVtcGxhdGUuYmdDb2xvclRleHRcIiwgYmFja2dyb3VuZENvbG9yLCBjaGFuZ2VFdmVudEZ1bmMpO1xyXG4gICAgICAgIGNvbDYuYXBwZW5kQ2hpbGQoYmFja2dyb3VuZENvbG9yQnRuTm9kZSk7XHJcbiAgICAgICAgcm93Mi5hcHBlbmRDaGlsZChjb2w2KTtcclxuXHJcbiAgICAgICAgZm9udEF0dHJUYWJsZS5hcHBlbmRDaGlsZChyb3cyKTtcclxuICAgICAgICByb3dXcmFwLmFwcGVuZENoaWxkKGZvbnRBdHRyVGFibGUpO1xyXG4gICAgICAgIHJvdy5hcHBlbmRDaGlsZChyb3dXcmFwKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByb3c6IHJvdyxcclxuICAgICAgICAgICAgZm9udEZhbWlseUNvbWJvOiBmb250RmFtaWx5Q29tYm8sXHJcbiAgICAgICAgICAgIGZvbnRTaXplQ29tYm86IGZvbnRTaXplQ29tYm8sXHJcbiAgICAgICAgICAgIGJvbGRCdG46IGJvbGRCdG5Ob2RlLFxyXG4gICAgICAgICAgICBjb2xvckJ0bjogY29sb3JCdG5Ob2RlLFxyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3JCdG46IGJhY2tncm91bmRDb2xvckJ0bk5vZGVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGFzc2lnblxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2Fzc2lnblxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpICBvYmplY3Tsl5Ag7ZW064u5IOyGjeyEseydtCDsnojsnLzrqbQg6rCS7J2EIOyEpOygle2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqICDsgqzsmqntlaAgT2JqZWN0XHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcCAg7IKs7Jqp7ZWgIOyGjeyEsVxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHZhbHVlICDsho3shLHsl5Ag7IKs7Jqp7ZWgIOqwklxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXNzaWduKG9iaiwgcHJvcCwgdmFsdWUpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHByb3AgPT09IFwic3RyaW5nXCIpXHJcbiAgICAgICAgICAgIHByb3AgPSBwcm9wLnNwbGl0KFwiLlwiKTtcclxuXHJcbiAgICAgICAgaWYgKHByb3AubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICB2YXIgZSA9IHByb3Auc2hpZnQoKTtcclxuICAgICAgICAgICAgYXNzaWduKG9ialtlXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9ialtlXSkgPT09IFwiW29iamVjdCBPYmplY3RdXCJcclxuICAgICAgICAgICAgICAgICAgICA/IG9ialtlXVxyXG4gICAgICAgICAgICAgICAgICAgIDoge30sXHJcbiAgICAgICAgICAgICAgICBwcm9wLFxyXG4gICAgICAgICAgICAgICAgdmFsdWUpO1xyXG4gICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICBvYmpbcHJvcFswXV0gPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBmaWVsZEFuY2VzdG9yc1xyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2ZpZWxkQW5jZXN0b3JzXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgRmllbGTsl5Ag7IOB7IaN65CcIOu2gOuqqOuTpOydhCDssL7ripTri6QuLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBhbnljbGFzcyA6IOywvuydhCBmaWVsZFxyXG4gICAgICogQHJldHVybiB7QXJyYXl9OiDsg4Hsho3rkJwg67aA66qo65OkXHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBmaWVsZEFuY2VzdG9ycyAoYW55Y2xhc3MpXHJcbiAgICB7XHJcbiAgICAgICAgc3dpdGNoICh0cnVlKSB7XHJcbiAgICAgICAgY2FzZSAoYW55Y2xhc3MgPT09IHVuZGVmaW5lZCk6IHJldHVybjtcclxuICAgICAgICBjYXNlIChhbnljbGFzcyA9PT0gbnVsbCk6IHJldHVybiBbXTtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gW2FueWNsYXNzLCAuLi4oVXRpbHMuZmllbGRBbmNlc3RvcnMgKE9iamVjdC5nZXRQcm90b3R5cGVPZiAoYW55Y2xhc3MpKSldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBmaW5kU2FtZUFuY2VzdG9yXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjZmluZFNhbWVBbmNlc3RvclxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpICBGaWVsZOuTpOydmCDqs7XthrXsnLzroZwg7IOB7IaN65CcIOu2gOuqqOulvCDssL7ripTri6QuLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9ICBmaWVsZExpc3Qg7LC+7J2EIGZpZWxkIOumrOyKpO2KuFxyXG4gICAgICogQHJldHVybiB7T2JqZWN0fSAg6rO17Ya17Jy866GcIOyDgeyGjeuQnCDrtoDrqqhcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZpbmRTYW1lQW5jZXN0b3IoZmllbGRMaXN0KSB7XHJcbiAgICAgICAgLy8g7LKr67KI7Ke4IO2VhOuTnOydmCDsobDsg4Hrk6TsnYQg7KGw7IKs7ZWc64ukLlxyXG4gICAgICAgIHZhciBmaXJzdEFuY2VzdG9ycyA9IFV0aWxzLmZpZWxkQW5jZXN0b3JzKGZpZWxkTGlzdFswXSk7XHJcbiAgICAgICAgdmFyIHNhbWVBbmNlc3RvciA9IGZpcnN0QW5jZXN0b3JzWzBdO1xyXG4gICAgICAgIC8vIO2VhOuTnOydmCDqsK/siJjqsIAgMeqwnOydtOuptCDqt7jrg6Ug66as7YS07ZWc64ukLlxyXG4gICAgICAgIGlmIChmaWVsZExpc3QubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzYW1lQW5jZXN0b3I7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBjbnQgPSAwO1xyXG4gICAgICAgIC8vIDLrsojsp7gg7ZWE65Oc67aA7YSwIOujqO2UhOulvCDtlZzri6QuXHJcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMTsgaWR4IDwgZmllbGRMaXN0Lmxlbmd0aDsgaWR4KyspIHtcclxuICAgICAgICAgICAgdmFyIGFuY2VzdG9ycyA9IFV0aWxzLmZpZWxkQW5jZXN0b3JzKGZpZWxkTGlzdFtpZHhdKTtcclxuICAgICAgICAgICAgLy8g67aA66qo6rCAIDHqsJzsnbTrqbQgQmFzZUZpZWxk7J2066+A66GcIOq3uOuMgOuhnCDrpqzthLTtlZzri6QuXHJcbiAgICAgICAgICAgIGlmIChhbmNlc3RvcnMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYW5jZXN0b3JzWzBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBzdGFydElkeCA9IDA7XHJcbiAgICAgICAgICAgIC8vIOyyq+uyiOynuCDtlYTrk5zsnZgg7KGw7IOB7J2EIOujqO2UhO2VmOuKlCBpbmRleOydtOuvgOuhnCAx67aA7YSwIOyLnOyeke2VnOuLpC5cclxuICAgICAgICAgICAgdmFyIHN0YXJ0SWR4MiA9IDE7XHJcblxyXG4gICAgICAgICAgICAvLyDtmITsnqwg6rO17Ya17Jy866GcIOyEoO2DneuQnCDtlYTrk5zsnZgg7KGw7IOB67O064ukIOyngOq4iCDsobDsgqztlZjripQg7ZWE65Oc7J2YIOyhsOyDgeydtCDqsK/siJjqsIAg7KCB7Jy866m0IFxyXG4gICAgICAgICAgICAvLyDsoITrtoAg7KGw7IKs7ZWgIO2VhOyalOqwgCDsl4bsnbQg65GY7J2YIOywqOydtOuCmOuKlCDrp4ztgbwg67aA7YSwIOyhsOyCrO2VnOuLpC5cclxuICAgICAgICAgICAgLy8gZXgpIFRleHRGaWVsZOyZgCBJbWFnZUZpZWxk66W8IOu5hOq1kO2VtOuztOuptFxyXG4gICAgICAgICAgICAvLyBUZXh0IFRleHRCYXNlIEJhc2UsIEltYWdlIEJhc2Ug7J2066CH6rKMIOyhsOyDgeuTpOydtCDsobTsnqztlZzri6QuXHJcbiAgICAgICAgICAgIC8vIOydtOugh+qyjCAx67KI7Ke464qUIOustOyhsOqxtCDri6TrpbTri4ggMeuyiOynuOuKlCDtjKjsiqTtlZjqs6Ag64uk7J2M67aA7YSwIOyhsOyCrOulvCDtlZzri6QuXHJcbiAgICAgICAgICAgIGNvbnN0IHNhbWVBbmNlc3RvclBhcmVudHMgPSBVdGlscy5maWVsZEFuY2VzdG9ycyhzYW1lQW5jZXN0b3IpO1xyXG4gICAgICAgICAgICBpZiAoc2FtZUFuY2VzdG9yUGFyZW50cy5sZW5ndGggPj0gYW5jZXN0b3JzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgc3RhcnRJZHggPSBzYW1lQW5jZXN0b3JQYXJlbnRzLmxlbmd0aCAtIGFuY2VzdG9ycy5sZW5ndGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yICh2YXIgc2VjSWR4ID0gc3RhcnRJZHg7IHNlY0lkeCA8IGFuY2VzdG9ycy5sZW5ndGg7IHNlY0lkeCsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYW5jZXN0b3IgPSBhbmNlc3RvcnNbc2VjSWR4XTtcclxuICAgICAgICAgICAgICAgIHZhciBmaW5kU2FtZUFuY2VzdG9yID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGZpcnN0SWR4ID0gc3RhcnRJZHgyOyBmaXJzdElkeCA8IGZpcnN0QW5jZXN0b3JzLmxlbmd0aDsgZmlyc3RJZHgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoYW5jZXN0b3IpID09IE9iamVjdC5nZXRQcm90b3R5cGVPZihmaXJzdEFuY2VzdG9yc1tmaXJzdElkeF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOqwmeydhCDqsr3smrAgKzHsnYQg7ZWY64qUIOydtOycoOuKlCBwcm90b3R5cGXsnZggY29uc3RydWN0b3LqsIAg7ZWY64KYIOychOulvCDrsJTrnbzrs7TquLAg65WM66y47J2064ukLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzYW1lQW5jZXN0b3IgPSBmaXJzdEFuY2VzdG9yc1tmaXJzdElkeCArIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzYW1lQW5jZXN0b3JQYXJlbnRzID0gVXRpbHMuZmllbGRBbmNlc3RvcnMoc2FtZUFuY2VzdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g6ri47J206rCAIDLrqbQgQmFzZUZpZWxk7J2066+A66GcIOq3uOuMgOuhnCDrpqzthLTtlZzri6QuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzYW1lQW5jZXN0b3JQYXJlbnRzLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNhbWVBbmNlc3RvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaW5kU2FtZUFuY2VzdG9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRJZHgyID0gZmlyc3RJZHggKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZmluZFNhbWVBbmNlc3Rvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzYW1lQW5jZXN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGZpbmRTYW1lQW5jZXN0b3IyKGZpZWxkTGlzdCkge1xyXG4gICAgICAgIGlmIChmaWVsZExpc3QubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmaWVsZExpc3RbMF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGZpcnN0RmllbGRBbmNlc3RvcnMgPSBmaWVsZExpc3RbMF0uYW5jZXN0b3JzKCk7XHJcbiAgICAgICAgbGV0IGNvbW1vbkFuY2VzdG9yID0gZmlyc3RGaWVsZEFuY2VzdG9yc1swXTtcclxuICAgICAgICBmb3IgKGxldCBpZHggPSAxOyBpZHggPCBmaWVsZExpc3QubGVuZ3RoOyArK2lkeCkge1xyXG4gICAgICAgICAgICBpZiAoY29tbW9uQW5jZXN0b3IgPT09IFwiQkZcIikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbkFuY2VzdG9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkQW5jZXN0b3JzID0gZmllbGRMaXN0W2lkeF0uYW5jZXN0b3JzKCk7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZEFuY2VzdG9ycy5pbmNsdWRlcyhjb21tb25BbmNlc3RvcikpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpZHgyID0gMTsgaWR4MiA8IGZpcnN0RmllbGRBbmNlc3RvcnMubGVuZ3RoOyArK2lkeDIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChmaWVsZEFuY2VzdG9ycy5pbmNsdWRlcyhmaXJzdEZpZWxkQW5jZXN0b3JzW2lkeDJdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbW1vbkFuY2VzdG9yID0gZmlyc3RGaWVsZEFuY2VzdG9yc1tpZHgyXTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29tbW9uQW5jZXN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gZ2V0VXNlckluZm9PcHRzTGlzdFxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2dldFVzZXJJbmZvT3B0c0xpc3RcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSAg7ISc66qF7J6Q65Ok7J2YIOygleuztCDrpqzsiqTtirjrpbwg67CY7ZmY7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge0FycmF5fSDshJzrqoXsnpDrk6TsnZgg7KCV67O0IOumrOyKpO2KuFxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0VXNlckluZm9PcHRzTGlzdCgpIHtcclxuICAgICAgICByZXR1cm4gVXRpbHMudXNlckluZm9PcHRpb25MaXN0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIHNldFVzZXJJbmZvT3B0c0xpc3RcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNzZXRVc2VySW5mb09wdHNMaXN0XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgIOyEnOuqheyekOuTpOydmCDsoJXrs7Qg66as7Iqk7Yq466W8IOyEpOygle2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBmaWVsZExpc3QgIOyEnOuqheyekOuTpOydmCDsoJXrs7Qg66as7Iqk7Yq4XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBzZXRVc2VySW5mb09wdHNMaXN0KG9wdHMpIHtcclxuICAgICAgICBVdGlscy51c2VySW5mb09wdGlvbkxpc3QgPSBvcHRzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGdldFVzZXJJbmZvT3B0c0xpc3RDb3VudFxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2dldFVzZXJJbmZvT3B0c0xpc3RDb3VudFxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIOyEnOuqheyekOuTpOydmCDsoJXrs7Qg66as7Iqk7Yq4IOq4uOydtOulvCDrsJjtmZjtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7TnVtYmVyfTog7ISc66qF7J6Q65Ok7J2YIOygleuztCDrpqzsiqTtirjquLjsnbRcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldFVzZXJJbmZvT3B0c0xpc3RDb3VudCgpIHtcclxuICAgICAgICByZXR1cm4gVXRpbHMudXNlckluZm9PcHRpb25MaXN0Q291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gc2V0VXNlckluZm9PcHRzTGlzdENvdW50XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjc2V0VXNlckluZm9PcHRzTGlzdENvdW50XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgIOyEnOuqheyekOuTpOydmCDsoJXrs7Qg66as7Iqk7Yq4IOq4uOydtOulvCDshKTsoJXtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGZpZWxkTGlzdCDshJzrqoXsnpDrk6TsnZgg7KCV67O0IOumrOyKpO2KuCDquLjsnbRcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHNldFVzZXJJbmZvT3B0c0xpc3RDb3VudChjb3VudCkge1xyXG4gICAgICAgIFV0aWxzLnVzZXJJbmZvT3B0aW9uTGlzdENvdW50ID0gY291bnQ7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGdldERWRmllbGRPcHRzTGlzdFxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2dldERWRmllbGRPcHRzTGlzdFxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpICAg6riw67O46rCS7Jy866GcIOyCrOyaqe2VoCDqsJLrk6TsnZgg66as7Iqk7Yq466W8IOuwmO2ZmO2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0g6riw67O46rCS7Jy866GcIOyCrOyaqe2VoCDqsJLrk6TsnZgg66as7Iqk7Yq4XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBnZXREVkZpZWxkT3B0c0xpc3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIFV0aWxzLmR2RmllbGRPcHRpb25MaXN0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIHNldERWRmllbGRPcHRzTGlzdFxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI3NldERWRmllbGRPcHRzTGlzdFxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpICDquLDrs7jqsJLsnLzroZwg7IKs7Jqp7ZWgIOqwkuuTpOydmCDrpqzsiqTtirjrpbwg7ISk7KCV7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBmaWVsZExpc3Qge0FycmF5fSAg6riw67O46rCS7Jy866GcIOyCrOyaqe2VoCDqsJLrk6TsnZgg66as7Iqk7Yq4XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBzZXREVkZpZWxkT3B0c0xpc3Qob3B0cykge1xyXG4gICAgICAgIFV0aWxzLmR2RmllbGRPcHRpb25MaXN0ID0gb3B0cztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBnZXRTaWduVGFiU2hvd09wdFxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2dldFNpZ25UYWJTaG93T3B0XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgICDshJzrqoXtg60g67O07J6EL+yViOuztOyehCDquLDrs7jqsJLsnLzroZwg7IKs7Jqp7ZWgIOqwkuuTpOydhCDrsJjtmZjtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7QXJyYXl9IOyEnOuqhe2DrSDrs7TsnoQv7JWI67O07J6EIOq4sOuzuOqwkuycvOuhnCDsgqzsmqntlaAg6rCS65OkIFxyXG4gICAgICogQERhdGUgOiAyMDIzLiAxMi4gMjdcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldFNpZ25UYWJTaG93T3B0KCkge1xyXG4gICAgICAgIHJldHVybiBVdGlscy5zaWduVGFiU2hvd09wdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBzZXRTaWduVGFiU2hvd09wdFxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI3NldFNpZ25UYWJTaG93T3B0XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgIOyEnOuqhe2DrSDrs7TsnoQv7JWI67O07J6EIOq4sOuzuOqwkuycvOuhnCDsgqzsmqntlaAg6rCS65Ok7J2EIOyEpOygle2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc2lnblRhYlNob3dPcHQge09iamVjdH0gIOyEnOuqhe2DrSDrs7TsnoQv7JWI67O07J6EIOq4sOuzuOqwkuycvOuhnCDsgqzsmqntlaAg6rCS65OkXHJcbiAgICAgKiBARGF0ZSA6IDIwMjMuIDEyLiAyN1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgc2V0U2lnblRhYlNob3dPcHQob3B0cykge1xyXG4gICAgICAgIFV0aWxzLnNpZ25UYWJTaG93T3B0ID0gb3B0cztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBnZXRGb25TaXplQ29tYm9Cb3hcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNnZXRGb25TaXplQ29tYm9Cb3hcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSAg7IaN7ISx7JeQ7IScIOyCrOyaqe2VoCDtj7Dtirgg7IKs7J207KaIIOumrOyKpO2KuOulvCDrsJjtmZjtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7QXJyYXl9IOyGjeyEseyXkOyEnCDsgqzsmqntlaAg7Y+w7Yq4IOyCrOydtOymiCDrpqzsiqTtirhcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldEZvblNpemVDb21ib0JveCgpIHtcclxuICAgICAgICBpZiAoVXRpbHMuZm9udFNpemVDb21ib0JveC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBVdGlscy5mb250U2l6ZUNvbWJvQm94O1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBpZHggPSAxOyBpZHggPD0gNTA7IGlkeCsrKSB7XHJcbiAgICAgICAgICAgIFV0aWxzLmZvbnRTaXplQ29tYm9Cb3gucHVzaCh7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBpZHggKyBcInB4XCIsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogaWR4XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gVXRpbHMuZm9udFNpemVDb21ib0JveDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBnZXRTaWduUGVuV2lkdGhDb21ib0JveFxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2dldFNpZ25QZW5XaWR0aENvbWJvQm94XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7IaN7ISx7JeQ7IScIOyCrOyaqe2VoCDtjpwg65GQ6ruYIOumrOyKpO2KuOulvCDrsJjtmZjtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7QXJyYXl9IOyGjeyEseyXkOyEnCDsgqzsmqntlaAg7Y6cIOuRkOq7mCDrpqzsiqTtirhcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldFNpZ25QZW5XaWR0aENvbWJvQm94KCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coVXRpbHMuc2lnblBlbldpZHRoQ29tYm9Cb3gubGVuZ3RoKTtcclxuICAgICAgICBpZiAoVXRpbHMuc2lnblBlbldpZHRoQ29tYm9Cb3gubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gVXRpbHMuc2lnblBlbldpZHRoQ29tYm9Cb3g7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDE7IGlkeCA8PSAyMDsgaWR4ICs9IDEpIHtcclxuICAgICAgICAgICAgVXRpbHMuc2lnblBlbldpZHRoQ29tYm9Cb3gucHVzaCh7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBpZHgsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogaWR4XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gVXRpbHMuc2lnblBlbldpZHRoQ29tYm9Cb3g7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gY3JlYXRlQXR0cmJ1dGVQb3B1cFxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NyZWF0ZUF0dHJidXRlUG9wdXBcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDsho3shLEg7Yyd7JeF7J2YIEVsZW1lbnTrpbwg66eM65Og64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gb3duZXJOb2RlIO2VtOuLuSDtlITroZzsoJ3tirjsnZgg7LWc7IOB64uoIEVsZW1lbnTrpbwg6rCQ7Iu46rOgIOyeiOuKlCBFbGVtZW50XHJcbiAgICAgKiBAcmV0dXJuIHtFbGVtZW50fSDsho3shLEg7Yyd7JeF7J2YIGVsZW1lbnRcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWF0ZUF0dHJidXRlUG9wdXAob3duZXJOb2RlLCBvd25lckZpZWxkQkJveCkge1xyXG4gICAgICAgIGxldCBhdHRyRGl2ID0gb3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXCIgLlwiICsgQ09OU1RBTlRTLkVESVRPUl9BVFRSX0NMQVNTKTtcclxuICAgICAgICBpZiAoYXR0ckRpdiA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBhdHRyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgYXR0ckRpdi5jbGFzc0xpc3QuYWRkKENPTlNUQU5UUy5FRElUT1JfQVRUUl9DTEFTUyk7XHJcbiAgICAgICAgICAgIGF0dHJEaXYuY2xhc3NMaXN0LmFkZChDT05TVEFOVFMuU0hPV19DTEFTUyk7XHJcbiAgICAgICAgICAgIGxldCB2aWV3ZXIgPSBvd25lck5vZGUucXVlcnlTZWxlY3RvcihcIiAjXCIgKyBDT05TVEFOVFMuVEVNUExBVEVfUERGX1ZJRVdFUik7XHJcbiAgICAgICAgICAgIHZpZXdlci5hcHBlbmRDaGlsZChhdHRyRGl2KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBVdGlscy5yZW1vdmVBbGxDaGlsZE5vZGUoYXR0ckRpdik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghYXR0ckRpdi5jbGFzc0xpc3QuY29udGFpbnMoQ09OU1RBTlRTLlNIT1dfQ0xBU1MpKSB7XHJcbiAgICAgICAgICAgIGF0dHJEaXYuY2xhc3NMaXN0LmFkZChDT05TVEFOVFMuU0hPV19DTEFTUyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGF0dHJEaXYuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICBpZiAob3duZXJGaWVsZEJCb3ggIT09IG51bGwgJiYgb3duZXJGaWVsZEJCb3ggIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBhdHRyRGl2LnN0eWxlLmxlZnQgPSBvd25lckZpZWxkQkJveC54ICsgXCJweFwiO1xyXG4gICAgICAgICAgICBhdHRyRGl2LnN0eWxlLnRvcCA9IG93bmVyRmllbGRCQm94LnkgKyBvd25lckZpZWxkQkJveC5oZWlnaHQgKyAxMCArIFwicHhcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGF0dHJEaXY7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gc2hvd0FzdGVyaXNrRGl2XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjc2hvd0FzdGVyaXNrRGl2XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7ZWE7IiYIO2RnOyLnCDrp4jtgazrpbwg67O07J206rGw64KYIOyIqOq4tOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG93bmVyTm9kZSAg7ZW064u5IO2UhOuhnOygne2KuOydmCDstZzsg4Hri6ggRWxlbWVudOulvCDqsJDsi7jqs6Ag7J6I64qUIEVsZW1lbnRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZElkICDtlYTsiJgg66eI7YGs6rCAIOyCrOyaqeuQmOuKlCDtlYTrk5zsnZggaWRcclxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNTaG93ICB0cnVl66m0IOuztOydtOqzoCBmYWxzZeuptCDsiKjquLTri6QuXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZmllbGRYICDtlYTsiJgg66eI7YGs6rCAIOyCrOyaqeuQmOuKlCDtlYTrk5zsnZggeOyijO2RnFxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGZpZWxkWSAg7ZWE7IiYIOuniO2BrOqwgCDsgqzsmqnrkJjripQg7ZWE65Oc7J2YIHnsooztkZxcclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBmaWVsZEhlaWdodCAg7ZWE7IiYIOuniO2BrOqwgCDsgqzsmqnrkJjripQg7ZWE65Oc7J2YIOuGkuydtFxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgc2hvd0FzdGVyaXNrRGl2KG93bmVyTm9kZSwgZmllbGRJZCwgaXNTaG93LCBmaWVsZFgsIGZpZWxkWSwgZmllbGRIZWlnaHQpIHtcclxuICAgICAgICBsZXQgYXN0ZXJpc2tEaXYgPSBvd25lck5vZGUucXVlcnlTZWxlY3RvcihcIiAjXCIgKyBmaWVsZElkICsgXCJfYXN0ZXJpc2tcIik7XHJcbiAgICAgICAgaWYgKGFzdGVyaXNrRGl2ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAvLyAgICBjb25zb2xlLmxvZyhcInNob3dBc3Rlcmlza0RpdiAgIFwiICsgaXNTaG93KTtcclxuICAgICAgICBpZiAoaXNTaG93KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZFggPT09IG51bGwgfHwgZmllbGRZID09PSBudWxsIHx8IGZpZWxkSGVpZ2h0ID09PSBudWxsIHx8XHJcbiAgICAgICAgICAgICAgICBmaWVsZFggPT09IHVuZGVmaW5lZCB8fCBmaWVsZFkgPT09IHVuZGVmaW5lZCB8fCBmaWVsZEhlaWdodCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IGFzdGVyaXNrSGVpZ2h0ID0gQ09OU1RBTlRTLkFTVFJFSVNLX0RJVl9IRUlHSFQ7XHJcbiAgICAgICAgICAgIGFzdGVyaXNrRGl2LnN0eWxlLmxlZnQgPSAoZmllbGRYIC0gNiAtIGFzdGVyaXNrSGVpZ2h0KSArIFwicHhcIjtcclxuICAgICAgICAgICAgbGV0IGFzdGVyaXNrWSA9IGZpZWxkWSArIChmaWVsZEhlaWdodCAvIDIpIC0gKGFzdGVyaXNrSGVpZ2h0IC8gMik7XHJcbiAgICAgICAgICAgIGFzdGVyaXNrRGl2LnN0eWxlLnRvcCA9IGFzdGVyaXNrWSArIFwicHhcIjtcclxuXHJcbiAgICAgICAgICAgIGlmICghYXN0ZXJpc2tEaXYuY2xhc3NMaXN0LmNvbnRhaW5zKENPTlNUQU5UUy5TSE9XX0NMQVNTKSkge1xyXG4gICAgICAgICAgICAgICAgYXN0ZXJpc2tEaXYuY2xhc3NMaXN0LnRvZ2dsZShDT05TVEFOVFMuU0hPV19DTEFTUyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGFzdGVyaXNrRGl2LmNsYXNzTGlzdC5jb250YWlucyhDT05TVEFOVFMuSElERV9DTEFTUykpIHtcclxuICAgICAgICAgICAgICAgIGFzdGVyaXNrRGl2LmNsYXNzTGlzdC50b2dnbGUoQ09OU1RBTlRTLkhJREVfQ0xBU1MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChhc3Rlcmlza0Rpdi5jbGFzc0xpc3QuY29udGFpbnMoQ09OU1RBTlRTLlNIT1dfQ0xBU1MpKSB7XHJcbiAgICAgICAgICAgIGFzdGVyaXNrRGl2LmNsYXNzTGlzdC50b2dnbGUoQ09OU1RBTlRTLlNIT1dfQ0xBU1MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWFzdGVyaXNrRGl2LmNsYXNzTGlzdC5jb250YWlucyhDT05TVEFOVFMuSElERV9DTEFTUykpIHtcclxuICAgICAgICAgICAgYXN0ZXJpc2tEaXYuY2xhc3NMaXN0LnRvZ2dsZShDT05TVEFOVFMuSElERV9DTEFTUyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGNyZWF0ZUFzdGVyaXNrRGl2XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjY3JlYXRlQXN0ZXJpc2tEaXZcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtlYTsiJgg7ZGc7IucIOuniO2BrOydmCBFbGVtZW5066W8IOunjOuToOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG93bmVyTm9kZSDtlbTri7kg7ZSE66Gc7KCd7Yq47J2YIOy1nOyDgeuLqCBFbGVtZW5066W8IOqwkOyLuOqzoCDsnojripQgRWxlbWVudFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkSWQgIO2VhOyImCDrp4jtgazqsIAg7IKs7Jqp65CY64qUIO2VhOuTnOydmCBpZFxyXG4gICAgICogQHJldHVybiB7RWxlbWVudH0g7ZWE7IiYIO2RnOyLnCDrp4jtgazsnZggZWxlbWVudFxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlYXRlQXN0ZXJpc2tEaXYob3duZXJOb2RlLCBmaWVsZElkKSB7XHJcbiAgICAgICAgbGV0IGFzdGVyaXNrRGl2ID0gb3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXCIgI1wiICsgZmllbGRJZCArIFwiX2FzdGVyaXNrXCIpO1xyXG4gICAgICAgIGlmIChhc3Rlcmlza0RpdiA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBhc3Rlcmlza0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIGFzdGVyaXNrRGl2LmNsYXNzTGlzdC5hZGQoQ09OU1RBTlRTLkFTVEVSSVNLX0lDT05fQ0xBU1MpO1xyXG4gICAgICAgICAgICBhc3Rlcmlza0Rpdi5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIlxyXG4gICAgICAgICAgICBhc3Rlcmlza0Rpdi5zdHlsZS53aWR0aCA9IFwiMTFweFwiO1xyXG4gICAgICAgICAgICBhc3Rlcmlza0Rpdi5zdHlsZS5oZWlnaHQgPSBcIjEycHhcIjtcclxuICAgICAgICAgICAgbGV0IGxheWVyRGl2ID0gb3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXCIgI1wiICsgQ09OU1RBTlRTLlRFTVBMQVRFX0xBWUVSX0FTVEVSSVNLX05BTUUpO1xyXG4gICAgICAgICAgICBsYXllckRpdi5hcHBlbmRDaGlsZChhc3Rlcmlza0Rpdik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhc3Rlcmlza0RpdjtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGlzU2hvd0FzdGVyaXNrRGl2XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjaXNTaG93QXN0ZXJpc2tEaXZcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtlYTsiJgg7ZGc7IucIOuniO2BrOqwgCDrs7TsnbTripTsp4Ag7Jes67aA66W8IOuwmO2ZmO2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG93bmVyTm9kZSAg7ZW064u5IO2UhOuhnOygne2KuOydmCDstZzsg4Hri6ggRWxlbWVudOulvCDqsJDsi7jqs6Ag7J6I64qUIEVsZW1lbnRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZElkICDtlYTsiJgg66eI7YGs6rCAIOyCrOyaqeuQmOuKlCDtlYTrk5zsnZggaWRcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGlzU2hvd0FzdGVyaXNrRGl2KG93bmVyTm9kZSwgZmllbGRJZCkge1xyXG4gICAgICAgIGxldCBhc3Rlcmlza0RpdiA9IG93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFwiICNcIiArIGZpZWxkSWQgKyBcIl9hc3Rlcmlza1wiKTtcclxuICAgICAgICBpZiAoYXN0ZXJpc2tEaXYgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGFzdGVyaXNrRGl2LmNsYXNzTGlzdC5jb250YWlucyhDT05TVEFOVFMuU0hPV19DTEFTUykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhc3Rlcmlza0Rpdi5jbGFzc0xpc3QuY29udGFpbnMoQ09OU1RBTlRTLkhJREVfQ0xBU1MpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGNyZWF0ZUZpZWxkRGVsZXRlQnRuXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjY3JlYXRlRmllbGREZWxldGVCdG5cclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtlYTrk5zsnZggRGVsZXRl67KE7Yq87J2YIEVsZW1lbnTrpbwg66eM65Og64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gb3duZXJOb2RlICDtlbTri7kg7ZSE66Gc7KCd7Yq47J2YIOy1nOyDgeuLqCBFbGVtZW5066W8IOqwkOyLuOqzoCDsnojripQgRWxlbWVudFxyXG4gICAgICogQHBhcmFtIHtDYWxsQmFja30gYnRuQ2xpY2tFdnRIYW5kbGVyICDrsoTtirzsnYQg64iM66CA7J2EIOuVjCDrj5nsnpHtlaAgSGFuZGxlclxyXG4gICAgICogQHJldHVybiB7RWxlbWVudH0g7ZWE65Oc7J2YIERlbGV0ZeuyhO2KvOydmCBlbGVtZW50XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVhdGVGaWVsZERlbGV0ZUJ0bihvd25lck5vZGUsIGJ0bkNsaWNrRXZ0SGFuZGxlcikge1xyXG4gICAgICAgIGxldCBkZWxldGVCdG5EaXYgPSBvd25lck5vZGUucXVlcnlTZWxlY3RvcihcIiAuXCIgKyBDT05TVEFOVFMuRklFTERfREVMRVRFX0JVVFRPTl9DTEFTUyk7XHJcbiAgICAgICAgaWYgKGRlbGV0ZUJ0bkRpdiA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBkZWxldGVCdG5EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICBkZWxldGVCdG5EaXYuY2xhc3NMaXN0LmFkZChDT05TVEFOVFMuRklFTERfREVMRVRFX0JVVFRPTl9DTEFTUyk7XHJcbiAgICAgICAgICAgIGRlbGV0ZUJ0bkRpdi5jbGFzc0xpc3QuYWRkKENPTlNUQU5UUy5TSE9XX0NMQVNTKTtcclxuICAgICAgICAgICAgbGV0IHZpZXdlciA9IG93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFwiICNcIiArIENPTlNUQU5UUy5URU1QTEFURV9QREZfVklFV0VSKTtcclxuICAgICAgICAgICAgdmlld2VyLmFwcGVuZENoaWxkKGRlbGV0ZUJ0bkRpdik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghZGVsZXRlQnRuRGl2LmNsYXNzTGlzdC5jb250YWlucyhDT05TVEFOVFMuU0hPV19DTEFTUykpIHtcclxuICAgICAgICAgICAgZGVsZXRlQnRuRGl2LmNsYXNzTGlzdC5hZGQoQ09OU1RBTlRTLlNIT1dfQ0xBU1MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGVsZXRlQnRuRGl2LmNsYXNzTGlzdC5jb250YWlucyhDT05TVEFOVFMuSElERV9DTEFTUykpIHtcclxuICAgICAgICAgICAgZGVsZXRlQnRuRGl2LmNsYXNzTGlzdC50b2dnbGUoQ09OU1RBTlRTLkhJREVfQ0xBU1MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBkZWxldGVCdG5EaXYuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGJ0bkNsaWNrRXZ0SGFuZGxlcik7XHJcbiAgICAgICAgcmV0dXJuIGRlbGV0ZUJ0bkRpdjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiByZXBvc2l0aW9uRmllbGREZWxldGVCdG5cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNyZXBvc2l0aW9uRmllbGREZWxldGVCdG5cclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSDtlYTrk5zsnZggRGVsZXRl67KE7Yq87J2YIOychOy5mOulvCDsobDsoJXtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBvd25lck5vZGUgIO2VtOuLuSDtlITroZzsoJ3tirjsnZgg7LWc7IOB64uoIEVsZW1lbnTrpbwg6rCQ7Iu46rOgIOyeiOuKlCBFbGVtZW50XHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0geCAgRmllbGTsnZggWOyijO2RnFxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHkgIEZpZWxk7J2YIHnsooztkZxcclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB3aWR0aCAgRmllbGTsnZggd2lkdGhcclxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9IO2VhOuTnOydmCBEZWxldGXrsoTtirzsnZggZWxlbWVudFxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgcmVwb3NpdGlvbkZpZWxkRGVsZXRlQnRuKG93bmVyTm9kZSwgeCwgeSwgd2lkdGgpIHtcclxuXHJcbiAgICAgICAgbGV0IGRlbGV0ZUJ0bkRpdiA9IG93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFwiIC5cIiArIENPTlNUQU5UUy5GSUVMRF9ERUxFVEVfQlVUVE9OX0NMQVNTKTtcclxuICAgICAgICBpZiAoZGVsZXRlQnRuRGl2ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZGVsZXRlQnRuRGl2IGVtcHR5XCIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkZWxldGVCdG5EaXYuY2xhc3NMaXN0LmNvbnRhaW5zKENPTlNUQU5UUy5ISURFX0NMQVNTKSkge1xyXG4gICAgICAgICAgICBkZWxldGVCdG5EaXYuY2xhc3NMaXN0LnRvZ2dsZShDT05TVEFOVFMuSElERV9DTEFTUyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlbGV0ZUJ0bkRpdi5zdHlsZS5sZWZ0ID0geCArIHdpZHRoICsgMTAgKyBcInB4XCI7XHJcbiAgICAgICAgZGVsZXRlQnRuRGl2LnN0eWxlLnRvcCA9IHkgKyAxMCArIFwicHhcIjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBhZGRTaWduU3ZnVG9DYW52YXNcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNhZGRTaWduU3ZnVG9DYW52YXNcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBjYW52YXPsl5AgU1ZH66W8IOy2lOqwgO2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZmllbGQgIOy2lOqwgO2VoCBjYW52YXPsnZggU2lnbiBGaWVsZCBPYmplY3RcclxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gY2FudmFzRGl2ICBjYW52YXPsnZggRWxlbWVudFxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHNpZ25XaWR0aCAg7ISc66qF7ZWE65Oc7J2YIFdpZHRoXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gc2lnbkhlaWdodCAg7ISc66qF7ZWE65Oc7J2YIGhlaWdodFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHN2ZyAgU1ZHIFN0cmluZ1xyXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBGYWJyaWMgY2FudmFzIE9iamVjdDogU1ZH642w7J207YSw6rCAIOy2lOqwgOuQnCBDYW52YXNcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFkZFNpZ25TdmdUb0NhbnZhcyhmaWVsZCwgY2FudmFzRGl2LCBzaWduV2lkdGgsIHNpZ25IZWlnaHQsIHN2Zykge1xyXG4gICAgICAgIGxldCBjYW52YXNPYmogPSBjYW52YXNEaXY7XHJcbiAgICAgICAgaWYgKGNhbnZhc0RpdiA9PT0gbnVsbCB8fCBjYW52YXNEaXYgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBjYW52YXNPYmogPSBmaWVsZC5tX2lkICsgXCJfY2FudmFzXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBzdGF0aWNDYW52czEgPSBuZXcgZmFicmljLlN0YXRpY0NhbnZhcyhjYW52YXNPYmosIHsgaXNEcmF3aW5nTW9kZTogZmFsc2UgfSk7XHJcbiAgICAgICAgc3RhdGljQ2FudnMxLnNldEhlaWdodChzaWduSGVpZ2h0KTtcclxuICAgICAgICBzdGF0aWNDYW52czEuc2V0V2lkdGgoc2lnbldpZHRoKTtcclxuXHJcbiAgICAgICAgZmFicmljLmxvYWRTVkdGcm9tU3RyaW5nKHN2ZywgZnVuY3Rpb24gKG9iamVjdHMsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgdmFyIG9iaiA9IGZhYnJpYy51dGlsLmdyb3VwU1ZHRWxlbWVudHMob2JqZWN0cywgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIGxldCB4U2NhbGUgPSBzdGF0aWNDYW52czEud2lkdGggLyBvYmoud2lkdGg7XHJcbiAgICAgICAgICAgIGxldCB5U2NhbGUgPSBzdGF0aWNDYW52czEuaGVpZ2h0IC8gb2JqLmhlaWdodDtcclxuICAgICAgICAgICAgY29uc3Qgc2NhbGUxID0geFNjYWxlID4geVNjYWxlID8geVNjYWxlIDogeFNjYWxlO1xyXG4gICAgICAgICAgICBvYmouc2NhbGUoc2NhbGUxKTtcclxuXHJcbiAgICAgICAgICAgIG9iai5zdHJva2VXaWR0aCA9IG9iai5zdHJva2VXaWR0aCAvIHNjYWxlMTtcclxuICAgICAgICAgICAgaWYgKG9iai5fb2JqZWN0cyAhPT0gbnVsbCAmJiBvYmouX29iamVjdHMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IG9iamVjdHMgPSBvYmouX29iamVjdHM7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBvYmplY3RzLmxlbmd0aDsgKytpZHgpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3RzW2lkeF0uc3Ryb2tlV2lkdGggPSBvYmplY3RzW2lkeF0uc3Ryb2tlV2lkdGggLyBzY2FsZTE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3RhdGljQ2FudnMxLmFkZChvYmopLmNlbnRlck9iamVjdChvYmopLnJlbmRlckFsbCgpO1xyXG4gICAgICAgICAgICBvYmouc2V0Q29vcmRzKCk7XHJcbiAgICAgICAgfSwgXHJcbiAgICAgICAgIG51bGwsXHJcbiAgICAgICAgIHtjcm9zc09yaWdpbjogJ2Fub255bW91cycgLy8gQ09SUyDshKTsoJVcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gc3RhdGljQ2FudnMxO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGFkZE9iamVjdHNUb0NhbnZhc1xyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2FkZE9iamVjdHNUb0NhbnZhc1xyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIGNhbnZhc+yXkCBPYmplY3Rz66W8IOy2lOqwgO2VnOuLpC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG93bmVyTm9kZSAg7ZW064u5IO2UhOuhnOygne2KuOydmCDstZzsg4Hri6ggRWxlbWVudOulvCDqsJDsi7jqs6Ag7J6I64qUIEVsZW1lbnRcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBmaWVsZCAg7LaU6rCA7ZWgIGNhbnZhc+ydmCBTaWduIEZpZWxkIE9iamVjdFxyXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBjYW52YXNEaXYgIGNhbnZhc+ydmCBFbGVtZW50XHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gc2lnbldpZHRoICDshJzrqoXtlYTrk5zsnZggV2lkdGhcclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzaWduSGVpZ2h0ICDshJzrqoXtlYTrk5zsnZggaGVpZ2h0XHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBvYmplY3RzICA6IFBhdGjsnZgg66as7Iqk7Yq4XHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gb3JnV2lkdGggIOy2lOqwgOuQoCBPYmplY3Rz7J2YIFdpZHRoXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gb3JnSGVpZ2h0ICA6IOy2lOqwgOuQoCBPYmplY3Rz7J2YIGhlaWdodFxyXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBGYWJyaWMgY2FudmFzIE9iamVjdDogT2JqZWN0c+qwgCDstpTqsIDrkJwgQ2FudmFzXHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhZGRPYmplY3RzVG9DYW52YXMoX293bmVyTm9kZSwgZmllbGQsIGNhbnZhc0Rpdiwgc2lnbldpZHRoLCBzaWduSGVpZ2h0LCBvYmplY3RzLCBvcmdXaWR0aCwgb3JnSGVpZ2h0KSB7XHJcbiAgICAgICAgbGV0IGNhbnZhc09iaiA9IGNhbnZhc0RpdjtcclxuICAgICAgICBpZiAoY2FudmFzRGl2ID09PSBudWxsIHx8IGNhbnZhc0RpdiA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGxldCBjYW52YXNJZCA9IGZpZWxkLm1faWQgKyBcIl9jYW52YXNcIjtcclxuICAgICAgICAgICAgY2FudmFzT2JqID0gX293bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFwiI1wiICsgY2FudmFzSWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgc3RhdGljQ2FudnMxID0gbmV3IGZhYnJpYy5TdGF0aWNDYW52YXMoY2FudmFzT2JqLCB7IGlzRHJhd2luZ01vZGU6IGZhbHNlIH0pO1xyXG4gICAgICAgIHN0YXRpY0NhbnZzMS5zZXRIZWlnaHQoc2lnbkhlaWdodCk7XHJcbiAgICAgICAgc3RhdGljQ2FudnMxLnNldFdpZHRoKHNpZ25XaWR0aCk7XHJcbiAgICAgICAgbGV0IHhTY2FsZSA9IHN0YXRpY0NhbnZzMS53aWR0aCAvIG9yZ1dpZHRoO1xyXG4gICAgICAgIGxldCB5U2NhbGUgPSBzdGF0aWNDYW52czEuaGVpZ2h0IC8gb3JnSGVpZ2h0O1xyXG4gICAgICAgIGNvbnN0IHNjYWxlMSA9IHhTY2FsZSA+IHlTY2FsZSA/IHlTY2FsZSA6IHhTY2FsZTtcclxuICAgICAgIC8vIGNvbnNvbGUubG9nKHNjYWxlMSk7XHJcbiAgICAgICAgZmFicmljLnV0aWwuZW5saXZlbk9iamVjdHMob2JqZWN0cywgZnVuY3Rpb24gKG9ianMpIHtcclxuICAgICAgICAgICAgdmFyIG9yaWdSZW5kZXJPbkFkZFJlbW92ZSA9IHN0YXRpY0NhbnZzMS5yZW5kZXJPbkFkZFJlbW92ZTtcclxuICAgICAgICAgICAgc3RhdGljQ2FudnMxLnJlbmRlck9uQWRkUmVtb3ZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGxldCBnb3RvQ2VudGVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKG9ianMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgZ290b0NlbnRlciA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBvYmpzLmZvckVhY2goZnVuY3Rpb24gKG8pIHtcclxuICAgICAgICAgICAgICAgIGxldCBsZWZ0ID0gby5sZWZ0ICogc2NhbGUxO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRvcCA9IG8udG9wICogc2NhbGUxO1xyXG4gICAgICAgICAgICAgICAgaWYgKGdvdG9DZW50ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgIGxlZnQgPSAoKHN0YXRpY0NhbnZzMS53aWR0aCAtIG8ud2lkdGggKiBzY2FsZTEpIC8gMik7XHJcbiAgICAgICAgICAgICAgICAgICB0b3AgPSAoKHN0YXRpY0NhbnZzMS5oZWlnaHQgLSBvLmhlaWdodCAqIHNjYWxlMSkgLyAyKTsgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgby5zZXQoe1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IGxlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiB0b3AsXHJcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVZOiBzY2FsZTEsXHJcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVYOiBzY2FsZTEsXHJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IG8uc3Ryb2tlV2lkdGggLyBzY2FsZTFcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgc3RhdGljQ2FudnMxLmFkZChvKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBzdGF0aWNDYW52czEucmVuZGVyT25BZGRSZW1vdmUgPSBvcmlnUmVuZGVyT25BZGRSZW1vdmU7XHJcbiAgICAgICAgICAgIHN0YXRpY0NhbnZzMS5yZW5kZXJBbGwoKTtcclxuICAgICAgICAgICAgc3RhdGljQ2FudnMxLmNhbGNPZmZzZXQoKTtcclxuICAgICAgICAgICAgaWYgKG9ianMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9ianMgPSBzdGF0aWNDYW52czEuZ2V0T2JqZWN0cygpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gbmV3IGZhYnJpYy5Hcm91cChvYmpzLCB7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGdyb3VwLnNldCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogKChzdGF0aWNDYW52czEud2lkdGggLSBncm91cC53aWR0aCApIC8gMiksXHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiAoKHN0YXRpY0NhbnZzMS5oZWlnaHQgLSBncm91cC5oZWlnaHQgKSAvIDIpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgZ3JvdXAuc2V0Q29vcmRzKCk7XHJcbiAgICAgICAgICAgICAgICBzdGF0aWNDYW52czEucmVuZGVyQWxsKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHN0YXRpY0NhbnZzMTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBjbG9uZU9iamVjdFxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2Nsb25lT2JqZWN0XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgIE9iamVjdCBkZWVwIGNvcHlcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gdG9PYmogIOuzteyCrO2VoCBvYmplY3RcclxuICAgICAqIEByZXR1cm4ge09iamVjdH0gIOuzteyCrOuQnCBvYmplY3RcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNsb25lT2JqZWN0KG9iaikge1xyXG4gICAgICAgIHZhciBjbG9uZSA9IHt9O1xyXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmpba2V5XSA9PSBcIm9iamVjdFwiICYmIG9ialtrZXldICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9ialtrZXldKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsb25lW2tleV0gPSBbLi4ub2JqW2tleV1dO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjbG9uZVtrZXldID0gVXRpbHMuY2xvbmVPYmplY3Qob2JqW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2xvbmVba2V5XSA9IG9ialtrZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY2xvbmU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gY2xvbmVPYmplY3RUb09iamVjdFxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2Nsb25lT2JqZWN0VG9PYmplY3RcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBmcm9tT2Jq7J2YIOuNsOydtO2EsOulvCB0b09iauuhnCBkZWVwIGNvcHlcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZnJvbU9iaiDrs7XsgqztlaAgb2JqZWN0XHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gdG9PYmogIOuzteyCrOuQoCBvYmplY3RcclxuICAgICAqIEByZXR1cm4ge09iamVjdH0g67O17IKs65CcIG9iamVjdFxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY2xvbmVPYmplY3RUb09iamVjdChmcm9tT2JqLCB0b09iaikge1xyXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBmcm9tT2JqKSB7XHJcbiAgICAgICAgICAgIGlmIChrZXkgPT09IFwicGFnZXNcIiB8fCBrZXkgPT09IFwiZmllbGRzXCIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZnJvbU9ialtrZXldID09IFwib2JqZWN0XCIgJiYgZnJvbU9ialtrZXldICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRvT2JqW2tleV0gPSBVdGlscy5jbG9uZU9iamVjdChmcm9tT2JqW2tleV0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdG9PYmpba2V5XSA9IGZyb21PYmpba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRvT2JqO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGNsb25lRmFicmljQ2FudmFzXHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjY2xvbmVGYWJyaWNDYW52YXNcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSAgY2FudmFz7JeQIE9iamVjdHPrpbwg7LaU6rCA7ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjYW52YXNPYmogIE9iamVjdOqwgCDstpTqsIDrkKAgQ2FudmFzXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSAgb2JqZWN0cyDrs7XsgqzrkKAgT2JqZWN07J2YIOumrOyKpO2KuFxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY2xvbmVGYWJyaWNDYW52YXMoY2FudmFzT2JqLCBvYmplY3RzKSB7XHJcbiAgICAgICAgZmFicmljLnV0aWwuZW5saXZlbk9iamVjdHMob2JqZWN0cywgZnVuY3Rpb24gKG9ianMpIHtcclxuICAgICAgICAgICAgdmFyIG9yaWdSZW5kZXJPbkFkZFJlbW92ZSA9IGNhbnZhc09iai5yZW5kZXJPbkFkZFJlbW92ZTtcclxuICAgICAgICAgICAgY2FudmFzT2JqLnJlbmRlck9uQWRkUmVtb3ZlID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBvYmpzLmZvckVhY2goZnVuY3Rpb24gKG8pIHtcclxuICAgICAgICAgICAgICAgIGNhbnZhc09iai5hZGQobyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjYW52YXNPYmoucmVuZGVyT25BZGRSZW1vdmUgPSBvcmlnUmVuZGVyT25BZGRSZW1vdmU7XHJcbiAgICAgICAgICAgIGNhbnZhc09iai5yZW5kZXJBbGwoKTtcclxuICAgICAgICAgICAgY2FudmFzT2JqLmNhbGNPZmZzZXQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBpc1N0cmluZ0VtcHR5XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjaXNTdHJpbmdFbXB0eVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIOusuOyekOyXtOydtCDruYTslrTsnojripTsp4Ag7ZmV7J247ZWc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdHIg7ZmV7J247ZWgIOusuOyekOyXtFxyXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0g67mE7Ja07J6I7Jy866m0IHRydWUg67mE7Ja07J6I7KeAIOyViuycvOuptCBmYWxzZVxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgaXNTdHJpbmdFbXB0eShzdHIpIHtcclxuICAgICAgICBpZiAoc3RyID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3RyID09PSBcIlwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3RyID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBtZXJnZVJlY3RcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNtZXJnZVJlY3RcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSAg65GQIFJlY3Trpbwg7ZWp7Lmc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByMSB7bGVmdDogMCwgcmlnaHQ6IDAsIHRvcDogMCwgcmlnaHQ6IDB9IO2VqeyzkOyVvOuQmOuKlCBSZWN0IE9iamVjdFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHIyIHtsZWZ0OiAwLCByaWdodDogMCwgdG9wOiAwLCByaWdodDogMH0g7ZWp7LOQ7JW865CY64qUIFJlY3QgT2JqZWN0XHJcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHtsZWZ0OiAwLCByaWdodDogMCwgdG9wOiAwLCByaWdodDogMCwgeDogMCwgeTogMCwgd2lkdGg6IDAsIGhlaWdodDogMH06IO2VqeyzkOynhCBSZWN0XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBtZXJnZVJlY3QocjEsIHIyKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbGVmdDogTWF0aC5taW4ocjEubGVmdCwgcjIubGVmdCksXHJcbiAgICAgICAgICAgIHRvcDogTWF0aC5taW4ocjEudG9wLCByMi50b3ApLFxyXG4gICAgICAgICAgICByaWdodDogTWF0aC5tYXgocjEucmlnaHQsIHIyLnJpZ2h0KSxcclxuICAgICAgICAgICAgYm90dG9tOiBNYXRoLm1heChyMS5ib3R0b20sIHIyLmJvdHRvbSksXHJcbiAgICAgICAgICAgIHg6IE1hdGgubWluKHIxLmxlZnQsIHIyLmxlZnQpLFxyXG4gICAgICAgICAgICB5OiBNYXRoLm1pbihyMS50b3AsIHIyLnRvcCksXHJcbiAgICAgICAgICAgIHdpZHRoOiBNYXRoLmFicyhNYXRoLm1heChyMS5yaWdodCwgcjIucmlnaHQpIC0gTWF0aC5taW4ocjEubGVmdCwgcjIubGVmdCkpLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IE1hdGguYWJzKE1hdGgubWF4KHIxLmJvdHRvbSwgcjIuYm90dG9tKSAtIE1hdGgubWluKHIxLnRvcCwgcjIudG9wKSksXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGJvdW5kaW5nUmVjdFRvUmVjdFxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2JvdW5kaW5nUmVjdFRvUmVjdFxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIEJvdW5kaW5nUmVjdOulvCDsl6zquLDshJwg7IKs7Jqp7ZWgIFJlY3QgT2JqZWN066GcIOuzgOqyvVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZWN0IHtsZWZ0OiAwLCB3aXRoOiAwLCB3aWR0aDogMCwgaGVpZ2h0OiAwfSBCb3VuZGluZyBSZWN0IE9iamVjdFxyXG4gICAgICogQHJldHVybiB7T2JqZWN0fSB7bGVmdDogMCwgcmlnaHQ6IDAsIHRvcDogMCwgcmlnaHQ6IDB9OiDsl6zquLDshJwg7IKs7Jqp7ZWgIFJlY3QgT2JqZWN0XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBib3VuZGluZ1JlY3RUb1JlY3QocmVjdCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGxlZnQ6IHJlY3QubGVmdCxcclxuICAgICAgICAgICAgdG9wOiByZWN0LnRvcCxcclxuICAgICAgICAgICAgcmlnaHQ6IHJlY3QubGVmdCArIHJlY3Qud2lkdGgsXHJcbiAgICAgICAgICAgIGJvdHRvbTogcmVjdC50b3AgKyByZWN0LmhlaWdodFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBmdW5jdGlvbiBtZXJnZU9iamVjdHNSZWN0XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjbWVyZ2VPYmplY3RzUmVjdFxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIENhbnZhc+ydmCBQYXRoIE9iamVjdHPsnZggUmVjdOuTpOydhCDtlZjrgpjroZwg7ZWp7Lmc64ukLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjYW52YXMgRmFicmljIGNhbnZhczogUGF0aCBPYmplY3Rz6rCAIOyeiOuKlCBjYW52YXNcclxuICAgICAqIEByZXR1cm4ge09iamVjdH0ge2xlZnQ6IDAsIHJpZ2h0OiAwLCB0b3A6IDAsIHJpZ2h0OiAwfTog7Jes6riw7IScIOyCrOyaqe2VoCBSZWN0IE9iamVjdFxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgbWVyZ2VPYmplY3RzUmVjdChjYW52YXMpIHtcclxuICAgICAgICBsZXQgcmVjdCA9IG51bGw7XHJcbiAgICAgICAgY2FudmFzLmZvckVhY2hPYmplY3QoZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICB2YXIgYm91bmQgPSBvYmouZ2V0Qm91bmRpbmdSZWN0KCk7XHJcbiAgICAgICAgICAgIGlmIChyZWN0ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZWN0ID0gVXRpbHMubWVyZ2VSZWN0KFV0aWxzLmJvdW5kaW5nUmVjdFRvUmVjdChib3VuZCksIFV0aWxzLmJvdW5kaW5nUmVjdFRvUmVjdChib3VuZCkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVjdCA9IFV0aWxzLm1lcmdlUmVjdChyZWN0LCBVdGlscy5ib3VuZGluZ1JlY3RUb1JlY3QoYm91bmQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgcmV0dXJuIHJlY3Q7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gbWVyZ2VGaWVsZHNCQm94XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjbWVyZ2VGaWVsZHNCQm94XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykgRmllbGQgTGlzdOydmCBCQm9465Ok7J2EIO2VmOuCmOuhnCDtlansuZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gZmllbGRzIEZpZWxk7J2YIOuwsOyXtFxyXG4gICAgICogQHJldHVybiB7T2JqZWN0fSB7bGVmdDogMCwgcmlnaHQ6IDAsIHRvcDogMCwgcmlnaHQ6IDB9OiDsl6zquLDshJwg7IKs7Jqp7ZWgIFJlY3QgT2JqZWN0XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBtZXJnZUZpZWxkc0JCb3goZmllbGRzKSB7XHJcbiAgICAgICAgbGV0IHJlY3QgPSBudWxsO1xyXG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGZpZWxkcy5sZW5ndGg7IGlkeCArPSAxKSB7XHJcbiAgICAgICAgICAgIGxldCBib3VuZCA9IGZpZWxkc1tpZHhdLmdldEJCb3goKTtcclxuICAgICAgICAgICAgaWYgKHJlY3QgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJlY3QgPSBVdGlscy5tZXJnZVJlY3QoVXRpbHMuYm91bmRpbmdSZWN0VG9SZWN0KGJvdW5kKSwgVXRpbHMuYm91bmRpbmdSZWN0VG9SZWN0KGJvdW5kKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZWN0ID0gVXRpbHMubWVyZ2VSZWN0KHJlY3QsIFV0aWxzLmJvdW5kaW5nUmVjdFRvUmVjdChib3VuZCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZWN0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGltYWdlRmlsZVRvQmFzZTY0XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjaW1hZ2VGaWxlVG9CYXNlNjRcclxuICAgICAqIEBkZXNjcmlwdGlvbiAoU3RhdGljKSBJbWFnZe2MjOydvOydhCDsnb3slrQgQmFzZTY0IFN0cmluZ+ycvOuhnCDrsJjtmZjtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGZpbGUgRmlsZTog7J2066+47KeAIO2MjOydvOydmCBGaWxlIE9iamVjdFxyXG4gICAgICogQHBhcmFtIHtDYWxsYmFja30gY2FsbEJhY2tGdW5jICBCYXNlNjQg66y47J6Q7Je07J2EIOuwm+ydhCBjYWxsYmFjayBmdW5jdGlvblxyXG4gICAgICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgaW1hZ2VGaWxlVG9CYXNlNjQoZmlsZSwgY2FsbEJhY2tGdW5jKSB7XHJcbiAgICAgICAgaWYgKGZpbGUgPT09IHVuZGVmaW5lZCB8fCBmaWxlID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWZpbGUudHlwZS5zdGFydHNXaXRoKCdpbWFnZS8nKSkgeyByZXR1cm4gbnVsbDsgfVxyXG5cclxuICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcclxuICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjYWxsQmFja0Z1bmMocmVhZGVyLnJlc3VsdCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZWFkZXIub25lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3I6ICcsIGVycm9yKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGNoYW5nZUxvY2FsZVxyXG4gICAgICogQG5hbWUgbW9kdWxlOlRlbXBsYXRlL1V0aWxzLlV0aWxzI2NoYW5nZUxvY2FsZVxyXG4gICAgICogQGRlc2NyaXB0aW9uIChTdGF0aWMpIO2YhOyerCDslrjslrTrpbwg7YyM652866+47YSw7JeQIOunnuqyjCDrs4DtmZjtlZzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGxvY2FsZSDrsJTqv4Ag7Ja47Ja0XHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjaGFuZ2VMb2NhbGUobG9jYWxlKSB7XHJcbiAgICAgICAgVXRpbHMubG9jYWxlID0gbG9jYWxlO1xyXG4gICAgICAgIFV0aWxzLnRyYW5zbGF0b3IudHJhbnNsYXRlUGFnZVRvKGxvY2FsZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAZnVuY3Rpb24gdHJhbnNsYXRlRm9yS2V5XHJcbiAgICAgKiBAbmFtZSBtb2R1bGU6VGVtcGxhdGUvVXRpbHMuVXRpbHMjdHJhbnNsYXRlRm9yS2V5XHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg7YKk7JeQIO2VtOuLue2VmOuKlCDrrLjsnpDsl7TsnYQg7ZiE7J6sIOyWuOyWtOuhnCDrsJTqvrzri6QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGtleSDrsJTqv4Ag66y47J6Q7Je07JeQIO2VtOuLue2VmOuKlCDtgqRcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHRyYW5zbGF0ZUZvcktleShrZXkpIHtcclxuICAgICAgICByZXR1cm4gVXRpbHMudHJhbnNsYXRvci50cmFuc2xhdGVGb3JLZXkoa2V5LCBVdGlscy5sb2NhbGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIHRyYW5zbGF0b3JGaWxlTG9jYXRpb25cclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyN0cmFuc2xhdG9yRmlsZUxvY2F0aW9uXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg64uk6rWt7Ja0IOyWuOyWtCDtjIzsnbzsnZgg7JyE7LmY66W8IOyngOygle2VnOuLpC5cclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBsb2NhbGhvc3Q6NTUwMC9qcy9wZGZfZm9ybS9pMThu7J2YIOqyveyasCAgXCIvanMvcGRmX2Zvcm0vaTE4blwiXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlc0xvY2F0aW9uIOyWuOyWtO2MjOydvOydmCDsnITsuZgo7KCI64yAIOqyveuhnClcclxuICAgICAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHRyYW5zbGF0b3JGaWxlTG9jYXRpb24oZmlsZXNMb2NhdGlvbikge1xyXG4gICAgICAgIFV0aWxzLnRyYW5zbGF0b3IuY29uZmlnLmZpbGVzTG9jYXRpb24gPSBmaWxlc0xvY2F0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQGZ1bmN0aW9uIGFkZFRyYW5zbGF0b3JcclxuICAgICAqIEBuYW1lIG1vZHVsZTpUZW1wbGF0ZS9VdGlscy5VdGlscyNhZGRUcmFuc2xhdG9yXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gKFN0YXRpYykg64uk6rWt7Ja0IOyWuOyWtOulvCDstpTqsIDtlZzri6QuXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYWRkVHJhbnNsYXRvcihcImpwXCIsIGpzb25EYXRhKVxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbG9jYWxlIOyWuOyWtCDsnbTrpoRcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBsYW5nRGF0YSBpMThuL2tvLmpzb27qs7wg6rCZ7J2AIOyWkeyLneycvOuhnCDrkJwgSlNPTuydhCDtjIzsi7HtlZwg642w7J207YSwXHJcbiAgICAgKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhZGRUcmFuc2xhdG9yKGxvY2FsZSwgbGFuZ0RhdGEpIHtcclxuICAgICAgICBVdGlscy50cmFuc2xhdG9yLmFkZChsb2NhbGUsIGxhbmdEYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYXBwZW5kRm9udEZhbWlseShmb250RmFtaWx5QXJyKSB7XHJcbiAgICAgICAgVXRpbHMuZm9udEZhbWlseUNvbWJvQm94ID0gVXRpbHMuZm9udEZhbWlseUNvbWJvQm94LmNvbmNhdChmb250RmFtaWx5QXJyKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2VuZXJhdGVfdXVpZHY0KCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTUpICtcclxuICAgICAgICBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTUpO1xyXG4gICAgIH1cclxufVxyXG4iLCIvKlxuICogYW5pbWUuanMgdjMuMi4xXG4gKiAoYykgMjAyMCBKdWxpYW4gR2FybmllclxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4gKiBhbmltZWpzLmNvbVxuICovXG5cbi8vIERlZmF1bHRzXG5cbnZhciBkZWZhdWx0SW5zdGFuY2VTZXR0aW5ncyA9IHtcbiAgdXBkYXRlOiBudWxsLFxuICBiZWdpbjogbnVsbCxcbiAgbG9vcEJlZ2luOiBudWxsLFxuICBjaGFuZ2VCZWdpbjogbnVsbCxcbiAgY2hhbmdlOiBudWxsLFxuICBjaGFuZ2VDb21wbGV0ZTogbnVsbCxcbiAgbG9vcENvbXBsZXRlOiBudWxsLFxuICBjb21wbGV0ZTogbnVsbCxcbiAgbG9vcDogMSxcbiAgZGlyZWN0aW9uOiAnbm9ybWFsJyxcbiAgYXV0b3BsYXk6IHRydWUsXG4gIHRpbWVsaW5lT2Zmc2V0OiAwXG59O1xuXG52YXIgZGVmYXVsdFR3ZWVuU2V0dGluZ3MgPSB7XG4gIGR1cmF0aW9uOiAxMDAwLFxuICBkZWxheTogMCxcbiAgZW5kRGVsYXk6IDAsXG4gIGVhc2luZzogJ2Vhc2VPdXRFbGFzdGljKDEsIC41KScsXG4gIHJvdW5kOiAwXG59O1xuXG52YXIgdmFsaWRUcmFuc2Zvcm1zID0gWyd0cmFuc2xhdGVYJywgJ3RyYW5zbGF0ZVknLCAndHJhbnNsYXRlWicsICdyb3RhdGUnLCAncm90YXRlWCcsICdyb3RhdGVZJywgJ3JvdGF0ZVonLCAnc2NhbGUnLCAnc2NhbGVYJywgJ3NjYWxlWScsICdzY2FsZVonLCAnc2tldycsICdza2V3WCcsICdza2V3WScsICdwZXJzcGVjdGl2ZScsICdtYXRyaXgnLCAnbWF0cml4M2QnXTtcblxuLy8gQ2FjaGluZ1xuXG52YXIgY2FjaGUgPSB7XG4gIENTUzoge30sXG4gIHNwcmluZ3M6IHt9XG59O1xuXG4vLyBVdGlsc1xuXG5mdW5jdGlvbiBtaW5NYXgodmFsLCBtaW4sIG1heCkge1xuICByZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgodmFsLCBtaW4pLCBtYXgpO1xufVxuXG5mdW5jdGlvbiBzdHJpbmdDb250YWlucyhzdHIsIHRleHQpIHtcbiAgcmV0dXJuIHN0ci5pbmRleE9mKHRleHQpID4gLTE7XG59XG5cbmZ1bmN0aW9uIGFwcGx5QXJndW1lbnRzKGZ1bmMsIGFyZ3MpIHtcbiAgcmV0dXJuIGZ1bmMuYXBwbHkobnVsbCwgYXJncyk7XG59XG5cbnZhciBpcyA9IHtcbiAgYXJyOiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQXJyYXkuaXNBcnJheShhKTsgfSxcbiAgb2JqOiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gc3RyaW5nQ29udGFpbnMoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpLCAnT2JqZWN0Jyk7IH0sXG4gIHB0aDogZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGlzLm9iaihhKSAmJiBhLmhhc093blByb3BlcnR5KCd0b3RhbExlbmd0aCcpOyB9LFxuICBzdmc6IGZ1bmN0aW9uIChhKSB7IHJldHVybiBhIGluc3RhbmNlb2YgU1ZHRWxlbWVudDsgfSxcbiAgaW5wOiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gYSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQ7IH0sXG4gIGRvbTogZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGEubm9kZVR5cGUgfHwgaXMuc3ZnKGEpOyB9LFxuICBzdHI6IGZ1bmN0aW9uIChhKSB7IHJldHVybiB0eXBlb2YgYSA9PT0gJ3N0cmluZyc7IH0sXG4gIGZuYzogZnVuY3Rpb24gKGEpIHsgcmV0dXJuIHR5cGVvZiBhID09PSAnZnVuY3Rpb24nOyB9LFxuICB1bmQ6IGZ1bmN0aW9uIChhKSB7IHJldHVybiB0eXBlb2YgYSA9PT0gJ3VuZGVmaW5lZCc7IH0sXG4gIG5pbDogZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGlzLnVuZChhKSB8fCBhID09PSBudWxsOyB9LFxuICBoZXg6IGZ1bmN0aW9uIChhKSB7IHJldHVybiAvKF4jWzAtOUEtRl17Nn0kKXwoXiNbMC05QS1GXXszfSQpL2kudGVzdChhKTsgfSxcbiAgcmdiOiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gL15yZ2IvLnRlc3QoYSk7IH0sXG4gIGhzbDogZnVuY3Rpb24gKGEpIHsgcmV0dXJuIC9eaHNsLy50ZXN0KGEpOyB9LFxuICBjb2w6IGZ1bmN0aW9uIChhKSB7IHJldHVybiAoaXMuaGV4KGEpIHx8IGlzLnJnYihhKSB8fCBpcy5oc2woYSkpOyB9LFxuICBrZXk6IGZ1bmN0aW9uIChhKSB7IHJldHVybiAhZGVmYXVsdEluc3RhbmNlU2V0dGluZ3MuaGFzT3duUHJvcGVydHkoYSkgJiYgIWRlZmF1bHRUd2VlblNldHRpbmdzLmhhc093blByb3BlcnR5KGEpICYmIGEgIT09ICd0YXJnZXRzJyAmJiBhICE9PSAna2V5ZnJhbWVzJzsgfSxcbn07XG5cbi8vIEVhc2luZ3NcblxuZnVuY3Rpb24gcGFyc2VFYXNpbmdQYXJhbWV0ZXJzKHN0cmluZykge1xuICB2YXIgbWF0Y2ggPSAvXFwoKFteKV0rKVxcKS8uZXhlYyhzdHJpbmcpO1xuICByZXR1cm4gbWF0Y2ggPyBtYXRjaFsxXS5zcGxpdCgnLCcpLm1hcChmdW5jdGlvbiAocCkgeyByZXR1cm4gcGFyc2VGbG9hdChwKTsgfSkgOiBbXTtcbn1cblxuLy8gU3ByaW5nIHNvbHZlciBpbnNwaXJlZCBieSBXZWJraXQgQ29weXJpZ2h0IMKpIDIwMTYgQXBwbGUgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLiBodHRwczovL3dlYmtpdC5vcmcvZGVtb3Mvc3ByaW5nL3NwcmluZy5qc1xuXG5mdW5jdGlvbiBzcHJpbmcoc3RyaW5nLCBkdXJhdGlvbikge1xuXG4gIHZhciBwYXJhbXMgPSBwYXJzZUVhc2luZ1BhcmFtZXRlcnMoc3RyaW5nKTtcbiAgdmFyIG1hc3MgPSBtaW5NYXgoaXMudW5kKHBhcmFtc1swXSkgPyAxIDogcGFyYW1zWzBdLCAuMSwgMTAwKTtcbiAgdmFyIHN0aWZmbmVzcyA9IG1pbk1heChpcy51bmQocGFyYW1zWzFdKSA/IDEwMCA6IHBhcmFtc1sxXSwgLjEsIDEwMCk7XG4gIHZhciBkYW1waW5nID0gbWluTWF4KGlzLnVuZChwYXJhbXNbMl0pID8gMTAgOiBwYXJhbXNbMl0sIC4xLCAxMDApO1xuICB2YXIgdmVsb2NpdHkgPSAgbWluTWF4KGlzLnVuZChwYXJhbXNbM10pID8gMCA6IHBhcmFtc1szXSwgLjEsIDEwMCk7XG4gIHZhciB3MCA9IE1hdGguc3FydChzdGlmZm5lc3MgLyBtYXNzKTtcbiAgdmFyIHpldGEgPSBkYW1waW5nIC8gKDIgKiBNYXRoLnNxcnQoc3RpZmZuZXNzICogbWFzcykpO1xuICB2YXIgd2QgPSB6ZXRhIDwgMSA/IHcwICogTWF0aC5zcXJ0KDEgLSB6ZXRhICogemV0YSkgOiAwO1xuICB2YXIgYSA9IDE7XG4gIHZhciBiID0gemV0YSA8IDEgPyAoemV0YSAqIHcwICsgLXZlbG9jaXR5KSAvIHdkIDogLXZlbG9jaXR5ICsgdzA7XG5cbiAgZnVuY3Rpb24gc29sdmVyKHQpIHtcbiAgICB2YXIgcHJvZ3Jlc3MgPSBkdXJhdGlvbiA/IChkdXJhdGlvbiAqIHQpIC8gMTAwMCA6IHQ7XG4gICAgaWYgKHpldGEgPCAxKSB7XG4gICAgICBwcm9ncmVzcyA9IE1hdGguZXhwKC1wcm9ncmVzcyAqIHpldGEgKiB3MCkgKiAoYSAqIE1hdGguY29zKHdkICogcHJvZ3Jlc3MpICsgYiAqIE1hdGguc2luKHdkICogcHJvZ3Jlc3MpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJvZ3Jlc3MgPSAoYSArIGIgKiBwcm9ncmVzcykgKiBNYXRoLmV4cCgtcHJvZ3Jlc3MgKiB3MCk7XG4gICAgfVxuICAgIGlmICh0ID09PSAwIHx8IHQgPT09IDEpIHsgcmV0dXJuIHQ7IH1cbiAgICByZXR1cm4gMSAtIHByb2dyZXNzO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RHVyYXRpb24oKSB7XG4gICAgdmFyIGNhY2hlZCA9IGNhY2hlLnNwcmluZ3Nbc3RyaW5nXTtcbiAgICBpZiAoY2FjaGVkKSB7IHJldHVybiBjYWNoZWQ7IH1cbiAgICB2YXIgZnJhbWUgPSAxLzY7XG4gICAgdmFyIGVsYXBzZWQgPSAwO1xuICAgIHZhciByZXN0ID0gMDtcbiAgICB3aGlsZSh0cnVlKSB7XG4gICAgICBlbGFwc2VkICs9IGZyYW1lO1xuICAgICAgaWYgKHNvbHZlcihlbGFwc2VkKSA9PT0gMSkge1xuICAgICAgICByZXN0Kys7XG4gICAgICAgIGlmIChyZXN0ID49IDE2KSB7IGJyZWFrOyB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN0ID0gMDtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIGR1cmF0aW9uID0gZWxhcHNlZCAqIGZyYW1lICogMTAwMDtcbiAgICBjYWNoZS5zcHJpbmdzW3N0cmluZ10gPSBkdXJhdGlvbjtcbiAgICByZXR1cm4gZHVyYXRpb247XG4gIH1cblxuICByZXR1cm4gZHVyYXRpb24gPyBzb2x2ZXIgOiBnZXREdXJhdGlvbjtcblxufVxuXG4vLyBCYXNpYyBzdGVwcyBlYXNpbmcgaW1wbGVtZW50YXRpb24gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZnIvZG9jcy9XZWIvQ1NTL3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uXG5cbmZ1bmN0aW9uIHN0ZXBzKHN0ZXBzKSB7XG4gIGlmICggc3RlcHMgPT09IHZvaWQgMCApIHN0ZXBzID0gMTA7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICh0KSB7IHJldHVybiBNYXRoLmNlaWwoKG1pbk1heCh0LCAwLjAwMDAwMSwgMSkpICogc3RlcHMpICogKDEgLyBzdGVwcyk7IH07XG59XG5cbi8vIEJlemllckVhc2luZyBodHRwczovL2dpdGh1Yi5jb20vZ3JlL2Jlemllci1lYXNpbmdcblxudmFyIGJlemllciA9IChmdW5jdGlvbiAoKSB7XG5cbiAgdmFyIGtTcGxpbmVUYWJsZVNpemUgPSAxMTtcbiAgdmFyIGtTYW1wbGVTdGVwU2l6ZSA9IDEuMCAvIChrU3BsaW5lVGFibGVTaXplIC0gMS4wKTtcblxuICBmdW5jdGlvbiBBKGFBMSwgYUEyKSB7IHJldHVybiAxLjAgLSAzLjAgKiBhQTIgKyAzLjAgKiBhQTEgfVxuICBmdW5jdGlvbiBCKGFBMSwgYUEyKSB7IHJldHVybiAzLjAgKiBhQTIgLSA2LjAgKiBhQTEgfVxuICBmdW5jdGlvbiBDKGFBMSkgICAgICB7IHJldHVybiAzLjAgKiBhQTEgfVxuXG4gIGZ1bmN0aW9uIGNhbGNCZXppZXIoYVQsIGFBMSwgYUEyKSB7IHJldHVybiAoKEEoYUExLCBhQTIpICogYVQgKyBCKGFBMSwgYUEyKSkgKiBhVCArIEMoYUExKSkgKiBhVCB9XG4gIGZ1bmN0aW9uIGdldFNsb3BlKGFULCBhQTEsIGFBMikgeyByZXR1cm4gMy4wICogQShhQTEsIGFBMikgKiBhVCAqIGFUICsgMi4wICogQihhQTEsIGFBMikgKiBhVCArIEMoYUExKSB9XG5cbiAgZnVuY3Rpb24gYmluYXJ5U3ViZGl2aWRlKGFYLCBhQSwgYUIsIG1YMSwgbVgyKSB7XG4gICAgdmFyIGN1cnJlbnRYLCBjdXJyZW50VCwgaSA9IDA7XG4gICAgZG8ge1xuICAgICAgY3VycmVudFQgPSBhQSArIChhQiAtIGFBKSAvIDIuMDtcbiAgICAgIGN1cnJlbnRYID0gY2FsY0JlemllcihjdXJyZW50VCwgbVgxLCBtWDIpIC0gYVg7XG4gICAgICBpZiAoY3VycmVudFggPiAwLjApIHsgYUIgPSBjdXJyZW50VDsgfSBlbHNlIHsgYUEgPSBjdXJyZW50VDsgfVxuICAgIH0gd2hpbGUgKE1hdGguYWJzKGN1cnJlbnRYKSA+IDAuMDAwMDAwMSAmJiArK2kgPCAxMCk7XG4gICAgcmV0dXJuIGN1cnJlbnRUO1xuICB9XG5cbiAgZnVuY3Rpb24gbmV3dG9uUmFwaHNvbkl0ZXJhdGUoYVgsIGFHdWVzc1QsIG1YMSwgbVgyKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyArK2kpIHtcbiAgICAgIHZhciBjdXJyZW50U2xvcGUgPSBnZXRTbG9wZShhR3Vlc3NULCBtWDEsIG1YMik7XG4gICAgICBpZiAoY3VycmVudFNsb3BlID09PSAwLjApIHsgcmV0dXJuIGFHdWVzc1Q7IH1cbiAgICAgIHZhciBjdXJyZW50WCA9IGNhbGNCZXppZXIoYUd1ZXNzVCwgbVgxLCBtWDIpIC0gYVg7XG4gICAgICBhR3Vlc3NUIC09IGN1cnJlbnRYIC8gY3VycmVudFNsb3BlO1xuICAgIH1cbiAgICByZXR1cm4gYUd1ZXNzVDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGJlemllcihtWDEsIG1ZMSwgbVgyLCBtWTIpIHtcblxuICAgIGlmICghKDAgPD0gbVgxICYmIG1YMSA8PSAxICYmIDAgPD0gbVgyICYmIG1YMiA8PSAxKSkgeyByZXR1cm47IH1cbiAgICB2YXIgc2FtcGxlVmFsdWVzID0gbmV3IEZsb2F0MzJBcnJheShrU3BsaW5lVGFibGVTaXplKTtcblxuICAgIGlmIChtWDEgIT09IG1ZMSB8fCBtWDIgIT09IG1ZMikge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrU3BsaW5lVGFibGVTaXplOyArK2kpIHtcbiAgICAgICAgc2FtcGxlVmFsdWVzW2ldID0gY2FsY0JlemllcihpICoga1NhbXBsZVN0ZXBTaXplLCBtWDEsIG1YMik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0VEZvclgoYVgpIHtcblxuICAgICAgdmFyIGludGVydmFsU3RhcnQgPSAwO1xuICAgICAgdmFyIGN1cnJlbnRTYW1wbGUgPSAxO1xuICAgICAgdmFyIGxhc3RTYW1wbGUgPSBrU3BsaW5lVGFibGVTaXplIC0gMTtcblxuICAgICAgZm9yICg7IGN1cnJlbnRTYW1wbGUgIT09IGxhc3RTYW1wbGUgJiYgc2FtcGxlVmFsdWVzW2N1cnJlbnRTYW1wbGVdIDw9IGFYOyArK2N1cnJlbnRTYW1wbGUpIHtcbiAgICAgICAgaW50ZXJ2YWxTdGFydCArPSBrU2FtcGxlU3RlcFNpemU7XG4gICAgICB9XG5cbiAgICAgIC0tY3VycmVudFNhbXBsZTtcblxuICAgICAgdmFyIGRpc3QgPSAoYVggLSBzYW1wbGVWYWx1ZXNbY3VycmVudFNhbXBsZV0pIC8gKHNhbXBsZVZhbHVlc1tjdXJyZW50U2FtcGxlICsgMV0gLSBzYW1wbGVWYWx1ZXNbY3VycmVudFNhbXBsZV0pO1xuICAgICAgdmFyIGd1ZXNzRm9yVCA9IGludGVydmFsU3RhcnQgKyBkaXN0ICoga1NhbXBsZVN0ZXBTaXplO1xuICAgICAgdmFyIGluaXRpYWxTbG9wZSA9IGdldFNsb3BlKGd1ZXNzRm9yVCwgbVgxLCBtWDIpO1xuXG4gICAgICBpZiAoaW5pdGlhbFNsb3BlID49IDAuMDAxKSB7XG4gICAgICAgIHJldHVybiBuZXd0b25SYXBoc29uSXRlcmF0ZShhWCwgZ3Vlc3NGb3JULCBtWDEsIG1YMik7XG4gICAgICB9IGVsc2UgaWYgKGluaXRpYWxTbG9wZSA9PT0gMC4wKSB7XG4gICAgICAgIHJldHVybiBndWVzc0ZvclQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYmluYXJ5U3ViZGl2aWRlKGFYLCBpbnRlcnZhbFN0YXJ0LCBpbnRlcnZhbFN0YXJ0ICsga1NhbXBsZVN0ZXBTaXplLCBtWDEsIG1YMik7XG4gICAgICB9XG5cbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmIChtWDEgPT09IG1ZMSAmJiBtWDIgPT09IG1ZMikgeyByZXR1cm4geDsgfVxuICAgICAgaWYgKHggPT09IDAgfHwgeCA9PT0gMSkgeyByZXR1cm4geDsgfVxuICAgICAgcmV0dXJuIGNhbGNCZXppZXIoZ2V0VEZvclgoeCksIG1ZMSwgbVkyKTtcbiAgICB9XG5cbiAgfVxuXG4gIHJldHVybiBiZXppZXI7XG5cbn0pKCk7XG5cbnZhciBwZW5uZXIgPSAoZnVuY3Rpb24gKCkge1xuXG4gIC8vIEJhc2VkIG9uIGpRdWVyeSBVSSdzIGltcGxlbWVuYXRpb24gb2YgZWFzaW5nIGVxdWF0aW9ucyBmcm9tIFJvYmVydCBQZW5uZXIgKGh0dHA6Ly93d3cucm9iZXJ0cGVubmVyLmNvbS9lYXNpbmcpXG5cbiAgdmFyIGVhc2VzID0geyBsaW5lYXI6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZ1bmN0aW9uICh0KSB7IHJldHVybiB0OyB9OyB9IH07XG5cbiAgdmFyIGZ1bmN0aW9uRWFzaW5ncyA9IHtcbiAgICBTaW5lOiBmdW5jdGlvbiAoKSB7IHJldHVybiBmdW5jdGlvbiAodCkgeyByZXR1cm4gMSAtIE1hdGguY29zKHQgKiBNYXRoLlBJIC8gMik7IH07IH0sXG4gICAgQ2lyYzogZnVuY3Rpb24gKCkgeyByZXR1cm4gZnVuY3Rpb24gKHQpIHsgcmV0dXJuIDEgLSBNYXRoLnNxcnQoMSAtIHQgKiB0KTsgfTsgfSxcbiAgICBCYWNrOiBmdW5jdGlvbiAoKSB7IHJldHVybiBmdW5jdGlvbiAodCkgeyByZXR1cm4gdCAqIHQgKiAoMyAqIHQgLSAyKTsgfTsgfSxcbiAgICBCb3VuY2U6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZ1bmN0aW9uICh0KSB7XG4gICAgICB2YXIgcG93MiwgYiA9IDQ7XG4gICAgICB3aGlsZSAodCA8ICgoIHBvdzIgPSBNYXRoLnBvdygyLCAtLWIpKSAtIDEpIC8gMTEpIHt9XG4gICAgICByZXR1cm4gMSAvIE1hdGgucG93KDQsIDMgLSBiKSAtIDcuNTYyNSAqIE1hdGgucG93KCggcG93MiAqIDMgLSAyICkgLyAyMiAtIHQsIDIpXG4gICAgfTsgfSxcbiAgICBFbGFzdGljOiBmdW5jdGlvbiAoYW1wbGl0dWRlLCBwZXJpb2QpIHtcbiAgICAgIGlmICggYW1wbGl0dWRlID09PSB2b2lkIDAgKSBhbXBsaXR1ZGUgPSAxO1xuICAgICAgaWYgKCBwZXJpb2QgPT09IHZvaWQgMCApIHBlcmlvZCA9IC41O1xuXG4gICAgICB2YXIgYSA9IG1pbk1heChhbXBsaXR1ZGUsIDEsIDEwKTtcbiAgICAgIHZhciBwID0gbWluTWF4KHBlcmlvZCwgLjEsIDIpO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHJldHVybiAodCA9PT0gMCB8fCB0ID09PSAxKSA/IHQgOiBcbiAgICAgICAgICAtYSAqIE1hdGgucG93KDIsIDEwICogKHQgLSAxKSkgKiBNYXRoLnNpbigoKCh0IC0gMSkgLSAocCAvIChNYXRoLlBJICogMikgKiBNYXRoLmFzaW4oMSAvIGEpKSkgKiAoTWF0aC5QSSAqIDIpKSAvIHApO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB2YXIgYmFzZUVhc2luZ3MgPSBbJ1F1YWQnLCAnQ3ViaWMnLCAnUXVhcnQnLCAnUXVpbnQnLCAnRXhwbyddO1xuXG4gIGJhc2VFYXNpbmdzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUsIGkpIHtcbiAgICBmdW5jdGlvbkVhc2luZ3NbbmFtZV0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiBmdW5jdGlvbiAodCkgeyByZXR1cm4gTWF0aC5wb3codCwgaSArIDIpOyB9OyB9O1xuICB9KTtcblxuICBPYmplY3Qua2V5cyhmdW5jdGlvbkVhc2luZ3MpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB2YXIgZWFzZUluID0gZnVuY3Rpb25FYXNpbmdzW25hbWVdO1xuICAgIGVhc2VzWydlYXNlSW4nICsgbmFtZV0gPSBlYXNlSW47XG4gICAgZWFzZXNbJ2Vhc2VPdXQnICsgbmFtZV0gPSBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gZnVuY3Rpb24gKHQpIHsgcmV0dXJuIDEgLSBlYXNlSW4oYSwgYikoMSAtIHQpOyB9OyB9O1xuICAgIGVhc2VzWydlYXNlSW5PdXQnICsgbmFtZV0gPSBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHQgPCAwLjUgPyBlYXNlSW4oYSwgYikodCAqIDIpIC8gMiA6IFxuICAgICAgMSAtIGVhc2VJbihhLCBiKSh0ICogLTIgKyAyKSAvIDI7IH07IH07XG4gICAgZWFzZXNbJ2Vhc2VPdXRJbicgKyBuYW1lXSA9IGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBmdW5jdGlvbiAodCkgeyByZXR1cm4gdCA8IDAuNSA/ICgxIC0gZWFzZUluKGEsIGIpKDEgLSB0ICogMikpIC8gMiA6IFxuICAgICAgKGVhc2VJbihhLCBiKSh0ICogMiAtIDEpICsgMSkgLyAyOyB9OyB9O1xuICB9KTtcblxuICByZXR1cm4gZWFzZXM7XG5cbn0pKCk7XG5cbmZ1bmN0aW9uIHBhcnNlRWFzaW5ncyhlYXNpbmcsIGR1cmF0aW9uKSB7XG4gIGlmIChpcy5mbmMoZWFzaW5nKSkgeyByZXR1cm4gZWFzaW5nOyB9XG4gIHZhciBuYW1lID0gZWFzaW5nLnNwbGl0KCcoJylbMF07XG4gIHZhciBlYXNlID0gcGVubmVyW25hbWVdO1xuICB2YXIgYXJncyA9IHBhcnNlRWFzaW5nUGFyYW1ldGVycyhlYXNpbmcpO1xuICBzd2l0Y2ggKG5hbWUpIHtcbiAgICBjYXNlICdzcHJpbmcnIDogcmV0dXJuIHNwcmluZyhlYXNpbmcsIGR1cmF0aW9uKTtcbiAgICBjYXNlICdjdWJpY0JlemllcicgOiByZXR1cm4gYXBwbHlBcmd1bWVudHMoYmV6aWVyLCBhcmdzKTtcbiAgICBjYXNlICdzdGVwcycgOiByZXR1cm4gYXBwbHlBcmd1bWVudHMoc3RlcHMsIGFyZ3MpO1xuICAgIGRlZmF1bHQgOiByZXR1cm4gYXBwbHlBcmd1bWVudHMoZWFzZSwgYXJncyk7XG4gIH1cbn1cblxuLy8gU3RyaW5nc1xuXG5mdW5jdGlvbiBzZWxlY3RTdHJpbmcoc3RyKSB7XG4gIHRyeSB7XG4gICAgdmFyIG5vZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzdHIpO1xuICAgIHJldHVybiBub2RlcztcbiAgfSBjYXRjaChlKSB7XG4gICAgcmV0dXJuO1xuICB9XG59XG5cbi8vIEFycmF5c1xuXG5mdW5jdGlvbiBmaWx0ZXJBcnJheShhcnIsIGNhbGxiYWNrKSB7XG4gIHZhciBsZW4gPSBhcnIubGVuZ3RoO1xuICB2YXIgdGhpc0FyZyA9IGFyZ3VtZW50cy5sZW5ndGggPj0gMiA/IGFyZ3VtZW50c1sxXSA6IHZvaWQgMDtcbiAgdmFyIHJlc3VsdCA9IFtdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgaWYgKGkgaW4gYXJyKSB7XG4gICAgICB2YXIgdmFsID0gYXJyW2ldO1xuICAgICAgaWYgKGNhbGxiYWNrLmNhbGwodGhpc0FyZywgdmFsLCBpLCBhcnIpKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKHZhbCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGZsYXR0ZW5BcnJheShhcnIpIHtcbiAgcmV0dXJuIGFyci5yZWR1Y2UoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEuY29uY2F0KGlzLmFycihiKSA/IGZsYXR0ZW5BcnJheShiKSA6IGIpOyB9LCBbXSk7XG59XG5cbmZ1bmN0aW9uIHRvQXJyYXkobykge1xuICBpZiAoaXMuYXJyKG8pKSB7IHJldHVybiBvOyB9XG4gIGlmIChpcy5zdHIobykpIHsgbyA9IHNlbGVjdFN0cmluZyhvKSB8fCBvOyB9XG4gIGlmIChvIGluc3RhbmNlb2YgTm9kZUxpc3QgfHwgbyBpbnN0YW5jZW9mIEhUTUxDb2xsZWN0aW9uKSB7IHJldHVybiBbXS5zbGljZS5jYWxsKG8pOyB9XG4gIHJldHVybiBbb107XG59XG5cbmZ1bmN0aW9uIGFycmF5Q29udGFpbnMoYXJyLCB2YWwpIHtcbiAgcmV0dXJuIGFyci5zb21lKGZ1bmN0aW9uIChhKSB7IHJldHVybiBhID09PSB2YWw7IH0pO1xufVxuXG4vLyBPYmplY3RzXG5cbmZ1bmN0aW9uIGNsb25lT2JqZWN0KG8pIHtcbiAgdmFyIGNsb25lID0ge307XG4gIGZvciAodmFyIHAgaW4gbykgeyBjbG9uZVtwXSA9IG9bcF07IH1cbiAgcmV0dXJuIGNsb25lO1xufVxuXG5mdW5jdGlvbiByZXBsYWNlT2JqZWN0UHJvcHMobzEsIG8yKSB7XG4gIHZhciBvID0gY2xvbmVPYmplY3QobzEpO1xuICBmb3IgKHZhciBwIGluIG8xKSB7IG9bcF0gPSBvMi5oYXNPd25Qcm9wZXJ0eShwKSA/IG8yW3BdIDogbzFbcF07IH1cbiAgcmV0dXJuIG87XG59XG5cbmZ1bmN0aW9uIG1lcmdlT2JqZWN0cyhvMSwgbzIpIHtcbiAgdmFyIG8gPSBjbG9uZU9iamVjdChvMSk7XG4gIGZvciAodmFyIHAgaW4gbzIpIHsgb1twXSA9IGlzLnVuZChvMVtwXSkgPyBvMltwXSA6IG8xW3BdOyB9XG4gIHJldHVybiBvO1xufVxuXG4vLyBDb2xvcnNcblxuZnVuY3Rpb24gcmdiVG9SZ2JhKHJnYlZhbHVlKSB7XG4gIHZhciByZ2IgPSAvcmdiXFwoKFxcZCssXFxzKltcXGRdKyxcXHMqW1xcZF0rKVxcKS9nLmV4ZWMocmdiVmFsdWUpO1xuICByZXR1cm4gcmdiID8gKFwicmdiYShcIiArIChyZ2JbMV0pICsgXCIsMSlcIikgOiByZ2JWYWx1ZTtcbn1cblxuZnVuY3Rpb24gaGV4VG9SZ2JhKGhleFZhbHVlKSB7XG4gIHZhciByZ3ggPSAvXiM/KFthLWZcXGRdKShbYS1mXFxkXSkoW2EtZlxcZF0pJC9pO1xuICB2YXIgaGV4ID0gaGV4VmFsdWUucmVwbGFjZShyZ3gsIGZ1bmN0aW9uIChtLCByLCBnLCBiKSB7IHJldHVybiByICsgciArIGcgKyBnICsgYiArIGI7IH0gKTtcbiAgdmFyIHJnYiA9IC9eIz8oW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkkL2kuZXhlYyhoZXgpO1xuICB2YXIgciA9IHBhcnNlSW50KHJnYlsxXSwgMTYpO1xuICB2YXIgZyA9IHBhcnNlSW50KHJnYlsyXSwgMTYpO1xuICB2YXIgYiA9IHBhcnNlSW50KHJnYlszXSwgMTYpO1xuICByZXR1cm4gKFwicmdiYShcIiArIHIgKyBcIixcIiArIGcgKyBcIixcIiArIGIgKyBcIiwxKVwiKTtcbn1cblxuZnVuY3Rpb24gaHNsVG9SZ2JhKGhzbFZhbHVlKSB7XG4gIHZhciBoc2wgPSAvaHNsXFwoKFxcZCspLFxccyooW1xcZC5dKyklLFxccyooW1xcZC5dKyklXFwpL2cuZXhlYyhoc2xWYWx1ZSkgfHwgL2hzbGFcXCgoXFxkKyksXFxzKihbXFxkLl0rKSUsXFxzKihbXFxkLl0rKSUsXFxzKihbXFxkLl0rKVxcKS9nLmV4ZWMoaHNsVmFsdWUpO1xuICB2YXIgaCA9IHBhcnNlSW50KGhzbFsxXSwgMTApIC8gMzYwO1xuICB2YXIgcyA9IHBhcnNlSW50KGhzbFsyXSwgMTApIC8gMTAwO1xuICB2YXIgbCA9IHBhcnNlSW50KGhzbFszXSwgMTApIC8gMTAwO1xuICB2YXIgYSA9IGhzbFs0XSB8fCAxO1xuICBmdW5jdGlvbiBodWUycmdiKHAsIHEsIHQpIHtcbiAgICBpZiAodCA8IDApIHsgdCArPSAxOyB9XG4gICAgaWYgKHQgPiAxKSB7IHQgLT0gMTsgfVxuICAgIGlmICh0IDwgMS82KSB7IHJldHVybiBwICsgKHEgLSBwKSAqIDYgKiB0OyB9XG4gICAgaWYgKHQgPCAxLzIpIHsgcmV0dXJuIHE7IH1cbiAgICBpZiAodCA8IDIvMykgeyByZXR1cm4gcCArIChxIC0gcCkgKiAoMi8zIC0gdCkgKiA2OyB9XG4gICAgcmV0dXJuIHA7XG4gIH1cbiAgdmFyIHIsIGcsIGI7XG4gIGlmIChzID09IDApIHtcbiAgICByID0gZyA9IGIgPSBsO1xuICB9IGVsc2Uge1xuICAgIHZhciBxID0gbCA8IDAuNSA/IGwgKiAoMSArIHMpIDogbCArIHMgLSBsICogcztcbiAgICB2YXIgcCA9IDIgKiBsIC0gcTtcbiAgICByID0gaHVlMnJnYihwLCBxLCBoICsgMS8zKTtcbiAgICBnID0gaHVlMnJnYihwLCBxLCBoKTtcbiAgICBiID0gaHVlMnJnYihwLCBxLCBoIC0gMS8zKTtcbiAgfVxuICByZXR1cm4gKFwicmdiYShcIiArIChyICogMjU1KSArIFwiLFwiICsgKGcgKiAyNTUpICsgXCIsXCIgKyAoYiAqIDI1NSkgKyBcIixcIiArIGEgKyBcIilcIik7XG59XG5cbmZ1bmN0aW9uIGNvbG9yVG9SZ2IodmFsKSB7XG4gIGlmIChpcy5yZ2IodmFsKSkgeyByZXR1cm4gcmdiVG9SZ2JhKHZhbCk7IH1cbiAgaWYgKGlzLmhleCh2YWwpKSB7IHJldHVybiBoZXhUb1JnYmEodmFsKTsgfVxuICBpZiAoaXMuaHNsKHZhbCkpIHsgcmV0dXJuIGhzbFRvUmdiYSh2YWwpOyB9XG59XG5cbi8vIFVuaXRzXG5cbmZ1bmN0aW9uIGdldFVuaXQodmFsKSB7XG4gIHZhciBzcGxpdCA9IC9bKy1dP1xcZCpcXC4/XFxkKyg/OlxcLlxcZCspPyg/OltlRV1bKy1dP1xcZCspPyglfHB4fHB0fGVtfHJlbXxpbnxjbXxtbXxleHxjaHxwY3x2d3x2aHx2bWlufHZtYXh8ZGVnfHJhZHx0dXJuKT8kLy5leGVjKHZhbCk7XG4gIGlmIChzcGxpdCkgeyByZXR1cm4gc3BsaXRbMV07IH1cbn1cblxuZnVuY3Rpb24gZ2V0VHJhbnNmb3JtVW5pdChwcm9wTmFtZSkge1xuICBpZiAoc3RyaW5nQ29udGFpbnMocHJvcE5hbWUsICd0cmFuc2xhdGUnKSB8fCBwcm9wTmFtZSA9PT0gJ3BlcnNwZWN0aXZlJykgeyByZXR1cm4gJ3B4JzsgfVxuICBpZiAoc3RyaW5nQ29udGFpbnMocHJvcE5hbWUsICdyb3RhdGUnKSB8fCBzdHJpbmdDb250YWlucyhwcm9wTmFtZSwgJ3NrZXcnKSkgeyByZXR1cm4gJ2RlZyc7IH1cbn1cblxuLy8gVmFsdWVzXG5cbmZ1bmN0aW9uIGdldEZ1bmN0aW9uVmFsdWUodmFsLCBhbmltYXRhYmxlKSB7XG4gIGlmICghaXMuZm5jKHZhbCkpIHsgcmV0dXJuIHZhbDsgfVxuICByZXR1cm4gdmFsKGFuaW1hdGFibGUudGFyZ2V0LCBhbmltYXRhYmxlLmlkLCBhbmltYXRhYmxlLnRvdGFsKTtcbn1cblxuZnVuY3Rpb24gZ2V0QXR0cmlidXRlKGVsLCBwcm9wKSB7XG4gIHJldHVybiBlbC5nZXRBdHRyaWJ1dGUocHJvcCk7XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRQeFRvVW5pdChlbCwgdmFsdWUsIHVuaXQpIHtcbiAgdmFyIHZhbHVlVW5pdCA9IGdldFVuaXQodmFsdWUpO1xuICBpZiAoYXJyYXlDb250YWlucyhbdW5pdCwgJ2RlZycsICdyYWQnLCAndHVybiddLCB2YWx1ZVVuaXQpKSB7IHJldHVybiB2YWx1ZTsgfVxuICB2YXIgY2FjaGVkID0gY2FjaGUuQ1NTW3ZhbHVlICsgdW5pdF07XG4gIGlmICghaXMudW5kKGNhY2hlZCkpIHsgcmV0dXJuIGNhY2hlZDsgfVxuICB2YXIgYmFzZWxpbmUgPSAxMDA7XG4gIHZhciB0ZW1wRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsLnRhZ05hbWUpO1xuICB2YXIgcGFyZW50RWwgPSAoZWwucGFyZW50Tm9kZSAmJiAoZWwucGFyZW50Tm9kZSAhPT0gZG9jdW1lbnQpKSA/IGVsLnBhcmVudE5vZGUgOiBkb2N1bWVudC5ib2R5O1xuICBwYXJlbnRFbC5hcHBlbmRDaGlsZCh0ZW1wRWwpO1xuICB0ZW1wRWwuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICB0ZW1wRWwuc3R5bGUud2lkdGggPSBiYXNlbGluZSArIHVuaXQ7XG4gIHZhciBmYWN0b3IgPSBiYXNlbGluZSAvIHRlbXBFbC5vZmZzZXRXaWR0aDtcbiAgcGFyZW50RWwucmVtb3ZlQ2hpbGQodGVtcEVsKTtcbiAgdmFyIGNvbnZlcnRlZFVuaXQgPSBmYWN0b3IgKiBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgY2FjaGUuQ1NTW3ZhbHVlICsgdW5pdF0gPSBjb252ZXJ0ZWRVbml0O1xuICByZXR1cm4gY29udmVydGVkVW5pdDtcbn1cblxuZnVuY3Rpb24gZ2V0Q1NTVmFsdWUoZWwsIHByb3AsIHVuaXQpIHtcbiAgaWYgKHByb3AgaW4gZWwuc3R5bGUpIHtcbiAgICB2YXIgdXBwZXJjYXNlUHJvcE5hbWUgPSBwcm9wLnJlcGxhY2UoLyhbYS16XSkoW0EtWl0pL2csICckMS0kMicpLnRvTG93ZXJDYXNlKCk7XG4gICAgdmFyIHZhbHVlID0gZWwuc3R5bGVbcHJvcF0gfHwgZ2V0Q29tcHV0ZWRTdHlsZShlbCkuZ2V0UHJvcGVydHlWYWx1ZSh1cHBlcmNhc2VQcm9wTmFtZSkgfHwgJzAnO1xuICAgIHJldHVybiB1bml0ID8gY29udmVydFB4VG9Vbml0KGVsLCB2YWx1ZSwgdW5pdCkgOiB2YWx1ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRBbmltYXRpb25UeXBlKGVsLCBwcm9wKSB7XG4gIGlmIChpcy5kb20oZWwpICYmICFpcy5pbnAoZWwpICYmICghaXMubmlsKGdldEF0dHJpYnV0ZShlbCwgcHJvcCkpIHx8IChpcy5zdmcoZWwpICYmIGVsW3Byb3BdKSkpIHsgcmV0dXJuICdhdHRyaWJ1dGUnOyB9XG4gIGlmIChpcy5kb20oZWwpICYmIGFycmF5Q29udGFpbnModmFsaWRUcmFuc2Zvcm1zLCBwcm9wKSkgeyByZXR1cm4gJ3RyYW5zZm9ybSc7IH1cbiAgaWYgKGlzLmRvbShlbCkgJiYgKHByb3AgIT09ICd0cmFuc2Zvcm0nICYmIGdldENTU1ZhbHVlKGVsLCBwcm9wKSkpIHsgcmV0dXJuICdjc3MnOyB9XG4gIGlmIChlbFtwcm9wXSAhPSBudWxsKSB7IHJldHVybiAnb2JqZWN0JzsgfVxufVxuXG5mdW5jdGlvbiBnZXRFbGVtZW50VHJhbnNmb3JtcyhlbCkge1xuICBpZiAoIWlzLmRvbShlbCkpIHsgcmV0dXJuOyB9XG4gIHZhciBzdHIgPSBlbC5zdHlsZS50cmFuc2Zvcm0gfHwgJyc7XG4gIHZhciByZWcgID0gLyhcXHcrKVxcKChbXildKilcXCkvZztcbiAgdmFyIHRyYW5zZm9ybXMgPSBuZXcgTWFwKCk7XG4gIHZhciBtOyB3aGlsZSAobSA9IHJlZy5leGVjKHN0cikpIHsgdHJhbnNmb3Jtcy5zZXQobVsxXSwgbVsyXSk7IH1cbiAgcmV0dXJuIHRyYW5zZm9ybXM7XG59XG5cbmZ1bmN0aW9uIGdldFRyYW5zZm9ybVZhbHVlKGVsLCBwcm9wTmFtZSwgYW5pbWF0YWJsZSwgdW5pdCkge1xuICB2YXIgZGVmYXVsdFZhbCA9IHN0cmluZ0NvbnRhaW5zKHByb3BOYW1lLCAnc2NhbGUnKSA/IDEgOiAwICsgZ2V0VHJhbnNmb3JtVW5pdChwcm9wTmFtZSk7XG4gIHZhciB2YWx1ZSA9IGdldEVsZW1lbnRUcmFuc2Zvcm1zKGVsKS5nZXQocHJvcE5hbWUpIHx8IGRlZmF1bHRWYWw7XG4gIGlmIChhbmltYXRhYmxlKSB7XG4gICAgYW5pbWF0YWJsZS50cmFuc2Zvcm1zLmxpc3Quc2V0KHByb3BOYW1lLCB2YWx1ZSk7XG4gICAgYW5pbWF0YWJsZS50cmFuc2Zvcm1zWydsYXN0J10gPSBwcm9wTmFtZTtcbiAgfVxuICByZXR1cm4gdW5pdCA/IGNvbnZlcnRQeFRvVW5pdChlbCwgdmFsdWUsIHVuaXQpIDogdmFsdWU7XG59XG5cbmZ1bmN0aW9uIGdldE9yaWdpbmFsVGFyZ2V0VmFsdWUodGFyZ2V0LCBwcm9wTmFtZSwgdW5pdCwgYW5pbWF0YWJsZSkge1xuICBzd2l0Y2ggKGdldEFuaW1hdGlvblR5cGUodGFyZ2V0LCBwcm9wTmFtZSkpIHtcbiAgICBjYXNlICd0cmFuc2Zvcm0nOiByZXR1cm4gZ2V0VHJhbnNmb3JtVmFsdWUodGFyZ2V0LCBwcm9wTmFtZSwgYW5pbWF0YWJsZSwgdW5pdCk7XG4gICAgY2FzZSAnY3NzJzogcmV0dXJuIGdldENTU1ZhbHVlKHRhcmdldCwgcHJvcE5hbWUsIHVuaXQpO1xuICAgIGNhc2UgJ2F0dHJpYnV0ZSc6IHJldHVybiBnZXRBdHRyaWJ1dGUodGFyZ2V0LCBwcm9wTmFtZSk7XG4gICAgZGVmYXVsdDogcmV0dXJuIHRhcmdldFtwcm9wTmFtZV0gfHwgMDtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRSZWxhdGl2ZVZhbHVlKHRvLCBmcm9tKSB7XG4gIHZhciBvcGVyYXRvciA9IC9eKFxcKj18XFwrPXwtPSkvLmV4ZWModG8pO1xuICBpZiAoIW9wZXJhdG9yKSB7IHJldHVybiB0bzsgfVxuICB2YXIgdSA9IGdldFVuaXQodG8pIHx8IDA7XG4gIHZhciB4ID0gcGFyc2VGbG9hdChmcm9tKTtcbiAgdmFyIHkgPSBwYXJzZUZsb2F0KHRvLnJlcGxhY2Uob3BlcmF0b3JbMF0sICcnKSk7XG4gIHN3aXRjaCAob3BlcmF0b3JbMF1bMF0pIHtcbiAgICBjYXNlICcrJzogcmV0dXJuIHggKyB5ICsgdTtcbiAgICBjYXNlICctJzogcmV0dXJuIHggLSB5ICsgdTtcbiAgICBjYXNlICcqJzogcmV0dXJuIHggKiB5ICsgdTtcbiAgfVxufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZVZhbHVlKHZhbCwgdW5pdCkge1xuICBpZiAoaXMuY29sKHZhbCkpIHsgcmV0dXJuIGNvbG9yVG9SZ2IodmFsKTsgfVxuICBpZiAoL1xccy9nLnRlc3QodmFsKSkgeyByZXR1cm4gdmFsOyB9XG4gIHZhciBvcmlnaW5hbFVuaXQgPSBnZXRVbml0KHZhbCk7XG4gIHZhciB1bml0TGVzcyA9IG9yaWdpbmFsVW5pdCA/IHZhbC5zdWJzdHIoMCwgdmFsLmxlbmd0aCAtIG9yaWdpbmFsVW5pdC5sZW5ndGgpIDogdmFsO1xuICBpZiAodW5pdCkgeyByZXR1cm4gdW5pdExlc3MgKyB1bml0OyB9XG4gIHJldHVybiB1bml0TGVzcztcbn1cblxuLy8gZ2V0VG90YWxMZW5ndGgoKSBlcXVpdmFsZW50IGZvciBjaXJjbGUsIHJlY3QsIHBvbHlsaW5lLCBwb2x5Z29uIGFuZCBsaW5lIHNoYXBlc1xuLy8gYWRhcHRlZCBmcm9tIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL1NlYkxhbWJsYS8zZTA1NTBjNDk2YzIzNjcwOTc0NFxuXG5mdW5jdGlvbiBnZXREaXN0YW5jZShwMSwgcDIpIHtcbiAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhwMi54IC0gcDEueCwgMikgKyBNYXRoLnBvdyhwMi55IC0gcDEueSwgMikpO1xufVxuXG5mdW5jdGlvbiBnZXRDaXJjbGVMZW5ndGgoZWwpIHtcbiAgcmV0dXJuIE1hdGguUEkgKiAyICogZ2V0QXR0cmlidXRlKGVsLCAncicpO1xufVxuXG5mdW5jdGlvbiBnZXRSZWN0TGVuZ3RoKGVsKSB7XG4gIHJldHVybiAoZ2V0QXR0cmlidXRlKGVsLCAnd2lkdGgnKSAqIDIpICsgKGdldEF0dHJpYnV0ZShlbCwgJ2hlaWdodCcpICogMik7XG59XG5cbmZ1bmN0aW9uIGdldExpbmVMZW5ndGgoZWwpIHtcbiAgcmV0dXJuIGdldERpc3RhbmNlKFxuICAgIHt4OiBnZXRBdHRyaWJ1dGUoZWwsICd4MScpLCB5OiBnZXRBdHRyaWJ1dGUoZWwsICd5MScpfSwgXG4gICAge3g6IGdldEF0dHJpYnV0ZShlbCwgJ3gyJyksIHk6IGdldEF0dHJpYnV0ZShlbCwgJ3kyJyl9XG4gICk7XG59XG5cbmZ1bmN0aW9uIGdldFBvbHlsaW5lTGVuZ3RoKGVsKSB7XG4gIHZhciBwb2ludHMgPSBlbC5wb2ludHM7XG4gIHZhciB0b3RhbExlbmd0aCA9IDA7XG4gIHZhciBwcmV2aW91c1BvcztcbiAgZm9yICh2YXIgaSA9IDAgOyBpIDwgcG9pbnRzLm51bWJlck9mSXRlbXM7IGkrKykge1xuICAgIHZhciBjdXJyZW50UG9zID0gcG9pbnRzLmdldEl0ZW0oaSk7XG4gICAgaWYgKGkgPiAwKSB7IHRvdGFsTGVuZ3RoICs9IGdldERpc3RhbmNlKHByZXZpb3VzUG9zLCBjdXJyZW50UG9zKTsgfVxuICAgIHByZXZpb3VzUG9zID0gY3VycmVudFBvcztcbiAgfVxuICByZXR1cm4gdG90YWxMZW5ndGg7XG59XG5cbmZ1bmN0aW9uIGdldFBvbHlnb25MZW5ndGgoZWwpIHtcbiAgdmFyIHBvaW50cyA9IGVsLnBvaW50cztcbiAgcmV0dXJuIGdldFBvbHlsaW5lTGVuZ3RoKGVsKSArIGdldERpc3RhbmNlKHBvaW50cy5nZXRJdGVtKHBvaW50cy5udW1iZXJPZkl0ZW1zIC0gMSksIHBvaW50cy5nZXRJdGVtKDApKTtcbn1cblxuLy8gUGF0aCBhbmltYXRpb25cblxuZnVuY3Rpb24gZ2V0VG90YWxMZW5ndGgoZWwpIHtcbiAgaWYgKGVsLmdldFRvdGFsTGVuZ3RoKSB7IHJldHVybiBlbC5nZXRUb3RhbExlbmd0aCgpOyB9XG4gIHN3aXRjaChlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICBjYXNlICdjaXJjbGUnOiByZXR1cm4gZ2V0Q2lyY2xlTGVuZ3RoKGVsKTtcbiAgICBjYXNlICdyZWN0JzogcmV0dXJuIGdldFJlY3RMZW5ndGgoZWwpO1xuICAgIGNhc2UgJ2xpbmUnOiByZXR1cm4gZ2V0TGluZUxlbmd0aChlbCk7XG4gICAgY2FzZSAncG9seWxpbmUnOiByZXR1cm4gZ2V0UG9seWxpbmVMZW5ndGgoZWwpO1xuICAgIGNhc2UgJ3BvbHlnb24nOiByZXR1cm4gZ2V0UG9seWdvbkxlbmd0aChlbCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2V0RGFzaG9mZnNldChlbCkge1xuICB2YXIgcGF0aExlbmd0aCA9IGdldFRvdGFsTGVuZ3RoKGVsKTtcbiAgZWwuc2V0QXR0cmlidXRlKCdzdHJva2UtZGFzaGFycmF5JywgcGF0aExlbmd0aCk7XG4gIHJldHVybiBwYXRoTGVuZ3RoO1xufVxuXG4vLyBNb3Rpb24gcGF0aFxuXG5mdW5jdGlvbiBnZXRQYXJlbnRTdmdFbChlbCkge1xuICB2YXIgcGFyZW50RWwgPSBlbC5wYXJlbnROb2RlO1xuICB3aGlsZSAoaXMuc3ZnKHBhcmVudEVsKSkge1xuICAgIGlmICghaXMuc3ZnKHBhcmVudEVsLnBhcmVudE5vZGUpKSB7IGJyZWFrOyB9XG4gICAgcGFyZW50RWwgPSBwYXJlbnRFbC5wYXJlbnROb2RlO1xuICB9XG4gIHJldHVybiBwYXJlbnRFbDtcbn1cblxuZnVuY3Rpb24gZ2V0UGFyZW50U3ZnKHBhdGhFbCwgc3ZnRGF0YSkge1xuICB2YXIgc3ZnID0gc3ZnRGF0YSB8fCB7fTtcbiAgdmFyIHBhcmVudFN2Z0VsID0gc3ZnLmVsIHx8IGdldFBhcmVudFN2Z0VsKHBhdGhFbCk7XG4gIHZhciByZWN0ID0gcGFyZW50U3ZnRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIHZhciB2aWV3Qm94QXR0ciA9IGdldEF0dHJpYnV0ZShwYXJlbnRTdmdFbCwgJ3ZpZXdCb3gnKTtcbiAgdmFyIHdpZHRoID0gcmVjdC53aWR0aDtcbiAgdmFyIGhlaWdodCA9IHJlY3QuaGVpZ2h0O1xuICB2YXIgdmlld0JveCA9IHN2Zy52aWV3Qm94IHx8ICh2aWV3Qm94QXR0ciA/IHZpZXdCb3hBdHRyLnNwbGl0KCcgJykgOiBbMCwgMCwgd2lkdGgsIGhlaWdodF0pO1xuICByZXR1cm4ge1xuICAgIGVsOiBwYXJlbnRTdmdFbCxcbiAgICB2aWV3Qm94OiB2aWV3Qm94LFxuICAgIHg6IHZpZXdCb3hbMF0gLyAxLFxuICAgIHk6IHZpZXdCb3hbMV0gLyAxLFxuICAgIHc6IHdpZHRoLFxuICAgIGg6IGhlaWdodCxcbiAgICB2Vzogdmlld0JveFsyXSxcbiAgICB2SDogdmlld0JveFszXVxuICB9XG59XG5cbmZ1bmN0aW9uIGdldFBhdGgocGF0aCwgcGVyY2VudCkge1xuICB2YXIgcGF0aEVsID0gaXMuc3RyKHBhdGgpID8gc2VsZWN0U3RyaW5nKHBhdGgpWzBdIDogcGF0aDtcbiAgdmFyIHAgPSBwZXJjZW50IHx8IDEwMDtcbiAgcmV0dXJuIGZ1bmN0aW9uKHByb3BlcnR5KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByb3BlcnR5OiBwcm9wZXJ0eSxcbiAgICAgIGVsOiBwYXRoRWwsXG4gICAgICBzdmc6IGdldFBhcmVudFN2ZyhwYXRoRWwpLFxuICAgICAgdG90YWxMZW5ndGg6IGdldFRvdGFsTGVuZ3RoKHBhdGhFbCkgKiAocCAvIDEwMClcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0UGF0aFByb2dyZXNzKHBhdGgsIHByb2dyZXNzLCBpc1BhdGhUYXJnZXRJbnNpZGVTVkcpIHtcbiAgZnVuY3Rpb24gcG9pbnQob2Zmc2V0KSB7XG4gICAgaWYgKCBvZmZzZXQgPT09IHZvaWQgMCApIG9mZnNldCA9IDA7XG5cbiAgICB2YXIgbCA9IHByb2dyZXNzICsgb2Zmc2V0ID49IDEgPyBwcm9ncmVzcyArIG9mZnNldCA6IDA7XG4gICAgcmV0dXJuIHBhdGguZWwuZ2V0UG9pbnRBdExlbmd0aChsKTtcbiAgfVxuICB2YXIgc3ZnID0gZ2V0UGFyZW50U3ZnKHBhdGguZWwsIHBhdGguc3ZnKTtcbiAgdmFyIHAgPSBwb2ludCgpO1xuICB2YXIgcDAgPSBwb2ludCgtMSk7XG4gIHZhciBwMSA9IHBvaW50KCsxKTtcbiAgdmFyIHNjYWxlWCA9IGlzUGF0aFRhcmdldEluc2lkZVNWRyA/IDEgOiBzdmcudyAvIHN2Zy52VztcbiAgdmFyIHNjYWxlWSA9IGlzUGF0aFRhcmdldEluc2lkZVNWRyA/IDEgOiBzdmcuaCAvIHN2Zy52SDtcbiAgc3dpdGNoIChwYXRoLnByb3BlcnR5KSB7XG4gICAgY2FzZSAneCc6IHJldHVybiAocC54IC0gc3ZnLngpICogc2NhbGVYO1xuICAgIGNhc2UgJ3knOiByZXR1cm4gKHAueSAtIHN2Zy55KSAqIHNjYWxlWTtcbiAgICBjYXNlICdhbmdsZSc6IHJldHVybiBNYXRoLmF0YW4yKHAxLnkgLSBwMC55LCBwMS54IC0gcDAueCkgKiAxODAgLyBNYXRoLlBJO1xuICB9XG59XG5cbi8vIERlY29tcG9zZSB2YWx1ZVxuXG5mdW5jdGlvbiBkZWNvbXBvc2VWYWx1ZSh2YWwsIHVuaXQpIHtcbiAgLy8gY29uc3Qgcmd4ID0gLy0/XFxkKlxcLj9cXGQrL2c7IC8vIGhhbmRsZXMgYmFzaWMgbnVtYmVyc1xuICAvLyBjb25zdCByZ3ggPSAvWystXT9cXGQrKD86XFwuXFxkKyk/KD86W2VFXVsrLV0/XFxkKyk/L2c7IC8vIGhhbmRsZXMgZXhwb25lbnRzIG5vdGF0aW9uXG4gIHZhciByZ3ggPSAvWystXT9cXGQqXFwuP1xcZCsoPzpcXC5cXGQrKT8oPzpbZUVdWystXT9cXGQrKT8vZzsgLy8gaGFuZGxlcyBleHBvbmVudHMgbm90YXRpb25cbiAgdmFyIHZhbHVlID0gdmFsaWRhdGVWYWx1ZSgoaXMucHRoKHZhbCkgPyB2YWwudG90YWxMZW5ndGggOiB2YWwpLCB1bml0KSArICcnO1xuICByZXR1cm4ge1xuICAgIG9yaWdpbmFsOiB2YWx1ZSxcbiAgICBudW1iZXJzOiB2YWx1ZS5tYXRjaChyZ3gpID8gdmFsdWUubWF0Y2gocmd4KS5tYXAoTnVtYmVyKSA6IFswXSxcbiAgICBzdHJpbmdzOiAoaXMuc3RyKHZhbCkgfHwgdW5pdCkgPyB2YWx1ZS5zcGxpdChyZ3gpIDogW11cbiAgfVxufVxuXG4vLyBBbmltYXRhYmxlc1xuXG5mdW5jdGlvbiBwYXJzZVRhcmdldHModGFyZ2V0cykge1xuICB2YXIgdGFyZ2V0c0FycmF5ID0gdGFyZ2V0cyA/IChmbGF0dGVuQXJyYXkoaXMuYXJyKHRhcmdldHMpID8gdGFyZ2V0cy5tYXAodG9BcnJheSkgOiB0b0FycmF5KHRhcmdldHMpKSkgOiBbXTtcbiAgcmV0dXJuIGZpbHRlckFycmF5KHRhcmdldHNBcnJheSwgZnVuY3Rpb24gKGl0ZW0sIHBvcywgc2VsZikgeyByZXR1cm4gc2VsZi5pbmRleE9mKGl0ZW0pID09PSBwb3M7IH0pO1xufVxuXG5mdW5jdGlvbiBnZXRBbmltYXRhYmxlcyh0YXJnZXRzKSB7XG4gIHZhciBwYXJzZWQgPSBwYXJzZVRhcmdldHModGFyZ2V0cyk7XG4gIHJldHVybiBwYXJzZWQubWFwKGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgcmV0dXJuIHt0YXJnZXQ6IHQsIGlkOiBpLCB0b3RhbDogcGFyc2VkLmxlbmd0aCwgdHJhbnNmb3JtczogeyBsaXN0OiBnZXRFbGVtZW50VHJhbnNmb3Jtcyh0KSB9IH07XG4gIH0pO1xufVxuXG4vLyBQcm9wZXJ0aWVzXG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVByb3BlcnR5VHdlZW5zKHByb3AsIHR3ZWVuU2V0dGluZ3MpIHtcbiAgdmFyIHNldHRpbmdzID0gY2xvbmVPYmplY3QodHdlZW5TZXR0aW5ncyk7XG4gIC8vIE92ZXJyaWRlIGR1cmF0aW9uIGlmIGVhc2luZyBpcyBhIHNwcmluZ1xuICBpZiAoL15zcHJpbmcvLnRlc3Qoc2V0dGluZ3MuZWFzaW5nKSkgeyBzZXR0aW5ncy5kdXJhdGlvbiA9IHNwcmluZyhzZXR0aW5ncy5lYXNpbmcpOyB9XG4gIGlmIChpcy5hcnIocHJvcCkpIHtcbiAgICB2YXIgbCA9IHByb3AubGVuZ3RoO1xuICAgIHZhciBpc0Zyb21UbyA9IChsID09PSAyICYmICFpcy5vYmoocHJvcFswXSkpO1xuICAgIGlmICghaXNGcm9tVG8pIHtcbiAgICAgIC8vIER1cmF0aW9uIGRpdmlkZWQgYnkgdGhlIG51bWJlciBvZiB0d2VlbnNcbiAgICAgIGlmICghaXMuZm5jKHR3ZWVuU2V0dGluZ3MuZHVyYXRpb24pKSB7IHNldHRpbmdzLmR1cmF0aW9uID0gdHdlZW5TZXR0aW5ncy5kdXJhdGlvbiAvIGw7IH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVHJhbnNmb3JtIFtmcm9tLCB0b10gdmFsdWVzIHNob3J0aGFuZCB0byBhIHZhbGlkIHR3ZWVuIHZhbHVlXG4gICAgICBwcm9wID0ge3ZhbHVlOiBwcm9wfTtcbiAgICB9XG4gIH1cbiAgdmFyIHByb3BBcnJheSA9IGlzLmFycihwcm9wKSA/IHByb3AgOiBbcHJvcF07XG4gIHJldHVybiBwcm9wQXJyYXkubWFwKGZ1bmN0aW9uICh2LCBpKSB7XG4gICAgdmFyIG9iaiA9IChpcy5vYmoodikgJiYgIWlzLnB0aCh2KSkgPyB2IDoge3ZhbHVlOiB2fTtcbiAgICAvLyBEZWZhdWx0IGRlbGF5IHZhbHVlIHNob3VsZCBvbmx5IGJlIGFwcGxpZWQgdG8gdGhlIGZpcnN0IHR3ZWVuXG4gICAgaWYgKGlzLnVuZChvYmouZGVsYXkpKSB7IG9iai5kZWxheSA9ICFpID8gdHdlZW5TZXR0aW5ncy5kZWxheSA6IDA7IH1cbiAgICAvLyBEZWZhdWx0IGVuZERlbGF5IHZhbHVlIHNob3VsZCBvbmx5IGJlIGFwcGxpZWQgdG8gdGhlIGxhc3QgdHdlZW5cbiAgICBpZiAoaXMudW5kKG9iai5lbmREZWxheSkpIHsgb2JqLmVuZERlbGF5ID0gaSA9PT0gcHJvcEFycmF5Lmxlbmd0aCAtIDEgPyB0d2VlblNldHRpbmdzLmVuZERlbGF5IDogMDsgfVxuICAgIHJldHVybiBvYmo7XG4gIH0pLm1hcChmdW5jdGlvbiAoaykgeyByZXR1cm4gbWVyZ2VPYmplY3RzKGssIHNldHRpbmdzKTsgfSk7XG59XG5cblxuZnVuY3Rpb24gZmxhdHRlbktleWZyYW1lcyhrZXlmcmFtZXMpIHtcbiAgdmFyIHByb3BlcnR5TmFtZXMgPSBmaWx0ZXJBcnJheShmbGF0dGVuQXJyYXkoa2V5ZnJhbWVzLm1hcChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBPYmplY3Qua2V5cyhrZXkpOyB9KSksIGZ1bmN0aW9uIChwKSB7IHJldHVybiBpcy5rZXkocCk7IH0pXG4gIC5yZWR1Y2UoZnVuY3Rpb24gKGEsYikgeyBpZiAoYS5pbmRleE9mKGIpIDwgMCkgeyBhLnB1c2goYik7IH0gcmV0dXJuIGE7IH0sIFtdKTtcbiAgdmFyIHByb3BlcnRpZXMgPSB7fTtcbiAgdmFyIGxvb3AgPSBmdW5jdGlvbiAoIGkgKSB7XG4gICAgdmFyIHByb3BOYW1lID0gcHJvcGVydHlOYW1lc1tpXTtcbiAgICBwcm9wZXJ0aWVzW3Byb3BOYW1lXSA9IGtleWZyYW1lcy5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgdmFyIG5ld0tleSA9IHt9O1xuICAgICAgZm9yICh2YXIgcCBpbiBrZXkpIHtcbiAgICAgICAgaWYgKGlzLmtleShwKSkge1xuICAgICAgICAgIGlmIChwID09IHByb3BOYW1lKSB7IG5ld0tleS52YWx1ZSA9IGtleVtwXTsgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ld0tleVtwXSA9IGtleVtwXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG5ld0tleTtcbiAgICB9KTtcbiAgfTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BlcnR5TmFtZXMubGVuZ3RoOyBpKyspIGxvb3AoIGkgKTtcbiAgcmV0dXJuIHByb3BlcnRpZXM7XG59XG5cbmZ1bmN0aW9uIGdldFByb3BlcnRpZXModHdlZW5TZXR0aW5ncywgcGFyYW1zKSB7XG4gIHZhciBwcm9wZXJ0aWVzID0gW107XG4gIHZhciBrZXlmcmFtZXMgPSBwYXJhbXMua2V5ZnJhbWVzO1xuICBpZiAoa2V5ZnJhbWVzKSB7IHBhcmFtcyA9IG1lcmdlT2JqZWN0cyhmbGF0dGVuS2V5ZnJhbWVzKGtleWZyYW1lcyksIHBhcmFtcyk7IH1cbiAgZm9yICh2YXIgcCBpbiBwYXJhbXMpIHtcbiAgICBpZiAoaXMua2V5KHApKSB7XG4gICAgICBwcm9wZXJ0aWVzLnB1c2goe1xuICAgICAgICBuYW1lOiBwLFxuICAgICAgICB0d2VlbnM6IG5vcm1hbGl6ZVByb3BlcnR5VHdlZW5zKHBhcmFtc1twXSwgdHdlZW5TZXR0aW5ncylcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcHJvcGVydGllcztcbn1cblxuLy8gVHdlZW5zXG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVR3ZWVuVmFsdWVzKHR3ZWVuLCBhbmltYXRhYmxlKSB7XG4gIHZhciB0ID0ge307XG4gIGZvciAodmFyIHAgaW4gdHdlZW4pIHtcbiAgICB2YXIgdmFsdWUgPSBnZXRGdW5jdGlvblZhbHVlKHR3ZWVuW3BdLCBhbmltYXRhYmxlKTtcbiAgICBpZiAoaXMuYXJyKHZhbHVlKSkge1xuICAgICAgdmFsdWUgPSB2YWx1ZS5tYXAoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIGdldEZ1bmN0aW9uVmFsdWUodiwgYW5pbWF0YWJsZSk7IH0pO1xuICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMSkgeyB2YWx1ZSA9IHZhbHVlWzBdOyB9XG4gICAgfVxuICAgIHRbcF0gPSB2YWx1ZTtcbiAgfVxuICB0LmR1cmF0aW9uID0gcGFyc2VGbG9hdCh0LmR1cmF0aW9uKTtcbiAgdC5kZWxheSA9IHBhcnNlRmxvYXQodC5kZWxheSk7XG4gIHJldHVybiB0O1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVUd2VlbnMocHJvcCwgYW5pbWF0YWJsZSkge1xuICB2YXIgcHJldmlvdXNUd2VlbjtcbiAgcmV0dXJuIHByb3AudHdlZW5zLm1hcChmdW5jdGlvbiAodCkge1xuICAgIHZhciB0d2VlbiA9IG5vcm1hbGl6ZVR3ZWVuVmFsdWVzKHQsIGFuaW1hdGFibGUpO1xuICAgIHZhciB0d2VlblZhbHVlID0gdHdlZW4udmFsdWU7XG4gICAgdmFyIHRvID0gaXMuYXJyKHR3ZWVuVmFsdWUpID8gdHdlZW5WYWx1ZVsxXSA6IHR3ZWVuVmFsdWU7XG4gICAgdmFyIHRvVW5pdCA9IGdldFVuaXQodG8pO1xuICAgIHZhciBvcmlnaW5hbFZhbHVlID0gZ2V0T3JpZ2luYWxUYXJnZXRWYWx1ZShhbmltYXRhYmxlLnRhcmdldCwgcHJvcC5uYW1lLCB0b1VuaXQsIGFuaW1hdGFibGUpO1xuICAgIHZhciBwcmV2aW91c1ZhbHVlID0gcHJldmlvdXNUd2VlbiA/IHByZXZpb3VzVHdlZW4udG8ub3JpZ2luYWwgOiBvcmlnaW5hbFZhbHVlO1xuICAgIHZhciBmcm9tID0gaXMuYXJyKHR3ZWVuVmFsdWUpID8gdHdlZW5WYWx1ZVswXSA6IHByZXZpb3VzVmFsdWU7XG4gICAgdmFyIGZyb21Vbml0ID0gZ2V0VW5pdChmcm9tKSB8fCBnZXRVbml0KG9yaWdpbmFsVmFsdWUpO1xuICAgIHZhciB1bml0ID0gdG9Vbml0IHx8IGZyb21Vbml0O1xuICAgIGlmIChpcy51bmQodG8pKSB7IHRvID0gcHJldmlvdXNWYWx1ZTsgfVxuICAgIHR3ZWVuLmZyb20gPSBkZWNvbXBvc2VWYWx1ZShmcm9tLCB1bml0KTtcbiAgICB0d2Vlbi50byA9IGRlY29tcG9zZVZhbHVlKGdldFJlbGF0aXZlVmFsdWUodG8sIGZyb20pLCB1bml0KTtcbiAgICB0d2Vlbi5zdGFydCA9IHByZXZpb3VzVHdlZW4gPyBwcmV2aW91c1R3ZWVuLmVuZCA6IDA7XG4gICAgdHdlZW4uZW5kID0gdHdlZW4uc3RhcnQgKyB0d2Vlbi5kZWxheSArIHR3ZWVuLmR1cmF0aW9uICsgdHdlZW4uZW5kRGVsYXk7XG4gICAgdHdlZW4uZWFzaW5nID0gcGFyc2VFYXNpbmdzKHR3ZWVuLmVhc2luZywgdHdlZW4uZHVyYXRpb24pO1xuICAgIHR3ZWVuLmlzUGF0aCA9IGlzLnB0aCh0d2VlblZhbHVlKTtcbiAgICB0d2Vlbi5pc1BhdGhUYXJnZXRJbnNpZGVTVkcgPSB0d2Vlbi5pc1BhdGggJiYgaXMuc3ZnKGFuaW1hdGFibGUudGFyZ2V0KTtcbiAgICB0d2Vlbi5pc0NvbG9yID0gaXMuY29sKHR3ZWVuLmZyb20ub3JpZ2luYWwpO1xuICAgIGlmICh0d2Vlbi5pc0NvbG9yKSB7IHR3ZWVuLnJvdW5kID0gMTsgfVxuICAgIHByZXZpb3VzVHdlZW4gPSB0d2VlbjtcbiAgICByZXR1cm4gdHdlZW47XG4gIH0pO1xufVxuXG4vLyBUd2VlbiBwcm9ncmVzc1xuXG52YXIgc2V0UHJvZ3Jlc3NWYWx1ZSA9IHtcbiAgY3NzOiBmdW5jdGlvbiAodCwgcCwgdikgeyByZXR1cm4gdC5zdHlsZVtwXSA9IHY7IH0sXG4gIGF0dHJpYnV0ZTogZnVuY3Rpb24gKHQsIHAsIHYpIHsgcmV0dXJuIHQuc2V0QXR0cmlidXRlKHAsIHYpOyB9LFxuICBvYmplY3Q6IGZ1bmN0aW9uICh0LCBwLCB2KSB7IHJldHVybiB0W3BdID0gdjsgfSxcbiAgdHJhbnNmb3JtOiBmdW5jdGlvbiAodCwgcCwgdiwgdHJhbnNmb3JtcywgbWFudWFsKSB7XG4gICAgdHJhbnNmb3Jtcy5saXN0LnNldChwLCB2KTtcbiAgICBpZiAocCA9PT0gdHJhbnNmb3Jtcy5sYXN0IHx8IG1hbnVhbCkge1xuICAgICAgdmFyIHN0ciA9ICcnO1xuICAgICAgdHJhbnNmb3Jtcy5saXN0LmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBwcm9wKSB7IHN0ciArPSBwcm9wICsgXCIoXCIgKyB2YWx1ZSArIFwiKSBcIjsgfSk7XG4gICAgICB0LnN0eWxlLnRyYW5zZm9ybSA9IHN0cjtcbiAgICB9XG4gIH1cbn07XG5cbi8vIFNldCBWYWx1ZSBoZWxwZXJcblxuZnVuY3Rpb24gc2V0VGFyZ2V0c1ZhbHVlKHRhcmdldHMsIHByb3BlcnRpZXMpIHtcbiAgdmFyIGFuaW1hdGFibGVzID0gZ2V0QW5pbWF0YWJsZXModGFyZ2V0cyk7XG4gIGFuaW1hdGFibGVzLmZvckVhY2goZnVuY3Rpb24gKGFuaW1hdGFibGUpIHtcbiAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICB2YXIgdmFsdWUgPSBnZXRGdW5jdGlvblZhbHVlKHByb3BlcnRpZXNbcHJvcGVydHldLCBhbmltYXRhYmxlKTtcbiAgICAgIHZhciB0YXJnZXQgPSBhbmltYXRhYmxlLnRhcmdldDtcbiAgICAgIHZhciB2YWx1ZVVuaXQgPSBnZXRVbml0KHZhbHVlKTtcbiAgICAgIHZhciBvcmlnaW5hbFZhbHVlID0gZ2V0T3JpZ2luYWxUYXJnZXRWYWx1ZSh0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZVVuaXQsIGFuaW1hdGFibGUpO1xuICAgICAgdmFyIHVuaXQgPSB2YWx1ZVVuaXQgfHwgZ2V0VW5pdChvcmlnaW5hbFZhbHVlKTtcbiAgICAgIHZhciB0byA9IGdldFJlbGF0aXZlVmFsdWUodmFsaWRhdGVWYWx1ZSh2YWx1ZSwgdW5pdCksIG9yaWdpbmFsVmFsdWUpO1xuICAgICAgdmFyIGFuaW1UeXBlID0gZ2V0QW5pbWF0aW9uVHlwZSh0YXJnZXQsIHByb3BlcnR5KTtcbiAgICAgIHNldFByb2dyZXNzVmFsdWVbYW5pbVR5cGVdKHRhcmdldCwgcHJvcGVydHksIHRvLCBhbmltYXRhYmxlLnRyYW5zZm9ybXMsIHRydWUpO1xuICAgIH1cbiAgfSk7XG59XG5cbi8vIEFuaW1hdGlvbnNcblxuZnVuY3Rpb24gY3JlYXRlQW5pbWF0aW9uKGFuaW1hdGFibGUsIHByb3ApIHtcbiAgdmFyIGFuaW1UeXBlID0gZ2V0QW5pbWF0aW9uVHlwZShhbmltYXRhYmxlLnRhcmdldCwgcHJvcC5uYW1lKTtcbiAgaWYgKGFuaW1UeXBlKSB7XG4gICAgdmFyIHR3ZWVucyA9IG5vcm1hbGl6ZVR3ZWVucyhwcm9wLCBhbmltYXRhYmxlKTtcbiAgICB2YXIgbGFzdFR3ZWVuID0gdHdlZW5zW3R3ZWVucy5sZW5ndGggLSAxXTtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogYW5pbVR5cGUsXG4gICAgICBwcm9wZXJ0eTogcHJvcC5uYW1lLFxuICAgICAgYW5pbWF0YWJsZTogYW5pbWF0YWJsZSxcbiAgICAgIHR3ZWVuczogdHdlZW5zLFxuICAgICAgZHVyYXRpb246IGxhc3RUd2Vlbi5lbmQsXG4gICAgICBkZWxheTogdHdlZW5zWzBdLmRlbGF5LFxuICAgICAgZW5kRGVsYXk6IGxhc3RUd2Vlbi5lbmREZWxheVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRBbmltYXRpb25zKGFuaW1hdGFibGVzLCBwcm9wZXJ0aWVzKSB7XG4gIHJldHVybiBmaWx0ZXJBcnJheShmbGF0dGVuQXJyYXkoYW5pbWF0YWJsZXMubWFwKGZ1bmN0aW9uIChhbmltYXRhYmxlKSB7XG4gICAgcmV0dXJuIHByb3BlcnRpZXMubWFwKGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICByZXR1cm4gY3JlYXRlQW5pbWF0aW9uKGFuaW1hdGFibGUsIHByb3ApO1xuICAgIH0pO1xuICB9KSksIGZ1bmN0aW9uIChhKSB7IHJldHVybiAhaXMudW5kKGEpOyB9KTtcbn1cblxuLy8gQ3JlYXRlIEluc3RhbmNlXG5cbmZ1bmN0aW9uIGdldEluc3RhbmNlVGltaW5ncyhhbmltYXRpb25zLCB0d2VlblNldHRpbmdzKSB7XG4gIHZhciBhbmltTGVuZ3RoID0gYW5pbWF0aW9ucy5sZW5ndGg7XG4gIHZhciBnZXRUbE9mZnNldCA9IGZ1bmN0aW9uIChhbmltKSB7IHJldHVybiBhbmltLnRpbWVsaW5lT2Zmc2V0ID8gYW5pbS50aW1lbGluZU9mZnNldCA6IDA7IH07XG4gIHZhciB0aW1pbmdzID0ge307XG4gIHRpbWluZ3MuZHVyYXRpb24gPSBhbmltTGVuZ3RoID8gTWF0aC5tYXguYXBwbHkoTWF0aCwgYW5pbWF0aW9ucy5tYXAoZnVuY3Rpb24gKGFuaW0pIHsgcmV0dXJuIGdldFRsT2Zmc2V0KGFuaW0pICsgYW5pbS5kdXJhdGlvbjsgfSkpIDogdHdlZW5TZXR0aW5ncy5kdXJhdGlvbjtcbiAgdGltaW5ncy5kZWxheSA9IGFuaW1MZW5ndGggPyBNYXRoLm1pbi5hcHBseShNYXRoLCBhbmltYXRpb25zLm1hcChmdW5jdGlvbiAoYW5pbSkgeyByZXR1cm4gZ2V0VGxPZmZzZXQoYW5pbSkgKyBhbmltLmRlbGF5OyB9KSkgOiB0d2VlblNldHRpbmdzLmRlbGF5O1xuICB0aW1pbmdzLmVuZERlbGF5ID0gYW5pbUxlbmd0aCA/IHRpbWluZ3MuZHVyYXRpb24gLSBNYXRoLm1heC5hcHBseShNYXRoLCBhbmltYXRpb25zLm1hcChmdW5jdGlvbiAoYW5pbSkgeyByZXR1cm4gZ2V0VGxPZmZzZXQoYW5pbSkgKyBhbmltLmR1cmF0aW9uIC0gYW5pbS5lbmREZWxheTsgfSkpIDogdHdlZW5TZXR0aW5ncy5lbmREZWxheTtcbiAgcmV0dXJuIHRpbWluZ3M7XG59XG5cbnZhciBpbnN0YW5jZUlEID0gMDtcblxuZnVuY3Rpb24gY3JlYXRlTmV3SW5zdGFuY2UocGFyYW1zKSB7XG4gIHZhciBpbnN0YW5jZVNldHRpbmdzID0gcmVwbGFjZU9iamVjdFByb3BzKGRlZmF1bHRJbnN0YW5jZVNldHRpbmdzLCBwYXJhbXMpO1xuICB2YXIgdHdlZW5TZXR0aW5ncyA9IHJlcGxhY2VPYmplY3RQcm9wcyhkZWZhdWx0VHdlZW5TZXR0aW5ncywgcGFyYW1zKTtcbiAgdmFyIHByb3BlcnRpZXMgPSBnZXRQcm9wZXJ0aWVzKHR3ZWVuU2V0dGluZ3MsIHBhcmFtcyk7XG4gIHZhciBhbmltYXRhYmxlcyA9IGdldEFuaW1hdGFibGVzKHBhcmFtcy50YXJnZXRzKTtcbiAgdmFyIGFuaW1hdGlvbnMgPSBnZXRBbmltYXRpb25zKGFuaW1hdGFibGVzLCBwcm9wZXJ0aWVzKTtcbiAgdmFyIHRpbWluZ3MgPSBnZXRJbnN0YW5jZVRpbWluZ3MoYW5pbWF0aW9ucywgdHdlZW5TZXR0aW5ncyk7XG4gIHZhciBpZCA9IGluc3RhbmNlSUQ7XG4gIGluc3RhbmNlSUQrKztcbiAgcmV0dXJuIG1lcmdlT2JqZWN0cyhpbnN0YW5jZVNldHRpbmdzLCB7XG4gICAgaWQ6IGlkLFxuICAgIGNoaWxkcmVuOiBbXSxcbiAgICBhbmltYXRhYmxlczogYW5pbWF0YWJsZXMsXG4gICAgYW5pbWF0aW9uczogYW5pbWF0aW9ucyxcbiAgICBkdXJhdGlvbjogdGltaW5ncy5kdXJhdGlvbixcbiAgICBkZWxheTogdGltaW5ncy5kZWxheSxcbiAgICBlbmREZWxheTogdGltaW5ncy5lbmREZWxheVxuICB9KTtcbn1cblxuLy8gQ29yZVxuXG52YXIgYWN0aXZlSW5zdGFuY2VzID0gW107XG5cbnZhciBlbmdpbmUgPSAoZnVuY3Rpb24gKCkge1xuICB2YXIgcmFmO1xuXG4gIGZ1bmN0aW9uIHBsYXkoKSB7XG4gICAgaWYgKCFyYWYgJiYgKCFpc0RvY3VtZW50SGlkZGVuKCkgfHwgIWFuaW1lLnN1c3BlbmRXaGVuRG9jdW1lbnRIaWRkZW4pICYmIGFjdGl2ZUluc3RhbmNlcy5sZW5ndGggPiAwKSB7XG4gICAgICByYWYgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIHN0ZXAodCkge1xuICAgIC8vIG1lbW8gb24gYWxnb3JpdGhtIGlzc3VlOlxuICAgIC8vIGRhbmdlcm91cyBpdGVyYXRpb24gb3ZlciBtdXRhYmxlIGBhY3RpdmVJbnN0YW5jZXNgXG4gICAgLy8gKHRoYXQgY29sbGVjdGlvbiBtYXkgYmUgdXBkYXRlZCBmcm9tIHdpdGhpbiBjYWxsYmFja3Mgb2YgYHRpY2tgLWVkIGFuaW1hdGlvbiBpbnN0YW5jZXMpXG4gICAgdmFyIGFjdGl2ZUluc3RhbmNlc0xlbmd0aCA9IGFjdGl2ZUluc3RhbmNlcy5sZW5ndGg7XG4gICAgdmFyIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgYWN0aXZlSW5zdGFuY2VzTGVuZ3RoKSB7XG4gICAgICB2YXIgYWN0aXZlSW5zdGFuY2UgPSBhY3RpdmVJbnN0YW5jZXNbaV07XG4gICAgICBpZiAoIWFjdGl2ZUluc3RhbmNlLnBhdXNlZCkge1xuICAgICAgICBhY3RpdmVJbnN0YW5jZS50aWNrKHQpO1xuICAgICAgICBpKys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhY3RpdmVJbnN0YW5jZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICBhY3RpdmVJbnN0YW5jZXNMZW5ndGgtLTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmFmID0gaSA+IDAgPyByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCkgOiB1bmRlZmluZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlKCkge1xuICAgIGlmICghYW5pbWUuc3VzcGVuZFdoZW5Eb2N1bWVudEhpZGRlbikgeyByZXR1cm47IH1cblxuICAgIGlmIChpc0RvY3VtZW50SGlkZGVuKCkpIHtcbiAgICAgIC8vIHN1c3BlbmQgdGlja3NcbiAgICAgIHJhZiA9IGNhbmNlbEFuaW1hdGlvbkZyYW1lKHJhZik7XG4gICAgfSBlbHNlIHsgLy8gaXMgYmFjayB0byBhY3RpdmUgdGFiXG4gICAgICAvLyBmaXJzdCBhZGp1c3QgYW5pbWF0aW9ucyB0byBjb25zaWRlciB0aGUgdGltZSB0aGF0IHRpY2tzIHdlcmUgc3VzcGVuZGVkXG4gICAgICBhY3RpdmVJbnN0YW5jZXMuZm9yRWFjaChcbiAgICAgICAgZnVuY3Rpb24gKGluc3RhbmNlKSB7IHJldHVybiBpbnN0YW5jZSAuX29uRG9jdW1lbnRWaXNpYmlsaXR5KCk7IH1cbiAgICAgICk7XG4gICAgICBlbmdpbmUoKTtcbiAgICB9XG4gIH1cbiAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSk7XG4gIH1cblxuICByZXR1cm4gcGxheTtcbn0pKCk7XG5cbmZ1bmN0aW9uIGlzRG9jdW1lbnRIaWRkZW4oKSB7XG4gIHJldHVybiAhIWRvY3VtZW50ICYmIGRvY3VtZW50LmhpZGRlbjtcbn1cblxuLy8gUHVibGljIEluc3RhbmNlXG5cbmZ1bmN0aW9uIGFuaW1lKHBhcmFtcykge1xuICBpZiAoIHBhcmFtcyA9PT0gdm9pZCAwICkgcGFyYW1zID0ge307XG5cblxuICB2YXIgc3RhcnRUaW1lID0gMCwgbGFzdFRpbWUgPSAwLCBub3cgPSAwO1xuICB2YXIgY2hpbGRyZW4sIGNoaWxkcmVuTGVuZ3RoID0gMDtcbiAgdmFyIHJlc29sdmUgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIG1ha2VQcm9taXNlKGluc3RhbmNlKSB7XG4gICAgdmFyIHByb21pc2UgPSB3aW5kb3cuUHJvbWlzZSAmJiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoX3Jlc29sdmUpIHsgcmV0dXJuIHJlc29sdmUgPSBfcmVzb2x2ZTsgfSk7XG4gICAgaW5zdGFuY2UuZmluaXNoZWQgPSBwcm9taXNlO1xuICAgIHJldHVybiBwcm9taXNlO1xuICB9XG5cbiAgdmFyIGluc3RhbmNlID0gY3JlYXRlTmV3SW5zdGFuY2UocGFyYW1zKTtcbiAgdmFyIHByb21pc2UgPSBtYWtlUHJvbWlzZShpbnN0YW5jZSk7XG5cbiAgZnVuY3Rpb24gdG9nZ2xlSW5zdGFuY2VEaXJlY3Rpb24oKSB7XG4gICAgdmFyIGRpcmVjdGlvbiA9IGluc3RhbmNlLmRpcmVjdGlvbjtcbiAgICBpZiAoZGlyZWN0aW9uICE9PSAnYWx0ZXJuYXRlJykge1xuICAgICAgaW5zdGFuY2UuZGlyZWN0aW9uID0gZGlyZWN0aW9uICE9PSAnbm9ybWFsJyA/ICdub3JtYWwnIDogJ3JldmVyc2UnO1xuICAgIH1cbiAgICBpbnN0YW5jZS5yZXZlcnNlZCA9ICFpbnN0YW5jZS5yZXZlcnNlZDtcbiAgICBjaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkgeyByZXR1cm4gY2hpbGQucmV2ZXJzZWQgPSBpbnN0YW5jZS5yZXZlcnNlZDsgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBhZGp1c3RUaW1lKHRpbWUpIHtcbiAgICByZXR1cm4gaW5zdGFuY2UucmV2ZXJzZWQgPyBpbnN0YW5jZS5kdXJhdGlvbiAtIHRpbWUgOiB0aW1lO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVzZXRUaW1lKCkge1xuICAgIHN0YXJ0VGltZSA9IDA7XG4gICAgbGFzdFRpbWUgPSBhZGp1c3RUaW1lKGluc3RhbmNlLmN1cnJlbnRUaW1lKSAqICgxIC8gYW5pbWUuc3BlZWQpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2Vla0NoaWxkKHRpbWUsIGNoaWxkKSB7XG4gICAgaWYgKGNoaWxkKSB7IGNoaWxkLnNlZWsodGltZSAtIGNoaWxkLnRpbWVsaW5lT2Zmc2V0KTsgfVxuICB9XG5cbiAgZnVuY3Rpb24gc3luY0luc3RhbmNlQ2hpbGRyZW4odGltZSkge1xuICAgIGlmICghaW5zdGFuY2UucmV2ZXJzZVBsYXliYWNrKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuTGVuZ3RoOyBpKyspIHsgc2Vla0NoaWxkKHRpbWUsIGNoaWxkcmVuW2ldKTsgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKHZhciBpJDEgPSBjaGlsZHJlbkxlbmd0aDsgaSQxLS07KSB7IHNlZWtDaGlsZCh0aW1lLCBjaGlsZHJlbltpJDFdKTsgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNldEFuaW1hdGlvbnNQcm9ncmVzcyhpbnNUaW1lKSB7XG4gICAgdmFyIGkgPSAwO1xuICAgIHZhciBhbmltYXRpb25zID0gaW5zdGFuY2UuYW5pbWF0aW9ucztcbiAgICB2YXIgYW5pbWF0aW9uc0xlbmd0aCA9IGFuaW1hdGlvbnMubGVuZ3RoO1xuICAgIHdoaWxlIChpIDwgYW5pbWF0aW9uc0xlbmd0aCkge1xuICAgICAgdmFyIGFuaW0gPSBhbmltYXRpb25zW2ldO1xuICAgICAgdmFyIGFuaW1hdGFibGUgPSBhbmltLmFuaW1hdGFibGU7XG4gICAgICB2YXIgdHdlZW5zID0gYW5pbS50d2VlbnM7XG4gICAgICB2YXIgdHdlZW5MZW5ndGggPSB0d2VlbnMubGVuZ3RoIC0gMTtcbiAgICAgIHZhciB0d2VlbiA9IHR3ZWVuc1t0d2Vlbkxlbmd0aF07XG4gICAgICAvLyBPbmx5IGNoZWNrIGZvciBrZXlmcmFtZXMgaWYgdGhlcmUgaXMgbW9yZSB0aGFuIG9uZSB0d2VlblxuICAgICAgaWYgKHR3ZWVuTGVuZ3RoKSB7IHR3ZWVuID0gZmlsdGVyQXJyYXkodHdlZW5zLCBmdW5jdGlvbiAodCkgeyByZXR1cm4gKGluc1RpbWUgPCB0LmVuZCk7IH0pWzBdIHx8IHR3ZWVuOyB9XG4gICAgICB2YXIgZWxhcHNlZCA9IG1pbk1heChpbnNUaW1lIC0gdHdlZW4uc3RhcnQgLSB0d2Vlbi5kZWxheSwgMCwgdHdlZW4uZHVyYXRpb24pIC8gdHdlZW4uZHVyYXRpb247XG4gICAgICB2YXIgZWFzZWQgPSBpc05hTihlbGFwc2VkKSA/IDEgOiB0d2Vlbi5lYXNpbmcoZWxhcHNlZCk7XG4gICAgICB2YXIgc3RyaW5ncyA9IHR3ZWVuLnRvLnN0cmluZ3M7XG4gICAgICB2YXIgcm91bmQgPSB0d2Vlbi5yb3VuZDtcbiAgICAgIHZhciBudW1iZXJzID0gW107XG4gICAgICB2YXIgdG9OdW1iZXJzTGVuZ3RoID0gdHdlZW4udG8ubnVtYmVycy5sZW5ndGg7XG4gICAgICB2YXIgcHJvZ3Jlc3MgPSAodm9pZCAwKTtcbiAgICAgIGZvciAodmFyIG4gPSAwOyBuIDwgdG9OdW1iZXJzTGVuZ3RoOyBuKyspIHtcbiAgICAgICAgdmFyIHZhbHVlID0gKHZvaWQgMCk7XG4gICAgICAgIHZhciB0b051bWJlciA9IHR3ZWVuLnRvLm51bWJlcnNbbl07XG4gICAgICAgIHZhciBmcm9tTnVtYmVyID0gdHdlZW4uZnJvbS5udW1iZXJzW25dIHx8IDA7XG4gICAgICAgIGlmICghdHdlZW4uaXNQYXRoKSB7XG4gICAgICAgICAgdmFsdWUgPSBmcm9tTnVtYmVyICsgKGVhc2VkICogKHRvTnVtYmVyIC0gZnJvbU51bWJlcikpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhbHVlID0gZ2V0UGF0aFByb2dyZXNzKHR3ZWVuLnZhbHVlLCBlYXNlZCAqIHRvTnVtYmVyLCB0d2Vlbi5pc1BhdGhUYXJnZXRJbnNpZGVTVkcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyb3VuZCkge1xuICAgICAgICAgIGlmICghKHR3ZWVuLmlzQ29sb3IgJiYgbiA+IDIpKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IE1hdGgucm91bmQodmFsdWUgKiByb3VuZCkgLyByb3VuZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbnVtYmVycy5wdXNoKHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIC8vIE1hbnVhbCBBcnJheS5yZWR1Y2UgZm9yIGJldHRlciBwZXJmb3JtYW5jZXNcbiAgICAgIHZhciBzdHJpbmdzTGVuZ3RoID0gc3RyaW5ncy5sZW5ndGg7XG4gICAgICBpZiAoIXN0cmluZ3NMZW5ndGgpIHtcbiAgICAgICAgcHJvZ3Jlc3MgPSBudW1iZXJzWzBdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvZ3Jlc3MgPSBzdHJpbmdzWzBdO1xuICAgICAgICBmb3IgKHZhciBzID0gMDsgcyA8IHN0cmluZ3NMZW5ndGg7IHMrKykge1xuICAgICAgICAgIHZhciBhID0gc3RyaW5nc1tzXTtcbiAgICAgICAgICB2YXIgYiA9IHN0cmluZ3NbcyArIDFdO1xuICAgICAgICAgIHZhciBuJDEgPSBudW1iZXJzW3NdO1xuICAgICAgICAgIGlmICghaXNOYU4obiQxKSkge1xuICAgICAgICAgICAgaWYgKCFiKSB7XG4gICAgICAgICAgICAgIHByb2dyZXNzICs9IG4kMSArICcgJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHByb2dyZXNzICs9IG4kMSArIGI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzZXRQcm9ncmVzc1ZhbHVlW2FuaW0udHlwZV0oYW5pbWF0YWJsZS50YXJnZXQsIGFuaW0ucHJvcGVydHksIHByb2dyZXNzLCBhbmltYXRhYmxlLnRyYW5zZm9ybXMpO1xuICAgICAgYW5pbS5jdXJyZW50VmFsdWUgPSBwcm9ncmVzcztcbiAgICAgIGkrKztcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzZXRDYWxsYmFjayhjYikge1xuICAgIGlmIChpbnN0YW5jZVtjYl0gJiYgIWluc3RhbmNlLnBhc3NUaHJvdWdoKSB7IGluc3RhbmNlW2NiXShpbnN0YW5jZSk7IH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNvdW50SXRlcmF0aW9uKCkge1xuICAgIGlmIChpbnN0YW5jZS5yZW1haW5pbmcgJiYgaW5zdGFuY2UucmVtYWluaW5nICE9PSB0cnVlKSB7XG4gICAgICBpbnN0YW5jZS5yZW1haW5pbmctLTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzZXRJbnN0YW5jZVByb2dyZXNzKGVuZ2luZVRpbWUpIHtcbiAgICB2YXIgaW5zRHVyYXRpb24gPSBpbnN0YW5jZS5kdXJhdGlvbjtcbiAgICB2YXIgaW5zRGVsYXkgPSBpbnN0YW5jZS5kZWxheTtcbiAgICB2YXIgaW5zRW5kRGVsYXkgPSBpbnNEdXJhdGlvbiAtIGluc3RhbmNlLmVuZERlbGF5O1xuICAgIHZhciBpbnNUaW1lID0gYWRqdXN0VGltZShlbmdpbmVUaW1lKTtcbiAgICBpbnN0YW5jZS5wcm9ncmVzcyA9IG1pbk1heCgoaW5zVGltZSAvIGluc0R1cmF0aW9uKSAqIDEwMCwgMCwgMTAwKTtcbiAgICBpbnN0YW5jZS5yZXZlcnNlUGxheWJhY2sgPSBpbnNUaW1lIDwgaW5zdGFuY2UuY3VycmVudFRpbWU7XG4gICAgaWYgKGNoaWxkcmVuKSB7IHN5bmNJbnN0YW5jZUNoaWxkcmVuKGluc1RpbWUpOyB9XG4gICAgaWYgKCFpbnN0YW5jZS5iZWdhbiAmJiBpbnN0YW5jZS5jdXJyZW50VGltZSA+IDApIHtcbiAgICAgIGluc3RhbmNlLmJlZ2FuID0gdHJ1ZTtcbiAgICAgIHNldENhbGxiYWNrKCdiZWdpbicpO1xuICAgIH1cbiAgICBpZiAoIWluc3RhbmNlLmxvb3BCZWdhbiAmJiBpbnN0YW5jZS5jdXJyZW50VGltZSA+IDApIHtcbiAgICAgIGluc3RhbmNlLmxvb3BCZWdhbiA9IHRydWU7XG4gICAgICBzZXRDYWxsYmFjaygnbG9vcEJlZ2luJyk7XG4gICAgfVxuICAgIGlmIChpbnNUaW1lIDw9IGluc0RlbGF5ICYmIGluc3RhbmNlLmN1cnJlbnRUaW1lICE9PSAwKSB7XG4gICAgICBzZXRBbmltYXRpb25zUHJvZ3Jlc3MoMCk7XG4gICAgfVxuICAgIGlmICgoaW5zVGltZSA+PSBpbnNFbmREZWxheSAmJiBpbnN0YW5jZS5jdXJyZW50VGltZSAhPT0gaW5zRHVyYXRpb24pIHx8ICFpbnNEdXJhdGlvbikge1xuICAgICAgc2V0QW5pbWF0aW9uc1Byb2dyZXNzKGluc0R1cmF0aW9uKTtcbiAgICB9XG4gICAgaWYgKGluc1RpbWUgPiBpbnNEZWxheSAmJiBpbnNUaW1lIDwgaW5zRW5kRGVsYXkpIHtcbiAgICAgIGlmICghaW5zdGFuY2UuY2hhbmdlQmVnYW4pIHtcbiAgICAgICAgaW5zdGFuY2UuY2hhbmdlQmVnYW4gPSB0cnVlO1xuICAgICAgICBpbnN0YW5jZS5jaGFuZ2VDb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgc2V0Q2FsbGJhY2soJ2NoYW5nZUJlZ2luJyk7XG4gICAgICB9XG4gICAgICBzZXRDYWxsYmFjaygnY2hhbmdlJyk7XG4gICAgICBzZXRBbmltYXRpb25zUHJvZ3Jlc3MoaW5zVGltZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpbnN0YW5jZS5jaGFuZ2VCZWdhbikge1xuICAgICAgICBpbnN0YW5jZS5jaGFuZ2VDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICBpbnN0YW5jZS5jaGFuZ2VCZWdhbiA9IGZhbHNlO1xuICAgICAgICBzZXRDYWxsYmFjaygnY2hhbmdlQ29tcGxldGUnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaW5zdGFuY2UuY3VycmVudFRpbWUgPSBtaW5NYXgoaW5zVGltZSwgMCwgaW5zRHVyYXRpb24pO1xuICAgIGlmIChpbnN0YW5jZS5iZWdhbikgeyBzZXRDYWxsYmFjaygndXBkYXRlJyk7IH1cbiAgICBpZiAoZW5naW5lVGltZSA+PSBpbnNEdXJhdGlvbikge1xuICAgICAgbGFzdFRpbWUgPSAwO1xuICAgICAgY291bnRJdGVyYXRpb24oKTtcbiAgICAgIGlmICghaW5zdGFuY2UucmVtYWluaW5nKSB7XG4gICAgICAgIGluc3RhbmNlLnBhdXNlZCA9IHRydWU7XG4gICAgICAgIGlmICghaW5zdGFuY2UuY29tcGxldGVkKSB7XG4gICAgICAgICAgaW5zdGFuY2UuY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgICBzZXRDYWxsYmFjaygnbG9vcENvbXBsZXRlJyk7XG4gICAgICAgICAgc2V0Q2FsbGJhY2soJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgaWYgKCFpbnN0YW5jZS5wYXNzVGhyb3VnaCAmJiAnUHJvbWlzZScgaW4gd2luZG93KSB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICBwcm9taXNlID0gbWFrZVByb21pc2UoaW5zdGFuY2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhcnRUaW1lID0gbm93O1xuICAgICAgICBzZXRDYWxsYmFjaygnbG9vcENvbXBsZXRlJyk7XG4gICAgICAgIGluc3RhbmNlLmxvb3BCZWdhbiA9IGZhbHNlO1xuICAgICAgICBpZiAoaW5zdGFuY2UuZGlyZWN0aW9uID09PSAnYWx0ZXJuYXRlJykge1xuICAgICAgICAgIHRvZ2dsZUluc3RhbmNlRGlyZWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpbnN0YW5jZS5yZXNldCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkaXJlY3Rpb24gPSBpbnN0YW5jZS5kaXJlY3Rpb247XG4gICAgaW5zdGFuY2UucGFzc1Rocm91Z2ggPSBmYWxzZTtcbiAgICBpbnN0YW5jZS5jdXJyZW50VGltZSA9IDA7XG4gICAgaW5zdGFuY2UucHJvZ3Jlc3MgPSAwO1xuICAgIGluc3RhbmNlLnBhdXNlZCA9IHRydWU7XG4gICAgaW5zdGFuY2UuYmVnYW4gPSBmYWxzZTtcbiAgICBpbnN0YW5jZS5sb29wQmVnYW4gPSBmYWxzZTtcbiAgICBpbnN0YW5jZS5jaGFuZ2VCZWdhbiA9IGZhbHNlO1xuICAgIGluc3RhbmNlLmNvbXBsZXRlZCA9IGZhbHNlO1xuICAgIGluc3RhbmNlLmNoYW5nZUNvbXBsZXRlZCA9IGZhbHNlO1xuICAgIGluc3RhbmNlLnJldmVyc2VQbGF5YmFjayA9IGZhbHNlO1xuICAgIGluc3RhbmNlLnJldmVyc2VkID0gZGlyZWN0aW9uID09PSAncmV2ZXJzZSc7XG4gICAgaW5zdGFuY2UucmVtYWluaW5nID0gaW5zdGFuY2UubG9vcDtcbiAgICBjaGlsZHJlbiA9IGluc3RhbmNlLmNoaWxkcmVuO1xuICAgIGNoaWxkcmVuTGVuZ3RoID0gY2hpbGRyZW4ubGVuZ3RoO1xuICAgIGZvciAodmFyIGkgPSBjaGlsZHJlbkxlbmd0aDsgaS0tOykgeyBpbnN0YW5jZS5jaGlsZHJlbltpXS5yZXNldCgpOyB9XG4gICAgaWYgKGluc3RhbmNlLnJldmVyc2VkICYmIGluc3RhbmNlLmxvb3AgIT09IHRydWUgfHwgKGRpcmVjdGlvbiA9PT0gJ2FsdGVybmF0ZScgJiYgaW5zdGFuY2UubG9vcCA9PT0gMSkpIHsgaW5zdGFuY2UucmVtYWluaW5nKys7IH1cbiAgICBzZXRBbmltYXRpb25zUHJvZ3Jlc3MoaW5zdGFuY2UucmV2ZXJzZWQgPyBpbnN0YW5jZS5kdXJhdGlvbiA6IDApO1xuICB9O1xuXG4gIC8vIGludGVybmFsIG1ldGhvZCAoZm9yIGVuZ2luZSkgdG8gYWRqdXN0IGFuaW1hdGlvbiB0aW1pbmdzIGJlZm9yZSByZXN0b3JpbmcgZW5naW5lIHRpY2tzIChyQUYpXG4gIGluc3RhbmNlLl9vbkRvY3VtZW50VmlzaWJpbGl0eSA9IHJlc2V0VGltZTtcblxuICAvLyBTZXQgVmFsdWUgaGVscGVyXG5cbiAgaW5zdGFuY2Uuc2V0ID0gZnVuY3Rpb24odGFyZ2V0cywgcHJvcGVydGllcykge1xuICAgIHNldFRhcmdldHNWYWx1ZSh0YXJnZXRzLCBwcm9wZXJ0aWVzKTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH07XG5cbiAgaW5zdGFuY2UudGljayA9IGZ1bmN0aW9uKHQpIHtcbiAgICBub3cgPSB0O1xuICAgIGlmICghc3RhcnRUaW1lKSB7IHN0YXJ0VGltZSA9IG5vdzsgfVxuICAgIHNldEluc3RhbmNlUHJvZ3Jlc3MoKG5vdyArIChsYXN0VGltZSAtIHN0YXJ0VGltZSkpICogYW5pbWUuc3BlZWQpO1xuICB9O1xuXG4gIGluc3RhbmNlLnNlZWsgPSBmdW5jdGlvbih0aW1lKSB7XG4gICAgc2V0SW5zdGFuY2VQcm9ncmVzcyhhZGp1c3RUaW1lKHRpbWUpKTtcbiAgfTtcblxuICBpbnN0YW5jZS5wYXVzZSA9IGZ1bmN0aW9uKCkge1xuICAgIGluc3RhbmNlLnBhdXNlZCA9IHRydWU7XG4gICAgcmVzZXRUaW1lKCk7XG4gIH07XG5cbiAgaW5zdGFuY2UucGxheSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghaW5zdGFuY2UucGF1c2VkKSB7IHJldHVybjsgfVxuICAgIGlmIChpbnN0YW5jZS5jb21wbGV0ZWQpIHsgaW5zdGFuY2UucmVzZXQoKTsgfVxuICAgIGluc3RhbmNlLnBhdXNlZCA9IGZhbHNlO1xuICAgIGFjdGl2ZUluc3RhbmNlcy5wdXNoKGluc3RhbmNlKTtcbiAgICByZXNldFRpbWUoKTtcbiAgICBlbmdpbmUoKTtcbiAgfTtcblxuICBpbnN0YW5jZS5yZXZlcnNlID0gZnVuY3Rpb24oKSB7XG4gICAgdG9nZ2xlSW5zdGFuY2VEaXJlY3Rpb24oKTtcbiAgICBpbnN0YW5jZS5jb21wbGV0ZWQgPSBpbnN0YW5jZS5yZXZlcnNlZCA/IGZhbHNlIDogdHJ1ZTtcbiAgICByZXNldFRpbWUoKTtcbiAgfTtcblxuICBpbnN0YW5jZS5yZXN0YXJ0ID0gZnVuY3Rpb24oKSB7XG4gICAgaW5zdGFuY2UucmVzZXQoKTtcbiAgICBpbnN0YW5jZS5wbGF5KCk7XG4gIH07XG5cbiAgaW5zdGFuY2UucmVtb3ZlID0gZnVuY3Rpb24odGFyZ2V0cykge1xuICAgIHZhciB0YXJnZXRzQXJyYXkgPSBwYXJzZVRhcmdldHModGFyZ2V0cyk7XG4gICAgcmVtb3ZlVGFyZ2V0c0Zyb21JbnN0YW5jZSh0YXJnZXRzQXJyYXksIGluc3RhbmNlKTtcbiAgfTtcblxuICBpbnN0YW5jZS5yZXNldCgpO1xuXG4gIGlmIChpbnN0YW5jZS5hdXRvcGxheSkgeyBpbnN0YW5jZS5wbGF5KCk7IH1cblxuICByZXR1cm4gaW5zdGFuY2U7XG5cbn1cblxuLy8gUmVtb3ZlIHRhcmdldHMgZnJvbSBhbmltYXRpb25cblxuZnVuY3Rpb24gcmVtb3ZlVGFyZ2V0c0Zyb21BbmltYXRpb25zKHRhcmdldHNBcnJheSwgYW5pbWF0aW9ucykge1xuICBmb3IgKHZhciBhID0gYW5pbWF0aW9ucy5sZW5ndGg7IGEtLTspIHtcbiAgICBpZiAoYXJyYXlDb250YWlucyh0YXJnZXRzQXJyYXksIGFuaW1hdGlvbnNbYV0uYW5pbWF0YWJsZS50YXJnZXQpKSB7XG4gICAgICBhbmltYXRpb25zLnNwbGljZShhLCAxKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlVGFyZ2V0c0Zyb21JbnN0YW5jZSh0YXJnZXRzQXJyYXksIGluc3RhbmNlKSB7XG4gIHZhciBhbmltYXRpb25zID0gaW5zdGFuY2UuYW5pbWF0aW9ucztcbiAgdmFyIGNoaWxkcmVuID0gaW5zdGFuY2UuY2hpbGRyZW47XG4gIHJlbW92ZVRhcmdldHNGcm9tQW5pbWF0aW9ucyh0YXJnZXRzQXJyYXksIGFuaW1hdGlvbnMpO1xuICBmb3IgKHZhciBjID0gY2hpbGRyZW4ubGVuZ3RoOyBjLS07KSB7XG4gICAgdmFyIGNoaWxkID0gY2hpbGRyZW5bY107XG4gICAgdmFyIGNoaWxkQW5pbWF0aW9ucyA9IGNoaWxkLmFuaW1hdGlvbnM7XG4gICAgcmVtb3ZlVGFyZ2V0c0Zyb21BbmltYXRpb25zKHRhcmdldHNBcnJheSwgY2hpbGRBbmltYXRpb25zKTtcbiAgICBpZiAoIWNoaWxkQW5pbWF0aW9ucy5sZW5ndGggJiYgIWNoaWxkLmNoaWxkcmVuLmxlbmd0aCkgeyBjaGlsZHJlbi5zcGxpY2UoYywgMSk7IH1cbiAgfVxuICBpZiAoIWFuaW1hdGlvbnMubGVuZ3RoICYmICFjaGlsZHJlbi5sZW5ndGgpIHsgaW5zdGFuY2UucGF1c2UoKTsgfVxufVxuXG5mdW5jdGlvbiByZW1vdmVUYXJnZXRzRnJvbUFjdGl2ZUluc3RhbmNlcyh0YXJnZXRzKSB7XG4gIHZhciB0YXJnZXRzQXJyYXkgPSBwYXJzZVRhcmdldHModGFyZ2V0cyk7XG4gIGZvciAodmFyIGkgPSBhY3RpdmVJbnN0YW5jZXMubGVuZ3RoOyBpLS07KSB7XG4gICAgdmFyIGluc3RhbmNlID0gYWN0aXZlSW5zdGFuY2VzW2ldO1xuICAgIHJlbW92ZVRhcmdldHNGcm9tSW5zdGFuY2UodGFyZ2V0c0FycmF5LCBpbnN0YW5jZSk7XG4gIH1cbn1cblxuLy8gU3RhZ2dlciBoZWxwZXJzXG5cbmZ1bmN0aW9uIHN0YWdnZXIodmFsLCBwYXJhbXMpIHtcbiAgaWYgKCBwYXJhbXMgPT09IHZvaWQgMCApIHBhcmFtcyA9IHt9O1xuXG4gIHZhciBkaXJlY3Rpb24gPSBwYXJhbXMuZGlyZWN0aW9uIHx8ICdub3JtYWwnO1xuICB2YXIgZWFzaW5nID0gcGFyYW1zLmVhc2luZyA/IHBhcnNlRWFzaW5ncyhwYXJhbXMuZWFzaW5nKSA6IG51bGw7XG4gIHZhciBncmlkID0gcGFyYW1zLmdyaWQ7XG4gIHZhciBheGlzID0gcGFyYW1zLmF4aXM7XG4gIHZhciBmcm9tSW5kZXggPSBwYXJhbXMuZnJvbSB8fCAwO1xuICB2YXIgZnJvbUZpcnN0ID0gZnJvbUluZGV4ID09PSAnZmlyc3QnO1xuICB2YXIgZnJvbUNlbnRlciA9IGZyb21JbmRleCA9PT0gJ2NlbnRlcic7XG4gIHZhciBmcm9tTGFzdCA9IGZyb21JbmRleCA9PT0gJ2xhc3QnO1xuICB2YXIgaXNSYW5nZSA9IGlzLmFycih2YWwpO1xuICB2YXIgdmFsMSA9IGlzUmFuZ2UgPyBwYXJzZUZsb2F0KHZhbFswXSkgOiBwYXJzZUZsb2F0KHZhbCk7XG4gIHZhciB2YWwyID0gaXNSYW5nZSA/IHBhcnNlRmxvYXQodmFsWzFdKSA6IDA7XG4gIHZhciB1bml0ID0gZ2V0VW5pdChpc1JhbmdlID8gdmFsWzFdIDogdmFsKSB8fCAwO1xuICB2YXIgc3RhcnQgPSBwYXJhbXMuc3RhcnQgfHwgMCArIChpc1JhbmdlID8gdmFsMSA6IDApO1xuICB2YXIgdmFsdWVzID0gW107XG4gIHZhciBtYXhWYWx1ZSA9IDA7XG4gIHJldHVybiBmdW5jdGlvbiAoZWwsIGksIHQpIHtcbiAgICBpZiAoZnJvbUZpcnN0KSB7IGZyb21JbmRleCA9IDA7IH1cbiAgICBpZiAoZnJvbUNlbnRlcikgeyBmcm9tSW5kZXggPSAodCAtIDEpIC8gMjsgfVxuICAgIGlmIChmcm9tTGFzdCkgeyBmcm9tSW5kZXggPSB0IC0gMTsgfVxuICAgIGlmICghdmFsdWVzLmxlbmd0aCkge1xuICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHQ7IGluZGV4KyspIHtcbiAgICAgICAgaWYgKCFncmlkKSB7XG4gICAgICAgICAgdmFsdWVzLnB1c2goTWF0aC5hYnMoZnJvbUluZGV4IC0gaW5kZXgpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgZnJvbVggPSAhZnJvbUNlbnRlciA/IGZyb21JbmRleCVncmlkWzBdIDogKGdyaWRbMF0tMSkvMjtcbiAgICAgICAgICB2YXIgZnJvbVkgPSAhZnJvbUNlbnRlciA/IE1hdGguZmxvb3IoZnJvbUluZGV4L2dyaWRbMF0pIDogKGdyaWRbMV0tMSkvMjtcbiAgICAgICAgICB2YXIgdG9YID0gaW5kZXglZ3JpZFswXTtcbiAgICAgICAgICB2YXIgdG9ZID0gTWF0aC5mbG9vcihpbmRleC9ncmlkWzBdKTtcbiAgICAgICAgICB2YXIgZGlzdGFuY2VYID0gZnJvbVggLSB0b1g7XG4gICAgICAgICAgdmFyIGRpc3RhbmNlWSA9IGZyb21ZIC0gdG9ZO1xuICAgICAgICAgIHZhciB2YWx1ZSA9IE1hdGguc3FydChkaXN0YW5jZVggKiBkaXN0YW5jZVggKyBkaXN0YW5jZVkgKiBkaXN0YW5jZVkpO1xuICAgICAgICAgIGlmIChheGlzID09PSAneCcpIHsgdmFsdWUgPSAtZGlzdGFuY2VYOyB9XG4gICAgICAgICAgaWYgKGF4aXMgPT09ICd5JykgeyB2YWx1ZSA9IC1kaXN0YW5jZVk7IH1cbiAgICAgICAgICB2YWx1ZXMucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgbWF4VmFsdWUgPSBNYXRoLm1heC5hcHBseShNYXRoLCB2YWx1ZXMpO1xuICAgICAgfVxuICAgICAgaWYgKGVhc2luZykgeyB2YWx1ZXMgPSB2YWx1ZXMubWFwKGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuIGVhc2luZyh2YWwgLyBtYXhWYWx1ZSkgKiBtYXhWYWx1ZTsgfSk7IH1cbiAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdyZXZlcnNlJykgeyB2YWx1ZXMgPSB2YWx1ZXMubWFwKGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuIGF4aXMgPyAodmFsIDwgMCkgPyB2YWwgKiAtMSA6IC12YWwgOiBNYXRoLmFicyhtYXhWYWx1ZSAtIHZhbCk7IH0pOyB9XG4gICAgfVxuICAgIHZhciBzcGFjaW5nID0gaXNSYW5nZSA/ICh2YWwyIC0gdmFsMSkgLyBtYXhWYWx1ZSA6IHZhbDE7XG4gICAgcmV0dXJuIHN0YXJ0ICsgKHNwYWNpbmcgKiAoTWF0aC5yb3VuZCh2YWx1ZXNbaV0gKiAxMDApIC8gMTAwKSkgKyB1bml0O1xuICB9XG59XG5cbi8vIFRpbWVsaW5lXG5cbmZ1bmN0aW9uIHRpbWVsaW5lKHBhcmFtcykge1xuICBpZiAoIHBhcmFtcyA9PT0gdm9pZCAwICkgcGFyYW1zID0ge307XG5cbiAgdmFyIHRsID0gYW5pbWUocGFyYW1zKTtcbiAgdGwuZHVyYXRpb24gPSAwO1xuICB0bC5hZGQgPSBmdW5jdGlvbihpbnN0YW5jZVBhcmFtcywgdGltZWxpbmVPZmZzZXQpIHtcbiAgICB2YXIgdGxJbmRleCA9IGFjdGl2ZUluc3RhbmNlcy5pbmRleE9mKHRsKTtcbiAgICB2YXIgY2hpbGRyZW4gPSB0bC5jaGlsZHJlbjtcbiAgICBpZiAodGxJbmRleCA+IC0xKSB7IGFjdGl2ZUluc3RhbmNlcy5zcGxpY2UodGxJbmRleCwgMSk7IH1cbiAgICBmdW5jdGlvbiBwYXNzVGhyb3VnaChpbnMpIHsgaW5zLnBhc3NUaHJvdWdoID0gdHJ1ZTsgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHsgcGFzc1Rocm91Z2goY2hpbGRyZW5baV0pOyB9XG4gICAgdmFyIGluc1BhcmFtcyA9IG1lcmdlT2JqZWN0cyhpbnN0YW5jZVBhcmFtcywgcmVwbGFjZU9iamVjdFByb3BzKGRlZmF1bHRUd2VlblNldHRpbmdzLCBwYXJhbXMpKTtcbiAgICBpbnNQYXJhbXMudGFyZ2V0cyA9IGluc1BhcmFtcy50YXJnZXRzIHx8IHBhcmFtcy50YXJnZXRzO1xuICAgIHZhciB0bER1cmF0aW9uID0gdGwuZHVyYXRpb247XG4gICAgaW5zUGFyYW1zLmF1dG9wbGF5ID0gZmFsc2U7XG4gICAgaW5zUGFyYW1zLmRpcmVjdGlvbiA9IHRsLmRpcmVjdGlvbjtcbiAgICBpbnNQYXJhbXMudGltZWxpbmVPZmZzZXQgPSBpcy51bmQodGltZWxpbmVPZmZzZXQpID8gdGxEdXJhdGlvbiA6IGdldFJlbGF0aXZlVmFsdWUodGltZWxpbmVPZmZzZXQsIHRsRHVyYXRpb24pO1xuICAgIHBhc3NUaHJvdWdoKHRsKTtcbiAgICB0bC5zZWVrKGluc1BhcmFtcy50aW1lbGluZU9mZnNldCk7XG4gICAgdmFyIGlucyA9IGFuaW1lKGluc1BhcmFtcyk7XG4gICAgcGFzc1Rocm91Z2goaW5zKTtcbiAgICBjaGlsZHJlbi5wdXNoKGlucyk7XG4gICAgdmFyIHRpbWluZ3MgPSBnZXRJbnN0YW5jZVRpbWluZ3MoY2hpbGRyZW4sIHBhcmFtcyk7XG4gICAgdGwuZGVsYXkgPSB0aW1pbmdzLmRlbGF5O1xuICAgIHRsLmVuZERlbGF5ID0gdGltaW5ncy5lbmREZWxheTtcbiAgICB0bC5kdXJhdGlvbiA9IHRpbWluZ3MuZHVyYXRpb247XG4gICAgdGwuc2VlaygwKTtcbiAgICB0bC5yZXNldCgpO1xuICAgIGlmICh0bC5hdXRvcGxheSkgeyB0bC5wbGF5KCk7IH1cbiAgICByZXR1cm4gdGw7XG4gIH07XG4gIHJldHVybiB0bDtcbn1cblxuYW5pbWUudmVyc2lvbiA9ICczLjIuMSc7XG5hbmltZS5zcGVlZCA9IDE7XG4vLyBUT0RPOiNyZXZpZXc6IG5hbWluZywgZG9jdW1lbnRhdGlvblxuYW5pbWUuc3VzcGVuZFdoZW5Eb2N1bWVudEhpZGRlbiA9IHRydWU7XG5hbmltZS5ydW5uaW5nID0gYWN0aXZlSW5zdGFuY2VzO1xuYW5pbWUucmVtb3ZlID0gcmVtb3ZlVGFyZ2V0c0Zyb21BY3RpdmVJbnN0YW5jZXM7XG5hbmltZS5nZXQgPSBnZXRPcmlnaW5hbFRhcmdldFZhbHVlO1xuYW5pbWUuc2V0ID0gc2V0VGFyZ2V0c1ZhbHVlO1xuYW5pbWUuY29udmVydFB4ID0gY29udmVydFB4VG9Vbml0O1xuYW5pbWUucGF0aCA9IGdldFBhdGg7XG5hbmltZS5zZXREYXNob2Zmc2V0ID0gc2V0RGFzaG9mZnNldDtcbmFuaW1lLnN0YWdnZXIgPSBzdGFnZ2VyO1xuYW5pbWUudGltZWxpbmUgPSB0aW1lbGluZTtcbmFuaW1lLmVhc2luZyA9IHBhcnNlRWFzaW5ncztcbmFuaW1lLnBlbm5lciA9IHBlbm5lcjtcbmFuaW1lLnJhbmRvbSA9IGZ1bmN0aW9uIChtaW4sIG1heCkgeyByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjsgfTtcblxuZXhwb3J0IGRlZmF1bHQgYW5pbWU7XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdGlkOiBtb2R1bGVJZCxcblx0XHRsb2FkZWQ6IGZhbHNlLFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcblx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5obWQgPSAobW9kdWxlKSA9PiB7XG5cdG1vZHVsZSA9IE9iamVjdC5jcmVhdGUobW9kdWxlKTtcblx0aWYgKCFtb2R1bGUuY2hpbGRyZW4pIG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCAnZXhwb3J0cycsIHtcblx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdHNldDogKCkgPT4ge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdFUyBNb2R1bGVzIG1heSBub3QgYXNzaWduIG1vZHVsZS5leHBvcnRzIG9yIGV4cG9ydHMuKiwgVXNlIEVTTSBleHBvcnQgc3ludGF4LCBpbnN0ZWFkOiAnICsgbW9kdWxlLmlkKTtcblx0XHR9XG5cdH0pO1xuXHRyZXR1cm4gbW9kdWxlO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiLyoqXHJcbiAqIEBtb2R1bGUgVGVtcGxhdGUvVGVtcGxhdGVNYWluXHJcbiAqL1xyXG5cclxuY29uc29sZS5sb2coJ1RlbXBsYXRlIFZFUlNJT046JywgVkVSU0lPTik7XHJcblxyXG5pbXBvcnQge0NPTlNUQU5UU30gZnJvbSAnLi4vQ29uc3RhbnRzJztcclxuaW1wb3J0IHsgUERGQ3Vyc29yVG9vbHMgfSBmcm9tICcuLy4uL3BkZi5jdXJzb3IudG9vbCc7XHJcbmltcG9ydCB7VGVtcGxhdGVNb2R9IGZyb20gJy4vdGVtcGxhdGVtb2QnO1xyXG5pbXBvcnQge1V0aWxzfSBmcm9tICcuLy4uL3V0aWxzL3V0aWxzLmpzJztcclxuXHJcblxyXG52YXIgcGRmQ3Vyc29yVG9vbHMsIHBkZlZpZXdlciwgdGVtcGxhdGVtb2QsIF9fdGVtcGxhdGVPd25lck5vZGU7XHJcblxyXG5jb25zdCBVU0VfT05MWV9DU1NfWk9PTSA9IGZhbHNlO1xyXG5jb25zdCBURVhUX0xBWUVSX01PREUgPSAwOyAvLyBESVNBQkxFXHJcbmNvbnN0IE1BWF9JTUFHRV9TSVpFID0gMTAyNCAqIDEwMjQ7XHJcbmNvbnN0IERFRkFVTFRfU0NBTEVfREVMVEEgPSAxLjA7XHJcblxyXG4vKipcclxuICogQGRlc2NyaXB0aW9uIFBERuusuOyEnOulvCDroZzrk5ztlZjqs6Ag7LSI6riwIOyFi+2MheydhCDtlZzri6QuXHJcbiAqIFxyXG4gKiBAcGFyYW0ge0VsZW1lbnR9IG93bmVyTm9kZSAg7ZW064u5IO2UhOuhnOygne2KuOydmCDstZzsg4Hri6ggRWxlbWVudOulvCDqsJDsi7jqs6Ag7J6I64qUIEVsZW1lbnRcclxuICogQHBhcmFtIHtTdHJpbmd9IHBkZkZpbGVVcmwgICBQREYgRklMRSBVUkxcclxuICogQHBhcmFtIHtBcnJheX0gIHVzZXJMaXN0ICDshJzrqoXsnpAg7KCV67O0IOumrOyKpO2KuFxyXG4gKiBAcGFyYW0ge0FycmF5fSBkdk9wdGlvbkxpc3QgIOq4sOuzuOqwkiDsoJXrs7Qg66as7Iqk7Yq4XHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBpbXBvcnREYXRhICDquLDsobQgVGVtcGxhdGXsl5DshJwg7KCA7J6l7ZWcIEpzb24gT2JqZWN0XHJcbiAqIEBwYXJhbSB7QXJyYXl9IGxhbmdzICDsgqzsmqntlaAg64uk6rWt7Ja0IOumrOyKpO2KuCDquLDrs7jqsJLsnLzroZwgW1wia29cIiwgXCJlblwiXeqwgCDrk6TslrTsnojri6QuXHJcbiAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICogQE1ldGhvZCBOYW1lIDogaW5pdERvY3VtZW50XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaW5pdERvY3VtZW50KG93bmVyTm9kZSwgcGRmRmlsZVVybCwgdXNlckxpc3QsIGR2T3B0aW9uTGlzdCwgc2lnblRhYlNob3dEZWZPcHRWYWwsIGltcG9ydERhdGEsIGxhbmdzID0gW1wia29cIiwgXCJlblwiXSkge1xyXG4gICAgX190ZW1wbGF0ZU93bmVyTm9kZSA9IG93bmVyTm9kZTtcclxuICAgIFxyXG4gICAgVXRpbHMudHJhbnNsYXRvci5mZXRjaChsYW5ncykudGhlbigoKSA9PiB7XHJcbiAgICAgICAgLy8gLT4gVHJhbnNsYXRpb25zIGFyZSByZWFkeS4uLlxyXG4gICAgICAgIFV0aWxzLmNoYW5nZUxvY2FsZShsYW5nc1swXSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBsZXQgcGRmQ29udGFpbmVyID0gX190ZW1wbGF0ZU93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKCcgIycgKyBDT05TVEFOVFMuVEVNUExBVEVfUERGX1ZJRVdFUl9DT05UQUlORVIpO1xyXG4gICAgbGV0IGV2ZW50QnVzID0gbmV3IHBkZmpzVmlld2VyLkV2ZW50QnVzKCk7XHJcbiAgICBwZGZDdXJzb3JUb29scyA9IG5ldyBQREZDdXJzb3JUb29scyh7XHJcbiAgICAgICAgY29udGFpbmVyOiBwZGZDb250YWluZXIsXHJcbiAgICAgICAgZXZlbnRCdXM6IGV2ZW50QnVzLFxyXG4gICAgICAgIGN1cnNvclRvb2xPbkxvYWQ6IDBcclxuICAgIH0pO1xyXG5cclxuICAgIHBkZlZpZXdlciA9IG5ldyBwZGZqc1ZpZXdlci5QREZWaWV3ZXIoe1xyXG4gICAgICAgIGNvbnRhaW5lcjogcGRmQ29udGFpbmVyLFxyXG4gICAgICAgIGV2ZW50QnVzOiBldmVudEJ1cyxcclxuICAgICAgICB1c2VPbmx5Q3NzWm9vbTogVVNFX09OTFlfQ1NTX1pPT00sXHJcbiAgICAgICAgdGV4dExheWVyTW9kZTogVEVYVF9MQVlFUl9NT0RFLFxyXG4gICAgfSk7XHJcblxyXG4gICAgdGVtcGxhdGVtb2QgPSBuZXcgVGVtcGxhdGVNb2QocGRmVmlld2VyLCBvd25lck5vZGUpO1xyXG4gICAgdGVtcGxhdGVtb2QuYXBwZW5kU2lnblRhYlNob3dPcHQoc2lnblRhYlNob3dEZWZPcHRWYWwpO1xyXG4gICAgdGVtcGxhdGVtb2QuYnVpbGRTaWduVGFiU2hvd09wdChzaWduVGFiU2hvd0RlZk9wdFZhbCk7XHJcbiAgICB0ZW1wbGF0ZW1vZC5idWlsZEZpZWxkVXNlckluZm8odXNlckxpc3QpO1xyXG4gICAgdGVtcGxhdGVtb2QuYnVpbGREVk9wdHNJbmZvKGR2T3B0aW9uTGlzdCk7XHJcbiAgICAgXHJcbiAgICBldmVudEJ1cy5vbihcInBhZ2VyZW5kZXJlZFwiLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJwYWdlUmVuZGVyZWQ6IFwiKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGV2ZW50QnVzLm9uKFwicGFnZWNoYW5naW5nXCIsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInBhZ2VjaGFuZ2luZ1wiKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGV2ZW50QnVzLm9uKFwic2NhbGVjaGFuZ2luZ1wiLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJzY2FsZWNoYW5naW5nXCIpO1xyXG4gICAgICAgIGNoYW5nZUxheWVyU2l6ZShldnQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZXZlbnRCdXMub24oXCJwYWdlc2luaXRcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwicGFnZXNpbml0XCIpO1xyXG4gICAgICAgIHBkZlZpZXdlci5jdXJyZW50U2NhbGUgPSBERUZBVUxUX1NDQUxFX0RFTFRBO1xyXG4gICAgICAgIC8vIFdlIGNhbiB1c2UgcGRmVmlld2VyIG5vdywgZS5nLiBsZXQncyBjaGFuZ2UgZGVmYXVsdCBzY2FsZS5cclxuICAgIH0pO1xyXG5cclxuICAgIGxldCBsb2FkaW5nVGFzayA9IHBkZmpzTGliLmdldERvY3VtZW50KHtcclxuICAgICAgICB1cmw6IHBkZkZpbGVVcmwsXHJcbiAgICAgICAgY01hcFVybDogJy9qcy9wZGZfZm9ybS9wZGZqcy9jbWFwcy8nLFxyXG4gICAgICAgIGNNYXBQYWNrZWQ6IHRydWUsXHJcbiAgICB9KVxyXG4gICAgbG9hZGluZ1Rhc2sucHJvbWlzZS50aGVuKGZ1bmN0aW9uIChwZGZEb2N1bWVudCkge1xyXG4gICAgICAgIHBkZkRvY3VtZW50LmdldERhdGEoKS50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgfSlcclxuICAgICAgICBwZGZWaWV3ZXIuY3VycmVudFNjYWxlID0gREVGQVVMVF9TQ0FMRV9ERUxUQTtcclxuICAgICAgICBwZGZWaWV3ZXIuc2V0RG9jdW1lbnQocGRmRG9jdW1lbnQpXHJcbiAgICAgICAgLy9wZGZDdXJzb3JUb29scy5zd2l0Y2hUb29sKDEpO1xyXG4gICAgICAgIHRlbXBsYXRlbW9kLnRlbXBsYXRlSW5pdCgpO1xyXG5cclxuICAgICAgICBpZiAoaW1wb3J0RGF0YSA9PT0gbnVsbCB8fCBpbXBvcnREYXRhID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjaGVja1BhZ2VWaWV3c1JlYWR5KHBkZlZpZXdlci5wYWdlVmlld3NSZWFkeSwgaW1wb3J0RGF0YSk7XHJcbiAgICB9KVxyXG5cclxuICAgIF9fdGVtcGxhdGVPd25lck5vZGUucXVlcnlTZWxlY3RvcihcIiNcIiArIFwiWm9vbS1PdXQtQnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBkb2N1bWVudFpvb21PdXQpO1xyXG4gICAgX190ZW1wbGF0ZU93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFwiI1wiICsgXCJab29tLUluLUJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZG9jdW1lbnRab29tSW4pO1xyXG4gICAgX190ZW1wbGF0ZU93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFwiIC5CdXR0b24tSWNvbi1Db21wb25lbnRcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhpZGVTaG93U2lkZVBhbmVsKTtcclxuXHJcbiAgICBfX3RlbXBsYXRlT3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoXCIgLkVkaXRvci1Db21wb25lbnRfQm94ID4gZGl2ID4gdWwgPiBsaVwiKS5mb3JFYWNoKChlbCkgPT4ge1xyXG4gICAgICAgIGlmICghVXRpbHMuaXNFbXB0eU9iamVjdChlbC5vbmNsaWNrKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmaWVsZFNlbGVjdFRvb2wsIHRydWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgX190ZW1wbGF0ZU93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFwiIC5FZGl0b3ItVG9vbGJhci1Hcm91cC5MZWZ0ID4gYnV0dG9uLlVuZG8tQnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB1bmRvQWN0aW9uKTtcclxuICAgIFxyXG4gICAgX190ZW1wbGF0ZU93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFwiIC5FZGl0b3ItVG9vbGJhci1Hcm91cC5MZWZ0ID4gYnV0dG9uLlJlZG8tQnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCByZWRvQWN0aW9uKTtcclxuXHJcbiAgICBfX3RlbXBsYXRlT3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXCIgLkVkaXRvci1Ub29sYmFyLUdyb3VwLlJpZ2h0ICBidXR0b24uQWxpZ24tTGVmdC1CdXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNvcnRGaWVsZEFsaWdMZWZ0KTtcclxuICAgIF9fdGVtcGxhdGVPd25lck5vZGUucXVlcnlTZWxlY3RvcihcIiAuRWRpdG9yLVRvb2xiYXItR3JvdXAuUmlnaHQgIGJ1dHRvbi5BbGlnbi1DZW50ZXItQnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzb3J0RmllbGRBbGlnSENlbnRlcik7XHJcbiAgICBfX3RlbXBsYXRlT3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXCIgLkVkaXRvci1Ub29sYmFyLUdyb3VwLlJpZ2h0ICBidXR0b24uQWxpZ24tUmlnaHQtQnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzb3J0RmllbGRBbGlnUmlnaHQpO1xyXG4gICAgX190ZW1wbGF0ZU93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFwiIC5FZGl0b3ItVG9vbGJhci1Hcm91cC5SaWdodCAgYnV0dG9uLkFsaWduLVRvcC1CdXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNvcnRGaWVsZEFsaWdUb3ApO1xyXG4gICAgX190ZW1wbGF0ZU93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFwiIC5FZGl0b3ItVG9vbGJhci1Hcm91cC5SaWdodCAgYnV0dG9uLkFsaWduLU1pZGRsZS1CdXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNvcnRGaWVsZEFsaWdWQ2VudGVyKTtcclxuICAgIF9fdGVtcGxhdGVPd25lck5vZGUucXVlcnlTZWxlY3RvcihcIiAuRWRpdG9yLVRvb2xiYXItR3JvdXAuUmlnaHQgIGJ1dHRvbi5BbGlnbi1Cb3R0b20tQnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzb3J0RmllbGRBbGlnQm90dG9tKTtcclxuXHJcbiAgICBfX3RlbXBsYXRlT3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXCIjc2NhbGVTZWxlY3RDb250YWluZXJcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNob3dTY2FsZVNlbGVjdG9yKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgIGNoYW5nZUxheWVyU2l6ZShldmVudCk7XHJcbiAgICB9LCB0cnVlKTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24gVGVtcGxhdGUgRmllbGTsoJXrs7Trpbwg67CY7ZmY7ZWc64ukLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHtPYmplY3R9IFRlbXBsYXRlIEZpZWxkIOygleuztFxyXG4gKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAqIEBNZXRob2QgTmFtZSA6IGdldEpzb25EYXRhXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0SnNvbkRhdGEoKSB7XHJcbiAgICByZXR1cm4gdGVtcGxhdGVtb2QuZXhwb3J0RmllbGREYXRhKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24gVGVtcGxhdGXsl5DshJwg7IKs7Jqp7ZaI642YIOuNsOydtO2EsOuTpOydhCDstIjquLDtmZTtlZzri6QuXHJcbiAqXHJcbiAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICogQE1ldGhvZCBOYW1lIDogcmVsZWFzZVRlbXBsYXRlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVsZWFzZVRlbXBsYXRlKCkge1xyXG5cclxuICAgIGxldCB0YXJnZXRFbEJ0biA9IF9fdGVtcGxhdGVPd25lck5vZGUucXVlcnlTZWxlY3RvcihcIiNFZGl0b3ItQ29tcG9uZW50LUFjdGl2ZS1CdXR0b25cIik7XHJcbiAgICBsZXQgdGFyZ2V0RWxQYW5lbCA9IF9fdGVtcGxhdGVPd25lck5vZGUucXVlcnlTZWxlY3RvcihcIiNFZGl0b3ItQ29tcG9uZW50XCIpO1xyXG4gICAgaWYgKHRhcmdldEVsQnRuLmNsYXNzTGlzdC5jb250YWlucyhcIkxlZnQtUGFuZWwtQnRuLUhpZGUtQW5pbWF0aW9uXCIpKSB7XHJcbiAgICAgICAgdGFyZ2V0RWxCdG4uY2xhc3NMaXN0LnRvZ2dsZShcIkxlZnQtUGFuZWwtQnRuLUhpZGUtQW5pbWF0aW9uXCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRhcmdldEVsUGFuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwiTGVmdC1QYW5lbC1IaWRlLUFuaW1hdGlvblwiKSkge1xyXG4gICAgICAgIHRhcmdldEVsUGFuZWwuY2xhc3NMaXN0LnRvZ2dsZShcIkxlZnQtUGFuZWwtSGlkZS1BbmltYXRpb25cIik7XHJcbiAgICB9XHJcbiAgICBpZiAodGFyZ2V0RWxCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKFwiTGVmdC1QYW5lbC1CdG4tU2hvdy1BbmltYXRpb25cIikpIHtcclxuICAgICAgICB0YXJnZXRFbEJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiTGVmdC1QYW5lbC1CdG4tU2hvdy1BbmltYXRpb25cIik7XHJcbiAgICB9XHJcbiAgICBpZiAodGFyZ2V0RWxQYW5lbC5jbGFzc0xpc3QuY29udGFpbnMoXCJMZWZ0LVBhbmVsLVNob3ctQW5pbWF0aW9uXCIpKSB7XHJcbiAgICAgICAgdGFyZ2V0RWxQYW5lbC5jbGFzc0xpc3QudG9nZ2xlKFwiTGVmdC1QYW5lbC1TaG93LUFuaW1hdGlvblwiKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdGVtcGxhdGVMYXllciA9IF9fdGVtcGxhdGVPd25lck5vZGUucXVlcnlTZWxlY3RvcihcIiNcIiArIENPTlNUQU5UUy5URU1QTEFURV9MQVlFUl9OQU1FKTtcclxuICAgIGlmICh0ZW1wbGF0ZUxheWVyICE9PSBudWxsKSB7XHJcbiAgICAgICAgVXRpbHMucmVtb3ZlQWxsQ2hpbGROb2RlKHRlbXBsYXRlTGF5ZXIpO1xyXG4gICAgfVxyXG4gICAgbGV0IGFzdGVyaXNrTGF5ZXIgPSBfX3RlbXBsYXRlT3duZXJOb2RlLnF1ZXJ5U2VsZWN0b3IoXCIjXCIgKyBDT05TVEFOVFMuVEVNUExBVEVfTEFZRVJfQVNURVJJU0tfTkFNRSk7XHJcbiAgICBpZiAoYXN0ZXJpc2tMYXllciAhPT0gbnVsbCkge1xyXG4gICAgICAgIFV0aWxzLnJlbW92ZUFsbENoaWxkTm9kZShhc3Rlcmlza0xheWVyKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiBGaWVsZOykkeyXkCDrsJjrk5zsi5wg7ISk7KCV7ZW07JW865CgIOyGjeyEseydtCDshKTsoJUg65CY7Ja07J6I64qU7KeAIOyytO2BrO2VnOuLpC5cclxuICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gKiBATWV0aG9kIE5hbWUgOiBjaGVja1RlbXBsYXRlRmllbGREYXRhXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tUZW1wbGF0ZUZpZWxkRGF0YSgpIHtcclxuICAgIHJldHVybiB0ZW1wbGF0ZW1vZC5jaGVja1RlbXBsYXRlRmllbGREYXRhKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24g7ZiE7J6sIOyWuOyWtOulvCDtjIzrnbzrr7jthLDsl5Ag66ee6rKMIOuzgO2ZmO2VnOuLpC5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGxvY2FsZSDrsJTqv4Ag7Ja47Ja0XHJcbiAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICogQE1ldGhvZCBOYW1lIDogY2hhbmdlVGVtcGxhdGVMb2NhbGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGFuZ2VUZW1wbGF0ZUxvY2FsZShsb2NhbGUpIHtcclxuICAgIFV0aWxzLmNoYW5nZUxvY2FsZShsb2NhbGUpO1xyXG4gICAgdGVtcGxhdGVtb2QuYnVpbGRGaWVsZGZvcm1lckxpc3QoKTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24gIOuLpOq1reyWtCDslrjslrQg7YyM7J287J2YIOychOy5mOulvCDsp4DsoJXtlZzri6QuXHJcbiAqIEBleGFtcGxlXHJcbiAqIGxvY2FsaG9zdDo1NTAwL2pzL3BkZl9mb3JtL2kxOG7snZgg6rK97JqwICBcIi9qcy9wZGZfZm9ybS9pMThuXCJcclxuICogaW5pdERvY3VtZW50IOydtOyghOyXkCDtmLjstpzsnbQg65CY7Ja07JW87ZWc64ukLlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gZmlsZXNMb2NhdGlvbiDslrjslrTtjIzsnbzsnZgg7JyE7LmYKOygiOuMgCDqsr3roZwpXHJcbiAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICogQE1ldGhvZCBOYW1lIDogY2hhbmdlVHJhbnNsYXRvckZpbGVMb2NhdGlvblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNoYW5nZVRyYW5zbGF0b3JGaWxlTG9jYXRpb24obGNhdGlvbikge1xyXG4gICAgVXRpbHMudHJhbnNsYXRvckZpbGVMb2NhdGlvbihsY2F0aW9uKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiAg64uk6rWt7Ja0IOyWuOyWtOulvCDstpTqsIDtlZzri6QuXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBsb2NhbGUg7Ja47Ja0IOydtOumhFxyXG4gKiBAcGFyYW0ge09iamVjdH0gbGFuZ0RhdGEgaTE4bi9rby5qc29u6rO8IOqwmeydgCDslpHsi53snLzroZwg65CcIEpTT07snYQg7YyM7Iux7ZWcIOuNsOydtO2EsFxyXG4gKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAqIEBNZXRob2QgTmFtZSA6IGFkZFRyYW5zbGF0b3JcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRUcmFuc2xhdG9yKGxvY2FsZSwgbGFuZ0RhdGEpIHtcclxuICAgIFV0aWxzLmFkZFRyYW5zbGF0b3IobG9jYWxlLCBsYW5nRGF0YSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjb3B5RmllbGQoKSB7XHJcbiAgICB0ZW1wbGF0ZW1vZC5jb3B5T2JqZWN0KCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXN0ZUZpZWxkKCkge1xyXG4gICAgdGVtcGxhdGVtb2QucGFzdGVPYmplY3QoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiBQYWdl7J2YIOuGkuydtOulvCDqs4TsgrDtlZzri6QuXHJcbiAqXHJcbiAqIEBwYXJhbSB7RWxlbWVudH0gUERGLmpz7JeQ7IScIOunjOuToCBQYWdlIEVsZW1lbnQgOiDqs4TsgrDtlaAgUGFnZSBFbGVtZW50XHJcbiAqIEByZXR1cm4ge051bWJlcn0gUGFnZSBIZWlnaHRcclxuICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gKiBATWV0aG9kIE5hbWUgOiBjYWxjUGFnZUhlaWdodFxyXG4gKi9cclxuIGZ1bmN0aW9uIGNhbGNQYWdlSGVpZ2h0KHBhZ2VFbGVtZW50KSB7XHJcbiAgICB2YXIgc3R5bGUgPSBwYWdlRWxlbWVudC5kaXYuY3VycmVudFN0eWxlIHx8IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHBhZ2VFbGVtZW50LmRpdik7XHJcbiAgICBjb25zdCBtYXJnaW5IZWlnaHQgPSBwYXJzZUZsb2F0KHN0eWxlLm1hcmdpblRvcCkgKyBwYXJzZUZsb2F0KHN0eWxlLm1hcmdpbkJvdHRvbSk7XHJcbiAgICBjb25zdCBwYWRkaW5nSGVpZ2h0ID0gcGFyc2VGbG9hdChzdHlsZS5wYWRkaW5nVG9wKSArIHBhcnNlRmxvYXQoc3R5bGUucGFkZGluZ0JvdHRvbSk7XHJcbiAgICBjb25zdCBib3JkZXJIZWlnaHQgPSBwYXJzZUZsb2F0KHN0eWxlLmJvcmRlclRvcFdpZHRoKSArIHBhcnNlRmxvYXQoc3R5bGUuYm9yZGVyQm90dG9tV2lkdGgpO1xyXG4gICAgcmV0dXJuIHBhZ2VFbGVtZW50LmhlaWdodCArIG1hcmdpbkhlaWdodCArIHBhZGRpbmdIZWlnaHQgKyBib3JkZXJIZWlnaHQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24gUGRmLmpz7JeQ7IScIHBhZ2VWaWV3c1JlYWR56rCAIHRydWXrkKDrlYwg6rmM7KeAIOyytO2BrO2VtOyEnCBUZW1wbGF0ZSBGaWVsZCBEYXRhIOy2lOqwgO2VnOuLpC5cclxuICpcclxuICogQHBhcmFtIHtCb29sZWFufSBvbGR2YWx1ZSBwYWdlVmlld3NSZWFkeeydmCDtmITsnqwg642w7J207YSw6rCSXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBpbXBvcnREYXRhICDstpTqsIDtlaAgVGVtcGxhdGUgRmllbGQgRGF0YVxyXG4gKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAqIEBNZXRob2QgTmFtZSA6IGNoZWNrUGFnZVZpZXdzUmVhZHlcclxuICovXHJcbmZ1bmN0aW9uIGNoZWNrUGFnZVZpZXdzUmVhZHkob2xkdmFsdWUsIGltcG9ydERhdGEpIHtcclxuICAgIHVuZGVmaW5lZCA9PT0gb2xkdmFsdWUgJiYgKG9sZHZhbHVlID0gcGRmVmlld2VyLnBhZ2VWaWV3c1JlYWR5KTtcclxuICAgIHZhciBjbGVhcmNoZWNrID0gc2V0SW50ZXJ2YWwocmVwZWF0Y2hlY2ssIDEwMCk7XHJcbiAgICBmdW5jdGlvbiByZXBlYXRjaGVjaygpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBkZlZpZXdlci5wYWdlVmlld3NSZWFkeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoXCJwYWdlVmlld3NSZWFkeVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGNsZWFyY2hlY2spO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICh0ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0ZXh0KTtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlbW9kLmltcG9ydEZpZWxkRGF0YShpbXBvcnREYXRhKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24gUERGIO2OmOydtOyngOydmCBMYXllcuyCrOydtOymiOqwgCDrs4DtlaAg65WM7J2YIOyymOumrOulvO2VnOuLpC5cclxuICpcclxuICogQHBhcmFtIHtFdmVudH0gZXZ0IGV2ZW50XHJcbiAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICogQE1ldGhvZCBOYW1lIDogY2hhbmdlTGF5ZXJTaXplXHJcbiAqL1xyXG4gZnVuY3Rpb24gY2hhbmdlTGF5ZXJTaXplKGV2dCkge1xyXG4gICAgbGV0IGhlaWdodCA9IDA7XHJcbiAgICBwZGZWaWV3ZXIuX3BhZ2VzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICBoZWlnaHQgKz0gY2FsY1BhZ2VIZWlnaHQoZWxlbWVudCk7XHJcbiAgICB9KTtcclxuICAgIHRlbXBsYXRlbW9kLnRlbXBsYXRlUmVzaXplKGV2dCwgaGVpZ2h0KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiAg66y47ISc7J2YIOuwsOycqOydhCDstpXshoztlZzri6QuXHJcbiAqXHJcbiAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICogQE1ldGhvZCBOYW1lIDogZG9jdW1lbnRab29tT3V0XHJcbiAqL1xyXG5mdW5jdGlvbiAgZG9jdW1lbnRab29tT3V0KCkge1xyXG4gICAgY29uc3QgY3VycmVudFZhbHVlID0gcGFyc2VGbG9hdChwZGZWaWV3ZXIuY3VycmVudFNjYWxlKTtcclxuICAgIHBkZlZpZXdlci5jdXJyZW50U2NhbGUgPSBjdXJyZW50VmFsdWUgLSAwLjE7XHJcbiAgICBzZXRTY2FsZVZhbHVlVGV4dChwZGZWaWV3ZXIuY3VycmVudFNjYWxlKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiAg66y47ISc7J2YIOuwsOycqOydhCDtmZXrjIDtlZzri6QuXHJcbiAqXHJcbiAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICogQE1ldGhvZCBOYW1lIDogZG9jdW1lbnRab29tSW5cclxuICovXHJcbmZ1bmN0aW9uICBkb2N1bWVudFpvb21JbigpIHtcclxuICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IHBhcnNlRmxvYXQocGRmVmlld2VyLmN1cnJlbnRTY2FsZSk7XHJcbiAgICBwZGZWaWV3ZXIuY3VycmVudFNjYWxlID0gY3VycmVudFZhbHVlICsgMC4xO1xyXG4gICAgc2V0U2NhbGVWYWx1ZVRleHQocGRmVmlld2VyLmN1cnJlbnRTY2FsZSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24gIOusuOyEnOydmCDrsLDsnKjsnYQg7ISk7KCV7ZWc64ukLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gIHZhbHVl66y47ISc7J2YIOuwsOycqFxyXG4gKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAqIEBNZXRob2QgTmFtZSA6IHNldFNjYWxlVmFsdWVUZXh0XHJcbiAqL1xyXG4gZnVuY3Rpb24gc2V0U2NhbGVWYWx1ZVRleHQodmFsdWUpIHtcclxuICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IE1hdGguZmxvb3IocGFyc2VGbG9hdCh2YWx1ZSkgKiAxMDApO1xyXG4gICAgIHZhciBlbGVtZW50ID0gX190ZW1wbGF0ZU93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFwiICNzY2FsZVNlbGVjdENvbnRhaW5lciA+IGFcIik7XHJcbiAgICBlbGVtZW50LnRleHRDb250ZW50ID0gY3VycmVudFZhbHVlICsgXCIlXCI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24gIOyCrOydtOuTnCDtjKjrhJDsnbQg67O07J206rOgIOyeiOycvOuptCDsiKjquLDqs6Ag7Iio6rKo7J6I7Jy866m0IOuztOydtOqyjO2VnOuLpC5cclxuICpcclxuICogQHBhcmFtIHtFdmVudH0gZXZlbnQgZXZlbnRcclxuICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gKiBATWV0aG9kIE5hbWUgOiBoaWRlU2hvd1NpZGVQYW5lbFxyXG4gKi9cclxuZnVuY3Rpb24gaGlkZVNob3dTaWRlUGFuZWwoZXZlbnQpIHtcclxuICAgIGxldCB0YXJnZXRFbEJ0biA9IF9fdGVtcGxhdGVPd25lck5vZGUucXVlcnlTZWxlY3RvcihcIiNFZGl0b3ItQ29tcG9uZW50LUFjdGl2ZS1CdXR0b25cIik7XHJcbiAgICBsZXQgdGFyZ2V0RWxQYW5lbCA9IF9fdGVtcGxhdGVPd25lck5vZGUucXVlcnlTZWxlY3RvcihcIiNFZGl0b3ItQ29tcG9uZW50XCIpO1xyXG4gICAgbGV0IGFycm93QnRuID0gX190ZW1wbGF0ZU93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFwiI0VkaXRvci1Db21wb25lbnQtQWN0aXZlLUJ1dHRvbiA+IC5CdXR0b24tSWNvbi1Db21wb25lbnQgLkFycm93LUJ0biBcIik7XHJcbiAgICBhcnJvd0J0bi5jbGFzc0xpc3QudG9nZ2xlKFwiUmV2ZXJzZS1CdG5cIik7XHJcbiAgICBpZiAoIXRhcmdldEVsQnRuLmNsYXNzTGlzdC5jb250YWlucyhcIkxlZnQtUGFuZWwtQnRuLUhpZGUtQW5pbWF0aW9uXCIpKSB7XHJcbiAgICAgICAgdGFyZ2V0RWxCdG4uY2xhc3NMaXN0LnRvZ2dsZShcIkxlZnQtUGFuZWwtQnRuLUhpZGUtQW5pbWF0aW9uXCIpO1xyXG4gICAgICAgIHRhcmdldEVsUGFuZWwuY2xhc3NMaXN0LnRvZ2dsZShcIkxlZnQtUGFuZWwtSGlkZS1BbmltYXRpb25cIik7XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0YXJnZXRFbEJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiTGVmdC1QYW5lbC1CdG4tU2hvdy1BbmltYXRpb25cIik7XHJcbiAgICAgICAgdGFyZ2V0RWxQYW5lbC5jbGFzc0xpc3QudG9nZ2xlKFwiTGVmdC1QYW5lbC1TaG93LUFuaW1hdGlvblwiKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiAg7IKs7J2065OcIO2MqOuEkOydtCDrs7TsnbTqs6Ag7J6I7Jy866m0IOyIqOq4sOqzoCDsiKjqsqjsnojsnLzrqbQg67O07J206rKM7ZWc64ukLlxyXG4gKlxyXG4gKiBAcGFyYW0ge0V2ZW50fSBldnQgZXZlbnRcclxuICogQERhdGUgOiAyMDIxLiA1LiAzMVxyXG4gKiBATWV0aG9kIE5hbWUgOiBoaWRlU2hvd1NpZGVQYW5lbFxyXG4gKi9cclxuZnVuY3Rpb24gZmllbGRTZWxlY3RUb29sKGV2dCkge1xyXG4gICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgY29uc3QgZWxlbWVudCA9IGV2dC50YXJnZXQuY2xvc2VzdChcImxpXCIpO1xyXG4gICAgY29uc3Qgc2VsZWN0VmFsdWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtaW5kZXhcIik7XHJcbiAgICB0ZW1wbGF0ZW1vZC5jbGVhclNlbGVjdGVkVG9vbCgpO1xyXG4gICAgaWYgKCFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcInNlbGVjdGVkXCIpKSB7XHJcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRcIik7XHJcbiAgICB9XHJcbiAgICB0ZW1wbGF0ZW1vZC5zZWxlY3RUb29sKHBhcnNlSW50KHNlbGVjdFZhbHVlKSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24gIHVuZG8gYnV0dG9uIGhhbmRsZXJcclxuICpcclxuICogQHBhcmFtIHtFdmVudH0gZXZ0ICBldmVudFxyXG4gKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAqIEBNZXRob2QgTmFtZSA6IHVuZG9BY3Rpb25cclxuICovXHJcbmZ1bmN0aW9uIHVuZG9BY3Rpb24oZXZ0KSB7XHJcbiAgICB0ZW1wbGF0ZW1vZC51bmRvQWN0aW9uKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24gIHJlZG8gYnV0dG9uIGhhbmRsZXJcclxuICpcclxuICogQHBhcmFtIHtFdmVudH0gZXZ0IGV2ZW50XHJcbiAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICogQE1ldGhvZCBOYW1lIDogcmVkb0FjdGlvblxyXG4gKi9cclxuZnVuY3Rpb24gcmVkb0FjdGlvbihldnQpIHtcclxuICAgIHRlbXBsYXRlbW9kLnJlZG9BY3Rpb24oKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiAgRmllbGTrk6TsnYQg7Jm87Kq965287J247JeQIOunnuy2sOyEnCDsoJXroKxcclxuICpcclxuICogQHBhcmFtIHtFdmVudH0gZXZ0IGV2ZW50XHJcbiAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICogQE1ldGhvZCBOYW1lIDogc29ydEZpZWxkQWxpZ0xlZnRcclxuICovXHJcbmZ1bmN0aW9uIHNvcnRGaWVsZEFsaWdMZWZ0KGV2dCkge1xyXG4gICAgdGVtcGxhdGVtb2Quc29ydEZpZWxkc0FsaWduKFwibGVmdFwiKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiAgRmllbGTrk6TsnYQg7Jik66W47Kq965287J247JeQIOunnuy2sOyEnCDsoJXroKxcclxuICpcclxuICogQHBhcmFtIHtFdmVudH0gZXZ0IGV2ZW50XHJcbiAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICogQE1ldGhvZCBOYW1lIDogc29ydEZpZWxkc0FsaWduXHJcbiAqL1xyXG5mdW5jdGlvbiBzb3J0RmllbGRBbGlnUmlnaHQoZXZ0KSB7XHJcbiAgICB0ZW1wbGF0ZW1vZC5zb3J0RmllbGRzQWxpZ24oXCJyaWdodFwiKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiAgRmllbGTrk6TsnYQgeOyijO2RnCDquLDspIDsnZgg7IS87YSw65287J247JeQIOunnuy2sOyEnCDsoJXroKxcclxuICpcclxuICogQHBhcmFtIHtFdmVudH0gZXZ0IGV2ZW50XHJcbiAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICogQE1ldGhvZCBOYW1lIDogc29ydEZpZWxkQWxpZ0hDZW50ZXJcclxuICovXHJcbmZ1bmN0aW9uIHNvcnRGaWVsZEFsaWdIQ2VudGVyKGV2dCkge1xyXG4gICAgdGVtcGxhdGVtb2Quc29ydEZpZWxkc0FsaWduKFwiaENlbnRlclwiKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiAgRmllbGTrk6TsnYQgVG9w65287J247JeQIOunnuy2sOyEnCDsoJXroKxcclxuICpcclxuICogQHBhcmFtIHtFdmVudH0gZXZ0IGV2ZW50XHJcbiAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICogQE1ldGhvZCBOYW1lIDogc29ydEZpZWxkQWxpZ1RvcFxyXG4gKi9cclxuZnVuY3Rpb24gc29ydEZpZWxkQWxpZ1RvcChldnQpIHtcclxuICAgIHRlbXBsYXRlbW9kLnNvcnRGaWVsZHNBbGlnbihcInRvcFwiKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBkZXNjcmlwdGlvbiAgRmllbGTrk6TsnYQgeeyijO2RnCDquLDspIDsnZgg7IS87YSw65287J247JeQIOunnuy2sOyEnCDsoJXroKxcclxuICpcclxuICogQHBhcmFtIHtFdmVudH0gZXZ0ICBldmVudFxyXG4gKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAqIEBNZXRob2QgTmFtZSA6IHNvcnRGaWVsZEFsaWdWQ2VudGVyXHJcbiAqL1xyXG5mdW5jdGlvbiBzb3J0RmllbGRBbGlnVkNlbnRlcihldnQpIHtcclxuICAgIHRlbXBsYXRlbW9kLnNvcnRGaWVsZHNBbGlnbihcInZDZW50ZXJcIik7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24gIEZpZWxk65Ok7J2EIEJvdHRvbeudvOyduOyXkCDrp57strDshJwg7KCV66CsXHJcbiAqXHJcbiAqIEBwYXJhbSB7RXZlbnR9IGV2dCBldmVudFxyXG4gKiBARGF0ZSA6IDIwMjEuIDUuIDMxXHJcbiAqIEBNZXRob2QgTmFtZSA6IHNvcnRGaWVsZEFsaWdCb3R0b21cclxuICovXHJcbmZ1bmN0aW9uIHNvcnRGaWVsZEFsaWdCb3R0b20oZXZ0KSB7XHJcbiAgICB0ZW1wbGF0ZW1vZC5zb3J0RmllbGRzQWxpZ24oXCJib3R0b21cIik7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb24gIFBERuusuOyEnOydmCDrsLDsnKggU2VsZWN066W8IOuztOyXrOykgOuLpC5cclxuICpcclxuICogQHBhcmFtIHtFdmVudH0gZXZ0IGV2ZW50XHJcbiAqIEBEYXRlIDogMjAyMS4gNS4gMzFcclxuICogQE1ldGhvZCBOYW1lIDogc2hvd1NjYWxlU2VsZWN0b3JcclxuICovXHJcbmZ1bmN0aW9uIHNob3dTY2FsZVNlbGVjdG9yKGV2dCkge1xyXG5cclxuICAgIGNvbnN0IHRhcmdldEJib3ggPSBldnQudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgbGV0IHNjYWxlQ29udGFpbmVyID0gX190ZW1wbGF0ZU93bmVyTm9kZS5xdWVyeVNlbGVjdG9yKFwiLlNjYWxlLVNlbGV0b3ItQ29udGFpbmVyXCIpO1xyXG4gICAgY29uc29sZS5sb2codGFyZ2V0QmJveCk7XHJcbiAgICBzY2FsZUNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gdGFyZ2V0QmJveC5sZWZ0ICsgXCJweFwiO1xyXG4gICAgc2NhbGVDb250YWluZXIuc3R5bGUudG9wID0gdGFyZ2V0QmJveC50b3AgKyBcInB4XCI7XHJcbiAgICBzY2FsZUNvbnRhaW5lci5zdHlsZS56SW5kZXggPSBcIi0xXCI7XHJcbiAgICBcclxuICAgIGlmIChzY2FsZUNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoXCJUZW1wbGF0ZS1IaWRlXCIpKSB7XHJcbiAgICAgICAgc2NhbGVDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcIlRlbXBsYXRlLUhpZGVcIik7XHJcbiAgICB9XHJcbiAgICBsZXQgc2NhbGVTZWxlY3QgPSBzY2FsZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpO1xyXG4gICAgaWYgKCEkKHNjYWxlU2VsZWN0KS5oYXNDbGFzcyhcInNlbGVjdDItaGlkZGVuLWFjY2Vzc2libGVcIikpIHtcclxuICAgICAgICAvLyBTZWxlY3QyIGhhcyBiZWVuIGluaXRpYWxpemVkXHJcbiAgICAgICAgJChzY2FsZVNlbGVjdCkuc2VsZWN0Mih7XHJcbiAgICAgICAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBJbmZpbml0eSxcclxuICAgICAgICAgICAgd2lkdGg6IFwiODBweFwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAkKHNjYWxlU2VsZWN0KS52YWwocGRmVmlld2VyLmN1cnJlbnRTY2FsZSkudHJpZ2dlcihcImNoYW5nZVwiKTtcclxuICAgICQoc2NhbGVTZWxlY3QpLnNlbGVjdDIoJ29wZW4nKTtcclxuICAgICQoc2NhbGVTZWxlY3QpLm9uKCdzZWxlY3QyOnNlbGVjdCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgLy8gRG8gc29tZXRoaW5nXHJcbiAgICAgICAgdmFyIGRhdGEgPSBlLnBhcmFtcy5kYXRhO1xyXG4gICAgICAgIHBkZlZpZXdlci5jdXJyZW50U2NhbGUgPSBkYXRhLmlkO1xyXG4gICAgICAgIHNldFNjYWxlVmFsdWVUZXh0KGRhdGEuaWQpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhcHBlbmRGb250RmFtaWx5KGZvbnRGYW1pbHlBcnIpIHtcclxuICAgIHRlbXBsYXRlbW9kLmFwcGVuZEZvbnRGYW1pbHkoZm9udEZhbWlseUFycik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhcHBlbmRTaWduVGFiU2hvd09wdChzaWduVGFiU2hvd0RlZk9wdFZhbCkge1xyXG4gIHRlbXBsYXRlbW9kLmFwcGVuZFNpZ25UYWJTaG93T3B0KHNpZ25UYWJTaG93RGVmT3B0VmFsKTtcclxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==