!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("PDFCursorTools",[],t):"object"==typeof exports?exports.PDFCursorTools=t():e.PDFCursorTools=t()}(this,(()=>(()=>{"use strict";var e={d:(t,o)=>{for(var s in o)e.o(o,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:o[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{PDFCursorTools:()=>i}),!document.documentMode||document.documentMode;const o=window.chrome;let s;o&&(o.webstore||o.app),/Apple/.test(navigator.vendor)&&/Version\/([6-9]\d*|[1-5]\d+)/.test(navigator.userAgent),["webkitM","mozM","msM","oM","m"].some((function(e){let t=e+"atches";return t in document.documentElement&&(s=t),t+="Selector",t in document.documentElement&&(s=t),s}));class i{constructor({container:e,eventBus:t,cursorToolOnLoad:o=1}){this.container=e,this.eventBus=t,this.active=0,this.activeBeforePresentationMode=null,this.handTool=new GrabToPan({element:this.container}),this._addEventListeners(),Promise.resolve().then((()=>{this.switchTool(o)}))}get activeTool(){return this.active}switchTool(e){if(null!==this.activeBeforePresentationMode)return;if(e===this.active)return;const t=()=>{switch(this.active){case 0:break;case 1:this.handTool.deactivate()}};switch(e){case 0:t();break;case 1:t(),this.handTool.activate();break;case 2:break;default:return void console.error(`switchTool: "${e}" is an unsupported value.`)}this.active=e,this._dispatchEvent()}_dispatchEvent(){this.eventBus.dispatch("cursortoolchanged",{source:this,tool:this.active})}_addEventListeners(){this.eventBus._on("switchcursortool",(e=>{this.switchTool(e.tool)})),this.eventBus._on("presentationmodechanged",(e=>{if(e.switchInProgress)return;let t;e.active?(t=this.active,this.switchTool(0),this.activeBeforePresentationMode=t):(t=this.activeBeforePresentationMode,this.activeBeforePresentationMode=null,this.switchTool(t))}))}}return t})()));